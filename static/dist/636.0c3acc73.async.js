!(function(){var TI=(gt,G)=>(G=Symbol[gt])?G:Symbol.for("Symbol."+gt),bde=gt=>{throw TypeError(gt)},vf=Math.pow;var AI=(gt,G,L)=>new Promise((q,W)=>{var E=ue=>{try{ee(L.next(ue))}catch(ce){W(ce)}},de=ue=>{try{ee(L.throw(ue))}catch(ce){W(ce)}},ee=ue=>ue.done?q(ue.value):Promise.resolve(ue.value).then(E,de);ee((L=L.apply(gt,G)).next())}),xde=function(gt,G){this[0]=gt,this[1]=G};var _j=gt=>{var G=gt[TI("asyncIterator")],L=!1,q,W={};return G==null?(G=gt[TI("iterator")](),q=E=>W[E]=de=>G[E](de)):(G=G.call(gt),q=E=>W[E]=de=>{if(L){if(L=!1,E==="throw")throw de;return de}return L=!0,{done:!1,value:new xde(new Promise(ee=>{var ue=G[E](de);ue instanceof Object||bde("Object expected"),ee(ue)}),1)}}),W[TI("iterator")]=()=>W,q("next"),"throw"in G?q("throw"):W.throw=E=>{throw E},"return"in G&&q("return"),W};(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[636],{25330:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};G.default=L},67303:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};G.default=L},83647:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};G.default=L},57583:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};G.default=L},29260:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};G.default=L},25828:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};G.default=L},64183:function(gt,G,L){"use strict";var q=L(67294),W=L(85591),E=function(){return E=Object.assign||function(ee){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(ee[ae]=ue[ae])}return ee},E.apply(this,arguments)},de=(0,q.forwardRef)(function(ee,ue){return q.createElement(W.P,E({},ee,{chartType:"Area",ref:ue}))});G.Z=de},79611:function(gt,G,L){"use strict";var q=L(67294),W=L(85591),E=function(){return E=Object.assign||function(ee){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(ee[ae]=ue[ae])}return ee},E.apply(this,arguments)},de=(0,q.forwardRef)(function(ee,ue){return q.createElement(W.P,E({},ee,{chartType:"Bar",ref:ue}))});G.Z=de},85591:function(gt,G,L){"use strict";L.d(G,{P:function(){return mde}});var q={};L.r(q),L.d(q,{area:function(){return tW},bottom:function(){return Pg},bottomLeft:function(){return Pg},bottomRight:function(){return Pg},inside:function(){return Pg},left:function(){return Pg},outside:function(){return iW},right:function(){return Pg},spider:function(){return aW},surround:function(){return lW},top:function(){return Pg},topLeft:function(){return Pg},topRight:function(){return Pg}});var W={};L.r(W),L.d(W,{interpolateBlues:function(){return GZ},interpolateBrBG:function(){return SZ},interpolateBuGn:function(){return IZ},interpolateBuPu:function(){return DZ},interpolateCividis:function(){return qZ},interpolateCool:function(){return nX},interpolateCubehelixDefault:function(){return eX},interpolateGnBu:function(){return LZ},interpolateGreens:function(){return WZ},interpolateGreys:function(){return ZZ},interpolateInferno:function(){return cX},interpolateMagma:function(){return uX},interpolateOrRd:function(){return NZ},interpolateOranges:function(){return $Z},interpolatePRGn:function(){return wZ},interpolatePiYG:function(){return TZ},interpolatePlasma:function(){return fX},interpolatePuBu:function(){return BZ},interpolatePuBuGn:function(){return FZ},interpolatePuOr:function(){return AZ},interpolatePuRd:function(){return kZ},interpolatePurples:function(){return XZ},interpolateRainbow:function(){return rX},interpolateRdBu:function(){return CZ},interpolateRdGy:function(){return OZ},interpolateRdPu:function(){return zZ},interpolateRdYlBu:function(){return MZ},interpolateRdYlGn:function(){return RZ},interpolateReds:function(){return YZ},interpolateSinebow:function(){return aX},interpolateSpectral:function(){return PZ},interpolateTurbo:function(){return sX},interpolateViridis:function(){return lX},interpolateWarm:function(){return tX},interpolateYlGn:function(){return jZ},interpolateYlGnBu:function(){return UZ},interpolateYlOrBr:function(){return VZ},interpolateYlOrRd:function(){return HZ},schemeAccent:function(){return qW},schemeBlues:function(){return e6},schemeBrBG:function(){return DL},schemeBuGn:function(){return VL},schemeBuPu:function(){return HL},schemeCategory10:function(){return $W},schemeDark2:function(){return KW},schemeGnBu:function(){return GL},schemeGreens:function(){return t6},schemeGreys:function(){return n6},schemeObservable10:function(){return QW},schemeOrRd:function(){return WL},schemeOranges:function(){return o6},schemePRGn:function(){return LL},schemePaired:function(){return JW},schemePastel1:function(){return eZ},schemePastel2:function(){return tZ},schemePiYG:function(){return NL},schemePuBu:function(){return XL},schemePuBuGn:function(){return ZL},schemePuOr:function(){return FL},schemePuRd:function(){return YL},schemePurples:function(){return r6},schemeRdBu:function(){return BL},schemeRdGy:function(){return kL},schemeRdPu:function(){return $L},schemeRdYlBu:function(){return zL},schemeRdYlGn:function(){return UL},schemeReds:function(){return i6},schemeSet1:function(){return nZ},schemeSet2:function(){return rZ},schemeSet3:function(){return iZ},schemeSpectral:function(){return jL},schemeTableau10:function(){return oZ},schemeYlGn:function(){return KL},schemeYlGnBu:function(){return qL},schemeYlOrBr:function(){return QL},schemeYlOrRd:function(){return JL}});var E={};L.r(E),L.d(E,{geoAlbers:function(){return xz},geoAlbersUsa:function(){return Qre},geoAzimuthalEqualArea:function(){return Jre},geoAzimuthalEqualAreaRaw:function(){return M5},geoAzimuthalEquidistant:function(){return eie},geoAzimuthalEquidistantRaw:function(){return R5},geoConicConformal:function(){return nie},geoConicConformalRaw:function(){return wz},geoConicEqualArea:function(){return GA},geoConicEqualAreaRaw:function(){return bz},geoConicEquidistant:function(){return iie},geoConicEquidistantRaw:function(){return Tz},geoEqualEarth:function(){return aie},geoEqualEarthRaw:function(){return P5},geoEquirectangular:function(){return rie},geoEquirectangularRaw:function(){return NE},geoGnomonic:function(){return sie},geoGnomonicRaw:function(){return I5},geoIdentity:function(){return lie},geoMercator:function(){return tie},geoMercatorRaw:function(){return LE},geoNaturalEarth1:function(){return uie},geoNaturalEarth1Raw:function(){return D5},geoOrthographic:function(){return cie},geoOrthographicRaw:function(){return L5},geoProjection:function(){return Im},geoProjectionMutator:function(){return C5},geoStereographic:function(){return fie},geoStereographicRaw:function(){return N5},geoTransverseMercator:function(){return hie},geoTransverseMercatorRaw:function(){return F5}});var de={};L.r(de),L.d(de,{frequency:function(){return hae},id:function(){return dae},name:function(){return pae},weight:function(){return fae}});var ee=L(67294),ue=L(73935),ce=L.t(ue,2),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)},ae=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},We=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},te=xe({},ce),me=te.version,Re=te.render,$=te.unmountComponentAtNode,le;try{var K=Number((me||"").split(".")[0]);K>=18&&(le=te.createRoot)}catch(e){}function we(e){var t=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var et="__rc_react_root__";function Je(e,t){we(!0);var n=t[et]||le(t);we(!1),n.render(e),t[et]=n}function wt(e,t){Re(e,t)}function pt(e,t){}function _t(e,t){if(le){Je(e,t);return}wt(e,t)}function Me(e){return ae(this,void 0,void 0,function(){return We(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[et])===null||n===void 0||n.unmount(),delete e[et]})]})})}function Ae(e){$(e)}function je(e){}function Ze(e){return ae(this,void 0,void 0,function(){return We(this,function(t){return le!==void 0?[2,Me(e)]:(Ae(e),[2])})})}var lt=new Map;lt.set("tooltip",document.createElement("div"));var en=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=lt.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=lt.get(e.key);r?n=r:lt.set(e.key,n)}return _t(e,n),n},Le=function(e){var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},St=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=ee.useRef(null);ee.useEffect(function(){!t&&i.current&&Le(i.current)},[]);var s=function(){return t||ee.createElement("div",{ref:i})};return ee.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},s())},Oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||ee.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ee.createElement(ee.Fragment,null,this.props.children)},t}(ee.Component),Ke=typeof global=="object"&&global&&global.Object===Object&&global,Xe=Ke,Rt=typeof self=="object"&&self&&self.Object===Object&&self,bt=Xe||Rt||Function("return this")(),Ie=bt,Gt=Ie.Symbol,mn=Gt,Ln=Object.prototype,qn=Ln.hasOwnProperty,rr=Ln.toString,Ft=mn?mn.toStringTag:void 0;function Jt(e){var t=qn.call(e,Ft),n=e[Ft];try{e[Ft]=void 0;var r=!0}catch(s){}var i=rr.call(e);return r&&(t?e[Ft]=n:delete e[Ft]),i}var un=Jt,Vn=Object.prototype,on=Vn.toString;function Dt(e){return on.call(e)}var Vt=Dt,ze="[object Null]",rt="[object Undefined]",jt=mn?mn.toStringTag:void 0;function U(e){return e==null?e===void 0?rt:ze:jt&&jt in Object(e)?un(e):Vt(e)}var pe=U;function ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var he=ct,$t="[object AsyncFunction]",sn="[object Function]",pn="[object GeneratorFunction]",Dn="[object Proxy]";function Wn(e){if(!he(e))return!1;var t=pe(e);return t==sn||t==pn||t==$t||t==Dn}var Yn=Wn,fn=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},vt=Array.isArray,Pt=vt;function An(){this.__data__=[],this.size=0}var Pn=An;function Xn(e,t){return e===t||e!==e&&t!==t}var dt=Xn;function Se(e,t){for(var n=e.length;n--;)if(dt(e[n][0],t))return n;return-1}var Be=Se,st=Array.prototype,Lt=st.splice;function It(e){var t=this.__data__,n=Be(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Lt.call(t,n,1),--this.size,!0}var wn=It;function Kn(e){var t=this.__data__,n=Be(t,e);return n<0?void 0:t[n][1]}var _r=Kn;function Jn(e){return Be(this.__data__,e)>-1}var Pe=Jn;function Te(e,t){var n=this.__data__,r=Be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var ke=Te;function it(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}it.prototype.clear=Pn,it.prototype.delete=wn,it.prototype.get=_r,it.prototype.has=Pe,it.prototype.set=ke;var At=it;function Yt(){this.__data__=new At,this.size=0}var hn=Yt;function Et(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Kt=Et;function er(e){return this.__data__.get(e)}var br=er;function Vr(e){return this.__data__.has(e)}var vr=Vr,Ur=Ie["__core-js_shared__"],_i=Ur,Ai=function(){var e=/[^.]+$/.exec(_i&&_i.keys&&_i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wr(e){return!!Ai&&Ai in e}var Ei=wr,hi=Function.prototype,ai=hi.toString;function Io(e){if(e!=null){try{return ai.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var xi=Io,Qo=/[\\^$.*+?()[\]{}|]/g,ga=/^\[object .+?Constructor\]$/,Po=Function.prototype,$o=Object.prototype,Fe=Po.toString,ot=$o.hasOwnProperty,Ut=RegExp("^"+Fe.call(ot).replace(Qo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ln(e){if(!he(e)||Ei(e))return!1;var t=Yn(e)?Ut:ga;return t.test(xi(e))}var Nn=ln;function Fn(e,t){return e==null?void 0:e[t]}var gn=Fn;function Cn(e,t){var n=gn(e,t);return Nn(n)?n:void 0}var pr=Cn,hr=pr(Ie,"Map"),ei=hr,ji=pr(Object,"create"),Ji=ji;function ti(){this.__data__=Ji?Ji(null):{},this.size=0}var Gi=ti;function Ni(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Gr=Ni,So="__lodash_hash_undefined__",fi=Object.prototype,Eo=fi.hasOwnProperty;function Wi(e){var t=this.__data__;if(Ji){var n=t[e];return n===So?void 0:n}return Eo.call(t,e)?t[e]:void 0}var io=Wi,Ao=Object.prototype,xs=Ao.hasOwnProperty;function ya(e){var t=this.__data__;return Ji?t[e]!==void 0:xs.call(t,e)}var ra=ya,gs="__lodash_hash_undefined__";function as(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ji&&t===void 0?gs:t,this}var Ct=as;function Wt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Wt.prototype.clear=Gi,Wt.prototype.delete=Gr,Wt.prototype.get=io,Wt.prototype.has=ra,Wt.prototype.set=Ct;var jn=Wt;function Lr(){this.size=0,this.__data__={hash:new jn,map:new(ei||At),string:new jn}}var Si=Lr;function Zi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Jo=Zi;function Hs(e,t){var n=e.__data__;return Jo(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Is=Hs;function Us(e){var t=Is(this,e).delete(e);return this.size-=t?1:0,t}var dl=Us;function Ph(e){return Is(this,e).get(e)}var Up=Ph;function hh(e){return Is(this,e).has(e)}var uu=hh;function Df(e,t){var n=Is(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Jc=Df;function cu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cu.prototype.clear=Si,cu.prototype.delete=dl,cu.prototype.get=Up,cu.prototype.has=uu,cu.prototype.set=Jc;var Eu=cu,ef=200;function Lf(e,t){var n=this.__data__;if(n instanceof At){var r=n.__data__;if(!ei||r.length<ef-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Eu(r)}return n.set(e,t),this.size=n.size,this}var fu=Lf;function Ds(e){var t=this.__data__=new At(e);this.size=t.size}Ds.prototype.clear=hn,Ds.prototype.delete=Kt,Ds.prototype.get=br,Ds.prototype.has=vr,Ds.prototype.set=fu;var $u=Ds,tf="__lodash_hash_undefined__";function _d(e){return this.__data__.set(e,tf),this}var tp=_d;function dh(e){return this.__data__.has(e)}var bd=dh;function ph(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Eu;++t<n;)this.add(e[t])}ph.prototype.add=ph.prototype.push=tp,ph.prototype.has=bd;var Ih=ph;function Dh(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var xd=Dh;function c0(e,t){return e.has(t)}var nf=c0,Fc=1,Ed=2;function Gl(e,t,n,r,i,s){var l=n&Fc,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var y=-1,b=!0,T=n&Ed?new Ih:void 0;for(s.set(e,t),s.set(t,e);++y<c;){var M=e[y],R=t[y];if(r)var I=l?r(R,M,y,t,e,s):r(M,R,y,e,t,s);if(I!==void 0){if(I)continue;b=!1;break}if(T){if(!xd(t,function(N,z){if(!nf(T,z)&&(M===N||i(M,N,n,r,s)))return T.push(z)})){b=!1;break}}else if(!(M===R||i(M,R,n,r,s))){b=!1;break}}return s.delete(e),s.delete(t),b}var xc=Gl,rf=Ie.Uint8Array,hu=rf;function Bc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var uc=Bc;function mf(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Fl=mf,of=1,gf=2,Sd="[object Boolean]",wd="[object Date]",ys="[object Error]",np="[object Map]",Xf="[object Number]",Lh="[object RegExp]",pl="[object Set]",Nh="[object String]",oe="[object Symbol]",_e="[object ArrayBuffer]",tt="[object DataView]",cn=mn?mn.prototype:void 0,En=cn?cn.valueOf:void 0;function re(e,t,n,r,i,s,l){switch(n){case tt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _e:return!(e.byteLength!=t.byteLength||!s(new hu(e),new hu(t)));case Sd:case wd:case Xf:return dt(+e,+t);case ys:return e.name==t.name&&e.message==t.message;case Lh:case Nh:return e==t+"";case np:var c=uc;case pl:var h=r&of;if(c||(c=Fl),e.size!=t.size&&!h)return!1;var p=l.get(e);if(p)return p==t;r|=gf,l.set(e,t);var v=xc(c(e),c(t),r,i,s,l);return l.delete(e),v;case oe:if(En)return En.call(e)==En.call(t)}return!1}var Nr=re;function Di(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Vi=Di;function xo(e,t,n){var r=t(e);return Pt(e)?r:Vi(r,n(e))}var yo=xo;function za(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var l=e[n];t(l,n,e)&&(s[i++]=l)}return s}var ba=za;function go(){return[]}var Ua=go,ja=Object.prototype,xa=ja.propertyIsEnumerable,Es=Object.getOwnPropertySymbols,$a=Es?function(e){return e==null?[]:(e=Object(e),ba(Es(e),function(t){return xa.call(e,t)}))}:Ua,Ea=$a;function Va(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var js=Va;function Ql(e){return e!=null&&typeof e=="object"}var Xs=Ql,cl="[object Arguments]";function af(e){return Xs(e)&&pe(e)==cl}var Fh=af,kc=Object.prototype,du=kc.hasOwnProperty,Td=kc.propertyIsEnumerable,Ad=Fh(function(){return arguments}())?Fh:function(e){return Xs(e)&&du.call(e,"callee")&&!Td.call(e,"callee")},yf=Ad;function Nf(){return!1}var sf=Nf,vh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mh=vh&&typeof module=="object"&&module&&!module.nodeType&&module,Ff=mh&&mh.exports===vh,f0=Ff?Ie.Buffer:void 0,rp=f0?f0.isBuffer:void 0,jp=rp||sf,_f=jp,h0=9007199254740991,ip=/^(?:0|[1-9]\d*)$/;function Cd(e,t){var n=typeof e;return t=t==null?h0:t,!!t&&(n=="number"||n!="symbol"&&ip.test(e))&&e>-1&&e%1==0&&e<t}var bf=Cd,Vp=9007199254740991;function gh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vp}var op=gh,Yf="[object Arguments]",Ks="[object Array]",Od="[object Boolean]",xf="[object Date]",$f="[object Error]",La="[object Function]",fe="[object Map]",Ge="[object Number]",xt="[object Object]",Rn="[object RegExp]",ur="[object Set]",Fr="[object String]",ci="[object WeakMap]",Ri="[object ArrayBuffer]",Wo="[object DataView]",Go="[object Float32Array]",la="[object Float64Array]",ol="[object Int8Array]",Al="[object Int16Array]",Ss="[object Int32Array]",eo="[object Uint8Array]",Bl="[object Uint8ClampedArray]",yh="[object Uint16Array]",Bh="[object Uint32Array]",qa={};qa[Go]=qa[la]=qa[ol]=qa[Al]=qa[Ss]=qa[eo]=qa[Bl]=qa[yh]=qa[Bh]=!0,qa[Yf]=qa[Ks]=qa[Ri]=qa[Od]=qa[Wo]=qa[xf]=qa[$f]=qa[La]=qa[fe]=qa[Ge]=qa[xt]=qa[Rn]=qa[ur]=qa[Fr]=qa[ci]=!1;function Ls(e){return Xs(e)&&op(e.length)&&!!qa[pe(e)]}var lf=Ls;function Fi(e){return function(t){return e(t)}}var Ef=Fi,Md=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_h=Md&&typeof module=="object"&&module&&!module.nodeType&&module,Sf=_h&&_h.exports===Md,cc=Sf&&Xe.process,d0=function(){try{var e=_h&&_h.require&&_h.require("util").types;return e||cc&&cc.binding&&cc.binding("util")}catch(t){}}(),bh=d0,qu=bh&&bh.isTypedArray,qf=qu?Ef(qu):lf,p0=qf,Rd=Object.prototype,v0=Rd.hasOwnProperty;function rv(e,t){var n=Pt(e),r=!n&&yf(e),i=!n&&!r&&_f(e),s=!n&&!r&&!i&&p0(e),l=n||r||i||s,c=l?js(e.length,String):[],h=c.length;for(var p in e)(t||v0.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||bf(p,h)))&&c.push(p);return c}var fc=rv,zc=Object.prototype;function wa(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zc;return e===n}var hc=wa;function uf(e,t){return function(n){return e(t(n))}}var Su=uf,kh=Su(Object.keys,Object),Jl=kh,Vu=Object.prototype,Ku=Vu.hasOwnProperty;function ap(e){if(!hc(e))return Jl(e);var t=[];for(var n in Object(e))Ku.call(e,n)&&n!="constructor"&&t.push(n);return t}var No=ap;function To(e){return e!=null&&op(e.length)&&!Yn(e)}var eu=To;function Qu(e){return eu(e)?fc(e):No(e)}var Ju=Qu;function vl(e){return yo(e,Ju,Ea)}var Ec=vl,Kf=1,Pd=Object.prototype,Cs=Pd.hasOwnProperty;function wu(e,t,n,r,i,s){var l=n&Kf,c=Ec(e),h=c.length,p=Ec(t),v=p.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var b=c[y];if(!(l?b in t:Cs.call(t,b)))return!1}var T=s.get(e),M=s.get(t);if(T&&M)return T==t&&M==e;var R=!0;s.set(e,t),s.set(t,e);for(var I=l;++y<h;){b=c[y];var N=e[b],z=t[b];if(r)var H=l?r(z,N,b,t,e,s):r(N,z,b,e,t,s);if(!(H===void 0?N===z||i(N,z,n,r,s):H)){R=!1;break}I||(I=b=="constructor")}if(R&&!I){var X=e.constructor,Y=t.constructor;X!=Y&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof Y=="function"&&Y instanceof Y)&&(R=!1)}return s.delete(e),s.delete(t),R}var m0=wu,zh=pr(Ie,"DataView"),sp=zh,xh=pr(Ie,"Promise"),ec=xh,lp=pr(Ie,"Set"),Sc=lp,Hp=pr(Ie,"WeakMap"),Uc=Hp,Id="[object Map]",g0="[object Object]",Eh="[object Promise]",Uh="[object Set]",y0="[object WeakMap]",Bf="[object DataView]",kf=xi(sp),_0=xi(ei),Qf=xi(ec),wf=xi(Sc),iv=xi(Uc),zf=pe;(sp&&zf(new sp(new ArrayBuffer(1)))!=Bf||ei&&zf(new ei)!=Id||ec&&zf(ec.resolve())!=Eh||Sc&&zf(new Sc)!=Uh||Uc&&zf(new Uc)!=y0)&&(zf=function(e){var t=pe(e),n=t==g0?e.constructor:void 0,r=n?xi(n):"";if(r)switch(r){case kf:return Bf;case _0:return Id;case Qf:return Eh;case wf:return Uh;case iv:return y0}return t});var jh=zf,b0=1,_="[object Arguments]",S="[object Array]",x="[object Object]",O=Object.prototype,k=O.hasOwnProperty;function Z(e,t,n,r,i,s){var l=Pt(e),c=Pt(t),h=l?S:jh(e),p=c?S:jh(t);h=h==_?x:h,p=p==_?x:p;var v=h==x,y=p==x,b=h==p;if(b&&_f(e)){if(!_f(t))return!1;l=!0,v=!1}if(b&&!v)return s||(s=new $u),l||p0(e)?xc(e,t,n,r,i,s):Nr(e,t,h,n,r,i,s);if(!(n&b0)){var T=v&&k.call(e,"__wrapped__"),M=y&&k.call(t,"__wrapped__");if(T||M){var R=T?e.value():e,I=M?t.value():t;return s||(s=new $u),i(R,I,n,r,s)}}return b?(s||(s=new $u),m0(e,t,n,r,i,s)):!1}var Q=Z;function ge(e,t,n,r,i){return e===t?!0:e==null||t==null||!Xs(e)&&!Xs(t)?e!==e&&t!==t:Q(e,t,n,r,ge,i)}var Ve=ge;function ht(e,t){return Ve(e,t)}var zt=ht;function Ht(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Zt=Ht,xn=function(){try{var e=pr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),vn=xn;function Un(e,t,n){t=="__proto__"&&vn?vn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var an=Un,kn=Object.prototype,nr=kn.hasOwnProperty;function mr(e,t,n){var r=e[t];(!(nr.call(e,t)&&dt(r,n))||n===void 0&&!(t in e))&&an(e,t,n)}var Rr=mr;function Ar(e,t,n,r){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],h=r?r(n[c],e[c],c,n,e):void 0;h===void 0&&(h=e[c]),i?an(n,c,h):Rr(n,c,h)}return n}var zr=Ar;function ni(e,t){return e&&zr(t,Ju(t),e)}var zi=ni;function Li(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var co=Li,Uo=Object.prototype,Zo=Uo.hasOwnProperty;function Xo(e){if(!he(e))return co(e);var t=hc(e),n=[];for(var r in e)r=="constructor"&&(t||!Zo.call(e,r))||n.push(r);return n}var cs=Xo;function Pr(e){return eu(e)?fc(e,!0):cs(e)}var Qt=Pr;function da(e,t){return e&&zr(t,Qt(t),e)}var ha=da,qo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_a=qo&&typeof module=="object"&&module&&!module.nodeType&&module,aa=_a&&_a.exports===qo,Fo=aa?Ie.Buffer:void 0,pu=Fo?Fo.allocUnsafe:void 0;function Cl(e,t){if(t)return e.slice();var n=e.length,r=pu?pu(n):new e.constructor(n);return e.copy(r),r}var Du=Cl;function vu(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var ws=vu;function wl(e,t){return zr(e,Ea(e),t)}var ml=wl,dc=Su(Object.getPrototypeOf,Object),Uf=dc,wc=Object.getOwnPropertySymbols,cf=wc?function(e){for(var t=[];e;)Vi(t,Ea(e)),e=Uf(e);return t}:Ua,jc=cf;function up(e,t){return zr(e,jc(e),t)}var cp=up;function Sh(e){return yo(e,Qt,jc)}var Vh=Sh,Hh=Object.prototype,Jf=Hh.hasOwnProperty;function Ci(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Jf.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var kl=Ci;function zl(e){var t=new e.constructor(e.byteLength);return new hu(t).set(new hu(e)),t}var tc=zl;function Tf(e,t){var n=t?tc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var jf=Tf,Wa=/\w*$/;function Tu(e){var t=new e.constructor(e.source,Wa.exec(e));return t.lastIndex=e.lastIndex,t}var Ol=Tu,Af=mn?mn.prototype:void 0,Gp=Af?Af.valueOf:void 0;function Gh(e){return Gp?Object(Gp.call(e)):{}}var Wp=Gh;function Wh(e,t){var n=t?tc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Zh=Wh,eh="[object Boolean]",x0="[object Date]",Bv="[object Map]",Dd="[object Number]",pc="[object RegExp]",jg="[object Set]",t_="[object String]",fp="[object Symbol]",Vg="[object ArrayBuffer]",n_="[object DataView]",Hg="[object Float32Array]",kv="[object Float64Array]",w1="[object Int8Array]",Zp="[object Int16Array]",Dm="[object Int32Array]",Xp="[object Uint8Array]",zv="[object Uint8ClampedArray]",Lm="[object Uint16Array]",Nm="[object Uint32Array]";function Fm(e,t,n){var r=e.constructor;switch(t){case Vg:return tc(e);case eh:case x0:return new r(+e);case n_:return jf(e,n);case Hg:case kv:case w1:case Zp:case Dm:case Xp:case zv:case Lm:case Nm:return Zh(e,n);case Bv:return new r;case Dd:case t_:return new r(e);case pc:return Ol(e);case jg:return new r;case fp:return Wp(e)}}var Gg=Fm,ov=Object.create,av=function(){function e(){}return function(t){if(!he(t))return{};if(ov)return ov(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),sv=av;function lv(e){return typeof e.constructor=="function"&&!hc(e)?sv(Uf(e)):{}}var uv=lv,hp="[object Map]";function ff(e){return Xs(e)&&jh(e)==hp}var gl=ff,Ld=bh&&bh.isMap,E0=Ld?Ef(Ld):gl,S0=E0,Yp="[object Set]";function dp(e){return Xs(e)&&jh(e)==Yp}var $p=dp,pp=bh&&bh.isSet,th=pp?Ef(pp):$p,Vf=th,qp=1,r_=2,Xh=4,Nd="[object Arguments]",Yh="[object Array]",$h="[object Boolean]",Uv="[object Date]",jv="[object Error]",hf="[object Function]",Fd="[object GeneratorFunction]",Bm="[object Map]",i_="[object Number]",Wg="[object Object]",km="[object RegExp]",Kp="[object Set]",Vv="[object String]",qh="[object Symbol]",cv="[object WeakMap]",Bd="[object ArrayBuffer]",vp="[object DataView]",Zg="[object Float32Array]",mp="[object Float64Array]",Hv="[object Int8Array]",Gv="[object Int16Array]",nc="[object Int32Array]",vc="[object Uint8Array]",Au="[object Uint8ClampedArray]",Cf="[object Uint16Array]",zm="[object Uint32Array]",Za={};Za[Nd]=Za[Yh]=Za[Bd]=Za[vp]=Za[$h]=Za[Uv]=Za[Zg]=Za[mp]=Za[Hv]=Za[Gv]=Za[nc]=Za[Bm]=Za[i_]=Za[Wg]=Za[km]=Za[Kp]=Za[Vv]=Za[qh]=Za[vc]=Za[Au]=Za[Cf]=Za[zm]=!0,Za[jv]=Za[hf]=Za[cv]=!1;function Qp(e,t,n,r,i,s){var l,c=t&qp,h=t&r_,p=t&Xh;if(n&&(l=i?n(e,r,i,s):n(e)),l!==void 0)return l;if(!he(e))return e;var v=Pt(e);if(v){if(l=kl(e),!c)return ws(e,l)}else{var y=jh(e),b=y==hf||y==Fd;if(_f(e))return Du(e,c);if(y==Wg||y==Nd||b&&!i){if(l=h||b?{}:uv(e),!c)return h?cp(e,ha(l,e)):ml(e,zi(l,e))}else{if(!Za[y])return i?e:{};l=Gg(e,y,c)}}s||(s=new $u);var T=s.get(e);if(T)return T;s.set(e,l),Vf(e)?e.forEach(function(I){l.add(Qp(I,t,n,I,e,s))}):S0(e)&&e.forEach(function(I,N){l.set(N,Qp(I,t,n,N,e,s))});var M=p?h?Vh:Ec:h?Qt:Ju,R=v?void 0:M(e);return Zt(R||e,function(I,N){R&&(N=I,I=e[N]),Rr(l,N,Qp(I,t,n,N,e,s))}),l}var Um=Qp,o_=1,Xg=4;function Wv(e){return Um(e,o_|Xg)}var fv=Wv,mc="[object Symbol]";function a_(e){return typeof e=="symbol"||Xs(e)&&pe(e)==mc}var kd=a_,hv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yg=/^\w*$/;function w0(e,t){if(Pt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||kd(e)?!0:Yg.test(e)||!hv.test(e)||t!=null&&e in Object(t)}var gp=w0,s_="Expected a function";function Zv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(s_);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var l=e.apply(this,r);return n.cache=s.set(i,l)||s,l};return n.cache=new(Zv.Cache||Eu),n}Zv.Cache=Eu;var $g=Zv,Ue=500;function qt(e){var t=$g(e,function(r){return n.size===Ue&&n.clear(),r}),n=t.cache;return t}var On=qt,Cr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$r=/\\(\\)?/g,Mr=On(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cr,function(n,r,i,s){t.push(i?s.replace($r,"$1"):r||n)}),t}),yr=Mr;function Oi(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var di=Oi,ki=1/0,Mi=mn?mn.prototype:void 0,Bi=Mi?Mi.toString:void 0;function Xi(e){if(typeof e=="string")return e;if(Pt(e))return di(e,Xi)+"";if(kd(e))return Bi?Bi.call(e):"";var t=e+"";return t=="0"&&1/e==-ki?"-0":t}var mi=Xi;function Ui(e){return e==null?"":mi(e)}var dr=Ui;function Br(e,t){return Pt(e)?e:gp(e,t)?[e]:yr(dr(e))}var gi=Br,oo=1/0;function ii(e){if(typeof e=="string"||kd(e))return e;var t=e+"";return t=="0"&&1/e==-oo?"-0":t}var to=ii;function bi(e,t){t=gi(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[to(t[n++])];return n&&n==r?e:void 0}var no=bi;function li(e,t,n){var r=e==null?void 0:no(e,t);return r===void 0?n:r}var pi=li,jo=function(){return jo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jo.apply(this,arguments)},pa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ki(e,t){var n=(0,ee.useRef)(),r=(0,ee.useRef)(),i=(0,ee.useRef)(null),s=t.onReady,l=t.onEvent,c=function(v,y){var b;v===void 0&&(v="image/png");var T=(b=i.current)===null||b===void 0?void 0:b.getElementsByTagName("canvas")[0];return T==null?void 0:T.toDataURL(v,y)},h=function(v,y,b){v===void 0&&(v="download"),y===void 0&&(y="image/png");var T=v;v.indexOf(".")===-1&&(T="".concat(v,".").concat(y.split("/")[1]));var M=c(y,b),R=document.createElement("a");return R.href=M,R.download=T,document.body.appendChild(R),R.click(),document.body.removeChild(R),R=null,T},p=function(v,y){y===void 0&&(y=!1);var b=Object.keys(v),T=y;b.forEach(function(M){var R=v[M];M==="tooltip"&&(T=!0),Yn(R)&&fn("".concat(R))?v[M]=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];return en(R.apply(void 0,I),T)}:Pt(R)?R.forEach(function(I){p(I,T)}):he(R)?p(R,T):T=y})};return(0,ee.useEffect)(function(){if(n.current&&!zt(r.current,t)){var v=!1;if(r.current){var y=r.current,b=y.data,T=pa(y,["data"]),M=t.data,R=pa(t,["data"]);v=zt(T,R)}r.current=fv(t),v?n.current.changeData(pi(t,"data")):(p(t),n.current.update(t),n.current.render())}},[t]),(0,ee.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=fv(t)),p(t);var v=new e(i.current,jo({},t));v.toDataURL=c,v.downloadImage=h,v.render(),n.current=v,s&&s(v);var y=function(b){l&&l(v,b)};return v.on("*",y),function(){n.current&&(n.current.destroy(),n.current.off("*",y),n.current=void 0)}},[]),{chart:n,container:i}}var wi="*",qr=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[t]||[],l=this._events[wi]||[],c=function(h){for(var p=h.length,v=0;v<p;v++)if(h[v]){var y=h[v],b=y.callback,T=y.once;T&&(h.splice(v,1),h.length===0&&delete n._events[t],p--,v--),b.apply(n,r)}};c(s),c(l)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,s=0;s<i;s++)r[s].callback===n&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),Bo=qr;const Ca="main-layer",so="label-layer",va="element",ua="view",Ko="plot",ds="component",Wl="label",mu="area",es="mask",Zl={};function Qs(e,t){Object.assign(Zl,{[e]:t})}var se=L(97582),tu=L(38554),fl=tu,or=L(77160),Qr=L(85975),Js=L(49685);function Oa(){var e=new Js.WT(9);return Js.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Hu(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Ns(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function oa(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Pa(e,t,n,r,i,s,l,c,h){var p=new Js.WT(9);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=l,p[7]=c,p[8]=h,p}function ts(e,t,n,r,i,s,l,c,h,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=c,e[7]=h,e[8]=p,e}function gu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function wh(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function _n(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=v*l-c*p,b=-v*s+c*h,T=p*s-l*h,M=n*y+r*b+i*T;return M?(M=1/M,e[0]=y*M,e[1]=(-v*r+i*p)*M,e[2]=(c*r-i*l)*M,e[3]=b*M,e[4]=(v*n-i*h)*M,e[5]=(-c*n+i*s)*M,e[6]=T*M,e[7]=(-p*n+r*h)*M,e[8]=(l*n-r*s)*M,e):null}function Or(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8];return e[0]=l*v-c*p,e[1]=i*p-r*v,e[2]=r*c-i*l,e[3]=c*h-s*v,e[4]=n*v-i*h,e[5]=i*s-n*c,e[6]=s*p-l*h,e[7]=r*h-n*p,e[8]=n*l-r*s,e}function Sr(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*(p*s-l*h)+n*(-p*i+l*c)+r*(h*i-s*c)}function lo(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1],M=n[2],R=n[3],I=n[4],N=n[5],z=n[6],H=n[7],X=n[8];return e[0]=b*r+T*l+M*p,e[1]=b*i+T*c+M*v,e[2]=b*s+T*h+M*y,e[3]=R*r+I*l+N*p,e[4]=R*i+I*c+N*v,e[5]=R*s+I*h+N*y,e[6]=z*r+H*l+X*p,e[7]=z*i+H*c+X*v,e[8]=z*s+H*h+X*y,e}function Na(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=l,e[4]=c,e[5]=h,e[6]=b*r+T*l+p,e[7]=b*i+T*c+v,e[8]=b*s+T*h+y,e}function el(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=Math.sin(n),T=Math.cos(n);return e[0]=T*r+b*l,e[1]=T*i+b*c,e[2]=T*s+b*h,e[3]=T*l-b*r,e[4]=T*c-b*i,e[5]=T*h-b*s,e[6]=p,e[7]=v,e[8]=y,e}function Nt(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function rn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Mn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Tr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Er(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Hn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n+n,c=r+r,h=i+i,p=n*l,v=r*l,y=r*c,b=i*l,T=i*c,M=i*h,R=s*l,I=s*c,N=s*h;return e[0]=1-y-M,e[3]=v-N,e[6]=b+I,e[1]=v+N,e[4]=1-p-M,e[7]=T-R,e[2]=b-I,e[5]=T+R,e[8]=1-p-y,e}function tr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=t[9],b=t[10],T=t[11],M=t[12],R=t[13],I=t[14],N=t[15],z=n*c-r*l,H=n*h-i*l,X=n*p-s*l,Y=r*h-i*c,ne=r*p-s*c,ve=i*p-s*h,ye=v*R-y*M,De=v*I-b*M,Ye=v*N-T*M,Qe=y*I-b*R,yt=y*N-T*R,qe=b*N-T*I,ut=z*qe-H*yt+X*Qe+Y*Ye-ne*De+ve*ye;return ut?(ut=1/ut,e[0]=(c*qe-h*yt+p*Qe)*ut,e[1]=(h*Ye-l*qe-p*De)*ut,e[2]=(l*yt-c*Ye+p*ye)*ut,e[3]=(i*yt-r*qe-s*Qe)*ut,e[4]=(n*qe-i*Ye+s*De)*ut,e[5]=(r*Ye-n*yt-s*ye)*ut,e[6]=(R*ve-I*ne+N*Y)*ut,e[7]=(I*X-M*ve-N*H)*ut,e[8]=(M*ne-R*X+N*z)*ut,e):null}function ar(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Sn(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Zn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function tn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function $n(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function kr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function jr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function vi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function oi(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],v=e[8],y=t[0],b=t[1],T=t[2],M=t[3],R=t[4],I=t[5],N=t[6],z=t[7],H=t[8];return Math.abs(n-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(c-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(v-H)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))}var yi=null,Do=null,Hi=L(98333);function Yi(){var e=new Js.WT(4);return Js.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ia(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ea(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function _s(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Lu(e,t){var n=Jp(e,t);return Math.acos(2*n*n-1)}function Tc(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=n[0],h=n[1],p=n[2],v=n[3];return e[0]=r*v+l*c+i*p-s*h,e[1]=i*v+l*h+s*c-r*p,e[2]=s*v+l*p+r*h-i*c,e[3]=l*v-r*c-i*h-s*p,e}function yp(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+l*c,e[1]=i*h+s*c,e[2]=s*h-i*c,e[3]=l*h-r*c,e}function nh(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h-s*c,e[1]=i*h+l*c,e[2]=s*h+r*c,e[3]=l*h-i*c,e}function Xv(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+i*c,e[1]=i*h-r*c,e[2]=s*h+l*c,e[3]=l*h-s*c,e}function _p(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function jm(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=Math.exp(s),h=l>0?c*Math.sin(l)/l:0;return e[0]=n*h,e[1]=r*h,e[2]=i*h,e[3]=c*Math.cos(l),e}function dv(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=l>0?Math.atan2(l,s)/l:0;return e[0]=n*c,e[1]=r*c,e[2]=i*c,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function _x(e,t,n){return dv(e,t),A1(e,e,n),jm(e,e),e}function qg(e,t,n,r){var i=t[0],s=t[1],l=t[2],c=t[3],h=n[0],p=n[1],v=n[2],y=n[3],b,T,M,R,I;return T=i*h+s*p+l*v+c*y,T<0&&(T=-T,h=-h,p=-p,v=-v,y=-y),1-T>Js.Ib?(b=Math.acos(T),M=Math.sin(b),R=Math.sin((1-r)*b)/M,I=Math.sin(r*b)/M):(R=1-r,I=r),e[0]=R*i+I*h,e[1]=R*s+I*p,e[2]=R*l+I*v,e[3]=R*c+I*y,e}function T1(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function T0(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n+r*r+i*i+s*s,c=l?1/l:0;return e[0]=-n*c,e[1]=-r*c,e[2]=-i*c,e[3]=s*c,e}function bx(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Vm(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,l=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[l*3+l]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[l]=(t[l*3+i]+t[i*3+l])*r}return e}function Kg(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),l=Math.cos(t),c=Math.sin(n),h=Math.cos(n),p=Math.sin(r),v=Math.cos(r);return e[0]=s*h*v-l*c*p,e[1]=l*c*v+s*h*p,e[2]=l*h*p-s*c*v,e[3]=l*h*v+s*c*p,e}function rc(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Xl=Hi.d9,Hm=Hi.al,Yv=Hi.JG,QE=Hi.t8,l_=Hi.IH,pv=Tc,A1=Hi.bA,Jp=Hi.AK,A0=Hi.t7,Gm=Hi.kE,Gu=null,Wm=Hi.we,yu=null,vv=Hi.Fv,u_=Hi.I6,al=Hi.fS,Zm=function(){var e=or.Ue(),t=or.al(1,0,0),n=or.al(0,1,0);return function(r,i,s){var l=or.AK(i,s);return l<-.999999?(or.kC(e,t,i),or.Zh(e)<1e-6&&or.kC(e,n,i),or.Fv(e,e),ea(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(or.kC(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,vv(r,r))}}(),Kh=function(){var e=Yi(),t=Yi();return function(n,r,i,s,l,c){return qg(e,r,l,c),qg(t,i,s,c),qg(n,e,t,2*c*(1-c)),n}}(),Xm=function(){var e=Oa();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],vv(t,Vm(t,e))}}(),$v=L(31437),Yl=L(25897);function tl(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Sa=L(95147),Ym=L(95456),u=function(e){return(0,Ym.Z)(e,"String")},d=L(81957),g={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function A(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return g[n]===t.length-1&&"achlmqstvz".includes(n)})}function P(e){return A(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function F(e){return P(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var j={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function J(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=g[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,g[n]))),!!g[n]););}function be(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function Ne(e){return e>=48&&e<=57||e===43||e===45||e===46}function $e(e){return e>=48&&e<=57}function at(e){var t=e.max,n=e.pathValue,r=e.index,i=r,s=!1,l=!1,c=!1,h=!1,p;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(p=n.charCodeAt(i),(p===43||p===45)&&(i+=1,p=n.charCodeAt(i)),!$e(p)&&p!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(p!==46){if(s=p===48,i+=1,p=n.charCodeAt(i),s&&i<t&&p&&$e(p)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&$e(n.charCodeAt(i));)i+=1,l=!0;p=n.charCodeAt(i)}if(p===46){for(h=!0,i+=1;$e(n.charCodeAt(i));)i+=1,c=!0;p=n.charCodeAt(i)}if(p===101||p===69){if(h&&!l&&!c){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,p=n.charCodeAt(i),(p===43||p===45)&&(i+=1),i<t&&$e(n.charCodeAt(i)))for(;i<t&&$e(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function Tt(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function Bt(e){for(var t=e.pathValue,n=e.max;e.index<n&&Tt(t.charCodeAt(e.index));)e.index+=1}function dn(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function yn(e){return(e|32)===97}function Gn(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),s=g[n[r].toLowerCase()];if(e.segmentStart=r,!dn(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,Bt(e),e.data=[],!s){J(e);return}for(;;){for(var l=s;l>0;l-=1){if(yn(i)&&(l===3||l===4)?be(e):at(e),e.err.length)return;e.data.push(e.param),Bt(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,Bt(e))}if(e.index>=e.max||!Ne(n.charCodeAt(e.index)))break}J(e)}var In=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function cr(e){if(A(e))return[].concat(e);var t=new In(e);for(Bt(t);t.index<t.max&&!t.err.length;)Gn(t);return t.err?t.err:t.segments}function gr(e){if(P(e))return[].concat(e);var t=cr(e),n=0,r=0,i=0,s=0;return t.map(function(l){var c=l.slice(1).map(Number),h=l[0],p=h.toUpperCase();if(h==="M")return n=c[0],r=c[1],i=n,s=r,["M",n,r];var v;if(h!==p)switch(p){case"A":v=[p,c[0],c[1],c[2],c[3],c[4],c[5]+n,c[6]+r];break;case"V":v=[p,c[0]+r];break;case"H":v=[p,c[0]+n];break;default:{var y=c.map(function(T,M){return T+(M%2?r:n)});v=[p].concat(y)}}else v=[p].concat(c);var b=v.length;switch(p){case"Z":n=i,r=s;break;case"H":n=v[1];break;case"V":r=v[1];break;default:n=v[b-2],r=v[b-1],p==="M"&&(i=n,s=r)}return v})}function Ir(e,t){var n=e[0],r=t.x1,i=t.y1,s=t.x2,l=t.y2,c=e.slice(1).map(Number),h=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")h=["L",e[1],i];else if(n==="V")h=["L",r,e[1]];else if(n==="S"){var p=r*2-s,v=i*2-l;t.x1=p,t.y1=v,h=["C",p,v].concat(c)}else if(n==="T"){var y=r*2-t.qx,b=i*2-t.qy;t.qx=y,t.qy=b,h=["Q",y,b].concat(c)}else if(n==="Q"){var T=c[0],M=c[1];t.qx=T,t.qy=M}return h}function Dr(e){if(F(e))return[].concat(e);for(var t=gr(e),n=(0,se.pi)({},j),r=0;r<t.length;r+=1){t[r]=Ir(t[r],n);var i=t[r],s=i.length;n.x1=+i[s-2],n.y1=+i[s-1],n.x2=+i[s-4]||n.x1,n.y2=+i[s-3]||n.y1}return t}function Wr(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return[r+(s-r)*n,i+(l-i)*n]}function Ii(e,t,n,r,i){var s=tl([e,t],[n,r]),l={x:0,y:0};if(typeof i=="number")if(i<=0)l={x:e,y:t};else if(i>=s)l={x:n,y:r};else{var c=Wr([e,t],[n,r],i/s),h=c[0],p=c[1];l={x:h,y:p}}return{length:s,point:l,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function $i(e,t){var n=e.x,r=e.y,i=t.x,s=t.y,l=n*i+r*s,c=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(s,2))),h=n*s-r*i<0?-1:1,p=h*Math.acos(l/c);return p}function ko(e,t,n,r,i,s,l,c,h,p){var v=Math.abs,y=Math.sin,b=Math.cos,T=Math.sqrt,M=Math.PI,R=v(n),I=v(r),N=(i%360+360)%360,z=N*(M/180);if(e===c&&t===h)return{x:e,y:t};if(R===0||I===0)return Ii(e,t,c,h,p).point;var H=(e-c)/2,X=(t-h)/2,Y={x:b(z)*H+y(z)*X,y:-y(z)*H+b(z)*X},ne=Math.pow(Y.x,2)/Math.pow(R,2)+Math.pow(Y.y,2)/Math.pow(I,2);ne>1&&(R*=T(ne),I*=T(ne));var ve=Math.pow(R,2)*Math.pow(I,2)-Math.pow(R,2)*Math.pow(Y.y,2)-Math.pow(I,2)*Math.pow(Y.x,2),ye=Math.pow(R,2)*Math.pow(Y.y,2)+Math.pow(I,2)*Math.pow(Y.x,2),De=ve/ye;De=De<0?0:De;var Ye=(s!==l?1:-1)*T(De),Qe={x:Ye*(R*Y.y/I),y:Ye*(-(I*Y.x)/R)},yt={x:b(z)*Qe.x-y(z)*Qe.y+(e+c)/2,y:y(z)*Qe.x+b(z)*Qe.y+(t+h)/2},qe={x:(Y.x-Qe.x)/R,y:(Y.y-Qe.y)/I},ut=$i({x:1,y:0},qe),ft={x:(-Y.x-Qe.x)/R,y:(-Y.y-Qe.y)/I},mt=$i(qe,ft);!l&&mt>0?mt-=2*M:l&&mt<0&&(mt+=2*M),mt%=2*M;var Xt=ut+mt*p,Mt=R*b(Xt),kt=I*y(Xt),Tn={x:b(z)*Mt-y(z)*kt+yt.x,y:y(z)*Mt+b(z)*kt+yt.y};return Tn}function fo(e,t,n,r,i,s,l,c,h,p,v){var y,b=v.bbox,T=b===void 0?!0:b,M=v.length,R=M===void 0?!0:M,I=v.sampleSize,N=I===void 0?30:I,z=typeof p=="number",H=e,X=t,Y=0,ne=[H,X,Y],ve=[H,X],ye=0,De={x:0,y:0},Ye=[{x:H,y:X}];z&&p<=0&&(De={x:H,y:X});for(var Qe=0;Qe<=N;Qe+=1){if(ye=Qe/N,y=ko(e,t,n,r,i,s,l,c,h,ye),H=y.x,X=y.y,T&&Ye.push({x:H,y:X}),R&&(Y+=tl(ve,[H,X])),ve=[H,X],z&&Y>=p&&p>ne[2]){var yt=(Y-p)/(Y-ne[2]);De={x:ve[0]*(1-yt)+ne[0]*yt,y:ve[1]*(1-yt)+ne[1]*yt}}ne=[H,X,Y]}return z&&p>=Y&&(De={x:c,y:h}),{length:Y,point:De,min:{x:Math.min.apply(null,Ye.map(function(qe){return qe.x})),y:Math.min.apply(null,Ye.map(function(qe){return qe.y}))},max:{x:Math.max.apply(null,Ye.map(function(qe){return qe.x})),y:Math.max.apply(null,Ye.map(function(qe){return qe.y}))}}}function Yo(e,t,n,r,i,s,l,c,h){var p=1-h;return{x:Math.pow(p,3)*e+3*Math.pow(p,2)*h*n+3*p*Math.pow(h,2)*i+Math.pow(h,3)*l,y:Math.pow(p,3)*t+3*Math.pow(p,2)*h*r+3*p*Math.pow(h,2)*s+Math.pow(h,3)*c}}function po(e,t,n,r,i,s,l,c,h,p){var v,y=p.bbox,b=y===void 0?!0:y,T=p.length,M=T===void 0?!0:T,R=p.sampleSize,I=R===void 0?10:R,N=typeof h=="number",z=e,H=t,X=0,Y=[z,H,X],ne=[z,H],ve=0,ye={x:0,y:0},De=[{x:z,y:H}];N&&h<=0&&(ye={x:z,y:H});for(var Ye=0;Ye<=I;Ye+=1){if(ve=Ye/I,v=Yo(e,t,n,r,i,s,l,c,ve),z=v.x,H=v.y,b&&De.push({x:z,y:H}),M&&(X+=tl(ne,[z,H])),ne=[z,H],N&&X>=h&&h>Y[2]){var Qe=(X-h)/(X-Y[2]);ye={x:ne[0]*(1-Qe)+Y[0]*Qe,y:ne[1]*(1-Qe)+Y[1]*Qe}}Y=[z,H,X]}return N&&h>=X&&(ye={x:l,y:c}),{length:X,point:ye,min:{x:Math.min.apply(null,De.map(function(yt){return yt.x})),y:Math.min.apply(null,De.map(function(yt){return yt.y}))},max:{x:Math.max.apply(null,De.map(function(yt){return yt.x})),y:Math.max.apply(null,De.map(function(yt){return yt.y}))}}}function Fa(e,t,n,r,i,s,l){var c=1-l;return{x:Math.pow(c,2)*e+2*c*l*n+Math.pow(l,2)*i,y:Math.pow(c,2)*t+2*c*l*r+Math.pow(l,2)*s}}function ca(e,t,n,r,i,s,l,c){var h,p=c.bbox,v=p===void 0?!0:p,y=c.length,b=y===void 0?!0:y,T=c.sampleSize,M=T===void 0?10:T,R=typeof l=="number",I=e,N=t,z=0,H=[I,N,z],X=[I,N],Y=0,ne={x:0,y:0},ve=[{x:I,y:N}];R&&l<=0&&(ne={x:I,y:N});for(var ye=0;ye<=M;ye+=1){if(Y=ye/M,h=Fa(e,t,n,r,i,s,Y),I=h.x,N=h.y,v&&ve.push({x:I,y:N}),b&&(z+=tl(X,[I,N])),X=[I,N],R&&z>=l&&l>H[2]){var De=(z-l)/(z-H[2]);ne={x:X[0]*(1-De)+H[0]*De,y:X[1]*(1-De)+H[1]*De}}H=[I,N,z]}return R&&l>=z&&(ne={x:i,y:s}),{length:z,point:ne,min:{x:Math.min.apply(null,ve.map(function(Ye){return Ye.x})),y:Math.min.apply(null,ve.map(function(Ye){return Ye.y}))},max:{x:Math.max.apply(null,ve.map(function(Ye){return Ye.x})),y:Math.max.apply(null,ve.map(function(Ye){return Ye.y}))}}}function Oo(e,t,n){for(var r,i,s,l,c,h,p=Dr(e),v=typeof t=="number",y,b=[],T,M=0,R=0,I=0,N=0,z,H=[],X=[],Y=0,ne={x:0,y:0},ve=ne,ye=ne,De=ne,Ye=0,Qe=0,yt=p.length;Qe<yt;Qe+=1)z=p[Qe],T=z[0],y=T==="M",b=y?b:[M,R].concat(z.slice(1)),y?(I=z[1],N=z[2],ne={x:I,y:N},ve=ne,Y=0,v&&t<.001&&(De=ne)):T==="L"?(r=Ii(b[0],b[1],b[2],b[3],(t||0)-Ye),Y=r.length,ne=r.min,ve=r.max,ye=r.point):T==="A"?(i=fo(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-Ye,n||{}),Y=i.length,ne=i.min,ve=i.max,ye=i.point):T==="C"?(s=po(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-Ye,n||{}),Y=s.length,ne=s.min,ve=s.max,ye=s.point):T==="Q"?(l=ca(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-Ye,n||{}),Y=l.length,ne=l.min,ve=l.max,ye=l.point):T==="Z"&&(b=[M,R,I,N],c=Ii(b[0],b[1],b[2],b[3],(t||0)-Ye),Y=c.length,ne=c.min,ve=c.max,ye=c.point),v&&Ye<t&&Ye+Y>=t&&(De=ye),X.push(ve),H.push(ne),Ye+=Y,h=T!=="Z"?z.slice(-2):[I,N],M=h[0],R=h[1];return v&&t>=Ye&&(De={x:M,y:R}),{length:Ye,point:De,min:{x:Math.min.apply(null,H.map(function(qe){return qe.x})),y:Math.min.apply(null,H.map(function(qe){return qe.y}))},max:{x:Math.max.apply(null,X.map(function(qe){return qe.x})),y:Math.max.apply(null,X.map(function(qe){return qe.y}))}}}function Xa(e,t){return Oo(e,void 0,(0,se.pi)((0,se.pi)({},t),{bbox:!1,length:!0})).length}var Vo=function(e){return Array.isArray?Array.isArray(e):(0,Ym.Z)(e,"Array")},ns=function(e){if(Vo(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},zo=function(e){if(Vo(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Os=1e-5;function sl(e,t,n){return n===void 0&&(n=Os),Math.abs(e-t)<n}var nu=function(e,t){return(e%t+t)%t},Ml=nu;function Rl(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function ru(e){return F(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function _u(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function Cu(e,t,n,r,i,s,l,c,h,p){var v=e,y=t,b=n,T=r,M=c,R=h,I=Math.PI*120/180,N=Math.PI/180*(+i||0),z=[],H,X,Y,ne,ve;if(p)X=p[0],Y=p[1],ne=p[2],ve=p[3];else{H=_u(v,y,-N),v=H.x,y=H.y,H=_u(M,R,-N),M=H.x,R=H.y;var ye=(v-M)/2,De=(y-R)/2,Ye=ye*ye/(b*b)+De*De/(T*T);Ye>1&&(Ye=Math.sqrt(Ye),b*=Ye,T*=Ye);var Qe=b*b,yt=T*T,qe=(s===l?-1:1)*Math.sqrt(Math.abs((Qe*yt-Qe*De*De-yt*ye*ye)/(Qe*De*De+yt*ye*ye)));ne=qe*b*De/T+(v+M)/2,ve=qe*-T*ye/b+(y+R)/2,X=Math.asin(((y-ve)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),Y=Math.asin(((R-ve)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),X=v<ne?Math.PI-X:X,Y=M<ne?Math.PI-Y:Y,X<0&&(X=Math.PI*2+X),Y<0&&(Y=Math.PI*2+Y),l&&X>Y&&(X-=Math.PI*2),!l&&Y>X&&(Y-=Math.PI*2)}var ut=Y-X;if(Math.abs(ut)>I){var ft=Y,mt=M,Xt=R;Y=X+I*(l&&Y>X?1:-1),M=ne+b*Math.cos(Y),R=ve+T*Math.sin(Y),z=Cu(M,R,b,T,i,0,l,mt,Xt,[Y,ft,ne,ve])}ut=Y-X;var Mt=Math.cos(X),kt=Math.sin(X),Tn=Math.cos(Y),zn=Math.sin(Y),lr=Math.tan(ut/4),ir=4/3*b*lr,Hr=4/3*T*lr,Ti=[v,y],ro=[v+ir*kt,y-Hr*Mt],si=[M+ir*zn,R-Hr*Tn],Xr=[M,R];if(ro[0]=2*Ti[0]-ro[0],ro[1]=2*Ti[1]-ro[1],p)return ro.concat(si,Xr,z);z=ro.concat(si,Xr,z);for(var mo=[],ho=0,Ho=z.length;ho<Ho;ho+=1)mo[ho]=ho%2?_u(z[ho-1],z[ho],N).y:_u(z[ho],z[ho+1],N).x;return mo}function Vc(e,t,n,r,i,s){var l=.3333333333333333,c=2/3;return[l*e+c*n,l*t+c*r,l*i+c*n,l*s+c*r,i,s]}var Wu=function(e,t,n,r){var i=.5,s=Wr([e,t],[n,r],i);return(0,se.ev)((0,se.ev)([],s,!0),[n,r,n,r],!1)};function Ac(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],s=r[1],l,c=t.x1,h=t.y1,p=t.x,v=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=s,e;case"A":return l=[c,h].concat(r),["C"].concat(Cu(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]));case"Q":return t.qx=i,t.qy=s,l=[c,h].concat(r),["C"].concat(Vc(l[0],l[1],l[2],l[3],l[4],l[5]));case"L":return["C"].concat(Wu(c,h,i,s));case"Z":return c===p&&h===v?["C",c,h,p,v,p,v]:["C"].concat(Wu(c,h,p,v));default:}return e}function $l(e,t){if(t===void 0&&(t=!1),ru(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=Dr(e),i=(0,se.pi)({},j),s=[],l="",c=r.length,h,p,v=[],y=0;y<c;y+=1){r[y]&&(l=r[y][0]),s[y]=l;var b=Ac(r[y],i);r[y]=b,Rl(r,s,y),c=r.length,l==="Z"&&v.push(y),h=r[y],p=h.length,i.x1=+h[p-2],i.y1=+h[p-1],i.x2=+h[p-4]||i.x1,i.y2=+h[p-3]||i.y1}return t?[r,v]:r}function ic(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),s=e.slice(6,8),l=Wr(n,r,t),c=Wr(r,i,t),h=Wr(i,s,t),p=Wr(l,c,t),v=Wr(c,h,t),y=Wr(p,v,t);return[["C"].concat(l,p,y),["C"].concat(v,h,s)]}function Ka(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),s=n?po(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,l;return n?l=s?ic(i):[t,t]:l=[t],{s:t,ss:l,l:s}})}function nl(e,t,n){var r=Ka(e),i=Ka(t),s=r.length,l=i.length,c=r.filter(function(I){return I.l}).length,h=i.filter(function(I){return I.l}).length,p=r.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/c||0,v=i.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/h||0,y=n||Math.max(s,l),b=[p,v],T=[y-s,y-l],M=0,R=[r,i].map(function(I,N){return I.l===y?I.map(function(z){return z.s}):I.map(function(z,H){return M=H&&T[N]&&z.l>=b[N],T[N]-=M?1:0,M?z.ss:[z.s]}).flat()});return R[0].length===R[1].length?R:nl(R[0],R[1],y)}function Ys(e,t,n,r,i,s,l,c){return 3*((c-t)*(n+i)-(l-e)*(r+s)+r*(e-i)-n*(t-s)+c*(i+e/3)-l*(s+t/3))/20}function bs(e){var t=0,n=0,r=0;return $l(e).map(function(i){var s;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var l=i.slice(1),c=l[0],h=l[1],p=l[2],v=l[3],y=l[4],b=l[5];return r=Ys(t,n,c,h,p,v,y,b),s=i.slice(-2),t=s[0],n=s[1],r}}).reduce(function(i,s){return i+s},0)}function Hc(e){return bs(e)>=0}function Cc(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function yl(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function bu(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(s,l){var c=i+l,h;return l===0||e[c]&&e[c][0]==="M"?(h=e[c],["M"].concat(h.slice(-2))):(c>=t&&(c-=n),e[c])})})}function gc(e,t){var n=e.length-1,r=[],i=0,s=0,l=bu(e);return l.forEach(function(c,h){e.slice(1).forEach(function(p,v){s+=tl(e[(h+v)%n].slice(-2),t[v%n].slice(-2))}),r[h]=s,s=0}),i=r.indexOf(Math.min.apply(null,r)),l[i]}var ss=function(e){return e===void 0},Fs=ss,rh=function(e){return(0,Ym.Z)(e,"Boolean")},zd=rh,_l=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function bp(e,t,n){return Oo(e,t,(0,se.pi)((0,se.pi)({},n),{bbox:!1,length:!0})).point}function Gc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ud(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Hf(){}var ih=.7,Qh=1/ih,Jh="\\s*([+-]?\\d+)\\s*",xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$m=/^#([0-9a-f]{3,8})$/,qm=new RegExp("^rgb\\(".concat(Jh,",").concat(Jh,",").concat(Jh,"\\)$")),Qg=new RegExp("^rgb\\(".concat(Gf,",").concat(Gf,",").concat(Gf,"\\)$")),C0=new RegExp("^rgba\\(".concat(Jh,",").concat(Jh,",").concat(Jh,",").concat(xp,"\\)$")),O0=new RegExp("^rgba\\(".concat(Gf,",").concat(Gf,",").concat(Gf,",").concat(xp,"\\)$")),Ep=new RegExp("^hsl\\(".concat(xp,",").concat(Gf,",").concat(Gf,"\\)$")),e0=new RegExp("^hsla\\(".concat(xp,",").concat(Gf,",").concat(Gf,",").concat(xp,"\\)$")),mv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gc(Hf,Sp,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Km,formatHex:Km,formatHex8:Qm,formatHsl:Jg,formatRgb:qv,toString:qv});function Km(){return this.rgb().formatHex()}function Qm(){return this.rgb().formatHex8()}function Jg(){return c_(this).formatHsl()}function qv(){return this.rgb().formatRgb()}function Sp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$m.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gv(t):n===3?new Wc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?M0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?M0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qm.exec(e))?new Wc(t[1],t[2],t[3],1):(t=Qg.exec(e))?new Wc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C0.exec(e))?M0(t[1],t[2],t[3],t[4]):(t=O0.exec(e))?M0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ep.exec(e))?ey(t[1],t[2]/100,t[3]/100,1):(t=e0.exec(e))?ey(t[1],t[2]/100,t[3]/100,t[4]):mv.hasOwnProperty(e)?gv(mv[e]):e==="transparent"?new Wc(NaN,NaN,NaN,0):null}function gv(e){return new Wc(e>>16&255,e>>8&255,e&255,1)}function M0(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wc(e,t,n,r)}function Jm(e){return e instanceof Hf||(e=Sp(e)),e?(e=e.rgb(),new Wc(e.r,e.g,e.b,e.opacity)):new Wc}function eg(e,t,n,r){return arguments.length===1?Jm(e):new Wc(e,t,n,r==null?1:r)}function Wc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gc(Wc,eg,Ud(Hf,{brighter:function(t){return t=t==null?Qh:Math.pow(Qh,t),new Wc(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ih:Math.pow(ih,t),new Wc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Wc(jd(this.r),jd(this.g),jd(this.b),wp(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kv,formatHex:Kv,formatHex8:R0,formatRgb:Qv,toString:Qv}));function Kv(){return"#".concat(ed(this.r)).concat(ed(this.g)).concat(ed(this.b))}function R0(){return"#".concat(ed(this.r)).concat(ed(this.g)).concat(ed(this.b)).concat(ed((isNaN(this.opacity)?1:this.opacity)*255))}function Qv(){var e=wp(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(jd(this.r),", ").concat(jd(this.g),", ").concat(jd(this.b)).concat(e===1?")":", ".concat(e,")"))}function wp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ed(e){return e=jd(e),(e<16?"0":"")+e.toString(16)}function ey(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new td(e,t,n,r)}function c_(e){if(e instanceof td)return new td(e.h,e.s,e.l,e.opacity);if(e instanceof Hf||(e=Sp(e)),!e)return new td;if(e instanceof td)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new td(l,c,h,e.opacity)}function f_(e,t,n,r){return arguments.length===1?c_(e):new td(e,t,n,r==null?1:r)}function td(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gc(td,f_,Ud(Hf,{brighter:function(t){return t=t==null?Qh:Math.pow(Qh,t),new td(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ih:Math.pow(ih,t),new td(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new Wc(P0(t>=240?t-240:t+120,s,i),P0(t,s,i),P0(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new td(ty(this.h),ny(this.s),ny(this.l),wp(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=wp(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(ty(this.h),", ").concat(ny(this.s)*100,"%, ").concat(ny(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function ty(e){return e=(e||0)%360,e<0?e+360:e}function ny(e){return Math.max(0,Math.min(1,e||0))}function P0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Ts(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}function oh(e,t){var n=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(e),!1)),r=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(t),!1)),i=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(e),!1)),s=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(t),!1));return{x:n,y:r,width:i-n,height:s-r}}function C1(e){return(e+Math.PI*2)%(Math.PI*2)}function t0(e,t){var n=Math.abs(e);return t>0?n:n*-1}function h_(e,t,n,r,i,s){var l=n,c=r;if(l===0||c===0)return{x:e,y:t};for(var h=i-e,p=s-t,v=Math.abs(h),y=Math.abs(p),b=l*l,T=c*c,M=Math.PI/4,R=0,I=0,N=0;N<4;N++){R=l*Math.cos(M),I=c*Math.sin(M);var z=(b-T)*Math.pow(Math.cos(M),3)/l,H=(T-b)*Math.pow(Math.sin(M),3)/c,X=R-z,Y=I-H,ne=v-z,ve=y-H,ye=Math.hypot(Y,X),De=Math.hypot(ve,ne),Ye=ye*Math.asin((X*ve-Y*ne)/(ye*De)),Qe=Ye/Math.sqrt(b+T-R*R-I*I);M+=Qe,M=Math.min(Math.PI/2,Math.max(0,M))}return{x:e+t0(R,h),y:t+t0(I,p)}}function d_(e,t,n,r,i,s,l,c){return-1*n*Math.cos(i)*Math.sin(c)-r*Math.sin(i)*Math.cos(c)}function tg(e,t,n,r,i,s,l,c){return-1*n*Math.sin(i)*Math.sin(c)+r*Math.cos(i)*Math.cos(c)}function Tp(e,t,n){return Math.atan(-t/e*Math.tan(n))}function fa(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function ng(e,t,n,r,i,s){return n*Math.cos(i)*Math.cos(s)-r*Math.sin(i)*Math.sin(s)+e}function ry(e,t,n,r,i,s){return n*Math.sin(i)*Math.cos(s)+r*Math.cos(i)*Math.sin(s)+t}function n0(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function iy(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function p_(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function rg(e,t,n,r,i,s,l){for(var c=Tp(n,r,i),h=1/0,p=-1/0,v=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=c+y;s<l?s<b&&b<l&&v.push(b):l<b&&b<s&&v.push(b)}for(var y=0;y<v.length;y++){var T=ng(e,t,n,r,i,v[y]);T<h&&(h=T),T>p&&(p=T)}for(var M=fa(n,r,i),R=1/0,I=-1/0,N=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var z=M+y;s<l?s<z&&z<l&&N.push(z):l<z&&z<s&&N.push(z)}for(var y=0;y<N.length;y++){var H=ry(e,t,n,r,i,N[y]);H<R&&(R=H),H>I&&(I=H)}return{x:h,y:R,width:p-h,height:I-R}}function xx(e,t,n,r,i,s,l,c,h){var p=p_(c-e,h-t,-i),v=__read(p,2),y=v[0],b=v[1],T=h_(0,0,n,r,y,b),M=n0(n,r,T.x,T.y);M<s?T=iy(n,r,s):M>l&&(T=iy(n,r,l));var R=p_(T.x,T.y,i);return{x:R[0]+e,y:R[1]+t}}function Ex(e,t,n,r,i,s,l,c){var h=(l-s)*c+s,p=d_(e,t,n,r,i,s,l,h),v=tg(e,t,n,r,i,s,l,h);return C1(Math.atan2(v,p))}var O1=1e-4;function v_(e,t,n,r,i,s){var l=-1,c=1/0,h=[n,r],p=20;s&&s>200&&(p=s/10);for(var v=1/p,y=v/10,b=0;b<=p;b++){var T=b*v,M=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([T])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([T])),!1))],R=Ts(h[0],h[1],M[0],M[1]);R<c&&(l=T,c=R)}if(l===0)return{x:e[0],y:t[0]};if(l===1){var I=e.length;return{x:e[I-1],y:t[I-1]}}c=1/0;for(var b=0;b<32&&!(y<O1);b++){var N=l-y,z=l+y,M=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([N])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([N])),!1))],R=Ts(h[0],h[1],M[0],M[1]);if(N>=0&&R<c)l=N,c=R;else{var H=[i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([z])),!1)),i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([z])),!1))],X=Ts(h[0],h[1],H[0],H[1]);z<=1&&X<c?(l=z,c=X):y*=.5}}return{x:i.apply(void 0,(0,se.ev)([],(0,se.CR)(e.concat([l])),!1)),y:i.apply(void 0,(0,se.ev)([],(0,se.CR)(t.concat([l])),!1))}}function M1(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var s=e[i],l=t[i],c=e[(i+1)%r],h=t[(i+1)%r];n+=Ts(s,l,c,h)}return n/2}function ah(e,t,n,r){return oh([e,n],[t,r])}function ig(e,t,n,r){return Ts(e,t,n,r)}function Vd(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function Ap(e,t,n,r,i,s){var l=(n-e)*(i-e)+(r-t)*(s-t);if(l<0)return Ts(e,t,i,s);var c=(n-e)*(n-e)+(r-t)*(r-t);return l>c?Ts(n,r,i,s):R1(e,t,n,r,i,s)}function R1(e,t,n,r,i,s){var l=[n-e,r-t];if($v.I6(l,[0,0]))return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t));var c=[-l[1],l[0]];$v.Fv(c,c);var h=[i-e,s-t];return Math.abs($v.AK(h,c))}function m_(e,t,n,r){return Math.atan2(r-t,n-e)}function sh(e,t,n,r,i){var s=1-i;return s*s*s*e+3*t*i*s*s+3*n*i*i*s+r*i*i*i}function I0(e,t,n,r,i){var s=1-i;return 3*(s*s*(t-e)+2*s*i*(n-t)+i*i*(r-n))}function Nu(e,t,n,r){var i=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,l=3*t-3*e,c=[],h,p,v;if(sl(i,0))sl(s,0)||(h=-l/s,h>=0&&h<=1&&c.push(h));else{var y=s*s-4*i*l;sl(y,0)?c.push(-s/(2*i)):y>0&&(v=Math.sqrt(y),h=(-s+v)/(2*i),p=(-s-v)/(2*i),h>=0&&h<=1&&c.push(h),p>=0&&p<=1&&c.push(p))}return c}function Jv(e,t,n,r,i,s,l,c,h){var p=sh(e,n,i,l,h),v=sh(t,r,s,c,h),y=Vd(e,t,n,r,h),b=Vd(n,r,i,s,h),T=Vd(i,s,l,c,h),M=Vd(y.x,y.y,b.x,b.y,h),R=Vd(b.x,b.y,T.x,T.y,h);return[[e,t,y.x,y.y,M.x,M.y,p,v],[p,v,R.x,R.y,T.x,T.y,l,c]]}function D0(e,t,n,r,i,s,l,c,h){if(h===0)return M1([e,n,i,l],[t,r,s,c]);var p=Jv(e,t,n,r,i,s,l,c,.5),v=__spreadArray(__spreadArray([],__read(p[0]),!1),[h-1],!1),y=__spreadArray(__spreadArray([],__read(p[1]),!1),[h-1],!1);return D0.apply(void 0,__spreadArray([],__read(v),!1))+D0.apply(void 0,__spreadArray([],__read(y),!1))}function g_(e,t,n,r,i,s,l,c){for(var h=[e,l],p=[t,c],v=Nu(e,n,i,l),y=Nu(t,r,s,c),b=0;b<v.length;b++)h.push(sh(e,n,i,l,v[b]));for(var b=0;b<y.length;b++)p.push(sh(t,r,s,c,y[b]));return oh(h,p)}function em(e,t,n,r,i,s,l,c){return D0(e,t,n,r,i,s,l,c,3)}function P1(e,t,n,r,i,s,l,c,h,p,v){return v_([e,n,i,l],[t,r,s,c],h,p,sh,v)}function oy(e,t,n,r,i,s,l,c,h,p,v){var y=P1(e,t,n,r,i,s,l,c,h,p,v);return Ts(y.x,y.y,h,p)}function I1(e,t,n,r,i,s,l,c,h){return{x:sh(e,n,i,l,h),y:sh(t,r,s,c,h)}}function og(e,t,n,r,i,s,l,c,h){var p=I0(e,n,i,l,h),v=I0(t,r,s,c,h);return C1(Math.atan2(v,p))}function Hd(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],s=e[r+1],l=Ts(i[0],i[1],s[0],s[1]),c={from:i,to:s,length:l};n.push(c),t+=l}return{segments:n,totalLength:t}}function ag(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Ts(r[0],r[1],i[0],i[1])}return t}function Tl(e,t){if(t>1||t<0||e.length<2)return null;var n=Hd(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var s=0,l=null,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){var b=(t-s)/y;l=Vd(p[0],p[1],v[0],v[1],b);break}s+=y}return l}function ay(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=Hd(e),r=n.segments,i=n.totalLength,s=0,l=0,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){l=Math.atan2(v[1]-p[1],v[0]-p[0]);break}s+=y}return l}function Cp(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var s=e[i],l=e[i+1],c=Ap(s[0],s[1],l[0],l[1],t,n);c<r&&(r=c)}return r}function sy(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return oh(t,n)}function Sx(e){return ag(e)}function JE(e,t){return Tl(e,t)}function y_(e,t,n){return Cp(e,t,n)}function D1(e,t){return ay(e,t)}function yv(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function Aa(e){return sy(e)}function tm(e){return ag(yv(e))}function gC(e,t){return Tl(yv(e),t)}function yc(e,t,n){return Cp(yv(e),t,n)}function _v(e,t){return ay(yv(e),t)}function Op(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function ly(e,t,n){var r=e+n-2*t;if(sl(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function L0(e,t,n,r,i,s,l){var c=Op(e,n,i,l),h=Op(t,r,s,l),p=Vd(e,t,n,r,l),v=Vd(n,r,i,s,l);return[[e,t,p.x,p.y,c,h],[c,h,v.x,v.y,i,s]]}function N0(e,t,n,r,i,s,l){if(l===0)return(Ts(e,t,n,r)+Ts(n,r,i,s)+Ts(e,t,i,s))/2;var c=L0(e,t,n,r,i,s,.5),h=c[0],p=c[1];return h.push(l-1),p.push(l-1),N0.apply(void 0,__spreadArray([],__read(h),!1))+N0.apply(void 0,__spreadArray([],__read(p),!1))}function __(e,t,n,r,i,s){var l=ly(e,n,i)[0],c=ly(t,r,s)[0],h=[e,i],p=[t,s];return l!==void 0&&h.push(Op(e,n,i,l)),c!==void 0&&p.push(Op(t,r,s,c)),oh(h,p)}function yC(e,t,n,r,i,s){return N0(e,t,n,r,i,s,3)}function Tx(e,t,n,r,i,s,l,c){return v_([e,n,i],[t,r,s],l,c,Op)}function Gs(e,t,n,r,i,s,l,c){var h=Tx(e,t,n,r,i,s,l,c);return Ts(h.x,h.y,l,c)}var b_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof L.g!="undefined"?L.g:typeof self!="undefined"?self:{},L1={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(b_,function(){function n(Y,ne,ve,ye,De){r(Y,ne,ve||0,ye||Y.length-1,De||s)}function r(Y,ne,ve,ye,De){for(;ye>ve;){if(ye-ve>600){var Ye=ye-ve+1,Qe=ne-ve+1,yt=Math.log(Ye),qe=.5*Math.exp(2*yt/3),ut=.5*Math.sqrt(yt*qe*(Ye-qe)/Ye)*(Qe-Ye/2<0?-1:1),ft=Math.max(ve,Math.floor(ne-Qe*qe/Ye+ut)),mt=Math.min(ye,Math.floor(ne+(Ye-Qe)*qe/Ye+ut));r(Y,ne,ft,mt,De)}var Xt=Y[ne],Mt=ve,kt=ye;for(i(Y,ve,ne),De(Y[ye],Xt)>0&&i(Y,ve,ye);Mt<kt;){for(i(Y,Mt,kt),Mt++,kt--;De(Y[Mt],Xt)<0;)Mt++;for(;De(Y[kt],Xt)>0;)kt--}De(Y[ve],Xt)===0?i(Y,ve,kt):(kt++,i(Y,kt,ye)),kt<=ne&&(ve=kt+1),ne<=kt&&(ye=kt-1)}}function i(Y,ne,ve){var ye=Y[ne];Y[ne]=Y[ve],Y[ve]=ye}function s(Y,ne){return Y<ne?-1:Y>ne?1:0}var l=function(ne){ne===void 0&&(ne=9),this._maxEntries=Math.max(4,ne),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(ne){var ve=this.data,ye=[];if(!z(ne,ve))return ye;for(var De=this.toBBox,Ye=[];ve;){for(var Qe=0;Qe<ve.children.length;Qe++){var yt=ve.children[Qe],qe=ve.leaf?De(yt):yt;z(ne,qe)&&(ve.leaf?ye.push(yt):N(ne,qe)?this._all(yt,ye):Ye.push(yt))}ve=Ye.pop()}return ye},l.prototype.collides=function(ne){var ve=this.data;if(!z(ne,ve))return!1;for(var ye=[];ve;){for(var De=0;De<ve.children.length;De++){var Ye=ve.children[De],Qe=ve.leaf?this.toBBox(Ye):Ye;if(z(ne,Qe)){if(ve.leaf||N(ne,Qe))return!0;ye.push(Ye)}}ve=ye.pop()}return!1},l.prototype.load=function(ne){if(!(ne&&ne.length))return this;if(ne.length<this._minEntries){for(var ve=0;ve<ne.length;ve++)this.insert(ne[ve]);return this}var ye=this._build(ne.slice(),0,ne.length-1,0);if(!this.data.children.length)this.data=ye;else if(this.data.height===ye.height)this._splitRoot(this.data,ye);else{if(this.data.height<ye.height){var De=this.data;this.data=ye,ye=De}this._insert(ye,this.data.height-ye.height-1,!0)}return this},l.prototype.insert=function(ne){return ne&&this._insert(ne,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(ne,ve){if(!ne)return this;for(var ye=this.data,De=this.toBBox(ne),Ye=[],Qe=[],yt,qe,ut;ye||Ye.length;){if(ye||(ye=Ye.pop(),qe=Ye[Ye.length-1],yt=Qe.pop(),ut=!0),ye.leaf){var ft=c(ne,ye.children,ve);if(ft!==-1)return ye.children.splice(ft,1),Ye.push(ye),this._condense(Ye),this}!ut&&!ye.leaf&&N(ye,De)?(Ye.push(ye),Qe.push(yt),yt=0,qe=ye,ye=ye.children[0]):qe?(yt++,ye=qe.children[yt],ut=!1):ye=null}return this},l.prototype.toBBox=function(ne){return ne},l.prototype.compareMinX=function(ne,ve){return ne.minX-ve.minX},l.prototype.compareMinY=function(ne,ve){return ne.minY-ve.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(ne){return this.data=ne,this},l.prototype._all=function(ne,ve){for(var ye=[];ne;)ne.leaf?ve.push.apply(ve,ne.children):ye.push.apply(ye,ne.children),ne=ye.pop();return ve},l.prototype._build=function(ne,ve,ye,De){var Ye=ye-ve+1,Qe=this._maxEntries,yt;if(Ye<=Qe)return yt=H(ne.slice(ve,ye+1)),h(yt,this.toBBox),yt;De||(De=Math.ceil(Math.log(Ye)/Math.log(Qe)),Qe=Math.ceil(Ye/Math.pow(Qe,De-1))),yt=H([]),yt.leaf=!1,yt.height=De;var qe=Math.ceil(Ye/Qe),ut=qe*Math.ceil(Math.sqrt(Qe));X(ne,ve,ye,ut,this.compareMinX);for(var ft=ve;ft<=ye;ft+=ut){var mt=Math.min(ft+ut-1,ye);X(ne,ft,mt,qe,this.compareMinY);for(var Xt=ft;Xt<=mt;Xt+=qe){var Mt=Math.min(Xt+qe-1,mt);yt.children.push(this._build(ne,Xt,Mt,De-1))}}return h(yt,this.toBBox),yt},l.prototype._chooseSubtree=function(ne,ve,ye,De){for(;De.push(ve),!(ve.leaf||De.length-1===ye);){for(var Ye=1/0,Qe=1/0,yt=void 0,qe=0;qe<ve.children.length;qe++){var ut=ve.children[qe],ft=T(ut),mt=R(ne,ut)-ft;mt<Qe?(Qe=mt,Ye=ft<Ye?ft:Ye,yt=ut):mt===Qe&&ft<Ye&&(Ye=ft,yt=ut)}ve=yt||ve.children[0]}return ve},l.prototype._insert=function(ne,ve,ye){var De=ye?ne:this.toBBox(ne),Ye=[],Qe=this._chooseSubtree(De,this.data,ve,Ye);for(Qe.children.push(ne),v(Qe,De);ve>=0&&Ye[ve].children.length>this._maxEntries;)this._split(Ye,ve),ve--;this._adjustParentBBoxes(De,Ye,ve)},l.prototype._split=function(ne,ve){var ye=ne[ve],De=ye.children.length,Ye=this._minEntries;this._chooseSplitAxis(ye,Ye,De);var Qe=this._chooseSplitIndex(ye,Ye,De),yt=H(ye.children.splice(Qe,ye.children.length-Qe));yt.height=ye.height,yt.leaf=ye.leaf,h(ye,this.toBBox),h(yt,this.toBBox),ve?ne[ve-1].children.push(yt):this._splitRoot(ye,yt)},l.prototype._splitRoot=function(ne,ve){this.data=H([ne,ve]),this.data.height=ne.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(ne,ve,ye){for(var De,Ye=1/0,Qe=1/0,yt=ve;yt<=ye-ve;yt++){var qe=p(ne,0,yt,this.toBBox),ut=p(ne,yt,ye,this.toBBox),ft=I(qe,ut),mt=T(qe)+T(ut);ft<Ye?(Ye=ft,De=yt,Qe=mt<Qe?mt:Qe):ft===Ye&&mt<Qe&&(Qe=mt,De=yt)}return De||ye-ve},l.prototype._chooseSplitAxis=function(ne,ve,ye){var De=ne.leaf?this.compareMinX:y,Ye=ne.leaf?this.compareMinY:b,Qe=this._allDistMargin(ne,ve,ye,De),yt=this._allDistMargin(ne,ve,ye,Ye);Qe<yt&&ne.children.sort(De)},l.prototype._allDistMargin=function(ne,ve,ye,De){ne.children.sort(De);for(var Ye=this.toBBox,Qe=p(ne,0,ve,Ye),yt=p(ne,ye-ve,ye,Ye),qe=M(Qe)+M(yt),ut=ve;ut<ye-ve;ut++){var ft=ne.children[ut];v(Qe,ne.leaf?Ye(ft):ft),qe+=M(Qe)}for(var mt=ye-ve-1;mt>=ve;mt--){var Xt=ne.children[mt];v(yt,ne.leaf?Ye(Xt):Xt),qe+=M(yt)}return qe},l.prototype._adjustParentBBoxes=function(ne,ve,ye){for(var De=ye;De>=0;De--)v(ve[De],ne)},l.prototype._condense=function(ne){for(var ve=ne.length-1,ye=void 0;ve>=0;ve--)ne[ve].children.length===0?ve>0?(ye=ne[ve-1].children,ye.splice(ye.indexOf(ne[ve]),1)):this.clear():h(ne[ve],this.toBBox)};function c(Y,ne,ve){if(!ve)return ne.indexOf(Y);for(var ye=0;ye<ne.length;ye++)if(ve(Y,ne[ye]))return ye;return-1}function h(Y,ne){p(Y,0,Y.children.length,ne,Y)}function p(Y,ne,ve,ye,De){De||(De=H(null)),De.minX=1/0,De.minY=1/0,De.maxX=-1/0,De.maxY=-1/0;for(var Ye=ne;Ye<ve;Ye++){var Qe=Y.children[Ye];v(De,Y.leaf?ye(Qe):Qe)}return De}function v(Y,ne){return Y.minX=Math.min(Y.minX,ne.minX),Y.minY=Math.min(Y.minY,ne.minY),Y.maxX=Math.max(Y.maxX,ne.maxX),Y.maxY=Math.max(Y.maxY,ne.maxY),Y}function y(Y,ne){return Y.minX-ne.minX}function b(Y,ne){return Y.minY-ne.minY}function T(Y){return(Y.maxX-Y.minX)*(Y.maxY-Y.minY)}function M(Y){return Y.maxX-Y.minX+(Y.maxY-Y.minY)}function R(Y,ne){return(Math.max(ne.maxX,Y.maxX)-Math.min(ne.minX,Y.minX))*(Math.max(ne.maxY,Y.maxY)-Math.min(ne.minY,Y.minY))}function I(Y,ne){var ve=Math.max(Y.minX,ne.minX),ye=Math.max(Y.minY,ne.minY),De=Math.min(Y.maxX,ne.maxX),Ye=Math.min(Y.maxY,ne.maxY);return Math.max(0,De-ve)*Math.max(0,Ye-ye)}function N(Y,ne){return Y.minX<=ne.minX&&Y.minY<=ne.minY&&ne.maxX<=Y.maxX&&ne.maxY<=Y.maxY}function z(Y,ne){return ne.minX<=Y.maxX&&ne.minY<=Y.maxY&&ne.maxX>=Y.minX&&ne.maxY>=Y.minY}function H(Y){return{children:Y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X(Y,ne,ve,ye,De){for(var Ye=[ne,ve];Ye.length;)if(ve=Ye.pop(),ne=Ye.pop(),!(ve-ne<=ye)){var Qe=ne+Math.ceil((ve-ne)/ye/2)*ye;n(Y,Qe,ne,ve,De),Ye.push(ne,Qe,Qe,ve)}}return l})})(L1);var nm=L1.exports,ui;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(ui||(ui={}));var F0;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(F0||(F0={}));var Mp=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),x_=function(){function e(t){this.clipSpaceNearZ=F0.NEGATIVE_ONE,this.plugins=[],this.config=(0,se.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function rm(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function N1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function E_(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ax(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function eS(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Cx(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function bv(e){return e===void 0?0:e>360||e<-360?e%360:e}function Oc(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?or.d9(e):(0,Yl.Z)(e)?or.al(e,t,n):or.al(e[0],e[1]||t,e[2]||n)}function Ul(e){return e*(Math.PI/180)}function Gd(e){return e*(180/Math.PI)}function CI(e){return e=e%400,e<0&&(e+=400),e/400*360}function tS(e){return e/360}function OI(e){return 360*e}function _C(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n,c=r*r,h=i*i,p=s*s,v=l+c+h+p,y=n*s-r*i;return y>.499995*v?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):y<-.499995*v?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-s*r)),e[1]=Math.atan2(2*(n*s+r*i),1-2*(h+p)),e[2]=Math.atan2(2*(n*r+i*s),1-2*(c+h))),e}function MI(e,t){var n,r,i=Math.PI*.5,s=(0,se.CR)(Qr.getScaling(or.Ue(),t),3),l=s[0],c=s[1],h=s[2],p=Math.asin(-t[2]/l);return p<i?p>-i?(n=Math.atan2(t[6]/c,t[10]/h),r=Math.atan2(t[1]/l,t[0]/l)):(r=0,n=-Math.atan2(t[4]/c,t[5]/c)):(r=0,n=Math.atan2(t[4]/c,t[5]/c)),e[0]=n,e[1]=p,e[2]=r,e}function F1(e,t){return t.length===16?MI(e,t):_C(e,t)}function uy(e,t,n,r,i){var s=Math.cos(e),l=Math.sin(e);return Pa(r*s,i*l,0,-r*l,i*s,0,t,n,1)}function bC(e,t,n,r,i,s,l,c){c===void 0&&(c=!1);var h=2*s/(n-t),p=2*s/(r-i),v=(n+t)/(n-t),y=(r+i)/(r-i),b,T;return c?(b=-l/(l-s),T=-l*s/(l-s)):(b=-(l+s)/(l-s),T=-2*l*s/(l-s)),e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=v,e[9]=y,e[10]=b,e[11]=-1,e[12]=0,e[13]=0,e[14]=T,e[15]=0,e}function nS(e){var t=e[0],n=e[1],r=e[3],i=e[4],s=Math.sqrt(t*t+n*n),l=Math.sqrt(r*r+i*i),c=t*i-n*r;c<0&&(t<i?s=-s:l=-l),s&&(t*=1/s,n*=1/s),l&&(r*=1/l,i*=1/l);var h=Math.atan2(n,t),p=Gd(h);return[e[6],e[7],s,l,p]}var Wd=Qr.create(),r0=Qr.create(),S_=Hi.Ue(),Ga=[or.Ue(),or.Ue(),or.Ue()],xC=or.Ue();function B1(e,t,n,r,i,s){if(!Ox(Wd,e)||(Qr.copy(r0,Wd),r0[3]=0,r0[7]=0,r0[11]=0,r0[15]=1,Math.abs(Qr.determinant(r0))<1e-8))return!1;var l=Wd[3],c=Wd[7],h=Wd[11],p=Wd[12],v=Wd[13],y=Wd[14],b=Wd[15];if(l!==0||c!==0||h!==0){S_[0]=l,S_[1]=c,S_[2]=h,S_[3]=b;var T=Qr.invert(r0,r0);if(!T)return!1;Qr.transpose(r0,r0),Hi.fF(i,S_,r0)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=p,t[1]=v,t[2]=y,RI(Ga,Wd),n[0]=or.kE(Ga[0]),or.Fv(Ga[0],Ga[0]),r[0]=or.AK(Ga[0],Ga[1]),Mx(Ga[1],Ga[1],Ga[0],1,-r[0]),n[1]=or.kE(Ga[1]),or.Fv(Ga[1],Ga[1]),r[0]/=n[1],r[1]=or.AK(Ga[0],Ga[2]),Mx(Ga[2],Ga[2],Ga[0],1,-r[1]),r[2]=or.AK(Ga[1],Ga[2]),Mx(Ga[2],Ga[2],Ga[1],1,-r[2]),n[2]=or.kE(Ga[2]),or.Fv(Ga[2],Ga[2]),r[1]/=n[2],r[2]/=n[2],or.kC(xC,Ga[1],Ga[2]),or.AK(Ga[0],xC)<0)for(var M=0;M<3;M++)n[M]*=-1,Ga[M][0]*=-1,Ga[M][1]*=-1,Ga[M][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+Ga[0][0]-Ga[1][1]-Ga[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-Ga[0][0]+Ga[1][1]-Ga[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-Ga[0][0]-Ga[1][1]+Ga[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+Ga[0][0]+Ga[1][1]+Ga[2][2],0)),Ga[2][1]>Ga[1][2]&&(s[0]=-s[0]),Ga[0][2]>Ga[2][0]&&(s[1]=-s[1]),Ga[1][0]>Ga[0][1]&&(s[2]=-s[2]),!0}function Ox(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function RI(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function Mx(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var Mc=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){rm(this.center,t),rm(this.halfExtents,n),N1(this.min,this.center,this.halfExtents),E_(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){E_(this.center,n,t),Ax(this.center,this.center,.5),N1(this.halfExtents,n,t),Ax(this.halfExtents,this.halfExtents,.5),rm(this.min,t),rm(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],s=n[2],l=this.halfExtents,c=l[0],h=l[1],p=l[2],v=r-c,y=r+c,b=i-h,T=i+h,M=s-p,R=s+p,I=t.center,N=I[0],z=I[1],H=I[2],X=t.halfExtents,Y=X[0],ne=X[1],ve=X[2],ye=N-Y,De=N+Y,Ye=z-ne,Qe=z+ne,yt=H-ve,qe=H+ve;ye<v&&(v=ye),De>y&&(y=De),Ye<b&&(b=Ye),Qe>T&&(T=Qe),yt<M&&(M=yt),qe>R&&(R=qe),n[0]=(v+y)*.5,n[1]=(b+T)*.5,n[2]=(M+R)*.5,l[0]=(y-v)*.5,l[1]=(T-b)*.5,l[2]=(R-M)*.5,this.min[0]=v,this.min[1]=b,this.min[2]=M,this.max[0]=y,this.max[1]=T,this.max[2]=R}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,s=t.center,l=t.halfExtents,c=n[0],h=n[4],p=n[8],v=n[1],y=n[5],b=n[9],T=n[2],M=n[6],R=n[10],I=Math.abs(c),N=Math.abs(h),z=Math.abs(p),H=Math.abs(v),X=Math.abs(y),Y=Math.abs(b),ne=Math.abs(T),ve=Math.abs(M),ye=Math.abs(R);r[0]=n[12]+c*s[0]+h*s[1]+p*s[2],r[1]=n[13]+v*s[0]+y*s[1]+b*s[2],r[2]=n[14]+T*s[0]+M*s[1]+R*s[2],i[0]=I*l[0]+N*l[1]+z*l[2],i[1]=H*l[0]+X*l[1]+Y*l[2],i[2]=ne*l[0]+ve*l[1]+ye*l[2],N1(this.min,r,i),E_(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),s=t.getMin();return r[0]<=i[0]&&n[0]>=s[0]&&r[1]<=i[1]&&n[1]>=s[1]&&r[2]<=i[2]&&n[2]>=s[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=eS([0,0,0],this.getMin(),t.getMin()),i=Cx([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?rm([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?rm([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),EC=function(){function e(t,n){this.distance=t||0,this.normal=n||or.al(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return or.AK(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/or.Zh(this.normal);or.bA(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),s=this.distanceToPoint(n),l=i/(i-s),c=l>=0&&l<=1;return c&&r&&or.t7(r,t,n,l),c},e}(),sg;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(sg||(sg={}));var SC=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new EC)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,se.CR)(t,16),r=n[0],i=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=n[6],v=n[7],y=n[8],b=n[9],T=n[10],M=n[11],R=n[12],I=n[13],N=n[14],z=n[15];or.t8(this.planes[0].normal,l-r,v-c,M-y),this.planes[0].distance=z-R,or.t8(this.planes[1].normal,l+r,v+c,M+y),this.planes[1].distance=z+R,or.t8(this.planes[2].normal,l+i,v+h,M+b),this.planes[2].distance=z+I,or.t8(this.planes[3].normal,l-i,v-h,M-b),this.planes[3].distance=z-I,or.t8(this.planes[4].normal,l-s,v-p,M-T),this.planes[4].distance=z-N,or.t8(this.planes[5].normal,l+s,v+p,M+T),this.planes[5].distance=z+N,this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})},e}(),Zc=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),cy=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),iu="Method not implemented.",fy="Use document.documentElement instead.",wC="Cannot append a destroyed element.",Pl;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})(Pl||(Pl={}));var w_;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(w_||(w_={}));var nd;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(nd||(nd={}));var rS={UPDATED:"updated"},iS=2e-4,Rx=function(){function e(){this.clipSpaceNearZ=F0.NEGATIVE_ONE,this.eventEmitter=new fl,this.matrix=Qr.create(),this.right=or.al(1,0,0),this.up=or.al(0,1,0),this.forward=or.al(0,0,1),this.position=or.al(0,0,1),this.focalPoint=or.al(0,0,0),this.distanceVector=or.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Qr.create(),this.projectionMatrixInverse=Qr.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Pl.EXPLORING,this.trackingMode=w_.DEFAULT,this.projectionMode=nd.PERSPECTIVE,this.frustum=new SC,this.orthoMatrix=Qr.create()}return e.prototype.isOrtho=function(){return this.projectionMode===nd.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===Pl.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Pl.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==Pl.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return Qr.invert(Qr.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=Qr.fromTranslation(Qr.create(),[t,n,0]);this.jitteredProjectionMatrix=Qr.multiply(Qr.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setProjectionMatrix=function(t){this.projectionMatrix=t},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===nd.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===nd.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,s,l){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.projectionMode===nd.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===nd.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===nd.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===nd.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,s=r.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(i,s),this.setFocalPoint(i,s),this.setZoom(t),this.rotate(0,0,l);var c=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),h=c.x,p=c.y,v=or.al(h-i,p-s,0),y=or.AK(v,this.right)/or.kE(this.right),b=or.AK(v,this.up)/or.kE(this.up);return this.pan(-y,-b),this},e.prototype.setPerspective=function(t,n,r,i){var s;this.projectionMode=nd.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var l=this.near*Math.tan(Ul(.5*this.fov))/this.zoom,c=2*l,h=this.aspect*c,p=-.5*h;if(!((s=this.view)===null||s===void 0)&&s.enabled){var v=this.view.fullWidth,y=this.view.fullHeight;p+=this.view.offsetX*h/v,l-=this.view.offsetY*c/y,h*=this.view.width/v,c*=this.view.height/y}return bC(this.projectionMatrix,p,p+h,l,l-c,t,this.far,this.clipSpaceNearZ===F0.ZERO),Qr.scale(this.projectionMatrix,this.projectionMatrix,or.al(1,-1,1)),Qr.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,s,l){var c;this.projectionMode=nd.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=s,this.far=l;var h=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),v=(this.rright+this.left)/2,y=(this.top+this.bottom)/2,b=v-h,T=v+h,M=y+p,R=y-p;if(!((c=this.view)===null||c===void 0)&&c.enabled){var I=(this.rright-this.left)/this.view.fullWidth/this.zoom,N=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=I*this.view.offsetX,T=b+I*this.view.width,M-=N*this.view.offsetY,R=M-N*this.view.height}return this.clipSpaceNearZ===F0.NEGATIVE_ONE?Qr.ortho(this.projectionMatrix,b,T,R,M,s,l):Qr.orthoZO(this.projectionMatrix,b,T,R,M,s,l),Qr.scale(this.projectionMatrix,this.projectionMatrix,or.al(1,-1,1)),Qr.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Oc(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=or.al(0,1,0);if(this.focalPoint=Oc(t,n,r),this.trackingMode===w_.CINEMATIC){var s=or.$X(or.Ue(),this.focalPoint,this.position);t=s[0],n=s[1],r=s[2];var l=or.kE(s),c=Gd(Math.asin(n/l)),h=90+Gd(Math.atan2(r,t)),p=Qr.create();Qr.rotateY(p,p,Ul(h)),Qr.rotateX(p,p,Ul(c)),i=or.fF(or.Ue(),[0,1,0],p)}return Qr.invert(this.matrix,Qr.lookAt(Qr.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<iS&&(this.distance=iS),this.dollyingStep=this.distance/100;var n=or.Ue();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=bv(t),this.computeMatrix(),this._getAxes(),this.type===Pl.ORBITING||this.type===Pl.EXPLORING?this._getPosition():this.type===Pl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=bv(t),this.computeMatrix(),this._getAxes(),this.type===Pl.ORBITING||this.type===Pl.EXPLORING?this._getPosition():this.type===Pl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=bv(t),this.computeMatrix(),this._getAxes(),this.type===Pl.ORBITING||this.type===Pl.EXPLORING?this._getPosition():this.type===Pl.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=ea(Yi(),[0,0,1],Ul(this.roll));Qr.identity(this.matrix);var n=ea(Yi(),[1,0,0],Ul((this.rotateWorld&&this.type!==Pl.TRACKING||this.type===Pl.TRACKING?1:-1)*this.elevation)),r=ea(Yi(),[0,1,0],Ul((this.rotateWorld&&this.type!==Pl.TRACKING||this.type===Pl.TRACKING?1:-1)*this.azimuth)),i=Tc(Yi(),r,n);i=Tc(Yi(),i,t);var s=Qr.fromQuat(Qr.create(),i);this.type===Pl.ORBITING||this.type===Pl.EXPLORING?(Qr.translate(this.matrix,this.matrix,this.focalPoint),Qr.multiply(this.matrix,this.matrix,s),Qr.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Pl.TRACKING&&(Qr.translate(this.matrix,this.matrix,this.position),Qr.multiply(this.matrix,this.matrix,s))},e.prototype._setPosition=function(t,n,r){this.position=Oc(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){or.JG(this.right,Oc(Hi.fF(Hi.Ue(),[1,0,0,0],this.matrix))),or.JG(this.up,Oc(Hi.fF(Hi.Ue(),[0,1,0,0],this.matrix))),or.JG(this.forward,Oc(Hi.fF(Hi.Ue(),[0,0,1,0],this.matrix))),or.Fv(this.right,this.right),or.Fv(this.up,this.up),or.Fv(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=or.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Pl.TRACKING?(this.elevation=Gd(Math.asin(n/i)),this.azimuth=Gd(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=Gd(Math.asin(n/i)),this.azimuth=Gd(Math.atan2(-t,-r))):(this.elevation=-Gd(Math.asin(n/i)),this.azimuth=-Gd(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){or.JG(this.position,Oc(Hi.fF(Hi.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){or.kK(this.distanceVector,[0,0,-this.distance],Hu(Oa(),this.matrix)),or.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=or.$X(or.Ue(),this.focalPoint,this.position),this.distance=or.kE(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===nd.ORTHOGRAPHIC){var t=this.position,n=ea(Yi(),[0,0,1],-this.roll*Math.PI/180);Qr.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,or.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),or.al(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=Qr.multiply(Qr.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(rS.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(iu)},e.prototype.pan=function(t,n){throw new Error(iu)},e.prototype.dolly=function(t){throw new Error(iu)},e.prototype.createLandmark=function(t,n){throw new Error(iu)},e.prototype.gotoLandmark=function(t,n){throw new Error(iu)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(iu)},e}();function Of(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return n.cache=l.set(s,c)||l,c};return n.cache=new(Of.Cache||Map),n}Of.Cache=Map;var qi;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(qi||(qi={}));var Zd;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(Zd||(Zd={}));var oS;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(oS||(oS={}));var Px;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Px||(Px={}));var Ix;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(Ix||(Ix={}));var TC=[{name:"em",unit_type:qi.kEms},{name:"px",unit_type:qi.kPixels},{name:"deg",unit_type:qi.kDegrees},{name:"rad",unit_type:qi.kRadians},{name:"grad",unit_type:qi.kGradians},{name:"ms",unit_type:qi.kMilliseconds},{name:"s",unit_type:qi.kSeconds},{name:"rem",unit_type:qi.kRems},{name:"turn",unit_type:qi.kTurns}],im;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(im||(im={}));var AC=function(e){return TC.find(function(t){return t.name===e}).unit_type},aS=function(e){return e?e==="number"?qi.kNumber:e==="percent"||e==="%"?qi.kPercentage:AC(e):qi.kUnknown},CC=function(e){switch(e){case qi.kNumber:case qi.kInteger:return Zd.kUNumber;case qi.kPercentage:return Zd.kUPercent;case qi.kPixels:return Zd.kULength;case qi.kMilliseconds:case qi.kSeconds:return Zd.kUTime;case qi.kDegrees:case qi.kRadians:case qi.kGradians:case qi.kTurns:return Zd.kUAngle;default:return Zd.kUOther}},OC=function(e){switch(e){case Zd.kUNumber:return qi.kNumber;case Zd.kULength:return qi.kPixels;case Zd.kUPercent:return qi.kPercentage;case Zd.kUTime:return qi.kSeconds;case Zd.kUAngle:return qi.kDegrees;default:return qi.kUnknown}},sS=function(e){var t=1;switch(e){case qi.kPixels:case qi.kDegrees:case qi.kSeconds:break;case qi.kMilliseconds:t=.001;break;case qi.kRadians:t=180/Math.PI;break;case qi.kGradians:t=.9;break;case qi.kTurns:t=360;break}return t},k1=function(e){switch(e){case qi.kNumber:case qi.kInteger:return"";case qi.kPercentage:return"%";case qi.kEms:return"em";case qi.kRems:return"rem";case qi.kPixels:return"px";case qi.kDegrees:return"deg";case qi.kRadians:return"rad";case qi.kGradians:return"grad";case qi.kMilliseconds:return"ms";case qi.kSeconds:return"s";case qi.kTurns:return"turn"}return""},z1=function(){function e(){}return e.isAngle=function(t){return t===qi.kDegrees||t===qi.kRadians||t===qi.kGradians||t===qi.kTurns},e.isLength=function(t){return t>=qi.kEms&&t<qi.kDegrees},e.isRelativeUnit=function(t){return t===qi.kPercentage||t===qi.kEms||t===qi.kRems},e.isTime=function(t){return t===qi.kSeconds||t===qi.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(Px.kNo,Ix.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=im.kUnitType&&this.getType()<=im.kClampType},e}(),MC=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return im.kColorType},t.prototype.to=function(n){return this},t}(z1),B0;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(B0||(B0={}));var U1=function(e){(0,se.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return im.kColorType},t}(z1),rd=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return im.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(z1),RC=Of(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),lS=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function PI(e){if(!e)throw new Error}function lg(e){return typeof e=="function"}function PC(e){return typeof e=="symbol"}var uS=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},II={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Dx=Of(function(e){var t=RC(e),n=II[t];return t=(n==null?void 0:n.alias)||t,t}),IC=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(PI(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},j1=function(e){return OC(CC(e))},ql=function(e){(0,se.ZT)(t,e);function t(n,r){r===void 0&&(r=qi.kNumber);var i=e.call(this)||this,s;return typeof r=="string"?s=aS(r):s=r,i.unit=s,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return im.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=j1(this.unit);if(r!==j1(n)||r===qi.kUnknown)return null;var i=sS(this.unit)/sS(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var s;switch(this.unit){case qi.kUnknown:break;case qi.kInteger:s=Number(this.value).toFixed(0);break;case qi.kNumber:case qi.kPercentage:case qi.kEms:case qi.kRems:case qi.kPixels:case qi.kDegrees:case qi.kRadians:case qi.kGradians:case qi.kMilliseconds:case qi.kSeconds:case qi.kTurns:{var l=-999999,c=999999,h=this.value,p=k1(this.unit);if(h<l||h>c){var v=k1(this.unit);!Number.isFinite(h)||Number.isNaN(h)?s=IC(h,v):s=h+(v||"")}else s="".concat(h).concat(p)}}return i+=s,i},t}(z1),_c=new ql(0,"px");new ql(1,"px");var Rp=new ql(0,"deg"),Lx=function(e){(0,se.ZT)(t,e);function t(n,r,i,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var c=e.call(this,"rgb")||this;return c.r=n,c.g=r,c.b=i,c.alpha=s,c.isNone=l,c}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(MC),Ou=new rd("unset"),DC=new rd("initial"),DI=new rd("inherit"),Nx={"":Ou,unset:Ou,initial:DC,inherit:DI},T_=function(e){return Nx[e]||(Nx[e]=new rd(e)),Nx[e]},V1=new Lx(0,0,0,0,!0),cS=new Lx(0,0,0,0),fS=Of(function(e,t,n,r){return new Lx(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),ou=function(e,t){return t===void 0&&(t=qi.kNumber),new ql(e,t)};new ql(50,"%");var Fx;(function(e){e[e.Standard=0]="Standard"})(Fx||(Fx={}));var ug;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(ug||(ug={}));var hS={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new cy(0,0,0,0)},Mo;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Mo||(Mo={}));function dS(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var LC=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(Xt){throw new Error(t+": "+Xt)}function r(){var Xt=i();return t.length>0&&n("Invalid input not EOF"),Xt}function i(){return H(s)}function s(){return l("linear-gradient",e.linearGradient,h)||l("repeating-linear-gradient",e.repeatingLinearGradient,h)||l("radial-gradient",e.radialGradient,y)||l("repeating-radial-gradient",e.repeatingRadialGradient,y)||l("conic-gradient",e.conicGradient,y)}function l(Xt,Mt,kt){return c(Mt,function(Tn){var zn=kt();return zn&&(ft(e.comma)||n("Missing comma before color stops")),{type:Xt,orientation:zn,colorStops:H(X)}})}function c(Xt,Mt){var kt=ft(Xt);if(kt){ft(e.startCall)||n("Missing (");var Tn=Mt(kt);return ft(e.endCall)||n("Missing )"),Tn}}function h(){return p()||v()}function p(){return ut("directional",e.sideOrCorner,1)}function v(){return ut("angular",e.angleValue,1)}function y(){var Xt,Mt=b(),kt;return Mt&&(Xt=[],Xt.push(Mt),kt=t,ft(e.comma)&&(Mt=b(),Mt?Xt.push(Mt):t=kt)),Xt}function b(){var Xt=T()||M();if(Xt)Xt.at=I();else{var Mt=R();if(Mt){Xt=Mt;var kt=I();kt&&(Xt.at=kt)}else{var Tn=N();Tn&&(Xt={type:"default-radial",at:Tn})}}return Xt}function T(){var Xt=ut("shape",/^(circle)/i,0);return Xt&&(Xt.style=qe()||R()),Xt}function M(){var Xt=ut("shape",/^(ellipse)/i,0);return Xt&&(Xt.style=Qe()||R()),Xt}function R(){return ut("extent-keyword",e.extentKeywords,1)}function I(){if(ut("position",/^at/,0)){var Xt=N();return Xt||n("Missing positioning value"),Xt}}function N(){var Xt=z();if(Xt.x||Xt.y)return{type:"position",value:Xt}}function z(){return{x:Qe(),y:Qe()}}function H(Xt){var Mt=Xt(),kt=[];if(Mt)for(kt.push(Mt);ft(e.comma);)Mt=Xt(),Mt?kt.push(Mt):n("One extra comma");return kt}function X(){var Xt=Y();return Xt||n("Expected color definition"),Xt.length=Qe(),Xt}function Y(){return ve()||De()||ye()||ne()}function ne(){return ut("literal",e.literalColor,0)}function ve(){return ut("hex",e.hexColor,1)}function ye(){return c(e.rgbColor,function(){return{type:"rgb",value:H(Ye)}})}function De(){return c(e.rgbaColor,function(){return{type:"rgba",value:H(Ye)}})}function Ye(){return ft(e.number)[1]}function Qe(){return ut("%",e.percentageValue,1)||yt()||qe()}function yt(){return ut("position-keyword",e.positionKeywords,1)}function qe(){return ut("px",e.pixelValue,1)||ut("em",e.emValue,1)}function ut(Xt,Mt,kt){var Tn=ft(Mt);if(Tn)return{type:Xt,value:Tn[kt]}}function ft(Xt){var Mt=/^[\n\r\t\s]+/.exec(t);Mt&&mt(Mt[0].length);var kt=Xt.exec(t);return kt&&mt(kt[0].length),kt}function mt(Xt){t=t.substring(Xt)}return function(Xt){return t=Xt,r()}}();function NC(e,t,n,r){var i=Ul(r.value),s=0,l=0,c=s+t/2,h=l+n/2,p=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),v=e[0]+c-Math.cos(i)*p/2,y=e[1]+h-Math.sin(i)*p/2,b=e[0]+c+Math.cos(i)*p/2,T=e[1]+h+Math.sin(i)*p/2;return{x1:v,y1:y,x2:b,y2:T}}function pS(e,t,n,r,i,s){var l=r.value,c=i.value;r.unit===qi.kPercentage&&(l=r.value/100*t),i.unit===qi.kPercentage&&(c=i.value/100*n);var h=Math.max(tl([0,0],[l,c]),tl([0,n],[l,c]),tl([t,n],[l,c]),tl([t,0],[l,c]));return s&&(s instanceof ql?h=s.value:s instanceof rd&&(s.value==="closest-side"?h=Math.min(l,t-l,c,n-c):s.value==="farthest-side"?h=Math.max(l,t-l,c,n-c):s.value==="closest-corner"&&(h=Math.min(tl([0,0],[l,c]),tl([0,n],[l,c]),tl([t,n],[l,c]),tl([t,0],[l,c]))))),{x:l+e[0],y:c+e[1],r:h}}var vS=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Bx=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,H1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,mS=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function FC(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var s=0,l=Number(e[0].length.value),c=1;c<i;c++){var h=(r=e[c].length)===null||r===void 0?void 0:r.value;if(!(0,Sa.Z)(h)&&!(0,Sa.Z)(l)){for(var p=1;p<c-s;p++)e[s+p].length={type:"%",value:"".concat(l+(Number(h)-l)*p/(c-s))};s=c,l=Number(h)}}}var BC={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},gS=Of(function(e){var t;return e.type==="angular"?t=Number(e.value):t=BC[e.value]||0,ou(t,"deg")}),yS=Of(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var s=e.value,l=s.x,c=s.y;(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?t=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),(c==null?void 0:c.type)==="position-keyword"&&(c.value==="left"?t=0:c.value==="center"?n=50:c.value==="right"?t=100:c.value==="top"?n=0:c.value==="bottom"&&(n=100)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(r=l==null?void 0:l.type,t=Number(l.value)),((c==null?void 0:c.type)==="px"||(c==null?void 0:c.type)==="%"||(c==null?void 0:c.type)==="em")&&(i=c==null?void 0:c.type,n=Number(c.value))}return{cx:ou(t,r),cy:ou(n,i)}}),_S=Of(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=LC(e);return n.map(function(c){var h=c.type,p=c.orientation,v=c.colorStops;FC(v);var y=v.map(function(H){return{offset:ou(Number(H.length.value),"%"),color:dS(H)}});if(h==="linear-gradient")return new U1(B0.LinearGradient,{angle:p?gS(p):Rp,steps:y});if(h==="radial-gradient"&&(p||(p=[{type:"shape",value:"circle"}]),p[0].type==="shape"&&p[0].value==="circle")){var b=yS(p[0].at),T=b.cx,M=b.cy,R=void 0;if(p[0].style){var I=p[0].style,N=I.type,z=I.value;N==="extent-keyword"?R=T_(z):R=ou(z,N)}return new U1(B0.RadialGradient,{cx:T,cy:M,size:R,steps:y})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=vS.exec(e);if(i){var s=((t=i[2].match(mS))===null||t===void 0?void 0:t.map(function(c){return c.split(":")}))||[];return[new U1(B0.LinearGradient,{angle:ou(parseFloat(i[1]),"deg"),steps:s.map(function(c){var h=(0,se.CR)(c,2),p=h[0],v=h[1];return{offset:ou(Number(p)*100,"%"),color:v}})})]}}else if(r==="r"){var l=kC(e);if(l)if(u(l))e=l;else return[new U1(B0.RadialGradient,l)]}else if(r==="p")return zC(e)}});function kC(e){var t,n=Bx.exec(e);if(n){var r=((t=n[4].match(mS))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:ou(50,"%"),cy:ou(50,"%"),steps:r.map(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];return{offset:ou(Number(l)*100,"%"),color:c}})}}return null}function zC(e){var t=H1.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function LI(e){return!!e.type&&!!e.value}function A_(e){return e&&!!e.image}function C_(e){return e&&!(0,Sa.Z)(e.r)&&!(0,Sa.Z)(e.g)&&!(0,Sa.Z)(e.b)}var k0=Of(function(e){if(A_(e))return(0,se.pi)({repetition:"repeat"},e);if((0,Sa.Z)(e)&&(e=""),e==="transparent")return cS;if(e==="currentColor")e="black";else if(e==="none")return V1;var t=_S(e);if(t)return t;var n=Sp(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),fS.apply(void 0,(0,se.ev)([],(0,se.CR)(r),!1))});function O_(e,t){if(!(!C_(e)||!C_(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,d.Z)(r[i],0,255));return r[3]=(0,d.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function hy(e,t){if((0,Sa.Z)(t))return ou(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return ou(Number(t),"px");if("deg".search(e)>=0)return ou(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return ou(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var kx=function(e){return hy(new RegExp("px","g"),e)},UC=Of(kx),zx=function(e){return hy(new RegExp("%","g"),e)};Of(zx);var M_=function(e){return(0,Yl.Z)(e)||isFinite(Number(e))?ou(Number(e)||0,"px"):hy(new RegExp("px|%|em|rem","g"),e)},dy=Of(M_),Ux=function(e){return hy(new RegExp("deg|rad|grad|turn","g"),e)},bS=Of(Ux);function jC(e,t,n,r,i){i===void 0&&(i=0);var s="",l=e.value||0,c=t.value||0,h=j1(e.unit),p=e.convertTo(h),v=t.convertTo(h);return p&&v?(l=p.value,c=v.value,s=k1(e.unit)):(ql.isLength(e.unit)||ql.isLength(t.unit))&&(l=Xd(e,i,n),c=Xd(t,i,n),s="px"),[l,c,function(y){return r&&(y=Math.max(y,0)),y+s}]}function id(e){var t=0;return e.unit===qi.kDegrees?t=e.value:e.unit===qi.kRadians?t=Gd(Number(e.value)):e.unit===qi.kTurns&&(t=OI(Number(e.value))),t}function xS(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):u(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,Yl.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function ES(e){return u(e)?e.split(" ").map(function(t){return dy(t)}):e.map(function(t){return dy(t.toString())})}function Xd(e,t,n,r){if(r===void 0&&(r=!1),e.unit===qi.kPixels)return Number(e.value);if(e.unit===qi.kPercentage&&n){var i=n.nodeName===ui.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var VC=function(e){return hy(/deg|rad|grad|turn|px|%/g,e)},HC=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function SS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,HC.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(s){return VC(s)||k0(s)})}),t.lastIndex===e.length)return n}return[]}function wS(e){return e.toString()}var py=function(e){return typeof e=="number"?ou(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?ou(Number(e)):ou(0)},cg=Of(py);Of(function(e){return u(e)?e.split(" ").map(cg):e.map(cg)});function jx(e,t){return[e,t,wS]}function Vx(e,t){return function(n,r){return[n,r,function(i){return wS((0,d.Z)(i,e,t))}]}}function TS(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function Hx(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=Xa(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function GC(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=Sx(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function WC(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var s=n[0],l=[r[1],r[2]],c=void 0;s==="L"||s==="M"?c=[n[1],n[2]]:(s==="C"||s==="A"||s==="Q")&&(c=[n[n.length-2],n[n.length-1]]),c&&vy(l,c)&&(e.splice(t,1),t--)}}}function NI(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],s=i[0];if(s==="C"||s==="A"||s==="Q"){t=!0;break}}return t}function ZC(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var s=e[i],l=s[0];l==="M"?(r.length&&(n.push(r),r=[]),r.push([s[1],s[2]])):l==="Z"?r.length&&(t.push(r),r=[]):r.push([s[1],s[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function vy(e,t){return e[0]===t[0]&&e[1]===t[1]}function XC(e,t){for(var n=[],r=[],i=[],s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,h=l.params,p=l.prePoint,v=void 0;switch(l.command){case"Q":v=__(p[0],p[1],h[1],h[2],h[3],h[4]);break;case"C":v=g_(p[0],p[1],h[1],h[2],h[3],h[4],h[5],h[6]);break;case"A":var y=l.arcParams;v=rg(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:n.push(c[0]),r.push(c[1]);break}v&&(l.box=v,n.push(v.x,v.x+v.width),r.push(v.y,v.y+v.height)),t&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&i.push(l)}n=n.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0}),r=r.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0});var b=ns(n),T=ns(r),M=zo(n),R=zo(r);if(i.length===0)return{x:b,y:T,width:M-b,height:R-T};for(var s=0;s<i.length;s++){var l=i[s],c=l.currentPoint,I=void 0;c[0]===b?(I=G1(l,t),b=b-I.xExtra):c[0]===M&&(I=G1(l,t),M=M+I.xExtra),c[1]===T?(I=G1(l,t),T=T-I.yExtra):c[1]===R&&(I=G1(l,t),R=R+I.yExtra)}return{x:b,y:T,width:M-b,height:R-T}}function G1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,s=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),c=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),h=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!h||Math.sin(h)===0||sl(h,0))return{xExtra:0,yExtra:0};var p=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),v=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));p=p>Math.PI/2?Math.PI-p:p,v=v>Math.PI/2?Math.PI-v:v;var y={xExtra:Math.cos(h/2-p)*(t/2*(1/Math.sin(h/2)))-t/2||0,yExtra:Math.cos(v-h/2)*(t/2*(1/Math.sin(h/2)))-t/2||0};return y}function AS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var CS=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,s=i*Math.acos(n/r);return s},OS=function(e,t,n,r,i,s,l,c){t=Math.abs(t),n=Math.abs(n),r=Ml(r,360);var h=Ul(r);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(e.x-l.x)/2,v=(e.y-l.y)/2,y={x:Math.cos(h)*p+Math.sin(h)*v,y:-Math.sin(h)*p+Math.cos(h)*v},b=Math.pow(y.x,2)/Math.pow(t,2)+Math.pow(y.y,2)/Math.pow(n,2);b>1&&(t=Math.sqrt(b)*t,n=Math.sqrt(b)*n);var T=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(y.y,2)-Math.pow(n,2)*Math.pow(y.x,2),M=Math.pow(t,2)*Math.pow(y.y,2)+Math.pow(n,2)*Math.pow(y.x,2),R=T/M;R=R<0?0:R;var I=(i!==s?1:-1)*Math.sqrt(R),N={x:I*(t*y.y/n),y:I*(-(n*y.x)/t)},z={x:Math.cos(h)*N.x-Math.sin(h)*N.y+(e.x+l.x)/2,y:Math.sin(h)*N.x+Math.cos(h)*N.y+(e.y+l.y)/2},H={x:(y.x-N.x)/t,y:(y.y-N.y)/n},X=CS({x:1,y:0},H),Y={x:(-y.x-N.x)/t,y:(-y.y-N.y)/n},ne=CS(H,Y);!s&&ne>0?ne-=2*Math.PI:s&&ne<0&&(ne+=2*Math.PI),ne%=2*Math.PI;var ve=X+ne*c,ye=t*Math.cos(ve),De=n*Math.sin(ve),Ye={x:Math.cos(h)*ye-Math.sin(h)*De+z.x,y:Math.sin(h)*ye+Math.cos(h)*De+z.y,ellipticalArcStartAngle:X,ellipticalArcEndAngle:X+ne,ellipticalArcAngle:ve,ellipticalArcCenter:z,resultantRx:t,resultantRy:n};return Ye};function R_(e){for(var t=[],n=null,r=null,i=null,s=0,l=e.length,c=0;c<l;c++){var h=e[c];r=e[c+1];var p=h[0],v={command:p,prePoint:n,params:h,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(p){case"M":i=[h[1],h[2]],s=c;break;case"A":var y=RS(n,h);v.arcParams=y;break}if(p==="Z")n=i,r=e[s+1];else{var b=h.length;n=[h[b-2],h[b-1]]}r&&r[0]==="Z"&&(r=e[s],t[s]&&(t[s].prePoint=n)),v.currentPoint=n,t[s]&&vy(n,t[s].currentPoint)&&(t[s].prePoint=v.prePoint);var T=r?[r[r.length-2],r[r.length-1]]:null;v.nextPoint=T;var M=v.prePoint;if(["L","H","V"].includes(p))v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]];else if(p==="Q"){var R=[h[1],h[2]];v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]}else if(p==="T"){var I=t[c-1],R=AS(I.currentPoint,M);I.command==="Q"?(v.command="Q",v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]):(v.command="TL",v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]])}else if(p==="C"){var N=[h[1],h[2]],z=[h[3],h[4]];v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]],v.startTangent[0]===0&&v.startTangent[1]===0&&(v.startTangent=[N[0]-z[0],N[1]-z[1]]),v.endTangent[0]===0&&v.endTangent[1]===0&&(v.endTangent=[z[0]-N[0],z[1]-N[1]])}else if(p==="S"){var I=t[c-1],N=AS(I.currentPoint,M),z=[h[1],h[2]];I.command==="C"?(v.command="C",v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]]):(v.command="SQ",v.startTangent=[M[0]-z[0],M[1]-z[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]])}else if(p==="A"){var H=gy(v,0),X=H.x,Y=H.y,ne=gy(v,1,!1),ve=ne.x,ye=ne.y;v.startTangent=[X,Y],v.endTangent=[ve,ye]}t.push(v)}return t}function gy(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,s=i===void 0?0:i,l=r.ry,c=l===void 0?0:l,h=r.xRotation,p=r.arcFlag,v=r.sweepFlag,y=OS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},t),b=OS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),T=b.x-y.x,M=b.y-y.y,R=Math.sqrt(T*T+M*M);return{x:-T/R,y:-M/R}}function W1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Gx(e,t){return W1(e)*W1(t)?(e[0]*t[0]+e[1]*t[1])/(W1(e)*W1(t)):1}function MS(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Gx(e,t))}function RS(e,t){var n=t[1],r=t[2],i=Ml(Ul(t[3]),Math.PI*2),s=t[4],l=t[5],c=e[0],h=e[1],p=t[6],v=t[7],y=Math.cos(i)*(c-p)/2+Math.sin(i)*(h-v)/2,b=-1*Math.sin(i)*(c-p)/2+Math.cos(i)*(h-v)/2,T=y*y/(n*n)+b*b/(r*r);T>1&&(n*=Math.sqrt(T),r*=Math.sqrt(T));var M=n*n*(b*b)+r*r*(y*y),R=M?Math.sqrt((n*n*(r*r)-M)/M):1;s===l&&(R*=-1),isNaN(R)&&(R=0);var I=r?R*n*b/r:0,N=n?R*-r*y/n:0,z=(c+p)/2+Math.cos(i)*I-Math.sin(i)*N,H=(h+v)/2+Math.sin(i)*I+Math.cos(i)*N,X=[(y-I)/n,(b-N)/r],Y=[(-1*y-I)/n,(-1*b-N)/r],ne=MS([1,0],X),ve=MS(X,Y);return Gx(X,Y)<=-1&&(ve=Math.PI),Gx(X,Y)>=1&&(ve=0),l===0&&ve>0&&(ve=ve-2*Math.PI),l===1&&ve<0&&(ve=ve+2*Math.PI),{cx:z,cy:H,rx:vy(e,[p,v])?0:n,ry:vy(e,[p,v])?0:r,startAngle:ne,endAngle:ne+ve,xRotation:i,arcFlag:s,sweepFlag:l}}function YC(e,t,n){return e.reduce(function(r,i){var s="";if(i[0]==="M"||i[0]==="L"){var l=or.al(i[1],i[2],0);n&&or.fF(l,l,n),s="".concat(i[0]).concat(l[0],",").concat(l[1])}else if(i[0]==="Z")s=i[0];else if(i[0]==="C"){var c=or.al(i[1],i[2],0),h=or.al(i[3],i[4],0),p=or.al(i[5],i[6],0);n&&(or.fF(c,c,n),or.fF(h,h,n),or.fF(p,p,n)),s="".concat(i[0]).concat(c[0],",").concat(c[1],",").concat(h[0],",").concat(h[1],",").concat(p[0],",").concat(p[1])}else if(i[0]==="A"){var v=or.al(i[6],i[7],0);n&&or.fF(v,v,n),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(v[0],",").concat(v[1])}else if(i[0]==="Q"){var c=or.al(i[1],i[2],0),h=or.al(i[3],i[4],0);n&&(or.fF(c,c,n),or.fF(h,h,n)),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=s},"")}function $C(e,t,n,r){return[["M",e,t],["L",n,r]]}function PS(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,s=e*i,l=t*i,c=n-e,h=n+e,p=r-t,v=r+t;return[["M",c,r],["C",c,r-l,n-s,p,n,p],["C",n+s,p,h,r-l,h,r],["C",h,r+l,n+s,v,n,v],["C",n-s,v,c,r+l,c,r],["Z"]]}function qC(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function KC(e,t,n,r,i){if(i){var s=(0,se.CR)(i,4),l=s[0],c=s[1],h=s[2],p=s[3],v=e>0?1:-1,y=t>0?1:-1,b=v+y!==0?1:0;return[["M",v*l+n,r],["L",e-v*c+n,r],c?["A",c,c,0,0,b,e+n,y*c+r]:null,["L",e+n,t-y*h+r],h?["A",h,h,0,0,b,e+n-v*h,t+r]:null,["L",n+v*p,t+r],p?["A",p,p,0,0,b,n,t+r-y*p]:null,["L",n,y*l+r],l?["A",l,l,0,0,b,v*l+n,r]:null,["Z"]].filter(function(T){return T})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function IS(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case ui.LINE:var r=e.parsedStyle,i=r.x1,s=i===void 0?0:i,l=r.y1,c=l===void 0?0:l,h=r.x2,p=h===void 0?0:h,v=r.y2,y=v===void 0?0:v;n=$C(s,c,p,y);break;case ui.CIRCLE:{var b=e.parsedStyle,T=b.r,M=T===void 0?0:T,R=b.cx,I=R===void 0?0:R,N=b.cy,z=N===void 0?0:N;n=PS(M,M,I,z);break}case ui.ELLIPSE:{var H=e.parsedStyle,X=H.rx,Y=X===void 0?0:X,ne=H.ry,ve=ne===void 0?0:ne,ye=H.cx,I=ye===void 0?0:ye,De=H.cy,z=De===void 0?0:De;n=PS(Y,ve,I,z);break}case ui.POLYLINE:case ui.POLYGON:var Ye=e.parsedStyle.points;n=qC(Ye.points,e.nodeName===ui.POLYGON);break;case ui.RECT:var Qe=e.parsedStyle,yt=Qe.width,qe=yt===void 0?0:yt,ut=Qe.height,ft=ut===void 0?0:ut,mt=Qe.x,Xt=mt===void 0?0:mt,Mt=Qe.y,kt=Mt===void 0?0:Mt,Tn=Qe.radius,zn=Tn&&Tn.some(function(ir){return ir!==0});n=KC(qe,ft,Xt,kt,zn&&Tn.map(function(ir){return(0,d.Z)(ir,0,Math.min(Math.abs(qe)/2,Math.abs(ft)/2))}));break;case ui.PATH:var lr=e.parsedStyle.d.absolutePath;n=(0,se.ev)([],(0,se.CR)(lr),!1);break}if(n.length)return YC(n,e,t)}function FI(e,t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var s=e.map(function(l,c){var h=l[0],p=e[c+1],v=c===0&&(t!==0||n!==0),y=(c===e.length-1||p&&(p[0]==="M"||p[0]==="Z"))&&r!==0&&i!==0;switch(h){case"M":return v?"M ".concat(l[1]+t,",").concat(l[2]+n," L ").concat(l[1],",").concat(l[2]):"M ".concat(l[1],",").concat(l[2]);case"L":return"L ".concat(l[1]+(y?r:0),",").concat(l[2]+(y?i:0));case"Q":return"Q ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4])+(y?" L ".concat(l[3]+r,",").concat(l[4]+i):"");case"C":return"C ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4],",").concat(l[5]," ").concat(l[6])+(y?" L ".concat(l[5]+r,",").concat(l[6]+i):"");case"A":return"A ".concat(l[1]," ").concat(l[2]," ").concat(l[3]," ").concat(l[4]," ").concat(l[5]," ").concat(l[6]," ").concat(l[7])+(y?" L ".concat(l[6]+r,",").concat(l[7]+i):"");case"Z":return"Z"}}).join(" ");return~s.indexOf("NaN")?"":s}var DS=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Dr(e)}catch(b){t=Dr(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}WC(t);var n=NI(t),r=ZC(t),i=r.polygons,s=r.polylines,l=R_(t),c=XC(l,0),h=c.x,p=c.y,v=c.width,y=c.height;return{absolutePath:t,hasArc:n,segments:l,polygons:i,polylines:s,totalLength:0,rect:{x:Number.isFinite(h)?h:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(v)?v:0,height:Number.isFinite(y)?y:0}}},QC=Of(DS);function Wx(e){return u(e)?QC(e):DS(e)}function JC(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=$l(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=$l(t.absolutePath,!1),t.curve=i);var s=[r,i];r.length!==i.length&&(s=nl(r,i));var l=Hc(s[0])!==Hc(s[1])?Cc(s[0]):yl(s[0]);return[l,gc(s[1],l),function(c){return c}]}function LS(e,t){var n;return u(e)?n=e.split(" ").map(function(r){var i=(0,se.CR)(r.split(","),2),s=i[0],l=i[1];return[Number(s),Number(l)]}):n=e,{points:n,totalLength:0,segments:[]}}function eO(e,t){return[e.points,t.points,function(n){return n}]}var oc=null;function Yd(e){return function(t){var n=0;return e.map(function(r){return r===oc?t[n++]:r})}}function fg(e){return e}var yy={matrix:["NNNNNN",[oc,oc,0,0,oc,oc,0,0,0,0,1,0,oc,oc,0,1],fg],matrix3d:["NNNNNNNNNNNNNNNN",fg],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Yd([oc,oc,new ql(1)]),fg],scalex:["N",Yd([oc,new ql(1),new ql(1)]),Yd([oc,new ql(1)])],scaley:["N",Yd([new ql(1),oc,new ql(1)]),Yd([new ql(1),oc])],scalez:["N",Yd([new ql(1),new ql(1),oc])],scale3d:["NNN",fg],skew:["Aa",null,fg],skewx:["A",null,Yd([oc,Rp])],skewy:["A",null,Yd([Rp,oc])],translate:["Tt",Yd([oc,oc,_c]),fg],translatex:["T",Yd([oc,_c,_c]),Yd([oc,_c])],translatey:["T",Yd([_c,oc,_c]),Yd([_c,oc])],translatez:["L",Yd([_c,_c,oc])],translate3d:["TTL",fg]};function Zx(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=yy[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Rp:bS(M)},N:cg,T:dy,L:UC}[b.toUpperCase()](y):T={a:Rp,n:p[0],t:_c}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function NS(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=yy[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Rp:Ux(M)},N:py,T:M_,L:kx}[b.toUpperCase()](y):T={a:Rp,n:p[0],t:_c}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function hg(e){var t,n,r,i;switch(e.t){case"rotatex":return i=Ul(id(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Ul(id(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Ul(id(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=Ul(id(e.d[3]));var s=t*t+n*n+r*r;if(s===0)t=1,n=0,r=0;else if(s!==1){var l=Math.sqrt(s);t/=l,n/=l,r/=l}var c=Math.sin(i/2),h=c*Math.cos(i/2),p=c*c;return[1-2*(n*n+r*r)*p,2*(t*n*p+r*h),2*(t*r*p-n*h),0,2*(t*n*p-r*h),1-2*(t*t+r*r)*p,2*(n*r*p+t*h),0,2*(t*r*p+n*h),2*(n*r*p-t*h),1-2*(t*t+n*n)*p,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var v=Ul(id(e.d[0])),y=Ul(id(e.d[1]));return[1,Math.tan(y),0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Ul(id(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Ul(id(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Xd(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Xd(e.d[0],0,null)||0,n=Xd(e.d[1],0,null)||0,r=Xd(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var b=Xd(e.d[0],0,null)||0,T=b?-1/b:0;return[1,0,0,0,0,1,0,0,0,0,1,T,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(M){return M.value})}}function tO(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function nO(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(hg).reduce(tO)}function FS(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],s=[0,0,0,1];return B1(nO(e),t,n,r,i,s),[[t,n,r,s,i]]}var rO=function(){function e(r,i){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0;l<4;l++)for(var c=0;c<4;c++)for(var h=0;h<4;h++)s[l][c]+=i[l][h]*r[h][c];return s}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,s,l,c){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=0;p<4;p++)h[p][3]=c[p];for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[3][p]+=r[v]*h[v][p];var y=l[0],b=l[1],T=l[2],M=l[3],R=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];R[0][0]=1-2*(b*b+T*T),R[0][1]=2*(y*b-T*M),R[0][2]=2*(y*T+b*M),R[1][0]=2*(y*b+T*M),R[1][1]=1-2*(y*y+T*T),R[1][2]=2*(b*T-y*M),R[2][0]=2*(y*T-b*M),R[2][1]=2*(b*T+y*M),R[2][2]=1-2*(y*y+b*b),h=e(h,R);var I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(I[2][1]=s[2],h=e(h,I)),s[1]&&(I[2][1]=0,I[2][0]=s[0],h=e(h,I)),s[0]&&(I[2][0]=0,I[1][0]=s[0],h=e(h,I));for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[p][v]*=i[p];return t(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return n}();function BI(e){return e.toFixed(6).replace(".000000","")}function Xx(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=FS(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=FS(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var s=oO(n[0][3],r[0][3],i[5]),l=rO(i[0],i[1],i[2],s,i[4]),c=l.map(BI).join(",");return c}])}function iO(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function oO(e,t,n){var r=iO(e,t);r=(0,d.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var s=Math.acos(r),l=Math.sin(n*s)*1/Math.sqrt(1-r*r),c=0;c<4;c++)i.push(e[c]*(Math.cos(n*s)-r*l)+t[c]*l);return i}function Yx(e){return e.replace(/[xy]/,"")}function $x(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var aO=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function kI(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(ne){var ve=e[ne],ye=ve.t,De=ve.d,Ye=ye.substring(0,5)==="scale"?1:0;t.push({t:ye,d:De.map(function(Qe){return typeof Qe=="number"?ou(Ye):ou(Ye,Qe.unit)})})},s=0;s<e.length;s++)i(s)}var l=[],c=[],h=[];if(e.length!==t.length){var p=Xx(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]]}else for(var s=0;s<e.length;s++){var v=e[s].t,y=t[s].t,b=e[s].d,T=t[s].d,M=yy[v],R=yy[y],I=void 0;if(aO(v,y)){var p=Xx([e[s]],[t[s]]);l.push(p[0]),c.push(p[1]),h.push(["matrix",[p[2]]]);continue}else if(v===y)I=v;else if(M[2]&&R[2]&&Yx(v)===Yx(y))I=Yx(v),b=M[2](b),T=R[2](T);else if(M[1]&&R[1]&&$x(v)===$x(y))I=$x(v),b=M[1](b),T=R[1](T);else{var p=Xx(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]];break}for(var N=[],z=[],H=[],X=0;X<b.length;X++){var p=jC(b[X],T[X],n,!1,X);N[X]=p[0],z[X]=p[1],H.push(p[2])}l.push(N),c.push(z),h.push([I,H])}if(r){var Y=l;l=c,c=Y}return[l,c,function(ne){return ne.map(function(ve,ye){var De=ve.map(function(Ye,Qe){return h[ye][1][Qe](Ye)}).join(",");return h[ye][0]==="matrix"&&De.split(",").length===16&&(h[ye][0]="matrix3d"),h[ye][0]==="matrix3d"&&De.split(",").length===6&&(h[ye][0]="matrix"),h[ye][0]+"("+De+")"}).join(" ")}]}var BS=Of(function(e){if(u(e)){if(e==="text-anchor")return[ou(0,"px"),ou(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[dy(Z1(t[0])),dy(Z1(t[1]))]}else return[ou(e[0]||0,"px"),ou(e[1]||0,"px")]}),kS=function(e){if(u(e)){if(e==="text-anchor")return[ou(0,"px"),ou(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[M_(Z1(t[0])),M_(Z1(t[1]))]}else return[ou(e[0]||0,"px"),ou(e[1]||0,"px")]};function Z1(e){return e==="center"?"50%":e==="left"||e==="top"?"0%":e==="right"||e==="bottom"?"100%":e}var qx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Mo.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Mo.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Mo.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Mo.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Mo.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Mo.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Mo.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Mo.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Mo.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Mo.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Mo.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Mo.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Mo.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Mo.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Mo.FILTER},{n:"clipPath",syntax:Mo.DEFINED_PATH},{n:"textPath",syntax:Mo.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Mo.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Mo.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Mo.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Mo.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Mo.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Mo.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Mo.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Mo.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Mo.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Mo.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Mo.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Mo.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Mo.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Mo.NUMBER,d:function(e){return e===ui.PATH||e===ui.POLYGON||e===ui.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Mo.MARKER},{n:"markerEnd",syntax:Mo.MARKER},{n:"markerMid",syntax:Mo.MARKER},{n:"markerStartOffset",syntax:Mo.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Mo.LENGTH,l:!0,int:!0,d:"0"}],zS=qx.filter(function(e){return!!e.l}).map(function(e){return e.n}),om={},dg=new WeakMap,sO=function(e,t){var n=dg.get(e);return!n||n.length===0?!0:n.includes(t)},lO=function(){function e(t){var n=this;this.runtime=t,qx.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,se.ev)([t.n],(0,se.CR)(t.a||[]),!1).forEach(function(n){om[n]=t})},e.prototype.unregisterMetadata=function(t){delete om[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var v=r.skipUpdateAttribute,y=r.skipParse,b=r.forceUpdateGeometry,T=r.usedAttributes,M=r.memoize,R=b,I=Object.keys(n);I.forEach(function(N){var z;v||(t.attributes[N]=n[N]),!R&&(!((z=om[N])===null||z===void 0)&&z.l)&&(R=!0)}),y||I.forEach(function(N){t.computedStyle[N]=i.parseProperty(N,t.attributes[N],t,M)}),T!=null&&T.length&&(I=Array.from(new Set(I.concat(T)))),I.forEach(function(N){N in t.computedStyle&&(t.parsedStyle[N]=i.computeProperty(N,t.computedStyle[N],t,M))}),R&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t)),I.forEach(function(N){N in t.parsedStyle&&i.postProcessProperty(N,t,I)}),this.runtime.enableCSSParsing&&t.children.length&&I.forEach(function(N){N in t.parsedStyle&&i.isPropertyInheritable(N)&&t.children.forEach(function(z){z.internalSetAttribute(N,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(t.attributes,n);var s=Object.keys(n),l=t.parsedStyle.clipPath,c=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var h=!!r.forceUpdateGeometry;if(!h){for(var p=0;p<zS.length;p++)if(zS[p]in n){h=!0;break}}n.fill&&(t.parsedStyle.fill=k0(n.fill)),n.stroke&&(t.parsedStyle.stroke=k0(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=k0(n.shadowColor)),n.filter&&(t.parsedStyle.filter=SS(n.filter)),(0,Sa.Z)(n.radius)||(t.parsedStyle.radius=xS(n.radius,4)),(0,Sa.Z)(n.lineDash)||(t.parsedStyle.lineDash=xS(n.lineDash,2)),n.points&&(t.parsedStyle.points=LS(n.points)),n.d===""&&(t.parsedStyle.d=(0,se.pi)({},hS)),n.d&&(t.parsedStyle.d=Wx(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),Fs(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",l,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",c,n.offsetPath,t,this.runtime),n.transform&&(t.parsedStyle.transform=Zx(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=BS(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),(0,Sa.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,s),(0,Sa.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,s),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,s),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(t,s),h&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},e.prototype.parseProperty=function(t,n,r,i){var s=om[t],l=n;if((n===""||(0,Sa.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")l=T_(n);else if(s){var c=s.k,h=s.syntax,p=h&&this.getPropertySyntax(h);c&&c.indexOf(n)>-1?l=T_(n):p&&(!i&&p.parserUnmemoize?l=p.parserUnmemoize(n,r):p.parser&&(l=p.parser(n,r)))}return l},e.prototype.computeProperty=function(t,n,r,i){var s=om[t],l=r.id==="g-root",c=n;if(s){var h=s.syntax,p=s.inh,v=s.d;if(n instanceof rd){var y=n.value;if(y==="unset"&&(p&&!l?y="inherit":y="initial"),y==="initial")(0,Sa.Z)(v)||(n=this.parseProperty(t,lg(v)?v(r.nodeName):v,r,i));else if(y==="inherit"){var b=this.tryToResolveProperty(r,t,{inherited:!0});if((0,Sa.Z)(b)){this.addUnresolveProperty(r,t);return}else return b}}var T=h&&this.getPropertySyntax(h);if(T&&T.calculator){var M=r.parsedStyle[t];c=T.calculator(t,M,n,r,this.runtime)}else n instanceof rd?c=n.value:c=n}return c},e.prototype.postProcessProperty=function(t,n,r){var i=om[t];if(i&&i.syntax){var s=i.syntax&&this.getPropertySyntax(i.syntax),l=s;l&&l.postProcessor&&l.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=dg.get(t);r||(dg.set(t,[]),r=dg.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&sO(t.parentElement,n)){var s=t.parentElement.parsedStyle[n];return s==="unset"||s==="initial"||s==="inherit"?void 0:s}},e.prototype.recalc=function(t){var n=dg.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),dg.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new Mc),i.renderBounds||(i.renderBounds=new Mc);var s=t.parsedStyle,l=r.update(s,t),c=l.cx,h=c===void 0?0:c,p=l.cy,v=p===void 0?0:p,y=l.cz,b=y===void 0?0:y,T=l.hwidth,M=T===void 0?0:T,R=l.hheight,I=R===void 0?0:R,N=l.hdepth,z=N===void 0?0:N,H=[Math.abs(M),Math.abs(I),z],X=s,Y=X.stroke,ne=X.lineWidth,ve=ne===void 0?1:ne,ye=X.increasedLineWidthForHitTesting,De=ye===void 0?0:ye,Ye=X.shadowType,Qe=Ye===void 0?"outer":Ye,yt=X.shadowColor,qe=X.filter,ut=qe===void 0?[]:qe,ft=X.transformOrigin,mt=[h,v,b];i.contentBounds.update(mt,H);var Xt=n===ui.POLYLINE||n===ui.POLYGON||n===ui.PATH?Math.SQRT2:.5,Mt=Y&&!Y.isNone;if(Mt){var kt=((ve||0)+(De||0))*Xt;H[0]+=kt,H[1]+=kt}if(i.renderBounds.update(mt,H),yt&&Qe&&Qe!=="inner"){var Tn=i.renderBounds,zn=Tn.min,lr=Tn.max,ir=s,Hr=ir.shadowBlur,Ti=ir.shadowOffsetX,ro=ir.shadowOffsetY,si=Hr||0,Xr=Ti||0,mo=ro||0,ho=zn[0]-si+Xr,Ho=lr[0]+si+Xr,ma=zn[1]-si+mo,Ia=lr[1]+si+mo;zn[0]=Math.min(zn[0],ho),lr[0]=Math.max(lr[0],Ho),zn[1]=Math.min(zn[1],ma),lr[1]=Math.max(lr[1],Ia),i.renderBounds.setMinMax(zn,lr)}ut.forEach(function(Rs){var ju=Rs.name,Kc=Rs.params;if(ju==="blur"){var zp=Kc[0].value;i.renderBounds.update(i.renderBounds.center,E_(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[zp,zp,0]))}else if(ju==="drop-shadow"){var Qc=Kc[0].value,fh=Kc[1].value,Ya=Kc[2].value,Ps=i.renderBounds,us=Ps.min,ka=Ps.max,Sl=us[0]-Ya+Qc,ul=ka[0]+Ya+Qc,qs=us[1]-Ya+fh,Iu=ka[1]+Ya+fh;us[0]=Math.min(us[0],Sl),ka[0]=Math.max(ka[0],ul),us[1]=Math.min(us[1],qs),ka[1]=Math.max(ka[1],Iu),i.renderBounds.setMinMax(us,ka)}}),t.geometry.dirty=!1;var Da=M<0,ms=I<0,Nl=(Da?-1:1)*(ft?Xd(ft[0],0,t,!0):0),os=(ms?-1:1)*(ft?Xd(ft[1],1,t,!0):0);(Nl||os)&&t.setOrigin(Nl,os)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===ui.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===ui.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=om[t];return n?n.inh:!1},e}(),uO=function(){function e(){this.parser=bS,this.parserUnmemoize=Ux,this.parserWithCSSDisabled=null,this.mixer=jx}return e.prototype.calculator=function(t,n,r,i){return id(r)},e}(),cO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,s){return r instanceof rd&&(r=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),r},e}(),fO=function(){function e(){this.parser=k0,this.parserWithCSSDisabled=k0,this.mixer=O_}return e.prototype.calculator=function(t,n,r,i){return r instanceof rd?r.value==="none"?V1:cS:r},e}(),hO=function(){function e(){this.parser=SS}return e.prototype.calculator=function(t,n,r){return r instanceof rd?[]:r},e}();function US(e){var t=e.parsedStyle.fontSize;return(0,Sa.Z)(t)?null:t}var Kx=function(){function e(){this.parser=dy,this.parserUnmemoize=M_,this.parserWithCSSDisabled=null,this.mixer=jx}return e.prototype.calculator=function(t,n,r,i,s){var l;if((0,Yl.Z)(r))return r;if(ql.isRelativeUnit(r.unit)){var c=s.styleValueRegistry;if(r.unit===qi.kPercentage)return 0;if(r.unit===qi.kEms){if(i.parentNode){var h=US(i.parentNode);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}else if(r.unit===qi.kRems){if(!((l=i==null?void 0:i.ownerDocument)===null||l===void 0)&&l.documentElement){var h=US(i.ownerDocument.documentElement);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),zI=function(){function e(){this.mixer=TS}return e.prototype.parser=function(t){var n=ES((0,Yl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),dO=function(){function e(){this.mixer=TS}return e.prototype.parser=function(t){var n=ES((0,Yl.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),Qx=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof rd&&(r=null);var s=r==null?void 0:r.cloneNode(!0);return s&&(s.style.isMarker=!0),s},e}(),pO=function(){function e(){this.mixer=jx,this.parser=cg,this.parserUnmemoize=py,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),vO=function(){function e(){this.parser=cg,this.parserUnmemoize=py,this.parserWithCSSDisabled=null,this.mixer=Vx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var s=r.nodeName;if(s===ui.LINE||s===ui.PATH||s===ui.POLYLINE){var l=r.getPoint(i);l&&t.setLocalPosition(l.x,l.y)}}},e}(),mO=function(){function e(){this.parser=cg,this.parserUnmemoize=py,this.parserWithCSSDisabled=null,this.mixer=Vx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),gO=function(){function e(){this.parser=Wx,this.parserWithCSSDisabled=Wx,this.mixer=JC}return e.prototype.calculator=function(t,n,r){return r instanceof rd&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new cy(0,0,0,0)}:r},e}(),yO=function(){function e(){this.parser=LS,this.mixer=eO}return e}(),_O=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.mixer=Vx(0,1/0),n}return t}(Kx),X1=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof rd?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),bO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var s=i.getAttribute("text");if(s){var l=s;r.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):r.value==="lowercase"?l=s.toLowerCase():r.value==="uppercase"&&(l=s.toUpperCase()),i.parsedStyle.text=l}return r.value},e}(),Jx={},xO=0;function EO(e,t){if(e){var n=typeof e=="string"?e:e.id||xO++;Jx[n]&&Jx[n].destroy(),Jx[n]=t}}var Y1=typeof window!="undefined"&&typeof window.document!="undefined";function UI(e){return!!e.getAttribute}function SO(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;jS(e[i],t)<0?n=i+1:r=i}return n}function jS(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var s=i.childNodes||[];return s.indexOf(e)-s.indexOf(t)}}return n-r}function wO(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var VS="px";function TO(e,t,n){Y1&&e.style&&(e.style.width=t+VS,e.style.height=n+VS)}function HS(e,t){if(Y1)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function AO(e){var t=HS(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function CO(e){var t=HS(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var GS=1,e2={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},t2=typeof performance=="object"&&performance.now?performance:Date;function pg(e,t,n){e===void 0&&(e="auto");var r=!1,i=!1,s=!!t&&!t.isNone,l=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=s,i=l):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var WS=1,ZS=function(){return WS++},z0=typeof self=="object"&&self.self==self?self:typeof L.g=="object"&&L.g.global==L.g?L.g:{},OO=Date.now(),XS=function(){return z0.performance&&typeof z0.performance.now=="function"?z0.performance.now():Date.now()-OO},am={},YS=Date.now(),_y=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-YS,r=n>16?0:16-n,i=ZS();return am[i]=e,Object.keys(am).length>1||setTimeout(function(){YS=t;var s=am;am={},Object.keys(s).forEach(function(l){return s[l](XS())})},r),i},MO=function(e){delete am[e]},RO=["","webkit","moz","ms","o"],$S=function(e){return typeof e!="string"?_y:e===""?z0.requestAnimationFrame:z0[e+"RequestAnimationFrame"]},PO=function(e){return typeof e!="string"?MO:e===""?z0.cancelAnimationFrame:z0[e+"CancelAnimationFrame"]||z0[e+"CancelRequestAnimationFrame"]},Pp=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},vg=Pp(RO,function(e){return!!$S(e)}),n2=$S(vg),wo=PO(vg);z0.requestAnimationFrame=n2,z0.cancelAnimationFrame=wo;var IO=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,se.ev)([],(0,se.CR)(t),!1))}))},e}(),qS=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,se.mG)(this,void 0,void 0,function(){var r,i,s,l;return(0,se.Jh)(this,function(c){switch(c.label){case 0:return this.callbacks.length?[4,(l=this.callbacks)[0].apply(l,(0,se.ev)([],(0,se.CR)(t),!1))]:[3,6];case 1:r=c.sent(),i=0,c.label=2;case 2:return i<this.callbacks.length-1?(s=this.callbacks[i],[4,s(r)]):[3,5];case 3:r=c.sent(),c.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),bn=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),Bs=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),rs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],P_=/([\"\'])[^\'\"]+\1/;function od(e){for(var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?"sans-serif":r,s=e.fontStyle,l=s===void 0?"normal":s,c=e.fontVariant,h=c===void 0?"normal":c,p=e.fontWeight,v=p===void 0?"normal":p,y=(0,Yl.Z)(n)&&"".concat(n,"px")||"16px",b=i.split(","),T=b.length-1;T>=0;T--){var M=b[T].trim();!P_.test(M)&&rs.indexOf(M)<0&&(M='"'.concat(M,'"')),b[T]=M}return"".concat(l," ").concat(h," ").concat(v," ").concat(y," ").concat(b.join(","))}function ls(e,t,n){return Qr.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var ac=1e-5,Th=Qr.create(),ps=Qr.create();function Rc(e,t){if(e.length){var n=Qr.identity(Th);e.forEach(function(r){var i=r.t,s=r.d;if(i==="scale"){var l=(s==null?void 0:s.map(function(N){return Math.max(N.value,ac)}))||[1,1];Qr.fromScaling(ps,[l[0],l[1],1])}else if(i==="scalex"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,ac)}))||[1];Qr.fromScaling(ps,[l[0],1,1])}else if(i==="scaley"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,ac)}))||[1];Qr.fromScaling(ps,[1,l[0],1])}else if(i==="scalez"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,ac)}))||[1];Qr.fromScaling(ps,[1,1,l[0]])}else if(i==="scale3d"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,ac)}))||[1,1,1];Qr.fromScaling(ps,[l[0],l[1],l[2]])}else if(i==="translate"){var c=s||[_c,_c];Qr.fromTranslation(ps,[c[0].value,c[1].value,0])}else if(i==="translatex"){var c=s||[_c];Qr.fromTranslation(ps,[c[0].value,0,0])}else if(i==="translatey"){var c=s||[_c];Qr.fromTranslation(ps,[0,c[0].value,0])}else if(i==="translatez"){var c=s||[_c];Qr.fromTranslation(ps,[0,0,c[0].value])}else if(i==="translate3d"){var c=s||[_c,_c,_c];Qr.fromTranslation(ps,[c[0].value,c[1].value,c[2].value])}else if(i==="rotate"){var h=s||[Rp];Qr.fromZRotation(ps,Ul(id(h[0])))}else if(i==="rotatex"){var h=s||[Rp];Qr.fromXRotation(ps,Ul(id(h[0])))}else if(i==="rotatey"){var h=s||[Rp];Qr.fromYRotation(ps,Ul(id(h[0])))}else if(i==="rotatez"){var h=s||[Rp];Qr.fromZRotation(ps,Ul(id(h[0])))}else if(i==="rotate3d"){var h=s||[_c,_c,_c,Rp];Qr.fromRotation(ps,Ul(id(h[3])),[h[0].value,h[1].value,h[2].value])}else if(i==="skew"){var p=(s==null?void 0:s.map(function(N){return N.value}))||[0,0];ls(ps,Ul(p[0]),Ul(p[1]))}else if(i==="skewx"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];ls(ps,Ul(p[0]),0)}else if(i==="skewy"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];ls(ps,0,Ul(p[0]))}else if(i==="matrix"){var v=(0,se.CR)(s.map(function(N){return N.value}),6),y=v[0],b=v[1],T=v[2],M=v[3],R=v[4],I=v[5];Qr.set(ps,y,b,0,0,T,M,0,0,0,0,1,0,R,I,0,1)}else i==="matrix3d"&&Qr.set.apply(Qr,(0,se.ev)([ps],(0,se.CR)(s.map(function(N){return N.value})),!1));Qr.mul(n,n,ps)}),t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var bc=function(){function e(){this.parser=Zx,this.parserUnmemoize=NS,this.parserWithCSSDisabled=NS,this.mixer=kI}return e.prototype.calculator=function(t,n,r,i){return r instanceof rd?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;Rc(n,t)},e}(),Il=function(){function e(){this.parser=BS,this.parserUnmemoize=kS}return e.prototype.postProcessor=function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===qi.kPixels&&n[1].unit===qi.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()},e}(),i0=function(){function e(){this.parser=cg,this.parserUnmemoize=py}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=ug.Z_INDEX_CHANGED)}},e}(),mg=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.r,h=c===void 0?0:c;return{cx:i,cy:l,hwidth:h,hheight:h}},e}(),KS=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.rx,h=c===void 0?0:c,p=t.ry,v=p===void 0?0:p;return{cx:i,cy:l,hwidth:h,hheight:v}},e}(),fs=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=Math.min(n,i),c=Math.max(n,i),h=Math.min(r,s),p=Math.max(r,s),v=c-l,y=p-h,b=v/2,T=y/2;return{cx:l+b,cy:h+T,hwidth:b,hheight:T}},e}(),Wf=function(){function e(){}return e.prototype.update=function(t){var n=t.d,r=n.rect,i=r.x,s=r.y,l=r.width,c=r.height,h=l/2,p=c/2;return{cx:i+h,cy:s+p,hwidth:h,hheight:p}},e}(),df=function(){function e(){}return e.prototype.update=function(t){if(t.points&&Vo(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[0]})),!1)),i=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[0]})),!1)),s=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[1]})),!1)),l=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(n.map(function(y){return y[1]})),!1)),c=i-r,h=l-s,p=c/2,v=h/2;return{cx:r+p,cy:s+v,hwidth:p,hheight:v}}return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),Fu=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,s=t.y,l=s===void 0?0:s,c=t.src,h=t.width,p=h===void 0?0:h,v=t.height,y=v===void 0?0:v,b=p,T=y;return c&&!u(c)&&(b||(b=c.width,t.width=b),T||(T=c.height,t.height=T)),{cx:i+b/2,cy:l+T/2,hwidth:b/2,hheight:T/2}},e}(),jI=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,s=t.textBaseline,l=t.fontSize,c=t.fontStyle,h=t.fontWeight,p=t.fontVariant,v=t.lineWidth;return Kr.enableCSSParsing?r&&l&&c&&h&&p&&i&&s&&!(0,Sa.Z)(v):r},e.prototype.update=function(t,n){var r,i,s=t.text,l=t.textAlign,c=l===void 0?"start":l,h=t.lineWidth,p=h===void 0?1:h,v=t.textBaseline,y=v===void 0?"alphabetic":v,b=t.dx,T=b===void 0?0:b,M=t.dy,R=M===void 0?0:M,I=t.x,N=I===void 0?0:I,z=t.y,H=z===void 0?0:z;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var X=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,Y=this.globalRuntime.textService.measureText(s,t,X);t.metrics=Y;var ne=Y.width,ve=Y.height,ye=Y.lineHeight,De=Y.fontProperties,Ye=ne/2,Qe=ve/2,yt=N+Ye;c==="center"||c==="middle"?yt+=p/2-Ye:(c==="right"||c==="end")&&(yt+=p-Ye*2);var qe=H-Qe;return y==="middle"?qe+=Qe:y==="top"||y==="hanging"?qe+=Qe*2:y==="alphabetic"?qe+=this.globalRuntime.enableCSSParsing?ye-De.ascent:0:(y==="bottom"||y==="ideographic")&&(qe+=0),T&&(yt+=T),R&&(qe+=R),{cx:yt,cy:qe,hwidth:Ye,hheight:Qe}},e}(),Bu=function(){function e(){}return e.prototype.update=function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}},e}();function U0(e){return!!e.type}var xv=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Zc,this.page=new Zc,this.canvas=new Zc,this.viewport=new Zc,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(iu)},e}(),I_=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.client=new Zc,n.movement=new Zc,n.offset=new Zc,n.global=new Zc,n.screen=new Zc,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(iu)},t}(xv),ri=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(I_),Ro=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(I_),au=function(e){(0,se.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(xv),vo=":",ta=function(){function e(){this.emitter=new fl}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=zd(r)&&r||_l(r)&&r.capture,s=_l(r)&&r.once,l=lg(n)?void 0:n,c=!1,h="";if(t.indexOf(vo)>-1){var p=(0,se.CR)(t.split(vo),2),v=p[0],y=p[1];t=y,h=v,c=!0}if(t=i?"".concat(t,"capture"):t,n=lg(n)?n:n.handleEvent,c){var b=n;n=function(){for(var T,M=[],R=0;R<arguments.length;R++)M[R]=arguments[R];((T=M[0].target)===null||T===void 0?void 0:T.name)===h&&b.apply(void 0,(0,se.ev)([],(0,se.CR)(M),!1))}}return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=zd(r)&&r||_l(r)&&r.capture,s=lg(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=lg(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,s),this},e.prototype.emit=function(t,n){this.dispatchEvent(new au(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!U0(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var s;if(this.document?s=this:this.defaultView?s=this.defaultView:s=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,s){if(t.manager=s.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),Qn=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===ui.TEXT&&(i+=this.style.text);try{for(var s=(0,se.XA)(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;c.nodeName===ui.TEXT?i+=c.nodeValue:i+=c.textContent}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===ui.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(iu)},t.prototype.lookupNamespaceURI=function(n){throw new Error(iu)},t.prototype.lookupPrefix=function(n){throw new Error(iu)},t.prototype.normalize=function(){throw new Error(iu)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,s=this,l=[i],c=[s];(r=i.parentNode)!==null&&r!==void 0?r:s.parentNode;)i=i.parentNode?(l.push(i.parentNode),i.parentNode):i,s=s.parentNode?(c.push(s.parentNode),s.parentNode):s;if(i!==s)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var h=l.length>c.length?l:c,p=h===l?c:l;if(h[h.length-p.length]===p[0])return h===l?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var v=h.length-p.length,y=p.length-1;y>=0;y--){var b=p[y],T=h[v+y];if(T!==b){var M=b.parentNode.childNodes;return M.indexOf(b)<M.indexOf(T)?p===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:h===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(ta),$1=2048,j0=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new fl,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Qr.create(),this.tmpVec3=or.Ue(),this.onPointerDown=function(i){var s=r.createPointerEvent(i);if(r.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")r.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightdown":"mousedown")}var c=r.trackingData(i.pointerId);c.pressTargetsByButton[i.button]=s.composedPath(),r.freeEvent(s)},this.onPointerUp=function(i){var s,l=t2.now(),c=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(c,"pointerup"),c.pointerType==="touch")r.dispatchEvent(c,"touchend");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.dispatchEvent(c,h?"rightup":"mouseup")}var p=r.trackingData(i.pointerId),v=r.findMountedTarget(p.pressTargetsByButton[i.button]),y=v;if(v&&!c.composedPath().includes(v)){for(var b=v;b&&!c.composedPath().includes(b);){if(c.currentTarget=b,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch")r.notifyTarget(c,"touchendoutside");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.notifyTarget(c,h?"rightupoutside":"mouseupoutside")}Qn.isNode(b)&&(b=b.parentNode)}delete p.pressTargetsByButton[i.button],y=b}if(y){var T=r.clonePointerEvent(c,"click");T.target=y,T.path=[],p.clicksByButton[i.button]||(p.clicksByButton[i.button]={clickCount:0,target:T.target,timeStamp:l});var M=p.clicksByButton[i.button];M.target===T.target&&l-M.timeStamp<200?++M.clickCount:M.clickCount=1,M.target=T.target,M.timeStamp=l,T.detail=M.clickCount,!((s=c.detail)===null||s===void 0)&&s.preventClick||(!r.context.config.useNativeClickEvent&&(T.pointerType==="mouse"||T.pointerType==="touch")&&r.dispatchEvent(T,"click"),r.dispatchEvent(T,"pointertap")),r.freeEvent(T)}r.freeEvent(c)},this.onPointerMove=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),l=s.pointerType==="mouse"||s.pointerType==="pen",c=r.trackingData(i.pointerId),h=r.findMountedTarget(c.overTargets);if(c.overTargets&&h!==s.target){var p=i.type==="mousemove"?"mouseout":"pointerout",v=r.createPointerEvent(i,p,h||void 0);if(r.dispatchEvent(v,"pointerout"),l&&r.dispatchEvent(v,"mouseout"),!s.composedPath().includes(h)){var y=r.createPointerEvent(i,"pointerleave",h||void 0);for(y.eventPhase=y.AT_TARGET;y.target&&!s.composedPath().includes(y.target);)y.currentTarget=y.target,r.notifyTarget(y),l&&r.notifyTarget(y,"mouseleave"),Qn.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(v)}if(h!==s.target){var b=i.type==="mousemove"?"mouseover":"pointerover",T=r.clonePointerEvent(s,b);r.dispatchEvent(T,"pointerover"),l&&r.dispatchEvent(T,"mouseover");for(var M=h&&Qn.isNode(h)&&h.parentNode;M&&M!==(Qn.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&M!==s.target;)M=M.parentNode;var R=!M||M===(Qn.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(R){var I=r.clonePointerEvent(s,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==h&&I.target!==(Qn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)I.currentTarget=I.target,r.notifyTarget(I),l&&r.notifyTarget(I,"mouseenter"),Qn.isNode(I.target)&&(I.target=I.target.parentNode);r.freeEvent(I)}r.freeEvent(T)}r.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&r.dispatchEvent(s,"touchmove"),l&&(r.dispatchEvent(s,"mousemove"),r.cursor=r.getCursor(s.target)),c.overTargets=s.composedPath(),r.freeEvent(s)},this.onPointerOut=function(i){var s=r.trackingData(i.pointerId);if(s.overTargets){var l=i.pointerType==="mouse"||i.pointerType==="pen",c=r.findMountedTarget(s.overTargets),h=r.createPointerEvent(i,"pointerout",c||void 0);r.dispatchEvent(h),l&&r.dispatchEvent(h,"mouseout");var p=r.createPointerEvent(i,"pointerleave",c||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(Qn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseleave"),Qn.isNode(p.target)&&(p.target=p.target.parentNode);s.overTargets=null,r.freeEvent(h),r.freeEvent(p)}r.cursor=null},this.onPointerOver=function(i){var s=r.trackingData(i.pointerId),l=r.createPointerEvent(i),c=l.pointerType==="mouse"||l.pointerType==="pen";r.dispatchEvent(l,"pointerover"),c&&r.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(r.cursor=r.getCursor(l.target));var h=r.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==(Qn.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),c&&r.notifyTarget(h,"mouseenter"),Qn.isNode(h.target)&&(h.target=h.target.parentNode);s.overTargets=l.composedPath(),r.freeEvent(l),r.freeEvent(h)},this.onPointerUpOutside=function(i){var s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.pressTargetsByButton[i.button]),c=r.createPointerEvent(i);if(l){for(var h=l;h;)c.currentTarget=h,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch"||(c.pointerType==="mouse"||c.pointerType==="pen")&&r.notifyTarget(c,c.button===2?"rightupoutside":"mouseupoutside"),Qn.isNode(h)&&(h=h.parentNode);delete s.pressTargetsByButton[i.button]}r.freeEvent(c)},this.onWheel=function(i){var s=r.createWheelEvent(i);r.dispatchEvent(s),r.freeEvent(s)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var s=r.createPointerEvent(i);r.dispatchEvent(s),r.freeEvent(s)}},this.onPointerCancel=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(s),r.freeEvent(s)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.getScale=function(){var t=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&t){var s=i.offsetWidth,l=i.offsetHeight;s&&l&&(n=t.width/s,r=t.height/l)}return{scaleX:n,scaleY:r,bbox:t}},e.prototype.client2Viewport=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new Zc((t.x-((s==null?void 0:s.left)||0))/r,(t.y-((s==null?void 0:s.top)||0))/i)},e.prototype.viewport2Client=function(t){var n=this.getScale(),r=n.scaleX,i=n.scaleY,s=n.bbox;return new Zc((t.x+((s==null?void 0:s.left)||0))*r,(t.y+((s==null?void 0:s.top)||0))*i)},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,s=i.getCamera(),l=this.context.config,c=l.width,h=l.height,p=s.getPerspectiveInverse(),v=s.getWorldTransform(),y=Qr.multiply(this.tmpMatrix,v,p),b=or.t8(this.tmpVec3,n/c*2-1,(1-r/h)*2-1,0);return or.fF(b,b,y),new Zc(b[0],b[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),s=r.getViewTransform(),l=Qr.multiply(this.tmpMatrix,i,s),c=or.t8(this.tmpVec3,t.x,t.y,0);or.fF(this.tmpVec3,this.tmpVec3,l);var h=this.context.config,p=h.width,v=h.height;return new Zc((c[0]+1)/2*p,(1-(c[1]+1)/2)*v)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=s+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<$1&&t!==this.rootTarget;i++)Qn.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,s=i.width,l=i.height,c=i.disableHitTesting;return n<0||r<0||n>s||r>l?null:!c&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,se.XA)(t.nativeEvent.composedPath()),s=i.next();!s.done;s=i.next()){var l=s.value,c=this.nativeHTMLMap.get(l);if(c)return c}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var s=this.allocateEvent(ri);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var l=this.getExistedHTML(s),c=this.context.contextService.getDomElement();return s.target=r!=null?r:l||this.isNativeEventFromCanvas(c,s.nativeEvent)&&this.pickTarget(s)||i,typeof n=="string"&&(s.type=n),s},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(Ro);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(Ro);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(ri);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=t2.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var s=0;s<i.length&&!t.propagationImmediatelyStopped;s++)i[s].once&&r.removeListener(n,i[s].fn,void 0,!0),i[s].fn.call(t.currentTarget||i[s].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||Qn.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=UI(n)&&n.getAttribute("cursor");if(r)return r;n=Qn.isNode(n)&&n.parentNode}},e}(),by=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||Kr.offscreenCanvas)this.canvas=t||Kr.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,se.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),Ev;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(Ev||(Ev={}));var QS=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new bn,initAsync:new IO,dirtycheck:new Bs,cull:new Bs,beginFrame:new bn,beforeRender:new bn,render:new bn,afterRender:new bn,endFrame:new bn,destroy:new bn,pick:new qS,pickSync:new Bs,pointerDown:new bn,pointerUp:new bn,pointerMove:new bn,pointerOut:new bn,pointerOver:new bn,pointerWheel:new bn,pointerCancel:new bn,click:new bn}}return e.prototype.init=function(t){var n=this,r=(0,se.pi)((0,se.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Ev.CAMERA_CHANGED)},e.prototype.render=function(t,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(Ev.CAMERA_CHANGED),c=!t.disableRenderHooks||!(t.disableRenderHooks&&l);c&&this.renderDisplayObject(s.root,t,s),this.hooks.beginFrame.call(n),c&&s.renderListCurrentFrame.forEach(function(h){i.hooks.beforeRender.call(h),i.hooks.render.call(h),i.hooks.afterRender.call(h)}),this.hooks.endFrame.call(n),s.renderListCurrentFrame=[],s.renderReasons.clear(),r()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,s=n.renderer.getConfig(),l=s.enableDirtyCheck,c=s.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var h=t.renderable,p=l?h.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(p){var v=c?this.hooks.cull.call(p,this.context.camera):p;v&&(this.stats.rendered++,r.renderListCurrentFrame.push(v))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var y=t.sortable;y.dirty&&(this.sort(t,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0),(y.sorted||t.childNodes).forEach(function(b){i.renderDisplayObject(b,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==ug.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var s=n.sorted.indexOf(r);s>=0&&n.sorted.splice(s,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var l=SO(n.sorted,r);n.sorted.splice(l,0,r)}}):n.sorted=t.childNodes.slice().sort(jS)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Ev.DISPLAY_OBJECT_CHANGED)},e}(),VI=/\[\s*(.*)=(.*)\s*\]/,DO=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(c){return((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(c){return c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.find(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):null}else return n.find(function(c){return n!==c&&c.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(c){return n!==c&&((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(c){return n!==c&&c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.findAll(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):[]}else return n.findAll(function(c){return n!==c&&c.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,s=r.value;return i==="name"?n.name===s:this.attributeToString(n,i)===s}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(VI),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,Sa.Z)(r)?"":r.toString?r.toString():""},e}(),gg=function(e){(0,se.ZT)(t,e);function t(n,r,i,s,l,c,h,p){var v=e.call(this,null)||this;return v.relatedNode=r,v.prevValue=i,v.newValue=s,v.attrName=l,v.attrChange=c,v.prevParsedValue=h,v.newParsedValue=p,v.type=n,v}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(xv),Ba;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(Ba||(Ba={}));function r2(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var Ha=new gg(Ba.REPARENT,null,"","","",0,"",""),yg=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new au(Ba.BOUNDS_CHANGED),this.rotate=function(){var r=Yi();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=or.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,s);else{var v=Yi();Kg(v,s[0],s[1],s[2]);var y=n.getRotation(i),b=n.getRotation(i.parentNode);Yv(r,b),T0(r,r),Tc(v,r,v),Tc(p.localRotation,v,y),vv(p.localRotation,p.localRotation),h&&n.dirtifyLocal(i,p)}}}(),this.rotateLocal=function(){var r=Yi();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=or.al(s,l,c));var p=i.transformable;Kg(r,s[0],s[1],s[2]),pv(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}(),this.setEulerAngles=function(){var r=Yi();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=or.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,s);else{Kg(p.localRotation,s[0],s[1],s[2]);var v=n.getRotation(i.parentNode);Yv(r,T0(Yi(),v)),pv(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}}(),this.translateLocal=function(){return function(r,i,s,l,c){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=!0),typeof i=="number"&&(i=or.al(i,s,l));var h=r.transformable;or.fS(i,or.Ue())||(or.VC(i,i,h.localRotation),or.IH(h.localPosition,h.localPosition,i),c&&n.dirtifyLocal(r,h))}}(),this.setPosition=function(){var r=Qr.create(),i=or.Ue();return function(s,l,c){c===void 0&&(c=!0);var h=s.transformable;if(i[0]=l[0],i[1]=l[1],i[2]=l[2]||0,!or.fS(n.getPosition(s),i)){if(or.JG(h.position,i),s.parentNode===null||!s.parentNode.transformable)or.JG(h.localPosition,i);else{var p=s.parentNode.transformable;Qr.copy(r,p.worldTransform),Qr.invert(r,r),or.fF(h.localPosition,i,r)}c&&n.dirtifyLocal(s,h)}}}(),this.setLocalPosition=function(){var r=or.Ue();return function(i,s,l){l===void 0&&(l=!0);var c=i.transformable;r[0]=s[0],r[1]=s[1],r[2]=s[2]||0,!or.fS(c.localPosition,r)&&(or.JG(c.localPosition,r),l&&n.dirtifyLocal(i,c))}}(),this.translate=function(){var r=or.Ue(),i=or.Ue(),s=or.Ue();return function(l,c,h,p,v){h===void 0&&(h=0),p===void 0&&(p=0),v===void 0&&(v=!0),typeof c=="number"&&(c=or.t8(i,c,h,p)),!or.fS(c,r)&&(or.IH(s,n.getPosition(l),c),n.setPosition(l,s,v))}}(),this.setRotation=function(){var r=Yi();return function(i,s,l,c,h,p){p===void 0&&(p=!0);var v=i.transformable;if(typeof s=="number"&&(s=Hm(s,l,c,h)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,s);else{var y=n.getRotation(i.parentNode);Yv(r,y),T0(r,r),Tc(v.localRotation,r,s),vv(v.localRotation,v.localRotation),p&&n.dirtifyLocal(i,v)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=Qr.create(),i=or.Ue(),s=Hm(0,0,0,1);return function(l){var c=l.localSkew[0]!==0||l.localSkew[1]!==0;if(c){if(Qr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,or.al(1,1,1),l.origin),l.localSkew[0]!==0||l.localSkew[1]!==0){var h=Qr.identity(r);h[4]=Math.tan(l.localSkew[0]),h[1]=Math.tan(l.localSkew[1]),Qr.multiply(l.localTransform,l.localTransform,h)}var p=Qr.fromRotationTranslationScaleOrigin(r,s,i,l.localScale,l.origin);Qr.multiply(l.localTransform,l.localTransform,p)}else Qr.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,l.localScale,l.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,Sa.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var l=n.sortable;(!((i=l==null?void 0:l.sorted)===null||i===void 0)&&i.length||t.parsedStyle.zIndex)&&(l.dirtyChildren.indexOf(t)===-1&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=ug.ADDED);var c=t.transformable;c&&this.dirtifyWorld(t,c),c.frozen&&this.unfreezeParentToRoot(t),s&&t.dispatchEvent(Ha)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,s=t.parentNode.sortable;(!((n=s==null?void 0:s.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=ug.REMOVED);var l=t.parentNode.childNodes.indexOf(t);l>-1&&t.parentNode.childNodes.splice(l,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.getGeometryBounds(),t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var l=s.origin;l[0]=n[0],l[1]=n[1],l[2]=n[2]||0,this.dirtifyLocal(t,s)}},e.prototype.setLocalEulerAngles=function(t,n,r,i,s){r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=!0),typeof n=="number"&&(n=or.al(n,r,i));var l=t.transformable;Kg(l.localRotation,n[0],n[1],n[2]),s&&this.dirtifyLocal(t,l)},e.prototype.scaleLocal=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable;or.Jp(i.localScale,i.localScale,or.al(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(t,i)},e.prototype.setLocalScale=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable,s=or.al(n[0],n[1],n[2]||i.localScale[2]);or.fS(s,i.localScale)||(or.JG(i.localScale,s),r&&this.dirtifyLocal(t,i))},e.prototype.setLocalRotation=function(t,n,r,i,s,l){l===void 0&&(l=!0),typeof n=="number"&&(n=Hm(n,r,i,s));var c=t.transformable;Yv(c.localRotation,n),l&&this.dirtifyLocal(t,c)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=$v.al(n,r));var i=t.transformable;$v.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,s){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=s,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];c.affectChildren?l.forEach(function(h){r(h,c)}):r(l,c)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)r2(r),r=r.parentNode;n&&t.forEach(function(i){r2(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var l=s[t].indexOf(i);s[t].splice(l,1)}}if(r){var c=this.displayObjectDependencyMap.get(r);c||(this.displayObjectDependencyMap.set(r,{}),c=this.displayObjectDependencyMap.get(r)),c[t]||(c[t]=[]),c[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(s){n.dirtifyToRoot(s,!0),s.dispatchEvent(new gg(Ba.ATTR_MODIFIED,s,n,n,i,gg.MODIFICATION,n,n)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return Qr.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return Qr.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return Qr.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=Qr.getTranslation(or.Ue(),n),i=Qr.getRotation(Yi(),n),s=Qr.getScaling(or.Ue(),n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,r,!1),this.setLocalRotation(t,i,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(Mc.isEmpty(i))return null;var s=r||new Mc;return s.setFromTransformedAABB(i,this.getWorldTransform(t)),s},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry;r.dirty&&Kr.styleValueRegistry.updateGeometry(t);var i=n?r.renderBounds:r.contentBounds||null;return i||new Mc},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var s=n?i.renderBounds:i.bounds,l=this.getTransformedGeometryBounds(t,n,s),c=t.childNodes;if(c.forEach(function(v){var y=r.getBounds(v,n);y&&(l?l.add(y):(l=s||new Mc,l.update(y.center,y.halfExtents)))}),l||(l=new Mc),n){var h=wO(t);if(h){var p=h.parsedStyle.clipPath.getBounds(n);l?p&&(l=p.intersection(l)):l.update(p.center,p.halfExtents)}}return n?(i.renderBounds=l,i.renderBoundsDirty=!1):(i.bounds=l,i.boundsDirty=!1),l},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=Qr.create();t.parentNode.transformable&&(n=Qr.invert(Qr.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!Mc.isEmpty(r)){var i=new Mc;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,s=this.getGeometryBounds(t);Mc.isEmpty(s)||(i=new Mc,i.setFromTransformedAABB(s,this.getWorldTransform(t)));var l=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var c=(0,se.CR)(i.getMin(),2),h=c[0],p=c[1],v=(0,se.CR)(i.getMax(),2),y=v[0],b=v[1];return new cy(h+((l==null?void 0:l.left)||0),p+((l==null?void 0:l.top)||0),y-h,b-p)}return new cy((l==null?void 0:l.left)||0,(l==null?void 0:l.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||r.dirtifyWorldInternal(s,l)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?Qr.copy(n.worldTransform,n.localTransform):Qr.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),sm={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},i2=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,JS=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,D_=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,q1=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,HI=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,LO=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,GI=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,xy=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,WI=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,ZI=new RegExp("".concat(JS.source,"|").concat(q1.source,"|").concat(LO.source,"|").concat(xy.source)),NO=new RegExp("".concat(D_.source,"|").concat(HI.source,"|").concat(GI.source,"|").concat(WI.source)),XI=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(NO.exec(i)||ZI.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,se.ev)([],(0,se.CR)(r),!1),s=i[i.length-2];if(!s)return r;var l=s[s.length-1];return i[i.length-2]=s.slice(0,-1),i[i.length-1]=l+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var l=sm.MetricsString+sm.BaselineSymbol,c=Math.ceil(s.measureText(l).width),h=Math.ceil(s.measureText(sm.BaselineSymbol).width),p=sm.HeightMultiplier*h;h=h*sm.BaselineMultiplier|0,i.width=c,i.height=p,s.fillStyle="#f00",s.fillRect(0,0,c,p),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,h);var v=s.getImageData(0,0,c||1,p||1).data,y=v.length,b=c*4,T=0,M=0,R=!1;for(T=0;T<h;++T){for(var I=0;I<b;I+=4)if(v[M+I]!==255){R=!0;break}if(!R)M+=b;else break}for(r.ascent=h-T,M=y-b,R=!1,T=p;T>h;--T){for(var I=0;I<b;I+=4)if(v[M+I]!==255){R=!0;break}if(!R)M-=b;else break}return r.descent=T-h,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,s=i===void 0?16:i,l=n.wordWrap,c=l===void 0?!1:l,h=n.lineHeight,p=n.lineWidth,v=p===void 0?1:p,y=n.textBaseline,b=y===void 0?"alphabetic":y,T=n.textAlign,M=T===void 0?"start":T,R=n.letterSpacing,I=R===void 0?0:R,N=n.textPath;n.textPathSide,n.textPathStartOffset;var z=n.leading,H=z===void 0?0:z,X=od(n),Y=this.measureFont(X,r);Y.fontSize===0&&(Y.fontSize=s,Y.ascent=s);var ne=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);ne.font=X,n.isOverflowing=!1;var ve=c?this.wordWrap(t,n,r):t,ye=ve.split(/(?:\r\n|\r|\n)/),De=new Array(ye.length),Ye=0;if(N){N.getTotalLength();for(var Qe=0;Qe<ye.length;Qe++)var yt=ne.measureText(ye[Qe]).width+(ye[Qe].length-1)*I}else{for(var Qe=0;Qe<ye.length;Qe++){var qe=ne.measureText(ye[Qe]).width+(ye[Qe].length-1)*I;De[Qe]=qe,Ye=Math.max(Ye,qe)}var yt=Ye+v,ut=h||Y.fontSize+v,ft=Math.max(ut,Y.fontSize+v)+(ye.length-1)*(ut+H);ut+=H;var mt=0;return b==="middle"?mt=-ft/2:b==="bottom"||b==="alphabetic"||b==="ideographic"?mt=-ft:(b==="top"||b==="hanging")&&(mt=0),{font:X,width:yt,height:ft,lines:ye,lineWidths:De,lineHeight:ut,maxLineWidth:Ye,fontProperties:Y,lineMetrics:De.map(function(Mt,kt){var Tn=0;return M==="center"||M==="middle"?Tn-=Mt/2:(M==="right"||M==="end")&&(Tn-=Mt),new cy(Tn-v/2,mt+kt*ut,Mt+v,ut)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,s=n.wordWrapWidth,l=s===void 0?0:s,c=n.letterSpacing,h=c===void 0?0:c,p=n.maxLines,v=p===void 0?1/0:p,y=n.textOverflow,b=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),T=l+h,M="";y==="ellipsis"?M="...":y&&y!=="clip"&&(M=y);for(var R=[],I=0,N=0,z={},H=function(mt){return i.getFromCache(mt,h,z,b)},X=Array.from(M).reduce(function(mt,Xt){return mt+H(Xt)},0),Y=Array.from(t),ne=0;ne<Y.length;ne++){var ve=Y[ne],ye=t[ne-1],De=t[ne+1],Ye=H(ve);if(this.isNewline(ve)){if(I++,I>=v){n.isOverflowing=!0;break}N=0,R[I]="";continue}if(N>0&&N+Ye>T){if(I+1>=v){if(n.isOverflowing=!0,X>0&&X<=T){for(var Qe=R[I].length,yt=0,qe=Qe,ut=0;ut<Qe;ut++){var ft=H(R[I][ut]);if(yt+ft+X>T){qe=ut;break}yt+=ft}R[I]=(R[I]||"").slice(0,qe)+M}break}if(I++,N=0,R[I]="",this.isBreakingSpace(ve))continue;this.canBreakInLastChar(ve)||(R=this.trimToBreakable(R),N=this.sumTextWidthByCache(R[I]||"",z)),this.shouldBreakByKinsokuShorui(ve,De)&&(R=this.trimByKinsokuShorui(R),N+=H(ye||""))}N+=Ye,R[I]=(R[I]||"")+ve}return R.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:sm.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:sm.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,se.ev)([],(0,se.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var s=r.slice(i,i+1),l=this.isBreakingSpace(s),c=i+1,h=i+(l?0:1);return n[n.length-1]+=r.slice(c,r.length),n[n.length-2]=r.slice(0,h),n},e.prototype.canBreakInLastChar=function(t){return!(t&&i2.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!i2.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var s=r[t];if(typeof s!="number"){var l=t.length*n;s=i.measureText(t).width+l,r[t]=s}return s},e}(),Kr={},YI=function(){var e,t=new Fu,n=new df;return e={},e[ui.CIRCLE]=new mg,e[ui.ELLIPSE]=new KS,e[ui.RECT]=t,e[ui.IMAGE]=t,e[ui.GROUP]=new Bu,e[ui.LINE]=new fs,e[ui.TEXT]=new jI(Kr),e[ui.POLYLINE]=n,e[ui.POLYGON]=n,e[ui.PATH]=new Wf,e[ui.HTML]=null,e[ui.MESH]=null,e}(),K1=function(){var e,t=new fO,n=new Kx;return e={},e[Mo.PERCENTAGE]=null,e[Mo.NUMBER]=new pO,e[Mo.ANGLE]=new uO,e[Mo.DEFINED_PATH]=new cO,e[Mo.PAINT]=t,e[Mo.COLOR]=t,e[Mo.FILTER]=new hO,e[Mo.LENGTH]=n,e[Mo.LENGTH_PERCENTAGE]=n,e[Mo.LENGTH_PERCENTAGE_12]=new zI,e[Mo.LENGTH_PERCENTAGE_14]=new dO,e[Mo.COORDINATE]=new Kx,e[Mo.OFFSET_DISTANCE]=new vO,e[Mo.OPACITY_VALUE]=new mO,e[Mo.PATH]=new gO,e[Mo.LIST_OF_POINTS]=new yO,e[Mo.SHADOW_BLUR]=new _O,e[Mo.TEXT]=new X1,e[Mo.TEXT_TRANSFORM]=new bO,e[Mo.TRANSFORM]=new bc,e[Mo.TRANSFORM_ORIGIN]=new Il,e[Mo.Z_INDEX]=new i0,e[Mo.MARKER]=new Qx,e}(),lm=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof L.g!="undefined"?L.g:{}};Kr.CameraContribution=Rx,Kr.AnimationTimeline=null,Kr.EasingFunction=null,Kr.offscreenCanvasCreator=new by,Kr.sceneGraphSelector=new DO,Kr.sceneGraphService=new yg(Kr),Kr.textService=new XI(Kr),Kr.geometryUpdaterFactory=YI,Kr.CSSPropertySyntaxFactory=K1,Kr.styleValueRegistry=new lO(Kr),Kr.layoutRegistry=null,Kr.globalThis=lm(),Kr.enableCSSParsing=!1,Kr.enableDataset=!1,Kr.enableStyleSyntax=!0,Kr.enableAttributeDashCased=!1,Kr.enableSizeAttenuation=!1;var ew=0;function bj(){ew=0}var L_=new gg(Ba.INSERTED,null,"","","",0,"",""),FO=new gg(Ba.REMOVED,null,"","","",0,"",""),BO=new au(Ba.DESTROY),$I=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;return n.entity=ew++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:Fx.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=Kr.enableCSSParsing?{opacity:Ou,fillOpacity:Ou,strokeOpacity:Ou,fill:Ou,stroke:Ou,transform:Ou,transformOrigin:Ou,visibility:Ou,pointerEvents:Ou,lineWidth:Ou,lineCap:Ou,lineJoin:Ou,increasedLineWidthForHitTesting:Ou,fontSize:Ou,fontFamily:Ou,fontStyle:Ou,fontWeight:Ou,fontVariant:Ou,textAlign:Ou,textBaseline:Ou,textTransform:Ou,zIndex:Ou,filter:Ou,shadowType:Ou}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(iu)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(wC);return Kr.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(L_.relatedNode=this,n.dispatchEvent(L_)),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return FO.relatedNode=this,n.dispatchEvent(FO),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Kr.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return Kr.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return Kr.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return Kr.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return Kr.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return Kr.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return Kr.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return Kr.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(Kr.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(s){return s!==r&&n(s)?(i=s,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(s){s!==r&&n(s)&&i.push(s)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);r.forEach(function(l,c){var h;return(h=n.parentNode)===null||h===void 0?void 0:h.appendChild(l,s+c+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this),l=(0,se.CR)(r),c=l[0],h=l.slice(1);this.parentNode.appendChild(c,s),(n=c).after.apply(n,(0,se.ev)([],(0,se.CR)(h),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,se.ev)([],(0,se.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s){return n.appendChild(s)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s,l){return n.appendChild(s,l)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,se.ev)([],(0,se.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(BO),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return Kr.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return Kr.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return Kr.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return Kr.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return Kr.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(PC(n))return Kr.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(Kr.enableAttributeDashCased){var i=Dx(n);r=this.attributes[i]}return Kr.enableCSSParsing&&(0,Sa.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i,s){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(iu)},t.prototype.getAttributeNode=function(n){throw new Error(iu)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(iu)},t.prototype.hasAttributeNS=function(n,r){throw new Error(iu)},t.prototype.removeAttributeNS=function(n,r){throw new Error(iu)},t.prototype.removeAttributeNode=function(n){throw new Error(iu)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(iu)},t.prototype.setAttributeNode=function(n){throw new Error(iu)},t.prototype.setAttributeNodeNS=function(n){throw new Error(iu)},t.prototype.toggleAttribute=function(n,r){throw new Error(iu)},t}(Qn);function bl(e){return!!(e!=null&&e.nodeName)}var tw=Kr.globalThis.Proxy?Kr.globalThis.Proxy:function(){},Sv=new gg(Ba.ATTR_MODIFIED,null,null,null,null,gg.MODIFICATION,null,null),kO={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},qI={fill:V1,stroke:V1,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},nw=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],Q1=(0,se.ev)((0,se.ev)([],(0,se.CR)(nw),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),o2="data-",Mf=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||ui.GROUP,Kr.enableCSSParsing?(Object.assign(r.attributes,kO),Object.assign(r.parsedStyle,qI,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),Kr.enableDataset&&(r.dataset=new tw({},{get:function(i,s){var l="".concat(o2).concat(lS(s));return i[l]!==void 0?i[l]:r.getAttribute(l)},set:function(i,s,l){return r.setAttribute("".concat(o2).concat(lS(s)),l),!0}})),Kr.enableStyleSyntax&&(r.style=new tw({setProperty:function(i,s){r.setAttribute(i,s)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,s){return i[s]!==void 0?i[s]:r.getAttribute(s)},set:function(i,s,l){return r.setAttribute(s,l),!0}})),r}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,se.pi)({},this.attributes);for(var s in i){var l=i[s];bl(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(i[s]=l.cloneNode(n)),r&&(i[s]=r(s,l))}var c=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return c.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(h){if(!h.style.isMarker){var p=h.cloneNode(n);c.appendChild(p)}}),c},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};Kr.enableCSSParsing&&(i.usedAttributes=Q1);var s=n;if(Kr.enableAttributeDashCased){s={};for(var l in n){var c=Dx(l);s[c]=n[l]}}Kr.styleValueRegistry.processProperties(this,s,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),Kr.enableAttributeDashCased&&(n=Dx(n)),!Fs(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:s}),e.prototype.setAttribute.call(this,n,r))},t.prototype.internalSetAttribute=function(n,r,i){var s;i===void 0&&(i={});var l=this.renderable,c=this.attributes[n],h=this.parsedStyle[n];Kr.styleValueRegistry.processProperties(this,(s={},s[n]=r,s),i),l.dirty=!0;var p=this.parsedStyle[n];this.isConnected&&(Sv.relatedNode=this,Sv.prevValue=c,Sv.newValue=r,Sv.attrName=n,Sv.prevParsedValue=h,Sv.newParsedValue=p,this.isMutationObserved?this.dispatchEvent(Sv):(Sv.target=this,this.ownerDocument.defaultView.dispatchEvent(Sv,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,c,r,h,p)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,se.CR)(n.getMin(),2),i=r[0],s=r[1],l=(0,se.CR)(n.getMax(),2),c=l[0],h=l[1];return new cy(i,s,c-i,h-s)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setOrigin(this,Oc(n,r,i)),this},t.prototype.getOrigin=function(){return Kr.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setPosition(this,Oc(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.setLocalPosition(this,Oc(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.translate(this,Oc(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Kr.sceneGraphService.translateLocal(this,Oc(n,r,i)),this},t.prototype.getPosition=function(){return Kr.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return Kr.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Oc(n,r,i)),Kr.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Oc(n,r,i)),Kr.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return Kr.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return Kr.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,se.CR)(F1(or.Ue(),Kr.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Gd(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,se.CR)(F1(or.Ue(),Kr.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Gd(r)},t.prototype.setEulerAngles=function(n){return Kr.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return Kr.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,Sa.Z)(r)&&(0,Sa.Z)(i)?Kr.sceneGraphService.rotateLocal(this,0,0,n):Kr.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,Sa.Z)(r)&&(0,Sa.Z)(i)?Kr.sceneGraphService.rotate(this,0,0,n):Kr.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,s){return Kr.sceneGraphService.setRotation(this,n,r,i,s),this},t.prototype.setLocalRotation=function(n,r,i,s){return Kr.sceneGraphService.setLocalRotation(this,n,r,i,s),this},t.prototype.setLocalSkew=function(n,r){return Kr.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return Kr.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return Kr.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return Kr.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return Kr.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return Kr.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return Kr.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){Kr.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,s=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return s?s.play(this,n,r):null},t.prototype.isVisible=function(){var n,r;return Kr.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=(0,se.CR)(r,2),l=s[0],c=s[1];return l?_l(l)?(Object.keys(l).forEach(function(h){n.setAttribute(h,l[h])}),this):r.length===2?(this.setAttribute(l,c),this):this.attributes[l]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,se.CR)(Qr.getTranslation(or.Ue(),r),2),s=i[0],l=i[1],c=(0,se.CR)(Qr.getScaling(or.Ue(),r),2),h=c[0],p=c[1],v=Qr.getRotation(Yi(),r),y=(0,se.CR)(F1(or.Ue(),v),3),b=y[0],T=y[2];return uy(b||T,s,l,h,p)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,se.CR)(nS(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setEulerAngles(h).setPosition(i,s).setLocalScale(l,c)},t.prototype.setLocalMatrix=function(n){var r=(0,se.CR)(nS(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setLocalEulerAngles(h).setLocalPosition(i,s).setLocalScale(l,c)},t.prototype.show=function(){Kr.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){Kr.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}($I),_g=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ui.CIRCLE},n))||this}return t}(Mf),wv=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,(0,se.pi)({style:Kr.enableCSSParsing?(0,se.pi)({},i):(0,se.pi)({},i)},s))||this,r.isCustomElement=!0,r}return t}(Mf),a2=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ui.ELLIPSE},n))||this}return t}(Mf),Xc=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ui.GROUP},n))||this}return t}(Mf),V0=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,(0,se.pi)({type:ui.HTML,style:Kr.enableCSSParsing?(0,se.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,se.pi)({},i)},s))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,s=n.width,l=n.height;return new cy(r,i,s,l)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),s=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),l=new Mc,c=i.left-((s==null?void 0:s.left)||0),h=i.top-((s==null?void 0:s.top)||0);return l.setMinMax([c,h,0],[c+i.width,h+i.height,0]),l},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=Qr.invert(Qr.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!Mc.isEmpty(r)){var i=new Mc;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Mf),s2=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ui.IMAGE},n))||this}return t}(Mf),J1=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ui.LINE,style:(0,se.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},s))||this,r.markerStartAngle=0,r.markerEndAngle=0;var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd;return c&&bl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),h&&bl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&bl(s)&&(this.markerStartAngle=0,s.remove()),l&&bl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"&&(s&&bl(s)&&(this.markerEndAngle=0,s.remove()),l&&bl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.x1,p=r.x2,v=r.y1,y=r.y2,b=n?i:s;if(!(!b||!bl(b))){var T=0,M,R,I,N,z,H;n?(I=h,N=v,M=p-h,R=y-v,z=l||0,H=this.markerStartAngle):(I=p,N=y,M=h-p,R=v-y,z=c||0,H=this.markerEndAngle),T=Math.atan2(R,M),b.setLocalEulerAngles(T*180/Math.PI+H),b.setLocalPosition(I+Math.cos(T)*z,N+Math.sin(T)*z)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Vd(s,l,c,h,n),v=p.x,y=p.y,b=or.fF(or.Ue(),or.al(v,y,0),r?this.getWorldTransform():this.getLocalTransform());return new Zc(b[0],b[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,s=n.x2,l=n.y2;return ig(r,i,s,l)},t}(Mf),ad=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ui.PATH,style:Kr.enableCSSParsing?(0,se.pi)({d:"",miterLimit:""},i):(0,se.pi)({},i),initialParsedStyle:Kr.enableCSSParsing?null:{miterLimit:4,d:(0,se.pi)({},hS)}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&bl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&bl(p)&&r.placeMarkerMid(p),h&&bl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&bl(s)&&(this.markerStartAngle=0,s.remove()),l&&bl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&bl(s)&&(this.markerEndAngle=0,s.remove()),l&&bl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=n?i:s;if(!(!h||!bl(h))){var p=0,v,y,b,T,M,R;if(n){var I=(0,se.CR)(this.getStartTangent(),2),N=I[0],z=I[1];b=z[0],T=z[1],v=N[0]-z[0],y=N[1]-z[1],M=l||0,R=this.markerStartAngle}else{var H=(0,se.CR)(this.getEndTangent(),2),N=H[0],z=H[1];b=z[0],T=z[1],v=N[0]-z[0],y=N[1]-z[1],M=c||0,R=this.markerEndAngle}p=Math.atan2(y,v),h.setLocalEulerAngles(p*180/Math.PI+R),h.setLocalPosition(b+Math.cos(p)*M,T+Math.sin(p)*M)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(p){p.remove()}),n&&bl(n))for(var i=1;i<r.length-1;i++){var s=(0,se.CR)(r[i].currentPoint,2),l=s[0],c=s[1],h=i===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t.prototype.getTotalLength=function(){return Hx(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,s=bp(i,n),l=s.x,c=s.y,h=or.fF(or.Ue(),or.al(l,c,0),r?this.getWorldTransform():this.getLocalTransform());return new Zc(h[0],h[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Hx(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,s=n[1].currentPoint,l=n[1].startTangent;r=[],l?(r.push([i[0]-l[0],i[1]-l[1]]),r.push([i[0],i[1]])):(r.push([s[0],s[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var s=n[r-2].currentPoint,l=n[r-1].currentPoint,c=n[r-1].endTangent;i=[],c?(i.push([l[0]-c[0],l[1]-c[1]]),i.push([l[0],l[1]])):(i.push([s[0],s[1]]),i.push([l[0],l[1]]))}return i},t}(Mf),Ey=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,se._T)(n,["style"]);r=e.call(this,(0,se.pi)({type:ui.POLYGON,style:Kr.enableCSSParsing?(0,se.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,se.pi)({},i),initialParsedStyle:Kr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&bl(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&bl(p)&&r.placeMarkerMid(p),h&&bl(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&bl(s)&&(this.markerStartAngle=0,s.remove()),l&&bl(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&bl(s)&&(this.markerEndAngle=0,s.remove()),l&&bl(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.points,p=(h||{}).points,v=n?i:s;if(!(!v||!bl(v)||!p)){var y=0,b,T,M,R,I,N;if(M=p[0][0],R=p[0][1],n)b=p[1][0]-p[0][0],T=p[1][1]-p[0][1],I=l||0,N=this.markerStartAngle;else{var z=p.length;this.parsedStyle.isClosed?(b=p[z-1][0]-p[0][0],T=p[z-1][1]-p[0][1]):(M=p[z-1][0],R=p[z-1][1],b=p[z-2][0]-p[z-1][0],T=p[z-2][1]-p[z-1][1]),I=c||0,N=this.markerEndAngle}y=Math.atan2(T,b),v.setLocalEulerAngles(y*180/Math.PI+N),v.setLocalPosition(M+Math.cos(y)*I,R+Math.sin(y)*I)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(p){p.remove()}),this.markerMidList=[],n&&bl(n)&&i)for(var s=1;s<(this.parsedStyle.isClosed?i.length:i.length-1);s++){var l=i[s][0],c=i[s][1],h=s===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t}(Mf),H0=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({type:ui.POLYLINE,style:Kr.enableCSSParsing?(0,se.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,se.pi)({},r),initialParsedStyle:Kr.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return GC(this)},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],l=0,c,h,p=this.getTotalLength();i.forEach(function(I,N){i[N+1]&&(c=[0,0],c[0]=l/p,h=ig(I[0],I[1],i[N+1][0],i[N+1][1]),l+=h,c[1]=l/p,s.push(c))}),this.parsedStyle.points.segments=s}var v=0,y=0;this.parsedStyle.points.segments.forEach(function(I,N){n>=I[0]&&n<=I[1]&&(v=(n-I[0])/(I[1]-I[0]),y=N)});var b=Vd(i[y][0],i[y][1],i[y+1][0],i[y+1][1],v),T=b.x,M=b.y,R=or.fF(or.Ue(),or.al(T,M,0),r?this.getWorldTransform():this.getLocalTransform());return new Zc(R[0],R[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(Ey),Ip=function(e){(0,se.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,se.pi)({type:ui.RECT},n))||this}return t}(Mf),sd=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({type:ui.TEXT,style:Kr.enableCSSParsing?(0,se.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,se.pi)({fill:"black"},r)},i))||this}return t.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},t}(Mf),rw=function(){function e(){this.registry={},this.define(ui.CIRCLE,_g),this.define(ui.ELLIPSE,a2),this.define(ui.RECT,Ip),this.define(ui.IMAGE,s2),this.define(ui.LINE,J1),this.define(ui.GROUP,Xc),this.define(ui.PATH,ad),this.define(ui.POLYGON,Ey),this.define(ui.POLYLINE,H0),this.define(ui.TEXT,sd),this.define(ui.HTML,V0)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),iw={number:function(e){return new ql(e)},percent:function(e){return new ql(e,"%")},px:function(e){return new ql(e,"px")},em:function(e){return new ql(e,"em")},rem:function(e){return new ql(e,"rem")},deg:function(e){return new ql(e,"deg")},grad:function(e){return new ql(e,"grad")},rad:function(e){return new ql(e,"rad")},turn:function(e){return new ql(e,"turn")},s:function(e){return new ql(e,"s")},ms:function(e){return new ql(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,s=e.syntax;Kr.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:s})},registerLayout:function(e,t){Kr.layoutRegistry.registerLayout(e,t)}},zO=function(e){(0,se.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Kr.AnimationTimeline(n)}catch(i){}var r={};return qx.forEach(function(i){var s=i.n,l=i.inh,c=i.d;l&&c&&(r[s]=lg(c)?c(ui.GROUP):c)}),n.documentElement=new Xc({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?sd:Xc);var s=new i(r);return s.ownerDocument=this,s},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(iu)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,s){var l=this.defaultView.context.rBushRoot,c=l.search({minX:n,minY:r,maxX:i,maxY:s}),h=[];return c.forEach(function(p){var v=p.displayObject,y=v.parsedStyle.pointerEvents,b=y===void 0?"auto":y,T=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!T||T&&v.isVisible())&&!v.isCulled()&&v.isInteractive()&&h.push(v)}),h.sort(function(p,v){return v.sortable.renderOrder-p.sortable.renderOrder}),h},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return null;var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T&&T[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,se.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,se.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,null]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,[2,T&&T[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return[];var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T[T.length-1]!==this.documentElement&&T.push(this.documentElement),T},t.prototype.elementsFromPoint=function(n,r){return(0,se.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,se.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,[]]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,T[T.length-1]!==this.documentElement&&T.push(this.documentElement),[2,T]}})})},t.prototype.appendChild=function(n,r){throw new Error(fy)},t.prototype.insertBefore=function(n,r){throw new Error(fy)},t.prototype.removeChild=function(n,r){throw new Error(fy)},t.prototype.replaceChild=function(n,r,i){throw new Error(fy)},t.prototype.append=function(){throw new Error(fy)},t.prototype.prepend=function(){throw new Error(fy)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(Qn),ow=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,s=this.strategies;r.hooks.cull.tap(e.tag,function(l){if(l){var c=l.cullable;return s.length===0?c.visible=i.unculledEntities.indexOf(l.entity)>-1:c.visible=s.every(function(h){return h.isVisible(n,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new au(Ba.CULLED)),null)}return l}),r.hooks.afterRender.tap(e.tag,function(l){l.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),UO=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new ri(null),this.rootWheelEvent=new Ro(null),this.onPointerMove=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView;if(!(c.supportsTouchEvents&&n.pointerType==="touch")){var h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView,h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}).picked;return l[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(s){var l=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(l)}),r.hooks.pointerDown.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.normalizeToPointerEvent(s,i);if(n.autoPreventDefault&&h[0].isNormalized){var p=s.cancelable||!("cancelable"in s);p&&s.preventDefault()}try{for(var v=(0,se.XA)(h),y=v.next();!y.done;y=v.next()){var b=y.value,T=n.bootstrapEvent(n.rootPointerEvent,b,i,s);n.context.eventService.mapEvent(T)}}catch(M){l={error:M}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.context.contextService.getDomElement(),p=n.context.eventService.isNativeEventFromCanvas(h,s),v=p?"":"outside",y=n.normalizeToPointerEvent(s,i);try{for(var b=(0,se.XA)(y),T=b.next();!T.done;T=b.next()){var M=T.value,R=n.bootstrapEvent(n.rootPointerEvent,M,i,s);R.type+=v,n.context.eventService.mapEvent(R)}}catch(I){l={error:I}}finally{try{T&&!T.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(s){var l,c,h=n.normalizeToPointerEvent(s,i);try{for(var p=(0,se.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=n.bootstrapEvent(n.rootPointerEvent,y,i,s);n.context.eventService.mapEvent(b)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),l=s.x,c=s.y;t.viewport.x=l,t.viewport.y=c;var h=this.context.eventService.viewport2Canvas(t.viewport),p=h.x,v=h.y;return t.canvas.x=p,t.canvas.y=v,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=e2[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),i=r.x,s=r.y;n.viewport.x=i,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),c=l.x,h=l.y;return n.canvas.x=c,n.canvas.y=h,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=t2.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var s=t.changedTouches[i];Fs(s.button)&&(s.button=0),Fs(s.buttons)&&(s.buttons=1),Fs(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),Fs(s.width)&&(s.width=s.radiusX||1),Fs(s.height)&&(s.height=s.radiusY||1),Fs(s.tiltX)&&(s.tiltX=0),Fs(s.tiltY)&&(s.tiltY=0),Fs(s.pointerType)&&(s.pointerType="touch"),Fs(s.pointerId)&&(s.pointerId=s.identifier||0),Fs(s.pressure)&&(s.pressure=s.force||.5),Fs(s.twist)&&(s.twist=0),Fs(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(n.isMouseEvent(t)){var l=t;Fs(l.isPrimary)&&(l.isPrimary=!0),Fs(l.width)&&(l.width=1),Fs(l.height)&&(l.height=1),Fs(l.tiltX)&&(l.tiltX=0),Fs(l.tiltY)&&(l.tiltY=0),Fs(l.pointerType)&&(l.pointerType="mouse"),Fs(l.pointerId)&&(l.pointerId=GS),Fs(l.pressure)&&(l.pressure=.5),Fs(l.twist)&&(l.twist=0),Fs(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,r.push(l)}else r.push(t);return r},e.tag="Event",e}(),eb=[ui.CIRCLE,ui.ELLIPSE,ui.IMAGE,ui.RECT,ui.LINE,ui.POLYLINE,ui.POLYGON,ui.TEXT,ui.PATH,ui.HTML],jO=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,s=n.cullable;if(!s.enable)return!0;var l=n.getRenderBounds();if(Mc.isEmpty(l))return!1;var c=t.getFrustum(),h=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,l,h||sg.INDETERMINATE,c.planes),s.visible=s.visibilityPlaneMask!==sg.OUTSIDE,s.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===sg.OUTSIDE||r===sg.INSIDE)return r;for(var s=sg.INSIDE,l=eb.indexOf(t.nodeName)>-1,c=0,h=i.length;c<h;++c){var p=1<<c;if(r&p&&!(l&&(c===4||c===5))){var v=i[c],y=v.normal,b=v.distance;if(or.AK(y,n.getPositiveFarPoint(i[c]))+b<0)return sg.OUTSIDE;or.AK(y,n.getNegativeFarPoint(i[c]))+b<0&&(s|=p)}}return s},e}(),aw=function(){function e(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return e.prototype.apply=function(t){var n=this,r,i=t.renderingService,s=t.renderingContext,l=t.rBushRoot,c=s.root.ownerDocument.defaultView;this.rBush=l;var h=function(T){var M=T.target;M.renderable.dirty=!0,i.dirtify()},p=function(T){var M=T.detail.affectChildren,R=T.target;M&&R.forEach(function(N){n.toSync.add(N)});for(var I=R;I;)I.renderable&&n.toSync.add(I),I=I.parentElement;i.dirtify()},v=function(T){var M=T.target;Kr.enableSizeAttenuation&&Kr.styleValueRegistry.updateSizeAttenuation(M,c.getCamera().getZoom()),Kr.enableCSSParsing&&Kr.styleValueRegistry.recalc(M),Kr.sceneGraphService.dirtifyToRoot(M),i.dirtify()},y=function(T){var M=T.target,R=M.rBushNode;R.aabb&&n.rBush.remove(R.aabb),n.toSync.delete(M),Kr.sceneGraphService.dirtifyToRoot(M),i.dirtify()};i.hooks.init.tap(e.tag,function(){c.addEventListener(Ba.MOUNTED,v),c.addEventListener(Ba.UNMOUNTED,y),c.addEventListener(Ba.ATTR_MODIFIED,h),c.addEventListener(Ba.BOUNDS_CHANGED,p)}),i.hooks.destroy.tap(e.tag,function(){c.removeEventListener(Ba.MOUNTED,v),c.removeEventListener(Ba.UNMOUNTED,y),c.removeEventListener(Ba.ATTR_MODIFIED,h),c.removeEventListener(Ba.BOUNDS_CHANGED,p),n.toSync.clear()});var b=(r=Kr.globalThis.requestIdleCallback)!==null&&r!==void 0?r:n2.bind(Kr.globalThis);i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,b(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},e.prototype.syncRTree=function(t){var n=this;if(t===void 0&&(t=!1),!(!t&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var s=i.rBushNode;s&&s.aabb&&n.rBush.remove(s.aabb);var l=i.getRenderBounds();if(l){var c=i.renderable;t&&(c.dirtyRenderBounds||(c.dirtyRenderBounds=new Mc),c.dirtyRenderBounds.update(l.center,l.halfExtents));var h=(0,se.CR)(l.getMin(),2),p=h[0],v=h[1],y=(0,se.CR)(l.getMax(),2),b=y[0],T=y[1];s.aabb||(s.aabb={}),s.aabb.displayObject=i,s.aabb.minX=p,s.aabb.minY=v,s.aabb.maxX=b,s.aabb.maxY=T}s.aabb&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.minX)&&!isNaN(s.aabb.minY)&&r.push(s.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},e.tag="Prepare",e}();function KI(e){return!!e.document}var ld;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(ld||(ld={}));var sw=500,VO=.1,HO=1e3,lw=new au(Ba.MOUNTED),l2=new au(Ba.UNMOUNTED),uw=new au(ld.BEFORE_RENDER),GO=new au(ld.RERENDER),WO=new au(ld.AFTER_RENDER),cw=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=Mf,r.inited=!1,r.context={},r.document=new zO,r.document.defaultView=r,r.customElements=new rw;var i=n.container,s=n.canvas,l=n.offscreenCanvas,c=n.width,h=n.height,p=n.devicePixelRatio,v=n.renderer,y=n.background,b=n.cursor,T=n.document,M=n.requestAnimationFrame,R=n.cancelAnimationFrame,I=n.createImage,N=n.supportsPointerEvents,z=n.supportsTouchEvents,H=n.supportsCSSTransform,X=n.supportsMutipleCanvasesInOneContainer,Y=n.useNativeClickEvent,ne=n.alwaysTriggerPointerEventOnCanvas,ve=n.isTouchEvent,ye=n.isMouseEvent;X||EO(i,r);var De=c,Ye=h,Qe=p;return s&&(Qe=p||Y1&&window.devicePixelRatio||1,Qe=Qe>=1?Math.ceil(Qe):1,De=c||AO(s)||s.width/Qe,Ye=h||CO(s)||s.height/Qe),l&&(Kr.offscreenCanvas=l),r.devicePixelRatio=Qe,r.requestAnimationFrame=M!=null?M:n2.bind(Kr.globalThis),r.cancelAnimationFrame=R!=null?R:wo.bind(Kr.globalThis),r.supportsTouchEvents=z!=null?z:"ontouchstart"in Kr.globalThis,r.supportsPointerEvents=N!=null?N:!!Kr.globalThis.PointerEvent,r.isTouchEvent=ve!=null?ve:function(yt){return r.supportsTouchEvents&&yt instanceof Kr.globalThis.TouchEvent},r.isMouseEvent=ye!=null?ye:function(yt){return!Kr.globalThis.MouseEvent||yt instanceof Kr.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(yt instanceof Kr.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:s,width:De,height:Ye,renderer:v,offscreenCanvas:l,devicePixelRatio:Qe,cursor:b||"default",background:y||"transparent",createImage:I,document:T,supportsCSSTransform:H,useNativeClickEvent:Y,alwaysTriggerPointerEventOnCanvas:ne}),r.initDefaultCamera(De,Ye,v.clipSpaceNearZ),r.initRenderer(v,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var s=this,l=new Kr.CameraContribution;l.clipSpaceNearZ=i,l.setType(Pl.EXPLORING,w_.DEFAULT).setPosition(n/2,r/2,sw).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,VO,HO),l.canvas=this,l.eventEmitter.on(rS.UPDATED,function(){s.context.renderingContext.renderReasons.add(Ev.CAMERA_CHANGED),Kr.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){Kr.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new au(ld.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var s=this.getRoot();this.unmountChildren(s),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new au(ld.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,r/2,sw).setFocalPoint(n/2,r/2,0),l===nd.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,r/2,r/-2,s.getNear(),s.getFar()):s.setAspect(n/r),this.dispatchEvent(new au(ld.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(n){var r=this;this.dispatchEvent(uw);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(GO)}),this.dispatchEvent(WO)},t.prototype.run=function(){var n=this,r=function(i,s){n.render(s),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new nm,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new UO,new aw,new ow([new jO])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,se.pi)((0,se.pi)({},Kr),this.context)),this.context.renderingService=new QS(Kr,this.context),this.context.eventService=new j0(Kr,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var s=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){s.inited=!0,r?(i?s.requestAnimationFrame(function(){s.dispatchEvent(new au(ld.READY))}):s.dispatchEvent(new au(ld.READY)),s.readyPromise&&s.resolveReadyPromise()):s.dispatchEvent(new au(ld.RENDERER_CHANGED)),r||s.getRoot().forEach(function(l){var c=l.renderable;c&&(c.renderBoundsDirty=!0,c.boundsDirty=!0,c.dirty=!0)}),s.mountChildren(s.getRoot()),n.getConfig().enableAutoRendering&&s.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(s){s.context=r.context,s.init(Kr)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,se.ev)([],(0,se.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(s){s.destroy(Kr)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(l2):(l2.target=n,this.dispatchEvent(l2,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(lw):(lw.target=n,this.dispatchEvent(lw,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(ta),ZO=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=bv(r),this.relAzimuth=bv(n),this.relRoll=bv(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Pl.EXPLORING){var s=ea(Yi(),[1,0,0],Ul((this.rotateWorld?1:-1)*this.relElevation)),l=ea(Yi(),[0,1,0],Ul((this.rotateWorld?1:-1)*this.relAzimuth)),c=ea(Yi(),[0,0,1],Ul(this.relRoll)),h=Tc(Yi(),l,s);h=Tc(Yi(),h,c);var p=Qr.fromQuat(Qr.create(),h);Qr.translate(this.matrix,this.matrix,[0,0,-this.distance]),Qr.multiply(this.matrix,this.matrix,p),Qr.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Pl.ORBITING||this.type===Pl.EXPLORING?this._getPosition():this.type===Pl.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=Oc(n,r,0),s=or.d9(this.position);return or.IH(s,s,or.bA(or.Ue(),this.right,i[0])),or.IH(s,s,or.bA(or.Ue(),this.up,i[1])),this._setPosition(s),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=or.d9(this.position),s=n*this.dollyingStep,l=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,i[0]+=s*r[0],i[1]+=s*r[1],i[2]+=s*r[2],this._setPosition(i),this.type===Pl.ORBITING||this.type===Pl.EXPLORING?this._getDistance():this.type===Pl.TRACKING&&or.IH(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,s,l,c;r===void 0&&(r={});var h=r.position,p=h===void 0?this.position:h,v=r.focalPoint,y=v===void 0?this.focalPoint:v,b=r.roll,T=r.zoom,M=new Kr.CameraContribution;M.setType(this.type,void 0),M.setPosition(p[0],(i=p[1])!==null&&i!==void 0?i:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),M.setFocalPoint(y[0],(l=y[1])!==null&&l!==void 0?l:this.focalPoint[1],(c=y[2])!==null&&c!==void 0?c:this.focalPoint[2]),M.setRoll(b!=null?b:this.roll),M.setZoom(T!=null?T:this.zoom);var R={name:n,matrix:Qr.clone(M.getWorldTransform()),right:or.d9(M.right),up:or.d9(M.up),forward:or.d9(M.forward),position:or.d9(M.getPosition()),focalPoint:or.d9(M.getFocalPoint()),distanceVector:or.d9(M.getDistanceVector()),distance:M.getDistance(),dollyingStep:M.getDollyingStep(),azimuth:M.getAzimuth(),elevation:M.getElevation(),roll:M.getRoll(),relAzimuth:M.relAzimuth,relElevation:M.relElevation,relRoll:M.relRoll,zoom:M.getZoom()};return this.landmarks.push(R),R},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var s=u(n)?this.landmarks.find(function(Ye){return Ye.name===n}):n;if(s){var l=(0,Yl.Z)(r)?{duration:r}:r,c=l.easing,h=c===void 0?"linear":c,p=l.duration,v=p===void 0?100:p,y=l.easingFunction,b=y===void 0?void 0:y,T=l.onfinish,M=T===void 0?void 0:T,R=l.onframe,I=R===void 0?void 0:R,N=.01;if(v===0){this.syncFromLandmark(s),M&&M();return}this.cancelLandmarkAnimation();var z=s.position,H=s.focalPoint,X=s.zoom,Y=s.roll,ne=b||Kr.EasingFunction(h),ve,ye=function(){i.setFocalPoint(H),i.setPosition(z),i.setRoll(Y),i.setZoom(X),i.computeMatrix(),i.triggerUpdate(),M&&M()},De=function(Ye){ve===void 0&&(ve=Ye);var Qe=Ye-ve;if(Qe>v){ye();return}var yt=ne(Qe/v),qe=or.Ue(),ut=or.Ue(),ft=1,mt=0;or.t7(qe,i.focalPoint,H,yt),or.t7(ut,i.position,z,yt),mt=i.roll*(1-yt)+Y*yt,ft=i.zoom*(1-yt)+X*yt,i.setFocalPoint(qe),i.setPosition(ut),i.setRoll(mt),i.setZoom(ft);var Xt=or.TK(qe,H)+or.TK(ut,z);if(Xt<=N&&X==null&&Y==null){ye();return}i.computeMatrix(),i.triggerUpdate(),Qe<v&&(I&&I(yt),i.landmarkAnimationID=i.canvas.requestAnimationFrame(De))};this.canvas.requestAnimationFrame(De)}},t.prototype.syncFromLandmark=function(n){this.matrix=Qr.copy(this.matrix,n.matrix),this.right=or.JG(this.right,n.right),this.up=or.JG(this.up,n.up),this.forward=or.JG(this.forward,n.forward),this.position=or.JG(this.position,n.position),this.focalPoint=or.JG(this.focalPoint,n.focalPoint),this.distanceVector=or.JG(this.distanceVector,n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance,this.zoom=n.zoom},t}(Rx);Kr.CameraContribution=ZO;var fw=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),XO=0,is=new WeakMap,YO=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],s=KO(i,t);if(s){n[r-1]=s;return}}else nb(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(Ba.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(Ba.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(Ba.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(Ba.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(Ba.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(Ba.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=is.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case Ba.ATTR_MODIFIED:var i=t.attrName,s=t.relatedNode.namespaceURI;r=t.target,n=Zf("attributes",r),n.attributeName=i,n.attributeNamespace=s;var l=t.attrChange===gg.ADDITION?null:t.prevValue;tb(r,function(b){if(b.attributes&&!(b.attributeFilter&&b.attributeFilter.length&&b.attributeFilter.indexOf(i)===-1&&b.attributeFilter.indexOf(s)===-1))return b.attributeOldValue?Tv(l):n});break;case Ba.REMOVED:case Ba.INSERTED:r=t.relatedNode;var c=t.target,h=void 0,p=void 0;t.type===Ba.INSERTED?(h=[c],p=[]):(h=[],p=[c]);var v=c.previousSibling,y=c.nextSibling;n=Zf("childList",r),n.addedNodes=h,n.removedNodes=p,n.previousSibling=v,n.nextSibling=y,tb(r,function(b){if(b.childList)return n})}$O()},e}(),QI=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=XO++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=is.get(t);r||is.set(t,r=[]);for(var i,s=0;s<r.length;s++)if(r[s].observer===this){i=r[s],i.removeListeners(),i.options=n;break}i||(i=new YO(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=is.get(n),i=0;i<r.length;i++){var s=r[i];if(s.observer===t){s.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),Rf,xl;function Zf(e,t){return Rf=new fw(e,t)}function Tv(e){return xl||(xl=fw.copy(Rf),xl.oldValue=e,xl)}function $O(){Rf=xl=void 0}function qO(e){return e===xl||e===Rf}function KO(e,t){return e===t?e:xl&&qO(e)?xl:null}function hw(e){e.nodes.forEach(function(t){var n=is.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function tb(e,t){for(var n=e;n;n=n.parentNode){var r=is.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],l=s.options;if(!(n!==e&&!l.subtree)){var c=t(l);c&&s.enqueue(c)}}}}var Ah=!1,G0=[];function nb(e){G0.push(e),Ah||(Ah=!0,typeof Kr.globalThis!="undefined"?Kr.globalThis.setTimeout(u2):u2())}function u2(){Ah=!1;var e=G0;G0=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();hw(n),r.length&&(n.callback(r,n),t=!0)}),t&&u2()}var rb=function(e){(0,se.ZT)(t,e);function t(n,r,i,s){var l=e.call(this,n)||this;return l.currentTime=i,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=i,l.timelineTime=s,l}return t}(xv),QO=0,JO=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(QO++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new rb(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(iu)},e.prototype.addEventListener=function(t,n,r){throw new Error(iu)},e.prototype.removeEventListener=function(t,n,r){throw new Error(iu)},e.prototype.dispatchEvent=function(t){throw new Error(iu)},e.prototype.commitStyles=function(){throw new Error(iu)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new rb(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new rb(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),N_=4,e3=.001,t3=1e-7,JI=10,Sy=11,F_=1/(Sy-1),um=typeof Float32Array=="function",n3=function(e,t){return 1-3*t+3*e},$d=function(e,t){return 3*t-6*e},dw=function(e){return 3*e},Lo=function(e,t,n){return((n3(t,n)*e+$d(t,n))*e+dw(t))*e},c2=function(e,t,n){return 3*n3(t,n)*e*e+2*$d(t,n)*e+dw(t)},pw=function(e,t,n,r,i){var s,l,c=0;do l=t+(n-t)/2,s=Lo(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>t3&&++c<JI);return l},r3=function(e,t,n,r){for(var i=0;i<N_;++i){var s=c2(t,n,r);if(s===0)return t;var l=Lo(t,n,r)-e;t-=l/s}return t},ib=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(c){return c};for(var i=um?new Float32Array(Sy):new Array(Sy),s=0;s<Sy;++s)i[s]=Lo(s*F_,e,n);var l=function(c){for(var h=0,p=1,v=Sy-1;p!==v&&i[p]<=c;++p)h+=F_;--p;var y=(c-i[p])/(i[p+1]-i[p]),b=h+y*F_,T=c2(b,e,n);return T>=e3?r3(c,b,e,n):T===0?b:pw(c,h,h+F_,e,n)};return function(c){return c===0||c===1?c:Lo(l(c),t,r)}},i3=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},ob=function(e){return Math.pow(e,2)},ab=function(e){return Math.pow(e,3)},sb=function(e){return Math.pow(e,4)},lb=function(e){return Math.pow(e,5)},cm=function(e){return Math.pow(e,6)},bg=function(e){return 1-Math.cos(e*Math.PI/2)},Av=function(e){return 1-Math.sqrt(1-e*e)},Cv=function(e){return e*e*(3*e-2)},wy=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},fm=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,2),r=n[0],i=r===void 0?1:r,s=n[1],l=s===void 0?.5:s,c=(0,d.Z)(Number(i),1,10),h=(0,d.Z)(Number(l),.1,2);return e===0||e===1?e:-c*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/h)},Ty=function(e,t,n){t===void 0&&(t=[]);var r=(0,se.CR)(t,4),i=r[0],s=i===void 0?1:i,l=r[1],c=l===void 0?100:l,h=r[2],p=h===void 0?10:h,v=r[3],y=v===void 0?0:v;s=(0,d.Z)(s,.1,1e3),c=(0,d.Z)(c,.1,1e3),p=(0,d.Z)(p,.1,1e3),y=(0,d.Z)(y,.1,1e3);var b=Math.sqrt(c/s),T=p/(2*Math.sqrt(c*s)),M=T<1?b*Math.sqrt(1-T*T):0,R=1,I=T<1?(T*b+-y)/M:-y+b,N=n?n*e/1e3:e;return T<1?N=Math.exp(-N*T*b)*(R*Math.cos(M*N)+I*Math.sin(M*N)):N=(R+I*N)*Math.exp(-N*b),e===0||e===1?e:1-N},W0=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,2),r=n[0],i=r===void 0?10:r,s=n[1],l=s=="start"?Math.ceil:Math.floor;return l((0,d.Z)(e,0,1)*i)/i},vw=function(e,t){t===void 0&&(t=[]);var n=(0,se.CR)(t,4),r=n[0],i=n[1],s=n[2],l=n[3];return ib(r,i,s,l)(e)},ub=ib(.42,0,1,1),ud=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},Dp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},Lp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},cb={steps:W0,"step-start":function(e){return W0(e,[1,"start"])},"step-end":function(e){return W0(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":vw,ease:function(e){return vw(e,[.25,.1,.25,1])},in:ub,out:ud(ub),"in-out":Dp(ub),"out-in":Lp(ub),"in-quad":ob,"out-quad":ud(ob),"in-out-quad":Dp(ob),"out-in-quad":Lp(ob),"in-cubic":ab,"out-cubic":ud(ab),"in-out-cubic":Dp(ab),"out-in-cubic":Lp(ab),"in-quart":sb,"out-quart":ud(sb),"in-out-quart":Dp(sb),"out-in-quart":Lp(sb),"in-quint":lb,"out-quint":ud(lb),"in-out-quint":Dp(lb),"out-in-quint":Lp(lb),"in-expo":cm,"out-expo":ud(cm),"in-out-expo":Dp(cm),"out-in-expo":Lp(cm),"in-sine":bg,"out-sine":ud(bg),"in-out-sine":Dp(bg),"out-in-sine":Lp(bg),"in-circ":Av,"out-circ":ud(Av),"in-out-circ":Dp(Av),"out-in-circ":Lp(Av),"in-back":Cv,"out-back":ud(Cv),"in-out-back":Dp(Cv),"out-in-back":Lp(Cv),"in-bounce":wy,"out-bounce":ud(wy),"in-out-bounce":Dp(wy),"out-in-bounce":Lp(wy),"in-elastic":fm,"out-elastic":ud(fm),"in-out-elastic":Dp(fm),"out-in-elastic":Lp(fm),spring:Ty,"spring-in":Ty,"spring-out":ud(Ty),"spring-in-out":Dp(Ty),"spring-out-in":Lp(Ty)},o3=function(e){return i3(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},cd=function(e){return cb[o3(e)]||cb.linear},a3=function(e){return e},s3=1,l3=.5,mw=0;function gw(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var fb="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",u3=new RegExp("cubic-bezier\\("+fb+","+fb+","+fb+","+fb+"\\)"),c3=/steps\(\s*(\d+)\s*\)/,f3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function hb(e){var t=u3.exec(e);if(t)return ib.apply(void 0,(0,se.ev)([],(0,se.CR)(t.slice(1).map(Number)),!1));var n=c3.exec(e);if(n)return gw(Number(n[1]),mw);var r=f3.exec(e);return r?gw(Number(r[1]),{start:s3,middle:l3,end:mw}[r[2]]):cd(e)}function h3(e){return Math.abs(p3(e)/(e.playbackRate||1))}function p3(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var yw=0,xu=1,B_=2,Ay=3;function db(e,t,n){if(t===null)return yw;var r=n.endTime;return t<Math.min(n.delay,r)?xu:t>=Math.min(n.delay+e+n.endDelay,r)?B_:Ay}function pb(e,t,n,r,i){switch(r){case xu:return t==="backwards"||t==="both"?0:null;case Ay:return n-i;case B_:return t==="forwards"||t==="both"?e:null;case yw:return null}}function Ov(e,t,n,r,i){var s=i;return e===0?t!==xu&&(s+=n):s+=r/e,s}function k_(e,t,n,r,i,s){var l=e===1/0?t%1:e%1;return l===0&&n===B_&&r!==0&&(i!==0||s===0)&&(l=1),l}function v3(e,t,n,r){return e===B_&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function vb(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function m3(e,t,n){var r=db(e,t,n),i=pb(e,n.fill,t,r,n.delay);if(i===null)return null;var s=n.duration==="auto"?0:n.duration,l=Ov(s,r,n.iterations,i,n.iterationStart),c=k_(l,n.iterationStart,r,n.iterations,i,s),h=v3(r,n.iterations,c,l),p=vb(n.direction,h,c);return n.currentIteration=h,n.progress=p,n.easingFunction(p)}function g3(e,t,n){var r=mb(e,t),i=y3(r,n);return function(s,l){if(l!==null)i.filter(function(h){return l>=h.applyFrom&&l<h.applyTo}).forEach(function(h){var p=l-h.startOffset,v=h.endOffset-h.startOffset,y=v===0?0:p/v;s.setAttribute(h.property,h.interpolation(y),!1,!1)});else for(var c in r)xg(c)&&s.setAttribute(c,null)}}function xg(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function mb(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(xg(i)){var s={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:hb(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(s)}return n}function y3(e,t){var n=[];for(var r in e)for(var i=e[r],s=0;s<i.length-1;s++){var l=s,c=s+1,h=i[l].computedOffset,p=i[c].computedOffset,v=h,y=p;s===0&&(v=-1/0,p===0&&(c=l)),s===i.length-2&&(y=1/0,h===1&&(l=c)),n.push({applyFrom:v,applyTo:y,startOffset:i[l].computedOffset,endOffset:i[c].computedOffset,easingFunction:i[l].easingFunction,property:r,interpolation:U_(r,i[l].value,i[c].value,t)})}return n.sort(function(b,T){return b.startOffset-T.startOffset}),n}var z_=function(e,t,n){return function(r){var i=j_(e,t,r);return!Kr.enableCSSParsing&&(0,Yl.Z)(i)?i:n(i)}};function U_(e,t,n,r){var i=om[e];if(i&&i.syntax&&i.int){var s=Kr.styleValueRegistry.getPropertySyntax(i.syntax);if(s){var l=void 0,c=void 0;if(Kr.enableCSSParsing){var h=Kr.styleValueRegistry.parseProperty(e,t,r,!1),p=Kr.styleValueRegistry.parseProperty(e,n,r,!1);l=Kr.styleValueRegistry.computeProperty(e,h,r,!1),c=Kr.styleValueRegistry.computeProperty(e,p,r,!1)}else{var v=s.parserWithCSSDisabled;l=v?v(t,r):t,c=v?v(n,r):n}var y=s.mixer(l,c,r);if(y){var b=z_.apply(void 0,(0,se.ev)([],(0,se.CR)(y),!1));return function(T){return T===0?t:T===1?n:b(T)}}}}return z_(!1,!0,function(T){return T?n:t})}function j_(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,s=Math.max(r,i),l=[],c=0;c<s;c++)l.push(j_(e[c<r?c:r-1],t[c<i?c:i-1],n));return l}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var _3=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=a3,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=hb(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function V_(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,s=0;s<i;s++){if(!t[s]){var l={};"offset"in e&&(l.offset=Number(e.offset)),"easing"in e&&(l.easing=e.easing),"composite"in e&&(l.composite=e.composite),t[s]=l}r[s]!==void 0&&r[s]!==null&&(t[s][n]=r[s])}}return t.sort(function(c,h){return(c.computedOffset||0)-(h.computedOffset||0)}),t}function _w(e,t){if(e===null)return[];Array.isArray(e)||(e=V_(e));for(var n=e.map(function(h){var p={};t!=null&&t.composite&&(p.composite="auto");for(var v in h){var y=h[v];if(v==="offset"){if(y!==null){if(y=Number(y),!isFinite(y))throw new Error("Keyframe offsets must be numbers.");if(y<0||y>1)throw new Error("Keyframe offsets must be between 0 and 1.");p.computedOffset=y}}else if(v==="composite"&&["replace","add","accumulate","auto"].indexOf(y)===-1)throw new Error("".concat(y," compositing is not supported"));p[v]=y}return p.offset===void 0&&(p.offset=null),p.easing===void 0&&(p.easing=(t==null?void 0:t.easing)||"linear"),p.composite===void 0&&(p.composite="auto"),p}),r=!0,i=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,Sa.Z)(l))r=!1;else{if(l<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=l}}n=n.filter(function(h){return Number(h.offset)>=0&&Number(h.offset)<=1});function c(){var h,p,v=n.length;n[v-1].computedOffset=Number((h=n[v-1].offset)!==null&&h!==void 0?h:1),v>1&&(n[0].computedOffset=Number((p=n[0].offset)!==null&&p!==void 0?p:0));for(var y=0,b=Number(n[0].computedOffset),T=1;T<v;T++){var M=n[T].computedOffset;if(!(0,Sa.Z)(M)&&!(0,Sa.Z)(b)){for(var R=1;R<T-y;R++)n[y+R].computedOffset=b+(Number(M)-b)*R/(T-y);y=T,b=Number(M)}}}return r||c(),n}var b3="backwards|forwards|both|none".split("|"),x3="reverse|alternate|alternate-reverse".split("|");function bw(e,t){var n=new _3;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&b3.indexOf(e[r])===-1||r==="direction"&&x3.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function Yc(e,t){return e=f2(e!=null?e:{duration:"auto"}),bw(e,t)}function f2(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var E3=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=Yc(r,!1),this.timing.effect=this,this.timing.activeDuration=h3(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=_w(n,this.timing),this.interpolations=g3(this.normalizedKeyframes,this.timing,this.target);var s=Kr.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(l,c){return c==="duration"?l.duration==="auto"?0:l.duration:c==="fill"?l.fill==="auto"?"none":l.fill:c==="localTime"?i.animation&&i.animation.currentTime||null:c==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:l.currentIteration||0:c==="progress"?!i.animation||i.animation.playState!=="running"?null:l.progress||0:l[c]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=m3(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=_w(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function gb(e,t){return Number(e.id)-Number(t.id)}var S3=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(gb),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(s){s[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new E3(t,n,r),s=new JO(i,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(gb);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(s){var l=n.animations.indexOf(s);l!==-1&&n.animations.splice(l,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,s,l=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var c=[],h=[],p=[],v=[];return r.forEach(function(y){y.tick(t,n),y._inEffect?(h.push(y.effect),y.markTarget()):(c.push(y.effect),y.unmarkTarget()),y._needsTick&&(l.ticking=!0);var b=y._inEffect||y._needsTick;y._inTimeline=b,b?p.push(y):v.push(y)}),(i=this.pendingEffects).push.apply(i,(0,se.ev)([],(0,se.CR)(c),!1)),(s=this.pendingEffects).push.apply(s,(0,se.ev)([],(0,se.CR)(h),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]},e}();Kr.EasingFunction=hb,Kr.AnimationTimeline=S3;function w3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.r;e.arc(r,s,l,0,Math.PI*2,!1)}function T3(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.rx,c=t.ry;if(e.ellipse)e.ellipse(r,s,l,c,0,0,Math.PI*2,!1);else{var h=l>c?l:c,p=l>c?1:l/c,v=l>c?c/l:1;e.save(),e.scale(p,v),e.arc(r,s,h,0,Math.PI*2)}}function h2(e,t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=0,y=0,b=0,T=0,M=0,R,I;l&&bl(l)&&h&&(R=i-n,I=s-r,M=Math.atan2(I,R),v=Math.cos(M)*(h||0),y=Math.sin(M)*(h||0)),c&&bl(c)&&p&&(R=n-i,I=r-s,M=Math.atan2(I,R),b=Math.cos(M)*(p||0),T=Math.sin(M)*(p||0)),e.moveTo(n+v,r+y),e.lineTo(i+b,s+T)}function xw(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.d,c=l.absolutePath,h=l.segments,p=0,v=0,y=0,b=0,T=0,M,R;if(n&&bl(n)&&i){var I=(0,se.CR)(n.parentNode.getStartTangent(),2),N=I[0],z=I[1];M=N[0]-z[0],R=N[1]-z[1],T=Math.atan2(R,M),p=Math.cos(T)*(i||0),v=Math.sin(T)*(i||0)}if(r&&bl(r)&&s){var H=(0,se.CR)(r.parentNode.getEndTangent(),2),N=H[0],z=H[1];M=N[0]-z[0],R=N[1]-z[1],T=Math.atan2(R,M),y=Math.cos(T)*(s||0),b=Math.sin(T)*(s||0)}for(var X=0;X<c.length;X++){var Y=c[X],ne=Y[0],ve=c[X+1],ye=X===0&&(p!==0||v!==0),De=(X===c.length-1||ve&&(ve[0]==="M"||ve[0]==="Z"))&&y!==0&&b!==0;switch(ne){case"M":ye?(e.moveTo(Y[1]+p,Y[2]+v),e.lineTo(Y[1],Y[2])):e.moveTo(Y[1],Y[2]);break;case"L":De?e.lineTo(Y[1]+y,Y[2]+b):e.lineTo(Y[1],Y[2]);break;case"Q":e.quadraticCurveTo(Y[1],Y[2],Y[3],Y[4]),De&&e.lineTo(Y[3]+y,Y[4]+b);break;case"C":e.bezierCurveTo(Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]),De&&e.lineTo(Y[5]+y,Y[6]+b);break;case"A":{var Ye=h[X].arcParams,Qe=Ye.cx,yt=Ye.cy,qe=Ye.rx,ut=Ye.ry,ft=Ye.startAngle,mt=Ye.endAngle,Xt=Ye.xRotation,Mt=Ye.sweepFlag;if(e.ellipse)e.ellipse(Qe,yt,qe,ut,Xt,ft,mt,!!(1-Mt));else{var kt=qe>ut?qe:ut,Tn=qe>ut?1:qe/ut,zn=qe>ut?ut/qe:1;e.translate(Qe,yt),e.rotate(Xt),e.scale(Tn,zn),e.arc(0,0,kt,ft,mt,!!(1-Mt)),e.scale(1/Tn,1/zn),e.rotate(-Xt),e.translate(-Qe,-yt)}De&&e.lineTo(Y[6]+y,Y[7]+b);break}case"Z":e.closePath();break}}}function A3(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,T=0,M=0,R=0,I=0,N,z;n&&bl(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&bl(r)&&s&&(N=l[c-1][0]-l[0][0],z=l[c-1][1]-l[0][1],I=Math.atan2(z,N),M=Math.cos(I)*(s||0),R=Math.sin(I)*(s||0)),e.moveTo(h+(b||M),p+(T||R));for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v,y)}function Cy(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,T=0,M=0,R=0,I=0,N,z;n&&bl(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&bl(r)&&s&&(N=l[c-2][0]-l[c-1][0],z=l[c-2][1]-l[c-1][1],I=Math.atan2(z,N),M=Math.cos(I)*(s||0),R=Math.sin(I)*(s||0)),e.moveTo(h+b,p+T);for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v+M,y+R)}function C3(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,l=t.radius,c=t.width,h=t.height,p=c,v=h,y=l&&l.some(function(X){return X!==0});if(!y)e.rect(r,s,p,v);else{var b=c>0?1:-1,T=h>0?1:-1,M=b+T===0,R=(0,se.CR)(l.map(function(X){return(0,d.Z)(X,0,Math.min(Math.abs(p)/2,Math.abs(v)/2))}),4),I=R[0],N=R[1],z=R[2],H=R[3];e.moveTo(b*I+r,s),e.lineTo(p-b*N+r,s),N!==0&&e.arc(p-b*N+r,T*N+s,N,-T*Math.PI/2,b>0?0:Math.PI,M),e.lineTo(p+r,v-T*z+s),z!==0&&e.arc(p-b*z+r,v-T*z+s,z,b>0?0:Math.PI,T>0?Math.PI/2:1.5*Math.PI,M),e.lineTo(b*H+r,v+s),H!==0&&e.arc(b*H+r,v-T*H+s,H,T>0?Math.PI/2:-Math.PI/2,b>0?Math.PI:0,M),e.lineTo(r,T*I+s),I!==0&&e.arc(b*I+r,T*I+s,I,b>0?Math.PI:0,T>0?Math.PI*1.5:Math.PI/2,M)}}var O3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[ui.CIRCLE]=w3,n[ui.ELLIPSE]=T3,n[ui.RECT]=C3,n[ui.LINE]=h2,n[ui.POLYLINE]=Cy,n[ui.POLYGON]=A3,n[ui.PATH]=xw,n[ui.TEXT]=void 0,n[ui.GROUP]=void 0,n[ui.IMAGE]=void 0,n[ui.HTML]=void 0,n[ui.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(Mp),M3=or.Ue(),R3=or.Ue(),P3=or.Ue(),I3=Qr.create(),D3=function(){function e(){var t=this;this.isHit=function(n,r,i,s){var l=t.context.pointInPathPickerFactory[n.nodeName];if(l){var c=Qr.invert(I3,i),h=or.fF(R3,or.t8(P3,r[0],r[1],0),c);if(l(n,new Zc(h[0],h[1]),s,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),s=t.context.pathGeneratorFactory[n.nodeName];return s&&(i.beginPath(),s(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,s=t.renderingService,l=t.renderingContext;this.context=t,this.runtime=n;var c=(i=l.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(e.tag,function(h){return(0,se.mG)(r,void 0,void 0,function(){return(0,se.Jh)(this,function(p){return[2,this.pick(c,h)]})})}),s.hooks.pickSync.tap(e.tag,function(h){return r.pick(c,h)})},e.prototype.pick=function(t,n){var r,i,s=n.topmost,l=n.position,c=l.x,h=l.y,p=or.t8(M3,c,h,0),v=t.elementsFromBBox(p[0],p[1],p[0],p[1]),y=[];try{for(var b=(0,se.XA)(v),T=b.next();!T.done;T=b.next()){var M=T.value,R=M.getWorldTransform(),I=this.isHit(M,p,R,!1);if(I){var N=wO(M);if(N){var z=N.parsedStyle.clipPath,H=this.isHit(z,p,z.getWorldTransform(),!0);if(H){if(s)return n.picked=[M],n;y.push(M)}}else{if(s)return n.picked=[M],n;y.push(M)}}}}catch(X){r={error:X}}finally{try{T&&!T.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return n.picked=y,n},e.tag="CanvasPicker",e}();function Ew(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.r,p=r.fill,v=r.stroke,y=r.lineWidth,b=y===void 0?1:y,T=r.increasedLineWidthForHitTesting,M=T===void 0?0:T,R=r.pointerEvents,I=R===void 0?"auto":R,N=(b+M)/2,z=Ts(s,c,t.x,t.y),H=(0,se.CR)(pg(I,p,v),2),X=H[0],Y=H[1];return X&&Y||n?z<=h+N:X?z<=h:Y?z>=h-N&&z<=h+N:!1}function yb(e,t,n,r){return e/(n*n)+t/(r*r)}function Sw(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.rx,p=r.ry,v=r.fill,y=r.stroke,b=r.lineWidth,T=b===void 0?1:b,M=r.increasedLineWidthForHitTesting,R=M===void 0?0:M,I=r.pointerEvents,N=I===void 0?"auto":I,z=t.x,H=t.y,X=(0,se.CR)(pg(N,v,y),2),Y=X[0],ne=X[1],ve=(T+R)/2,ye=(z-s)*(z-s),De=(H-c)*(H-c);return Y&&ne||n?yb(ye,De,h+ve,p+ve)<=1:Y?yb(ye,De,h,p)<=1:ne?yb(ye,De,h-ve,p-ve)>=1&&yb(ye,De,h+ve,p+ve)<=1:!1}function hm(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function L3(e,t,n,r,i,s,l){var c=i/2;return hm(e-c,t-c,n,i,s,l)||hm(e+n-c,t-c,i,r,s,l)||hm(e+c,t+r-c,n,i,s,l)||hm(e-c,t+c,i,r,s,l)}function _b(e,t,n,r,i,s,l,c){var h=(Math.atan2(c-t,l-e)+Math.PI*2)%(Math.PI*2),p={x:e+n*Math.cos(h),y:t+n*Math.sin(h)};return Ts(p.x,p.y,l,c)<=s/2}function dm(e,t,n,r,i,s,l){var c=Math.min(e,n),h=Math.max(e,n),p=Math.min(t,r),v=Math.max(t,r),y=i/2;return s>=c-y&&s<=h+y&&l>=p-y&&l<=v+y?R1(e,t,n,r,s,l)<=i/2:!1}function H_(e,t,n,r,i){var s=e.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var c=e[l][0],h=e[l][1],p=e[l+1][0],v=e[l+1][1];if(dm(c,h,p,v,t,n,r))return!0}if(i){var y=e[0],b=e[s-1];if(dm(y[0],y[1],b[0],b[1],t,n,r))return!0}return!1}var Oy=1e-6;function d2(e){return Math.abs(e)<Oy?0:e<0?-1:1}function N3(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function ww(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var s=0;s<i;s++){var l=e[s],c=e[(s+1)%i];if(N3(l,c,[t,n]))return!0;d2(l[1]-n)>0!=d2(c[1]-n)>0&&d2(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}function Tw(e,t,n){for(var r=!1,i=0;i<e.length;i++){var s=e[i];if(r=ww(s,t,n),r)break}return r}function F3(e,t,n){var r=e.parsedStyle,i=r.x1,s=r.y1,l=r.x2,c=r.y2,h=r.lineWidth,p=h===void 0?1:h,v=r.increasedLineWidthForHitTesting,y=v===void 0?0:v,b=r.pointerEvents,T=b===void 0?"auto":b,M=r.fill,R=r.stroke,I=(0,se.CR)(pg(T,M,R),2),N=I[1];return!N&&!n||!p?!1:dm(i,s,l,c,p+y,t.x,t.y)}function B3(e,t,n,r,i){for(var s=!1,l=t/2,c=0;c<e.length;c++){var h=e[c],p=h.currentPoint,v=h.params,y=h.prePoint,b=h.box;if(!(b&&!hm(b.x-l,b.y-l,b.width+t,b.height+t,n,r)))switch(h.command){case"L":case"Z":if(s=dm(y[0],y[1],p[0],p[1],t,n,r),s)return!0;break;case"Q":var T=Gs(y[0],y[1],v[1],v[2],v[3],v[4],n,r);if(s=T<=t/2,s)return!0;break;case"C":var M=oy(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],n,r,i);if(s=M<=t/2,s)return!0;break;case"A":h.cubicParams||(h.cubicParams=Cu(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],v[7],void 0));for(var R=h.cubicParams,I=y,N=0;N<R.length;N+=6){var z=oy(I[0],I[1],R[N],R[N+1],R[N+2],R[N+3],R[N+4],R[N+5],n,r,i);if(I=[R[N+4],R[N+5]],s=z<=t/2,s)return!0}break}}return s}function Aw(e,t,n,r,i,s){var l=e.parsedStyle,c=l.lineWidth,h=c===void 0?1:c,p=l.increasedLineWidthForHitTesting,v=p===void 0?0:p,y=l.stroke,b=l.fill,T=l.d,M=l.pointerEvents,R=M===void 0?"auto":M,I=T.segments,N=T.hasArc,z=T.polylines,H=T.polygons,X=(0,se.CR)(pg(R,(H==null?void 0:H.length)&&b,y),2),Y=X[0],ne=X[1],ve=Hx(e),ye=!1;return Y||n?(N?ye=r(e,t):ye=Tw(H,t.x,t.y)||Tw(z,t.x,t.y),ye):((ne||n)&&(ye=B3(I,h+v,t.x,t.y,ve)),ye)}function k3(e,t,n){var r=e.parsedStyle,i=r.stroke,s=r.fill,l=r.lineWidth,c=l===void 0?1:l,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=r.points,y=r.pointerEvents,b=y===void 0?"auto":y,T=(0,se.CR)(pg(b,s,i),2),M=T[0],R=T[1],I=!1;return(R||n)&&(I=H_(v.points,c+p,t.x,t.y,!0)),!I&&(M||n)&&(I=ww(v.points,t.x,t.y)),I}function Cw(e,t,n){var r=e.parsedStyle,i=r.lineWidth,s=i===void 0?1:i,l=r.increasedLineWidthForHitTesting,c=l===void 0?0:l,h=r.points,p=r.pointerEvents,v=p===void 0?"auto":p,y=r.fill,b=r.stroke,T=(0,se.CR)(pg(v,y,b),2),M=T[1];return!M&&!n||!s?!1:H_(h.points,s+c,t.x,t.y,!1)}function o0(e,t,n,r,i){var s=e.parsedStyle,l=s.radius,c=s.fill,h=s.stroke,p=s.lineWidth,v=p===void 0?1:p,y=s.increasedLineWidthForHitTesting,b=y===void 0?0:y,T=s.x,M=T===void 0?0:T,R=s.y,I=R===void 0?0:R,N=s.width,z=s.height,H=s.pointerEvents,X=H===void 0?"auto":H,Y=(0,se.CR)(pg(X,c,h),2),ne=Y[0],ve=Y[1],ye=l&&l.some(function(yt){return yt!==0}),De=v+b;if(ye){var Qe=!1;return(ve||n)&&(Qe=z3(M,I,N,z,l.map(function(yt){return(0,d.Z)(yt,0,Math.min(Math.abs(N)/2,Math.abs(z)/2))}),De,t.x,t.y)),!Qe&&(ne||n)&&(Qe=r(e,t)),Qe}else{var Ye=De/2;if(ne&&ve||n)return hm(M-Ye,I-Ye,N+Ye,z+Ye,t.x,t.y);if(ne)return hm(M,I,N,z,t.x,t.y);if(ve)return L3(M,I,N,z,De,t.x,t.y)}return!1}function z3(e,t,n,r,i,s,l,c){var h=(0,se.CR)(i,4),p=h[0],v=h[1],y=h[2],b=h[3];return dm(e+p,t,e+n-v,t,s,l,c)||dm(e+n,t+v,e+n,t+r-y,s,l,c)||dm(e+n-y,t+r,e+b,t+r,s,l,c)||dm(e,t+r-b,e,t+p,s,l,c)||_b(e+n-v,t+v,v,1.5*Math.PI,2*Math.PI,s,l,c)||_b(e+n-y,t+r-y,y,0,.5*Math.PI,s,l,c)||_b(e+b,t+r-b,b,.5*Math.PI,Math.PI,s,l,c)||_b(e+p,t+p,p,Math.PI,1.5*Math.PI,s,l,c)}function U3(e,t,n,r,i,s){var l=e.parsedStyle,c=l.pointerEvents,h=c===void 0?"auto":c,p=l.x,v=p===void 0?0:p,y=l.y,b=y===void 0?0:y,T=l.width,M=l.height;if(h==="non-transparent-pixel"){var R=i.config.offscreenCanvas,I=s.offscreenCanvasCreator.getOrCreateCanvas(R),N=s.offscreenCanvasCreator.getOrCreateContext(R,{willReadFrequently:!0});I.width=T,I.height=M,i.defaultStyleRendererFactory[ui.IMAGE].render(N,(0,se.pi)((0,se.pi)({},e.parsedStyle),{x:0,y:0}),e,void 0,void 0,void 0);var z=N.getImageData(t.x-v,t.y-b,1,1).data;return z.every(function(H){return H!==0})}return!0}var Ow=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[ui.CIRCLE]=Ew,n[ui.ELLIPSE]=Sw,n[ui.RECT]=o0,n[ui.LINE]=F3,n[ui.POLYLINE]=Cw,n[ui.POLYGON]=k3,n[ui.PATH]=Aw,n[ui.TEXT]=r,n[ui.GROUP]=null,n[ui.IMAGE]=U3,n[ui.HTML]=null,n[ui.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new D3)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(Mp),j3=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Qr.create(),this.dprMatrix=Qr.create(),this.tmpMat4=Qr.create(),this.vec3a=or.Ue(),this.vec3b=or.Ue(),this.vec3c=or.Ue(),this.vec3d=or.Ue()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,s=t.camera,l=t.renderingService,c=t.renderingContext,h=t.rBushRoot,p=t.pathGeneratorFactory;this.rBush=h,this.pathGeneratorFactory=p;var v=t.contextService,y=c.root.ownerDocument.defaultView,b=function(R){var I=R.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)},T=function(R){var I=R.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)};l.hooks.init.tap(e.tag,function(){y.addEventListener(Ba.UNMOUNTED,b),y.addEventListener(Ba.CULLED,T);var R=v.getDPR(),I=i.width,N=i.height,z=v.getContext();r.clearRect(z,0,0,I*R,N*R,i.background)}),l.hooks.destroy.tap(e.tag,function(){y.removeEventListener(Ba.UNMOUNTED,b),y.removeEventListener(Ba.CULLED,T),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),l.hooks.beginFrame.tap(e.tag,function(){var R,I=v.getContext(),N=v.getDPR(),z=i.width,H=i.height,X=r.canvasRendererPluginOptions,Y=X.dirtyObjectNumThreshold,ne=X.dirtyObjectRatioThreshold,ve=l.getStats(),ye=ve.total,De=ve.rendered,Ye=De/ye;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((R=y.context.renderingPlugins[1])===null||R===void 0)&&R.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||De>Y&&Ye>ne,I&&(I.resetTransform?I.resetTransform():I.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(I,0,0,z*N,H*N,i.background))});var M=function(R,I){R.isVisible()&&!R.isCulled()&&r.renderDisplayObject(R,I,r.context,r.restoreStack,n);var N=R.sortable.sorted||R.childNodes;N.forEach(function(z){M(z,I)})};l.hooks.endFrame.tap(e.tag,function(){if(c.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var R=v.getContext(),I=v.getDPR();if(Qr.fromScaling(r.dprMatrix,[I,I,1]),Qr.multiply(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)M(c.root,R);else{var N=r.safeMergeAABB.apply(r,(0,se.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,se.CR)(r.removedRBushNodeAABBs.map(function(zn){var lr=zn.minX,ir=zn.minY,Hr=zn.maxX,Ti=zn.maxY,ro=new Mc;return ro.setMinMax([lr,ir,0],[Hr,Ti,0]),ro})),!1));if(r.removedRBushNodeAABBs=[],Mc.isEmpty(N)){r.renderQueue=[];return}var z=r.convertAABB2Rect(N),H=z.x,X=z.y,Y=z.width,ne=z.height,ve=or.fF(r.vec3a,[H,X,0],r.vpMatrix),ye=or.fF(r.vec3b,[H+Y,X,0],r.vpMatrix),De=or.fF(r.vec3c,[H,X+ne,0],r.vpMatrix),Ye=or.fF(r.vec3d,[H+Y,X+ne,0],r.vpMatrix),Qe=Math.min(ve[0],ye[0],Ye[0],De[0]),yt=Math.min(ve[1],ye[1],Ye[1],De[1]),qe=Math.max(ve[0],ye[0],Ye[0],De[0]),ut=Math.max(ve[1],ye[1],Ye[1],De[1]),ft=Math.floor(Qe),mt=Math.floor(yt),Xt=Math.ceil(qe-Qe),Mt=Math.ceil(ut-yt);R.save(),r.clearRect(R,ft,mt,Xt,Mt,i.background),R.beginPath(),R.rect(ft,mt,Xt,Mt),R.clip(),R.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var kt=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;kt&&y.dispatchEvent(new au(ld.DIRTY_RECTANGLE,{dirtyRect:{x:ft,y:mt,width:Xt,height:Mt}}));var Tn=r.searchDirtyObjects(N);Tn.sort(function(zn,lr){return zn.sortable.renderOrder-lr.sortable.renderOrder}).forEach(function(zn){zn&&zn.isVisible()&&!zn.isCulled()&&r.renderDisplayObject(zn,R,r.context,r.restoreStack,n)}),R.restore(),r.renderQueue.forEach(function(zn){r.saveDirtyAABB(zn)}),r.renderQueue=[]}r.restoreStack.forEach(function(){R.restore()}),r.restoreStack=[]}),l.hooks.render.tap(e.tag,function(R){r.clearFullScreen||r.renderQueue.push(R)})},e.prototype.clearRect=function(t,n,r,i,s,l){t.clearRect(n,r,i,s),l&&(t.fillStyle=l,t.fillRect(n,r,i,s))},e.prototype.renderDisplayObject=function(t,n,r,i,s){var l=t.nodeName,c=i[i.length-1];c&&!(t.compareDocumentPosition(c)&Qn.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var h=this.context.styleRendererFactory[l],p=this.pathGeneratorFactory[l],v=t.parsedStyle.clipPath;if(v){this.applyWorldTransform(n,v);var y=this.pathGeneratorFactory[v.nodeName];y&&(n.save(),i.push(t),n.beginPath(),y(n,v.parsedStyle),n.closePath(),n.clip())}h&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),p&&(n.beginPath(),p(n,t.parsedStyle),t.nodeName!==ui.LINE&&t.nodeName!==ui.PATH&&t.nodeName!==ui.POLYLINE&&n.closePath()),h&&(h.render(n,t.parsedStyle,t,r,this,s),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),s=Math.floor(n[1]),l=Math.ceil(r[0]),c=Math.ceil(r[1]),h=l-i,p=c-s;return{x:i,y:s,width:h,height:p}},e.prototype.mergeDirtyAABBs=function(t){var n=new Mc;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var s=r.renderable.dirtyRenderBounds;s&&n.add(s)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,se.CR)(t.getMin(),2),r=n[0],i=n[1],s=(0,se.CR)(t.getMax(),2),l=s[0],c=s[1],h=this.rBush.search({minX:r,minY:i,maxX:l,maxY:c});return h.map(function(p){var v=p.displayObject;return v})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new Mc);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,s=r.fill,l=r.opacity,c=r.lineDash,h=r.lineDashOffset;c&&t.setLineDash(c),(0,Sa.Z)(h)||(t.lineDashOffset=h),(0,Sa.Z)(l)||(t.globalAlpha*=l),!(0,Sa.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,Sa.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){r?(Qr.copy(this.tmpMat4,n.getLocalTransform()),Qr.multiply(this.tmpMat4,r,this.tmpMat4),Qr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Qr.copy(this.tmpMat4,n.getWorldTransform()),Qr.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new Mc;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),pm=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){var c=n.fill,h=n.fillRule,p=n.opacity,v=p===void 0?1:p,y=n.fillOpacity,b=y===void 0?1:y,T=n.stroke,M=n.strokeOpacity,R=M===void 0?1:M,I=n.lineWidth,N=I===void 0?1:I,z=n.lineCap,H=n.lineJoin,X=n.shadowType,Y=n.shadowColor,ne=n.shadowBlur,ve=n.filter,ye=n.miterLimit,De=c&&!c.isNone,Ye=T&&!T.isNone&&N>0,Qe=(c==null?void 0:c.alpha)===0,yt=!!(ve&&ve.length),qe=!(0,Sa.Z)(Y)&&ne>0,ut=r.nodeName,ft=X==="inner",mt=Ye&&qe&&(ut===ui.PATH||ut===ui.LINE||ut===ui.POLYLINE||Qe||ft);De&&(t.globalAlpha=v*b,mt||G_(r,t,qe),p2(t,r,c,h,i,s,l,this.imagePool),mt||this.clearShadowAndFilter(t,yt,qe)),Ye&&(t.globalAlpha=v*R,t.lineWidth=N,(0,Sa.Z)(ye)||(t.miterLimit=ye),(0,Sa.Z)(z)||(t.lineCap=z),(0,Sa.Z)(H)||(t.lineJoin=H),mt&&(ft&&(t.globalCompositeOperation="source-atop"),G_(r,t,!0),ft&&(v2(t,r,T,i,s,l,this.imagePool),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,yt,!0))),v2(t,r,T,i,s,l,this.imagePool))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,Sa.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e}();function G_(e,t,n){var r=e.parsedStyle,i=r.filter,s=r.shadowColor,l=r.shadowBlur,c=r.shadowOffsetX,h=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=s.toString(),t.shadowBlur=l||0,t.shadowOffsetX=c||0,t.shadowOffsetY=h||0)}function Mw(e,t,n,r,i,s,l){var c,h;if(e.image.nodeName==="rect"){var p=e.image.parsedStyle,v=p.width,y=p.height;h=r.contextService.getDPR();var b=r.config.offscreenCanvas;c=s.offscreenCanvasCreator.getOrCreateCanvas(b),c.width=v*h,c.height=y*h;var T=s.offscreenCanvasCreator.getOrCreateContext(b),M=[];e.image.forEach(function(I){i.renderDisplayObject(I,T,r,M,s)}),M.forEach(function(){T.restore()})}var R=l.getOrCreatePatternSync(e,n,c,h,t.getGeometryBounds().min,function(){t.renderable.dirty=!0,r.renderingService.dirtify()});return R}function Rw(e,t,n,r){var i;if(e.type===B0.LinearGradient||e.type===B0.RadialGradient){var s=t.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,c=s&&s.halfExtents[1]*2||1,h=s&&s.min||[0,0];i=r.getOrCreateGradient((0,se.pi)((0,se.pi)({type:e.type},e.value),{min:h,width:l,height:c}),n)}return i}function p2(e,t,n,r,i,s,l,c,h){h===void 0&&(h=!1),Array.isArray(n)?n.forEach(function(p){e.fillStyle=Rw(p,t,e,c),h||(r?e.fill(r):e.fill())}):(A_(n)&&(e.fillStyle=Mw(n,t,e,i,s,l,c)),h||(r?e.fill(r):e.fill()))}function v2(e,t,n,r,i,s,l,c){c===void 0&&(c=!1),Array.isArray(n)?n.forEach(function(h){e.strokeStyle=Rw(h,t,e,l),c||e.stroke()}):(A_(n)&&(e.strokeStyle=Mw(n,t,e,r,i,s,l)),c||e.stroke())}var V3=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l,h=n.width,p=n.height,v=n.src,y=n.shadowColor,b=n.shadowBlur,T,M=h,R=p;if(u(v)?T=this.imagePool.getImageSync(v):(M||(M=v.width),R||(R=v.height),T=v),T){var I=!(0,Sa.Z)(y)&&b>0;G_(r,t,I);try{t.drawImage(T,s,c,M,R)}catch(N){}}},e}(),bb=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){r.getBounds();var c=n,h=c.lineWidth,p=h===void 0?1:h,v=c.textAlign,y=v===void 0?"start":v,b=c.textBaseline,T=b===void 0?"alphabetic":b,M=c.lineJoin,R=M===void 0?"miter":M,I=c.miterLimit,N=I===void 0?10:I,z=c.letterSpacing,H=z===void 0?0:z,X=c.stroke,Y=c.fill,ne=c.fillRule,ve=c.fillOpacity,ye=ve===void 0?1:ve,De=c.strokeOpacity,Ye=De===void 0?1:De,Qe=c.opacity,yt=Qe===void 0?1:Qe,qe=c.metrics,ut=c.x,ft=ut===void 0?0:ut,mt=c.y,Xt=mt===void 0?0:mt,Mt=c.dx,kt=c.dy,Tn=c.shadowColor,zn=c.shadowBlur,lr=qe.font,ir=qe.lines,Hr=qe.height,Ti=qe.lineHeight,ro=qe.lineMetrics;t.font=lr,t.lineWidth=p,t.textAlign=y==="middle"?"center":y;var si=T;!l.enableCSSParsing&&si==="alphabetic"&&(si="bottom"),t.lineJoin=R,(0,Sa.Z)(N)||(t.miterLimit=N);var Xr=Xt;T==="middle"?Xr+=-Hr/2-Ti/2:T==="bottom"||T==="alphabetic"||T==="ideographic"?Xr+=-Hr:(T==="top"||T==="hanging")&&(Xr+=-Ti);var mo=ft+(Mt||0);Xr+=kt||0,ir.length===1&&(si==="bottom"?(si="middle",Xr-=.5*Hr):si==="top"&&(si="middle",Xr+=.5*Hr)),t.textBaseline=si;var ho=!(0,Sa.Z)(Tn)&&zn>0;G_(r,t,ho);for(var Ho=0;Ho<ir.length;Ho++){var ma=p/2+mo;Xr+=Ti,!(0,Sa.Z)(X)&&!X.isNone&&p&&this.drawLetterSpacing(t,r,ir[Ho],ro[Ho],y,ma,Xr,H,Y,ne,ye,X,Ye,yt,!0,i,s,l),(0,Sa.Z)(Y)||this.drawLetterSpacing(t,r,ir[Ho],ro[Ho],y,ma,Xr,H,Y,ne,ye,X,Ye,yt,!1,i,s,l)}},e.prototype.drawLetterSpacing=function(t,n,r,i,s,l,c,h,p,v,y,b,T,M,R,I,N,z){if(h===0){R?this.strokeText(t,n,r,l,c,b,T,I,N,z):this.fillText(t,n,r,l,c,p,v,y,M,I,N,z);return}var H=t.textAlign;t.textAlign="left";var X=l;s==="center"||s==="middle"?X=l-i.width/2:(s==="right"||s==="end")&&(X=l-i.width);for(var Y=Array.from(r),ne=t.measureText(r).width,ve=0,ye=0;ye<Y.length;++ye){var De=Y[ye];R?this.strokeText(t,n,De,X,c,b,T,I,N,z):this.fillText(t,n,De,X,c,p,v,y,M,I,N,z),ve=t.measureText(r.substring(ye+1)).width,X+=ne-ve+h,ne=ve}t.textAlign=H},e.prototype.fillText=function(t,n,r,i,s,l,c,h,p,v,y,b){p2(t,n,l,c,v,y,b,this.imagePool,!0);var T,M=!(0,Sa.Z)(h)&&h!==1;M&&(T=t.globalAlpha,t.globalAlpha=h*p),t.fillText(r,i,s),M&&(t.globalAlpha=T)},e.prototype.strokeText=function(t,n,r,i,s,l,c,h,p,v){v2(t,n,l,h,p,v,this.imagePool,!0);var y,b=!(0,Sa.Z)(c)&&c!==1;b&&(y=t.globalAlpha,t.globalAlpha=c),t.strokeText(r,i,s),b&&(t.globalAlpha=y)},e}(),e4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),t4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),n4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),r4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),i4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),o4=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),H3=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(pm),G3=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,se.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,s=new pm(i),l=(n={},n[ui.CIRCLE]=s,n[ui.ELLIPSE]=s,n[ui.RECT]=s,n[ui.IMAGE]=new V3(i),n[ui.TEXT]=new bb(i),n[ui.LINE]=s,n[ui.POLYLINE]=s,n[ui.POLYGON]=s,n[ui.PATH]=s,n[ui.GROUP]=void 0,n[ui.HTML]=void 0,n[ui.MESH]=void 0,n);this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new j3(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(Mp),W3=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,s=t.renderingContext,l=t.config;this.context=t;var c=s.root.ownerDocument.defaultView,h=function(ne){i.hooks.pointerMove.call(ne)},p=function(ne){i.hooks.pointerUp.call(ne)},v=function(ne){i.hooks.pointerDown.call(ne)},y=function(ne){i.hooks.pointerOver.call(ne)},b=function(ne){i.hooks.pointerOut.call(ne)},T=function(ne){i.hooks.pointerCancel.call(ne)},M=function(ne){i.hooks.pointerWheel.call(ne)},R=function(ne){i.hooks.click.call(ne)},I=function(ne){n.globalThis.document.addEventListener("pointermove",h,!0),ne.addEventListener("pointerdown",v,!0),ne.addEventListener("pointerleave",b,!0),ne.addEventListener("pointerover",y,!0),n.globalThis.addEventListener("pointerup",p,!0),n.globalThis.addEventListener("pointercancel",T,!0)},N=function(ne){ne.addEventListener("touchstart",v,!0),ne.addEventListener("touchend",p,!0),ne.addEventListener("touchmove",h,!0),ne.addEventListener("touchcancel",T,!0)},z=function(ne){n.globalThis.document.addEventListener("mousemove",h,!0),ne.addEventListener("mousedown",v,!0),ne.addEventListener("mouseout",b,!0),ne.addEventListener("mouseover",y,!0),n.globalThis.addEventListener("mouseup",p,!0)},H=function(ne){n.globalThis.document.removeEventListener("pointermove",h,!0),ne.removeEventListener("pointerdown",v,!0),ne.removeEventListener("pointerleave",b,!0),ne.removeEventListener("pointerover",y,!0),n.globalThis.removeEventListener("pointerup",p,!0)},X=function(ne){ne.removeEventListener("touchstart",v,!0),ne.removeEventListener("touchend",p,!0),ne.removeEventListener("touchmove",h,!0),ne.removeEventListener("touchcancel",T,!0)},Y=function(ne){n.globalThis.document.removeEventListener("mousemove",h,!0),ne.removeEventListener("mousedown",v,!0),ne.removeEventListener("mouseout",b,!0),ne.removeEventListener("mouseover",y,!0),n.globalThis.removeEventListener("mouseup",p,!0)};i.hooks.init.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="none",ne.style.msTouchAction="none"):c.supportsPointerEvents&&(ne.style.touchAction="none"),c.supportsPointerEvents?I(ne):z(ne),c.supportsTouchEvents&&N(ne),l.useNativeClickEvent&&ne.addEventListener("click",R,!0),ne.addEventListener("wheel",M,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="",ne.style.msTouchAction=""):c.supportsPointerEvents&&(ne.style.touchAction=""),c.supportsPointerEvents?H(ne):Y(ne),c.supportsTouchEvents&&X(ne),l.useNativeClickEvent&&ne.removeEventListener("click",R,!0),ne.removeEventListener("wheel",M,!0)})},e.tag="DOMInteraction",e}(),Pw=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new W3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Mp),W_="g-canvas-camera",Z3=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,s=t.renderingContext,l=t.renderingService;this.context=t;var c=s.root.ownerDocument.defaultView,h=c.context.eventService.nativeHTMLMap,p=function(R,I){I.style.transform=r.joinTransformMatrix(R.getWorldTransform())},v=function(R){var I=R.target;if(I.nodeName===ui.HTML){r.$camera||(r.$camera=r.createCamera(i));var N=r.getOrCreateEl(I);if(r.$camera.appendChild(N),n.enableCSSParsing){var z=I.ownerDocument.documentElement.attributes;Object.keys(z).forEach(function(H){N.style[H]=z[H]})}Object.keys(I.attributes).forEach(function(H){r.updateAttribute(H,I)}),p(I,N),h.set(N,I)}},y=function(R){var I=R.target;if(I.nodeName===ui.HTML&&r.$camera){var N=r.getOrCreateEl(I);N&&(N.remove(),h.delete(N))}},b=function(R){var I=R.target;if(I.nodeName===ui.HTML){var N=R.attrName;r.updateAttribute(N,I)}},T=function(R){var I=R.target;if(I.nodeName===ui.HTML){var N=r.getOrCreateEl(I);p(I,N)}},M=function(){if(r.$camera){var R=r.context.config,I=R.width,N=R.height;r.$camera.style.width="".concat(I||0,"px"),r.$camera.style.height="".concat(N||0,"px")}};l.hooks.init.tap(e.tag,function(){c.addEventListener(ld.RESIZE,M),c.addEventListener(Ba.MOUNTED,v),c.addEventListener(Ba.UNMOUNTED,y),c.addEventListener(Ba.ATTR_MODIFIED,b),c.addEventListener(Ba.BOUNDS_CHANGED,T)}),l.hooks.endFrame.tap(e.tag,function(){r.$camera&&s.renderReasons.has(Ev.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),l.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),c.removeEventListener(ld.RESIZE,M),c.removeEventListener(Ba.MOUNTED,v),c.removeEventListener(Ba.UNMOUNTED,y),c.removeEventListener(Ba.ATTR_MODIFIED,b),c.removeEventListener(Ba.BOUNDS_CHANGED,T)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,s=n.height,l=this.context.contextService.getDomElement(),c=l.parentNode;if(c){var h=W_,p=c.querySelector("#"+h);if(!p){var v=(r||document).createElement("div");p=v,v.id=h,v.style.position="absolute",v.style.left="".concat(l.offsetLeft||0,"px"),v.style.top="".concat(l.offsetTop||0,"px"),v.style.transformOrigin="left top",v.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),v.style.overflow="hidden",v.style.pointerEvents="none",v.style.width="".concat(i||0,"px"),v.style.height="".concat(s||0,"px"),c.appendChild(v)}return p}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;u(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(s[0].value," ").concat(s[1].value);break;case"width":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("width");r.style.width=l.toString()}else{var l=n.parsedStyle.width;r.style.width=(0,Yl.Z)(l)?"".concat(l,"px"):l.toString()}break;case"height":if(this.context.enableCSSParsing){var c=n.computedStyleMap().get("height");r.style.height=c.toString()}else{var c=n.parsedStyle.height;r.style.height=(0,Yl.Z)(c)?"".concat(c,"px"):c.toString()}break;case"zIndex":var h=n.parsedStyle.zIndex;r.style["z-index"]="".concat(h);break;case"visibility":var p=n.parsedStyle.visibility;r.style.visibility=p;break;case"pointerEvents":var v=n.parsedStyle.pointerEvents,y=v===void 0?"auto":v;r.style.pointerEvents=y;break;case"opacity":var b=n.parsedStyle.opacity;r.style.opacity="".concat(b);break;case"fill":var T=n.parsedStyle.fill,M="";C_(T)?T.isNone?M="transparent":M=n.getAttribute("fill"):Array.isArray(T)?M=n.getAttribute("fill"):A_(T),r.style.background=M;break;case"stroke":var R=n.parsedStyle.stroke,I="";C_(R)?R.isNone?I="transparent":I=n.getAttribute("stroke"):Array.isArray(R)?I=n.getAttribute("stroke"):A_(R),r.style["border-color"]=I,r.style["border-style"]="solid";break;case"lineWidth":var N=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(N||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var z=n.style.filter;r.style.filter=z;break;default:!(0,Sa.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),X3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new Z3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Mp),Y3=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,s){var l;r?l=r(t):Y1&&(l=new window.Image),l&&(l.onload=function(){n.imageCache[t]=l,i(l)},l.onerror=function(c){s(c)},l.crossOrigin="Anonymous",l.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,s,l){var c=this.generatePatternKey(t);if(c&&this.patternCache[c])return this.patternCache[c];var h=t.image,p=t.repetition,v=t.transform,y,b=!1;u(h)?y=this.getImageSync(h,l):r?(y=r,b=!0):y=h;var T=y&&n.createPattern(y,p);if(T){var M=void 0;v?M=Rc(Zx(v),new Mf({})):M=Qr.identity(Qr.create()),b&&Qr.scale(M,M,[1/i,1/i,1]),T.setTransform({a:M[0],b:M[1],c:M[4],d:M[5],e:M[12]+s[0],f:M[13]+s[1]})}return c&&T&&(this.patternCache[c]=T),T},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,s=t.steps,l=t.min,c=t.width,h=t.height,p=t.angle,v=t.cx,y=t.cy,b=t.size;if(this.gradientCache[r])return this.gradientCache[r];var T=null;if(i===B0.LinearGradient){var M=NC(l,c,h,p),R=M.x1,I=M.y1,N=M.x2,z=M.y2;T=n.createLinearGradient(R,I,N,z)}else if(i===B0.RadialGradient){var H=pS(l,c,h,v,y,b),X=H.x,Y=H.y,ne=H.r;T=n.createRadialGradient(X,Y,0,X,Y,ne)}return T&&(s.forEach(function(ve){var ye=ve.offset,De=ve.color;ye.unit===qi.kPercentage&&(T==null||T.addColorStop(ye.value/100,De.toString()))}),this.gradientCache[r]=T),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.min,i=t.width,s=t.height,l=t.steps,c=t.angle,h=t.cx,p=t.cy,v=t.size;return"gradient-".concat(n,"-").concat((c==null?void 0:c.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(s,"-").concat(l.map(function(y){var b=y.offset,T=y.color;return"".concat(b).concat(T)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(u(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),$3=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,s=r.root.ownerDocument.defaultView,l=function(p,v,y){var b=p.parsedStyle,T=b.width,M=b.height;T&&!M?p.setAttribute("height",y/v*T):!T&&M&&p.setAttribute("width",v/y*M)},c=function(p){var v=p.target,y=v.nodeName,b=v.attributes;if(y===ui.IMAGE){var T=b.src,M=b.keepAspectRatio;u(T)&&i.getImageSync(T,function(R){var I=R.width,N=R.height;M&&l(v,I,N),v.renderable.dirty=!0,n.dirtify()})}},h=function(p){var v=p.target,y=p.attrName,b=p.newValue;v.nodeName===ui.IMAGE&&y==="src"&&u(b)&&i.getOrCreateImage(b).then(function(T){var M=T.width,R=T.height;v.attributes.keepAspectRatio&&l(v,M,R),v.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){s.addEventListener(Ba.MOUNTED,c),s.addEventListener(Ba.ATTR_MODIFIED,h)}),n.hooks.destroy.tap(e.tag,function(){s.removeEventListener(Ba.MOUNTED,c),s.removeEventListener(Ba.ATTR_MODIFIED,h)})},e.tag="LoadImage",e}(),q3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new Y3(this.context.config),this.addRenderingPlugin(new $3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Mp),m2=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=u(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||Y1&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,TO(this.$canvas,t,n)),this.renderingContext.renderReasons.add(Ev.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,se.mG)(this,void 0,void 0,function(){var n,r;return(0,se.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),K3=function(e){(0,se.ZT)(t,e);function t(){var n=e.apply(this,(0,se.ev)([],(0,se.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=m2},t.prototype.destroy=function(){delete this.context.ContextService},t}(Mp),Iw=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new K3),r.registerPlugin(new q3),r.registerPlugin(new O3),r.registerPlugin(new G3),r.registerPlugin(new Pw),r.registerPlugin(new Ow),r.registerPlugin(new X3),r}return t}(x_),xb=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=i.root.ownerDocument,l=s.defaultView,c=function(h){var p=h.target,v=p===s,y=v&&n.dragndropPluginOptions.isDocumentDraggable?s:p.closest&&p.closest("[draggable=true]");if(y){var b=!1,T=h.timeStamp,M=[h.clientX,h.clientY],R=null,I=[h.clientX,h.clientY],N=function(H){return(0,se.mG)(n,void 0,void 0,function(){var X,Y,ne,ve,ye,De;return(0,se.Jh)(this,function(Ye){switch(Ye.label){case 0:if(!b){if(X=H.timeStamp-T,Y=tl([H.clientX,H.clientY],M),X<=this.dragndropPluginOptions.dragstartTimeThreshold||Y<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];H.type="dragstart",y.dispatchEvent(H),b=!0}return H.type="drag",H.dx=H.clientX-I[0],H.dy=H.clientY-I[1],y.dispatchEvent(H),I=[H.clientX,H.clientY],v?[3,2]:(ne=this.dragndropPluginOptions.overlap==="pointer"?[H.canvasX,H.canvasY]:p.getBounds().center,[4,s.elementsFromPoint(ne[0],ne[1])]);case 1:ve=Ye.sent(),ye=ve[ve.indexOf(p)+1],De=(ye==null?void 0:ye.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?s:null),R!==De&&(R&&(H.type="dragleave",H.target=R,R.dispatchEvent(H)),De&&(H.type="dragenter",H.target=De,De.dispatchEvent(H)),R=De,R&&(H.type="dragover",H.target=R,R.dispatchEvent(H))),Ye.label=2;case 2:return[2]}})})};l.addEventListener("pointermove",N);var z=function(H){if(b){H.detail={preventClick:!0};var X=H.clone();R&&(X.type="drop",X.target=R,R.dispatchEvent(X)),X.type="dragend",y.dispatchEvent(X),b=!1}l.removeEventListener("pointermove",N)};p.addEventListener("pointerup",z,{once:!0}),p.addEventListener("pointerupoutside",z,{once:!0})}};r.hooks.init.tap(e.tag,function(){l.addEventListener("pointerdown",c)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener("pointerdown",c)})},e.tag="Dragndrop",e}(),Dw=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new xb((0,se.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(Mp);function Q3(e,t,n){var r;return function(){var i=this,s=arguments,l=function(){r=null,n||e.apply(i,s)},c=n&&!r;clearTimeout(r),r=setTimeout(l,t),c&&e.apply(i,s)}}var Lw=Q3,Nw=function(e){return typeof e=="object"&&e!==null},g2=Nw,J3=function(e){if(!g2(e)||!(0,Ym.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Z0=J3,Eb=5;function My(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function Fw(e,t,n,r){n=n||0,r=r||Eb;for(var i in t)if(My(t,i)){var s=t[i];s!==null&&Z0(s)?(Z0(e[i])||(e[i]={}),n<r?Fw(e[i],s,n+1,r):e[i]=t[i]):Vo(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var eM=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)Fw(e,t[r]);return e},Jr=eM;class tM extends Map{constructor(t,n=Bw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(rl(this,t))}has(t){return super.has(rl(this,t))}set(t,n){return super.set(y2(this,t),n)}delete(t){return super.delete(_2(this,t))}}class a4 extends null{constructor(t,n=Bw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(rl(this,t))}add(t){return super.add(y2(this,t))}delete(t){return super.delete(_2(this,t))}}function rl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function y2({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _2({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Bw(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vm(e){return e}function Mu(e,...t){return Eg(e,vm,vm,t)}function Sb(e,...t){return Eg(e,Array.from,vm,t)}function kw(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([s,l])=>[...i,s,l]));return e}function s4(e,...t){return kw(Sb(e,...t),t)}function l4(e,t,...n){return kw(x2(e,t,...n),n)}function b2(e,t,...n){return Eg(e,vm,t,n)}function x2(e,t,...n){return Eg(e,Array.from,t,n)}function u4(e,...t){return Eg(e,identity,zw,t)}function c4(e,...t){return Eg(e,Array.from,zw,t)}function zw(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Eg(e,t,n,r){return function i(s,l){if(l>=r.length)return n(s);const c=new tM,h=r[l++];let p=-1;for(const v of s){const y=h(v,++p,s),b=c.get(y);b?b.push(v):c.set(y,[v])}for(const[v,y]of c)c.set(v,i(y,l));return t(c)}(e,0)}var E2=function(e){return(0,Sa.Z)(e)?"":e.toString()},Uw=function(e){var t=E2(e);return t.charAt(0).toLowerCase()+t.substring(1)},jw=Uw,nM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function Sg(e){return e}function wb(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),Sg)}function rM(e){return e.reduce((t,n)=>r=>nM(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),Sg)}function S2(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function wg(e=""){throw new Error(e)}function Mv(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,s]of Object.entries(n))r.has(i)||e.attr(i,s)}function su(e){return e!=null&&!Number.isNaN(e)}function f4(e,t){return e+(t-e)*Math.random()}function iM(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function oM(e,t){const{transform:n}=e.style,i=(s=>s==="none"||s===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function bo(e,t){return Tb(e,t)||{}}function Tb(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[jw(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function w2(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function aM(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function Z_(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function Vw(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function Ry(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function Rv(e){return e===null||e===!1}function Hw(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const s=t[i];!Z0(s)||!Z0(e[i])?e[i]=s:Hw(e[i],s,n,r+1)}return e}}function Ta(e){return new Pc([e],null,e,e.ownerDocument)}class Pc{constructor(t=null,n=null,r=null,i=null,s=[null,null,null,null,null],l=[],c=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=c}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Pc(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new Pc(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new Pc([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const s=this._data[i],[l,c]=Array.isArray(s)?s:[s,null],h=n(l,i);h.__data__=l,c!==null&&(h.__fromElements__=c),this._parent.appendChild(h),r.push(h)}return new Pc(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const s=this._elements[i],l=s.__data__,c=n(l,i);s.appendChild(c),r.push(c)}return new Pc(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],s=i.getElementById(t);if(s)return new Pc([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=t,r&&(l.className=r),i.appendChild(l),new Pc([l],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],s=[],l=new Set(this._elements),c=[],h=new Set,p=new Map(this._elements.map((T,M)=>[n(T.__data__,M),T])),v=new Map(this._facetElements.map((T,M)=>[n(T.__data__,M),T])),y=Mu(this._elements,T=>r(T.__data__));for(let T=0;T<t.length;T++){const M=t[T],R=n(M,T),I=r(M,T);if(p.has(R)){const N=p.get(R);N.__data__=M,N.__facet__=!1,s.push(N),l.delete(N),p.delete(R)}else if(v.has(R)){const N=v.get(R);N.__data__=M,N.__facet__=!0,s.push(N),v.delete(R)}else if(y.has(R)){const N=y.get(R);c.push([M,N]);for(const z of N)l.delete(z);y.delete(R)}else if(p.has(I)){const N=p.get(I);N.__toData__?N.__toData__.push(M):N.__toData__=[M],h.add(N),l.delete(N)}else i.push(M)}const b=[new Pc([],i,this._parent,this._document),new Pc(s,null,this._parent,this._document),new Pc(l,null,this._parent,this._document),new Pc([],c,this._parent,this._document),new Pc(h,null,this._parent,this._document)];return new Pc(this._elements,null,this._parent,this._document,b)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new Pc(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=Pc.registry[t];return n?new n:wg(`Unknown node type: ${t}`)}join(t=l=>l,n=l=>l,r=l=>l.remove(),i=l=>l,s=l=>l.remove()){const l=t(this._enter),c=n(this._update),h=r(this._exit),p=i(this._merge),v=s(this._split);return c.merge(l).merge(h).merge(p).merge(v)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new Pc([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l[t]=r(i,s,l))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l.style[t]=r(i,s,l))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,s,l){r[s]=n(i,s,l)})}on(t,n){return this.each(function(r,i,s){s.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Pc.registry={g:Xc,rect:Ip,circle:_g,path:ad,text:sd,ellipse:a2,image:s2,line:J1,polygon:Ey,polyline:H0,html:V0};const Dl={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var Gw=function(e){var t=E2(e);return t.charAt(0).toUpperCase()+t.substring(1)},mm=Gw;function sM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function lM(e){return e=gm(Math.abs(e)),e?e[1]:NaN}function h4(e,t){return function(n,r){for(var i=n.length,s=[],l=0,c=e[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),s.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=e[l=(l+1)%e.length];return s.reverse().join(t)}}function a(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function f(e){if(!(t=o.exec(e)))throw new Error("invalid format: "+e);var t;return new m({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}f.prototype=m.prototype;function m(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}m.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var C;function D(e,t){var n=gm(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(C=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+gm(e,Math.max(0,t+s-1))[0]}function B(e,t){var n=gm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var V={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>B(e*100,t),r:B,s:D,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ie(e){return e}var Ee=Array.prototype.map,Ce=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function He(e){var t=e.grouping===void 0||e.thousands===void 0?ie:h4(Ee.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ie:a(Ee.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(y){y=f(y);var b=y.fill,T=y.align,M=y.sign,R=y.symbol,I=y.zero,N=y.width,z=y.comma,H=y.precision,X=y.trim,Y=y.type;Y==="n"?(z=!0,Y="g"):V[Y]||(H===void 0&&(H=12),X=!0,Y="g"),(I||b==="0"&&T==="=")&&(I=!0,b="0",T="=");var ne=R==="$"?n:R==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",ve=R==="$"?r:/[%p]/.test(Y)?l:"",ye=V[Y],De=/[defgprs%]/.test(Y);H=H===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function Ye(Qe){var yt=ne,qe=ve,ut,ft,mt;if(Y==="c")qe=ye(Qe)+qe,Qe="";else{Qe=+Qe;var Xt=Qe<0||1/Qe<0;if(Qe=isNaN(Qe)?h:ye(Math.abs(Qe),H),X&&(Qe=w(Qe)),Xt&&+Qe==0&&M!=="+"&&(Xt=!1),yt=(Xt?M==="("?M:c:M==="-"||M==="("?"":M)+yt,qe=(Y==="s"?Ce[8+C/3]:"")+qe+(Xt&&M==="("?")":""),De){for(ut=-1,ft=Qe.length;++ut<ft;)if(mt=Qe.charCodeAt(ut),48>mt||mt>57){qe=(mt===46?i+Qe.slice(ut+1):Qe.slice(ut))+qe,Qe=Qe.slice(0,ut);break}}}z&&!I&&(Qe=t(Qe,1/0));var Mt=yt.length+Qe.length+qe.length,kt=Mt<N?new Array(N-Mt+1).join(b):"";switch(z&&I&&(Qe=t(kt+Qe,kt.length?N-qe.length:1/0),kt=""),T){case"<":Qe=yt+Qe+qe+kt;break;case"=":Qe=yt+kt+Qe+qe;break;case"^":Qe=kt.slice(0,Mt=kt.length>>1)+yt+Qe+qe+kt.slice(Mt);break;default:Qe=kt+yt+Qe+qe;break}return s(Qe)}return Ye.toString=function(){return y+""},Ye}function v(y,b){var T=p((y=f(y),y.type="f",y)),M=Math.max(-8,Math.min(8,Math.floor(lM(b)/3)))*3,R=Math.pow(10,-M),I=Ce[8+M/3];return function(N){return T(R*N)+I}}return{format:p,formatPrefix:v}}var Ot,nn,Bn;sr({thousands:",",grouping:[3],currency:["$",""]});function sr(e){return Ot=He(e),nn=Ot.format,Bn=Ot.formatPrefix,Ot}function xr(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function fr(e){return e.map((t,n)=>n)}function Yr(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let s=0;s<t;s++)r[i][s]=e[s][i];return r}function Pi(e){return e[0]}function Co(e){return e[e.length-1]}function ao(e){return!e.some(Array.isArray)}function Zr(e){return Array.from(new Set(e))}function Qi(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function Ma(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);Ma(i,t-1).forEach(l=>{n.push([e[r],...l])})}return n}function Ms(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...Ma(e,n));return t}var na=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},Qa=na,Ws=function(e,t){if(e===t)return!0;if(!e||!t||u(e)||u(t))return!1;if(Qa(e)||Qa(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Ws(e[r],t[r]),!!n);r++);return n}if(g2(e)||g2(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=Ws(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},lh=Ws;function ku(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function vs(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Tg(e){return e*Math.PI/180}function Ag(e){return e*180/Math.PI}function qd(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const Py=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),qd(n.startAngle,n.endAngle))},X_=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Py(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};X_.props={};const Ww=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},T2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Ww(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...X_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};T2.props={};function Ab(e,t,n){return Math.max(t,Math.min(e,n))}function Cb(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const uM=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var Zw=L(17816);function Ru(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function _o(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function ks(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function El(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function uo(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function Ch(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function Pu(e){return uo(e)&&_o(e)}function Pf(e){return El(e)||_o(e)}function fd(e){return _o(e)&&Ru(e)}function Iy(e){return _o(e)||uo(e)||ks(e)||fd(e)}function Xw(e){if(Pf(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function Yw(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function cM(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(s=>s[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function xj(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function d4(e,t){t(e),e.children&&e.children.forEach(function(n){n&&d4(n,t)})}function A2(e){$w(e,!0)}function Dy(e){$w(e,!1)}function $w(e,t){var n=t?"visible":"hidden";d4(e,function(r){r.attr("visibility",n)})}function Ej(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function p4(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,se.CR)(r,1),s=i[0];return!t.includes(s)}));return Object.fromEntries(t.map(function(r){return Ej(e)?e[r]===!1?[r,!1]:[r,(0,se.pi)((0,se.pi)({},e[r]),n)]:[r,n]}))}function Ob(e,t){e?e.finished.then(t):t()}function Sj(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function v4(e,t){"update"in e?e.update(t):e.attr(t)}function m4(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return v4(e,{style:r}),null}return e.animate(t,n)}function wj(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function Tj(e,t,n,r){if(r===void 0&&(r="destroy"),wj(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&Dy(e),t.isVisible()&&A2(t)};if(!n)return i(),[null];var s=n.duration,l=s===void 0?0:s,c=n.delay,h=c===void 0?0:c,p=Math.ceil(+l/2),v=+l/4,y=(0,se.CR)(e.getGeometryBounds().center,2),b=y[0],T=y[1],M=(0,se.CR)(t.getGeometryBounds().center,2),R=M[0],I=M[1],N=(0,se.CR)([(b+R)/2-b,(T+I)/2-T],2),z=N[0],H=N[1],X=e.style.opacity,Y=X===void 0?1:X,ne=t.style.opacity,ve=ne===void 0?1:ne,ye=e.style.transform||"",De=t.style.transform||"",Ye=e.animate([{opacity:Y,transform:"translate(0, 0) ".concat(ye)},{opacity:0,transform:"translate(".concat(z,", ").concat(H,") ").concat(ye)}],(0,se.pi)((0,se.pi)({fill:"both"},n),{duration:h+p+v})),Qe=t.animate([{opacity:0,transform:"translate(".concat(-z,", ").concat(-H,") ").concat(De),offset:.01},{opacity:ve,transform:"translate(0, 0) ".concat(De)}],(0,se.pi)((0,se.pi)({fill:"both"},n),{duration:p+v,delay:h+p-v}));return Ob(Qe,i),[Ye,Qe]}function Pv(e,t,n){var r={},i={};return Object.entries(t).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];if(!(0,Sa.Z)(h)){var p=e.style[c]||e.parsedStyle[c]||0;p!==h&&(r[c]=p,i[c]=h)}}),n?m4(e,[r,i],(0,se.pi)({fill:"both"},n)):(v4(e,i),null)}var Aj=5,g4=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=Aj),Object.entries(t).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=e;Object.prototype.hasOwnProperty.call(t,l)&&(c?Z0(c)?(Z0(e[l])||(h[l]={}),n<r?g4(e[l],c,n+1,r):h[l]=t[l]):Vo(c)?(h[l]=[],h[l]=h[l].concat(c)):h[l]=c:h[l]=c)})},Cg=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)g4(e,t[r]);return e},Cj=function(e){(0,se.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,se.ev)([],(0,se.CR)(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Ba.INSERTED,function(){Dy(i)}),i}return t}(Xc);function y4(e){var t=e.appendChild(new Cj({class:"offscreen"}));return Dy(t),t}function Oj(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function Mj(){$w(this,this.attributes.visibility!=="hidden")}var uh=function(e){(0,se.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,Cg({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=y4(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&Mj.call(this)},t.prototype.update=function(n,r){var i;return this.attr(Cg({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,s=n.transform,l=n.transformOrigin,c=n.class,h=n.className,p=n.zIndex,v=(0,se._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return v},t}(wv);function Np(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(s){s.node().removeChildren()}),e?n(t):(r&&i(t),null)}function Rj(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var fM=function(e){(0,se.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,se._T)(n,["style"]);return e.call(this,(0,se.pi)({style:(0,se.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=y4(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(sd);function Pj(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function Ij(e){throw new Error(e)}var Dj=function(){function e(i,s,l,c,h,p,v){i===void 0&&(i=null),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=null),h===void 0&&(h=[null,null,null,null,null]),p===void 0&&(p=[]),v===void 0&&(v=[]),t.add(this),this._elements=Array.from(i),this._data=s,this._parent=l,this._document=c,this._enter=h[0],this._update=h[1],this._exit=h[2],this._merge=h[3],this._split=h[4],this._transitions=p,this._facetElements=v}e.prototype.selectAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(s,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},e.prototype.select=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([s],null,s,this._document)},e.prototype.append=function(i){var s=this,l=typeof i=="function"?i:function(){return s.createElement(i)},c=[];if(this._data!==null){for(var h=0;h<this._data.length;h++){var p=this._data[h],v=(0,se.CR)(Array.isArray(p)?p:[p,null],2),y=v[0],b=v[1],T=l(y,h);T.__data__=y,b!==null&&(T.__fromElements__=b),this._parent.appendChild(T),c.push(T)}return new n(c,null,this._parent,this._document)}for(var h=0;h<this._elements.length;h++){var M=this._elements[h],y=M.__data__,T=l(y,h);M.appendChild(T),c.push(T)}return new n(c,null,c[0],this._document)},e.prototype.maybeAppend=function(i,s){var l=(0,se.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),s);return l.attr("id",i),l},e.prototype.maybeAppendByClassName=function(i,s){var l=i.toString(),c=(0,se.Q_)(this,t,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return c.attr("className",l),c},e.prototype.maybeAppendByName=function(i,s){var l=(0,se.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),s);return l.attr("name",i),l},e.prototype.data=function(i,s,l){var c,h;s===void 0&&(s=function(Ye){return Ye}),l===void 0&&(l=function(){return null});for(var p=[],v=[],y=new Set(this._elements),b=[],T=new Set,M=new Map(this._elements.map(function(Ye,Qe){return[s(Ye.__data__,Qe),Ye]})),R=new Map(this._facetElements.map(function(Ye,Qe){return[s(Ye.__data__,Qe),Ye]})),I=Pj(this._elements,function(Ye){return l(Ye.__data__)}),N=0;N<i.length;N++){var z=i[N],H=s(z,N),X=l(z,N);if(M.has(H)){var Y=M.get(H);Y.__data__=z,Y.__facet__=!1,v.push(Y),y.delete(Y),M.delete(H)}else if(R.has(H)){var Y=R.get(H);Y.__data__=z,Y.__facet__=!0,v.push(Y),R.delete(H)}else if(I.has(H)){var ne=I.get(H);b.push([z,ne]);try{for(var ve=(c=void 0,(0,se.XA)(ne)),ye=ve.next();!ye.done;ye=ve.next()){var Y=ye.value;y.delete(Y)}}catch(Ye){c={error:Ye}}finally{try{ye&&!ye.done&&(h=ve.return)&&h.call(ve)}finally{if(c)throw c.error}}I.delete(H)}else if(M.has(X)){var Y=M.get(X);Y.__toData__?Y.__toData__.push(z):Y.__toData__=[z],T.add(Y),y.delete(Y)}else p.push(z)}var De=[new n([],p,this._parent,this._document),new n(v,null,this._parent,this._document),new n(y,null,this._parent,this._document),new n([],b,this._parent,this._document),new n(T,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,De)},e.prototype.merge=function(i){var s=(0,se.ev)((0,se.ev)([],(0,se.CR)(this._elements),!1),(0,se.CR)(i._elements),!1),l=(0,se.ev)((0,se.ev)([],(0,se.CR)(this._transitions),!1),(0,se.CR)(i._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var s=n.registry[i];return s?new s:Ij("Unknown node type: ".concat(i))},e.prototype.join=function(i,s,l,c,h){i===void 0&&(i=function(M){return M}),s===void 0&&(s=function(M){return M}),l===void 0&&(l=function(M){return M.remove()}),c===void 0&&(c=function(M){return M}),h===void 0&&(h=function(M){return M.remove()});var p=i(this._enter),v=s(this._update),y=l(this._exit),b=c(this._merge),T=h(this._split);return v.merge(p).merge(y).merge(b).merge(T)},e.prototype.remove=function(){for(var i=function(c){var h=s._elements[c],p=s._transitions[c];p?p.then(function(){return h.remove()}):h.remove()},s=this,l=0;l<this._elements.length;l++)i(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],c=l.__data__;i.call(l,c,s)}return this},e.prototype.attr=function(i,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(c,h){s!==void 0&&(this[i]=l.call(this,c,h))})},e.prototype.style=function(i,s,l){l===void 0&&(l=!0);var c=typeof s!="function"||!l?function(){return s}:s;return this.each(function(h,p){s!==void 0&&(this.style[i]=c.call(this,h,p))})},e.prototype.styles=function(i,s){return i===void 0&&(i={}),s===void 0&&(s=!0),this.each(function(l,c){var h=this;Object.entries(i).forEach(function(p){var v=(0,se.CR)(p,2),y=v[0],b=v[1],T=typeof b!="function"||!s?function(){return b}:b;b!==void 0&&h.attr(y,T.call(h,l,c))})})},e.prototype.update=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.maybeUpdate=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.transition=function(i){var s=this._transitions;return this.each(function(l,c){s[c]=i.call(this,l,c)})},e.prototype.on=function(i,s){return this.each(function(){this.addEventListener(i,s)}),this},e.prototype.call=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.call.apply(i,(0,se.ev)([this._parent,this],(0,se.CR)(s),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(s,l){var c=this._elements[0],h=c.querySelector(s);if(h)return new n([h],null,this._parent,this._document);var p=typeof l=="string"?this.createElement(l):l();return c.appendChild(p),new n([p],null,this._parent,this._document)},e.registry={g:Xc,rect:Ip,circle:_g,path:ad,text:fM,ellipse:a2,image:s2,line:J1,polygon:Ey,polyline:H0,html:V0},e}();function hs(e){return new Dj([e],null,e,e.ownerDocument)}function Lj(e,t,n){return e.querySelector(t)?hs(e).select(t):hs(e).append(n)}var X0=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=n(c);return[l,{name:h,class:".".concat(h),id:"#".concat(h),toString:function(){return h}}]}));return Object.assign(r,{prefix:n}),r},hM={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new ad({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},Ede=Jr({},hM,{style:{type:"arc"}}),Sde=Jr({},hM,{style:{}}),lu=X0({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),Kd=function(e){return typeof e=="function"};function Og(e,t){return[e[0]*t,e[1]*t]}function C2(e,t){return[e[0]+t[0],e[1]+t[1]]}function dM(e,t){return[e[0]-t[0],e[1]-t[1]]}function Y_(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function $_(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function O2(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function _4(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function wde(e,t,n){var r=__read(e,2),i=r[0],s=r[1],l=__read(t,2),c=l[0],h=l[1],p=i-c,v=s-h,y=Math.sin(n),b=Math.cos(n);return[p*b-v*y+c,p*y+v*b+h]}function Nj(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function Mb(e){return e*Math.PI/180}function b4(e){return Number((e*180/Math.PI).toPrecision(5))}function pM(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function Fj(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function Bj(e,t){return"".concat(t).concat(pM(e))}function x4(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=e.replace(new RegExp("^(".concat(i,")")),"");return n?Fj(s):s}function kj(e,t){Object.entries(t).forEach(function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1];(0,se.ev)([e],(0,se.CR)(e.querySelectorAll(i)),!1).filter(function(l){return l.matches(i)}).forEach(function(l){if(l){var c=l;c.style.cssText+=Object.entries(s).reduce(function(h,p){return"".concat(h).concat(p.join(":"),";")},"")}})})}var qw=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function Vs(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];if(!(l==="className"||l==="class")){if(qw(l,"show")&&qw(x4(l,"show"),t)!==n)l===Bj(t,"show")?r[l]=c:r[l.replace(new RegExp(pM(t)),"")]=c;else if(!qw(l,"show")&&qw(l,t)!==n){var h=x4(l,t);h==="filter"&&typeof c=="function"||(r[h]=c)}}}),r}function ym(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,se.CR)(r,2),s=i[0],l=i[1];return s.startsWith("show")?n["show".concat(t).concat(s.slice(4))]=l:n["".concat(t).concat(pM(s))]=l,n},{})}function Mg(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];t.includes(c)||(n.indexOf(c)!==-1?i[c]=h:r[c]=h)}),[r,i]}function Y0(e,t){return Kd(e)?e.apply(void 0,(0,se.ev)([],(0,se.CR)(t),!1)):e}function Kw(e,t){return e.style.opacity||(e.style.opacity=1),Pv(e,{opacity:0},t)}var zj=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Uj(e){return zj.includes(e)}function E4(e){var t={};for(var n in e)Uj(n)&&(t[n]=e[n]);return t}var Rb=X0({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function S4(e){return e.reduce(function(t,n,r){return t.push((0,se.ev)([r===0?"M":"L"],(0,se.CR)(n),!1)),t},[])}function jj(e,t,n){var r=t.connect,i=r===void 0?"line":r,s=t.center;if(i==="line")return S4(e);if(!s)return[];var l=O2(e[0],s),c=n?0:1;return e.reduce(function(h,p,v){return v===0?h.push((0,se.ev)(["M"],(0,se.CR)(p),!1)):h.push((0,se.ev)(["A",l,l,0,0,c],(0,se.CR)(p),!1)),h},[])}function vM(e,t,n){return t.type==="surround"?jj(e,t,n):S4(e)}function Vj(e,t,n){var r=n.type,i=n.connect,s=n.center,l=n.closed,c=l?[["Z"]]:[],h=(0,se.CR)([vM(e,n),vM(t.slice().reverse(),n,!0)],2),p=h[0],v=h[1],y=(0,se.CR)([e[0],t.slice(-1)[0]],2),b=y[0],T=y[1],M=function(z,H){return[p,z,v,H,c].flat()};if(i==="line"||r==="surround")return M([(0,se.ev)(["L"],(0,se.CR)(T),!1)],[(0,se.ev)(["L"],(0,se.CR)(b),!1)]);if(!s)throw new Error("Arc grid need to specified center");var R=(0,se.CR)([O2(T,s),O2(b,s)],2),I=R[0],N=R[1];return M([(0,se.ev)(["A",I,I,0,0,1],(0,se.CR)(T),!1),(0,se.ev)(["L"],(0,se.CR)(T),!1)],[(0,se.ev)(["A",N,N,0,0,0],(0,se.CR)(b),!1),(0,se.ev)(["L"],(0,se.CR)(b),!1)])}function Hj(e,t,n,r){var i=n.animate,s=n.isBillboard,l=t.map(function(c,h){return{id:c.id||"grid-line-".concat(h),d:vM(c.points,n)}});return e.selectAll(Rb.line.class).data(l,function(c){return c.id}).join(function(c){return c.append("path").each(function(h,p){var v=Y0(E4((0,se.pi)({d:h.d},r)),[h,p,l]);this.attr((0,se.pi)({class:Rb.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},v))})},function(c){return c.transition(function(h,p){var v=Y0(E4((0,se.pi)({d:h.d},r)),[h,p,l]);return Pv(this,v,i.update)})},function(c){return c.transition(function(){var h=this,p=Kw(this,i.exit);return Ob(p,function(){return h.remove()}),p})}).transitions()}function Gj(e,t,n){var r=n.animate,i=n.connect,s=n.areaFill;if(t.length<2||!s||!i)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],c=function(M){return l[M%l.length]},h=[],p=0;p<t.length-1;p++){var v=(0,se.CR)([t[p].points,t[p+1].points],2),y=v[0],b=v[1],T=Vj(y,b,n);h.push({d:T,fill:c(p)})}return e.selectAll(Rb.region.class).data(h,function(M,R){return R}).join(function(M){return M.append("path").each(function(R,I){var N=Y0(R,[R,I,h]);this.attr(N)}).attr("className",Rb.region.name)},function(M){return M.transition(function(R,I){var N=Y0(R,[R,I,h]);return Pv(this,N,r.update)})},function(M){return M.transition(function(){var R=this,I=Kw(this,r.exit);return Ob(I,function(){return R.remove()}),I})}).transitions()}function Wj(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var s=i.points,l=(0,se.CR)(s,1),c=l[0];return(0,se.pi)((0,se.pi)({},i),{points:(0,se.ev)((0,se.ev)([],(0,se.CR)(s),!1),[c],!1)})}):n}var Zj=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,s=n.center,l=n.areaFill,c=n.closed,h=(0,se._T)(n,["type","center","areaFill","closed"]),p=Wj(n),v=hs(r).maybeAppendByClassName(Rb.lineGroup,"g"),y=hs(r).maybeAppendByClassName(Rb.regionGroup,"g"),b=Hj(v,p,n,h),T=Gj(y,p,n);return(0,se.ev)((0,se.ev)([],(0,se.CR)(b),!1),(0,se.CR)(T),!1)},t}(uh),hl=function(e,t,n){for(var r=0,i=u(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},Xj=function(e,t){return function(n){return e*(1-n)+t*n}};function Yj(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var s=new Array(r),l=new Array(n),c=0;for(c=0;c<r;++c)s[c]=mM(e[c],t[c]);for(;c<n;++c)l[c]=t[c];for(c=0;c<r;++c)l[c]=s[c](i);return l}}function $j(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var s=(0,se.CR)(i,2),l=s[0],c=s[1];l in e?n[l]=mM(e[l],c):r[l]=c}),function(i){return Object.entries(n).forEach(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];return r[c]=h(i)}),r}}function mM(e,t){return typeof e=="number"&&typeof t=="number"?Xj(e,t):Array.isArray(e)&&Array.isArray(t)?Yj(e,t):typeof e=="object"&&typeof t=="object"?$j(e,t):function(n){return e}}function qj(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,s=i===void 0?0:i,l=mM(t,n),c=Math.ceil(+s/16),h=new Array(c).fill(0).map(function(p,v,y){return{__keyframe_data__:l(v/(y.length-1))}});return e.animate(h,(0,se.pi)({fill:"both"},r))}function q_(e){return typeof e=="function"?e():u(e)||(0,Yl.Z)(e)?new fM({style:{text:String(e)}}):e}function gM(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,s=r.height,l=t/Math.max(i,s);return n&&(e.style.transform="scale(".concat(l,")")),l}function w4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function T4(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1];return[i,Y0(s,t)]}))}function Tde(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,s=e.center,l=e.radius;return __spreadArray(__spreadArray([r,i],__read(s),!1),[l],!1)}function yM(e,t){return t&&Kd(t)?e.filter(t):e}function A4(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function Qw(e,t){if(t.type==="linear"){var n=(0,se.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,se.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,se.CR)([l-r,c-i],2),p=h[0],v=h[1];return _4([p,v])}var y=Mb(A4(e,t));return[-Math.sin(y),Math.cos(y)]}function _M(e,t,n){var r=Qw(e,n);return Nj(r,t!=="positive")}function M2(e,t){return _M(e,t.labelDirection,t)}function Kj(e,t){var n=(0,se.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,se.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,se.CR)([l-r,c-i],2),p=h[0],v=h[1];return[r+p*e,i+v*e]}function Qj(e,t){var n=t.radius,r=(0,se.CR)(t.center,2),i=r[0],s=r[1],l=Mb(A4(e,t));return[i+n*Math.cos(l),s+n*Math.sin(l)]}function Jw(e,t){return t.type==="linear"?Kj(e,t):Qj(e,t)}function C4(e){return Qw(0,e)[1]===0}function O4(e){return Qw(0,e)[0]===0}function M4(e,t){return t-e===360}function R4(e,t,n,r,i){var s=t-e,l=(0,se.CR)([i,i],2),c=l[0],h=l[1],p=(0,se.CR)([Mb(e),Mb(t)],2),v=p[0],y=p[1],b=function(Ye){return[n+i*Math.cos(Ye),r+i*Math.sin(Ye)]},T=(0,se.CR)(b(v),2),M=T[0],R=T[1],I=(0,se.CR)(b(y),2),N=I[0],z=I[1];if(M4(e,t)){var H=(y+v)/2,X=(0,se.CR)(b(H),2),Y=X[0],ne=X[1];return[["M",M,R],["A",c,h,0,1,0,Y,ne],["A",c,h,0,1,0,N,z]]}var ve=s>180?1:0,ye=e>t?0:1,De=!1;return De?"M".concat(n,",").concat(r,",L").concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(ve,",").concat(ye,",").concat(N,",").concat(z,",L").concat(n,",").concat(r):"M".concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(ve,",").concat(ye,",").concat(N,",").concat(z)}function Jj(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,s=t.radius;return(0,se.ev)((0,se.ev)([n,r],(0,se.CR)(i),!1),[s],!1)}function eV(e,t,n,r){var i=t.startAngle,s=t.endAngle,l=t.center,c=t.radius;return e.selectAll(lu.line.class).data([{d:R4.apply(void 0,(0,se.ev)((0,se.ev)([i,s],(0,se.CR)(l),!1),[c],!1))}],function(h,p){return p}).join(function(h){return h.append("path").attr("className",lu.line.name).styles(t).styles({d:function(p){return p.d}})},function(h){return h.transition(function(){var p=this,v=qj(this,Jj(this),(0,se.ev)((0,se.ev)([i,s],(0,se.CR)(l),!1),[c],!1),r.update);if(v){var y=function(){var b=hl(p.attributes,"__keyframe_data__");p.style.d=R4.apply(void 0,(0,se.ev)([],(0,se.CR)(b),!1))};v.onframe=y,v.onfinish=y}return v}).styles(t)},function(h){return h.remove()}).styles(n).transitions()}function tV(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function nV(e,t,n){n===void 0&&(n=[0,0]);var r=(0,se.CR)([e,t,n],3),i=(0,se.CR)(r[0],2),s=i[0],l=i[1],c=(0,se.CR)(r[1],2),h=c[0],p=c[1],v=(0,se.CR)(r[2],2),y=v[0],b=v[1],T=(0,se.CR)([h-s,p-l],2),M=T[0],R=T[1],I=Math.sqrt(Math.pow(M,2)+Math.pow(R,2)),N=(0,se.CR)([-y/I,b/I],2),z=N[0],H=N[1];return[z*M,z*R,H*M,H*R]}function P4(e){var t=(0,se.CR)(e,2),n=(0,se.CR)(t[0],2),r=n[0],i=n[1],s=(0,se.CR)(t[1],2),l=s[0],c=s[1];return{x1:r,y1:i,x2:l,y2:c}}function rV(e,t,n,r){var i=t.showTrunc,s=t.startPos,l=t.endPos,c=t.truncRange,h=t.lineExtension,p=(0,se.CR)([s,l],2),v=(0,se.CR)(p[0],2),y=v[0],b=v[1],T=(0,se.CR)(p[1],2),M=T[0],R=T[1],I=(0,se.CR)(h?nV(s,l,h):new Array(4).fill(0),4),N=I[0],z=I[1],H=I[2],X=I[3],Y=function(Mt){return e.selectAll(lu.line.class).data(Mt,function(kt,Tn){return Tn}).join(function(kt){return kt.append("line").attr("className",function(Tn){return"".concat(lu.line.name," ").concat(Tn.className)}).styles(n).transition(function(Tn){return Pv(this,P4(Tn.line),!1)})},function(kt){return kt.styles(n).transition(function(Tn){var zn=Tn.line;return Pv(this,P4(zn),r.update)})},function(kt){return kt.remove()}).transitions()};if(!i||!c)return Y([{line:[[y+N,b+z],[M+H,R+X]],className:lu.line.name}]);var ne=(0,se.CR)(c,2),ve=ne[0],ye=ne[1],De=M-y,Ye=R-b,Qe=(0,se.CR)([y+De*ve,b+Ye*ve],2),yt=Qe[0],qe=Qe[1],ut=(0,se.CR)([y+De*ye,b+Ye*ye],2),ft=ut[0],mt=ut[1],Xt=Y([{line:[[y+N,b+z],[yt,qe]],className:lu.lineFirst.name},{line:[[ft,mt],[M+H,R+X]],className:lu.lineSecond.name}]);return tV(e,t),Xt}function iV(e,t,n,r){var i=n.showArrow,s=n.showTrunc,l=n.lineArrow,c=n.lineArrowOffset,h=n.lineArrowSize,p;if(t==="arc"?p=e.select(lu.line.class):s?p=e.select(lu.lineSecond.class):p=e.select(lu.line.class),!i||!l||n.type==="arc"&&M4(n.startAngle,n.endAngle)){var v=p.node();v&&(v.style.markerEnd=void 0);return}var y=q_(l);y.attr(r),gM(y,h,!0),p.style("markerEnd",y).style("markerEndOffset",-c)}function oV(e,t,n){var r=t.type,i,s=Vs(t,"line");return r==="linear"?i=rV(e,t,w4(s,"arrow"),n):i=eV(e,t,w4(s,"arrow"),n),iV(e,r,t,s),i}function aV(e,t){return _M(e,t.gridDirection,t)}function I4(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function sV(e,t){var n=t.gridLength;return e.map(function(r,i){var s=r.value,l=(0,se.CR)(Jw(s,t),2),c=l[0],h=l[1],p=(0,se.CR)(Og(aV(s,t),n),2),v=p[0],y=p[1];return{id:i,points:[[c,h],[c+v,h+y]]}})}function lV(e,t){var n=t.gridControlAngles,r=I4(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,se.CR)(r,2),s=i[0],l=i[1];return e.map(function(c,h){var p=c.value,v=(0,se.CR)(Jw(p,t),2),y=v[0],b=v[1],T=(0,se.CR)([y-s,b-l],2),M=T[0],R=T[1],I=[];return n.forEach(function(N){var z=Mb(N),H=(0,se.CR)([Math.cos(z),Math.sin(z)],2),X=H[0],Y=H[1],ne=M*X-R*Y+s,ve=M*Y+R*X+l;I.push([ne,ve])}),{points:I,id:h}})}function uV(e,t,n,r){var i=Vs(n,"grid"),s=i.type,l=i.areaFill,c=I4(n),h=yM(t,n.gridFilter),p=s==="segment"?sV(h,n):lV(h,n),v=(0,se.pi)((0,se.pi)({},i),{center:c,areaFill:Kd(l)?h.map(function(y,b){return Y0(l,[y,b,h])}):l,animate:r,data:p});return e.selectAll(lu.grid.class).data([1]).join(function(y){return y.append(function(){return new Zj({style:v})}).attr("className",lu.grid.name)},function(y){return y.transition(function(){return this.update(v)})},function(y){return y.remove()}).transitions()}function Oh(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function cV(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}var fV=function(e,t,n){if(n===void 0&&(n=128),!Kd(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=t?t.apply(this,i):i[0],c=r.cache;if(c.has(l))return c.get(l);var h=e.apply(this,i);return c.set(l,h),h};return r.cache=cV(n),r},eT,bM;function Ade(e){bM=e}var hV=fV(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return bM?bM(e,n):(eT||(eT=Kr.offscreenCanvasCreator.getOrCreateContext(void 0)),eT.font=[s,l,i,"".concat(n,"px"),r].join(" "),eT.measureText(e).width)},function(e,t){return[e,Object.values(t||D4(e)).join()].join("")},4096),D4=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,s=e.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function L4(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function N4(e,t){var n=L4(e);n&&n.attr(t)}function xM(e,t,n){n===void 0&&(n="..."),N4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function dV(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),N4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function pV(e,t,n){var r=e.getBBox(),i=r.width,s=r.height,l=(0,se.CR)([t,n].map(function(p,v){var y;return p.includes("%")?parseFloat(((y=p.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||y===void 0?void 0:y[0])||"0")/100*(v===0?i:s):p}),2),c=l[0],h=l[1];return[c,h]}function F4(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,s,l){return"translate(".concat(pV(e,s,l),")")});e.attr("transform",r)}catch(i){}}var B4=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function Mh(e){if((0,Yl.Z)(e))return[e,e,e,e];if(Vo(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var EM=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Math.cos(t),v=Math.sin(t),y=n-n*p+r*v,b=r-n*v-r*p,T=[[p*s-v*h+y,v*s+p*h+b],[p*c-v*h+y,v*c+p*h+b],[p*s-v*l+y,v*s+p*l+b],[p*c-v*l+y,v*c+p*l+b]];return T},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function tT(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=(0,se.CR)(r.min,2),s=i[0],l=i[1],c=(0,se.CR)(r.max,2),h=c[0],p=c[1],v=e.getBBox(),y=v.width,b=v.height,T=b,M=0,R=0,I=s,N=l,z=L4(e);if(z){T-=1.5;var H=z.style.textAlign,X=z.style.textBaseline;H==="center"?I=(s+h)/2:(H==="right"||H==="end")&&(I=h),X==="middle"?N=(l+p)/2:X==="bottom"&&(N=p)}var Y=(0,se.CR)(Mh(t),4),ne=Y[0],ve=ne===void 0?0:ne,ye=Y[1],De=ye===void 0?0:ye,Ye=Y[2],Qe=Ye===void 0?ve:Ye,yt=Y[3],qe=yt===void 0?De:yt,ut=new EM((M+=s)-qe,(R+=l)-ve,M+y+De,R+T+Qe);return e.setEulerAngles(n),ut.rotatedPoints(Mb(n),I,N)}function R2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function P2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function vV(e,t){var n=P2(e[0],e[1],t[0]),r=P2(e[0],e[1],t[1]),i=P2(t[0],t[1],e[0]),s=P2(t[0],t[1],e[1]);return!!(n!==r&&i!==s||n===0&&R2(e,t[0])||r===0&&R2(e,t[1])||i===0&&R2(t,e[0])||s===0&&R2(t,e[1]))}function mV(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(vV(l,r)){if(P2(l[0],t,l[1])===0)return R2(l,t);i++}s=(s+1)%n}while(s!==0);return!!(i&1)}function gV(e,t){return t.every(function(n){return mV(e,n)})}function yV(e,t,n){var r=e.x1,i=e.x2,s=e.y1,l=e.y2,c=[[r,s],[i,s],[i,l],[r,l]],h=tT(t,n);return gV(c,h)}function k4(e,t){var n=(0,se.CR)(e,4),r=n[0],i=n[1],s=n[2],l=n[3],c=(0,se.CR)(t,4),h=c[0],p=c[1],v=c[2],y=c[3],b=s-r,T=l-i,M=v-h,R=y-p,I=b*R-M*T;if(I===0)return!1;var N=I>0,z=r-h,H=i-p,X=b*H-T*z;if(X<0===N)return!1;var Y=M*H-R*z;return!(Y<0===N||X>I===N||Y>I===N)}function z4(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return k4(t,r)})}var Cde={lineToLine:k4,intersectBoxLine:z4,getBounds:tT};function _V(e,t,n){var r,i,s=tT(e,n).flat(1),l=tT(t,n).flat(1),c=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var h=(0,se.XA)(c),p=h.next();!p.done;p=h.next()){var v=p.value;if(z4(l,v))return!0}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return!1}function bV(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var s=e.center,l=e.radius,c=(0,se.CR)(s,2),h=c[0],p=c[1],v=r==="negative"?0:i,y=-l-v,b=l+v,T=(0,se.CR)(Mh(t),4),M=T[0],R=T[1],I=T[2],N=T[3];return new EM(h+y-N,p+y-M,h+b+R,p+b+I)}var z=(0,se.CR)(e.startPos,2),H=z[0],X=z[1],Y=(0,se.CR)(e.endPos,2),ne=Y[0],ve=Y[1],ye=(0,se.CR)(O4(e)?[-t,0,t,0]:[0,t,0,-t],4),De=ye[0],Ye=ye[1],Qe=ye[2],yt=ye[3],qe=M2(0,e),ut=Og(qe,i),ft=new EM(H,X,ne,ve);return ft.x1+=yt,ft.y1+=De,ft.x2+=Ye+ut[0],ft.y2+=Qe+ut[1],ft}function nT(e,t,n){var r,i,s=t.crossPadding,l=new Set,c=null,h=bV(t,s),p=function(M){return h?yV(h,M):!0},v=function(M,R){return!M||!M.firstChild?!0:!_V(M.firstChild,R.firstChild,Mh(n))};try{for(var y=(0,se.XA)(e),b=y.next();!b.done;b=y.next()){var T=b.value;p(T)?!c||v(c,T)?c=T:(l.add(c),l.add(T)):l.add(T)}}catch(M){r={error:M}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return Array.from(l)}function SM(e,t){return t===void 0&&(t={}),(0,Sa.Z)(e)?0:typeof e=="number"?e:Math.floor(hV(e,t))}function xV(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,s=i===void 0?"...":i,l=t.minLength,c=t.maxLength,h=c===void 0?1/0:c,p=t.step,v=p===void 0?" ":p,y=t.margin,b=y===void 0?[0,0,0,0]:y,T=D4(r.getTextShape(e[0])),M=SM(v,T),R=l?SM(l,T):M,I=SM(h,T);((0,Sa.Z)(I)||I===1/0)&&(I=Math.max.apply(null,e.map(function(ut){return ut.getBBox().width})));for(var N=e.slice(),z=(0,se.CR)(b,4),H=z[0],X=H===void 0?0:H,Y=z[1],ne=Y===void 0?0:Y,ve=z[2],ye=ve===void 0?X:ve,De=z[3],Ye=De===void 0?ne:De,Qe=function(ut){if(N.forEach(function(ft){r.ellipsis(r.getTextShape(ft),ut,s)}),N=nT(e,n,b),N.length<1)return{value:void 0}},yt=I;yt>R+M;yt-=M){var qe=Qe(yt);if(typeof qe=="object")return qe.value}}}function Ode(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function U4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,se.CR)([n,r],2),s=(0,se.CR)(i[0],2),l=s[0],c=s[1],h=(0,se.CR)(i[1],2),p=h[0],v=h[1];return{x:l,y:c,width:p-l,height:v-c,left:l,bottom:v,top:c,right:p}}function Mde(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function EV(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1],s=(0,se.CR)(t,2),l=s[0],c=s[1];return r!==l&&i===c}function Rde(e,t){var n=__read(e,2),r=n[0],i=n[1],s=__read(t,2),l=s[0],c=s[1];return r===l&&i!==c}function SV(e,t){var n,r,i=t.attributes;try{for(var s=(0,se.XA)(Object.entries(i)),l=s.next();!l.done;l=s.next()){var c=(0,se.CR)(l.value,2),h=c[0],p=c[1];h!=="id"&&h!=="className"&&e.attr(h,p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var wV={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,s){return s%r?(Dy(i),!1):!0})}},TV=function(e){return e.filter(B4)};function AV(e,t,n,r){var i=e.length,s=t.keepHeader,l=t.keepTail;if(!(i<=1||i===2&&s&&l)){var c=wV.parity,h=function(H){return H.forEach(r.show),H},p=2,v=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,se.ev)([1],(0,se.CR)(e.map(function(H){return H.getBBox().width})),!1));if(n.type==="linear"&&(C4(n)||O4(n))){var T=U4(e[0]).left,M=U4(e[i-1]).right,R=Math.abs(M-T)||1;p=Math.max(Math.floor(i*b/R),p)}var I,N;for(s&&(I=v.splice(0,1)[0]),l&&(N=v.splice(-1,1)[0],v.reverse()),h(v);p<e.length&&nT(TV(N?(0,se.ev)((0,se.ev)([N],(0,se.CR)(y),!1),[I],!1):(0,se.ev)([I],(0,se.CR)(y),!1)),n,t==null?void 0:t.margin).length;){if(N&&!I&&p%2===0){var z=v.splice(0,1);z.forEach(r.hide)}else if(N&&I){var z=v.splice(0,1);z.forEach(r.hide)}y=c(h(v),{seq:p}),p++}}}function CV(e,t,n,r){var i,s,l=t.optionalAngles,c=l===void 0?[0,45,90]:l,h=t.margin,p=t.recoverWhenFailed,v=p===void 0?!0:p,y=e.map(function(N){return N.getLocalEulerAngles()}),b=function(){return nT(e,n,h).length<1},T=function(N){return e.forEach(function(z,H){var X=Array.isArray(N)?N[H]:N;r.rotate(z,+X)})};try{for(var M=(0,se.XA)(c),R=M.next();!R.done;R=M.next()){var I=R.value;if(T(I),b())return}}catch(N){i={error:N}}finally{try{R&&!R.done&&(s=M.return)&&s.call(M)}finally{if(i)throw i.error}}v&&T(y)}function OV(e){var t=e.type,n=e.labelDirection;return t==="linear"&&C4(e)?n==="negative"?"bottom":"top":"middle"}function MV(e,t,n,r){var i=t.wordWrapWidth,s=i===void 0?50:i,l=t.maxLines,c=l===void 0?3:l,h=t.recoverWhenFailed,p=h===void 0?!0:h,v=t.margin,y=v===void 0?[0,0,0,0]:v,b=e.map(function(z){return z.attr("maxLines")||1}),T=Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(b),!1)),M=function(){return nT(e,n,y).length<1},R=OV(n),I=function(z){return e.forEach(function(H,X){var Y=Array.isArray(z)?z[X]:z;r.wrap(H,s,Y,R)})};if(!(T>c)){for(var N=T;N<=c;N++)if(I(N),M())return;p&&I(b)}}var RV=new Map([["hide",AV],["rotate",CV],["ellipsis",xV],["wrap",MV]]);function PV(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!Oj(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function IV(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(s){var l=s.type,c=RV.get(l);PV(e,t,l)&&(c==null||c(e,s,t,n))})}function DV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function j4(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function wM(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1],s=(0,se.CR)(t,2),l=s[0],c=s[1],h=(0,se.CR)([r*l+i*c,r*c-i*l],2),p=h[0],v=h[1];return Math.atan2(v,p)}function LV(e){var t=(e+360)%180;return Oh(t,-90,90)||(t+=180),t}function NV(e,t,n){var r,i=n.labelAlign,s=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return t.getLocalEulerAngles();var l=0,c=M2(e.value,n),h=Qw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?l=wM([1,0],c):l=wM([h[0]<0?-1:1,0],h),LV(b4(l)))}function V4(e,t,n){var r=n.type,i=n.labelAlign,s=M2(e,n),l=j4(t),c=j4(b4(wM([1,0],s))),h="center",p="middle";return r==="linear"?[90,270].includes(c)&&l===0?(h="center",p=s[1]===1?"top":"bottom"):!(c%180)&&[90,270].includes(l)?h="center":c===0?(Oh(l,0,90,!1,!0)||Oh(l,0,90)||Oh(l,270,360))&&(h="start"):c===90?Oh(l,0,90,!1,!0)?h="start":(Oh(l,90,180)||Oh(l,270,360))&&(h="end"):c===270?Oh(l,0,90,!1,!0)?h="end":(Oh(l,90,180)||Oh(l,270,360))&&(h="start"):c===180&&(l===90?h="start":(Oh(l,0,90)||Oh(l,270,360))&&(h="end")):i==="parallel"?Oh(c,0,180,!0)?p="top":p="bottom":i==="horizontal"?Oh(c,90,270,!1)?h="end":(Oh(c,270,360,!1)||Oh(c,0,90))&&(h="start"):i==="perpendicular"&&(Oh(c,90,270)?h="end":h="start"),{textAlign:h,textBaseline:p}}function FV(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=V4(r,e,n),s=t.querySelector(lu.labelItem.class);s&&G4(s,i)}function H4(e,t,n){var r=n.showTick,i=n.tickLength,s=n.tickDirection,l=n.labelDirection,c=n.labelSpacing,h=t.indexOf(e),p=Y0(c,[e,h,t]),v=(0,se.CR)([M2(e.value,n),DV(l,s)],2),y=v[0],b=v[1],T=b===1?Y0(r?i:0,[e,h,t]):0,M=(0,se.CR)(C2(Og(y,p+T),Jw(e.value,n)),2),R=M[0],I=M[1];return{x:R,y:I}}function BV(e,t,n,r){var i=r.labelFormatter,s=Kd(i)?function(){return q_(Y0(i,[e,t,n,M2(e.value,r)]))}:function(){return q_(e.label||"")};return s}function G4(e,t){e.nodeName==="text"&&e.attr(t)}function W4(e){IV(this.node().childNodes,e,{hide:Dy,show:A2,rotate:function(t,n){FV(+n,t,e)},ellipsis:function(t,n,r){t&&xM(t,n||1/0,r)},wrap:function(t,n,r){t&&dV(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function Z4(e,t,n,r,i){var s=n.indexOf(t),l=hs(e).append(BV(t,s,n,i)).attr("className",lu.labelItem.name).node(),c=(0,se.CR)(Mg(T4(r,[t,s,n])),2),h=c[0],p=c[1],v=p.transform,y=(0,se._T)(p,["transform"]);F4(l,v);var b=NV(t,l,i);return l.getLocalEulerAngles()||l.setLocalEulerAngles(b),G4(l,(0,se.pi)((0,se.pi)({},V4(t.value,b,i)),h)),e.attr(y),l}function kV(e,t,n,r){var i=yM(t,n.labelFilter),s=Vs(n,"label");return e.selectAll(lu.label.class).data(i,function(l,c){return c}).join(function(l){return l.append("g").attr("className",lu.label.name).transition(function(c){Z4(this,c,t,s,n);var h=H4(c,t,n),p=h.x,v=h.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null}).call(function(){W4.call(e,n)})},function(l){return l.transition(function(c){var h=this.querySelector(lu.labelItem.class),p=Z4(this,c,t,s,n),v=Tj(h,p,r.update),y=H4(c,t,n),b=y.x,T=y.y,M=Pv(this,{transform:"translate(".concat(b,", ").concat(T,")")},r.update);return(0,se.ev)((0,se.ev)([],(0,se.CR)(v),!1),[M],!1)}).call(function(c){var h=hl(c,"_transitions").flat().filter(B4);Sj(h,function(){W4.call(e,n)})})},function(l){return l.transition(function(){var c=this,h=Kw(this.childNodes[0],r.exit);return Ob(h,function(){return hs(c).remove()}),h})}).transitions()}function X4(e,t){return _M(e,t.tickDirection,t)}function zV(e,t){var n=(0,se.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function UV(e,t,n,r,i){var s=i.tickLength,l=(0,se.CR)(zV(r,Y0(s,[e,t,n])),2),c=(0,se.CR)(l[0],2),h=c[0],p=c[1],v=(0,se.CR)(l[1],2),y=v[0],b=v[1];return{x1:h,x2:y,y1:p,y2:b}}function jV(e,t,n,r,i){var s=i.tickFormatter,l=X4(t.value,i),c="line";return Kd(s)&&(c=function(){return Y0(s,[t,n,r,l])}),e.append(c).attr("className",lu.tickItem.name)}function VV(e,t,n,r,i,s,l){var c=X4(e.value,s),h=UV(e,t,n,c,s),p=h.x1,v=h.x2,y=h.y1,b=h.y2,T=(0,se.CR)(Mg(T4(l,[e,t,n,c])),2),M=T[0],R=T[1];r.node().nodeName==="line"&&r.styles((0,se.pi)({x1:p,x2:v,y1:y,y2:b},M)),i.attr(R),r.styles(M)}function Y4(e,t,n,r,i,s){var l=jV(hs(this),e,t,n,r);VV(e,t,n,l,this,r,i);var c=(0,se.CR)(Jw(e.value,r),2),h=c[0],p=c[1];return Pv(this,{transform:"translate(".concat(h,", ").concat(p,")")},s)}function HV(e,t,n,r){var i=yM(t,n.tickFilter),s=Vs(n,"tick");return e.selectAll(lu.tick.class).data(i,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",lu.tick.name).transition(function(c,h){return Y4.call(this,c,h,i,n,s,!1)})},function(l){return l.transition(function(c,h){return this.removeChildren(),Y4.call(this,c,h,i,n,s,r.update)})},function(l){return l.transition(function(){var c=this,h=Kw(this.childNodes[0],r.exit);return Ob(h,function(){return c.remove()}),h})}).transitions()}var Zu=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function Pde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],s=__read(t.max,2),l=s[0],c=s[1],h=l-r,p=c-i;return new Zu(r,i,h,p)}var $4=X0({text:"text"},"title");function rT(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function GV(e,t){var n=e.attributes,r=n.position,i=n.spacing,s=n.inset,l=n.text,c=e.getBBox(),h=t.getBBox(),p=rT(r),v=(0,se.CR)(Mh(l?i:0),4),y=v[0],b=v[1],T=v[2],M=v[3],R=(0,se.CR)(Mh(s),4),I=R[0],N=R[1],z=R[2],H=R[3],X=(0,se.CR)([M+b,y+T],2),Y=X[0],ne=X[1],ve=(0,se.CR)([H+N,I+z],2),ye=ve[0],De=ve[1];if(p[0]==="l")return new Zu(c.x,c.y,h.width+c.width+Y+ye,Math.max(h.height+De,c.height));if(p[0]==="t")return new Zu(c.x,c.y,Math.max(h.width+ye,c.width),h.height+c.height+ne+De);var Ye=(0,se.CR)([t.attributes.width||h.width,t.attributes.height||h.height],2),Qe=Ye[0],yt=Ye[1];return new Zu(h.x,h.y,Qe+c.width+Y+ye,yt+c.height+ne+De)}function WV(e,t){var n=Object.entries(t).reduce(function(r,i){var s=(0,se.CR)(i,2),l=s[0],c=s[1],h=e.node().attr(l);return h||(r[l]=c),r},{});e.styles(n)}function ZV(e){var t,n,r,i,s=e,l=s.width,c=s.height,h=s.position,p=(0,se.CR)([+l/2,+c/2],2),v=p[0],y=p[1],b=(0,se.CR)([+v,+y,"center","middle"],4),T=b[0],M=b[1],R=b[2],I=b[3],N=rT(h);return N.includes("l")&&(t=(0,se.CR)([0,"start"],2),T=t[0],R=t[1]),N.includes("r")&&(n=(0,se.CR)([+l,"end"],2),T=n[0],R=n[1]),N.includes("t")&&(r=(0,se.CR)([0,"top"],2),M=r[0],I=r[1]),N.includes("b")&&(i=(0,se.CR)([+c,"bottom"],2),M=i[0],I=i[1]),{x:T,y:M,textAlign:R,textBaseline:I}}var q4=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,s=r.height,l=r.position,c=r.spacing,h=r.inset,p=n.querySelector($4.text.class);if(!p)return new Zu(0,0,+i,+s);var v=p.getBBox(),y=v.width,b=v.height,T=(0,se.CR)(Mh(c),4),M=T[0],R=T[1],I=T[2],N=T[3],z=(0,se.CR)([0,0,+i,+s],4),H=z[0],X=z[1],Y=z[2],ne=z[3],ve=rT(l);if(ve.includes("i"))return new Zu(H,X,Y,ne);ve.forEach(function(mt,Xt){var Mt,kt,Tn,zn;mt==="t"&&(Mt=(0,se.CR)(Xt===0?[b+I,+s-b-I]:[0,+s],2),X=Mt[0],ne=Mt[1]),mt==="r"&&(kt=(0,se.CR)([+i-y-N],1),Y=kt[0]),mt==="b"&&(Tn=(0,se.CR)([+s-b-M],1),ne=Tn[0]),mt==="l"&&(zn=(0,se.CR)(Xt===0?[y+R,+i-y-R]:[0,+i],2),H=zn[0],Y=zn[1])});var ye=(0,se.CR)(Mh(h),4),De=ye[0],Ye=ye[1],Qe=ye[2],yt=ye[3],qe=(0,se.CR)([yt+Ye,De+Qe],2),ut=qe[0],ft=qe[1];return new Zu(H+yt,X+De,Y-ut,ne-ft)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Zu(0,0,0,0)},t.prototype.render=function(n,r){var i=this,s=n.width,l=n.height,c=n.position,h=n.spacing,p=(0,se._T)(n,["width","height","position","spacing"]),v=(0,se.CR)(Mg(p),1),y=v[0],b=ZV(n),T=b.x,M=b.y,R=b.textAlign,I=b.textBaseline;Np(!!p.text,hs(r),function(N){i.title=N.maybeAppendByClassName($4.text,"text").styles(y).call(WV,{x:T,y:M,textAlign:R,textBaseline:I}).node()})},t}(uh);function XV(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,s=n.titleSpacing,l=rT(i),c=e.node().getLocalBounds(),h=(0,se.CR)(c.min,2),p=h[0],v=h[1],y=(0,se.CR)(c.halfExtents,2),b=y[0],T=y[1],M=(0,se.CR)(t.node().getLocalBounds().halfExtents,2),R=M[0],I=M[1],N=(0,se.CR)([p+b,v+T],2),z=N[0],H=N[1],X=(0,se.CR)(Mh(s),4),Y=X[0],ne=X[1],ve=X[2],ye=X[3];if(["start","end"].includes(i)&&n.type==="linear"){var De=n.startPos,Ye=n.endPos,Qe=(0,se.CR)(i==="start"?[De,Ye]:[Ye,De],2),yt=Qe[0],qe=Qe[1],ut=_4([-qe[0]+yt[0],-qe[1]+yt[1]]),ft=(0,se.CR)(Og(ut,Y),2),mt=ft[0],Xt=ft[1];return{x:yt[0]+mt,y:yt[1]+Xt}}return l.includes("t")&&(H-=T+I+Y),l.includes("r")&&(z+=b+R+ne),l.includes("l")&&(z-=b+R+ye),l.includes("b")&&(H+=T+I+ve),{x:z,y:H}}function YV(e,t,n){var r=e.getGeometryBounds().halfExtents,i=r[1]*2;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function K4(e,t,n,r,i){var s=Vs(r,"title"),l=(0,se.CR)(Mg(s),2),c=l[0],h=l[1],p=h.transform,v=h.transformOrigin,y=(0,se._T)(h,["transform","transformOrigin"]);t.styles(y);var b=p||YV(e.node(),c.direction,c.position);e.styles((0,se.pi)((0,se.pi)({},c),{transformOrigin:v})),F4(e.node(),b);var T=XV(hs(n._offscreen||n.querySelector(lu.mainGroup.class)),t,r),M=T.x,R=T.y,I=Pv(t.node(),{transform:"translate(".concat(M,", ").concat(R,")")},i);return I}function $V(e,t,n,r){var i=n.titleText;return e.selectAll(lu.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,l){return s.title}).join(function(s){return s.append(function(){return q_(i)}).attr("className",lu.title.name).transition(function(){return K4(hs(this),e,t,n,r.enter)})},function(s){return s.transition(function(){return K4(hs(this),e,t,n,r.update)})},function(s){return s.remove()}).transitions()}function Q4(e,t,n,r){var i=e.showLine,s=e.showTick,l=e.showLabel,c=t.maybeAppendByClassName(lu.lineGroup,"g"),h=Np(i,c,function(T){return oV(T,e,r)})||[],p=t.maybeAppendByClassName(lu.tickGroup,"g"),v=Np(s,p,function(T){return HV(T,n,e,r)})||[],y=t.maybeAppendByClassName(lu.labelGroup,"g"),b=Np(l,y,function(T){return kV(T,n,e,r)})||[];return(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(h),!1),(0,se.CR)(v),!1),(0,se.CR)(b),!1).filter(function(T){return!!T})}var TM=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,hM)||this}return t.prototype.render=function(n,r,i){var s=this,l=n.titleText,c=n.data,h=n.animate,p=n.showTitle,v=n.showGrid,y=n.dataThreshold,b=n.truncRange,T=Rj(c,y).filter(function(Y){var ne=Y.value;return!(b&&ne>b[0]&&ne<b[1])}),M=p4(i===void 0?h:i),R=hs(r).maybeAppendByClassName(lu.gridGroup,"g"),I=Np(v,R,function(Y){return uV(Y,T,n,M)})||[],N=hs(r).maybeAppendByClassName(lu.mainGroup,"g");l&&(!this.initialized&&M.enter||this.initialized&&M.update)&&Q4(n,hs(this.offscreenGroup),T,p4(!1));var z=Q4(n,hs(N.node()),T,M),H=hs(r).maybeAppendByClassName(lu.titleGroup,"g"),X=Np(p,H,function(Y){return $V(Y,s,n,M)})||[];return(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(I),!1),(0,se.CR)(z),!1),(0,se.CR)(X),!1).flat().filter(function(Y){return!!Y})},t}(uh),K_=function(e){return e};class I2{constructor(t){this.options=Jr({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=Jr({},this.options,t),this.rescale(t)}rescale(t){}}function iT(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function Pb(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function AM(e,t,n,r,i){let s=n||0,l=r||e.length;const c=i||(h=>h);for(;s<l;){const h=Math.floor((s+l)/2);c(e[h])>t?l=h:s=h+1}return s}var qV=L(19818),KV=L.n(qV);function CM(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function QV(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,c=CM(l,s,t+1/3),h=CM(l,s,t),p=CM(l,s,t-1/3);return[c*255,h*255,p*255,i]}function J4(e){const t=KV().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?QV(r):null}const Ib=(e,t)=>n=>e*(1-n)+t*n,JV=(e,t)=>{const n=J4(e),r=J4(t);return n===null||r===null?n?()=>e:()=>t:i=>{const s=new Array(4);for(let v=0;v<4;v+=1){const y=n[v],b=r[v];s[v]=y*(1-i)+b*i}const[l,c,h,p]=s;return`rgba(${Math.round(l)}, ${Math.round(c)}, ${Math.round(h)}, ${p})`}},D2=(e,t)=>typeof e=="number"&&typeof t=="number"?Ib(e,t):typeof e=="string"&&typeof t=="string"?JV(e,t):()=>e,eH=(e,t)=>{const n=Ib(e,t);return r=>Math.round(n(r))};var tH=function(e){return e===null},nH=tH;function oT(e){return!Fs(e)&&!nH(e)&&!Number.isNaN(e)}const OM=Math.sqrt(50),MM=Math.sqrt(10),RM=Math.sqrt(2);function aT(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/vf(10,i);return i>=0?(s>=OM?10:s>=MM?5:s>=RM?2:1)*vf(10,i):-vf(10,-i)/(s>=OM?10:s>=MM?5:s>=RM?2:1)}function eD(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=vf(10,Math.floor(Math.log(r)/Math.LN10));const s=r/i;return s>=OM?i*=10:s>=MM?i*=5:s>=RM&&(i*=2),t<e?-i:i}const tD=(e,t,n=5)=>{const r=[e,t];let i=0,s=r.length-1,l=r[i],c=r[s],h;return c<l&&([l,c]=[c,l],[i,s]=[s,i]),h=aT(l,c,n),h>0?(l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h,h=aT(l,c,n)):h<0&&(l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h,h=aT(l,c,n)),h>0?(r[i]=Math.floor(l/h)*h,r[s]=Math.ceil(c/h)*h):h<0&&(r[i]=Math.ceil(l*h)/h,r[s]=Math.floor(c*h)/h),r};function rH(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const iH=(e,t,n)=>{const[r,i]=e,[s,l]=t;let c,h;return r<i?(c=iT(r,i),h=n(s,l)):(c=iT(i,r),h=n(l,s)),Pb(h,c)},oH=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=e[0]>e[r],c=l?[...e].reverse():e,h=l?[...t].reverse():t;for(let p=0;p<r;p+=1)i[p]=iT(c[p],c[p+1]),s[p]=n(h[p],h[p+1]);return p=>{const v=AM(e,p,1,r)-1,y=i[v],b=s[v];return Pb(b,y)(p)}},nD=(e,t,n,r)=>(Math.min(e.length,t.length)>2?oH:iH)(e,t,r?eH:n);class sT extends I2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Ib,tickCount:5}}map(t){return oT(t)?this.output(t):this.options.unknown}invert(t){return oT(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...s]=this.getTickMethodOptions();return t(n,r,i,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return tD}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),s=Math.min(i.length,r.length);return n?rH(i[0],i[s-1]):K_}composeOutput(t,n){const{domain:r,range:i,round:s,interpolate:l}=this.options,c=nD(r.map(t),i,l,s);this.output=Pb(c,n,t)}composeInput(t,n,r){const{domain:i,range:s}=this.options,l=nD(s,i.map(t),Ib);this.input=Pb(n,r,l)}}const Q_=(e,t,n)=>{let r,i,s=e,l=t;if(s===l&&n>0)return[s];let c=aT(s,l,n);if(c===0||!Number.isFinite(c))return[];if(c>0){s=Math.ceil(s/c),l=Math.floor(l/c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)*c}else{c=-c,s=Math.ceil(s*c),l=Math.floor(l*c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)/c}return i};class hd extends sT{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:D2,tickMethod:Q_,tickCount:5}}chooseTransforms(){return[K_,K_]}clone(){return new hd(this.options)}}function aH(e,t){if(e){var n;if(Vo(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(_l(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var PM=aH,sH=function(e,t,n){if(!Vo(e)&&!Z0(e))return e;var r=n;return PM(e,function(i,s){r=t(r,i,s)}),r},rD=sH,J_=function(e,t){return rD(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function Rg(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function iD(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,s=0;s<e.length;s++){var l=e[s],c=l.x,h=l.y,p=l.width,v=l.height,y=(0,se.CR)([c+p,h+v],2),b=y[0],T=y[1];c<t&&(t=c),h<n&&(n=h),b>r&&(r=b),T>i&&(i=T)}return new Zu(t,n,r-t,i-n)}var lH=function(e,t,n){var r=e.width,i=e.height,s=n.flexDirection,l=s===void 0?"row":s,c=n.flexWrap,h=c===void 0?"nowrap":c,p=n.justifyContent,v=p===void 0?"flex-start":p,y=n.alignContent,b=y===void 0?"flex-start":y,T=n.alignItems,M=T===void 0?"flex-start":T,R=l==="row",I=l==="row"||l==="column",N=R?I?[1,0]:[-1,0]:I?[0,1]:[0,-1],z=(0,se.CR)([0,0],2),H=z[0],X=z[1],Y=t.map(function(qe){var ut,ft=qe.width,mt=qe.height,Xt=(0,se.CR)([H,X],2),Mt=Xt[0],kt=Xt[1];return ut=(0,se.CR)([H+ft*N[0],X+mt*N[1]],2),H=ut[0],X=ut[1],new Zu(Mt,kt,ft,mt)}),ne=iD(Y),ve={"flex-start":0,"flex-end":R?r-ne.width:i-ne.height,center:R?(r-ne.width)/2:(i-ne.height)/2},ye=Y.map(function(qe){var ut=qe.x,ft=qe.y,mt=Zu.fromRect(qe);return mt.x=R?ut+ve[v]:ut,mt.y=R?ft:ft+ve[v],mt}),De=iD(ye),Ye=function(qe){var ut=(0,se.CR)(R?["height",i]:["width",r],2),ft=ut[0],mt=ut[1];switch(M){case"flex-start":return 0;case"flex-end":return mt-qe[ft];case"center":return mt/2-qe[ft]/2;default:return 0}},Qe=ye.map(function(qe){var ut=qe.x,ft=qe.y,mt=Zu.fromRect(qe);return mt.x=R?ut:ut+Ye(mt),mt.y=R?ft+Ye(mt):ft,mt}),yt=Qe.map(function(qe){var ut,ft,mt=Zu.fromRect(qe);return mt.x+=(ut=e.x)!==null&&ut!==void 0?ut:0,mt.y+=(ft=e.y)!==null&&ft!==void 0?ft:0,mt});return yt},uH=function(e,t,n){return[]},cH=function(e,t,n){if(t.length===0)return[];var r={flex:lH,grid:uH},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},fH=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[Ba.BOUNDS_CHANGED,Ba.INSERTED,Ba.REMOVED],r.$margin=Mh(0),r.$padding=Mh(0);var i=n.style||{},s=i.margin,l=s===void 0?0:s,c=i.padding,h=c===void 0?0:c;return r.margin=l,r.padding=h,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Mh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Mh(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,s=n.y,l=s===void 0?0:s,c=n.width,h=n.height,p=(0,se.CR)(this.$margin,4),v=p[0],y=p[1],b=p[2],T=p[3];return new Zu(i-T,l-v,c+T+y,h+v+b)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,s=(0,se.CR)(this.$padding,4),l=s[0],c=s[1],h=s[2],p=s[3],v=(0,se.CR)(this.$margin,4),y=v[0],b=v[3];return new Zu(p+b,l+y,r-p-c,i-l-h)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var s=cH(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,c){var h=s[c],p=h.x,v=h.y;l.style.transform="translate(".concat(p,", ").concat(v,")")})}catch(l){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(Xc),hH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dH(e){return class extends wv{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(Jr({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function oD(e,t,n){return e.querySelector(t)?Ta(e).select(t):Ta(e).append(n)}function lT(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function aD(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in l&&([r,i,s]=l[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:s},t)}class sD extends fH{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class pH extends sD{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function _m(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function vH(e){return e==="horizontal"||e===0}function mH(e){return e==="vertical"||e===-Math.PI/2}function lD(e,t,n){const{bbox:r}=e,{position:i="top",size:s,length:l}=t,c=["top","bottom","center"].includes(i),[h,p]=c?[r.height,r.width]:[r.width,r.height],{defaultSize:v,defaultLength:y}=n.props,b=s||v||h,T=l||y||p,M=c?"horizontal":"vertical",[R,I]=c?[T,b]:[b,T];return{orientation:M,width:R,height:I,size:b,length:T}}function gH(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function uT(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=hH(e,["style"]),i={};return Object.entries(r).forEach(([s,l])=>{t.includes(s)?i[`show${mm(s)}`]=l:i[s]=l}),Object.assign(Object.assign({},i),n)}var uD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cD(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function fD(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function yH(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!Ch(t))return i;const s=e==="bottom"?[i,1]:[0,i],l=t.map(s);if(e==="bottom"){const c=l[0];return new hd({domain:[0,n],range:[0,1]}).map(c)}else if(e==="left"){const c=l[1];return new hd({domain:[0,r],range:[0,1]}).map(c)}return i}}function _H(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=Rg(t,l=>+l),{tickCount:s}=e.getOptions();return n(r,i,s)}function bH(e,t){if(_o(t))return T=>T;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:s,insetBottom:l,insetLeft:c,insetRight:h}=n,[p,v,y]=e==="left"||e==="right"?[s,l,i]:[c,h,r],b=new hd({domain:[0,1],range:[p/y,1-v/y]});return T=>b.map(T)}function hD(e,t,n,r,i,s,l,c){var h;(n!==void 0||s!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const p=_H(e,t,s),v=i?p.filter(i):p,y=N=>N instanceof Date?String(N):typeof N=="object"&&N?N:String(N),b=r||((h=e.getFormatter)===null||h===void 0?void 0:h.call(e))||y,T=bH(l,c),M=yH(l,c),R=N=>["top","bottom","center","outer"].includes(N),I=N=>["left","right"].includes(N);return _o(c)||Ru(c)?v.map((N,z,H)=>{var X,Y;const ne=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ve=T(e.map(N)+ne);return{value:ks(c)&&l==="center"||Ru(c)&&((Y=e.getTicks)===null||Y===void 0?void 0:Y.call(e))&&R(l)||Ru(c)&&I(l)?1-ve:ve,label:y(b(Cb(N),z,H)),id:String(z)}}):v.map((N,z,H)=>{var X;const Y=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ne=M(T(e.map(N)+Y));return{value:I(l)?1-ne:ne,label:y(b(Cb(N),z,H)),id:String(z)}})}function xH(e,t,n="xy"){const[r,i,s]=fD(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?s:r:e.includes("bottom")||e.includes("top")?i:s}function EH(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:s}=t,l=[],c=(h,p)=>{p&&l.push(Object.assign(Object.assign({},h),p))};return c({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),c({type:"ellipsis",minLength:20},i),c({type:"hide"},r),c({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function SH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=t,p=[s+c/2,l+h/2],v=Math.min(c,h)/2,[y,b]=cM(i),[T,M]=fD(i),R=Math.min(T,M)/2,I={center:p,radius:v,startAngle:y,endAngle:b,gridLength:(r-n)*R};if(e==="inner"){const{insetLeft:N,insetTop:z}=i.getOptions();return Object.assign(Object.assign({},I),{center:[p[0]-N,p[1]-z],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},I),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function wH(e,t,n){return fd(t)||uo(t)?!1:e===void 0?!!n.getTicks:e}function TH(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function AH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=n;if(e==="bottom")return{startPos:[s,l],endPos:[s+c,l]};if(e==="left")return{startPos:[s+c,l+h],endPos:[s+c,l]};if(e==="right")return{startPos:[s,l+h],endPos:[s,l]};if(e==="top")return{startPos:[s,l+h],endPos:[s+c,l+h]};if(e==="center"){if(t==="vertical")return{startPos:[s,l],endPos:[s,l+h]};if(t==="horizontal")return{startPos:[s,l],endPos:[s+c,l]};if(typeof t=="number"){const[p,v]=r.getCenter(),[y,b]=Yw(r),[T,M]=cM(r),R=Math.min(c,h)/2,{insetLeft:I,insetTop:N}=r.getOptions(),z=y*R,H=b*R,[X,Y]=[p+s-I,v+l-N],[ne,ve]=[Math.cos(t),Math.sin(t)],ye=[X+H*ne,Y+H*ve],De=[X+z*ne,Y+z*ve],Ye=()=>{const{domain:yt}=i.getOptions();return yt.length},Qe=_o(r)&&i?Ye():3;return{startPos:ye,endPos:De,gridClosed:Math.abs(M-T-360)<1e-6,gridCenter:[X,Y],gridControlAngles:new Array(Qe).fill(0).map((yt,qe,ut)=>(M-T)/Qe*qe)}}}return{}}const CH=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:s,tickFilter:l,tickCount:c,tickMethod:h,important:p={},style:v={},indexBBox:y,title:b,grid:T=!1}=e,M=uD(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[R],value:I,coordinate:N,theme:z})=>{const{bbox:H}=I,{domain:X}=R.getOptions(),Y=hD(R,X,c,s,l,h,r,N),ne=y?Y.map((qe,ut)=>{const ft=y.get(ut);return!ft||ft[0]!==qe.label?qe:Object.assign(Object.assign({},qe),{bbox:ft[1]})}):Y,[ve,ye]=Yw(N),De=SH(r,H,ve,ye,N),{axis:Ye,axisArc:Qe={}}=z,yt=uT(Jr({},Ye,Qe,De,Object.assign(Object.assign({type:"arc",data:ne,titleText:lT(b),grid:T},M),p)));return new TM({style:J_(yt,["transform"])})}};function OH(e,t,n,r,i,s){const l=n.axis,c=["top","right","bottom","left"].includes(i)?n[`axis${S2(i)}`]:n.axisLinear,h=e.getOptions().name,p=n[`axis${mm(h)}`]||{};return Object.assign({},l,c,p)}function MH(e,t,n,r,i,s){const l=OH(e,t,n,r,i,s);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:mH(s)?10:0,tick:r==="center"?!1:void 0}):l}const RH=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:s,actualPosition:l,position:c,size:h,style:p={},title:v,tickCount:y,tickFilter:b,tickMethod:T,transform:M,indexBBox:R}=e,I=uD(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:N,value:z,coordinate:H,theme:X})=>{const{bbox:Y}=z,[ne]=N,{domain:ve,xScale:ye}=ne.getOptions(),De=MH(ne,H,X,t,c,s),Ye=Object.assign(Object.assign(Object.assign({},De),p),I),Qe=xH(l||c,H,e.plane),yt=AH(c,s,Y,H,ye),qe=TH(H),ut=hD(ne,ve,y,r,b,T,c,H),ft=R?ut.map((Mt,kt)=>{const Tn=R.get(kt);return!Tn||Tn[0]!==Mt.label?Mt:Object.assign(Object.assign({},Mt),{bbox:Tn[1]})}):ut,mt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ye),{type:"linear",data:ft,crossSize:h,titleText:lT(v),labelOverlap:EH(M,Ye),grid:wH(Ye.grid,H,ne),gridLength:Qe,line:!0,indexBBox:R}),Ye.line?null:{lineOpacity:0}),yt),qe),n);return mt.labelOverlap.find(Mt=>Mt.type==="hide")&&(mt.crossSize=!1),new TM({className:"axis",style:uT(mt)})}},dD=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var s;const{scales:[l]}=i,c=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,h=typeof n=="string"?nn(n):n,p=(y,b,T)=>r(c[b],b,c),v=Object.assign(Object.assign({},t),{labelFormatter:h,labelFilter:p,scale:l});return e(v)(i)}},Ly=dD(RH),pD=dD(CH);Ly.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},pD.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var PH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function IH(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function DH(e,t,n,r){const{radar:i}=e,[s]=r,l=s.getOptions().name,[c,h]=cM(n),{axisRadar:p={}}=t;return Object.assign(Object.assign({},p),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((v,y)=>(h-c)/i.count*y)})}const vD=e=>{const{important:t={}}=e,n=PH(e,["important"]);return r=>{const{theme:i,coordinate:s,scales:l}=r;return Ly(Object.assign(Object.assign(Object.assign({},n),IH(e.orientation)),{important:Object.assign(Object.assign({},DH(e,i,s,l)),t)}))(r)}};vD.props=Object.assign(Object.assign({},Ly.props),{defaultPosition:"center"});function cT(e,t){return+e.toPrecision(t)}function Ide(e){return e.toLocaleString()}function Dde(e){return e.toExponential()}function Lde(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(cT(e/1e3,t).toLocaleString(),"K")}var Nde=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},Fde=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},Bde=function(e,t){return e*t},kde=function(e,t){return e/2+(t||0)/2};function fT(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var s=t.x,l=t.y;return[s,l]}if(n){var c=n[0],h=c.clientX,p=c.clientY;return[h,p]}return r&&i?[r,i]:[0,0]}var LH={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},IM=X0({background:"background",labelGroup:"label-group",label:"label"},"indicator"),NH=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,LH)||this;return r.point=[0,0],r.group=r.appendChild(new Xc({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,s=(0,se.CR)(Mh(i),4),l=s[0],c=s[1],h=s[2],p=s[3],v=this.label.node().getLocalBounds(),y=v.min,b=v.max,T=new Zu(y[0]-p,y[1]-l,b[0]+c-y[0]+p,b[1]+h-y[1]+l),M=this.getPath(r,T),R=Vs(this.attributes,"background");this.background=hs(this.group).maybeAppendByClassName(IM.background,"path").styles((0,se.pi)((0,se.pi)({},R),{d:M})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,s=Vs(this.attributes,"label"),l=(0,se.CR)(Mg(s),2),c=l[0],h=l[1],p=c.text,v=(0,se._T)(c,["text"]);if(this.label=hs(this.group).maybeAppendByClassName(IM.labelGroup,"g").styles(h),!!i){var y=this.label.maybeAppendByClassName(IM.label,function(){return q_(r(i))}).style("text",r(i).toString());y.selectAll("text").styles(v)}},t.prototype.adjustLayout=function(){var n=(0,se.CR)(this.point,2),r=n[0],i=n[1],s=this.attributes,l=s.x,c=s.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(c-i,")"))},t.prototype.getPath=function(n,r){var i=this.attributes.radius,s=r.x,l=r.y,c=r.width,h=r.height,p=[["M",s+i,l],["L",s+c-i,l],["A",i,i,0,0,1,s+c,l+i],["L",s+c,l+h-i],["A",i,i,0,0,1,s+c-i,l+h],["L",s+i,l+h],["A",i,i,0,0,1,s,l+h-i],["L",s,l+i],["A",i,i,0,0,1,s+i,l],["Z"]],v={top:4,right:6,bottom:0,left:2},y=v[n],b=this.createCorner([p[y].slice(-2),p[y+1].slice(-2)]);return p.splice.apply(p,(0,se.ev)([y+1,1],(0,se.CR)(b),!1)),p[0][0]="M",p},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,s=EV.apply(void 0,(0,se.ev)([],(0,se.CR)(n),!1)),l=(0,se.CR)(n,2),c=(0,se.CR)(l[0],2),h=c[0],p=c[1],v=(0,se.CR)(l[1],2),y=v[0],b=v[1],T=(0,se.CR)(s?[y-h,[h,y]]:[b-p,[p,b]],2),M=T[0],R=(0,se.CR)(T[1],2),I=R[0],N=R[1],z=M/2,H=M/Math.abs(M),X=r*H,Y=X/2,ne=X*Math.sqrt(3)/2*i,ve=(0,se.CR)([I,I+z-Y,I+z,I+z+Y,N],5),ye=ve[0],De=ve[1],Ye=ve[2],Qe=ve[3],yt=ve[4];return s?(this.point=[Ye,p-ne],[["L",ye,p],["L",De,p],["L",Ye,p-ne],["L",Qe,p],["L",yt,p]]):(this.point=[h+ne,Ye],[["L",h,ye],["L",h,De],["L",h+ne,Ye],["L",h,Qe],["L",h,yt]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Dy(this):A2(this)},t.prototype.bindEvents=function(){this.label.on(Ba.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(uh),mD={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},gD={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},yD={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},bm=X0({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ny=X0({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),FH=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=n.y,l=n.size,c=l===void 0?10:l,h=n.radius,p=h===void 0?c/4:h,v=n.orientation,y=(0,se._T)(n,["x","y","size","radius","orientation"]),b=c,T=b*2.4,M=hs(r).maybeAppendByClassName(Ny.iconRect,"rect").styles((0,se.pi)((0,se.pi)({},y),{width:b,height:T,radius:p,x:i-b/2,y:s-T/2,transformOrigin:"center"})),R=i+1/3*b-b/2,I=i+2/3*b-b/2,N=s+1/4*T-T/2,z=s+3/4*T-T/2;M.maybeAppendByClassName("".concat(Ny.iconLine,"-1"),"line").styles((0,se.pi)({x1:R,x2:R,y1:N,y2:z},y)),M.maybeAppendByClassName("".concat(Ny.iconLine,"-2"),"line").styles((0,se.pi)({x1:I,x2:I,y1:N,y2:z},y)),v==="vertical"&&(M.node().style.transform="rotate(90)")},t}(uh),_D=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,yD)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.showLabel,h=Vs(this.attributes,"label"),p=h.x,v=p===void 0?0:p,y=h.y,b=y===void 0?0:y,T=h.transform,M=h.transformOrigin,R=(0,se._T)(h,["x","y","transform","transformOrigin"]),I=(0,se.CR)(Mg(R,[]),2),N=I[0],z=I[1],H=hs(n).maybeAppendByClassName(Ny.labelGroup,"g").styles(z),X=(0,se.pi)((0,se.pi)({},gD),N),Y=X.text,ne=(0,se._T)(X,["text"]);Np(!!c,H,function(ve){r.label=ve.maybeAppendByClassName(Ny.label,"text").styles((0,se.pi)((0,se.pi)({},ne),{x:s+v,y:l+b,transform:T,transformOrigin:M,text:"".concat(Y)})),r.label.on("mousedown",function(ye){ye.stopPropagation()}),r.label.on("touchstart",function(ye){ye.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.type,h=(0,se.pi)((0,se.pi)({x:i,y:s,orientation:l},mD),Vs(this.attributes,"icon")),p=this.attributes.iconShape,v=p===void 0?function(){return new FH({style:h})}:p,y=hs(n).maybeAppendByClassName(Ny.iconGroup,"g");y.selectAll(Ny.icon.class).data([v]).join(function(b){return b.append(typeof v=="string"?v:function(){return v(c)}).attr("className",Ny.icon.name)},function(b){return b.update(h)},function(b){return b.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(uh),bD=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},BH=bD,kH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},zH=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},UH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},jH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},VH=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},HH=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},xD=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},GH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},WH=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},ZH=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},XH=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},ED=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},YH=ED,$H=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},qH=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},KH=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},QH=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function JH(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var eG=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function tG(e){var t="default";if(_l(e)&&e instanceof Image)t="image";else if(Kd(e))t="symbol";else if(u(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function nG(e){var t=tG(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var jl=function(e){(0,se.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l,h=this.getSubShapeStyle(n),p=h.symbol,v=h.size,y=v===void 0?16:v,b=(0,se._T)(h,["symbol","size"]),T=nG(p);Np(!!T,hs(r),function(M){M.maybeAppendByClassName("marker",T).attr("className","marker ".concat(T,"-marker")).call(function(R){if(T==="image"){var I=y*2;R.styles({img:p,width:I,height:I,x:s-y,y:c-y})}else{var I=y/2,N=Kd(p)?p:t.getSymbol(p);R.styles((0,se.pi)({d:N==null?void 0:N(s,c,I)},b))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(uh);jl.registerSymbol("cross",GH),jl.registerSymbol("hyphen",XH),jl.registerSymbol("line",xD),jl.registerSymbol("plus",ZH),jl.registerSymbol("tick",WH),jl.registerSymbol("circle",bD),jl.registerSymbol("point",BH),jl.registerSymbol("bowtie",HH),jl.registerSymbol("hexagon",VH),jl.registerSymbol("square",kH),jl.registerSymbol("diamond",zH),jl.registerSymbol("triangle",UH),jl.registerSymbol("triangle-down",jH),jl.registerSymbol("line",xD),jl.registerSymbol("dot",ED),jl.registerSymbol("dash",YH),jl.registerSymbol("smooth",$H),jl.registerSymbol("hv",qH),jl.registerSymbol("vh",KH),jl.registerSymbol("hvh",QH),jl.registerSymbol("vhv",JH);function rG(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function iG(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var SD=1.4,wD=.4;function oG(e,t,n){var r=n,i=r*SD,s=r/2,l=r/6,c=e+i*wD;return[["M",e,t],["L",c,t+s],["L",e+i,t+s],["L",e+i,t-s],["L",c,t-s],["Z"],["M",c,t+l],["L",e+i-2,t+l],["M",c,t-l],["L",e+i-2,t-l]]}function aG(e,t,n){var r=n,i=r*SD,s=r/2,l=r/6,c=t+i*wD;return[["M",e,t],["L",e-s,c],["L",e-s,t+i],["L",e+s,t+i],["L",e+s,c],["Z"],["M",e-l,c],["L",e-l,t+i-2],["M",e+l,c],["L",e+l,t+i-2]]}jl.registerSymbol("hiddenHandle",iG),jl.registerSymbol("verticalHandle",oG),jl.registerSymbol("horizontalHandle",aG);var zde=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function sG(e,t,n,r){var i;r===void 0&&(r=4);var s=(0,se.CR)(e,2),l=s[0],c=s[1],h=(0,se.CR)(t,2),p=h[0],v=h[1],y=(0,se.CR)(n,2),b=y[0],T=y[1],M=(0,se.CR)([p,v],2),R=M[0],I=M[1],N=I-R;return R>I&&(i=(0,se.CR)([I,R],2),R=i[0],I=i[1]),N>c-l?[l,c]:R<l?b===l&&T===I?[l,I]:[l,N+l]:I>c?T===c&&b===R?[R,c]:[c-N,c]:[R,I]}function xm(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var L2=X0({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),TD={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},lG=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,TD)||this}return t.prototype.render=function(n,r){var i=hs(r).maybeAppendByClassName(L2.markerGroup,"g");this.renderMarker(i);var s=hs(r).maybeAppendByClassName(L2.labelGroup,"g");this.renderLabel(s)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,s=i.orientation,l=i.markerSymbol,c=l===void 0?xm(s,"horizontalHandle","verticalHandle"):l;Np(!!c,n,function(h){var p=Vs(r.attributes,"marker"),v=(0,se.pi)({symbol:c},p);r.marker=h.maybeAppendByClassName(L2.marker,function(){return new jl({style:v})}).update(v)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.showLabel,l=i.orientation,c=i.spacing,h=c===void 0?0:c,p=i.formatter;Np(s,n,function(v){var y,b=Vs(r.attributes,"label"),T=b.text,M=(0,se._T)(b,["text"]),R=((y=v.select(L2.marker.class))===null||y===void 0?void 0:y.node().getBBox())||{},I=R.width,N=I===void 0?0:I,z=R.height,H=z===void 0?0:z,X=(0,se.CR)(xm(l,[0,H+h,"center","top"],[N+h,0,"start","middle"]),4),Y=X[0],ne=X[1],ve=X[2],ye=X[3];v.maybeAppendByClassName(L2.label,"text").styles((0,se.pi)((0,se.pi)({},M),{x:Y,y:ne,text:p(T).toString(),textAlign:ve,textBaseline:ye}))})},t}(uh),AD={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},uG=Cg({},AD,{}),cG=Cg({},AD,ym(TD,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),fG=.01,Ude=.5,Rh=X0({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function hG(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function dG(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(s,l,c){var h=r[c%r.length];return s+=" ".concat(e[c],":").concat(h).concat(c<i-1?" ".concat(e[c+1],":").concat(h):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function CD(e,t){var n=(0,se.CR)(hG(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var N2=X0({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function OD(e){var t=e.orientation,n=e.size,r=e.length;return xm(t,[r,n],[n,r])}function MD(e){var t=e.type,n=(0,se.CR)(OD(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function pG(e){return MD(e)}function vG(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,s;if(Kd(n)){var l=20;s=new Array(l).fill(0).map(function(p,v,y){return n(v/(y.length-1))})}else s=n;var c=s.length,h=s.map(function(p){return k0(p).toString()});return c?c===1?h[0]:r?dG(i,h,t):h.reduce(function(p,v,y){return p+=" ".concat(y/(c-1),":").concat(v)},"l(".concat(xm(t,"0","270"),")")):""}function mG(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,se.CR)(OD(e),2),i=r[0],s=r[1],l=(0,se.CR)(n,2),c=l[0],h=l[1],p=xm(t,c*i,0),v=xm(t,0,c*s),y=xm(t,h*i,i),b=xm(t,s,h*s);return[["M",p,v],["L",p,b],["L",y,b],["L",y,v],["Z"]]}function gG(e,t){var n=Vs(t,"track");e.maybeAppendByClassName(N2.track,"path").styles((0,se.pi)({d:MD(t)},n))}function yG(e,t){var n=Vs(t,"selection"),r=vG(t),i=e.maybeAppendByClassName(N2.selection,"path").styles((0,se.pi)({d:pG(t),fill:r},n)),s=i.maybeAppendByClassName(N2.clipPath,"path").styles({d:mG(t)}).node();i.style("clipPath",s)}var _G=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=hs(r).maybeAppendByClassName(N2.trackGroup,"g");gG(i,n);var s=hs(r).maybeAppendByClassName(N2.selectionGroup,"g");yG(s,n)},t}(uh);function bG(e){return{min:Math.min.apply(Math,(0,se.ev)([],(0,se.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(e.map(function(t){return t.value})),!1))}}var xG=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,cG)||this;return r.eventToOffsetScale=new hd({}),r.innerRibbonScale=new hd({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var s=r.attributes,l=s.data,c=s.block;i.stopPropagation();var h=r.getValueByCanvasPoint(i);if(c){var p=CD(l.map(function(b){var T=b.value;return T}),h).range,v=r.getRealSelection(p);r.showIndicator((p[0]+p[1])/2,"".concat(v[0],"-").concat(v[1])),r.dispatchIndicated(h,p)}else{var y=r.getTickValue(h);r.showIndicator(y,"".concat(r.getRealValue(y))),r.dispatchIndicated(y)}},r.onDragStart=function(i){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var s=r.target;r.updateMouse();var l=(0,se.CR)(r.selection,2),c=l[0],h=l[1],p=r.getTickValue(r.getValueByCanvasPoint(i)),v=p-r.prevValue;s==="start"?c!==p&&r.updateSelection(p,h):s==="end"?h!==p&&r.updateSelection(c,p):s==="ribbon"&&v!==0&&(r.prevValue=p,r.updateSelection(v,v,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Zu(0,0,r,i)},t.prototype.render=function(n,r){var i=this,s=n.showLabel;this.renderTitle(hs(r));var l=this.availableSpace,c=l.x,h=l.y,p=hs(r).maybeAppendByClassName(Rh.contentGroup,"g").styles({transform:"translate(".concat(c,", ").concat(h,")")}),v=p.maybeAppendByClassName(Rh.labelGroup,"g").styles({zIndex:1});Np(!!s,v,function(b){i.renderLabel(b)});var y=p.maybeAppendByClassName(Rh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=p.maybeAppendByClassName(Rh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(y),this.renderIndicator(p),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:bG(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,se.CR)(this.selection,2),r=n[0],i=n[1],s=this.ribbonScale;return[s.map(r),s.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,i]:s,c=(0,se.CR)(l,2),h=c[0],p=c[1];return[h,p]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return xm(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,s=r.titleText,l=r.width,c=r.height,h=Vs(this.attributes,"title"),p=(0,se.pi)((0,se.pi)({},h),{width:l,height:c,text:s}),v=this;n.selectAll(Rh.title.class).data(i?[s]:[]).join(function(y){return y.append(function(){return new q4({style:p})}).attr("className",Rh.title.name).each(function(){v.title=this})},function(y){return y.update(p)},function(y){return y.each(function(){v.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Zu(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Zu(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(lu.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=i.width,l=i.height;return this.cacheLabelBBox=new Zu(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,s=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,c=l.width,h=l.height,p=this.ifHorizontal(h,c)+s+this.labelFixedSpacing,v=this.ifHorizontal(c,h);return{width:c,height:h,size:p,length:v}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,s=this.availableSpace,l=s.width,c=s.height,h=this.labelShape,p=h.size,v=h.length,y=(0,se.CR)(this.ifHorizontal([c,l],[l,c]),2),b=y[0],T=y[1],M=r?this.handleShape:{size:0,length:0},R=M.size,I=M.length,N=this.handleOffsetRatio,z=0,H=this.labelPosition;i?z=i:["bottom","right"].includes(H)?z=Math.min(b-p,(b-R)/N):b*(1-N)>R?z=Math.max(b-p,0):z=Math.max((b-p-R)/N,0);var X=Math.max(I,v),Y=T-X,ne=(0,se.CR)(this.ifHorizontal([Y,z],[z,Y]),2),ve=ne[0],ye=ne[1],De=["top","left"].includes(H)?p:0,Ye=(0,se.CR)(this.ifHorizontal([X/2,De],[De,X/2]),2),Qe=Ye[0],yt=Ye[1];return new Zu(Qe,yt,ve,ye)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,s=r.type,l=r.orientation,c=r.color,h=r.block,p=Vs(this.attributes,"ribbon"),v=this.range,y=v.min,b=v.max,T=this.ribbonBBox,M=T.x,R=T.y,I=this.ribbonShape,N=I.length,z=I.size,H=Cg({transform:"translate(".concat(M,", ").concat(R,")"),length:N,size:z,type:s,orientation:l,color:c,block:h,partition:i.map(function(X){return(X.value-y)/(b-y)}),range:this.ribbonRange},p);this.ribbon=n.maybeAppendByClassName(Rh.ribbon,function(){return new _G({style:H})}).update(H)},t.prototype.getHandleClassName=function(n){return"".concat(Rh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,s=Vs(this.attributes,"handle"),l=(0,se.CR)(this.selection,2),c=l[0],h=l[1],p=(0,se.pi)((0,se.pi)({},s),{orientation:i}),v=s.shape,y=v===void 0?"slider":v,b=y==="basic"?lG:_D,T=this;this.handlesGroup.selectAll(Rh.handle.class).data(r?[{value:c,type:"start"},{value:h,type:"end"}]:[],function(M){return M.type}).join(function(M){return M.append(function(){return new b({style:p})}).attr("className",function(R){var I=R.type;return"".concat(Rh.handle," ").concat(T.getHandleClassName(I))}).each(function(R){var I=R.type,N=R.value;this.update({labelText:N});var z="".concat(I,"Handle");T[z]=this,this.addEventListener("pointerdown",T.onDragStart(I))})},function(M){return M.update(p).each(function(R){var I=R.value;this.update({labelText:I})})},function(M){return M.each(function(R){var I=R.type,N="".concat(I,"Handle");T[N]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,se.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Zu(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,s=this.endHandle.getBBox(),l=s.width,c=s.height,h=(0,se.CR)([Math.max(r,l),Math.max(i,c)],2),p=h[0],v=h[1];return this.cacheHandleBBox=new Zu(0,0,p,v),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,s=(0,se.CR)(this.ifHorizontal([i,r],[r,i]),2),l=s[0],c=s[1];return{width:r,height:i,size:l,length:c}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,c=s.y,h=this.ribbonShape.size,p=this.getOffset(r),v=(0,se.CR)(this.ifHorizontal([l+p,c+h*this.handleOffsetRatio],[l+h*this.handleOffsetRatio,c+p]),2),y=v[0],b=v[1],T=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();T==null||T.update({transform:"translate(".concat(y,", ").concat(b,")"),formatter:i})},t.prototype.renderIndicator=function(n){var r=Vs(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(Rh.indicator,function(){return new NH({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,s,l,c){var h,p,v=(h=s==null?void 0:s.id)!==null&&h!==void 0?h:l.toString();if(i.push((0,se.pi)((0,se.pi)({},s),{id:v,index:l,type:"value",label:(p=s==null?void 0:s.label)!==null&&p!==void 0?p:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<c.length-1){var y=c[l+1],b=(0,se.CR)([s.value,y.value],2),T=b[0],M=b[1],R=(T+M)/2;i.push((0,se.pi)((0,se.pi)({},s),{id:v,index:l,type:"range",range:[T,M],label:[T,M].join("~"),value:n.ribbonScale.map(R)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,se.CR)(["center","middle"],2),r=n[0],i=n[1],s=this.labelPosition;return s==="top"?i="bottom":s==="bottom"?i="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,s=i===void 0?!1:i,l=r.labelFilter,c=r.labelFormatter,h=Vs(this.attributes,"tick"),p=Vs(this.attributes,"label"),v=p.align,y=Cg((0,se.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),ym(h,"tick"),ym(p,"label"),{data:this.labelData}),b={tickFilter:function(M,R,I){return(M==null?void 0:M.type)!=="value"?!1:l?l(M,M.index,I.filter(function(N){return N.type!=="value"})):!0},labelFilter:function(M,R,I){return(M==null?void 0:M.type)!==v?!1:l?l(M,M.index,I.filter(function(N){return N.type===v})):!0},labelFormatter:c},T=(0,se.pi)((0,se.pi)((0,se.pi)({},y),b),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Rh.label,function(){return new TM({style:T})}).node(),this.label.update(T,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,s=n.labelSpacing,l=n.tickLength,c=this.ribbonShape.size,h=this.labelPosition,p=this.labelFixedSpacing,v=(0,se.CR)([0,0,0],3),y=v[0],b=v[1],T=v[2],M=l!=null?l:c;return r?(T=M,b=p,i==="positive"?h==="right"?(y=M,T=M):h==="bottom"&&(y=T):i==="negative"&&(h==="top"||h==="left")&&(y=c)):i==="positive"?h==="right"?b=M:h==="bottom"&&(y=c+p,b=s):i==="negative"&&(h==="left"||h==="top")&&(b=s),{offset:y,spacing:b,tickLength:T}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,s=r.y,l=r.width,c=r.height,h=this.labelAxisStyle,p=h.offset,v=h.spacing,y=h.tickLength,b=(0,se.CR)(this.ifHorizontal([[i,s+p],[i+l,s+p]],[[i+p,s+c],[i+p,s]]),2),T=b[0],M=b[1];this.label.update({startPos:T,endPos:M,tickLength:y,labelSpacing:v},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,c=s.max,h=this.ribbonBBox,p=h.x,v=h.y,y=(0,d.Z)(n,l,c),b=this.getOffset(y),T=this.ifHorizontal([b+p,v],[p,b+v]);this.indicator.update({x:T[0],y:T[1],position:this.ifHorizontal("top","left"),labelText:r}),A2(this.indicator.node())},t.prototype.hideIndicator=function(){Dy(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var s;i===void 0&&(i=!1);var l=(0,se.CR)(this.selection,2),c=l[0],h=l[1],p=(0,se.CR)([n,r],2),v=p[0],y=p[1];i&&(v+=c,y+=h);var b=this.range,T=b.min,M=b.max;s=(0,se.CR)(sG([T,M],[v,y],this.selection),2),v=s[0],y=s[1],this.update({defaultValue:[v,y]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,s=i.min,l=i.max;return Fs(r)?cT((l-s)*fG,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,s=r.block,l=this.range.min;return s?CD(i.map(function(c){var h=c.value;return h}),n).tick:rG(n,this.step,l)},t.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,s=r.max,l=(0,se.CR)(this.ribbon.node().getPosition(),2),c=l[0],h=l[1],p=this.ifHorizontal(c,h),v=this.ifHorizontal.apply(this,(0,se.ev)([],(0,se.CR)(fT(n)),!1)),y=v-p,b=(0,d.Z)(this.getOffset(y,!0),i,s);return b},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=this.ribbonShape.length,h=this.eventToOffsetScale;return h.update({domain:[s,l],range:[0,c]}),r?h.invert(n):h.map(n)},t.prototype.getRealSelection=function(n){var r=this.range.max,i=(0,se.CR)(n,2),s=i[0],l=i[1];return this.ifHorizontal([s,l],[r-l,r-s])},t.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},t.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new au("valuechange",{detail:{value:n}});this.dispatchEvent(r)},t.prototype.dispatchIndicated=function(n,r){var i=this,s=this.range.max,l=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:s-n,range:r?i.getRealSelection(r):void 0}}),c=new au("indicate",{detail:l});this.dispatchEvent(c)},t}(uh);class F2 extends I2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:Q_}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,s]=n;return!(0,Yl.Z)(i)||!(0,Yl.Z)(s)?[]:t(i,s,r)}clone(){return new F2(this.options)}}class Db extends I2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!oT(t))return this.options.unknown;const n=AM(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new Db(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function B2(e){return(0,Sa.Z)(e)?0:Qa(e)?e.length:Object.keys(e).length}var EG=function(e,t){if(!Qa(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},RD=EG;function k2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const SG=[1,5,2,2.5,4,3],jde=null,PD=Number.EPSILON*100;function wG(e,t){return(e%t+t)%t}function TG(e){return Math.round(e*1e12)/1e12}function AG(e,t,n,r,i,s){const l=B2(t),c=RD(t,e);let h=0;const p=wG(r,s);return(p<PD||s-p<PD)&&r<=0&&i>=0&&(h=1),1-c/(l-1)-n+h}function CG(e,t,n){const r=B2(t);return 1-RD(t,e)/(r-1)-n+1}function OG(e,t,n,r,i,s){const l=(e-1)/(s-i),c=(t-1)/(Math.max(s,r)-Math.min(n,i));return 2-Math.max(l/c,c/l)}function MG(e,t){return e>=t?2-(e-1)/(t-1):1}function RG(e,t,n,r){const i=t-e;return 1-.5*(vf(t-r,2)+vf(e-n,2))/vf(.1*i,2)}function PG(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-vf(i,2)/vf(.1*r,2)}return 1}function IG(){return 1}const DM=(e,t,n=5,r=!0,i=SG,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!l)return[];if(t-e<1e-15||l===1)return[e];const c={score:-2,lmin:0,lmax:0,lstep:0};let h=1;for(;h<1/0;){for(let M=0;M<i.length;M+=1){const R=i[M],I=CG(R,i,h);if(s[0]*I+s[1]+s[2]+s[3]<c.score){h=1/0;break}let N=2;for(;N<1/0;){const z=MG(N,l);if(s[0]*I+s[1]+s[2]*z+s[3]<c.score)break;const H=(t-e)/(N+1)/h/R;let X=Math.ceil(Math.log10(H));for(;X<1/0;){const Y=h*R*vf(10,X),ne=PG(e,t,Y*(N-1));if(s[0]*I+s[1]*ne+s[2]*z+s[3]<c.score)break;const ve=Math.floor(t/Y)*h-(N-1)*h,ye=Math.ceil(e/Y)*h;if(ve<=ye){const De=ye-ve;for(let Ye=0;Ye<=De;Ye+=1){const yt=(ve+Ye)*(Y/h),qe=yt+Y*(N-1),ut=Y,ft=AG(R,i,h,yt,qe,ut),mt=RG(e,t,yt,qe),Xt=OG(N,l,e,t,yt,qe),Mt=IG(),kt=s[0]*ft+s[1]*mt+s[2]*Xt+s[3]*Mt;kt>c.score&&(!r||yt<=e&&qe>=t)&&(c.lmin=yt,c.lmax=qe,c.lstep=ut,c.score=kt)}}X+=1}N+=1}}h+=1}const p=k2(c.lmax),v=k2(c.lmin),y=k2(c.lstep),b=Math.floor(TG((p-v)/y))+1,T=new Array(b);T[0]=k2(v);for(let M=1;M<b;M+=1)T[M]=k2(T[M-1]+y);return T};class hT extends Db{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:DM}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=tD(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*i-(s-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||s]}getThresholds(){return this.thresholds}clone(){return new hT(this.options)}}function DG(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),s=e[i],l=e[i+1];return s+(l-s)*(r-i)}function LG(e,t,n=!1){const r=e;n||r.sort((s,l)=>s-l);const i=[];for(let s=1;s<t;s+=1)i.push(DG(r,s/t));return i}class dT extends Db{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:DM}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=LG(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,s=i[0],l=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new dT(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,s=n[0],l=n[i];return r(s,l,t)}}var NG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function FG(e,t,n){return e.size=t,vH(n)?e.height=t:e.width=t,e}function BG(e,t,n){const{size:r}=t,i=lD(e,t,n);return FG(i,r,i.orientation)}function kG(e){return t=>({value:t/e,label:String(t)})}function zG(e,t,n,r,i){const s=t.thresholds,l=kG(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...s,r].map(l)})}function UG(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((s,l)=>({value:l,label:s}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(s,l)=>l>0&&l<i.length-1})}function LM(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],Co(t)];return[n,r]}function jG(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[k0(t).toString()]})),r}function VG(e,t,n,r,i,s){const{length:l}=e,c=n||r,h=i.color?s.legendContinuous.ribbonFill||"black":s.color,p=t||jG(c,h),[v,y]=LM(p),[b,T]=LM([t,n,r].filter(M=>M!==void 0).find(M=>!(M instanceof F2)));return Object.assign(Object.assign({},e),{domain:[b,T],data:p.getTicks().map(M=>({value:M})),color:new Array(Math.floor(l)).fill(0).map((M,R)=>{const I=(y-v)/(l-1)*R+v,N=p.map(I)||h,z=r?r.map(I):1;return N.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(H,X,Y,ne)=>`rgba(${X}, ${Y}, ${ne}, ${z})`)})})}function HG(e,t,n,r,i,s){const l=_m(e,"color"),c=BG(n,r,i);if(l instanceof Db){const{range:v}=l.getOptions(),[y,b]=LM(l);return l instanceof hT||l instanceof dT?zG(c,l,y,b,v):UG(c,l,v)}const h=_m(e,"size"),p=_m(e,"opacity");return VG(c,l,h,p,t,s)}const Fy=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,style:h,crossPadding:p,padding:v}=e,y=NG(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:b,value:T,theme:M,scale:R})=>{const{bbox:I}=T,{x:N,y:z,width:H,height:X}=I,Y=aD(s,n),{legendContinuous:ne={}}=M,ve=uT(Object.assign({},ne,Object.assign(Object.assign({titleText:lT(c),labelAlign:"value",labelFormatter:typeof t=="string"?De=>nn(t)(De.label):t},HG(b,R,T,e,Fy,M)),h),y)),ye=new sD({style:Object.assign(Object.assign({x:N,y:z,width:H,height:X},Y),{subOptions:ve})});return ye.appendChild(new xG({className:"legend-continuous",style:ve})),ye}};Fy.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const ID=e=>(...t)=>Fy(Object.assign({},{block:!0},e))(...t);ID.props=Object.assign(Object.assign({},Fy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const NM=e=>t=>{const{scales:n}=t,r=_m(n,"size");return Fy(Object.assign({},{type:"size",data:r.getTicks().map((i,s)=>({value:i,label:String(i)}))},e))(t)};NM.props=Object.assign(Object.assign({},Fy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const DD=e=>NM(Object.assign({},{block:!0},e));DD.props=Object.assign(Object.assign({},Fy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var GG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const LD=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:s,paddingRight:l,paddingTop:c,paddingBottom:h,padding:p,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,margin:R,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,data:X,coordinate:Y,theme:ne,component:ve,interaction:ye,x:De,y:Ye,z:Qe,key:yt,frame:qe,labelTransform:ut,parentKey:ft,clip:mt,viewStyle:Xt,title:Mt}=t,kt=GG(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:De,y:Ye,z:Qe,key:yt,width:n,height:r,depth:i,padding:p,paddingLeft:s,paddingRight:l,paddingTop:c,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,paddingBottom:h,theme:ne,coordinate:Y,component:ve,interaction:ye,frame:qe,labelTransform:ut,margin:R,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,parentKey:ft,clip:mt,style:Xt},!e&&{title:Mt}),{marks:[Object.assign(Object.assign(Object.assign({},kt),{key:`${yt}-0`,data:X}),e&&{title:Mt})]})]};LD.props={};var WG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Lb(e){return(t,...n)=>Jr({},e(t,...n),t)}function Nb(e){return(t,...n)=>Jr({},t,e(t,...n))}function FM(e,t){if(!e)return t;if(Array.isArray(e))return e;const{value:n=t}=e,r=WG(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}var BM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ND=()=>e=>{const{children:t}=e,n=BM(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:s={},legend:l={},encode:c={},transform:h=[]}=n,p=BM(n,["data","scale","axis","legend","encode","transform"]),v=t.map(y=>{var{data:b,scale:T={},axis:M={},legend:R={},encode:I={},transform:N=[]}=y,z=BM(y,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:FM(b,r),scale:Jr({},i,T),encode:Jr({},c,I),transform:[...h,...N],axis:M&&s?Jr({},s,M):!1,legend:R&&l?Jr({},l,R):!1},z)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]};ND.props={};function Ic([e,t],[n,r]){return[e-n,t-r]}function pT([e,t],[n,r]){return[e+n,t+r]}function sc([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function $0([e,t]){return Math.atan2(t,e)}function Fb([e,t]){return $0([e,t])+Math.PI/2}function FD(e,t){const n=$0(e),r=$0(t);return n<r?r-n:Math.PI*2-(n-r)}function kM(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[c,h]of e)t=Math.min(c,t),n=Math.max(c,n),r=Math.min(h,r),i=Math.max(h,i);const s=n-t,l=i-r;return[t,r,s,l]}function BD([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function sa(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function ZG(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function XG(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*sc(e,t):r,s=Math.PI/6,l=Math.atan2(t[1]-e[1],t[0]-e[0]),c=Math.PI/2-l-s,h=[t[0]-i*Math.sin(c),t[1]-i*Math.cos(c)],p=l-s,v=[t[0]-i*Math.cos(p),t[1]-i*Math.sin(p)];return[h,v]}function z2(e,t,n,r,i){const s=$0(Ic(r,t))+Math.PI,l=$0(Ic(r,n))+Math.PI;return e.arc(r[0],r[1],i,s,l,l-s<0),e}function kD(e,t,n,r="y",i="between",s=!1){const l=(I,N)=>I==="y"||I===!0?N?180:90:N?90:0,c=r==="y"||r===!0?n:t,h=l(r,s),p=fr(c),[v,y]=Rg(p,I=>c[I]),b=new hd({domain:[v,y],range:[0,100]}),T=I=>(0,Yl.Z)(c[I])&&!Number.isNaN(c[I])?b.map(c[I]):0,M={between:I=>`${e[I]} ${T(I)}%`,start:I=>I===0?`${e[I]} ${T(I)}%`:`${e[I-1]} ${T(I)}%, ${e[I]} ${T(I)}%`,end:I=>I===e.length-1?`${e[I]} ${T(I)}%`:`${e[I]} ${T(I)}%, ${e[I+1]} ${T(I)}%`},R=p.sort((I,N)=>T(I)-T(N)).map(M[i]||M.between).join(",");return`linear-gradient(${h}deg, ${R})`}function vT(e){const[t,n,r,i]=e;return[i,t,n,r]}function e1(e,t,n){const[r,i,,s]=Ru(e)?vT(t):t,[l,c]=n,h=e.getCenter(),p=Fb(Ic(r,h)),v=Fb(Ic(i,h)),y=v===p&&l!==c?v+Math.PI*2:v;return{startAngle:p,endAngle:y-p>=0?y:Math.PI*2+y,innerRadius:sc(s,h),outerRadius:sc(r,h)}}function Vde(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function zM(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function zD(e,t){if(!_o(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function UM(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,s,l=0]]=e;return[(t+i)/2,(n+s)/2,(r+l)/2]}function UD(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function YG(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var Hde=Array.prototype.slice;function jD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xu(e){return function(){return e}}function VD(e){this._context=e}VD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function U2(e){return new VD(e)}const jM=Math.PI,VM=2*jM,t1=1e-6,$G=VM-t1;function HD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function qG(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return HD;const n=vf(10,t);return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class mT{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?HD:qG(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,c=this._y1,h=r-t,p=i-n,v=l-t,y=c-n,b=v*v+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>t1)if(!(Math.abs(y*h-p*v)>t1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let T=r-l,M=i-c,R=h*h+p*p,I=T*T+M*M,N=Math.sqrt(R),z=Math.sqrt(b),H=s*Math.tan((jM-Math.acos((R+b-I)/(2*N*z)))/2),X=H/z,Y=H/N;Math.abs(X-1)>t1&&this._append`L${t+X*v},${n+X*y}`,this._append`A${s},${s},0,0,${+(y*T>v*M)},${this._x1=t+Y*h},${this._y1=n+Y*p}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),h=r*Math.sin(i),p=t+c,v=n+h,y=1^l,b=l?i-s:s-i;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>t1||Math.abs(this._y1-v)>t1)&&this._append`L${p},${v}`,r&&(b<0&&(b=b%VM+VM),b>$G?this._append`A${r},${r},0,1,${y},${t-c},${n-h}A${r},${r},0,1,${y},${this._x1=p},${this._y1=v}`:b>t1&&this._append`A${r},${r},0,${+(b>=jM)},${y},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function q0(){return new mT}q0.prototype=mT.prototype;function Gde(e=3){return new mT(+e)}function HM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new mT(t)}function GD(e){return e[0]}function WD(e){return e[1]}function By(e,t){var n=Xu(!0),r=null,i=U2,s=null,l=HM(c);e=typeof e=="function"?e:e===void 0?GD:Xu(e),t=typeof t=="function"?t:t===void 0?WD:Xu(t);function c(h){var p,v=(h=jD(h)).length,y,b=!1,T;for(r==null&&(s=i(T=l())),p=0;p<=v;++p)!(p<v&&n(y=h[p],p,h))===b&&((b=!b)?s.lineStart():s.lineEnd()),b&&s.point(+e(y,p,h),+t(y,p,h));if(T)return s=null,T+""||null}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Xu(+h),c):e},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Xu(+h),c):t},c.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Xu(!!h),c):n},c.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),c):i},c.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),c):r},c}function Bb(e){const t=typeof e=="function"?e:e.render;return class extends wv{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var GM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function KG(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let s=0,l=0;return t>0&&(s=t),r<0&&(s=r),n>0&&(l=n),i<0&&(l=i),[s,l]}function QG(e,t=[]){const[n=0,r=0,i=n,s=r]=t,l=e.parentNode,c=l.getEulerAngles();l.setEulerAngles(0);const{min:h,halfExtents:p}=e.getLocalBounds(),[v,y]=h,[b,T]=p;return l.setEulerAngles(c),{x:v-s,y:y-n,width:b*2+s+r,height:T*2+n+i}}const JG=(e,t,n)=>{const r=sc(e,t),i=sc(t,n),s=sc(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(s,2))/(2*r*i)};function eW(e,t,n,r){const[[i,s],[l,c]]=t,[h,p]=KG(e);if(i===l&&s===c)return By()([[0,0],[h,p]]);const v=[[i-l,s-c]].concat(n.length?n:[[0,0]]),y=[r[0]-l,r[1]-c],[b,T]=v;if(JG(y,b,T)>0){const M=(()=>{const{min:R,max:I}=e.getLocalBounds(),N=b[0]+(b[1]-y[1])*(b[1]-0)/(b[0]-y[0]);return I[0]<y[0]?Math.min(I[0],N):Math.max(R[0],N)})();v.splice(1,1,[M,0])}return By()(v)}const ZD=Bb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:s,labelTransform:l,labelTransformOrigin:c,x:h,y:p,x0:v=h,y0:y=p,text:b,background:T,connector:M,startMarker:R,endMarker:I,coordCenter:N,innerHTML:z}=t,H=GM(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(e.style.transform=`translate(${h}, ${p})`,[h,p,v,y].some(mt=>!(0,Yl.Z)(mt))){e.children.forEach(mt=>mt.remove());return}const X=bo(H,"background"),{padding:Y}=X,ne=GM(X,["padding"]),ve=bo(H,"connector"),{points:ye=[]}=ve,De=GM(ve,["points"]),Ye=[[+v,+y],[+h,+p]];let Qe;z?Qe=Ta(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",z).call(sa,Object.assign({transform:l,transformOrigin:c},H)).node():Qe=Ta(e).maybeAppend("text","text").style("zIndex",0).style("text",b).call(sa,Object.assign({textBaseline:"middle",transform:l,transformOrigin:c},H)).node();const yt=Ta(e).maybeAppend("background","rect").style("zIndex",-1).call(sa,QG(Qe,Y)).call(sa,T?ne:{}).node(),qe=eW(yt,Ye,ye,N),ut=R&&new jl({id:"startMarker",style:Object.assign({x:0,y:0},bo(H,"startMarker"))}),ft=I&&new jl({id:"endMarker",style:Object.assign({x:0,y:0},bo(H,"endMarker"))});Ta(e).maybeAppend("connector","path").style("zIndex",0).style("d",qe).style("markerStart",ut).style("markerEnd",ft).call(sa,M?De:{})});function kb(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function tW(e,t,n,r){const i=t.length/2,s=t.slice(0,i),l=t.slice(i);let c=kb(s,(T,M)=>Math.abs(T[1]-l[M][1]));c=Math.max(Math.min(c,i-2),1);const h=T=>[s[T][0],(s[T][1]+l[T][1])/2],p=h(c),v=h(c-1),y=h(c+1),b=$0(Ic(y,v))/Math.PI*180;return{x:p[0],y:p[1],transform:`rotate(${b})`,textAlign:"center",textBaseline:"middle"}}function XD(e,t,n,r){const{bounds:i}=n,[[s,l],[c,h]]=i,p=c-s,v=h-l,y=b=>{const{x:T,y:M}=b,R=Vw(n.x,p),I=Vw(n.y,v);return Object.assign(Object.assign({},b),{x:(R||T)+s,y:(I||M)+l})};return y(e==="left"?{x:0,y:v/2,textAlign:"start",textBaseline:"middle"}:e==="right"?{x:p,y:v/2,textAlign:"end",textBaseline:"middle"}:e==="top"?{x:p/2,y:0,textAlign:"center",textBaseline:"top"}:e==="bottom"?{x:p/2,y:v,textAlign:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:e==="top-right"?{x:p,y:0,textAlign:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:v,textAlign:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:p,y:v,textAlign:"end",textBaseline:"bottom"}:{x:p/2,y:v/2,textAlign:"center",textBaseline:"middle"})}function YD(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c}=n,h=r.getCenter(),p=e1(r,t,[i,s]),{innerRadius:v,outerRadius:y,startAngle:b,endAngle:T}=p,M=e==="inside"?(b+T)/2:T,R=WM(M,l,c),I=(()=>{const[N,z]=t,H=v+(y-v)*.5,[X,Y]=e==="inside"?j2(h,M,H):BD(N,z);return{x:X,y:Y}})();return Object.assign(Object.assign({},I),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:R})}function j2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function WM(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function nW(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c,radius:h=.5,offset:p=0}=n,v=e1(r,t,[i,s]),{startAngle:y,endAngle:b}=v,T=r.getCenter(),M=(y+b)/2,I={textAlign:"center",textBaseline:"middle",rotate:WM(M,l,c)},{innerRadius:N,outerRadius:z}=v,X=N+(z-N)*h+p,[Y,ne]=j2(T,M,X);return Object.assign({x:Y,y:ne},I)}function $D(e){return e===void 0?null:e}function qD(e,t,n,r){const{bounds:i}=n,[s]=i;return{x:$D(s[0]),y:$D(s[1])}}function Pg(e,t,n,r){const{bounds:i}=n;return i.length===1?qD(e,t,n,r):(ks(r)?YD:Pf(r)?nW:XD)(e,t,n,r)}function rW(e,t,n,r,i){const[s,l]=j2(e,t,n),[c,h]=j2(e,t,r),p=Math.sin(t)>0?1:-1;return[[s,l],[c,h],[c+p*i,h]]}function KD(e,t,n){const r=e1(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:s}=r;return i+(s-i)}function QD(e,t,n){const r=e1(n,e,[t.y,t.y1]),{startAngle:i,endAngle:s}=r;return(i+s)/2}function ZM(e,t,n,r){const{autoRotate:i,rotateToAlignArc:s,offset:l=0,connector:c=!0,connectorLength:h=l,connectorLength2:p=0,connectorDistance:v=0}=n,y=r.getCenter(),b=QD(t,n,r),T=Math.sin(b)>0?1:-1,M=WM(b,i,s),R={textAlign:T>0||ks(r)?"start":"end",textBaseline:"middle",rotate:M},I=KD(t,n,r),N=I+(c?h:l),[[z,H],[X,Y],[ne,ve]]=rW(y,b,I,N,c?p:0),ye=c?+v*T:0,De=ne+ye,Ye=ve,Qe={connector:c,connectorPoints:[[X-De,Y-Ye],[ne-De,ve-Ye]]};return Object.assign(Object.assign({x0:z,y0:H,x:ne+ye,y:ve},R),Qe)}function iW(e,t,n,r){const{bounds:i}=n;return i.length===1?qD(e,t,n,r):(ks(r)?YD:Pf(r)?ZM:XD)(e,t,n,r)}var oW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aW(e,t,n,r){if(!Pf(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=oW(ZM("outside",t,n,r),[]),h=r.getCenter(),p=KD(t,n,r),v=QD(t,n,r),y=p+i+s,b=Math.sin(v)>0?1:-1,T=h[0]+(y+ +l)*b,{x:M}=c,R=T-M;return c.x+=R,c.connectorPoints[0][0]-=R,c}var sW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lW(e,t,n,r){if(!Pf(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=sW(ZM("outside",t,n,r),[]),{x0:h,y0:p}=c,v=r.getCenter(),b=Xw(r)+i,T=Fb([h-v[0],p-v[1]]),M=Math.sin(T)>0?1:-1,[R,I]=j2(v,T,b);return c.x=R+(s+l)*M,c.y=I,c}var JD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uW(e,t){return e!==void 0?e:Pf(t)?"inside":Ru(t)?"right":"top"}function cW(e,t,n,r,i){const{position:s}=t,{render:l}=i,c=uW(s,n),p=r[l?"htmlLabel":c==="inside"?"innerLabel":"label"],v=Object.assign({},p,t),y=q[UD(c)];if(!y)throw new Error(`Unknown position: ${c}`);return Object.assign(Object.assign({},p),y(c,e,v,n,i))}const eL=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(s,l)=>{const{text:c,x:h,y:p,transform:v="",transformOrigin:y,className:b=""}=l,T=JD(l,["text","x","y","transform","transformOrigin","className"]),M=cW(s,l,n,r,e),{rotate:R=0,transform:I=""}=M,N=JD(M,["rotate","transform"]);return Ta(new ZD).call(sa,N).style("text",`${c}`).style("className",`${b} g2-label`).style("innerHTML",i?i(c,l.datum,l.index):void 0).style("labelTransform",`${I} rotate(${+R}) ${v}`.trim()).style("labelTransformOrigin",y).style("coordCenter",n.getCenter()).call(sa,T).node()}};eL.props={defaultMarker:"point"};function Dc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fW(e,t){return Array.from(t,n=>e[n])}function Ig(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const l of t){const c=V2(l[i],l[s]);if(c)return c}})):(n=e.map(n),r.sort((i,s)=>V2(n[i],n[s]))),fW(e,r)}return e.sort(tL(n))}function tL(e=Dc){if(e===Dc)return V2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function V2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var hW=function(e,t){if(!Qa(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},nL=hW;function dW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zb(e){let t,n,r;e.length!==2?(t=Dc,n=(c,h)=>Dc(e(c),h),r=(c,h)=>e(c)-h):(t=e===Dc||e===dW?e:pW,n=e,r=e);function i(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<0?p=y+1:v=y}while(p<v)}return p}function s(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<=0?p=y+1:v=y}while(p<v)}return p}function l(c,h,p=0,v=c.length){const y=i(c,h,p,v-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:l,right:s}}function pW(){return 0}function XM(e){return e===null?NaN:+e}function*vW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const rL=zb(Dc),mW=rL.right,gW=rL.left,yW=zb(XM).center;var _W=mW;function bW(e,t,n){return Math.min(n,Math.max(t,e))}function H2(e){return!!e.getBandWidth}function Ub(e,t,n){if(!H2(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),s=n?-1:0,l=e.getStep(),c=n?r:r.map(v=>v+l),h=gW(c,t),p=bW(h+s,0,i.length-1);return i[p]}function ky(e,t,n){if(!t)return e.getOptions().domain;if(!H2(e)){const h=Ig(t);if(!n)return h;const[p]=h,{range:v}=e.getOptions(),[y,b]=v,T=y>b?-1:1,M=e.invert(e.map(p)+T*n);return[p,M]}const{domain:r}=e.getOptions(),i=t[0],s=r.indexOf(i);if(n){const h=s+Math.round(r.length*n);return r.slice(s,h)}const l=t[t.length-1],c=r.indexOf(l);return r.slice(s,c+1)}function gT(e,t,n,r,i,s){const{x:l,y:c}=i,h=(T,M)=>{const[R,I]=s.invert(T);return[Ub(l,R,M),Ub(c,I,M)]},p=h([e,t],!0),v=h([n,r],!1),y=ky(l,[p[0],v[0]]),b=ky(c,[p[1],v[1]]);return[y,b]}function yT(e,t){const[n,r]=e,i=s=>s.getStep?s.getStep():0;return[t.map(n),t.map(r)+i(t)]}function xW(e,t,n){const{x:r,y:i}=t,[s,l]=e,c=yT(s,r),h=yT(l,i),p=[c[0],h[0]],v=[c[1],h[1]],[y,b]=n.map(p),[T,M]=n.map(v);return[y,b,T,M]}const iL=Math.abs,dd=Math.atan2,n1=Math.cos,EW=Math.max,YM=Math.min,Em=Math.sin,jb=Math.sqrt,pd=1e-12,G2=Math.PI,_T=G2/2,SW=2*G2;function wW(e){return e>1?0:e<-1?G2:Math.acos(e)}function oL(e){return e>=1?_T:e<=-1?-_T:Math.asin(e)}function TW(e){return e.innerRadius}function AW(e){return e.outerRadius}function CW(e){return e.startAngle}function OW(e){return e.endAngle}function MW(e){return e&&e.padAngle}function RW(e,t,n,r,i,s,l,c){var h=n-e,p=r-t,v=l-i,y=c-s,b=y*h-v*p;if(!(b*b<pd))return b=(v*(t-s)-y*(e-i))/b,[e+b*h,t+b*p]}function bT(e,t,n,r,i,s,l){var c=e-n,h=t-r,p=(l?s:-s)/jb(c*c+h*h),v=p*h,y=-p*c,b=e+v,T=t+y,M=n+v,R=r+y,I=(b+M)/2,N=(T+R)/2,z=M-b,H=R-T,X=z*z+H*H,Y=i-s,ne=b*R-M*T,ve=(H<0?-1:1)*jb(EW(0,Y*Y*X-ne*ne)),ye=(ne*H-z*ve)/X,De=(-ne*z-H*ve)/X,Ye=(ne*H+z*ve)/X,Qe=(-ne*z+H*ve)/X,yt=ye-I,qe=De-N,ut=Ye-I,ft=Qe-N;return yt*yt+qe*qe>ut*ut+ft*ft&&(ye=Ye,De=Qe),{cx:ye,cy:De,x01:-v,y01:-y,x11:ye*(i/Y-1),y11:De*(i/Y-1)}}function xT(){var e=TW,t=AW,n=Xu(0),r=null,i=CW,s=OW,l=MW,c=null,h=HM(p);function p(){var v,y,b=+e.apply(this,arguments),T=+t.apply(this,arguments),M=i.apply(this,arguments)-_T,R=s.apply(this,arguments)-_T,I=iL(R-M),N=R>M;if(c||(c=v=h()),T<b&&(y=T,T=b,b=y),!(T>pd))c.moveTo(0,0);else if(I>SW-pd)c.moveTo(T*n1(M),T*Em(M)),c.arc(0,0,T,M,R,!N),b>pd&&(c.moveTo(b*n1(R),b*Em(R)),c.arc(0,0,b,R,M,N));else{var z=M,H=R,X=M,Y=R,ne=I,ve=I,ye=l.apply(this,arguments)/2,De=ye>pd&&(r?+r.apply(this,arguments):jb(b*b+T*T)),Ye=YM(iL(T-b)/2,+n.apply(this,arguments)),Qe=Ye,yt=Ye,qe,ut;if(De>pd){var ft=oL(De/b*Em(ye)),mt=oL(De/T*Em(ye));(ne-=ft*2)>pd?(ft*=N?1:-1,X+=ft,Y-=ft):(ne=0,X=Y=(M+R)/2),(ve-=mt*2)>pd?(mt*=N?1:-1,z+=mt,H-=mt):(ve=0,z=H=(M+R)/2)}var Xt=T*n1(z),Mt=T*Em(z),kt=b*n1(Y),Tn=b*Em(Y);if(Ye>pd){var zn=T*n1(H),lr=T*Em(H),ir=b*n1(X),Hr=b*Em(X),Ti;if(I<G2)if(Ti=RW(Xt,Mt,ir,Hr,zn,lr,kt,Tn)){var ro=Xt-Ti[0],si=Mt-Ti[1],Xr=zn-Ti[0],mo=lr-Ti[1],ho=1/Em(wW((ro*Xr+si*mo)/(jb(ro*ro+si*si)*jb(Xr*Xr+mo*mo)))/2),Ho=jb(Ti[0]*Ti[0]+Ti[1]*Ti[1]);Qe=YM(Ye,(b-Ho)/(ho-1)),yt=YM(Ye,(T-Ho)/(ho+1))}else Qe=yt=0}ve>pd?yt>pd?(qe=bT(ir,Hr,Xt,Mt,T,yt,N),ut=bT(zn,lr,kt,Tn,T,yt,N),c.moveTo(qe.cx+qe.x01,qe.cy+qe.y01),yt<Ye?c.arc(qe.cx,qe.cy,yt,dd(qe.y01,qe.x01),dd(ut.y01,ut.x01),!N):(c.arc(qe.cx,qe.cy,yt,dd(qe.y01,qe.x01),dd(qe.y11,qe.x11),!N),c.arc(0,0,T,dd(qe.cy+qe.y11,qe.cx+qe.x11),dd(ut.cy+ut.y11,ut.cx+ut.x11),!N),c.arc(ut.cx,ut.cy,yt,dd(ut.y11,ut.x11),dd(ut.y01,ut.x01),!N))):(c.moveTo(Xt,Mt),c.arc(0,0,T,z,H,!N)):c.moveTo(Xt,Mt),!(b>pd)||!(ne>pd)?c.lineTo(kt,Tn):Qe>pd?(qe=bT(kt,Tn,zn,lr,b,-Qe,N),ut=bT(Xt,Mt,ir,Hr,b,-Qe,N),c.lineTo(qe.cx+qe.x01,qe.cy+qe.y01),Qe<Ye?c.arc(qe.cx,qe.cy,Qe,dd(qe.y01,qe.x01),dd(ut.y01,ut.x01),!N):(c.arc(qe.cx,qe.cy,Qe,dd(qe.y01,qe.x01),dd(qe.y11,qe.x11),!N),c.arc(0,0,b,dd(qe.cy+qe.y11,qe.cx+qe.x11),dd(ut.cy+ut.y11,ut.cx+ut.x11),N),c.arc(ut.cx,ut.cy,Qe,dd(ut.y11,ut.x11),dd(ut.y01,ut.x01),!N))):c.arc(0,0,b,Y,X,N)}if(c.closePath(),v)return c=null,v+""||null}return p.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-G2/2;return[n1(y)*v,Em(y)*v]},p.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Xu(+v),p):e},p.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Xu(+v),p):t},p.cornerRadius=function(v){return arguments.length?(n=typeof v=="function"?v:Xu(+v),p):n},p.padRadius=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Xu(+v),p):r},p.startAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Xu(+v),p):i},p.endAngle=function(v){return arguments.length?(s=typeof v=="function"?v:Xu(+v),p):s},p.padAngle=function(v){return arguments.length?(l=typeof v=="function"?v:Xu(+v),p):l},p.context=function(v){return arguments.length?(c=v==null?null:v,p):c},p}var ET=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aL(e,t,n,r,i={}){const{inset:s=0,radius:l=0,insetLeft:c=s,insetTop:h=s,insetRight:p=s,insetBottom:v=s,radiusBottomLeft:y=l,radiusBottomRight:b=l,radiusTopLeft:T=l,radiusTopRight:M=l,minWidth:R=-1/0,maxWidth:I=1/0,minHeight:N=-1/0}=i,z=ET(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!_o(r)&&!El(r)){const ye=!!Ru(r),[De,,Ye]=ye?vT(t):t,[Qe,yt]=De,[qe,ut]=Ic(Ye,De),ft=qe>0?Qe:Qe+qe,mt=ut>0?yt:yt+ut,Xt=Math.abs(qe),Mt=Math.abs(ut),kt=ft+c,Tn=mt+h,zn=Xt-(c+p),lr=Mt-(h+v),ir=ye?Ab(zn,N,1/0):Ab(zn,R,I),Hr=ye?Ab(lr,R,I):Ab(lr,N,1/0),Ti=ye?kt:kt-(ir-zn)/2,ro=ye?Tn-(Hr-lr)/2:Tn-(Hr-lr);return Ta(e.createElement("rect",{})).style("x",Ti).style("y",ro).style("width",ir).style("height",Hr).style("radius",[T,M,b,y]).call(sa,z).node()}const{y:H,y1:X}=n,Y=r.getCenter(),ne=e1(r,t,[H,X]),ve=xT().cornerRadius(l).padAngle(s*Math.PI/180);return Ta(e.createElement("path",{})).style("d",ve(ne)).style("transform",`translate(${Y[0]}, ${Y[1]})`).style("radius",l).style("inset",s).call(sa,z).node()}const W2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:s=!0}=e,l=ET(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b,radius:T=0}=y,M=ET(y,["color","radius"]),R=M.lineWidth||1,{stroke:I,radius:N=T,radiusTopLeft:z=N,radiusTopRight:H=N,radiusBottomRight:X=N,radiusBottomLeft:Y=N,innerRadius:ne=0,innerRadiusTopLeft:ve=ne,innerRadiusTopRight:ye=ne,innerRadiusBottomRight:De=ne,innerRadiusBottomLeft:Ye=ne,lineWidth:Qe=n==="stroke"||I?R:0,inset:yt=0,insetLeft:qe=yt,insetRight:ut=yt,insetBottom:ft=yt,insetTop:mt=yt,minWidth:Xt,maxWidth:Mt,minHeight:kt}=l,Tn=ET(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:zn=b,opacity:lr}=v,ir=[i?z:ve,i?H:ye,s?X:De,s?Y:Ye],Hr=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Ru(c)&&Hr.push(Hr.shift());const Ti=Object.assign(Object.assign({radius:N},Object.fromEntries(Hr.map((ro,si)=>[ro,ir[si]]))),{inset:yt,insetLeft:qe,insetRight:ut,insetBottom:ft,insetTop:mt,minWidth:Xt,maxWidth:Mt,minHeight:kt});return Ta(aL(h,p,v,c,Ti)).call(sa,M).style("fill","transparent").style(n,zn).style(zM(e),lr).style("lineWidth",Qe).style("stroke",I===void 0?zn:I).call(sa,Tn).node()}};W2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const PW={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function IW(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:PW[t]}function $M(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>$M(i,t,n,r))}function qM(e){$M(e,"visibility","hidden",!0)}function ST(e){$M(e,"visibility","visible",!0)}var Z2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zy(e){return Ta(e).selectAll(`.${va}`).nodes().filter(t=>!t.__removed__)}function sL(e,t){return KM(e,t).flatMap(({container:n})=>zy(n))}function KM(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function Sm(e){return Ta(e).select(`.${Ko}`).node()}function lL(e){if(e.tagName==="g")return e.getRenderBounds();const t=e.getGeometryBounds(),n=new Mc;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function QM(e,t){const{offsetX:n,offsetY:r}=t,i=lL(e),{min:[s,l],max:[c,h]}=i,p=n<s||n>c,v=r<l||r>h;return p||v?null:[n-s,r-l]}function JM(e,t){const{offsetX:n,offsetY:r}=t,[i,s,l,c]=DW(e);return[Math.min(l,Math.max(i,n))-i,Math.min(c,Math.max(s,r))-s]}function DW(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return[n,r,i,s]}function uL(e){return t=>t.__data__.color}function eR(e){return t=>t.__data__.x}function r1(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(s=>[wT(r.key,s.key),s.data])));return r=>{const{index:i,markKey:s,viewKey:l}=r.__data__;return n.get(wT(l,s))[i]}}function Dg(e,t=(r,i)=>r,n=(r,i,s)=>r.setAttribute(i,s)){const r="__states__",i="__ordinal__",s=v=>{const{[r]:y=[],[i]:b={}}=v,T=y.reduce((M,R)=>Object.assign(Object.assign({},M),e[R]),b);if(Object.keys(T).length!==0){for(const[M,R]of Object.entries(T)){const I=IW(v,M),N=t(R,v);n(v,M,N),M in b||(b[M]=I)}v[i]=b}},l=v=>{v[r]||(v[r]=[])};return{setState:(v,...y)=>{l(v),v[r]=[...y],s(v)},removeState:(v,...y)=>{l(v);for(const b of y){const T=v[r].indexOf(b);T!==-1&&v[r].splice(T,1)}s(v)},hasState:(v,y)=>(l(v),v[r].indexOf(y)!==-1)}}function LW(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function wT(e,t){return`${e},${t}`}function Vb(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(s=>s.marks.map(l=>[wT(s.key,l.key),l.state])),i={};for(const s of t){const[l,c]=Array.isArray(s)?s:[s,{}];i[l]=r.reduce((h,p)=>{const[v,y={}]=p,b=LW(y[l])?c:y[l];for(const[T,M]of Object.entries(b)){const R=h[T],I=(N,z,H,X)=>{const Y=wT(X.__data__.viewKey,X.__data__.markKey);return v!==Y?R==null?void 0:R(N,z,H,X):typeof M!="function"?M:M(N,z,H,X)};h[T]=I}return h},{})}return i}function X2(e,t){const n=new Map(e.map((i,s)=>[i,s])),r=t?e.map(t):e;return(i,s)=>{if(typeof i!="function")return i;const l=n.get(s),c=t?t(s):s;return i(c,l,r,s)}}function cL(e){var{link:t=!1,valueof:n=(v,y)=>v,coordinate:r}=e,i=Z2(e,["link","valueof","coordinate"]);const s="element-link";if(!t)return[()=>{},()=>{}];const l=v=>v.__data__.points,c=(v,y)=>{const[,b,T]=v,[M,,,R]=y;return[b,M,R,T]};return[v=>{var y;if(v.length<=1)return;const b=Ig(v,(T,M)=>{const{x:R}=T.__data__,{x:I}=M.__data__;return R-I});for(let T=1;T<b.length;T++){const M=q0(),R=b[T-1],I=b[T],[N,z,H,X]=c(l(R),l(I));M.moveTo(...N),M.lineTo(...z),M.lineTo(...H),M.lineTo(...X),M.closePath();const Y=xr(i,De=>n(De,R)),{fill:ne=R.getAttribute("fill")}=Y,ve=Z2(Y,["fill"]),ye=new ad({className:s,style:Object.assign({d:M.toString(),fill:ne,zIndex:-2},ve)});(y=R.link)===null||y===void 0||y.remove(),R.parentNode.appendChild(ye),R.link=ye}},v=>{var y;(y=v.link)===null||y===void 0||y.remove(),v.link=null}]}function fL(e,t,n){const r=i=>{const{transform:s}=e.style;return s?`${s} ${i}`:i};if(_o(n)){const{points:i}=e.__data__,[s,l]=Ru(n)?vT(i):i,c=n.getCenter(),h=Ic(s,c),p=Ic(l,c),v=$0(h),y=FD(h,p),b=v+y/2,T=t*Math.cos(b),M=t*Math.sin(b);return r(`translate(${T}, ${M})`)}return Ru(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function hL(e){var{document:t,background:n,scale:r,coordinate:i,valueof:s}=e,l=Z2(e,["document","background","scale","coordinate","valueof"]);const c="element-background";if(!n)return[()=>{},()=>{}];const h=(N,z,H)=>{const X=N.invert(z),Y=z+N.getBandWidth(X)/2,ne=N.getStep(X)/2,ve=ne*H;return[Y-ne+ve,Y+ne-ve]},p=(N,z)=>{const{x:H}=r;if(!H2(H))return[0,1];const{__data__:X}=N,{x:Y}=X,[ne,ve]=h(H,Y,z);return[ne,ve]},v=(N,z)=>{const{y:H}=r;if(!H2(H))return[0,1];const{__data__:X}=N,{y:Y}=X,[ne,ve]=h(H,Y,z);return[ne,ve]},y=(N,z)=>{const{padding:H}=z,[X,Y]=p(N,H),[ne,ve]=v(N,H),ye=[[X,ne],[Y,ne],[Y,ve],[X,ve]].map(yt=>i.map(yt)),{__data__:De}=N,{y:Ye,y1:Qe}=De;return aL(t,ye,{y:Ye,y1:Qe},i,z)},b=(N,z)=>{const{transform:H="scale(1.2, 1.2)",transformOrigin:X="center center",stroke:Y=""}=z,ne=Z2(z,["transform","transformOrigin","stroke"]),ve=Object.assign({transform:H,transformOrigin:X,stroke:Y},ne),ye=N.cloneNode(!0);for(const[De,Ye]of Object.entries(ve))ye.style[De]=Ye;return ye},T=()=>{const{x:N,y:z}=r;return[N,z].some(H2)};return[N=>{N.background&&N.background.remove();const z=xr(l,yt=>s(yt,N)),{fill:H="#CCD6EC",fillOpacity:X=.3,zIndex:Y=-2,padding:ne=.001,lineWidth:ve=0}=z,ye=Z2(z,["fill","fillOpacity","zIndex","padding","lineWidth"]),De=Object.assign(Object.assign({},ye),{fill:H,fillOpacity:X,zIndex:Y,padding:ne,lineWidth:ve}),Qe=(T()?y:b)(N,De);Qe.className=c,N.parentNode.parentNode.appendChild(Qe),N.background=Qe},N=>{var z;(z=N.background)===null||z===void 0||z.remove(),N.background=null},N=>N.className===c]}function Uy(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function NW(e){Uy(e,e.cursor)}function tR(e,t,n){return e.find(r=>Object.entries(t).every(([i,s])=>n(r)[i]===s))}function TT(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Y2(e,t=!1){const n=nL(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function dL(e){return e.querySelectorAll(".element")}function FW(e,t,n=0){const r=[["M",...t[1]]],i=TT(e,t[1]),s=TT(e,t[0]);return i===0?r.push(["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]),r}function AT(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function pL(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:s}=n,{markState:l}=t,c=Array.from(l.keys()).find(h=>h.key===r);if(c)return s?s.map(h=>c.data[h]):c.data[i]}function BW(e){return AT(e,t=>t.className==="component")}function kW(e){return AT(e,t=>t.className==="element")}function zW(e){return AT(e,t=>t.className==="label")}function ch(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:s}=i;if(!s)return;const{className:l}=s;if(l==="plot")return;const c=kW(s),h=BW(s),p=zW(s),v=c||h||p;if(!v)return;const{className:y,markType:b}=v,T=Object.assign(Object.assign({},i),{nativeEvent:!0});y==="element"?(T.data={data:pL(v,t)},n.emit(`element:${e}`,T),n.emit(`${b}:${e}`,T)):y==="label"?(T.data={data:v.attributes.datum},n.emit(`label:${e}`,T),n.emit(`${l}:${e}`,T)):(n.emit(`component:${e}`,T),n.emit(`${l}:${e}`,T))}}function vL(){return(e,t,n)=>{const{container:r,view:i}=e,s=ch(Dl.CLICK,i,n,ve=>ve.detail===1),l=ch(Dl.DBLCLICK,i,n,ve=>ve.detail===2),c=ch(Dl.POINTER_TAP,i,n),h=ch(Dl.POINTER_DOWN,i,n),p=ch(Dl.POINTER_UP,i,n),v=ch(Dl.POINTER_OVER,i,n),y=ch(Dl.POINTER_OUT,i,n),b=ch(Dl.POINTER_MOVE,i,n),T=ch(Dl.POINTER_ENTER,i,n),M=ch(Dl.POINTER_LEAVE,i,n),R=ch(Dl.POINTER_UPOUTSIDE,i,n),I=ch(Dl.DRAG_START,i,n),N=ch(Dl.DRAG,i,n),z=ch(Dl.DRAG_END,i,n),H=ch(Dl.DRAG_ENTER,i,n),X=ch(Dl.DRAG_LEAVE,i,n),Y=ch(Dl.DRAG_OVER,i,n),ne=ch(Dl.DROP,i,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",c),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",p),r.addEventListener("pointerover",v),r.addEventListener("pointerout",y),r.addEventListener("pointermove",b),r.addEventListener("pointerenter",T),r.addEventListener("pointerleave",M),r.addEventListener("pointerupoutside",R),r.addEventListener("dragstart",I),r.addEventListener("drag",N),r.addEventListener("dragend",z),r.addEventListener("dragenter",H),r.addEventListener("dragleave",X),r.addEventListener("dragover",Y),r.addEventListener("drop",ne),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",c),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",p),r.removeEventListener("pointerover",v),r.removeEventListener("pointerout",y),r.removeEventListener("pointermove",b),r.removeEventListener("pointerenter",T),r.removeEventListener("pointerleave",M),r.removeEventListener("pointerupoutside",R),r.removeEventListener("dragstart",I),r.removeEventListener("drag",N),r.removeEventListener("dragend",z),r.removeEventListener("dragenter",H),r.removeEventListener("dragleave",X),r.removeEventListener("dragover",Y),r.removeEventListener("drop",ne)}}}vL.props={reapplyWhenUpdate:!0};function UW(){return{"component.axisRadar":vD,"component.axisLinear":Ly,"component.axisArc":pD,"component.legendContinuousBlock":ID,"component.legendContinuousBlockSize":DD,"component.legendContinuousSize":NM,"interaction.event":vL,"composition.mark":LD,"composition.view":ND,"shape.label.label":eL}}var jW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Yu(e,t){const n=Object.assign(Object.assign({},UW()),t),r=s=>{if(typeof s!="string")return s;const l=`${e}.${s}`;return n[l]||wg(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:c}=s,h=jW(s,["type"]);c||wg("Plot type is required!");const p=r(c);return p==null?void 0:p(h,l)},r]}function mL(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||wg("Cannot find library document")}var gL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function VW(e,t,n){const[r]=Yu("coordinate",n),{innerHeight:i,innerWidth:s,insetLeft:l,insetTop:c,insetRight:h,insetBottom:p}=e,{coordinates:v=[]}=t,y=YW(v),b=y[0].type==="cartesian3D",T=Object.assign(Object.assign({},e),{x:l,y:c,width:s-l-h,height:i-p-c,transformations:y.flatMap(r)});return b?new Zw.Coordinate3D(T):new Zw.Coordinate(T)}function yL(e,t){const{coordinate:n={}}=e,r=gL(e,["coordinate"]),{type:i,transform:s=[]}=n,l=gL(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:s});const[,c]=Yu("coordinate",t),{transform:h=!1}=c(i).props||{};if(h)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},l),...s]})}function Iv(e,t){return e.filter(n=>n.type===t)}function i1(e){return Iv(e,"polar").length>0}function HW(e){return Iv(e,"helix").length>0}function Hb(e){return Iv(e,"transpose").length%2===1}function GW(e){return Iv(e,"parallel").length>0}function _L(e){return Iv(e,"theta").length>0}function WW(e){return Iv(e,"reflect").length>0}function $2(e){return Iv(e,"radial").length>0}function ZW(e){return Iv(e,"radar").length>0}function XW(e){return Iv(e,"reflectY").length>0}function YW(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function zs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var $W=zs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qW=zs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),KW=zs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),QW=zs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),JW=zs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),eZ=zs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),tZ=zs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),nZ=zs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),rZ=zs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),iZ=zs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),oZ=zs("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function CT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Gb(){}var o1=.7,Wb=1/o1,Zb="\\s*([+-]?\\d+)\\s*",q2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aZ=/^#([0-9a-f]{3,8})$/,sZ=new RegExp("^rgb\\(".concat(Zb,",").concat(Zb,",").concat(Zb,"\\)$")),lZ=new RegExp("^rgb\\(".concat(wm,",").concat(wm,",").concat(wm,"\\)$")),uZ=new RegExp("^rgba\\(".concat(Zb,",").concat(Zb,",").concat(Zb,",").concat(q2,"\\)$")),cZ=new RegExp("^rgba\\(".concat(wm,",").concat(wm,",").concat(wm,",").concat(q2,"\\)$")),fZ=new RegExp("^hsl\\(".concat(q2,",").concat(wm,",").concat(wm,"\\)$")),hZ=new RegExp("^hsla\\(".concat(q2,",").concat(wm,",").concat(wm,",").concat(q2,"\\)$")),bL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CT(Gb,rR,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:xL,formatHex:xL,formatHex8:dZ,formatHsl:pZ,formatRgb:EL,toString:EL});function xL(){return this.rgb().formatHex()}function dZ(){return this.rgb().formatHex8()}function pZ(){return OL(this).formatHsl()}function EL(){return this.rgb().formatRgb()}function rR(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?SL(t):n===3?new vd(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?OT(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?OT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sZ.exec(e))?new vd(t[1],t[2],t[3],1):(t=lZ.exec(e))?new vd(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uZ.exec(e))?OT(t[1],t[2],t[3],t[4]):(t=cZ.exec(e))?OT(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fZ.exec(e))?CL(t[1],t[2]/100,t[3]/100,1):(t=hZ.exec(e))?CL(t[1],t[2]/100,t[3]/100,t[4]):bL.hasOwnProperty(e)?SL(bL[e]):e==="transparent"?new vd(NaN,NaN,NaN,0):null}function SL(e){return new vd(e>>16&255,e>>8&255,e&255,1)}function OT(e,t,n,r){return r<=0&&(e=t=n=NaN),new vd(e,t,n,r)}function wL(e){return e instanceof Gb||(e=rR(e)),e?(e=e.rgb(),new vd(e.r,e.g,e.b,e.opacity)):new vd}function K2(e,t,n,r){return arguments.length===1?wL(e):new vd(e,t,n,r==null?1:r)}function vd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}CT(vd,K2,nR(Gb,{brighter:function(t){return t=t==null?Wb:Math.pow(Wb,t),new vd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new vd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new vd(a1(this.r),a1(this.g),a1(this.b),MT(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TL,formatHex:TL,formatHex8:vZ,formatRgb:AL,toString:AL}));function TL(){return"#".concat(s1(this.r)).concat(s1(this.g)).concat(s1(this.b))}function vZ(){return"#".concat(s1(this.r)).concat(s1(this.g)).concat(s1(this.b)).concat(s1((isNaN(this.opacity)?1:this.opacity)*255))}function AL(){var e=MT(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(a1(this.r),", ").concat(a1(this.g),", ").concat(a1(this.b)).concat(e===1?")":", ".concat(e,")"))}function MT(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function a1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function s1(e){return e=a1(e),(e<16?"0":"")+e.toString(16)}function CL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Dv(e,t,n,r)}function OL(e){if(e instanceof Dv)return new Dv(e.h,e.s,e.l,e.opacity);if(e instanceof Gb||(e=rR(e)),!e)return new Dv;if(e instanceof Dv)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new Dv(l,c,h,e.opacity)}function mZ(e,t,n,r){return arguments.length===1?OL(e):new Dv(e,t,n,r==null?1:r)}function Dv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}CT(Dv,mZ,nR(Gb,{brighter:function(t){return t=t==null?Wb:Math.pow(Wb,t),new Dv(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new Dv(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new vd(iR(t>=240?t-240:t+120,s,i),iR(t,s,i),iR(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new Dv(ML(this.h),RT(this.s),RT(this.l),MT(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=MT(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(ML(this.h),", ").concat(RT(this.s)*100,"%, ").concat(RT(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function ML(e){return e=(e||0)%360,e<0?e+360:e}function RT(e){return Math.max(0,Math.min(1,e||0))}function iR(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function RL(e,t,n,r,i){var s=e*e,l=s*e;return((1-3*e+3*s-l)*t+(4-6*s+3*l)*n+(1+3*e+3*s-3*l)*r+l*i)/6}function gZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],l=r>0?e[r-1]:2*i-s,c=r<t-1?e[r+2]:2*s-i;return RL((n-r/t)*t,l,i,s,c)}}function yZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],l=e[(r+1)%t],c=e[(r+2)%t];return RL((n-r/t)*t,i,s,l,c)}}var oR=function(e){return function(){return e}};function PL(e,t){return function(n){return e+n*t}}function _Z(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bZ(e,t){var n=t-e;return n?PL(e,n>180||n<-180?n-360*Math.round(n/360):n):oR(isNaN(e)?t:e)}function xZ(e){return(e=+e)==1?Xb:function(t,n){return n-t?_Z(t,n,e):oR(isNaN(t)?n:t)}}function Xb(e,t){var n=t-e;return n?PL(e,n):oR(isNaN(e)?t:e)}var Wde=function e(t){var n=xZ(t);function r(i,s){var l=n((i=K2(i)).r,(s=K2(s)).r),c=n(i.g,s.g),h=n(i.b,s.b),p=Xb(i.opacity,s.opacity);return function(v){return i.r=l(v),i.g=c(v),i.b=h(v),i.opacity=p(v),i+""}}return r.gamma=e,r}(1);function IL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),l,c;for(l=0;l<n;++l)c=K2(t[l]),r[l]=c.r||0,i[l]=c.g||0,s[l]=c.b||0;return r=e(r),i=e(i),s=e(s),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=s(h),c+""}}}var EZ=IL(gZ),Zde=IL(yZ),zu=e=>EZ(e[e.length-1]),DL=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(zs),SZ=zu(DL),LL=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(zs),wZ=zu(LL),NL=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(zs),TZ=zu(NL),FL=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(zs),AZ=zu(FL),BL=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(zs),CZ=zu(BL),kL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(zs),OZ=zu(kL),zL=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(zs),MZ=zu(zL),UL=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(zs),RZ=zu(UL),jL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(zs),PZ=zu(jL),VL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(zs),IZ=zu(VL),HL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(zs),DZ=zu(HL),GL=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(zs),LZ=zu(GL),WL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(zs),NZ=zu(WL),ZL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(zs),FZ=zu(ZL),XL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(zs),BZ=zu(XL),YL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(zs),kZ=zu(YL),$L=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(zs),zZ=zu($L),qL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(zs),UZ=zu(qL),KL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(zs),jZ=zu(KL),QL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(zs),VZ=zu(QL),JL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(zs),HZ=zu(JL),e6=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(zs),GZ=zu(e6),t6=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(zs),WZ=zu(t6),n6=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(zs),ZZ=zu(n6),r6=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(zs),XZ=zu(r6),i6=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(zs),YZ=zu(i6),o6=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(zs),$Z=zu(o6);function qZ(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var KZ=Math.PI/180,QZ=180/Math.PI,a6=-.14861,aR=1.78277,sR=-.29227,PT=-.90649,Q2=1.97294,s6=Q2*PT,l6=Q2*aR,u6=aR*sR-PT*a6;function JZ(e){if(e instanceof l1)return new l1(e.h,e.s,e.l,e.opacity);e instanceof vd||(e=wL(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(u6*r+s6*t-l6*n)/(u6+s6-l6),s=r-i,l=(Q2*(n-i)-sR*s)/PT,c=Math.sqrt(l*l+s*s)/(Q2*i*(1-i)),h=c?Math.atan2(l,s)*QZ-120:NaN;return new l1(h<0?h+360:h,c,i,e.opacity)}function Tm(e,t,n,r){return arguments.length===1?JZ(e):new l1(e,t,n,r==null?1:r)}function l1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}CT(l1,Tm,nR(Gb,{brighter:function(t){return t=t==null?Wb:Math.pow(Wb,t),new l1(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?o1:Math.pow(o1,t),new l1(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*KZ,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),s=Math.sin(t);return new vd(255*(n+r*(a6*i+aR*s)),255*(n+r*(sR*i+PT*s)),255*(n+r*(Q2*i)),this.opacity)}}));function c6(e){return function t(n){n=+n;function r(i,s){var l=e((i=Tm(i)).h,(s=Tm(s)).h),c=Xb(i.s,s.s),h=Xb(i.l,s.l),p=Xb(i.opacity,s.opacity);return function(v){return i.h=l(v),i.s=c(v),i.l=h(Math.pow(v,n)),i.opacity=p(v),i+""}}return r.gamma=t,r}(1)}var Xde=c6(bZ),lR=c6(Xb),eX=lR(Tm(300,.5,0),Tm(-240,.5,1)),tX=lR(Tm(-100,.75,.35),Tm(80,1.5,.8)),nX=lR(Tm(260,.75,.35),Tm(80,1.5,.8)),IT=Tm();function rX(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return IT.h=360*e-100,IT.s=1.5-1.5*t,IT.l=.8-.9*t,IT+""}var DT=K2(),iX=Math.PI/3,oX=Math.PI*2/3;function aX(e){var t;return e=(.5-e)*Math.PI,DT.r=255*(t=Math.sin(e))*t,DT.g=255*(t=Math.sin(e+iX))*t,DT.b=255*(t=Math.sin(e+oX))*t,DT+""}function sX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function LT(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var lX=LT(zs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),uX=LT(zs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cX=LT(zs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fX=LT(zs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function hX(e,t,n,r,i,s){const{guide:l={}}=n,c=xX(e,t,n);if(typeof c!="string")return n;const h=EX(c,e,t,n),p=yX(c,h,n);return Object.assign(Object.assign(Object.assign({},n),wX(c,e,t,n,r)),{domain:p,range:SX(c,e,t,n,p,i,s),expectedDomain:h,guide:l,name:e,type:c})}function dX(e,t){const n={};for(const r of e){const{values:i,name:s}=r,l=t[s];for(const c of i){const{name:h,value:p}=c;n[h]=p.map(v=>l.map(v))}}return n}function pX(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(e.flatMap(c=>c.channels.map(h=>h.scale)))),l=new Map(s.map(c=>[c.name,c]));for(const c of r){const h=gX(c);for(const p of h){const v=l.get(p),y=((n=c.scale)===null||n===void 0?void 0:n[p])||{},{independent:b=!1}=y;if(v&&!b){const{guide:T}=v,M=typeof T=="boolean"?{}:T;v.guide=Jr({},M,c),Object.assign(v,y)}else{const T=Object.assign(Object.assign({},y),{expectedDomain:y.domain,name:p,guide:J_(c,i)});s.push(T)}}}return s}function vX(e){if(!e||!Array.isArray(e))return[Sg,Sg];let t,n;return[s=>{var l;t=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const c=e.filter(([b])=>typeof b=="function"),h=e.filter(([b])=>typeof b!="function"),p=new Map(h);if(s.map=b=>{for(const[T,M]of c)if(T(b))return M;return p.has(b)?p.get(b):t(b)},!n)return s;const v=new Map(h.map(([b,T])=>[T,b])),y=new Map(c.map(([b,T])=>[T,b]));return s.invert=b=>y.has(b)?b:v.has(b)?v.get(b):n(b),s},s=>(t!==null&&(s.map=t),n!==null&&(s.invert=n),s)]}function f6(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const s=n.filter(h=>h.startsWith(i)).map(h=>+(h.replace(i,"")||0)),l=vs(s)+1,c=`${i}${l}`;e[c]=r,r.getOptions().key=c}}return e}function h6(e,t){const[n]=Yu("scale",t),{relations:r}=e,[i]=vX(r),s=n(e);return i(s)}function mX(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));d6(t,"x"),d6(t,"y")}function gX(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>i.includes(s)):[]}function d6(e,t){const n=e.filter(({name:s,facet:l=!0})=>l&&s===t),r=n.flatMap(s=>s.domain),i=n.every(p6)?Rg(r):n.every(v6)?Array.from(new Set(r)):null;if(i!==null)for(const s of n)s.domain=i}function yX(e,t,n){const{ratio:r}=n;return r==null?t:p6({type:e})?_X(t,r,e):v6({type:e})?bX(t,r):t}function _X(e,t,n){const r=e.map(Number),i=new hd({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(s=>new Date(i.map(s))):e.map(s=>i.map(s))}function bX(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function p6(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function v6(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function xX(e,t,n){const{type:r,domain:i,range:s,quantitative:l,ordinal:c}=n;return r!==void 0?r:FX(t)?"identity":typeof s=="string"?"linear":(i||s||[]).length>2?uR(e,c):i!==void 0?_6([i])?uR(e,c):b6(t)?"time":g6(e,s,l):_6(t)?uR(e,c):b6(t)?"time":g6(e,s,l)}function EX(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return y6(PX(n,r),r);case"band":case"ordinal":case"point":return IX(n);case"quantile":return DX(n);case"sequential":return y6(LX(n),r);default:return[]}}function SX(e,t,n,r,i,s,l){const{range:c}=r;if(typeof c=="string")return TX(c);if(c!==void 0)return c;const{rangeMin:h,rangeMax:p}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const v=m6(n,r,i,s,l),[y,b]=NX(t,v);return[h!=null?h:y,p!=null?p:b]}case"band":case"point":{const v=t==="size"?5:0,y=t==="size"?10:1;return[h!=null?h:v,p!=null?p:y]}case"ordinal":return m6(n,r,i,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function wX(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return OX(i,r);case"band":case"point":return MX(e,t,i,r);case"sequential":return CX(r);default:return r}}function m6(e,t,n,r,i){const[s]=Yu("palette",i),{category10:l,category20:c}=r,h=Zr(e.flat()).length<=l.length?l:c,{palette:p=h,offset:v}=t;if(Array.isArray(p))return p;try{return s({type:p})}catch(y){const b=AX(p,n,v);if(b)return b;throw new Error(`Unknown Component: ${p} `)}}function TX(e){return e.split("-")}function AX(e,t,n=r=>r){if(!e)return null;const r=mm(e),i=W[`scheme${r}`],s=W[`interpolate${r}`];if(!i&&!s)return null;if(i){if(!i.some(Array.isArray))return i;const l=i[t.length];if(l)return l}return t.map((l,c)=>s(n(c/t.length)))}function CX(e){const{palette:t="ylGnBu",offset:n}=e,r=mm(t),i=W[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>i(n(s)):i}}function OX(e,t){const{interpolate:n=D2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function MX(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=RX(e,t,n),{paddingInner:s=i,paddingOuter:l=i}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:i,unknown:NaN})}function RX(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?_L(n)?0:.1:e==="point"?.5:0}function uR(e,t){return t||(BX(e)?"point":"ordinal")}function g6(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function y6(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,s]=e;return[n!=null?n:i,r!=null?r:s]}function PX(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const s of e)for(const l of s)su(l)&&(r=Math.min(r,+l),i=Math.max(i,+l));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function IX(e){return Array.from(new Set(e.flat()))}function DX(e){return e.flat().sort()}function LX(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)su(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function NX(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[Pi(t),Co(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function _6(e){return cR(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function b6(e){return cR(e,t=>t instanceof Date)}function FX(e){return cR(e,Ry)}function cR(e,t){for(const n of e)if(n.some(t))return!0;return!1}function BX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function kX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function zX(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&s&&l||["sequential"].includes(t)&&s&&(l||i)||["constant","identity"].includes(t)&&l)}const UX={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},jX={threshold:"threshold",quantize:"quantize",quantile:"quantile"},VX={ordinal:"ordinal",band:"band",point:"point"},HX={constant:"constant"};var jy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function GX(e,t,n){const{coordinates:r=[],title:i}=t,[,s]=Yu("component",n),l=e.filter(({guide:v})=>v!==null),c=[],h=eY(t,e,n);if(c.push(...h),i){const{props:v}=s("title"),{defaultPosition:y,defaultOrientation:b,defaultOrder:T,defaultSize:M,defaultCrossPadding:R}=v,I=typeof i=="string"?{title:i}:i;c.push(Object.assign({type:"title",position:y,orientation:b,order:T,crossPadding:R[0],defaultSize:M},I))}return $X(l,r).forEach(([v,y])=>{const{props:b}=s(v),{defaultPosition:T,defaultPlane:M="xy",defaultOrientation:R,defaultSize:I,defaultOrder:N,defaultLength:z,defaultPadding:H=[0,0],defaultCrossPadding:X=[0,0]}=b,Y=Jr({},...y),{guide:ne,field:ve}=Y,ye=Array.isArray(ne)?ne:[ne];for(const De of ye){const[Ye,Qe]=QX(v,T,R,De,y,l,r);if(!Ye&&!Qe)continue;const yt=Ye==="left"||Ye==="right",qe=yt?H[1]:H[0],ut=yt?X[1]:X[0],{size:ft,order:mt=N,length:Xt=z,padding:Mt=qe,crossPadding:kt=ut}=De;c.push(Object.assign(Object.assign({title:ve},De),{defaultSize:I,length:Xt,position:Ye,plane:M,orientation:Qe,padding:Mt,order:mt,crossPadding:kt,size:ft,type:v,scales:y}))}}),c}function x6(e,t,n,r,i){const[s]=Yu("component",r),{scaleInstances:l,scale:c,bbox:h}=e,p=jy(e,["scaleInstances","scale","bbox"]),v={bbox:h,library:r};return s(p)({coordinate:t,library:r,markState:i,scales:l,theme:n,value:v,scale:c})}function WX(e){return e.map(t=>{const n=Jr(t,t.style);return delete n.style,n})}function Yde(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function E6(e,t){const n=["left","right","bottom","top"];return Sb(e,({type:s,position:l,group:c})=>n.includes(l)?c===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):c==="independent"?Symbol("independent"):c:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(t!==void 0){const v=s.filter(R=>R.length!==void 0).map(R=>R.length),y=ku(v);if(y>t)return s.forEach(R=>R.group=Symbol("independent")),s;const b=t-y,T=s.length-v.length,M=b/T;s.forEach(R=>{R.length===void 0&&(R.length=M)})}const l=vs(s,v=>v.size),c=vs(s,v=>v.order),h=vs(s,v=>v.crossPadding),p=s[0].position;return{type:"group",size:l,order:c,position:p,children:s,crossPadding:h}})}function ZX(e,t){const n=["shape","size","color","opacity"],r=(b,T)=>b==="constant"&&T==="size",i=e.filter(({type:b,name:T})=>typeof b=="string"&&n.includes(T)&&!r(b,T)),s=i.filter(({type:b})=>b==="constant"),l=i.filter(({type:b})=>b!=="constant"),h=Sb(l,b=>b.field?b.field:Symbol("independent")).map(([b,T])=>[b,[...T,...s]]).filter(([,b])=>b.some(T=>T.type!=="constant")),p=new Map(h);if(p.size===0)return[];const v=b=>b.sort(([T],[M])=>T.localeCompare(M));return Array.from(p).map(([,b])=>{const M=Ms(b).sort((R,I)=>I.length-R.length).map(R=>({combination:R,option:R.map(I=>[I.name,XX(I)])}));for(const{option:R,combination:I}of M)if(!R.every(N=>N[1]==="constant")&&R.every(N=>N[1]==="discrete"||N[1]==="constant"))return["legendCategory",I];for(const[R,I]of uM)for(const{option:N,combination:z}of M)if(I.some(H=>lh(v(H),v(N))))return[R,z];return null}).filter(su)}function XX(e){const{type:t}=e;return typeof t!="string"?null:t in UX?"continuous":t in VX?"discrete":t in jX?"distribution":t in HX?"constant":null}function YX(e,t){return e.map(n=>{const{name:r}=n;if(HW(t)||_L(t)||Hb(t)&&(i1(t)||$2(t)))return null;if(r.startsWith("x"))return i1(t)?["axisArc",[n]]:$2(t)?["axisLinear",[n]]:[Hb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return i1(t)?["axisLinear",[n]]:$2(t)?["axisArc",[n]]:[Hb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(ZW(t))return["axisRadar",[n]];if(!i1(t))return["axisY",[n]]}return null}).filter(su)}function $X(e,t){const n=e.filter(r=>zX(r));return[...ZX(n,t),...YX(n,t)]}function fR(e){const t=Iv(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:s}=Py(r);return[i,s]}const n=Iv(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:s}=Ww(r);return[i,s]}return[-Math.PI/2,Math.PI/2*3]}function qX(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function KX(e,t,n,r,i){const{name:s}=n[0];if(e==="axisRadar"){const l=r.filter(y=>y.name.startsWith("position")),c=qX(s);if(s===l.slice(-1)[0].name||c===null)return[null,null];const[h,p]=fR(i);return["center",(p-h)/(l.length-1)*c+h]}if(e==="axisY"&&GW(i))return Hb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[l]=fR(i);return["center",l]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:i1(i)?["center",null]:$2(i)?["center",null]:e==="axisX"&&WW(i)||e==="axisX"&&XW(i)?["top",null]:t}function QX(e,t,n,r,i,s,l){const[c]=fR(l),h=[r.position||t,c!=null?c:n];return typeof e=="string"&&e.startsWith("axis")?KX(e,h,i,s,l):typeof e=="string"&&e.startsWith("legend")&&i1(l)&&r.position==="center"?["center","vertical"]:h}function JX(e,t,n=[]){return e==="x"?Hb(n)?`${t}Y`:`${t}X`:e==="y"?Hb(n)?`${t}X`:`${t}Y`:null}function eY(e,t,n){const[,r]=Yu("component",n),{coordinates:i}=e;function s(l,c,h,p){const v=JX(c,l,i);if(!p||!v)return;const{props:y}=r(v),{defaultPosition:b,defaultSize:T,defaultOrder:M,defaultCrossPadding:[R]}=y;return Object.assign(Object.assign({position:b,defaultSize:T,order:M,type:v,crossPadding:R},p),{scales:[h]})}return t.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:c,scrollbar:h,name:p}=l;return[s("slider",p,l,c),s("scrollbar",p,l,h)]}).filter(l=>!!l)}function S6(e,t,n,r,i,s){const{type:l}=e;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const h=l;return(h.startsWith("axis")?oY:h.startsWith("group")?tY:h.startsWith("legendContinuous")?aY:h==="legendCategory"?sY:h.startsWith("slider")?iY:h==="title"?rY:h.startsWith("scrollbar")?nY:()=>{})(e,t,n,r,i,s)}function tY(e,t,n,r,i,s){const{children:l}=e,c=vs(l,p=>p.crossPadding);l.forEach(p=>p.crossPadding=c),l.forEach(p=>S6(p,t,n,r,i,s));const h=vs(l,p=>p.size);e.size=h,l.forEach(p=>p.size=h)}function nY(e,t,n,r,i,s){const{trackSize:l=6}=Jr({},i.scrollbar,e);e.size=l}function rY(e,t,n,r,i,s){const l=Jr({},i.title,e),{title:c,subtitle:h,spacing:p=0}=l,v=jy(l,["title","subtitle","spacing"]);if(c){const y=bo(v,"title"),b=kT(c,y);e.size=b.height}if(h){const y=bo(v,"subtitle"),b=kT(h,y);e.size+=p+b.height}}function iY(e,t,n,r,i,s){const l=()=>{const{slider:v}=i;return Jr({},v,e)},{trackSize:c,handleIconSize:h}=l(),p=Math.max(c,h*2.4);e.size=p}function oY(e,t,n,r,i,s){e.transform=e.transform||[{type:"hide"}];const l=r==="left"||r==="right",c=w6(e,r,i),{tickLength:h=0,labelSpacing:p=0,titleSpacing:v=0,labelAutoRotate:y}=c,b=jy(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),T=NT(e,s),M=FT(b,T),R=h+p;if(M&&M.length){const N=vs(M,H=>H.width),z=vs(M,H=>H.height);if(l)e.size=N+R;else{const{tickFilter:H,labelTransform:X}=e;cY(T,M,t,n,H)&&!X&&y!==!1&&y!==null?(e.labelTransform="rotate(90)",e.size=N+R):e.size=z+R}}else e.size=h;const I=BT(b);I&&(l?e.size+=v+I.width:e.size+=v+I.height)}function aY(e,t,n,r,i,s){const c=(()=>{const{legendContinuous:X}=i;return Jr({},X,e)})(),{labelSpacing:h=0,titleSpacing:p=0}=c,v=jy(c,["labelSpacing","titleSpacing"]),y=r==="left"||r==="right",b=bo(v,"ribbon"),{size:T}=b,M=bo(v,"handleIcon"),{size:R}=M,I=Math.max(T,R*2.4);e.size=I;const N=NT(e,s),z=FT(v,N);if(z){const X=y?"width":"height",Y=vs(z,ne=>ne[X]);e.size+=Y+h}const H=BT(v);H&&(y?e.size=Math.max(e.size,H.width):e.size+=p+H.height)}function sY(e,t,n,r,i,s){const c=(()=>{const{legendCategory:ut}=i,{title:ft}=e,[mt,Xt]=Array.isArray(ft)?[ft,void 0]:[void 0,ft];return Jr({title:mt},ut,Object.assign(Object.assign({},e),{title:Xt}))})(),{itemSpacing:h,itemMarkerSize:p,titleSpacing:v,rowPadding:y,colPadding:b,maxCols:T=1/0,maxRows:M=1/0}=c,R=jy(c,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:I,length:N}=e,z=ut=>Math.min(ut,M),H=ut=>Math.min(ut,T),X=r==="left"||r==="right",Y=N===void 0?t+(X?0:n[0]+n[1]):N,ne=BT(R),ve=NT(e,s),ye=FT(R,ve,"itemLabel"),De=Math.max(ye[0].height,p)+y,Ye=(ut,ft=0)=>p+ut+h[0]+ft;X?(()=>{let ut=-1/0,ft=0,mt=1,Xt=0,Mt=-1/0,kt=-1/0;const Tn=ne?ne.height:0,zn=Y-Tn;for(const{width:lr}of ye){const ir=Ye(lr,b);ut=Math.max(ut,ir),ft+De>zn?(mt++,Mt=Math.max(Mt,Xt),kt=Math.max(kt,ft),Xt=1,ft=De):(ft+=De,Xt++)}mt<=1&&(Mt=Xt,kt=ft),e.size=ut*H(mt),e.length=kt+Tn,Jr(e,{cols:H(mt),gridRow:Mt})})():typeof I=="number"?(()=>{const ut=Math.ceil(ye.length/I),ft=vs(ye,mt=>Ye(mt.width))*I;e.size=De*z(ut)-y,e.length=Math.min(ft,Y)})():(()=>{let ut=1,ft=0,mt=-1/0;for(const{width:Xt}of ye){const Mt=Ye(Xt,b);ft+Mt>Y?(mt=Math.max(mt,ft),ft=Mt,ut++):ft+=Mt}ut===1&&(mt=ft),e.size=De*z(ut)-y,e.length=mt})(),ne&&(X?e.size=Math.max(e.size,ne.width):e.size+=v+ne.height)}function NT(e,t){const[n]=Yu("scale",t),{scales:r,tickCount:i,tickMethod:s}=e,l=r.find(c=>c.type!=="constant"&&c.type!=="identity");return i!==void 0&&(l.tickCount=i),s!==void 0&&(l.tickMethod=s),n(l)}function FT(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:s=!0}=e,l=jy(e,["labelFormatter","tickFilter","label"]);if(!s)return null;const c=lY(t,r,i),h=bo(l,n),p=c.map((b,T)=>Object.fromEntries(Object.entries(h).map(([M,R])=>[M,typeof R=="function"?R(b,T):R]))),v=c.map((b,T)=>{const M=p[T];return kT(b,M)});if(!p.some(b=>b.transform)){const b=c.map((T,M)=>M);e.indexBBox=new Map(b.map(T=>[T,[c[T],v[T]]]))}return v}function BT(e){const t=p=>p===!1||p===null,{title:n}=e,r=jy(e,["title"]);if(t(n)||n===void 0)return null;const i=bo(r,"title"),{direction:s,transform:l}=i,c=Array.isArray(n)?n.join(","):n;return typeof c!="string"?null:kT(c,Object.assign(Object.assign({},i),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function w6(e,t,n){const{title:r}=e,[i,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${S2(t)}`]:c}=n;return Jr({title:i},l,c,Object.assign(Object.assign({},e),{title:s}))}function T6(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function lY(e,t,n){const i=T6(e,n).map(l=>typeof l=="number"?Cb(l):l),s=t?typeof t=="string"?nn(t):t:e.getFormatter?e.getFormatter():l=>`${l}`;return i.map(s)}function uY(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function cY(e,t,n,r,i){if(ku(t,T=>T.width)>n)return!0;const l=e.clone();l.update({range:[0,n]});const c=T6(e,i),h=c.map(T=>l.map(T)+uY(l,T)),p=c.map((T,M)=>M),v=-r[0],y=n+r[1],b=(T,M)=>{const{width:R}=M;return[T-R/2,T+R/2]};for(let T=0;T<p.length;T++){const M=h[T],[R,I]=b(M,t[T]);if(R<v||I>y)return!0;const N=h[T+1];if(N){const[z]=b(N,t[T+1]);if(I>z)return!0}}return!1}function kT(e,t){const n=fY(e),{filter:r}=t,i=jy(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function fY(e){return e instanceof Mf?e:new sd({style:{text:`${e}`}})}function a0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function hY(e){const t=e.find(({type:n})=>n==="axisZ");if(t){const n=e.find(({type:i})=>i==="axisX");n.plane="xy";const r=e.find(({type:i})=>i==="axisY");r.plane="xy",t.plane="yz",t.origin=[n.bbox.x,n.bbox.y,0],t.eulerAngles=[0,-90,0],t.bbox.x=n.bbox.x,t.bbox.y=n.bbox.y,e.push(Object.assign(Object.assign({},n),{plane:"xz",showLabel:!1,showTitle:!1,origin:[n.bbox.x,n.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},r),{plane:"yz",showLabel:!1,showTitle:!1,origin:[r.bbox.x+r.bbox.width,r.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},t),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]}))}}function dY(e,t,n,r){var i,s;const{width:l,height:c,depth:h,x:p=0,y:v=0,z:y=0,inset:b=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:T=b,insetTop:M=b,insetBottom:R=b,insetRight:I=b,margin:N=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:z=N,marginBottom:H=N,marginTop:X=N,marginRight:Y=N,padding:ne=n.padding,paddingBottom:ve=ne,paddingLeft:ye=ne,paddingRight:De=ne,paddingTop:Ye=ne}=vY(e,t,n,r),Qe=1/4,yt=(ho,Ho,ma,Ia,Da)=>{const{marks:ms}=t;if(ms.length===0)return[Ia,Da];if(ho-Ia-Da-ho*Qe>0)return[Ia,Da];const Rs=ho*(1-Qe);return[Ho==="auto"?Rs*Ia/(Ia+Da):Ia,ma==="auto"?Rs*Da/(Ia+Da):Da]},qe=ho=>ho==="auto"?20:ho!=null?ho:20,ut=qe(Ye),ft=qe(ve),mt=A6(e,c-ut-ft,[ut+X,ft+H],["left","right"],t,n,r),{paddingLeft:Xt,paddingRight:Mt}=mt,kt=l-z-Y,[Tn,zn]=yt(kt,ye,De,Xt,Mt),lr=kt-Tn-zn,ir=A6(e,lr,[Tn+z,zn+Y],["bottom","top"],t,n,r),{paddingTop:Hr,paddingBottom:Ti}=ir,ro=c-H-X,[si,Xr]=yt(ro,ve,Ye,Ti,Hr),mo=ro-si-Xr;return{width:l,height:c,depth:h,insetLeft:T,insetTop:M,insetBottom:R,insetRight:I,innerWidth:lr,innerHeight:mo,paddingLeft:Tn,paddingRight:zn,paddingTop:Xr,paddingBottom:si,marginLeft:z,marginBottom:H,marginTop:X,marginRight:Y,x:p,y:v,z:y}}function pY(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=16,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:I=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function vY(e,t,n,r){const{coordinates:i}=t;if(!i1(i)&&!$2(i))return t;const s=e.filter(N=>typeof N.type=="string"&&N.type.startsWith("axis"));if(s.length===0)return t;const l=s.map(N=>{const z=N.type==="axisArc"?"arc":"linear";return w6(N,z,n)}),c=vs(l,N=>{var z;return(z=N.labelSpacing)!==null&&z!==void 0?z:0}),h=s.flatMap((N,z)=>{const H=l[z],X=NT(N,r);return FT(H,X)}).filter(su),p=vs(h,N=>N.height)+c,v=s.flatMap((N,z)=>{const H=l[z];return BT(H)}).filter(N=>N!==null),y=v.length===0?0:vs(v,N=>N.height),{inset:b=p,insetLeft:T=b,insetBottom:M=b,insetTop:R=b+y,insetRight:I=b}=t;return Object.assign(Object.assign({},t),{insetLeft:T,insetBottom:M,insetTop:R,insetRight:I})}function A6(e,t,n,r,i,s,l){const c=Mu(e,M=>M.position),{padding:h=s.padding,paddingLeft:p=h,paddingRight:v=h,paddingBottom:y=h,paddingTop:b=h}=i,T={paddingBottom:y,paddingLeft:p,paddingTop:b,paddingRight:v};for(const M of r){const R=`padding${S2(UD(M))}`,I=c.get(M)||[],N=T[R],z=De=>{De.size===void 0&&(De.size=De.defaultSize)},H=De=>{De.type==="group"?(De.children.forEach(z),De.size=vs(De.children,Ye=>Ye.size)):De.size=De.defaultSize},X=De=>{De.size||(N!=="auto"?H(De):(S6(De,t,n,M,s,l),z(De)))},Y=De=>{De.type.startsWith("axis")&&De.labelAutoHide===void 0&&(De.labelAutoHide=!0)},ne=M==="bottom"||M==="top",ve=a0(I,De=>De.order),ye=I.filter(De=>De.type.startsWith("axis")&&De.order==ve);if(ye.length&&(ye[0].crossPadding=0),typeof N=="number")I.forEach(z),I.forEach(Y);else if(I.length===0)T[R]=0;else{const De=ne?t+n[0]+n[1]:t,Ye=E6(I,De);Ye.forEach(X);const Qe=Ye.reduce((yt,{size:qe,crossPadding:ut=12})=>yt+qe+ut,0);T[R]=Qe}}return T}function mY(e,t,n){const r=Mu(e,ne=>`${ne.plane||"xy"}-${ne.position}`),{paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:I,insetTop:N,height:z,width:H,depth:X}=n,Y={xy:hR({width:H,height:z,paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:I,insetTop:N}),yz:hR({width:X,height:z,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:X,innerHeight:z,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:hR({width:H,height:X,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:H,innerHeight:X,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[ne,ve]of r.entries()){const[ye,De]=ne.split("-"),Ye=Y[ye][De],[Qe,yt]=Qi(ve,qe=>typeof qe.type!="string"?!1:!!(De==="center"||qe.type.startsWith("axis")&&["inner","outer"].includes(De)));Qe.length&&gY(Qe,t,Ye,De),yt.length&&AY(ve,t,Ye)}}function hR({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:h,marginRight:p,innerHeight:v,innerWidth:y,insetBottom:b,insetLeft:T,insetRight:M,insetTop:R}){const I=n+l,N=i+c,z=r+p,H=s+h,X=e-l-p,Y=[I+T,N+R,y-T-M,v-R-b,"center",null,null];return{top:[I,0,y,N,"vertical",!0,Dc,l,X],right:[e-z,N,z,v,"horizontal",!1,Dc],bottom:[I,t-H,y,H,"vertical",!1,Dc,l,X],left:[0,N,I,v,"horizontal",!0,Dc],"top-left":[I,0,y,N,"vertical",!0,Dc],"top-right":[I,0,y,N,"vertical",!0,Dc],"bottom-left":[I,t-H,y,H,"vertical",!1,Dc],"bottom-right":[I,t-H,y,H,"vertical",!1,Dc],center:Y,inner:Y,outer:Y}}function gY(e,t,n,r){const[i,s]=Qi(e,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));yY(i,t,n,r),CY(s,t,n)}function yY(e,t,n,r){r==="center"?Pu(t)?TY(e,t,n,r):_o(t)?xY(e,t,n):uo(t)&&EY(e,t,n,e[0].orientation):r==="inner"?_Y(e,t,n):r==="outer"&&bY(e,t,n)}function _Y(e,t,n){const[r,i,,s]=n,[l,c]=t.getCenter(),[h]=Yw(t),p=s/2,v=h*p,y=l-v,b=c-v;for(let T=0;T<e.length;T++){const M=e[T];M.bbox={x:r+y,y:i+b,width:v*2,height:v*2}}}function bY(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function xY(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function EY(e,t,n,r){r==="horizontal"?wY(e,t,n):r==="vertical"&&SY(e,t,n)}function SY(e,t,n){const[r,i,,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===0).map(p=>p+r);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:y,y:i,width:b,height:s}}}function wY(e,t,n){const[r,i,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===1).map(p=>p+i);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:r,y,width:s,height:b}}}function TY(e,t,n,r){const[i,s,l,c]=n;for(const h of e)h.bbox={x:i,y:s,width:l,height:c},h.radar={index:e.indexOf(h),count:e.length}}function AY(e,t,n){const[r,i,s,l,c,h,p,v,y]=n,[b,T,M,R,I,N,z,H]=c==="vertical"?["y",i,"x",r,"height",l,"width",s]:["x",r,"y",i,"width",s,"height",l];e.sort((De,Ye)=>p==null?void 0:p(De.order,Ye.order));const X=De=>De==="title"||De==="group"||De.startsWith("legend"),Y=(De,Ye,Qe)=>Qe===void 0?Ye:X(De)?Qe:Ye,ne=(De,Ye,Qe)=>Qe===void 0?Ye:X(De)?Qe:Ye,ve=h?T+N:T;for(let De=0,Ye=ve;De<e.length;De++){const Qe=e[De],{crossPadding:yt=0,type:qe}=Qe,{size:ut}=Qe;Qe.bbox={[b]:h?Ye-ut-yt:Ye+yt,[M]:ne(qe,R,v),[I]:ut,[z]:Y(qe,H,y)},Ye+=(ut+yt)*(h?-1:1)}const ye=e.filter(De=>De.type==="group");for(const De of ye){const{bbox:Ye,children:Qe}=De,yt=Ye[z],qe=yt/Qe.length,ut=Qe.reduce((kt,Tn)=>{var zn;const lr=(zn=Tn.layout)===null||zn===void 0?void 0:zn.justifyContent;return lr||kt},"flex-start"),ft=Qe.map((kt,Tn)=>{const{length:zn=qe,padding:lr=0}=kt;return zn+(Tn===Qe.length-1?0:lr)}),mt=ku(ft),Xt=yt-mt,Mt=ut==="flex-start"?0:ut==="center"?Xt/2:Xt;for(let kt=0,Tn=Ye[M]+Mt;kt<Qe.length;kt++){const zn=Qe[kt],{padding:lr=0}=zn,ir=kt===Qe.length-1?0:lr;zn.bbox={[I]:Ye[I],[b]:Ye[b],[M]:Tn,[z]:ft[kt]-ir},Jr(zn,{layout:{justifyContent:ut}}),Tn+=ft[kt]}}}function CY(e,t,n){if(e.length===0)return;const[r,i,s,l]=n,[c]=Yw(t),h=l/2*c/Math.sqrt(2),p=r+s/2,v=i+l/2;for(let y=0;y<e.length;y++){const b=e[y];b.bbox={x:p-h,y:v-h,width:h*2,height:h*2}}}function Am(e,t,n={},r=!1){if(Rv(e)||Array.isArray(e)&&r)return e;const i=bo(e,t);return Jr(n,i)}function zT(e,t={}){return Rv(e)||Array.isArray(e)||!C6(e)?e:Jr(t,e)}function C6(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function Cm(e,t){return typeof e=="object"?bo(e,t):e}var OY=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Yb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MY(e,t,n){const{encode:r={},scale:i={},transform:s=[]}=t,l=Yb(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},l),{encode:r,scale:i,transform:s})]}function O6(e,t,n){return OY(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[s]=Yu("data",r),l=VY(i),{transform:c=[]}=l,v=[Yb(l,["transform"]),...c].map(s),y=yield rM(v)(i),b=i&&!Array.isArray(i)&&!Array.isArray(y)?{value:y}:y;return[Array.isArray(y)?fr(y):[],Object.assign(Object.assign({},t),{data:b})]})}function RY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=`${s}${c===0?"":c}`;i[h]=l[c]}else i[s]=l;return[e,Object.assign(Object.assign({},t),{encode:i})]}function PY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const s=xr(r,l=>zY(l)?l:{type:UY(i,l),value:l});return[e,Object.assign(Object.assign({},t),{encode:s})]}function IY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=xr(r,(s,l)=>{const{type:c}=s;return c!=="constant"||kX(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function DY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:s}=n,l=WY(s),c=xr(r,h=>l(i,h));return[e,Object.assign(Object.assign({},t),{encode:c})]}function LY(e,t,n){const{tooltip:r={}}=t;return Rv(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:Ry(r)&&C6(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function NY(e,t,n){const{data:r,encode:i,tooltip:s={}}=t;if(Rv(s))return[e,t];const l=y=>{if(!y)return y;if(typeof y=="string")return e.map(b=>({name:y,value:r[b][y]}));if(Ry(y)){const{field:b,channel:T,color:M,name:R=b,valueFormatter:I=ne=>ne}=y,N=typeof I=="string"?nn(I):I,z=T&&i[T],H=z&&i[T].field,X=R||H||T,Y=[];for(const ne of e){const ve=b?r[ne][b]:z?i[T].value[ne]:null;Y[ne]={name:X,color:M,value:N(ve)}}return Y}if(typeof y=="function"){const b=[];for(const T of e){const M=y(r[T],T,r,i);Ry(M)?b[T]=M:b[T]={value:M}}return b}return y},{title:c,items:h=[]}=s,p=Yb(s,["title","items"]),v=Object.assign({title:l(c),items:Array.isArray(h)?h.map(l):[]},p);return[e,Object.assign(Object.assign({},t),{tooltip:v})]}function FY(e,t,n){const{encode:r}=t,i=Yb(t,["encode"]);if(!r)return[e,t];const s=Object.entries(r),l=s.filter(([,h])=>{const{value:p}=h;return Array.isArray(p[0])}).flatMap(([h,p])=>{const v=[[h,new Array(e.length).fill(void 0)]],{value:y}=p,b=Yb(p,["value"]);for(let T=0;T<y.length;T++){const M=y[T];if(Array.isArray(M))for(let R=0;R<M.length;R++){const I=v[R]||[`${h}${R}`,new Array(e).fill(void 0)];I[1][T]=M[R],v[R]=I}}return v.map(([T,M])=>[T,Object.assign({type:"column",value:M},b)])}),c=Object.fromEntries([...s,...l]);return[e,Object.assign(Object.assign({},i),{encode:c})]}function BY(e,t,n){const{axis:r={},legend:i={},slider:s={},scrollbar:l={}}=t,c=(p,v)=>{if(typeof p=="boolean")return p?{}:null;const y=p[v];return y===void 0||y?y:null},h=typeof r=="object"?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return Jr(t,{scale:Object.assign(Object.assign({},Object.fromEntries(h.map(p=>{const v=c(l,p);return[p,Object.assign({guide:c(r,p),slider:c(s,p),scrollbar:v},v&&{ratio:v.ratio===void 0?.5:v.ratio})]}))),{color:{guide:c(i,"color")},size:{guide:c(i,"size")},shape:{guide:c(i,"shape")},opacity:{guide:c(i,"opacity")}})}),[e,t]}function kY(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(Jr(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function zY(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return su(t)}function UY(e,t){return typeof t=="function"?"transform":typeof t=="string"&&jY(e,t)?"field":"constant"}function jY(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function VY(e){if((0,Yl.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=Yb(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var M6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},HY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function GY(e,t,n){return M6(this,void 0,void 0,function*(){const r={library:n},[i,s]=yield ZY(e,t,r),{encode:l,scale:c,data:h,tooltip:p}=s;if(Array.isArray(h)===!1)return null;const{channels:v}=t,y=x2(Object.entries(l).filter(([,T])=>su(T)),T=>T.map(([M,R])=>Object.assign({name:M},R)),([T])=>{var M;const R=(M=/([^\d]+)\d*$/.exec(T))===null||M===void 0?void 0:M[1],I=v.find(N=>N.name===R);return I!=null&&I.independent?T:R}),b=v.filter(T=>{const{name:M,required:R}=T;if(y.find(([I])=>I===M))return!0;if(R)throw new Error(`Missing encoding for channel: ${M}.`);return!1}).flatMap(T=>{const{name:M,scale:R,scaleKey:I,range:N,quantitative:z,ordinal:H}=T;return y.filter(([Y])=>Y.startsWith(M)).map(([Y,ne],ve)=>{const ye=ne.some(Xt=>Xt.visual),De=ne.some(Xt=>Xt.constant),Ye=c[Y]||{},{independent:Qe=!1,key:yt=I||Y,type:qe=De?"constant":ye?"identity":R}=Ye,ut=HY(Ye,["independent","key","type"]),ft=qe==="constant",mt=ft?void 0:N;return{name:Y,values:ne,scaleKey:Qe||ft?Symbol("independent"):yt,scale:Object.assign(Object.assign({type:qe,range:mt},ut),{quantitative:z,ordinal:H})}})});return[s,Object.assign(Object.assign({},t),{index:i,channels:b,tooltip:p})]})}function WY(e){const[t]=Yu("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:XY(r)})}function ZY(e,t,n){return M6(this,void 0,void 0,function*(){const{library:r}=n,[i]=Yu("transform",r),{preInference:s=[],postInference:l=[]}=t,{transform:c=[]}=e,h=[MY,O6,RY,PY,IY,DY,FY,kY,BY,LY,...s.map(i),...c.map(i),...l.map(i),NY];let p=[],v=e;for(const y of h)[p,v]=yield y(p,v,n);return[p,v]})}function XY(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var Lg=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Vy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dR(e,t,n,r){var i;return Lg(this,void 0,void 0,function*(){const[s]=Yu("composition",n),[l]=Yu("interaction",n),c=new Set(Object.keys(n).map(qe=>{var ut;return(ut=/mark\.(.*)/.exec(qe))===null||ut===void 0?void 0:ut[1]}).filter(su)),h=new Set(Object.keys(n).map(qe=>{var ut;return(ut=/component\.(.*)/.exec(qe))===null||ut===void 0?void 0:ut[1]}).filter(su)),p=qe=>{const{type:ut}=qe;if(typeof ut=="function"){const{props:ft={}}=ut,{composite:mt=!0}=ft;if(mt)return"mark"}return typeof ut!="string"?ut:c.has(ut)||h.has(ut)?"mark":ut},v=qe=>p(qe)==="mark",y=qe=>p(qe)==="standardView",b=qe=>{const{type:ut}=qe;return typeof ut!="string"?!1:!!h.has(ut)},T=qe=>{if(y(qe))return[qe];const ut=p(qe);return s({type:ut,static:b(qe)})(qe)},M=[],R=new Map,I=new Map,N=[e],z=[];for(;N.length;){const qe=N.shift();if(y(qe)){const ut=I.get(qe),[ft,mt]=ut?D6(ut,qe,n):yield P6(qe,n);R.set(ft,qe),M.push(ft);const Xt=mt.flatMap(T).map(Mt=>yL(Mt,n));if(N.push(...Xt),Xt.every(y)){const Mt=yield Promise.all(Xt.map(kt=>I6(kt,n)));mX(Mt);for(let kt=0;kt<Xt.length;kt++){const Tn=Xt[kt],zn=Mt[kt];I.set(Tn,zn)}}}else{const ut=v(qe)?qe:yield B6(qe,n),ft=T(ut);Array.isArray(ft)?N.push(...ft):typeof ft=="function"&&z.push(ft())}}r.emitter.emit(Dl.BEFORE_PAINT);const H=new Map,X=new Map,Y=[];t.selectAll(Om(ua)).data(M,qe=>qe.key).join(qe=>qe.append("g").attr("className",ua).attr("id",ut=>ut.key).call(R6).each(function(ut,ft,mt){vR(ut,Ta(mt),Y,n,r),H.set(ut,mt)}),qe=>qe.call(R6).each(function(ut,ft,mt){vR(ut,Ta(mt),Y,n,r),X.set(ut,mt)}),qe=>qe.each(function(ut,ft,mt){const Xt=mt.nameInteraction.values();for(const Mt of Xt)Mt.destroy()}).remove());const ne=(qe,ut,ft)=>Array.from(qe.entries()).map(([mt,Xt])=>{const Mt=ft||new Map,kt=(lr,ir=Hr=>Hr)=>Mt.set(lr,ir),Tn=R.get(mt),zn=$Y(Ta(Xt),Tn,n,r);return{view:mt,container:Xt,options:Tn,setState:kt,update:(lr,ir)=>Lg(this,void 0,void 0,function*(){const Ti=wb(Array.from(Mt.values()))(Tn);return yield zn(Ti,lr,()=>{Vo(ir)&&ut(qe,ir,Mt)})})}}),ve=(qe=X,ut,ft)=>{var mt;const Xt=ne(qe,ve,ft);for(const Mt of Xt){const{options:kt,container:Tn}=Mt,zn=Tn.nameInteraction;let lr=UT(kt);ut&&(lr=lr.filter(ir=>ut.includes(ir[0])));for(const ir of lr){const[Hr,Ti]=ir,ro=zn.get(Hr);if(ro&&((mt=ro.destroy)===null||mt===void 0||mt.call(ro)),Ti){const Xr=pR(Mt.view,Hr,Ti,l)(Mt,Xt,r.emitter);zn.set(Hr,{destroy:Xr})}}}},ye=ne(H,ve);for(const qe of ye){const{options:ut}=qe,ft=new Map;qe.container.nameInteraction=ft;for(const mt of UT(ut)){const[Xt,Mt]=mt;if(Mt){const Tn=pR(qe.view,Xt,Mt,l)(qe,ye,r.emitter);ft.set(Xt,{destroy:Tn})}}}ve();const{width:De,height:Ye}=e,Qe=[];for(const qe of z){const ut=new Promise(ft=>Lg(this,void 0,void 0,function*(){for(const mt of qe){const Xt=Object.assign({width:De,height:Ye},mt);yield dR(Xt,t,n,r)}ft()}));Qe.push(ut)}r.views=M,(i=r.animations)===null||i===void 0||i.forEach(qe=>qe==null?void 0:qe.cancel()),r.animations=Y,r.emitter.emit(Dl.AFTER_PAINT);const yt=Y.filter(su).map(c$).map(qe=>qe.finished);return Promise.all([...yt,...Qe])})}function R6(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function YY(e){const[,t]=Yu("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(s){return[r,i.type]}}}function $Y(e,t,n,r){const i=YY(n),s=h=>h[1]&&h[1].props&&h[1].props.reapplyWhenUpdate,c=UT(t).map(i).filter(s).map(h=>h[0]);return(h,p,v)=>Lg(this,void 0,void 0,function*(){const y=[],[b,T]=yield P6(h,n);vR(b,e,y,n,r);for(const M of c.filter(R=>R!==p))qY(M,e,h,b,n,r);for(const M of T)dR(M,e,n,r);return v(),{options:h,view:b}})}function qY(e,t,n,r,i,s){var l;const[c]=Yu("interaction",i),p=t.node().nameInteraction,v=UT(n).find(([R])=>R===e),y=p.get(e);if(!y||((l=y.destroy)===null||l===void 0||l.call(y),!v[1]))return;const b=pR(r,e,v[1],c),T={options:n,view:r,container:t.node(),update:R=>Promise.resolve(R)},M=b(T,[],s.emitter);p.set(e,{destroy:M})}function P6(e,t){return Lg(this,void 0,void 0,function*(){const n=yield QY(e,t),r=KY(n);e.interaction=r.interaction,e.coordinate=r.coordinate,e.marks=[...r.marks,...r.components];const i=yL(r,t),s=yield I6(i,t);return D6(s,i,t)})}function KY(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,s=Vy(e,["coordinate","interaction","style","marks"]),l=i.map(b=>b.coordinate||{}),c=i.map(b=>b.interaction||{}),h=i.map(b=>b.viewStyle||{}),p=[...l,t].reduceRight((b,T)=>Jr(b,T),{}),v=[n,...c].reduce((b,T)=>Jr(b,T),{}),y=[...h,r].reduce((b,T)=>Jr(b,T),{});return Object.assign(Object.assign({},s),{marks:i,coordinate:p,interaction:v,style:y})}function QY(e,t){return Lg(this,void 0,void 0,function*(){const[n,r]=Yu("mark",t),i=new Set(Object.keys(t).map(b=>{var T;return(T=/component\.(.*)/.exec(b))===null||T===void 0?void 0:T[1]}).filter(su)),{marks:s}=e,l=[],c=[],h=[...s],{width:p,height:v}=pY(e),y={options:e,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),T=yield B6(b,t),{type:M=wg("G2Mark type is required."),key:R}=T;if(i.has(M))c.push(T);else{const{props:I={}}=r(M),{composite:N=!0}=I;if(!N)l.push(T);else{const{data:z}=T,H=Object.assign(Object.assign({},T),{data:z&&(Array.isArray(z)?z:z.value)}),X=yield n(H,y),Y=Array.isArray(X)?X:[X];h.unshift(...Y.map((ne,ve)=>Object.assign(Object.assign({},ne),{key:`${R}-${ve}`})))}}}return Object.assign(Object.assign({},e),{marks:l,components:c})})}function I6(e,t){return Lg(this,void 0,void 0,function*(){const[n]=Yu("theme",t),[,r]=Yu("mark",t),{theme:i,marks:s,coordinates:l=[]}=e,c=n(F6(i)),h=new Map;for(const v of s){const{type:y}=v,{props:b={}}=r(y),T=yield GY(v,b,t);if(T){const[M,R]=T;h.set(M,R)}}const p=Mu(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const y=v.reduce((H,{scale:X})=>Jr(H,X),{}),{scaleKey:b}=v[0],{values:T}=v[0],M=Array.from(new Set(T.map(H=>H.field).filter(su))),R=Jr({guide:{title:M.length===0?void 0:M},field:M[0]},y),{name:I}=v[0],N=v.flatMap(({values:H})=>H.map(X=>X.value)),z=Object.assign(Object.assign({},hX(I,N,R,l,c,t)),{key:b});v.forEach(H=>H.scale=z)}return h})}function pR(e,t,n,r){const i=e.theme,s=typeof t=="string"?i[t]||{}:{};return r(Jr(s,Object.assign({type:t},n)))}function D6(e,t,n){const[r]=Yu("mark",n),[i]=Yu("theme",n),[s]=Yu("labelTransform",n),{key:l,frame:c=!1,theme:h,clip:p,style:v={},labelTransform:y=[]}=t,b=i(F6(h)),T=Array.from(e.values()),M=pX(T,t),R=WX(GX(p$(Array.from(M),T,e),t,n)),I=dY(R,t,b,n),N=VW(I,t,n),z=c?Jr({mainLineWidth:1,mainStroke:"#000"},v):v;mY(E6(R),N,I),hY(R);const H={};for(const ne of R){const{scales:ve=[]}=ne,ye=[];for(const De of ve){const{name:Ye}=De,Qe=h6(De,n);ye.push(Qe),Ye==="y"&&Qe.update(Object.assign(Object.assign({},Qe.getOptions()),{xScale:H.x})),f6(H,{[Ye]:Qe})}ne.scaleInstances=ye}const X=[];for(const[ne,ve]of e.entries()){const{children:ye,dataDomain:De,modifier:Ye,key:Qe}=ne,{index:yt,channels:qe,tooltip:ut}=ve,ft=Object.fromEntries(qe.map(({name:Xr,scale:mo})=>[Xr,mo])),mt=xr(ft,Xr=>h6(Xr,n));f6(H,mt);const Xt=dX(qe,mt),Mt=r(ne),[kt,Tn,zn]=t$(Mt(yt,mt,Xt,N)),lr=De||kt.length,ir=Ye?Ye(Tn,lr,I):[],Hr=Xr=>{var mo,ho;return(ho=(mo=ut.title)===null||mo===void 0?void 0:mo[Xr])===null||ho===void 0?void 0:ho.value},Ti=Xr=>ut.items.map(mo=>mo[Xr]),ro=kt.map((Xr,mo)=>{const ho=Object.assign({points:Tn[mo],transform:ir[mo],index:Xr,markKey:Qe,viewKey:l},ut&&{title:Hr(Xr),items:Ti(Xr)});for(const[Ho,ma]of Object.entries(Xt))ho[Ho]=ma[Xr],zn&&(ho[`series${mm(Ho)}`]=zn[mo].map(Ia=>ma[Ia]));return zn&&(ho.seriesIndex=zn[mo]),zn&&ut&&(ho.seriesItems=zn[mo].map(Ho=>Ti(Ho)),ho.seriesTitle=zn[mo].map(Ho=>Hr(Ho))),ho});ve.data=ro,ve.index=kt;const si=ye==null?void 0:ye(ro,mt,I);X.push(...si||[])}return[{layout:I,theme:b,coordinate:N,markState:e,key:l,clip:p,scale:H,style:z,components:R,labelTransform:wb(y.map(s))},X]}function vR(e,t,n,r,i){return Lg(this,void 0,void 0,function*(){const{components:s,theme:l,layout:c,markState:h,coordinate:p,key:v,style:y,clip:b,scale:T}=e,{x:M,y:R,width:I,height:N}=c,z=Vy(c,["x","y","width","height"]),H=["view","plot","main","content"],X=H.map((Mt,kt)=>kt),Y=["a","margin","padding","inset"],ne=H.map(Mt=>Tb(Object.assign({},l.view,y),Mt)),ve=Y.map(Mt=>bo(z,Mt)),ye=Mt=>Mt.style("x",kt=>qe[kt].x).style("y",kt=>qe[kt].y).style("width",kt=>qe[kt].width).style("height",kt=>qe[kt].height).each(function(kt,Tn,zn){v$(Ta(zn),ne[kt])});let De=0,Ye=0,Qe=I,yt=N;const qe=X.map(Mt=>{const kt=ve[Mt],{left:Tn=0,top:zn=0,bottom:lr=0,right:ir=0}=kt;return De+=Tn,Ye+=zn,Qe-=Tn+ir,yt-=zn+lr,{x:De,y:Ye,width:Qe,height:yt}});t.selectAll(Om(mu)).data(X.filter(Mt=>su(ne[Mt])),Mt=>H[Mt]).join(Mt=>Mt.append("rect").attr("className",mu).style("zIndex",-2).call(ye),Mt=>Mt.call(ye),Mt=>Mt.remove());const ut=o$(h),ft=ut?{duration:ut[1]}:!1;for(const[,Mt]of Sb(s,kt=>`${kt.type}-${kt.position}`))Mt.forEach((kt,Tn)=>kt.index=Tn);const mt=t.selectAll(Om(ds)).data(s,Mt=>`${Mt.type}-${Mt.position}-${Mt.index}`).join(Mt=>Mt.append("g").style("zIndex",({zIndex:kt})=>kt||-1).attr("className",ds).append(kt=>x6(Jr({animate:ft,scale:T},kt),p,l,r,h)),Mt=>Mt.transition(function(kt,Tn,zn){const{preserve:lr=!1}=kt;if(lr)return;const ir=x6(Jr({animate:ft,scale:T},kt),p,l,r,h),{attributes:Hr}=ir,[Ti]=zn.childNodes;return Ti.update(Hr,!1)})).transitions();n.push(...mt.flat().filter(su));const Xt=t.selectAll(Om(Ko)).data([c],()=>v).join(Mt=>Mt.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Ko).call(k6).call(U6,Array.from(h.keys())).call(j6,b),Mt=>Mt.call(U6,Array.from(h.keys())).call(kt=>ut?d$(kt,ut):k6(kt)).call(j6,b)).transitions();n.push(...Xt.flat());for(const[Mt,kt]of h.entries()){const{data:Tn}=kt,{key:zn,class:lr,type:ir}=Mt,Hr=t.select(`#${zn}`),Ti=l$(Mt,kt,e,r,i),ro=u$(Mt,kt,e,r),si=f$(Mt,kt,e,r),Xr=h$(Mt,kt,e,r),mo=a$(t,Hr,lr,"element"),ho=Hr.selectAll(Om(va)).selectFacetAll(mo).data(Tn,Ho=>Ho.key,Ho=>Ho.groupKey).join(Ho=>Ho.append(Ti).attr("className",va).attr("markType",ir).transition(function(ma,Ia,Da){return ro(ma,[Da])}),Ho=>Ho.call(ma=>{const Ia=ma.parent(),Da=iM(ms=>{const[Nl,os]=ms.getBounds().min;return[Nl,os]});ma.transition(function(ms,Nl,os){s$(os,Ia,Da);const Rs=Ti(ms,Nl),ju=si(ms,[os],[Rs]);return ju!==null||(os.nodeName===Rs.nodeName&&Rs.nodeName!=="g"?Mv(os,Rs):(os.parentNode.replaceChild(Rs,os),Rs.className=va,Rs.markType=ir,Rs.__data__=os.__data__)),ju}).attr("markType",ir).attr("className",va)}),Ho=>Ho.each(function(ma,Ia,Da){Da.__removed__=!0}).transition(function(ma,Ia,Da){return Xr(ma,[Da])}).remove(),Ho=>Ho.append(Ti).attr("className",va).attr("markType",ir).transition(function(ma,Ia,Da){const{__fromElements__:ms}=Da,Nl=si(ma,ms,[Da]);return new Pc(ms,null,Da.parentNode).transition(Nl).remove(),Nl}),Ho=>Ho.transition(function(ma,Ia,Da){const Nl=new Pc([],Da.__toData__,Da.parentNode).append(Ti).attr("className",va).attr("markType",ir).nodes();return si(ma,[Da],Nl)}).remove()).transitions();n.push(...ho.flat())}JY(e,t,n,r,i)})}function JY(e,t,n,r,i){const[s]=Yu("labelTransform",r),{markState:l,labelTransform:c}=e,h=t.select(Om(so)).node(),p=new Map,v=new Map,y=Array.from(l.entries()).flatMap(([I,N])=>{const{labels:z=[],key:H}=I,X=i$(I,N,e,r,i),Y=t.select(`#${H}`).selectAll(Om(va)).nodes().filter(ne=>!ne.__removed__);return z.flatMap((ne,ve)=>{const{transform:ye=[]}=ne,De=Vy(ne,["transform"]);return Y.flatMap(Ye=>{const Qe=e$(De,ve,Ye);return Qe.forEach(yt=>{p.set(yt,X),v.set(yt,ne)}),Qe})})}),b=Ta(h).selectAll(Om(Wl)).data(y,I=>I.key).join(I=>I.append(N=>p.get(N)(N)).attr("className",Wl),I=>I.each(function(N,z,H){const Y=p.get(N)(N);Mv(H,Y)}),I=>I.remove()).nodes(),T=Mu(b,I=>v.get(I.__data__)),{coordinate:M}=e,R={canvas:i.canvas,coordinate:M};for(const[I,N]of T){const{transform:z=[]}=I;wb(z.map(s))(N,R)}c&&c(b,R)}function e$(e,t,n){const{seriesIndex:r,seriesKey:i,points:s,key:l,index:c}=n.__data__,h=r$(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${l}-${t}`,bounds:h,index:c,points:s,dependentElement:n})];const p=n$(e),v=r.map((y,b)=>Object.assign(Object.assign({},e),{key:`${i[b]}-${t}`,bounds:[s[b]],index:y,points:s,dependentElement:n}));return p?p(v):v}function t$([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let s=0;s<e.length;s++){const l=e[s],c=t[s];c.every(([h,p])=>su(h)&&su(p))&&(r.push(l),i.push(c))}return[r,i]}function n$(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function r$(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(l=>{const c=l.effect.getKeyframes();t.attr(c[c.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:s}=r;return[i,s]}function i$(e,t,n,r,i){const[s]=Yu("shape",r),{data:l}=e,{data:c,defaultLabelShape:h}=t,p=c.map(T=>T.points),{theme:v,coordinate:y}=n,b=Object.assign(Object.assign({},i),{document:mL(i),theme:v,coordinate:y});return T=>{const{index:M,points:R}=T,I=l[M],{formatter:N=ft=>`${ft}`,transform:z,style:H,render:X}=T,Y=Vy(T,["formatter","transform","style","render"]),ne=xr(Object.assign(Object.assign({},Y),H),ft=>L6(ft,I,M,l)),{shape:ve=h,text:ye}=ne,De=Vy(ne,["shape","text"]),Ye=typeof N=="string"?nn(N):N,Qe=Object.assign(Object.assign({},De),{text:Ye(ye,I,M,l),datum:I}),yt=Object.assign({type:`label.${ve}`,render:X},De),qe=s(yt,b),ut=N6(v,"label",ve,"label");return qe(R,Qe,ut,p)}}function L6(e,t,n,r){return typeof e=="function"?e(t,n,r):typeof e!="string"?e:Ry(t)&&t[e]!==void 0?t[e]:e}function o$(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:s={}}=r,{data:l}=i,{enter:c={},update:h={},exit:p={}}=s,{type:v,duration:y=300,delay:b=0}=h,{type:T,duration:M=300,delay:R=0}=c,{type:I,duration:N=300,delay:z=0}=p;for(const H of l){const{updateType:X=v,updateDuration:Y=y,updateDelay:ne=b,enterType:ve=T,enterDuration:ye=M,enterDelay:De=R,exitDuration:Ye=N,exitDelay:Qe=z,exitType:yt=I}=H;(X===void 0||X)&&(t=Math.max(t,Y+ne),n=Math.min(n,ne)),(yt===void 0||yt)&&(t=Math.max(t,Ye+Qe),n=Math.min(n,Qe)),(ve===void 0||ve)&&(t=Math.max(t,ye+De),n=Math.min(n,De))}}return t===-1/0?null:[n,t-n]}function a$(e,t,n,r){return e.node().parentElement.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==t.node()).flatMap(s=>s.getElementsByClassName(r))}function s$(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[s,l]=n(r),[c,h]=n(i),p=`translate(${s-c}, ${l-h})`;oM(e,p),t.append(e)}function l$(e,t,n,r,i){const[s]=Yu("shape",r),{data:l}=e,{defaultShape:c,data:h,shape:p}=t,v=h.map(I=>I.points),{theme:y,coordinate:b}=n,{type:T,style:M={}}=e,R=Object.assign(Object.assign({},i),{document:mL(i),coordinate:b,theme:y});return I=>{const{shape:N=c}=M,{shape:z=N,points:H,seriesIndex:X,index:Y}=I,ne=Vy(I,["shape","points","seriesIndex","index"]),ve=Object.assign(Object.assign({},ne),{index:Y}),ye=X?X.map(qe=>l[qe]):l[Y],De=X||Y,Ye=xr(M,qe=>L6(qe,ye,De,l)),Qe=p[z]?p[z](Ye,R):s(Object.assign(Object.assign({},Ye),{type:z6(e,z)}),R),yt=N6(y,T,z,c);return Qe(H,ve,yt,v)}}function N6(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,s=e[t]||{},l=s[n]||s[r];return Object.assign({color:i},l)}function mR(e,t,n,r,i){var s,l;const[,c]=Yu("shape",i),[h]=Yu("animation",i),{defaultShape:p,shape:v}=n,{theme:y,coordinate:b}=r,M=`default${mm(e)}Animation`,{[M]:R}=((s=v[p])===null||s===void 0?void 0:s.props)||c(z6(t,p)).props,{[e]:I={}}=y,N=((l=t.animate)===null||l===void 0?void 0:l[e])||{},z={coordinate:b};return(H,X,Y)=>{const{[`${e}Type`]:ne,[`${e}Delay`]:ve,[`${e}Duration`]:ye,[`${e}Easing`]:De}=H,Ye=Object.assign({type:ne||R},N);if(!Ye.type)return null;const qe=h(Ye,z)(X,Y,Jr(I,{delay:ve,duration:ye,easing:De}));return Array.isArray(qe)?qe:[qe]}}function u$(e,t,n,r){return mR("enter",e,t,n,r)}function c$(e){return e.finished.then(()=>{e.cancel()}),e}function f$(e,t,n,r){return mR("update",e,t,n,r)}function h$(e,t,n,r){return mR("exit",e,t,n,r)}function F6(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=Vy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function UT(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(Jr(t,n)).reverse()}function B6(e,t){return Lg(this,void 0,void 0,function*(){const n={library:t},{data:r}=e,i=Vy(e,["data"]);if(r==null)return e;const[,{data:s}]=yield O6([],{data:r},n);return Object.assign({data:s},i)})}function k6(e){e.style("transform",t=>`translate(${t.paddingLeft+t.marginLeft}, ${t.paddingTop+t.marginTop})`).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function d$(e,t){const[n,r]=t;e.transition(function(i,s,l){const{transform:c,width:h,height:p}=l.style,{paddingLeft:v,paddingTop:y,innerWidth:b,innerHeight:T,marginLeft:M,marginTop:R}=i,I=[{transform:c,width:h,height:p},{transform:`translate(${v+M}, ${y+R})`,width:b,height:T}];return l.animate(I,{delay:n,duration:r,fill:"both"})})}function z6(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function U6(e,t){const n=s=>s.class!==void 0?`${s.class}`:"";e.nodes().length===0||(e.selectAll(Om(Ca)).data(t,s=>s.key).join(s=>s.append("g").attr("className",Ca).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.remove()),e.select(Om(so)).node())||e.append("g").attr("className",so).style("zIndex",0)}function Om(...e){return e.map(t=>`.${t}`).join("")}function j6(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:s,marginTop:l,innerWidth:c,innerHeight:h}=n;return new Ip({style:{x:i+s,y:r+l,width:c,height:h}})})}function p$(e,t,n){var r;for(const[p]of n.entries())if(p.type==="cell")return e.filter(v=>v.name!=="shape");if(t.length!==1||e.some(p=>p.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},h={field:((r=e.find(p=>p.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[i]]};return[...e,h]}function v$(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function V6(e){const t=Jr({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const s=i.shift();if(s.key===void 0){const c=n.get(s),h=r.get(s),p=c===null?"0":`${c.key}-${h}`;s.key=p}const{children:l=[]}=s;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=Jr({},l[c]);l[c]=h,n.set(h,s),r.set(h,c),i.push(h)}}return t}function m$(e,t){const n=new Iw;return n.registerPlugin(new Dw),new cw({width:e,height:t,container:document.createElement("div"),renderer:n})}function g$(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:s=480,depth:l=0}=e,c=V6(e),{canvas:h=m$(i,s),emitter:p=new Bo,library:v}=t;t.canvas=h,t.emitter=p;const{width:y,height:b}=h.getConfig();(y!==i||b!==s)&&h.resize(i,s),p.emit(Dl.BEFORE_RENDER);const T=Ta(h.document.documentElement);return h.ready.then(()=>dR(Object.assign(Object.assign({},c),{width:i,height:s,depth:l}),T,v,t)).then(()=>{if(l){const[M,R]=h.document.documentElement.getPosition();h.document.documentElement.setPosition(M,R,-l/2)}h.requestAnimationFrame(()=>{p.emit(Dl.AFTER_RENDER),n==null||n()})}).catch(M=>{r==null||r(M)}),_$(h.getConfig().container)}function $de(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:s=640,height:l=480}=e,c=V6(e),{group:h=new Group,emitter:p=new EventEmitter,library:v}=t;h!=null&&h.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const y=select(h);return t.group=h,t.emitter=p,t.canvas=t.canvas||((i=h==null?void 0:h.ownerDocument)===null||i===void 0?void 0:i.defaultView),p.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},c),{width:s,height:l}),y,v,t).then(()=>{var b;(b=t.canvas)===null||b===void 0||b.requestAnimationFrame(()=>{p.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(b=>{r==null||r(b)}),h}function H6(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(y$(r),n?r.destroy():r.destroyChildren()),i.off()}function y$(e){const t=e.getRoot().querySelectorAll(`.${ua}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function _$(e){return typeof e=="string"?document.getElementById(e):e}const $b=e=>e?parseInt(e):0;function b$(e){const t=getComputedStyle(e),n=e.clientWidth||$b(t.width),r=e.clientHeight||$b(t.height),i=$b(t.paddingLeft)+$b(t.paddingRight),s=$b(t.paddingTop)+$b(t.paddingBottom);return{width:n-i,height:r-s}}function qde(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=0,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:I=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function gR(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const s of i)n.push(s)}}class yR{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return gR(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return gR(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return gR(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var G6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const _R=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],W6="__remove__",Z6="__callback__",X6=1,Y6=1;function x$(e){if(e===void 0){const t=document.createElement("div");return t[W6]=!0,t}return typeof e=="string"?document.getElementById(e):e}function E$(e){const t=e.parentNode;t&&t.removeChild(e)}function S$(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of _R)t.attr(n,e.attr(n));return t}function $6(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function bR(e,t){const{width:n,height:r,autoFit:i,depth:s=0}=e;let l=640,c=480;if(i){const{width:h,height:p}=b$(t);l=h||l,c=p||c}return l=n||l,c=r||c,{width:Math.max((0,Yl.Z)(l)?l:X6,X6),height:Math.max((0,Yl.Z)(c)?c:Y6,Y6),depth:s}}function w$(e){const t=S$(e),n=[t],r=new Map;for(r.set(t,$6(t));n.length;){const i=n.pop(),s=r.get(i),{children:l=[]}=i;for(const c of l)if(c.type===Z6)s.children=c.value;else{const h=$6(c),{children:p=[]}=s;p.push(h),n.push(c),r.set(c,h),s.children=p}}return r.get(t)}function T$(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function A$(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function C$(e,t,n,r,i){const{type:s}=e,{type:l=n||s}=t;if(A$(l,i)){for(const c of _R)e.attr(c)!==void 0&&t[c]===void 0&&(t[c]=e.attr(c));return t}if(T$(l,r)){const c={type:"view"},h=Object.assign({},t);for(const p of _R)h[p]!==void 0&&(c[p]=h[p],delete h[p]);return Object.assign(Object.assign({},c),{children:[h]})}return t}function O$(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function M$(e,t,n){if(typeof e=="function"){const h=new yR;return h.value=e,h.type=Z6,h}const{type:r,children:i}=e,s=G6(e,["type","children"]),l=O$(r,t,n),c=new l;return c.value=s,c.type=r,c}function R$(e,t){const{type:n,children:r}=t,i=G6(t,["type","children"]);e.type===n||n===void 0?Hw(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function P$(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[s,l]=i.shift(),c=M$(l,n,r);Array.isArray(s.children)&&s.push(c);const{children:h}=l;if(Array.isArray(h))for(const p of h)i.push([c,p]);else typeof h=="function"&&i.push([c,h])}}function I$(e,t,n,r,i){const s=C$(e,t,n,r,i),l=[[null,e,s]];for(;l.length;){const[c,h,p]=l.shift();if(!h)P$(c,p,r,i);else if(!p)h.remove();else{R$(h,p);const{children:v}=p,{children:y}=h;if(Array.isArray(v)&&Array.isArray(y)){const b=Math.max(v.length,y.length);for(let T=0;T<b;T++){const M=v[T],R=y[T];l.push([h,R,M])}}else typeof v=="function"&&l.push([h,null,v])}}}function D$(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function L$(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function N$(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function F$(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:i,this.attr(n,s)}}function B$(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(Ry(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:s=[]}=i;return s.push(r),i.items=s,this.attr(t,i)}}function k$(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function z$(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function jT(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?L$(t,n,r):i==="array"?N$(t,n,r):i==="object"?F$(t,n,r):i==="node"?k$(t,n,r):i==="container"?z$(t,n,r):i==="mix"&&B$(t,n,r)}return t}}function q6(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const K6={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},U$=Object.assign(Object.assign({},K6),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),j$=Object.assign(Object.assign({},K6),{labelTransform:{type:"array"}});var V$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let VT=class extends yR{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&ST(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&qM(t)}};VT=V$([jT(j$)],VT);var H$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let xR=class extends yR{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};xR=H$([jT(U$)],xR);var G$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},W$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Z$="G2_CHART_KEY";class X$ extends VT{constructor(t){const{container:n,canvas:r,renderer:i,plugins:s,lib:l}=t,c=W$(t,["container","canvas","renderer","plugins","lib"]);super(c,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=Lw(()=>{this.forceFit()},300),this._renderer=i||new Iw,this._plugins=s||[],this._container=x$(n),this._emitter=new Bo,this._context={library:Object.assign(Object.assign({},l),Zl),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((s,l)=>g$(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,i]=D$();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return w$(this);const{type:n}=t;return n&&(this._previousDefinedType=n),I$(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(Dl.BEFORE_CLEAR),this._reset(),H6(t,this._context,!1),this.emit(Dl.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(Dl.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),H6(t,this._context,!0),this._container[W6]&&E$(this._container),this.emit(Dl.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=bR(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(Dl.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Dl.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(Dl.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Dl.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class c extends xR{constructor(){super({},l)}}this._marks[l]=c,this[l]=function(h){const p=this.append(c);return l==="mark"&&(p.type=h),p}}const i=["composition.view",...Object.keys(t).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(i.map(s=>{const l=s.split(".").pop();let c=class extends VT{constructor(){super({},l)}};return c=G$([jT(q6(this._marks))],c),[l,c]}));for(const s of Object.values(this._compositions))jT(q6(this._compositions))(s);for(const s of i){const l=s.split(".").pop();this[l]=function(){const c=this._compositions[l];return this.type=null,this.append(c)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=Z$}=t,{width:r,height:i,depth:s}=bR(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:s})}_createCanvas(){const{width:t,height:n}=bR(this.options(),this._container);this._plugins.push(new Dw),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new cw({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function Y$(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}var $$=Object.prototype.hasOwnProperty,ER=function(e,t){if(e===null||!Z0(e))return{};var n={};return PM(t,function(r){$$.call(e,r)&&(n[r]=e[r])}),n};function Q6(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function J2(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(r-t)/e.value;++c<h;)l=s[c],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*p}function q$(){var e=1,t=1,n=0,r=!1;function i(l){var c=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/c,l.eachBefore(s(t,c)),r&&l.eachBefore(Q6),l}function s(l,c){return function(h){h.children&&J2(h,h.x0,l*(h.depth+1)/c,h.x1,l*(h.depth+2)/c);var p=h.x0,v=h.y0,y=h.x1-n,b=h.y1-n;y<p&&(p=y=(p+y)/2),b<v&&(v=b=(v+b)/2),h.x0=p,h.y0=v,h.x1=y,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var K$=L(9783);function Q$(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function J$(){return this.eachAfter(Q$)}var SR=L(64599);function eq(e,t){var n=-1,r=SR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;e.call(t,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function tq(e,t){for(var n=this,r=[n],i,s,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function nq(e,t){for(var n=this,r=[n],i=[],s,l,c,h=-1;n=r.pop();)if(i.push(n),s=n.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function rq(e,t){var n=-1,r=SR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(t,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function iq(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function oq(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function aq(e){for(var t=this,n=sq(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function sq(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function lq(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function uq(){return Array.from(this)}function cq(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function fq(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var J6=L(15009),hq=J6().mark(eN);function eN(){var e,t,n,r,i,s;return J6().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){c.next=8;break}return c.next=5,e;case 5:if(r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);c.next=2;break;case 8:if(n.length){c.next=1;break}case 9:case"end":return c.stop()}},hq,this)}function qb(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=vq)):t===void 0&&(t=pq);for(var n=new Kb(e),r,i=[n],s,l,c,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,c=h-1;c>=0;--c)i.push(s=l[c]=new Kb(l[c])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(tN)}function dq(){return qb(this).eachBefore(mq)}function pq(e){return e.children}function vq(e){return Array.isArray(e)?e[1]:null}function mq(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function tN(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Kb(e){this.data=e,this.depth=this.height=0,this.parent=null}Kb.prototype=qb.prototype=K$({constructor:Kb,count:J$,each:eq,eachAfter:nq,eachBefore:tq,find:rq,sum:iq,sort:oq,path:aq,ancestors:lq,descendants:uq,leaves:cq,links:fq,copy:dq},Symbol.iterator,eN);function wR(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function gq(e,t,n,r){return t&&wR(e,t),n&&wR(e,n),r&&wR(e,r),e}const yq={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},_q="nodeIndex",eE="childNodeCount",bq="nodeAncestor",TR="Invalid field: it must be a string!";function xq(e,t){const{field:n,fields:r}=e;if(u(n))return n;if(Vo(n))return console.warn(TR),n[0];if(console.warn(`${TR} will try to get fields instead.`),u(r))return r;if(Vo(r)&&r.length)return r[0];if(t)return t;throw new TypeError(TR)}function Eq(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var s,l;i.parent!==n?(n=i.parent,r=0):r+=1;const c=nL((((s=i.ancestors)===null||s===void 0?void 0:s.call(i))||[]).map(h=>t.find(p=>p.name===h.name)||h),({depth:h})=>h>0&&h<i.depth);i[bq]=c,i[eE]=((l=i.children)===null||l===void 0?void 0:l.length)||0,i[_q]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function Sq(e,t){t=gq({},yq,t);const n=t.as;if(!Vo(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=xq(t)}catch(h){console.warn(h)}const s=(h=>q$().size(t.size).round(t.round).padding(t.padding)(qb(h).sum(p=>B2(p.children)?t.ignoreParentValue?0:p[r]-rD(p.children,(v,y)=>v+y[r],0):p[r]).sort(t.sort)))(e),l=n[0],c=n[1];return s.each(h=>{var p,v;h[l]=[h.x0,h.x1,h.x1,h.x0],h[c]=[h.y1,h.y1,h.y0,h.y0],h.name=h.name||((p=h.data)===null||p===void 0?void 0:p.name)||((v=h.data)===null||v===void 0?void 0:v.label),h.data.name=h.name,["x0","x1","y0","y1"].forEach(y=>{n.indexOf(y)===-1&&delete h[y]})}),Eq(s)}var wq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Qb="sunburst",AR="markType",Kde="value",nN="path",HT="ancestor-node";function Tq(e){const{data:t,encode:n}=e,{color:r,value:i}=n,l=Sq(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),c=[];return l.forEach(h=>{var p,v,y,b;if(h.depth===0)return null;let T=h.data.name;const M=[T];let R=Object.assign({},h);for(;R.depth>1;)T=`${(p=R.parent.data)===null||p===void 0?void 0:p.name} / ${T}`,M.unshift((v=R.parent.data)===null||v===void 0?void 0:v.name),R=R.parent;const I=Object.assign(Object.assign(Object.assign({},ER(h.data,[i])),{[nN]:T,[HT]:R.data.name}),h);r&&r!==HT&&(I[r]=h.data[r]||((b=(y=h.parent)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[r])),c.push(I)}),c.map(h=>Object.assign(Object.assign({},h),{x:h.x.slice(0,2),y:[h.y[2],h.y[0]],fillOpacity:Math.pow(.85,h.depth)}))}const rN={id:Qb,encode:{x:"x",y:"y",key:nN,color:HT,value:"value"},axis:{x:!1,y:!1},style:{[AR]:Qb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[eE]:eE,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},iN=e=>{const{encode:t,data:n=[],legend:r}=e,i=wq(e,["encode","data","legend"]),s=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(hl(i,["coordinate","innerRadius"],.2),1e-5)}),l=Object.assign(Object.assign({},rN.encode),t),{value:c}=l,h=Tq({encode:l,data:n});return[Jr({},rN,Object.assign(Object.assign({type:"rect",data:h,encode:l,tooltip:{title:"path",items:[p=>({name:c,value:p[c]})]}},i),{coordinate:s}))]};iN.props={};var Aq=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return PM(e,function(n,r){Kd(e)&&r==="prototype"||t.push(r)}),t},CR=Aq,Cq=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Oq=e=>e.querySelectorAll(".element").filter(t=>hl(t,["style",AR])===Qb);function Mq(e){return Ta(e).select(`.${Ko}`).node()}const Rq={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function Pq(e={}){const{breadCrumb:t={},isFixedColor:n=!1,duration:r}=e,i=Jr({},Rq,t);return s=>{const{update:l,setState:c,container:h,view:p,options:v}=s,y=Mq(h),b=v.marks.find(({id:H})=>H===Qb),{state:T}=b,M=new Xc;y.appendChild(M);const R=(H,X)=>Cq(this,void 0,void 0,function*(){if(M.removeChildren(),H){const Y=new sd({style:Object.assign({x:0,text:i.rootText,depth:0},i.style)});M.appendChild(Y);let ne="";const ve=H==null?void 0:H.split(" / ");let ye=i.style.y,De=M.getBBox().width;const Ye=y.getBBox().width,Qe=ve.map((yt,qe)=>{const ut=new sd({style:Object.assign(Object.assign({x:De,text:" / "},i.style),{y:ye})});M.appendChild(ut),De+=ut.getBBox().width,ne=`${ne}${yt} / `;const ft=new sd({name:ne.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:yt,x:De,depth:qe+1},i.style),{y:ye})});return M.appendChild(ft),De+=ft.getBBox().width,De>Ye&&(ye=M.getBBox().height,De=0,ut.attr({x:De,y:ye}),De+=ut.getBBox().width,ft.attr({x:De,y:ye}),De+=ft.getBBox().width),ft});[Y,...Qe].forEach((yt,qe)=>{if(qe===Qe.length)return;const ut=Object.assign({},yt.attributes);yt.attr("cursor","pointer"),yt.addEventListener("mouseenter",()=>{yt.attr(i.active)}),yt.addEventListener("mouseleave",()=>{yt.attr(ut)}),yt.addEventListener("click",()=>{R(yt.name,hl(yt,["style","depth"]))})})}c("drillDown",Y=>{const{marks:ne}=Y,ve=ne.map(ye=>{if(ye.id!==Qb&&ye.type!=="rect")return ye;const{data:De}=ye,Ye=Object.fromEntries(["color"].map(yt=>[yt,{domain:p.scale[yt].getOptions().domain}])),Qe=De.filter(yt=>{const qe=yt.path;return n||(yt[HT]=qe.split(" / ")[X]),H?new RegExp(`^${H}.+`).test(qe):!0});return Jr({},ye,n?{data:Qe,scale:Ye}:{data:Qe})});return Object.assign(Object.assign({},Y),{marks:ve})}),yield l()}),I=H=>{const X=H.target;if(hl(X,["style",AR])!==Qb||hl(X,["markType"])!=="rect"||!hl(X,["style",eE]))return;const Y=hl(X,["__data__","key"]),ne=hl(X,["style","depth"]);X.style.cursor="pointer",R(Y,ne)};y.addEventListener("click",I);const N=CR(Object.assign(Object.assign({},T.active),T.inactive)),z=()=>{Oq(y).forEach(X=>{const Y=hl(X,["style",eE]);if(hl(X,["style","cursor"])!=="pointer"&&Y){X.style.cursor="pointer";const ve=ER(X.attributes,N),ye=Jr(ve,T.inactive);X.addEventListener("mouseenter",()=>{r?(X.attr("zIndex",hl(T,["active","zIndex"],2)),X.animate([J_(ye,["zIndex"]),J_(T.active,["zIndex"])],{duration:r,fill:"forwards"})):X.attr(T.active)}),X.addEventListener("mouseleave",()=>{r?(X.animate([J_(T.active,["zIndex"]),J_(ye,["zIndex"])],{duration:r,fill:"forwards"}),setTimeout(()=>{X.attr("zIndex",hl(ye,["zIndex"],1))},r)):X.attr(ye)})}})};return y.addEventListener("mousemove",z),()=>{M.remove(),y.removeEventListener("click",I),y.removeEventListener("mousemove",z)}}}Kr.enableCSSParsing=!1;function Iq(){return{"interaction.drillDown":Pq,"mark.sunburst":iN}}const oN=()=>[["cartesian"]];oN.props={};const OR=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];OR.props={transform:!0};const Dq=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},aN=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Dq(e);return[...OR(),...X_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};aN.props={};const MR=()=>[["parallel",0,1,0,1]];MR.props={};const sN=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];sN.props={transform:!0};const lN=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...MR(),...X_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};lN.props={};const uN=({value:e})=>t=>t.map(()=>e);uN.props={};const cN=({value:e})=>t=>t.map(n=>n[e]);cN.props={};const fN=({value:e})=>t=>t.map(e);fN.props={};const hN=({value:e})=>()=>e;hN.props={};function Uu(e,t){if(e!==null)return{type:"column",value:e,field:t}}function GT(e,t){const n=Uu(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function WT(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function Lq(e,t){const n=Uu(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function Hy(e,t){const n=[];for(const r of e)n[r]=t;return n}function ll(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function tE(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=ll(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function nE(e){return e instanceof Date?!1:typeof e=="object"}const rE=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,Jr({},t,{encode:{y1:GT(Hy(e,0))}})]};rE.props={};const u1=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,Jr({},t,{encode:{x:GT(Hy(e,0))},scale:{x:{guide:null}}})]};u1.props={};const c1=(e,t)=>W2(Object.assign({colorAttribute:"fill"},e),t);c1.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"square"});const ZT=(e,t)=>W2(Object.assign({colorAttribute:"stroke"},e),t);ZT.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"hollowSquare"});function Jb(){}function dN(e){this._context=e}dN.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function RR(e){return new dN(e)}var pN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Nq(e,t,n){const[r,i,s,l]=e;if(Ru(n)){const p=[t?t[0][0]:i[0],i[1]],v=[t?t[3][0]:s[0],s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:i[1]],h=[s[0],t?t[3][1]:s[1]];return[r,c,h,l]}const PR=(e,t)=>{const{adjustPoints:n=Nq}=e,r=pN(e,["adjustPoints"]),{coordinate:i,document:s}=t;return(l,c,h,p)=>{const{index:v}=c,{color:y}=h,b=pN(h,["color"]),T=p[v+1],M=n(l,T,i),R=!!Ru(i),[I,N,z,H]=R?vT(M):M,{color:X=y,opacity:Y}=c,ne=By().curve(RR)([I,N,z,H]);return Ta(s.createElement("path",{})).call(sa,b).style("d",ne).style("fill",X).style("fillOpacity",Y).call(sa,r).node()}};PR.props={defaultMarker:"square"};function Fq(e,t,n){const[r,i,s,l]=e;if(Ru(n)){const p=[t?t[0][0]:(i[0]+s[0])/2,i[1]],v=[t?t[3][0]:(i[0]+s[0])/2,s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:(i[1]+s[1])/2],h=[s[0],t?t[3][1]:(i[1]+s[1])/2];return[r,c,h,l]}const vN=(e,t)=>PR(Object.assign({adjustPoints:Fq},e),t);vN.props={defaultMarker:"square"};function iE(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function Bq(e){const t=e.getFullYear(),n=iE(e.getMonth()+1),r=iE(e.getDate()),i=`${t}-${n}-${r}`,s=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return s||l||c?`${i} ${iE(s)}:${iE(l)}:${iE(c)}`:i}const XT=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:s}=r;if(Rv(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const c=Object.keys(i).filter(p=>p.startsWith(t)).filter(p=>!i[p].inferred).map(p=>ll(i,p)).filter(([p])=>p).map(p=>p[0]);if(c.length===0)return[n,r];const h=[];for(const p of n)h[p]={value:c.map(v=>v[p]instanceof Date?Bq(v[p]):v[p]).join(", ")};return[n,Jr({},r,{tooltip:{title:h}})]}};XT.props={};const YT=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:s}=r;if(Rv(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const h=(Array.isArray(t)?t:[t]).flatMap(p=>Object.keys(i).filter(v=>v.startsWith(p)).map(v=>{const{field:y,value:b,inferred:T=!1,aggregate:M}=i[v];return T?null:M&&b?{channel:v}:y?{field:y}:b?{channel:v}:null}).filter(v=>v!==null));return[n,Jr({},r,{tooltip:{items:h}})]}};YT.props={};var kq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mN=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=kq(n,["key"]);if(r!==void 0)return[e,t];const s=Object.values(i).map(({value:c})=>c),l=e.map(c=>s.filter(Array.isArray).map(h=>h[c]).join("-"));return[e,Jr({},t,{encode:{key:Uu(l)}})]};mN.props={};function gN(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function Qd(e={}){return[...gN(e),{name:"title",scale:"identity"}]}function Qde(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function Gy(){return[{type:XT,channel:"color"},{type:YT,channel:["x","y"]}]}function ex(){return[{type:XT,channel:"x"},{type:YT,channel:["y"]}]}function zq(){return[{type:XT,channel:"color"},{type:YT,channel:["position"]}]}function tx(e={}){return gN(e)}function $c(){return[{type:mN}]}function pf(){return[]}function IR(e,t){return e.getBandWidth(e.invert(t))}function f1(e,t,n={}){const{x:r,y:i,series:s}=t,{x:l,y:c,series:h}=e,{style:{bandOffset:p=h?0:.5,bandOffsetX:v=p,bandOffsetY:y=p}={}}=n,b=!!(l!=null&&l.getBandWidth),T=!!(c!=null&&c.getBandWidth),M=!!(h!=null&&h.getBandWidth);return!b&&!T?R=>R:(R,I)=>{const N=b?IR(l,r[I]):0,z=T?IR(c,i[I]):0,X=M&&s?(IR(h,s[I])/2+ +s[I])*N:0,[Y,ne]=R;return[Y+v*N+X,ne+y*z]}}function $T(e){return parseFloat(e)/100}function DR(e,t,n,r){const{x:i,y:s}=n,{innerWidth:l,innerHeight:c}=r.getOptions(),h=Array.from(e,p=>{const v=i[p],y=s[p],b=typeof v=="string"?$T(v)*l:+v,T=typeof y=="string"?$T(y)*c:+y;return[[b,T]]});return[e,h]}function Mm(e){return typeof e=="function"?e:t=>t[e]}function LR(e,t){return Array.from(e,Mm(t))}function NR(e,t){const{source:n=v=>v.source,target:r=v=>v.target,value:i=v=>v.value}=t,{links:s,nodes:l}=e,c=LR(s,n),h=LR(s,r),p=LR(s,i);return{links:s.map((v,y)=>({target:h[y],source:c[y],value:p[y]})),nodes:l||Array.from(new Set([...c,...h]),v=>({key:v}))}}function yN(e,t){return e.getBandWidth(e.invert(t))}const _N={rect:c1,hollow:ZT,funnel:PR,pyramid:vN},bN=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,series:c,size:h}=n,p=t.x,v=t.series,[y]=r.getSize(),b=h?h.map(R=>+R/y):null,T=h?(R,I,N)=>{const z=R+I/2,H=b[N];return[z-H/2,z+H/2]}:(R,I,N)=>[R,R+I],M=Array.from(e,R=>{const I=yN(p,i[R]),N=v?yN(v,c==null?void 0:c[R]):1,z=I*N,H=(+(c==null?void 0:c[R])||0)*I,X=+i[R]+H,[Y,ne]=T(X,z,R),ve=+s[R],ye=+l[R];return[[Y,ve],[ne,ve],[ne,ye],[Y,ye]].map(qe=>r.map(qe))});return[e,M]};bN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:_N,channels:[...Qd({shapes:Object.keys(_N)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...$c(),{type:rE},{type:u1}],postInference:[...pf(),...ex()],interaction:{shareTooltip:!0}};const xN={rect:c1,hollow:ZT},EN=()=>(e,t,n,r)=>{const{x:i,x1:s,y:l,y1:c}=n,h=Array.from(e,p=>{const v=[+i[p],+l[p]],y=[+s[p],+l[p]],b=[+s[p],+c[p]],T=[+i[p],+c[p]];return[v,y,b,T].map(M=>r.map(M))});return[e,h]};EN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:xN,channels:[...Qd({shapes:Object.keys(xN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:rE}],postInference:[...pf(),...ex()],interaction:{shareTooltip:!0}};var SN=FR(U2);function wN(e){this._curve=e}wN.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function FR(e){function t(n){return new wN(e(n))}return t._curve=e,t}function oE(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(FR(n)):t()._curve},e}function Uq(){return oE(By().curve(SN))}var TN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jq=Bb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,s=e.ownerDocument;Ta(e).maybeAppend("line",()=>s.createElement("path",{})).style("d",t).call(sa,r),Ta(e).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(sa,i)});function Vq(e,t){const n=[],r=[];let i=!1,s=null;for(const l of e)!t(l[0])||!t(l[1])?i=!0:(n.push(l),i&&(i=!1,r.push([s,l])),s=l);return[n,r]}const K0=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:s=v=>!Number.isNaN(v)&&v!==void 0&&v!==null,connect:l=!1}=e,c=TN(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:h,document:p}=t;return(v,y,b)=>{const{color:T,lineWidth:M}=b,R=TN(b,["color","lineWidth"]),{color:I=T,size:N=M,seriesColor:z,seriesX:H,seriesY:X}=y,Y=zD(h,y),ne=Ru(h),ve=r&&z?kD(z,H,X,r,i,ne):I,ye=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R),ve&&{stroke:ve}),N&&{lineWidth:N}),Y&&{transform:Y}),c);let De;if(_o(h)){const ft=h.getCenter();De=mt=>Uq().angle((Xt,Mt)=>Fb(Ic(mt[Mt],ft))).radius((Xt,Mt)=>sc(mt[Mt],ft)).defined(([Xt,Mt])=>s(Xt)&&s(Mt)).curve(n)(mt)}else De=By().x(ft=>ft[0]).y(ft=>ft[1]).defined(([ft,mt])=>s(ft)&&s(mt)).curve(n);const[Ye,Qe]=Vq(v,s),yt=bo(ye,"connect"),qe=!!Qe.length;if(!qe||l&&!Object.keys(yt).length)return Ta(p.createElement("path",{})).style("d",De(Ye)||[]).call(sa,ye).node();if(qe&&!l)return Ta(p.createElement("path",{})).style("d",De(v)).call(sa,ye).node();const ut=ft=>ft.map(De).join(",");return Ta(new jq).style("style1",Object.assign(Object.assign({},ye),yt)).style("style2",ye).style("d1",ut(Qe)).style("d2",De(v)).node()}};K0.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const AN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=_o(n)?RR:U2;return K0(Object.assign({curve:i},e),t)(...r)}};AN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"line"});function BR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function kR(e,t){this._context=e,this._k=(1-t)/6}kR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:BR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:BR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Jde=function e(t){function n(r){return new kR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zR(e,t){this._context=e,this._k=(1-t)/6}zR.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var epe=function e(t){function n(r){return new zR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CN(e,t,n){var r=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>pd){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>pd){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,v=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/v,l=(l*p+e._y1*e._l23_2a-n*e._l12_2a)/v}e._context.bezierCurveTo(r,i,s,l,e._x2,e._y2)}function ON(e,t){this._context=e,this._alpha=t}ON.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:CN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tpe=function e(t){function n(r){return t?new ON(r,t):new kR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function MN(e,t){this._context=e,this._alpha=t}MN.prototype={areaStart:Jb,areaEnd:Jb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:CN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var RN=function e(t){function n(r){return t?new MN(r,t):new zR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function PN(e){return e<0?-1:1}function IN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),c=(s*i+l*r)/(r+i);return(PN(s)+PN(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(c))||0}function DN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function UR(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,c=(s-r)/3;e._context.bezierCurveTo(r+c,i+c*t,s-c,l-c*n,s,l)}function qT(e){this._context=e}qT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UR(this,this._t0,DN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,UR(this,DN(this,n=IN(this,e,t)),n);break;default:UR(this,this._t0,n=IN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function LN(e){this._context=new NN(e)}(LN.prototype=Object.create(qT.prototype)).point=function(e,t){qT.prototype.point.call(this,t,e)};function NN(e){this._context=e}NN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function FN(e){return new qT(e)}function BN(e){return new LN(e)}var Hq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kN=(e,t)=>{const n=Hq(e,[]),{coordinate:r}=t;return(...i)=>{const s=_o(r)?RN:Ru(r)?BN:FN;return K0(Object.assign({curve:s},n),t)(...i)}};kN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"smooth"});function KT(e,t){this._context=e,this._t=t}KT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function zN(e){return new KT(e,.5)}function UN(e){return new KT(e,0)}function jN(e){return new KT(e,1)}const VN=(e,t)=>K0(Object.assign({curve:jN},e),t);VN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"hv"});const HN=(e,t)=>K0(Object.assign({curve:UN},e),t);HN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"vh"});const GN=(e,t)=>K0(Object.assign({curve:zN},e),t);GN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"hvh"});var Gq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Wq(e,t,n,r,i){const s=Ic(n,t),l=$0(s),c=l+Math.PI/2,h=[r/2*Math.cos(c),r/2*Math.sin(c)],p=[i/2*Math.cos(c),i/2*Math.sin(c)],v=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[r/2*Math.cos(l),r/2*Math.sin(l)],b=pT(t,h),T=pT(n,p),M=pT(T,v),R=pT(n,v),I=Ic(R,p),N=Ic(n,p),z=Ic(t,h),H=Ic(z,y),X=Ic(t,y),Y=Ic(b,y);e.moveTo(...b),e.lineTo(...T),e.arcTo(...M,...R,i/2),e.arcTo(...I,...N,i/2),e.lineTo(...z),e.arcTo(...H,...X,r/2),e.arcTo(...Y,...b,r/2),e.closePath()}const WN=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{seriesSize:l,color:c}=i,{color:h}=s,p=Gq(s,["color"]),v=q0();for(let y=0;y<r.length-1;y++){const b=r[y],T=r[y+1],M=l[y],R=l[y+1];[...b,...T].every(su)&&Wq(v,b,T,M,R)}return Ta(n.createElement("path",{})).call(sa,p).style("fill",c||h).style("d",v.toString()).call(sa,e).node()}};WN.props=Object.assign(Object.assign({},K0.props),{defaultMarker:"line"});const ZN=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:s}=n;return!s||i?[e,t]:[e,Jr({},t,{encode:{series:WT(Hy(e,void 0))}})]};ZN.props={};const jR=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[s,l]=ll(n,"color");return[e,Jr({},t,{encode:{series:Uu(s,l)}})]};jR.props={};const XN={line:AN,smooth:kN,hv:VN,vh:HN,hvh:GN,trail:WN},Zq=(e,t,n,r)=>{var i,s;const{series:l,x:c,y:h}=n,{x:p,y:v}=t;if(c===void 0||h===void 0)throw new Error("Missing encode for x or y channel.");const y=l?Array.from(Mu(e,I=>l[I]).values()):[e],b=y.map(I=>I[0]).filter(I=>I!==void 0),T=(((i=p==null?void 0:p.getBandWidth)===null||i===void 0?void 0:i.call(p))||0)/2,M=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,R=Array.from(y,I=>I.map(N=>r.map([+c[N]+T,+h[N]+M])));return[b,R,y]},Xq=(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(i.length===0)throw new Error("Missing encode for position channel.");const s=Array.from(e,l=>{const c=i.map(v=>+v[l]),h=r.map(c),p=[];for(let v=0;v<h.length;v+=2)p.push([h[v],h[v+1]]);return p});return[e,s]},YN=()=>(e,t,n,r)=>(uo(r)?Xq:Zq)(e,t,n,r);YN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:XN,channels:[...Qd({shapes:Object.keys(XN)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...$c(),{type:ZN},{type:jR}],postInference:[...pf(),...ex(),...zq()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var Yq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const VR=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];VR.style=["fill"];const $N=VR.bind(void 0);$N.style=["stroke","lineWidth"];const QT=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];QT.style=["fill"];const qN=QT.bind(void 0);qN.style=["fill"];const KN=QT.bind(void 0);KN.style=["stroke","lineWidth"];const HR=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};HR.style=["fill"];const QN=HR.bind(void 0);QN.style=["stroke","lineWidth"];const GR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};GR.style=["fill"];const JN=GR.bind(void 0);JN.style=["stroke","lineWidth"];const WR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};WR.style=["fill"];const eF=WR.bind(void 0);eF.style=["stroke","lineWidth"];const ZR=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};ZR.style=["fill"];const tF=ZR.bind(void 0);tF.style=["stroke","lineWidth"];const XR=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};XR.style=["fill"];const nF=XR.bind(void 0);nF.style=["stroke","lineWidth"];const rF=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];rF.style=["stroke","lineWidth"];const iF=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];iF.style=["stroke","lineWidth"];const oF=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];oF.style=["stroke","lineWidth"];const aF=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];aF.style=["stroke","lineWidth"];const sF=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];sF.style=["stroke","lineWidth"];const YR=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];YR.style=["stroke","lineWidth"];const lF=YR.bind(void 0);lF.style=["stroke","lineWidth"];const uF=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];uF.style=["stroke","lineWidth"];const cF=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];cF.style=["stroke","lineWidth"];const fF=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];fF.style=["stroke","lineWidth"];const hF=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];hF.style=["stroke","lineWidth"];const dF=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];dF.style=["stroke","lineWidth"];const nx=new Map([["bowtie",XR],["cross",iF],["dash",lF],["diamond",HR],["dot",YR],["hexagon",ZR],["hollowBowtie",nF],["hollowDiamond",QN],["hollowHexagon",tF],["hollowPoint",$N],["hollowSquare",KN],["hollowTriangle",JN],["hollowTriangleDown",eF],["hv",cF],["hvh",hF],["hyphen",sF],["line",rF],["plus",aF],["point",VR],["rect",qN],["smooth",uF],["square",QT],["tick",oF],["triangleDown",WR],["triangle",GR],["vh",fF],["vhv",dF]]);function $q(e,t){var{d:n,fill:r,lineWidth:i,path:s,stroke:l,color:c}=t,h=Yq(t,["d","fill","lineWidth","path","stroke","color"]);const p=nx.get(e)||nx.get("point");return(...v)=>new ad({style:Object.assign(Object.assign({},h),{d:p(...v),stroke:p.style.includes("stroke")?c||l:"",fill:p.style.includes("fill")?c||r:"",lineWidth:p.style.includes("lineWidth")?i||i||2:0})})}function npe(e,t){nx.set(e,t)}function rpe(e){nx.delete(e)}var qq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pF(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||Ch(r)){const[[s,l],[c,h]]=t,p=Math.abs((c-s)/2),v=Math.abs((h-l)/2);return Math.max(0,(p+v)/2)}return i}const $s=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,s=qq(e,["colorAttribute","symbol","mode"]),l=nx.get(r)||nx.get("point"),{coordinate:c,document:h}=t;return(p,v,y)=>{const{lineWidth:b,color:T}=y,M=s.stroke?b||1:b,{color:R=T,transform:I,opacity:N}=v,[z,H]=UM(p),Y=pF(i,p,v,c)||s.r||y.r;return Ta(h.createElement("path",{})).call(sa,y).style("fill","transparent").style("d",l(z,H,Y)).style("lineWidth",M).style("transform",I).style("transformOrigin",`${z-Y} ${H-Y}`).style("stroke",R).style(zM(e),N).style(n,R).call(sa,s).node()}};$s.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);vF.props=Object.assign({defaultMarker:"hollowPoint"},$s.props);const mF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);mF.props=Object.assign({defaultMarker:"hollowDiamond"},$s.props);const gF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);gF.props=Object.assign({defaultMarker:"hollowHexagon"},$s.props);const yF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);yF.props=Object.assign({defaultMarker:"hollowSquare"},$s.props);const _F=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);_F.props=Object.assign({defaultMarker:"hollowTriangleDown"},$s.props);const bF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);bF.props=Object.assign({defaultMarker:"hollowTriangle"},$s.props);const xF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);xF.props=Object.assign({defaultMarker:"hollowBowtie"},$s.props);var Kq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const EF=(e,t)=>{const{colorAttribute:n,mode:r="auto"}=e,i=Kq(e,["colorAttribute","mode"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{lineWidth:v,color:y}=p,b=i.stroke?v||1:v,{color:T=y,transform:M,opacity:R}=h,[I,N]=UM(c),H=pF(r,c,h,s)||i.r||p.r;return Ta(l.createElement("circle",{})).call(sa,p).style("fill","transparent").style("cx",I).style("cy",N).style("r",H).style("lineWidth",b).style("transform",M).style("transformOrigin",`${I} ${N}`).style("stroke",T).style(zM(e),R).style(n,T).call(sa,i).node()}},$R=(e,t)=>EF(Object.assign({colorAttribute:"fill"},e),t);$R.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const SF=(e,t)=>EF(Object.assign({colorAttribute:"stroke"},e),t);SF.props=Object.assign({defaultMarker:"hollowPoint"},$R.props);const wF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);wF.props=Object.assign({defaultMarker:"point"},$s.props);const TF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);TF.props=Object.assign({defaultMarker:"plus"},$s.props);const AF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);AF.props=Object.assign({defaultMarker:"diamond"},$s.props);const CF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);CF.props=Object.assign({defaultMarker:"square"},$s.props);const OF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);OF.props=Object.assign({defaultMarker:"triangle"},$s.props);const MF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);MF.props=Object.assign({defaultMarker:"hexagon"},$s.props);const RF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);RF.props=Object.assign({defaultMarker:"cross"},$s.props);const PF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);PF.props=Object.assign({defaultMarker:"bowtie"},$s.props);const IF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);IF.props=Object.assign({defaultMarker:"hyphen"},$s.props);const DF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);DF.props=Object.assign({defaultMarker:"line"},$s.props);const LF=(e,t)=>$s(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);LF.props=Object.assign({defaultMarker:"tick"},$s.props);const NF=(e,t)=>$s(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);NF.props=Object.assign({defaultMarker:"triangleDown"},$s.props);const JT=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,Jr({},t,{encode:{y:GT(Hy(e,0))},scale:{y:{guide:null}}})]};JT.props={};const FF=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,Jr({},t,{encode:{size:WT(Hy(e,3))}})]};FF.props={};const BF={hollow:vF,hollowDiamond:mF,hollowHexagon:gF,hollowSquare:yF,hollowTriangleDown:_F,hollowTriangle:bF,hollowBowtie:xF,hollowCircle:SF,point:wF,plus:TF,diamond:AF,square:CF,triangle:OF,hexagon:MF,cross:RF,bowtie:PF,hyphen:IF,line:DF,tick:LF,triangleDown:NF,circle:$R},kF=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c,y1:h,size:p,dx:v,dy:y}=r,[b,T]=i.getSize(),M=f1(n,r,e),R=N=>{const z=+((v==null?void 0:v[N])||0),H=+((y==null?void 0:y[N])||0),X=c?(+s[N]+ +c[N])/2:+s[N],Y=h?(+l[N]+ +h[N])/2:+l[N],ne=X+z,ve=Y+H;return[ne,ve]},I=p?Array.from(t,N=>{const[z,H]=R(N),X=+p[N],Y=X/b,ne=X/T,ve=[z-Y,H-ne],ye=[z+Y,H+ne];return[i.map(M(ve,N)),i.map(M(ye,N))]}):Array.from(t,N=>[i.map(M(R(N),N))]);return[t,I]};kF.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:BF,channels:[...Qd({shapes:Object.keys(BF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...$c(),{type:u1},{type:JT}],postInference:[...pf(),{type:FF},...Gy()]};const zF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h},[[b,T]]=r;return Ta(new ZD).style("x",b).style("y",T).call(sa,s).style("transform",`${v}rotate(${+p})`).style("coordCenter",n.getCenter()).call(sa,y).call(sa,e).node()}};zF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var qR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qq(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[s,l]=[0,0],[c,h]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,c,h],["L",s,l],["Z"]]}function Jq(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const eK=Bb(e=>{const t=e.attributes,{class:n,x:r,y:i,transform:s}=t,l=qR(t,["class","x","y","transform"]),c=bo(l,"marker"),{size:h=24}=c,p=()=>Qq(h/2),v=Ta(e).maybeAppend("marker",()=>new jl({})).call(T=>T.node().update(Object.assign({symbol:p},c))).node(),[y,b]=Jq(v);Ta(e).maybeAppend("text","text").style("x",y).style("y",b).call(sa,l)}),UF=(e,t)=>{const n=qR(e,[]);return(r,i,s)=>{const{color:l}=s,c=qR(s,["color"]),{color:h=l,text:p=""}=i,v={text:String(p),stroke:h,fill:h},[[y,b]]=r;return Ta(new eK).call(sa,c).style("transform",`translate(${y},${b})`).call(sa,v).call(sa,n).node()}};UF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h,textAlign:"center",textBaseline:"middle"},[[b,T]]=r;return Ta(new sd).style("x",b).style("y",T).call(sa,s).style("transformOrigin","center center").style("transform",`${v}rotate(${p}deg)`).style("coordCenter",n.getCenter()).call(sa,y).call(sa,e).node()}};jF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const eA=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(nE))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(l=>l[0]),s=r.map(l=>l[1]);return[e,Jr({},t,{encode:{x:Uu(i),y:Uu(s)}})]};eA.props={};var VF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tA=()=>(e,t)=>{const{data:n,style:r={}}=t,i=VF(t,["data","style"]),{x:s,y:l}=r,c=VF(r,["x","y"]);if(s==null||l==null)return[e,t];const h=s||0,p=l||0;return[[0],Jr({},i,{data:[0],cartesian:!0,encode:{x:Uu([h]),y:Uu([p])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:c})]};tA.props={};const HF={text:zF,badge:UF,tag:jF},GF=e=>{const{cartesian:t=!1}=e;return t?DR:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};GF.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:HF,channels:[...Qd({shapes:Object.keys(HF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...$c(),{type:eA},{type:tA}],postInference:[...pf(),...Gy()]};const KR=()=>(e,t)=>[e,Jr({scale:{x:{padding:0},y:{padding:0}}},t)];KR.props={};const WF={cell:c1,hollow:ZT},ZF=()=>(e,t,n,r)=>{const{x:i,y:s}=n,l=t.x,c=t.y,h=Array.from(e,p=>{const v=l.getBandWidth(l.invert(+i[p])),y=c.getBandWidth(c.invert(+s[p])),b=+i[p],T=+s[p],M=[b,T],R=[b+v,T],I=[b+v,T+y],N=[b,T+y];return[M,R,I,N].map(z=>r.map(z))});return[e,h]};ZF.props={defaultShape:"cell",defaultLabelShape:"label",shape:WF,composite:!1,channels:[...Qd({shapes:Object.keys(WF)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...$c(),{type:u1},{type:JT},{type:KR}],postInference:[...pf(),...Gy()]};function QR(e,t,n){var r=null,i=Xu(!0),s=null,l=U2,c=null,h=HM(p);e=typeof e=="function"?e:e===void 0?GD:Xu(+e),t=typeof t=="function"?t:Xu(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?WD:Xu(+n);function p(y){var b,T,M,R=(y=jD(y)).length,I,N=!1,z,H=new Array(R),X=new Array(R);for(s==null&&(c=l(z=h())),b=0;b<=R;++b){if(!(b<R&&i(I=y[b],b,y))===N)if(N=!N)T=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),M=b-1;M>=T;--M)c.point(H[M],X[M]);c.lineEnd(),c.areaEnd()}N&&(H[b]=+e(I,b,y),X[b]=+t(I,b,y),c.point(r?+r(I,b,y):H[b],n?+n(I,b,y):X[b]))}if(z)return c=null,z+""||null}function v(){return By().defined(i).curve(l).context(s)}return p.x=function(y){return arguments.length?(e=typeof y=="function"?y:Xu(+y),r=null,p):e},p.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Xu(+y),p):e},p.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Xu(+y),p):r},p.y=function(y){return arguments.length?(t=typeof y=="function"?y:Xu(+y),n=null,p):t},p.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Xu(+y),p):t},p.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Xu(+y),p):n},p.lineX0=p.lineY0=function(){return v().x(e).y(t)},p.lineY1=function(){return v().x(e).y(n)},p.lineX1=function(){return v().x(r).y(t)},p.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Xu(!!y),p):i},p.curve=function(y){return arguments.length?(l=y,s!=null&&(c=l(s)),p):l},p.context=function(y){return arguments.length?(y==null?s=c=null:c=l(s=y),p):s},p}function tK(){var e=QR().curve(SN),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return oE(n())},delete e.lineX0,e.lineEndAngle=function(){return oE(r())},delete e.lineX1,e.lineInnerRadius=function(){return oE(i())},delete e.lineY0,e.lineOuterRadius=function(){return oE(s())},delete e.lineY1,e.curve=function(l){return arguments.length?t(FR(l)):t()._curve},e}var nK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rK(e,t){const n=[],r=[],i=[];let s=!1,l=null;const c=e.length/2;for(let h=0;h<c;h++){const p=e[h],v=e[h+c];if([...p,...v].some(y=>!t(y)))s=!0;else{if(n.push(p),r.push(v),s&&l){s=!1;const[y,b]=l;i.push([y,p,b,v])}l=[p,v]}}return[n.concat(r),i]}const XF=Bb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,s=e.ownerDocument;Ta(e).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(sa,i),Ta(e).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",t).call(sa,r)}),Lv=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:s=!1}=e,l=nK(e,["curve","gradient","defined","connect"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b}=y,{color:T=b,seriesColor:M,seriesX:R,seriesY:I}=v,N=Ru(c),z=zD(c,v),H=r&&M?kD(M,R,I,r,void 0,N):T,X=Object.assign(Object.assign(Object.assign(Object.assign({},y),{stroke:H,fill:H}),z&&{transform:z}),l),[Y,ne]=rK(p,i),ve=bo(X,"connect"),ye=!!ne.length,De=Ye=>Ta(h.createElement("path",{})).style("d",Ye||"").call(sa,X).node();if(_o(c)){const Ye=Qe=>{const yt=c.getCenter(),qe=Qe.slice(0,Qe.length/2),ut=Qe.slice(Qe.length/2);return tK().angle((ft,mt)=>Fb(Ic(qe[mt],yt))).outerRadius((ft,mt)=>sc(qe[mt],yt)).innerRadius((ft,mt)=>sc(ut[mt],yt)).defined((ft,mt)=>[...qe[mt],...ut[mt]].every(i)).curve(n)(ut)};return!ye||s&&!Object.keys(ve).length?De(Ye(Y)):ye&&!s?De(Ye(p)):Ta(new XF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ve),l)).style("areaPath",Ye(p)).style("connectPath",ne.map(Ye).join("")).node()}else{const Ye=Qe=>{const yt=Qe.slice(0,Qe.length/2),qe=Qe.slice(Qe.length/2);return N?QR().y((ut,ft)=>yt[ft][1]).x1((ut,ft)=>yt[ft][0]).x0((ut,ft)=>qe[ft][0]).defined((ut,ft)=>[...yt[ft],...qe[ft]].every(i)).curve(n)(yt):QR().x((ut,ft)=>yt[ft][0]).y1((ut,ft)=>yt[ft][1]).y0((ut,ft)=>qe[ft][1]).defined((ut,ft)=>[...yt[ft],...qe[ft]].every(i)).curve(n)(yt)};return!ye||s&&!Object.keys(ve).length?De(Ye(Y)):ye&&!s?De(Ye(p)):Ta(new XF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},ve),l)).style("areaPath",Ye(p)).style("connectPath",ne.map(Ye).join("")).node()}}};Lv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const YF=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=_o(n)?RR:U2;return Lv(Object.assign({curve:i},e),t)(...r)}};YF.props=Object.assign(Object.assign({},Lv.props),{defaultMarker:"square"});var iK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $F=(e,t)=>{const n=iK(e,[]),{coordinate:r}=t;return(...i)=>{const s=_o(r)?RN:Ru(r)?BN:FN;return Lv(Object.assign({curve:s},n),t)(...i)}};$F.props=Object.assign(Object.assign({},Lv.props),{defaultMarker:"smooth"});const qF=(e,t)=>(...n)=>Lv(Object.assign({curve:zN},e),t)(...n);qF.props=Object.assign(Object.assign({},Lv.props),{defaultMarker:"hvh"});const KF=(e,t)=>(...n)=>Lv(Object.assign({curve:UN},e),t)(...n);KF.props=Object.assign(Object.assign({},Lv.props),{defaultMarker:"vh"});const QF=(e,t)=>(...n)=>Lv(Object.assign({curve:jN},e),t)(...n);QF.props=Object.assign(Object.assign({},Lv.props),{defaultMarker:"hv"});const JF={area:YF,smooth:$F,hvh:qF,vh:KF,hv:QF},eB=()=>(e,t,n,r)=>{var i,s;const{x:l,y:c,y1:h,series:p}=n,{x:v,y}=t,b=p?Array.from(Mu(e,N=>p[N]).values()):[e],T=b.map(N=>N[0]).filter(N=>N!==void 0),M=(((i=v==null?void 0:v.getBandWidth)===null||i===void 0?void 0:i.call(v))||0)/2,R=(((s=y==null?void 0:y.getBandWidth)===null||s===void 0?void 0:s.call(y))||0)/2,I=Array.from(b,N=>{const z=N.length,H=new Array(z*2);for(let X=0;X<N.length;X++){const Y=N[X];H[X]=r.map([+l[Y]+M,+c[Y]+R]),H[z+X]=r.map([+l[Y]+M,+h[Y]+R])}return H});return[T,I,b]};eB.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:JF,channels:[...Qd({shapes:Object.keys(JF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...$c(),{type:jR},{type:rE},{type:KR}],postInference:[...pf(),...ex()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const tB=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=ll(n,"y");return[e,Jr({},t,{encode:{y1:Uu([...i])}})]};tB.props={};const nB=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=ll(n,"x");return[e,Jr({},t,{encode:{x1:Uu([...i])}})]};nB.props={};var rB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const JR=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=rB(e,["arrow","arrowSize"]),{document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=rB(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=q0();if(R.moveTo(...T),R.lineTo(...M),n){const[I,N]=XG(T,M,{arrowSize:r});R.moveTo(...M),R.lineTo(...I),R.moveTo(...M),R.lineTo(...N)}return Ta(s.createElement("path",{})).call(sa,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(sa,i).node()}};JR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const iB=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>JR(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};iB.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var oB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const aB=(e,t)=>{const n=oB(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=oB(c,["color"]),{color:v=h,transform:y}=l,[b,T]=s,M=q0();if(M.moveTo(b[0],b[1]),_o(r)){const R=r.getCenter();M.quadraticCurveTo(R[0],R[1],T[0],T[1])}else{const R=BD(b,T),I=sc(b,T)/2;z2(M,b,T,R,I)}return Ta(i.createElement("path",{})).call(sa,p).style("d",M.toString()).style("stroke",v).style("transform",y).call(sa,n).node()}};aB.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var sB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const lB=(e,t)=>{const n=sB(e,[]),{document:r}=t;return(i,s,l)=>{const{color:c}=l,h=sB(l,["color"]),{color:p=c,transform:v}=s,[y,b]=i,T=q0();return T.moveTo(y[0],y[1]),T.bezierCurveTo(y[0]/2+b[0]/2,y[1],y[0]/2+b[0]/2,b[1],b[0],b[1]),Ta(r.createElement("path",{})).call(sa,h).style("d",T.toString()).style("stroke",p).style("transform",v).call(sa,n).node()}};lB.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var uB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oK(e,t,n,r){const i=q0();if(_o(n)){const s=n.getCenter(),l=sc(e,s),h=(sc(t,s)-l)*r+l;return i.moveTo(e[0],e[1]),z2(i,e,t,s,h),i.lineTo(t[0],t[1]),i}return Ru(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const cB=(e,t)=>{const{cornerRatio:n=1/3}=e,r=uB(e,["cornerRatio"]),{coordinate:i,document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=uB(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=oK(T,M,i,n);return Ta(s.createElement("path",{})).call(sa,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(sa,r).node()}};cB.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const fB={link:iB,arc:aB,smooth:lB,vhv:cB},eP=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c=s,y1:h=l}=r,p=f1(n,r,e),v=t.map(y=>[i.map(p([+s[y],+l[y]],y)),i.map(p([+c[y],+h[y]],y))]);return[t,v]};eP.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:fB,channels:[...Qd({shapes:Object.keys(fB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:tB},{type:nB}],postInference:[...pf(),...Gy()]};var aK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=aK(l,["color"]),{color:p=c,src:v="",size:y=32,transform:b=""}=s;let{width:T=y,height:M=y}=e;const[[R,I]]=i,[N,z]=n.getSize();T=typeof T=="string"?$T(T)*N:T,M=typeof M=="string"?$T(M)*z:M;const H=R-Number(T)/2,X=I-Number(M)/2;return Ta(r.createElement("image",{})).call(sa,h).style("x",H).style("y",X).style("src",v).style("stroke",p).style("transform",b).call(sa,e).style("width",T).style("height",M).node()}};hB.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const dB={image:hB},pB=e=>{const{cartesian:t}=e;return t?DR:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};pB.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:dB,channels:[...Qd({shapes:Object.keys(dB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...$c(),{type:eA},{type:tA}],postInference:[...pf(),...Gy()]};var sK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lK(e,t){const n=q0();if(_o(t)){const r=t.getCenter(),i=[...e,e[0]],s=i.map(l=>sc(l,r));return i.forEach((l,c)=>{if(c===0){n.moveTo(l[0],l[1]);return}const h=s[c],p=e[c-1],v=s[c-1];v!==void 0&&Math.abs(h-v)<1e-10?z2(n,p,l,r,h):n.lineTo(l[0],l[1])}),n.closePath(),n}return ZG(n,e)}const vB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=sK(l,["color"]),{color:p=c,transform:v}=s,y=lK(i,n);return Ta(r.createElement("path",{})).call(sa,h).style("d",y.toString()).style("stroke",p).style("fill",p).style("transform",v).call(sa,e).node()}};vB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var mB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function uK(e,t){const[n,r,i,s]=e,l=q0();if(_o(t)){const c=t.getCenter(),h=sc(c,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(c[0],c[1],i[0],i[1]),z2(l,i,s,c,h),l.quadraticCurveTo(c[0],c[1],r[0],r[1]),z2(l,r,n,c,h),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const gB=(e,t)=>{const n=mB(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=mB(c,["color"]),{color:v=h,transform:y}=l,b=uK(s,r);return Ta(i.createElement("path",{})).call(sa,p).style("d",b.toString()).style("fill",v||h).style("stroke",v||h).style("transform",y).call(sa,n).node()}};gB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const yB={polygon:vB,ribbon:gB},_B=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([c])=>c.startsWith("x")).map(([,c])=>c),s=Object.entries(n).filter(([c])=>c.startsWith("y")).map(([,c])=>c),l=e.map(c=>{const h=[];for(let p=0;p<i.length;p++){const v=i[p][c];if(v===void 0)break;const y=s[p][c];h.push(r.map([+v,+y]))}return h});return[e,l]};_B.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:yB,channels:[...Qd({shapes:Object.keys(yB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf(),...Gy()]};var cK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fK(e,t){const n=q0();if(!_o(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,s]=r,l=$0(Ic(e[0],r)),c=$0(Ic(e[1],r)),h=sc(r,e[2]),p=sc(r,e[3]),v=sc(r,e[8]),y=sc(r,e[10]),b=sc(r,e[11]);n.moveTo(...e[0]),n.arc(i,s,h,l,c),n.arc(i,s,h,c,l,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,s,p,l,c),n.lineTo(...e[6]),n.arc(i,s,y,c,l,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,s,v,l,c),n.arc(i,s,v,c,l,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,s,b,l,c),n.arc(i,s,b,c,l,!0)}return n}const bB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,{color:p,fill:v=p,stroke:y=p}=l,b=cK(l,["color","fill","stroke"]),T=fK(i,n);return Ta(r.createElement("path",{})).call(sa,b).style("d",T.toString()).style("stroke",y).style("fill",c||v).style("transform",h).call(sa,e).node()}};bB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var hK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dK(e,t,n=4){const r=q0();if(!_o(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[s,l]=i,c=sc(i,e[3]),h=sc(i,e[8]),p=sc(i,e[10]),v=$0(Ic(e[2],i)),y=Math.asin(n/h),b=v-y,T=v+y;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.arc(s,l,c,b,T),r.lineTo(Math.cos(T)*p+s,Math.sin(T)*p+l),r.arc(s,l,p,T,b,!0),r.lineTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const M=(b+T)/2;return r.moveTo(Math.cos(M)*(h+n/2)+s,Math.sin(M)*(h+n/2)+l),r.arc(Math.cos(M)*h+s,Math.sin(M)*h+l,n/2,M,Math.PI*2+M),r.closePath(),r}const xB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,p=4,{color:v,fill:y=v,stroke:b=v}=l,T=hK(l,["color","fill","stroke"]),M=dK(i,n,p);return Ta(r.createElement("path",{})).call(sa,T).style("d",M.toString()).style("stroke",b).style("fill",c||y).style("transform",h).call(sa,e).node()}};xB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const EB={box:bB,violin:xB},SB=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,y2:c,y3:h,y4:p,series:v}=n,y=t.x,b=t.series,T=Array.from(e,M=>{const R=y.getBandWidth(y.invert(+i[M])),I=b?b.getBandWidth(b.invert(+(v==null?void 0:v[M]))):1,N=R*I,z=(+(v==null?void 0:v[M])||0)*R,H=+i[M]+z+N/2,[X,Y,ne,ve,ye]=[+s[M],+l[M],+c[M],+h[M],+p[M]];return[[H-N/2,ye],[H+N/2,ye],[H,ye],[H,ve],[H-N/2,ve],[H+N/2,ve],[H+N/2,Y],[H-N/2,Y],[H-N/2,ne],[H+N/2,ne],[H,Y],[H,X],[H-N/2,X],[H+N/2,X]].map(Ye=>r.map(Ye))});return[e,T]};SB.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:EB,channels:[...Qd({shapes:Object.keys(EB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...$c(),{type:u1}],postInference:[...pf(),...ex()],interaction:{shareTooltip:!0}};const wB={vector:JR},TB=()=>(e,t,n,r)=>{const{x:i,y:s,size:l,rotate:c}=n,[h,p]=r.getSize(),v=e.map(y=>{const b=+c[y]/180*Math.PI,T=+l[y],M=T/h,R=T/p,I=M*Math.cos(b),N=-R*Math.sin(b);return[r.map([+i[y]-I/2,+s[y]-N/2]),r.map([+i[y]+I/2,+s[y]+N/2])]});return[e,v]};TB.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:wB,channels:[...Qd({shapes:Object.keys(wB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...$c()],postInference:[...pf(),...Gy()]};var AB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pK(e,t,n){return e.createElement("path",{style:Object.assign({d:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,transformOrigin:"center"},n)})}function vK(e,t){if(!_o(t))return By().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return xT()({startAngle:0,endAngle:Math.PI*2,outerRadius:sc(e[0],n),innerRadius:sc(e[1],n)})}function mK(e,t){if(!_o(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const tP=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=AB(e,["arrow","arrowSize"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,lineWidth:y}=p,b=AB(p,["color","lineWidth"]),{color:T=v,size:M=y}=h,R=n?pK(l,r,Object.assign({fill:i.stroke||T,stroke:i.stroke||T},bo(i,"arrow"))):null,I=vK(c,s),N=mK(s,h.transform);return Ta(l.createElement("path",{})).call(sa,b).style("d",I).style("stroke",T).style("lineWidth",M).style("transform",N).style("markerEnd",R).call(sa,i).node()}};tP.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const CB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(nE)?[e,t]:[e,Jr({},t,{encode:{x:Uu(n)}})]};CB.props={};const OB={line:tP},MB=e=>(t,n,r,i)=>{const{x:s}=r,l=f1(n,r,Jr({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[s[h],1],v=[s[h],0];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};MB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:OB,channels:[...tx({shapes:Object.keys(OB)}),{name:"x",required:!0}],preInference:[...$c(),{type:CB}],postInference:[...pf()]};const RB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(nE)?[e,t]:[e,Jr({},t,{encode:{y:Uu(n)}})]};RB.props={};const PB={line:tP},IB=e=>(t,n,r,i)=>{const{y:s}=r,l=f1(n,r,Jr({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[0,s[h]],v=[1,s[h]];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};IB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:PB,channels:[...tx({shapes:Object.keys(PB)}),{name:"y",required:!0}],preInference:[...$c(),{type:RB}],postInference:[...pf()]};var DB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gK(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function yK(e){return By().x(t=>t[0]).y(t=>t[1])(e)}function _K(e,t,n,r,i=0){const[[s,l],[c,h]]=t;if(Ru(e)){const b=s+n,T=c+r,M=b+i;return[[b,l],[M,l],[M,h],[T,h]]}const p=l-n,v=h-r,y=p-i;return[[s,p],[s,y],[c,y],[c,v]]}const LB=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:s,endMarker:l=!0}=e,c=DB(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:h}=t;return(p,v,y)=>{const{color:b,connectLength1:T}=y,M=DB(y,["color","connectLength1"]),{color:R,transform:I}=v,N=_K(h,p,r,i,s!=null?s:T),z=bo(Object.assign(Object.assign({},c),y),"endMarker");return Ta(new ad).call(sa,M).style("d",yK(N)).style("stroke",R||b).style("transform",I).style("markerEnd",l?new jl({className:"marker",style:Object.assign(Object.assign({},z),{symbol:gK})}):null).call(sa,c).node()}};LB.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const NB={connector:LB},FB=(...e)=>eP(...e);FB.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:NB,channels:[...tx({shapes:Object.keys(NB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf()]};function BB(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:s}=n;return l=>{var c;const h=((c=r.getBandWidth)===null||c===void 0?void 0:c.call(r,r.invert(+s[l])))||0;return[i[l],s[l]+h]}}function nP(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,s,l)=>{const c=BB("x",t,s,i.x),h=BB("y",n,s,i.y),p=Array.from(r,v=>{const[y,b]=c(v),[T,M]=h(v);return[[y,T],[b,T],[b,M],[y,M]].map(H=>l.map(H))});return[r,p]}}const kB={range:c1},zB=()=>nP();zB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:kB,channels:[...tx({shapes:Object.keys(kB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c()],postInference:[...pf()]};const UB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(nE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,Jr({},t,{encode:{x:Uu(r(n,0)),x1:Uu(r(n,1))}})]}return[e,t]};UB.props={};const jB={range:c1},VB=()=>nP({extendY:!0});VB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:jB,channels:[...tx({shapes:Object.keys(jB)}),{name:"x",required:!0}],preInference:[...$c(),{type:UB}],postInference:[...pf()]};const HB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(nE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,Jr({},t,{encode:{y:Uu(r(n,0)),y1:Uu(r(n,1))}})]}return[e,t]};HB.props={};const GB={range:c1},WB=()=>nP({extendX:!0});WB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:GB,channels:[...tx({shapes:Object.keys(GB)}),{name:"y",required:!0}],preInference:[...$c(),{type:HB}],postInference:[...pf()]};var ZB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const rP=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=ZB(e,["arrow","colorAttribute"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,stroke:y}=p,b=ZB(p,["color","stroke"]),{d:T,color:M=v}=h,[R,I]=s.getSize();return Ta(l.createElement("path",{})).call(sa,b).style("d",typeof T=="function"?T({width:R,height:I}):T).style(r,M).call(sa,i).node()}};rP.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const XB=(e,t)=>rP(Object.assign({colorAttribute:"fill"},e),t);XB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const YB=(e,t)=>rP(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);YB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const $B={path:XB,hollow:YB},qB=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];qB.props={defaultShape:"path",defaultLabelShape:"label",shape:$B,composite:!1,channels:[...Qd({shapes:Object.keys($B)}),{name:"d",scale:"identity"}],preInference:[...$c()],postInference:[...pf()]};var bK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const KB=(e,t)=>{const{render:n}=e,r=bK(e,["render"]);return i=>{const[[s,l]]=i;return n(Object.assign(Object.assign({},r),{x:s,y:l}),t)}};KB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QB=()=>(e,t)=>{const{style:n={}}=t;return[e,Jr({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};QB.props={};const xK={shape:KB},JB=e=>{const{cartesian:t}=e;return t?DR:(n,r,i,s)=>{const{x:l,y:c}=i,h=f1(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};JB.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:xK,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...$c(),{type:eA},{type:tA},{type:QB}]};var EK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const e8=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{transform:l}=i,{color:c}=s,h=EK(s,["color"]),{color:p=c}=i,[v,...y]=r,b=q0();return b.moveTo(...v),y.forEach(([T,M])=>{b.lineTo(T,M)}),b.closePath(),Ta(n.createElement("path",{})).call(sa,h).style("d",b.toString()).style("stroke",p||c).style("fill",p||c).style("fillOpacity",.4).style("transform",l).call(sa,e).node()}};e8.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const t8={density:e8},n8=()=>(e,t,n,r)=>{const{x:i,series:s}=n,l=Object.entries(n).filter(([y])=>y.startsWith("y")).map(([,y])=>y),c=Object.entries(n).filter(([y])=>y.startsWith("size")).map(([,y])=>y);if(i===void 0||l===void 0||c===void 0)throw new Error("Missing encode for x or y or size channel.");const h=t.x,p=t.series,v=Array.from(e,y=>{const b=h.getBandWidth(h.invert(+i[y])),T=p?p.getBandWidth(p.invert(+(s==null?void 0:s[y]))):1,M=b*T,R=(+(s==null?void 0:s[y])||0)*b,I=+i[y]+R+M/2;return[...l.map((z,H)=>[I+ +c[H][y]/e.length,+l[H][y]]),...l.map((z,H)=>[I-+c[H][y]/e.length,+l[H][y]]).reverse()].map(z=>r.map(z))});return[e,v]};n8.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:t8,channels:[...Qd({shapes:Object.keys(t8)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...$c(),{type:rE},{type:u1}],postInference:[...pf(),...ex()],interaction:{shareTooltip:!0}};function r8(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}const ipe=r8(3);function SK(e,t=(...r)=>`${r[0]}`,n=16){const r=r8(n);return(...i)=>{const s=t(...i);let l=r.get(s);return r.has(s)?r.get(s):(l=e(...i),r.set(s,l),l)}}function wK(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function nA(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const TK=SK((e,t,n)=>{const r=nA(n,e*2,e*2),i=r.getContext("2d"),s=e,l=e;if(t===1)i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const c=i.createRadialGradient(s,l,e*t,s,l,e);c.addColorStop(0,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=c,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function AK(e,t){const r=nA(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return wK(e).forEach(([s,l])=>{i.addColorStop(s,l)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function CK(e,t,n,r,i,s){const{blur:l}=i;let c=r.length;for(;c--;){const{x:h,y:p,value:v,radius:y}=r[c],b=Math.min(v,n),T=h-y,M=p-y,R=TK(y,1-l,s),I=(b-t)/(n-t);e.globalAlpha=Math.max(I,.001),e.drawImage(R,T,M)}return e}function OK(e,t,n,r,i){const{minOpacity:s,opacity:l,maxOpacity:c,useGradientOpacity:h}=i,p=0,v=0,y=t,b=n,T=e.getImageData(p,v,y,b),M=T.data,R=M.length;for(let I=3;I<R;I+=4){const N=M[I],z=N*4;if(!z)continue;const H=l||Math.max(0,Math.min(c,Math.max(s,N)));M[I-3]=r[z],M[I-2]=r[z+1],M[I-1]=r[z+2],M[I]=h?r[z+3]:H}return T}function MK(e,t,n,r,i,s,l){const c=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);c.minOpacity*=255,c.opacity*=255,c.maxOpacity*=255;const p=nA(l,e,t).getContext("2d"),v=AK(c.gradient,l);p.clearRect(0,0,e,t),CK(p,n,r,i,c,l);const y=OK(p,e,t,v,c),T=nA(l,e,t).getContext("2d");return T.putImageData(y,0,0),T}var RK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function PK(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const i8=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:s,blur:l,useGradientOpacity:c}=e,h=RK(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:p,createCanvas:v,document:y}=t;return(b,T,M)=>{const{transform:R}=T,[I,N]=p.getSize(),z=b.map(ve=>({x:ve[0],y:ve[1],value:ve[2],radius:ve[3]})),H=a0(b,ve=>ve[2]),X=vs(b,ve=>ve[2]),ne=I&&N?MK(I,N,H,X,z,PK({gradient:n,opacity:r,minOpacity:s,maxOpacity:i,blur:l,useGradientOpacity:c},ve=>ve===void 0),v):{canvas:null};return Ta(y.createElement("image",{})).call(sa,M).style("x",0).style("y",0).style("width",I).style("height",N).style("src",ne.canvas).style("transform",R).call(sa,h).node()}};i8.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const o8={heatmap:i8},a8=e=>(t,n,r,i)=>{const{x:s,y:l,size:c,color:h}=r,p=Array.from(t,v=>{const y=c?+c[v]:40;return[...i.map([+s[v],+l[v]]),h[v],y]});return[[0],[p]]};a8.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:o8,channels:[...Qd({shapes:Object.keys(o8)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...$c(),{type:u1},{type:JT}],postInference:[...pf(),...Gy()]};var IK=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},DK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function LK(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const NK=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:e=>e.fontFamily}}),iP=(e,t)=>IK(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:s={},scale:l,style:c={},layout:h={}}=e,p=DK(e,["data","encode","scale","style","layout"]),v=LK(i,s);return Jr({},NK(),Object.assign(Object.assign({data:{value:v,transform:[Object.assign({type:"wordCloud",size:[n,r]},h)]},encode:s,scale:l,style:c},p),{axis:!1}))});iP.props={};const s8=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];s8.props={};const l8=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];l8.props={};const u8=e=>new hd(e);u8.props={};const rA=Symbol("defaultUnknown");function c8(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function f8(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:s}=e;let l=i.get(t);if(l===void 0){if(s!==rA)return s;l=n.push(t)-1,i.set(t,l)}return r[l%r.length]}function h8(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class iA extends I2{getDefaultOptions(){return{domain:[],range:[],unknown:rA}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&c8(this.domainIndexMap,this.getDomain(),this.domainKey),f8({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&c8(this.rangeIndexMap,this.getRange(),this.rangeKey),f8({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=h8(n),this.rangeKey=h8(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new iA(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const d8=e=>new iA(e);d8.props={};function p8({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function FK({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function BK({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function kK(e){return typeof e=="object"?e.valueOf():e}class v8 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=kK,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(p8({map:this.map,initKey:this.initKey},t))}has(t){return super.has(p8({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(FK({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(BK({map:this.map,initKey:this.initKey},t))}}function zK(e){const t=Math.min(...e);return e.map(n=>n/t)}function UK(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function jK(e){return Math.round(e*1e12)/1e12}function VK(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:s,round:l,align:c}=e,h=t.length,p=UK(s,h),[v,y]=n,b=y-v,T=2/h*r+1-1/h*i,M=b/T,R=M*i/h,I=M-h*R,N=zK(p),z=N.reduce((yt,qe)=>yt+qe),H=I/z,X=new v8(t.map((yt,qe)=>{const ut=N[qe]*H;return[yt,l?Math.floor(ut):ut]})),Y=new v8(t.map((yt,qe)=>{const ft=N[qe]*H+R;return[yt,l?Math.floor(ft):ft]})),ne=Array.from(Y.values()).reduce((yt,qe)=>yt+qe),ye=(b-(ne-ne/h*i))*c,De=v+ye;let Ye=l?Math.round(De):De;const Qe=new Array(h);for(let yt=0;yt<h;yt+=1){Qe[yt]=jK(Ye);const qe=t[yt];Ye+=Y.get(qe)}return{valueBandWidth:X,valueStep:Y,adjustedRange:Qe}}function HK(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return VK(e);const{range:s,paddingOuter:l,paddingInner:c,round:h,align:p}=e;let v,y,b=s[0];const M=s[1]-b,R=l*2,I=r-c;v=M/Math.max(1,R+I),h&&(v=Math.floor(v)),b+=(M-v*(r-c))*p,y=v*(1-c),h&&(b=Math.round(b),y=Math.round(y));const N=new Array(r).fill(0).map((z,H)=>b+H*v);return{valueStep:v,valueBandWidth:y,adjustedRange:N}}class Wy extends iA{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:rA,flex:[]}}constructor(t){super(t)}clone(){return new Wy(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:s}=this.options,{adjustedRange:l,valueBandWidth:c,valueStep:h}=HK({align:t,range:r,round:i,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=h,this.valueBandWidth=c,this.adjustedRange=l}}const m8=e=>new Wy(e);m8.props={};class oA extends I2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:DM}}map(t){return oT(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new oA(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,s]=t;return!(0,Yl.Z)(i)||!(0,Yl.Z)(s)?[]:r(i,s,n)}}const g8=e=>new oA(e);g8.props={};class oP extends Wy{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:rA,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new oP(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const y8=e=>new oP(e);y8.props={};var _8=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Zy="\\d\\d?",Xy="\\d\\d",GK="\\d{3}",WK="\\d{4}",aE="[^\\s]+",b8=/\[([^]*?)\]/gm;function x8(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var E8=function(e){return function(t,n){var r=n[e].map(function(s){return s.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function h1(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var l in s)e[l]=s[l]}return e}var S8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w8=["January","February","March","April","May","June","July","August","September","October","November","December"],ZK=x8(w8,3),XK=x8(S8,3),T8={dayNamesShort:XK,dayNames:S8,monthNamesShort:ZK,monthNames:w8,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},aA=h1({},T8),YK=function(e){return aA=h1(aA,e)},A8=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Fp=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},$K={D:function(e){return String(e.getDate())},DD:function(e){return Fp(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Fp(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Fp(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Fp(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Fp(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Fp(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Fp(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Fp(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Fp(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Fp(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Fp(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Fp(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Fp(Math.floor(Math.abs(t)/60),2)+":"+Fp(Math.abs(t)%60,2)}},C8=function(e){return+e-1},O8=[null,Zy],M8=[null,aE],R8=["isPm",aE,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],P8=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],qK={D:["day",Zy],DD:["day",Xy],Do:["day",Zy+aE,function(e){return parseInt(e,10)}],M:["month",Zy,C8],MM:["month",Xy,C8],YY:["year",Xy,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",Zy,void 0,"isPm"],hh:["hour",Xy,void 0,"isPm"],H:["hour",Zy],HH:["hour",Xy],m:["minute",Zy],mm:["minute",Xy],s:["second",Zy],ss:["second",Xy],YYYY:["year",WK],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",Xy,function(e){return+e*10}],SSS:["millisecond",GK],d:O8,dd:O8,ddd:M8,dddd:M8,MMM:["month",aE,E8("monthNamesShort")],MMMM:["month",aE,E8("monthNames")],a:R8,A:R8,ZZ:P8,Z:P8},sA={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},KK=function(e){return h1(sA,e)},I8=function(e,t,n){if(t===void 0&&(t=sA.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=sA[t]||t;var r=[];t=t.replace(b8,function(s,l){return r.push(l),"@@@"});var i=h1(h1({},aA),n);return t=t.replace(_8,function(s){return $K[s](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function QK(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=sA[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],c=t.replace(b8,function(X,Y){return l.push(A8(Y)),"@@@"}),h={},p={};c=A8(c).replace(_8,function(X){var Y=qK[X],ne=Y[0],ve=Y[1],ye=Y[3];if(h[ne])throw new Error("Invalid format. "+ne+" specified twice in format");return h[ne]=!0,ye&&(p[ye]=!0),s.push(Y),"("+ve+")"}),Object.keys(p).forEach(function(X){if(!h[X])throw new Error("Invalid format. "+X+" is required in specified format")}),c=c.replace(/@@@/g,function(){return l.shift()});var v=e.match(new RegExp(c,"i"));if(!v)return null;for(var y=h1(h1({},aA),n),b=1;b<v.length;b++){var T=s[b-1],M=T[0],R=T[2],I=R?R(v[b],y):+v[b];if(I==null)return null;i[M]=I}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var N;if(i.timezoneOffset==null){N=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var z=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,H=z.length;b<H;b++)if(h[z[b][0]]&&i[z[b][0]]!==N[z[b][1]]())return null}else if(N=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return N}var ope={format:I8,parse:QK,defaultI18n:T8,setGlobalDateI18n:YK,setGlobalDateMasks:KK},ape=null;const sE=1e3,lE=sE*60,uE=lE*60,d1=uE*24,cE=d1*7,D8=d1*30,L8=d1*365;function md(e,t,n,r){const i=(p,v)=>{const y=T=>r(T)%v===0;let b=v;for(;b&&!y(p);)n(p,-1),b-=1;return p},s=(p,v)=>{v&&i(p,v),t(p)},l=(p,v)=>{const y=new Date(+p);return s(y,v),y},c=(p,v)=>{const y=new Date(+p-1);return s(y,v),n(y,v),s(y),y};return{ceil:c,floor:l,range:(p,v,y,b)=>{const T=[],M=Math.floor(y),R=b?c(p,y):c(p);for(let I=R;I<v;n(I,M),s(I))T.push(new Date(+I));return T},duration:e}}const JK=md(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),eQ=md(sE,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getSeconds()),tQ=md(lE,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getMinutes()),nQ=md(uE,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+uE*t)},e=>e.getHours()),rQ=md(d1,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+d1*t)},e=>e.getDate()-1),N8=md(D8,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),iQ=md(cE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=N8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/cE)}),oQ=md(L8,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),F8={millisecond:JK,second:eQ,minute:tQ,hour:nQ,day:rQ,week:iQ,month:N8,year:oQ},aQ=md(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),sQ=md(sE,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getUTCSeconds()),lQ=md(lE,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getUTCMinutes()),uQ=md(uE,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+uE*t)},e=>e.getUTCHours()),cQ=md(d1,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+d1*t)},e=>e.getUTCDate()-1),B8=md(D8,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),fQ=md(cE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+cE*t)},e=>{const t=B8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/cE)}),hQ=md(L8,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),k8={millisecond:aQ,second:sQ,minute:lQ,hour:uQ,day:cQ,week:fQ,month:B8,year:hQ};function dQ(e){const t=e?k8:F8,{year:n,month:r,week:i,day:s,hour:l,minute:c,second:h,millisecond:p}=t;return{tickIntervals:[[h,1],[h,5],[h,15],[h,30],[c,1],[c,5],[c,15],[c,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:p}}function z8(e,t,n,r,i){const s=+e,l=+t,{tickIntervals:c,year:h,millisecond:p}=dQ(i),v=([I,N])=>I.duration*N,y=r?(l-s)/r:n||5,b=r||(l-s)/y,T=c.length,M=AM(c,b,0,T,v);let R;if(M===T){const I=eD(s/h.duration,l/h.duration,y);R=[h,I]}else if(M){const I=b/v(c[M-1])<v(c[M])/b,[N,z]=I?c[M-1]:c[M],H=r?Math.ceil(r/N.duration):z;R=[N,H]}else{const I=Math.max(eD(s,l,y),1);R=[p,I]}return R}const pQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=z8(l,c,n,r,i),v=h.range(l,new Date(+c+1),p,!0);return s?v.reverse():v},vQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=z8(l,c,n,r,i),v=[h.floor(l,p),h.ceil(c,p)];return s?v.reverse():v};function mQ(e,t){const{second:n,minute:r,hour:i,day:s,week:l,month:c,year:h}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":s.floor(e)<e?"hh A":c.floor(e)<e?l.floor(e)<e?"MMM DD":"ddd DD":h.floor(e)<e?"MMMM":"YYYY"}function gQ(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class aP extends sT{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:pQ,interpolate:Ib,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return vQ}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,s=t[0],l=t[t.length-1];return[s,l,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?k8:F8,i=n?gQ:K_;return s=>I8(i(s),t||mQ(s,r))}clone(){return new aP(this.options)}}const U8=e=>new aP(e);U8.props={};const j8=e=>t=>-e(-t),sP=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?j8(r):r},lP=(e,t)=>{const n=e===Math.E?Math.exp:r=>vf(e,r);return t?j8(n):n},yQ=(e,t,n,r=10)=>{const i=e<0,s=lP(r,i),l=sP(r,i),c=t<e,h=c?t:e,p=c?e:t;let v=l(h),y=l(p),b=[];if(!(r%1)&&y-v<n){if(v=Math.floor(v),y=Math.ceil(y),i)for(;v<=y;v+=1){const T=s(v);for(let M=r-1;M>=1;M-=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}else for(;v<=y;v+=1){const T=s(v);for(let M=1;M<r;M+=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}b.length*2<n&&(b=Q_(h,p,n))}else{const T=n===-1?y-v:Math.min(y-v,n);b=Q_(v,y,T).map(s)}return c?b.reverse():b},_Q=(e,t,n,r)=>{const i=e<0,s=sP(r,i),l=lP(r,i),c=e>t,h=c?t:e,p=c?e:t,v=[l(Math.floor(s(h))),l(Math.ceil(s(p)))];return c?v.reverse():v};class uP extends sT{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:D2,tickMethod:yQ,tickCount:5}}chooseNice(){return _Q}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],s=t[t.length-1];return[i,s,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[sP(t,r),lP(t,r)]}clone(){return new uP(this.options)}}const V8=e=>new uP(e);V8.props={};const bQ=e=>t=>t<0?-vf(-t,e):vf(t,e),xQ=e=>t=>t<0?-vf(-t,1/e):vf(t,1/e),EQ=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class lA extends sT{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:D2,tickMethod:Q_,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[K_,K_];const n=t===.5?EQ:bQ(t),r=xQ(t);return[n,r]}clone(){return new lA(this.options)}}const H8=e=>new lA(e);H8.props={};class cP extends lA{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:D2,tickMethod:Q_,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new cP(this.options)}}const G8=e=>new cP(e);G8.props={};const W8=e=>new Db(e);W8.props={};const Z8=e=>new dT(e);Z8.props={};const X8=e=>new hT(e);X8.props={};const SQ=e=>t=>{const n=e(t);return(0,Yl.Z)(n)?Math.round(n):n};function wQ(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:s,interpolator:l,round:c}=this.getOptions(),h=t(s.map(r)),p=c?SQ(l):l;this.output=Pb(p,h,i,r)},n.prototype.invert=void 0}}var TQ=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},fP;function AQ(e){return[e(0),e(1)]}const CQ=e=>{const[t,n]=e;return Pb(Ib(0,1),iT(t,n))};let hP=fP=class extends hd{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:K_,tickMethod:Q_,tickCount:5}}constructor(t){super(t)}clone(){return new fP(this.options)}};hP=fP=TQ([wQ(AQ,CQ)],hP);const Y8=e=>new hP(e);Y8.props={};const $8=e=>new F2(e);$8.props={};function dP({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:s,padding2:l,padding3:c,alpha90:h,alpha65:p,alpha45:v,alpha25:y,alpha10:b,category10:T,category20:M,sizeDefault:R=1,padding:I="auto",margin:N=16}){return{padding:I,margin:N,size:R,color:e,category10:T,category20:M,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:b,labelAlign:"horizontal",labelFill:t,labelOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:v,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:v,titleFill:t,titleOpacity:h,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:h,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:v,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:h,tickStroke:t,tickStrokeOpacity:v},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:h,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:p,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const OQ=dP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),pP=e=>Jr({},OQ,e);pP.props={};const q8=e=>Jr({},pP(),{category10:"category10",category20:"category20"},e);q8.props={};const MQ=dP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"#141414",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),K8=e=>Jr({},MQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),Q8=e=>Object.assign({},K8(),{category10:"category10",category20:"category20"},e);Q8.props={};const RQ=dP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),J8=e=>Jr({},RQ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);J8.props={};const ek=e=>(...t)=>{const n=Ly(Object.assign({},{crossPadding:50},e))(...t);return cD(n,e),n};ek.props=Object.assign(Object.assign({},Ly.props),{defaultPosition:"bottom"});function cpe(){}const tk=e=>(...t)=>{const n=Ly(Object.assign({},{crossPadding:10},e))(...t);return cD(n,e),n};tk.props=Object.assign(Object.assign({},Ly.props),{defaultPosition:"left"});var vP=function(){},PQ=function(e,t,n){var r=e,i=u(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(_l(r[s])||(r[s]=(0,Yl.Z)(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e};function IQ(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function DQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var Q0=X0({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),LQ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:eG(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,s){return"".concat(i,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new Xc({class:Q0.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new Xc({class:Q0.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,d.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,se.CR)(DQ(n.map(function(y){var b=y.getBBox(),T=b.width,M=b.height;return[T,M]})).map(function(y){return Math.max.apply(Math,(0,se.ev)([],(0,se.CR)(y),!1))}),2),i=r[0],s=r[1],l=this.attributes,c=l.pageWidth,h=c===void 0?i:c,p=l.pageHeight,v=p===void 0?s:p;return{pageWidth:h,pageHeight:v}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,s=this.controllerShape,l=this.pageShape,c=l.pageWidth,h=l.pageHeight;return new Zu(r,i,c+s.width,h)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,s=this,l=s.currPage,c=s.playState,h=s.playWindow,p=s.pageViews;if(c!=="idle"||n<0||p.length<=0||n>=p.length)return null;p[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var v=(0,se.CR)(this.getFollowingPageDiff(n),2),y=v[0],b=v[1];this.playState="running";var T=m4(h,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-y,", ").concat(-b,")")}],i);return Ob(T,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),T},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var s=n?(i-1+r)%r:(0,d.Z)(i-1,0,r);return this.goTo(s)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var s=n?(i+1)%r:(0,d.Z)(i+1,0,r);return this.goTo(s)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,s=r.pageHeight;if(!i||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Q0.clipPath,"rect").styles({width:i,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?A2(r):Dy(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,c=l.orientation,h=l.controllerPadding,p=s.getBBox(),v=p.width,y=p.height,b=(0,se.CR)(c==="horizontal"?[-180,0]:[-90,90],2),T=b[0],M=b[1];r.setLocalEulerAngles(T),i.setLocalEulerAngles(M);var R=r.getBBox(),I=R.width,N=R.height,z=i.getBBox(),H=z.width,X=z.height,Y=Math.max(I,v,H),ne=c==="horizontal"?{offset:[[0,0],[I/2+h,0],[I+v+h*2,0]],textAlign:"start"}:{offset:[[Y/2,-N-h],[Y/2,0],[Y/2,X+h]],textAlign:"center"},ve=(0,se.CR)(ne.offset,3),ye=(0,se.CR)(ve[0],2),De=ye[0],Ye=ye[1],Qe=(0,se.CR)(ve[1],2),yt=Qe[0],qe=Qe[1],ut=(0,se.CR)(ve[2],2),ft=ut[0],mt=ut[1],Xt=ne.textAlign,Mt=s.querySelector("text");Mt&&(Mt.style.textAlign=Xt),r.setLocalPosition(De,Ye),s.setLocalPosition(yt,qe),i.setLocalPosition(ft,mt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(Q0.pageInfo.class))===null||n===void 0||n.attr("text",l(i+1,s.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=n<r?-1:1;return i==="horizontal"?[h*l,0]:[0,h*c]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var l=(0,se.CR)(this.getFollowingPageDiff(n),2),c=l[0],h=l[1];s[n].setLocalPosition(c,h)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=this.pageViews.length>=2,p=n.maybeAppendByClassName(Q0.controller,"g");if($w(p.node(),h),!!h){var v=Vs(this.attributes,"button"),y=Vs(this.attributes,"pageNum"),b=(0,se.CR)(Mg(v),2),T=b[0],M=b[1],R=T.size,I=(0,se._T)(T,["size"]),N=!p.select(Q0.prevBtnGroup.class).node(),z=p.maybeAppendByClassName(Q0.prevBtnGroup,"g").styles(M);this.prevBtnGroup=z.node();var H=z.maybeAppendByClassName(Q0.prevBtn,"path"),X=p.maybeAppendByClassName(Q0.nextBtnGroup,"g").styles(M);this.nextBtnGroup=X.node();var Y=X.maybeAppendByClassName(Q0.nextBtn,"path");[H,Y].forEach(function(ve){ve.styles((0,se.pi)((0,se.pi)({},I),{transformOrigin:"center"})),gM(ve.node(),R,!0)});var ne=p.maybeAppendByClassName(Q0.pageInfoGroup,"g");this.pageInfoGroup=ne.node(),ne.maybeAppendByClassName(Q0.pageInfo,"text").styles(y),this.updatePageInfo(),p.node().setLocalPosition(l+i,c/2),N&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l;this.attr("transform","translate(".concat(s,", ").concat(c,")"));var h=hs(r);this.renderClipPath(h),this.renderController(h),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=Lw(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Ba.INSERTED,r),this.playWindow.addEventListener(Ba.REMOVED,r)},t}(uh),s0=X0({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function NQ(e){var t=e.querySelector(s0.marker.class);return t?t.style:{}}var FQ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new _g({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,s=n.node().getBBox(),l=s.width,c=s.height,h=r.node().getBBox(),p=h.width,v=h.height;return{markerWidth:i,labelWidth:l,valueWidth:p,height:Math.max(i,c,v)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,se.CR)(Mh(n),2),i=r[0],s=r[1],l=this.showValue?s:0,c=i+l;return[i/c,l/c]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,s=r.width,l=this.actualSpace,c=l.markerWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,y=p.valueWidth,b=(0,se.CR)(this.spacing,2),T=b[0],M=b[1];if(s){var R=s-i-T-M,I=(0,se.CR)(this.span,2),N=I[0],z=I[1];n=(0,se.CR)([N*R,z*R],2),v=n[0],y=n[1]}var H=c+v+y+T+M;return{width:H,height:h,markerWidth:c,labelWidth:v,valueWidth:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,se.CR)(Mh(n),2),i=r[0],s=r[1];return this.showValue?[i,s]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,s=n.valueWidth,l=n.width,c=n.height,h=(0,se.CR)(this.spacing,2),p=h[0],v=h[1];return{height:c,width:l,markerWidth:r,labelWidth:i,valueWidth:s,position:[r/2,r+p,r+i+p+v]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=NQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,c=r.markerLineWidth,h=c===void 0?n.lineWidth:c,p=r.markerStroke,v=p===void 0?n.stroke:p,y=+(l||h||(v?1:0))*Math.sqrt(2),b=this.markerGroup.node().getBBox(),T=b.width,M=b.height;return(1-y/Math.max(T,M))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,s=Vs(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(s0.markerGroup,"g").style("zIndex",0),Np(!!i,this.markerGroup,function(){var l,c=r.markerGroup.node(),h=(l=c.childNodes)===null||l===void 0?void 0:l[0],p=typeof i=="string"?new jl({style:{symbol:i},className:s0.marker.name}):i();h?p.nodeName===h.nodeName?h instanceof jl?h.update((0,se.pi)((0,se.pi)({},s),{symbol:i})):(SV(h,p),hs(h).styles(s)):(h.remove(),hs(p).attr("className",s0.marker.name).styles(s),c.appendChild(p)):(p instanceof jl||hs(p).attr("className",s0.marker.name).styles(s),c.appendChild(p)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var v=gM(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(v,")")})},t.prototype.renderLabel=function(n){var r=Vs(this.attributes,"label"),i=r.text,s=(0,se._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(s0.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(s0.label,function(){return q_(i)}).styles(s)},t.prototype.renderValue=function(n){var r=this,i=Vs(this.attributes,"value"),s=i.text,l=(0,se._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(s0.valueGroup,"g").style("zIndex",0),Np(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(s0.value,function(){return q_(s)}).styles(l)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,s=r.height,l=Vs(this.attributes,"background");this.background=n.maybeAppendByClassName(s0.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(s0.background,"rect").styles((0,se.pi)({width:i,height:s},l))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,s=n.height,l=(0,se.CR)(n.position,3),c=l[0],h=l[1],p=l[2],v=s/2;this.markerGroup.styles({transform:"translate(".concat(c,", ").concat(v,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(h,", ").concat(v,")")}),xM(this.labelGroup.select(s0.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(p,", ").concat(v,")")}),xM(this.valueGroup.select(s0.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=hs(r),s=n.x,l=s===void 0?0:s,c=n.y,h=c===void 0?0:c;i.styles({transform:"translate(".concat(l,", ").concat(h,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(uh),p1=X0({page:"item-page",navigator:"navigator",item:"item"},"items"),nk=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},BQ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:vP,mouseenter:vP,mouseleave:vP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,s=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,s.length]:[s.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,s=Vs(this.attributes,"item"),l=r.map(function(c,h){var p=c.id,v=p===void 0?h:p,y=c.label,b=c.value;return{id:"".concat(v),index:h,style:(0,se.pi)({layout:i,labelText:y,valueText:b},Object.fromEntries(Object.entries(s).map(function(T){var M=(0,se.CR)(T,2),R=M[0],I=M[1];return[R,Y0(I,[c,h,r])]})))}});return l},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,s=r.width,l=r.rowPadding,c=r.colPadding,h=(0,se.CR)(this.navigatorShape,1),p=h[0],v=(0,se.CR)(this.grid,2),y=v[0],b=v[1],T=b*y,M=0;return this.pageViews.children.map(function(R,I){var N,z,H=Math.floor(I/T),X=I%T,Y=n.ifHorizontal(b,y),ne=[Math.floor(X/Y),X%Y];i==="vertical"&&ne.reverse();var ve=(0,se.CR)(ne,2),ye=ve[0],De=ve[1],Ye=(s-p-(b-1)*c)/b,Qe=R.getBBox().height,yt=(0,se.CR)([0,0],2),qe=yt[0],ut=yt[1];return i==="horizontal"?(N=(0,se.CR)([M,ye*(Qe+l)],2),qe=N[0],ut=N[1],M=De===b-1?0:M+Ye+c):(z=(0,se.CR)([De*(Ye+c),M],2),qe=z[0],ut=z[1],M=ye===y-1?0:M+Qe+l),{page:H,index:I,row:ye,col:De,pageIndex:X,width:Ye,height:Qe,x:qe,y:ut}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,s=n.rowPadding,l=n.colPadding,c=(0,se.CR)(this.navigatorShape,1),h=c[0],p=(0,se.CR)(this.grid,2),v=p[0],y=p[1],b=(0,se.CR)([r-h,i],2),T=b[0],M=b[1],R=(0,se.CR)([0,0,0,0,0,0,0,0],8),I=R[0],N=R[1],z=R[2],H=R[3],X=R[4],Y=R[5],ne=R[6],ve=R[7];return this.pageViews.children.map(function(ye,De){var Ye,Qe,yt,qe,ut=ye.getBBox(),ft=ut.width,mt=ut.height,Xt=ne===0?0:l,Mt=ne+Xt+ft;if(Mt<=T&&nk(X,function(Tn){return Tn<y}))return Ye=(0,se.CR)([ne+Xt,ve,Mt],3),I=Ye[0],N=Ye[1],ne=Ye[2],{width:ft,height:mt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++};Qe=(0,se.CR)([Y+1,0,0,ve+mt+s],4),Y=Qe[0],X=Qe[1],ne=Qe[2],ve=Qe[3];var kt=ve+mt;return kt<=M&&nk(Y,function(Tn){return Tn<v})?(yt=(0,se.CR)([ne,ve,ft],3),I=yt[0],N=yt[1],ne=yt[2],{width:ft,height:mt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++}):(qe=(0,se.CR)([0,0,ft,0,z+1,0,0,0],8),I=qe[0],N=qe[1],ne=qe[2],ve=qe[3],z=qe[4],H=qe[5],Y=qe[6],X=qe[7],{width:ft,height:mt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return xm(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(p1.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(p1.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,s=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var c=this.dispatchCustomEvent.bind(this);hs(n).selectAll(p1.item.class).data(this.renderData,function(h){return h.id}).join(function(h){return h.append(function(p){var v=p.style;return new FQ({style:v})}).attr("className",p1.item.name).on("click",function(){i==null||i(this),c("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),c("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),c("itemMouseleave",{item:this})})},function(h){return h.each(function(p){var v=p.style;this.update(v)})},function(h){return h.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,c=(0,se.CR)(this.navigatorShape,2),h=c[0],p=c[1];this.navigator.update(i==="grid"?{pageWidth:s-h,pageHeight:l-p}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(IQ(this.itemsLayout,"page")).map(function(s){var l=(0,se.CR)(s,2),c=l[0],h=l[1];return{page:c,layouts:h}}),i=(0,se.ev)([],(0,se.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,c=n.pageViews.appendChild(new Xc({className:p1.page.name}));l.forEach(function(h){var p=h.x,v=h.y,y=h.index,b=h.width,T=h.height,M=i[y];c.appendChild(M),PQ(M,"__layout__",h),M.update({x:p,y:v,width:b,height:T})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=Vs(this.attributes,"nav"),s=Cg({orientation:r},i),l=this;return n.selectAll(p1.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new LQ({style:s})}).attr("className",p1.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var s=this.renderNavigator(hs(r));this.renderItems(s.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new au(n,{detail:r});this.dispatchEvent(i)},t}(uh),kQ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,uG)||this}return t.prototype.renderTitle=function(n,r,i){var s=this.attributes,l=s.showTitle,c=s.titleText,h=Vs(this.attributes,"title"),p=(0,se.CR)(Mg(h),2),v=p[0],y=p[1];this.titleGroup=n.maybeAppendByClassName(Rh.titleGroup,"g").styles(y);var b=(0,se.pi)((0,se.pi)({width:r,height:i},v),{text:l?c:""});this.title=this.titleGroup.maybeAppendByClassName(Rh.title,function(){return new q4({style:b})}).update(b)},t.prototype.renderItems=function(n,r){var i=r.x,s=r.y,l=r.width,c=r.height,h=Vs(this.attributes,"title",!0),p=(0,se.CR)(Mg(h),2),v=p[0],y=p[1],b=(0,se.pi)((0,se.pi)({},v),{width:l,height:c,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Rh.itemsGroup,"g").styles((0,se.pi)((0,se.pi)({},y),{transform:"translate(".concat(i,", ").concat(s,")")}));var T=this;this.itemsGroup.selectAll(Rh.items.class).data(["items"]).join(function(M){return M.append(function(){return new BQ({style:b})}).attr("className",Rh.items.name).each(function(){T.items=hs(this)})},function(M){return M.update(b)},function(M){return M.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,s=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(s,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Zu(0,0,i,s)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!s?e.prototype.getBBox.call(this):GV(i,s)},t.prototype.render=function(n,r){var i=this.attributes,s=i.width,l=i.height,c=i.x,h=c===void 0?0:c,p=i.y,v=p===void 0?0:p,y=hs(r);r.style.transform="translate(".concat(h,", ").concat(v,")"),this.renderTitle(y,s,l),this.renderItems(y,this.availableSpace),this.adjustLayout()},t}(uh);function fE(e){if(Qa(e)){var t=e;return t[t.length-1]}}var zQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function UQ(e,t){const n=_m(e,"shape"),r=_m(e,"color"),i=n?n.clone():null,s=[];for(const[c,h]of t){const p=c.type,y=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:h.data).map((b,T)=>{var M;return i?i.map(b||"point"):((M=c==null?void 0:c.style)===null||M===void 0?void 0:M.shape)||h.defaultShape||"point"});typeof p=="string"&&s.push([p,y])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([c,h])=>{let p=0;for(let v=0;v<s.length;v++){const y=l[v%l.length];h[v]===y&&p++}return[p/h.length,[c,h]]}).sort((c,h)=>h[0]-c[0])[0][1]}function jQ(e,t){const{scales:n,library:r,markState:i}=t,[s,l]=UQ(n,i),{itemMarker:c,itemMarkerSize:h}=e,p=(b,T)=>{var M,R,I;const N=((I=(R=(M=r[`mark.${s}`])===null||M===void 0?void 0:M.props)===null||R===void 0?void 0:R.shape[b])===null||I===void 0?void 0:I.props.defaultMarker)||fE(b.split(".")),z=typeof h=="function"?h(T):h;return()=>$q(N,{color:T.color})(0,0,z)},v=b=>`${l[b]}`;return _m(n,"shape")&&!c?(b,T)=>p(v(T),b):typeof c=="function"?(b,T)=>{const M=c(b.id,T);return typeof M=="string"?p(M,b):M}:(b,T)=>p(c||v(T),b)}function VQ(e){const t=_m(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function HQ(e,t){const n=_m(e,"size");return n instanceof oA?n.map(NaN)*2:t}function GQ(e,t){const{labelFormatter:n=b=>`${b}`}=e,{scales:r,theme:i}=t,s=i.legendCategory.itemMarkerSize,l=HQ(r,s),c={itemMarker:jQ(Object.assign(Object.assign({},e),{itemMarkerSize:l}),t),itemMarkerSize:l,itemMarkerOpacity:VQ(r)},h=typeof n=="string"?nn(n):n,p=_m(r,"color"),v=gH(r),y=p?b=>p.map(b):()=>t.theme.color;return Object.assign(Object.assign({},c),{data:v.map(b=>({id:b,label:h(b),color:y(b)}))})}function WQ(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:l}=e,{width:c,height:h}=l;return{width:c,height:h}}const{width:i,height:s}=lD(e,t,n);return{width:i,height:s}}const mP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,cols:h,itemMarker:p}=e,v=zQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:y}=v;return b=>{const{value:T,theme:M}=b,{bbox:R}=T,{width:I,height:N}=WQ(T,e,mP),z=aD(s,n),H=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:I,height:N,layout:h!==void 0?"grid":"flex"},h!==void 0&&{gridCol:h}),y!==void 0&&{gridRow:y}),{titleText:lT(c)}),GQ(e,b)),{legendCategory:X={}}=M,Y=uT(Object.assign({},X,H,v)),ne=new pH({style:Object.assign(Object.assign({x:R.x,y:R.y,width:R.width,height:R.height},z),{subOptions:Y})});return ne.appendChild(new kQ({className:"legend-category",style:Y})),ne}};mP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const rk=e=>()=>new Xc;rk.props={};var ZQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ik(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const XQ=dH({render(e,t){const{width:n,title:r,subtitle:i,spacing:s=2,align:l="left",x:c,y:h}=e,p=ZQ(e,["width","title","subtitle","spacing","align","x","y"]);t.style.transform=`translate(${c}, ${h})`;const v=bo(p,"title"),y=bo(p,"subtitle"),T=oD(t,".title","text").attr("className","title").call(sa,Object.assign(Object.assign(Object.assign({},ik(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),v)).node().getLocalBounds();oD(t,".sub-title","text").attr("className","sub-title").call(M=>{if(!i)return M.node().remove();M.node().attr(Object.assign(Object.assign(Object.assign({},ik(0,T.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:i}),y))})}}),ok=e=>({value:t,theme:n})=>{const{x:r,y:i,width:s,height:l}=t.bbox;return new XQ({style:Jr({},n.title,Object.assign({x:r,y:i,width:s,height:l},e))})};ok.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var gP=function(e){if(typeof e!="object"||e===null)return e;var t;if(Vo(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=gP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=gP(e[i]):t[i]=e[i]}return t},yP=gP,YQ=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,Jr({},{type:"column"},(0,se.pi)({style:i},s)))||this,r.columnsGroup=new Xc({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,s=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(s,")"),hs(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(c){this.attr(c)})},function(l){return l.each(function(c){this.attr(c)})},function(l){return l.remove()})},t.prototype.update=function(n){this.attr(Cg({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Mf),$Q=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,se._T)(n,["style"]);return r=e.call(this,Jr({},{type:"lines"},(0,se.pi)({style:i},s)))||this,r.linesGroup=r.appendChild(new Xc),r.areasGroup=r.appendChild(new Xc),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,s=n.x,l=n.y;this.style.transform="translate(".concat(s,", ").concat(l,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(Cg({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){hs(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){hs(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Mf);function qQ(e,t,n,r){var i,s=[],l=!!r,c,h,p=[1/0,1/0],v=[-1/0,-1/0],y,b,T;if(l){i=(0,se.CR)(r,2),p=i[0],v=i[1];for(var M=0,R=e.length;M<R;M+=1){var I=e[M];p=Y_(p,I),v=$_(v,I)}}for(var M=0,N=e.length;M<N;M+=1){var I=e[M];if(M===0&&!n)T=I;else if(M===N-1&&!n)b=I,s.push(T),s.push(b);else{var z=[M?M-1:N-1,M-1][n?0:1];c=e[z],h=e[n?(M+1)%N:M+1];var H=[0,0];H=dM(h,c),H=Og(H,t);var X=O2(I,c),Y=O2(I,h),ne=X+Y;ne!==0&&(X/=ne,Y/=ne);var ve=Og(H,-X),ye=Og(H,Y);b=C2(I,ve),y=C2(I,ye),y=Y_(y,$_(h,I)),y=$_(y,Y_(h,I)),ve=dM(y,I),ve=Og(ve,-X/Y),b=C2(I,ve),b=Y_(b,$_(c,I)),b=$_(b,Y_(c,I)),ye=dM(I,b),ye=Og(ye,Y/X),y=C2(I,ye),l&&(b=$_(b,p),b=Y_(b,v),y=$_(y,p),y=Y_(y,v)),s.push(T),s.push(b),T=y}}return n&&s.push(s.shift()),s}function KQ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,s=[],l=0,c=e.length;l<c;l+=2)s.push([e[l],e[l+1]]);for(var h=qQ(s,.4,i,n),p=s.length,v=[],y,b,T,l=0;l<p-1;l+=1)y=h[l*2],b=h[l*2+1],T=s[l+1],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]]);return i&&(y=h[p],b=h[p+1],r=(0,se.CR)(s,1),T=r[0],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]])),v}function QQ(e,t){var n,r=t.x,i=t.y,s=(0,se.CR)(i.getOptions().range||[0,0],2),l=s[0],c=s[1];return c>l&&(n=(0,se.CR)([l,c],2),c=n[0],l=n[1]),e.map(function(h){var p=h.map(function(v,y){return[r.map(y),(0,d.Z)(i.map(v),c,l)]});return p})}function hE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,s){return(0,se.ev)([s===n?"M":"L"],(0,se.CR)(i),!1)});return t?r.reverse():r}function uA(e,t){if(t===void 0&&(t=!1),e.length<=2)return hE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var s=t?e[r-i-1]:e[i];lh(s,n.slice(-2))||n.push.apply(n,(0,se.ev)([],(0,se.CR)(s),!1))}var l=KQ(n,!1);return t?l.unshift((0,se.ev)(["M"],(0,se.CR)(e[r-1]),!1)):l.unshift((0,se.ev)(["M"],(0,se.CR)(e[0]),!1)),l}function _P(e,t,n){var r=yP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function JQ(e,t,n,r){return e.map(function(i){return _P(t?uA(i):hE(i),n,r)})}function eJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=hE(s),c=void 0;if(i===0)c=_P(l,t,n);else{var h=e[i-1],p=hE(h,!0);p[0][0]="L",c=(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(l),!1),(0,se.CR)(p),!1),[["Z"]],!1)}r.push(c)}return r}function tJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=uA(s),c=void 0;if(i===0)c=_P(l,t,n);else{var h=e[i-1],p=uA(h,!0),v=s[0];p[0][0]="L",c=(0,se.ev)((0,se.ev)((0,se.ev)([],(0,se.CR)(l),!1),(0,se.CR)(p),!1),[(0,se.ev)(["M"],(0,se.CR)(v),!1),["Z"]],!1)}r.push(c)}return r}var nJ=function(e,t){if(Vo(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=Kd(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},rJ=function(e,t){if(Vo(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=Kd(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}};function ak(e){return e.length===0?[0,0]:[ns(nJ(e,function(t){return ns(t)||0})),zo(rJ(e,function(t){return zo(t)||0}))]}function sk(e){for(var t=yP(e),n=t[0].length,r=(0,se.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],s=r[1],l=0;l<t.length;l+=1)for(var c=t[l],h=0;h<n;h+=1)c[h]>=0?(c[h]+=i[h],i[h]=c[h]):(c[h]+=s[h],s[h]=c[h]);return t}var iJ=function(e){(0,se.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=yP(n);return(0,Yl.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?sk(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,se.CR)(n.getOptions().domain||[0,0],2),i=r[0],s=r[1];return s<0?n.map(s):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,s=r.isStack,l=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var c=Vs(this.attributes,"area"),h=Vs(this.attributes,"line"),p=this.containerShape.width,v=this.data;if(v[0].length===0)return{lines:[],areas:[]};var y=this.scales,b=y.x,T=y.y,M=QQ(v,{type:"line",x:b,y:T}),R=[];if(c){var I=this.baseline;s?R=l?tJ(M,p,I):eJ(M,p,I):R=JQ(M,l,p,I)}return{lines:M.map(function(N,z){return(0,se.pi)({stroke:n.getColor(z),d:l?uA(N):hE(N)},h)}),areas:R.map(function(N,z){return(0,se.pi)({d:N,fill:n.getColor(z)},c)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=Vs(this.attributes,"column"),i=this.attributes,s=i.isStack,l=i.type,c=i.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var h=this.containerShape.height,p=this.rawData;if(!p)return{columns:[]};s&&(p=sk(p));var v=this.createScales(p),y=v.x,b=v.y,T=(0,se.CR)(ak(p),2),M=T[0],R=T[1],I=new hd({domain:[0,R-(M>0?0:M)],range:[0,h*c]}),N=y.getBandWidth(),z=this.rawData;return{columns:p.map(function(H,X){return H.map(function(Y,ne){var ve=N/p.length,ye=function(){return{x:y.map(ne)+ve*X,y:Y>=0?b.map(Y):b.map(0),width:ve,height:I.map(Math.abs(Y))}},De=function(){return{x:y.map(ne),y:b.map(Y),width:N,height:I.map(z[X][ne])}};return(0,se.pi)((0,se.pi)({fill:n.getColor(X)},r),s?De():ye())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){Lj(r,".container","rect").attr("className","container").node();var i=n.type,s=n.x,l=n.y,c="spark".concat(i),h=(0,se.pi)({x:s,y:l},i==="line"?this.linesStyle:this.columnsStyle);hs(r).selectAll(".spark").data([i]).join(function(p){return p.append(function(v){return v==="line"?new $Q({className:c,style:h}):new YQ({className:c,style:h})}).attr("className","spark ".concat(c))},function(p){return p.update(h)},function(p){return p.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return Vo(r)?r[n%r.length]:Kd(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,s=this.attributes,l=s.type,c=s.scale,h=s.range,p=h===void 0?[]:h,v=s.spacing,y=this.containerShape,b=y.width,T=y.height,M=(0,se.CR)(ak(n),2),R=M[0],I=M[1],N=new hd({domain:[(r=p[0])!==null&&r!==void 0?r:R,(i=p[1])!==null&&i!==void 0?i:I],range:[T,T*(1-c)]});return l==="line"?{type:l,x:new hd({domain:[0,n[0].length-1],range:[0,b]}),y:N}:{type:l,x:new Wy({domain:n[0].map(function(z,H){return H}),range:[0,b],paddingInner:v,paddingOuter:v/2,align:.5}),y:N}},t.tag="sparkline",t}(uh),lk=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,(0,se.pi)((0,se.pi)((0,se.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},ym(yD,"handle")),ym(mD,"handleIcon")),ym(gD,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(s){s.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(fT(s));var l=r.availableSpace,c=l.x,h=l.y,p=r.getBBox(),v=p.x,y=p.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([c,h])-r.getOrientVal([+v,+y])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var s=r.attributes,l=s.slidable,c=s.brushable,h=s.type;i.stopPropagation();var p=r.getOrientVal(fT(i)),v=p-r.prevPos;if(v){var y=r.getRatio(v);switch(r.target){case"start":l&&r.setValuesOffset(y);break;case"end":l&&r.setValuesOffset(0,y);break;case"selection":l&&r.setValuesOffset(y,y);break;case"track":if(!c)return;r.selectionWidth+=y,h==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=p}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var s=r.attributes,l=s.onChange,c=s.type,h=c==="range"?i:i[1],p=c==="range"?r.getValues():r.getValues()[1],v=new au("valuechange",{detail:{oldValue:h,value:p}});r.dispatchEvent(v),l==null||l(p)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=Vs(this.attributes,"sparkline");return(0,se.pi)((0,se.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,s=(0,se.CR)(this.getOrientVal([[r,i],[i,r]]),2),l=s[0],c=s[1];return{width:l,height:c}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,s=n.padding,l=(0,se.CR)(Mh(s),4),c=l[0],h=l[1],p=l[2],v=l[3],y=this.shape,b=y.width,T=y.height;return{x:v,y:c,width:b-(v+h),height:T-(c+p)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(bm.selection.class).each(function(i,s){Pv(this,r[s],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Pv(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Pv(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,s=r.y,l=Vs(this.attributes,"track");this.trackShape=hs(n).maybeAppendByClassName(bm.track,"rect").styles((0,se.pi)((0,se.pi)({x:i,y:s},this.shape),l))},t.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.brushable;this.brushArea=hs(n).maybeAppendByClassName(bm.brushArea,"rect").styles((0,se.pi)({x:i,y:s,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.orientation,h=hs(n).maybeAppendByClassName(bm.sparklineGroup,"g");Np(c==="horizontal",h,function(p){var v=(0,se.pi)((0,se.pi)({},r.sparklineStyle),{x:s,y:l});p.maybeAppendByClassName(bm.sparkline,function(){return new iJ({style:v})}).update(v)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,s=i.showHandle,l=i.type,c=l==="range"?["start","end"]:["end"],h=s?c:[],p=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(bm.handle.class).data(h.map(function(v){return{type:v}}),function(v){return v.type}).join(function(v){return v.append(function(y){var b=y.type;return new _D({style:n.getHandleStyle(b)})}).each(function(y){var b=y.type;this.attr("class","".concat(bm.handle.name," ").concat(b,"-handle"));var T="".concat(b,"Handle");p[T]=this,this.addEventListener("pointerdown",p.onDragStart(b))})},function(v){return v.each(function(y){var b=y.type;this.update(p.getHandleStyle(b))})},function(v){return v.each(function(y){var b=y.type,T="".concat(b,"Handle");p[T]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.type,c=r.selectionType;this.foregroundGroup=hs(n).maybeAppendByClassName(bm.foreground,"g");var h=Vs(this.attributes,"selection"),p=function(y){return y.style("visibility",function(b){return b.show?"visible":"hidden"}).style("cursor",function(b){return c==="select"?"grab":c==="invert"?"crosshair":"default"}).styles((0,se.pi)((0,se.pi)({},h),{transform:"translate(".concat(i,", ").concat(s,")")}))},v=this;this.foregroundGroup.selectAll(bm.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(y,b){return{style:(0,se.pi)({},y),index:b,show:c==="select"?b===1:b!==1}}),function(y){return y.index}).join(function(y){return y.append("rect").attr("className",bm.selection.name).call(p).each(function(b,T){var M=this;T===1?(v.selectionShape=hs(this),this.on("pointerdown",function(R){M.attr("cursor","grabbing"),v.onDragStart("selection")(R)}),v.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),v.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),v.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){M.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){M.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){M.attr("cursor","pointer")})):this.on("pointerdown",v.onDragStart("track"))})},function(y){return y.call(p)},function(y){return y.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var s=(0,se.CR)(this.range,2),l=s[0],c=s[1],h=(0,se.CR)(this.getValues().map(function(I){return cT(I,r)}),2),p=h[0],v=h[1],y=Array.isArray(n)?n:[p,n!=null?n:v],b=(0,se.CR)((y||[p,v]).map(function(I){return cT(I,r)}),2),T=b[0],M=b[1];if(this.attributes.type==="value")return[0,(0,d.Z)(M,l,c)];T>M&&(i=(0,se.CR)([M,T],2),T=i[0],M=i[1]);var R=M-T;return R>c-l?[l,c]:T<l?p===l&&v===M?[l,M]:[l,R+l]:M>c?v===c&&p===T?[T,c]:[c-R,c]:[T,M]},t.prototype.calcSelectionArea=function(n){var r=(0,se.CR)(this.clampValues(n),2),i=r[0],s=r[1],l=this.availableSpace,c=l.x,h=l.y,p=l.width,v=l.height;return this.getOrientVal([[{y:h,height:v,x:c,width:i*p},{y:h,height:v,x:i*p+c,width:(s-i)*p},{y:h,height:v,x:s*p,width:(1-s)*p}],[{x:c,width:p,y:h,height:i*v},{x:c,width:p,y:i*v+h,height:(s-i)*v},{x:c,width:p,y:s*v,height:(1-s)*v}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,s=i.x,l=i.y,c=i.width,h=i.height,p=(0,se.CR)(this.clampValues(),2),v=p[0],y=p[1],b=n==="start"?-r:r,T=(n==="start"?v:y)*this.getOrientVal([c,h])+b;return{x:s+this.getOrientVal([T,c/2]),y:l+this.getOrientVal([h/2,T])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,s=i.type,l=i.orientation,c=i.formatter,h=i.autoFitLabel,p=Vs(this.attributes,"handle"),v=Vs(p,"label"),y=p.spacing,b=this.getHandleSize(),T=this.clampValues(),M=n==="start"?T[0]:T[1],R=c(M),I=new fM({style:(0,se.pi)((0,se.pi)((0,se.pi)({},v),this.inferTextStyle(n)),{text:R})}),N=I.getBBox(),z=N.width,H=N.height;if(I.destroy(),!h){if(s==="value")return{text:R,x:0,y:-H-y};var X=y+b+(l==="horizontal"?z/2:0);return r={text:R},r[l==="horizontal"?"x":"y"]=n==="start"?-X:X,r}var Y=0,ne=0,ve=this.availableSpace,ye=ve.width,De=ve.height,Ye=this.calcSelectionArea()[1],Qe=Ye.x,yt=Ye.y,qe=Ye.width,ut=Ye.height,ft=y+b;if(l==="horizontal"){var mt=ft+z/2;if(n==="start"){var Xt=Qe-ft-z;Y=Xt>0?-mt:mt}else{var Mt=ye-Qe-qe-ft>z;Y=Mt?mt:-mt}}else{var kt=ft,Tn=H+ft;n==="start"?ne=yt-b>H?-Tn:kt:ne=De-(yt+ut)-b>H?Tn:-kt}return{x:Y,y:ne,text:R}},t.prototype.getHandleLabelStyle=function(n){var r=Vs(this.attributes,"handleLabel");return(0,se.pi)((0,se.pi)((0,se.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=Vs(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,se.pi)({cursor:i,shape:n,size:s},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.showLabel,c=r.showLabelOnInteraction,h=r.orientation,p=this.calcHandlePosition(n),v=p.x,y=p.y,b=this.calcHandleText(n),T=l;return!l&&c&&(this.target?T=!0:T=!1),(0,se.pi)((0,se.pi)((0,se.pi)({},ym(this.getHandleIconStyle(),"icon")),ym((0,se.pi)((0,se.pi)({},this.getHandleLabelStyle(n)),b),"label")),{transform:"translate(".concat(v+i,", ").concat(y+s,")"),orientation:h,showLabel:T,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?i:s},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=this.attributes.type,l=(0,se.CR)(this.getValues(),2),c=l[0],h=l[1],p=s==="range"?n:0,v=[c+p,h+r].sort();i?this.setValues(v):this.innerSetValues(v,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,s=r.height;return n/this.getOrientVal([i,s])},t.prototype.dispatchCustomEvent=function(n,r,i){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new au(i,{detail:l}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,s=n.deltaY,l=s||i,c=this.getRatio(l);this.setValuesOffset(c,c,!0)}},t.tag="slider",t}(uh),oJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function aJ(e,t,n){const{x:r,y:i,width:s,height:l}=e;if(t==="left")return[r+s-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+l-n]}const dE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:s}=e,l=oJ(e,["orientation","labelFormatter","size","style","position"]);return c=>{var h;const{scales:[p],value:v,theme:y,coordinate:b}=c,{bbox:T}=v,{width:M,height:R}=T,{slider:I={}}=y,N=((h=p.getFormatter)===null||h===void 0?void 0:h.call(p))||(ye=>ye+""),z=typeof n=="string"?nn(n):n,H=t==="horizontal",X=Ru(b)&&H,{trackSize:Y=I.trackSize}=i,[ne,ve]=aJ(T,s,Y);return new lk({className:"slider",style:Object.assign({},I,Object.assign(Object.assign({x:ne,y:ve,trackLength:H?M:R,orientation:t,formatter:ye=>{const De=z||N,Ye=X?1-ye:ye,Qe=Ub(p,Ye,!0);return De(Qe)},sparklineData:lJ(e,c)},i),l))})}};function sJ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:s,slider:l}=i;if(l!=null&&l.x&&Object.keys(l.x).length===0){const c=h=>{const p=s[h];return[h,p?p.value:void 0]};return Object.fromEntries(t.map(c))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,s,l)=>(i[s]=i[s]||[],i[s].push(n.y[l]),i),{});return Object.values(r)}function lJ(e,t){const{markState:n}=t;return Vo(e.sparklineData)?e.sparklineData:sJ(n,["y","series"])}dE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const uk=e=>dE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));uk.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"bottom"});const ck=e=>dE(Object.assign(Object.assign({},e),{orientation:"vertical"}));ck.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"left"});var uJ=function(e){(0,se.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var s=r.attributes.value;if(i!==s){var l={detail:{oldValue:i,value:s}};r.dispatchEvent(new au("scroll",l)),r.dispatchEvent(new au("valuechange",l))}},r.onTrackClick=function(i){var s=r.attributes.slidable;if(s){var l=(0,se.CR)(r.getLocalPosition(),2),c=l[0],h=l[1],p=(0,se.CR)(r.padding,4),v=p[0],y=p[3],b=r.getOrientVal([c+y,h+v]),T=r.getOrientVal(fT(i)),M=(T-b)/r.trackLength;r.setValue(M,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new au("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new au("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new au("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new au("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return Mh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,se.CR)(this.range,2),i=r[0],s=r[1];return(0,d.Z)(n,i,s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,s=i===void 0?r:i;return s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,se.CR)(this.padding,4),s=i[0],l=i[1],c=i[2],h=i[3],p=(0,se.CR)(this.getOrientVal([[r,n],[n,r]]),2),v=p[0],y=p[1];return{x:h,y:s,width:+v-(h+l),height:+y-(s+c)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,c=s.height;return i||this.getOrientVal([c,l])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,s=r.contentLength,l=i/s,c=(0,se.CR)(this.range,2),h=c[0],p=c[1],v=n*(p-h-l);return[v,v+l]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.trackSize,h=r.padding,p=r.slidable,v=Vs(this.attributes,"track"),y=Vs(this.attributes,"thumb"),b=(0,se.pi)((0,se.pi)({x:i,y:s,brushable:!1,orientation:l,padding:h,selectionRadius:this.thumbRadius,showHandle:!1,slidable:p,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:c,values:this.getValues()},ym(v,"track")),ym(y,"selection"));this.slider=hs(n).maybeAppendByClassName("scrollbar",function(){return new lk({style:b})}).update(b).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,s=(0,se.CR)(this.range,2),l=s[0],c=s[1];this.slider.setValues(this.getValues((0,d.Z)(n,l,c)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(uh),cJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=cJ(e,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:c})=>{const{bbox:h}=l,{x:p,y:v,width:y,height:b}=h,{scrollbar:T={}}=c,{ratio:M,range:R}=s.getOptions(),I=t==="horizontal"?y:b,N=I/M,[z,H]=R,X=H>z?0:1;return new uJ({className:"g2-scrollbar",style:Object.assign({},T,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:p,y:v,trackLength:I,value:X}),i),{orientation:t,contentLength:N,viewportLength:I}))})}};pE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const fk=e=>pE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));fk.props=Object.assign(Object.assign({},pE.props),{defaultPosition:"bottom"});const hk=e=>pE(Object.assign(Object.assign({},e),{orientation:"vertical"}));hk.props=Object.assign(Object.assign({},pE.props),{defaultPosition:"left"});const bP=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Ru(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y}];return c.animate(M,Object.assign(Object.assign({},l),e))}},fJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Ru(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},dk=(e,t)=>{const{coordinate:r}=t;return iw.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Mo.NUMBER}),(i,s,l)=>{const[c]=i,h=v=>{const{__data__:y,style:b}=v,{radius:T=0,inset:M=0,fillOpacity:R=1,strokeOpacity:I=1,opacity:N=1}=b,{points:z,y:H,y1:X}=y,Y=e1(r,z,[H,X]),{innerRadius:ne,outerRadius:ve}=Y,ye=xT().cornerRadius(T).padAngle(M*Math.PI/180),De=new ad({}),Ye=qe=>(De.attr({d:ye(qe)}),IS(De)),Qe=[{scaleInYRadius:ne+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:ne+1e-4,fillOpacity:R,strokeOpacity:I,opacity:N,offset:.01},{scaleInYRadius:ve,fillOpacity:R,strokeOpacity:I,opacity:N}],yt=v.animate(Qe,Object.assign(Object.assign({},l),e));return yt.onframe=function(){v.style.d=Ye(Object.assign(Object.assign({},Y),{outerRadius:Number(v.style.scaleInYRadius)}))},yt.onfinish=function(){v.style.d=Ye(Object.assign(Object.assign({},Y),{outerRadius:ve}))},yt},p=v=>{const{style:y}=v,{transform:b="",fillOpacity:T=1,strokeOpacity:M=1,opacity:R=1}=y,[I,N]=Ru(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],z=[{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:M,opacity:R,offset:.01},{transform:`${b} scale(1, 1)`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:M,opacity:R}];return v.animate(z,Object.assign(Object.assign({},l),e))};return _o(r)?h(c):p(c)}},hJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=Ru(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},pk=(e,t)=>{iw.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Mo.NUMBER});const{coordinate:r}=t;return(i,s,l)=>{const[c]=i;if(!_o(r))return bP(e,t)(i,s,l);const{__data__:h,style:p}=c,{radius:v=0,inset:y=0,fillOpacity:b=1,strokeOpacity:T=1,opacity:M=1}=p,{points:R,y:I,y1:N}=h,z=xT().cornerRadius(v).padAngle(y*Math.PI/180),H=e1(r,R,[I,N]),{startAngle:X,endAngle:Y}=H,ne=[{waveInArcAngle:X+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:X+1e-4,fillOpacity:b,strokeOpacity:T,opacity:M,offset:.01},{waveInArcAngle:Y,fillOpacity:b,strokeOpacity:T,opacity:M}],ve=c.animate(ne,Object.assign(Object.assign({},l),e));return ve.onframe=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:Number(c.style.waveInArcAngle)}))},ve.onfinish=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:Y}))},ve}};pk.props={};const vk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:c}];return i.animate(h,Object.assign(Object.assign({},r),e))};vk.props={};const mk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:s,strokeOpacity:l,opacity:c},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(h,Object.assign(Object.assign({},r),e))};mk.props={};const dJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p}];return s.animate(y,Object.assign(Object.assign({},i),e))},pJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:v},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(y,Object.assign(Object.assign({},i),e))},gk=e=>(t,n,r)=>{var i,s;const[l]=t,c=((s=(i=l).getTotalLength)===null||s===void 0?void 0:s.call(i))||0,h=[{lineDash:[0,c]},{lineDash:[c,0]}];return l.animate(h,Object.assign(Object.assign({},r),e))};gk.props={};const vJ={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},mJ={[ui.CIRCLE]:["cx","cy","r"],[ui.ELLIPSE]:["cx","cy","rx","ry"],[ui.RECT]:["x","y","width","height"],[ui.IMAGE]:["x","y","width","height"],[ui.LINE]:["x1","y1","x2","y2"],[ui.POLYLINE]:["points"],[ui.POLYGON]:["points"]};function rx(e,t,n=!1){const r={};for(const i of t){const s=e.style[i];s?r[i]=s:n&&(r[i]=vJ[i])}return r}const vE=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function xP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[s,l]=n,c=l-i,h=s-r;return[r,i,h,c]}function gJ(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function yJ(e,t){const[n,r,i,s]=xP(e),l=s/i,c=Math.ceil(Math.sqrt(t/l)),h=Math.ceil(t/c),p=[],v=s/h;let y=0,b=t;for(;b>0;){const T=Math.min(b,c),M=i/T;for(let R=0;R<T;R++){const I=n+R*M,N=r+y*v;p.push(gJ([I,N,M,v]))}b-=T,y+=1}return p}function _J(e="pack"){return typeof e=="function"?e:yJ}function bJ(e,t,n){let{transform:r}=e.style;const{transform:i}=t.style;yk(t,e);let s=vE;if(e.nodeName===ui.GROUP){const[h,p,v,y]=xP(e),[b,T,M,R]=xP(t),I=h-b,N=p-T,z=v/M,H=y/R;r=`translate(${I}, ${N}) scale(${z}, ${H})`}else s=s.concat(mJ[e.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},rx(e,s,!0)),Object.assign({transform:i!=null?i:"none"},rx(t,s,!0))];return t.animate(l,n)}function yk(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function xJ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new ad({style:Object.assign(Object.assign({},rx(e,vE)),{d:t})});return yk(r,e),r}function _k(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function EJ(e){return!_k(e,"m")||!_k(e,"M")}function bk(e){const t=IS(e);if(t&&!EJ(t))return t}function EP(e,t,n,r){const{nodeName:i}=t,{nodeName:s}=n,l=bk(t),c=bk(n);if(i===s&&i!=="path"||(l===void 0||c===void 0))return bJ(t,n,r);const v=xJ(e,l),y=[Object.assign({},rx(t,vE)),Object.assign({},rx(n,vE))];if(l!==c){y[0].d=l,y[1].d=c;const b=v.animate(y,r);return b.onfinish=()=>{const T=v.style.d;Mv(v,n),v.style.d=T,v.style.transform="none"},v.style.transform="none",b}return null}function SJ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((s,l)=>{const c=new ad({style:Object.assign({d:i[l]},rx(e,vE))});return EP(s,c,s,n)})}function wJ(e,t,n,r){const i=r(t,e.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=t.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:c}],p=t.animate(h,n);return[...e.map((y,b)=>{const T=new ad({style:{d:i[b],fill:t.style.fill}});return EP(y,y,T,n)}),p]}const xk=e=>(t,n,r)=>{const i=_J(e.split),s=Object.assign(Object.assign({},r),e),{length:l}=t,{length:c}=n;if(l===1&&c===1||l>1&&c>1){const[h]=t,[p]=n;return EP(h,h,p,s)}if(l===1&&c>1){const[h]=t;return SJ(h,n,s,i)}if(l>1&&c===1){const[h]=n;return wJ(t,h,s,i)}return null};xk.props={};const Ek=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new ad({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,bP(e,t)([y],r,i)};Ek.props={};const Sk=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new ad({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,dk(e,t)([y],r,i)};Sk.props={};var TJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function AJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,background:s=!1,delay:l=60,scale:c,coordinate:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Mu(b,r),R=X2(b,n),[I,N]=cL(Object.assign({elements:b,valueof:R,link:i,coordinate:h},bo(v.active,"link"))),[z,H,X]=hL(Object.assign({document:e.ownerDocument,scale:c,coordinate:h,background:s,valueof:R},bo(v.active,"background"))),Y=Jr(v,{active:Object.assign({},((y=v.active)===null||y===void 0?void 0:y.offset)&&{transform:(...Xt)=>{const Mt=v.active.offset(...Xt),[,kt]=Xt;return fL(b[kt],Mt,h)}})}),{setState:ne,removeState:ve,hasState:ye}=Dg(Y,R);let De;const Ye=Xt=>{const{target:Mt,nativeEvent:kt=!0}=Xt;if(!T.has(Mt))return;De&&clearTimeout(De);const Tn=r(Mt),zn=M.get(Tn),lr=new Set(zn);for(const ir of b)lr.has(ir)?ye(ir,"active")||ne(ir,"active"):(ne(ir,"inactive"),N(ir)),ir!==Mt&&H(ir);z(Mt),I(zn),kt&&p.emit("element:highlight",{nativeEvent:kt,data:{data:n(Mt),group:zn.map(n)}})},Qe=()=>{De&&clearTimeout(De),De=setTimeout(()=>{yt(),De=null},l)},yt=(Xt=!0)=>{for(const Mt of b)ve(Mt,"active","inactive"),H(Mt),N(Mt);Xt&&p.emit("element:unhighlight",{nativeEvent:Xt})},qe=Xt=>{const{target:Mt}=Xt;s&&!X(Mt)||!s&&!T.has(Mt)||(l>0?Qe():yt())},ut=()=>{yt()};e.addEventListener("pointerover",Ye),e.addEventListener("pointerout",qe),e.addEventListener("pointerleave",ut);const ft=Xt=>{const{nativeEvent:Mt}=Xt;Mt||yt(!1)},mt=Xt=>{const{nativeEvent:Mt}=Xt;if(Mt)return;const{data:kt}=Xt.data,Tn=tR(b,kt,n);Tn&&Ye({target:Tn,nativeEvent:!1})};return p.on("element:highlight",mt),p.on("element:unhighlight",ft),()=>{e.removeEventListener("pointerover",Ye),e.removeEventListener("pointerout",qe),e.removeEventListener("pointerleave",ut),p.off("element:highlight",mt),p.off("element:unhighlight",ft);for(const Xt of b)H(Xt),N(Xt)}}function cA(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,s=TJ(e,["delay","createGroup","background","link"]);return(l,c,h)=>{const{container:p,view:v,options:y}=l,{scale:b,coordinate:T}=v,M=Sm(p);return AJ(M,Object.assign({elements:zy,datum:r1(v),groupKey:n?n(v):void 0,coordinate:T,scale:b,state:Vb(y,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:h},s))}}cA.props={reapplyWhenUpdate:!0};function wk(e){return cA(Object.assign(Object.assign({},e),{createGroup:eR}))}wk.props={reapplyWhenUpdate:!0};function Tk(e){return cA(Object.assign(Object.assign({},e),{createGroup:uL}))}Tk.props={reapplyWhenUpdate:!0};var CJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function OJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,single:s=!1,coordinate:l,background:c=!1,scale:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Mu(b,r),R=X2(b,n),[I,N]=cL(Object.assign({link:i,elements:b,valueof:R,coordinate:l},bo(v.selected,"link"))),[z,H]=hL(Object.assign({document:e.ownerDocument,background:c,coordinate:l,scale:h,valueof:R},bo(v.selected,"background"))),X=Jr(v,{selected:Object.assign({},((y=v.selected)===null||y===void 0?void 0:y.offset)&&{transform:(...ut)=>{const ft=v.selected.offset(...ut),[,mt]=ut;return fL(b[mt],ft,l)}})}),{setState:Y,removeState:ne,hasState:ve}=Dg(X,R),ye=(ut=!0)=>{for(const ft of b)ne(ft,"selected","unselected"),N(ft),H(ft);ut&&p.emit("element:unselect",{nativeEvent:!0})},De=(ut,ft,mt=!0)=>{if(ve(ft,"selected"))ye();else{const Xt=r(ft),Mt=M.get(Xt),kt=new Set(Mt);for(const Tn of b)kt.has(Tn)?Y(Tn,"selected"):(Y(Tn,"unselected"),N(Tn)),Tn!==ft&&H(Tn);if(I(Mt),z(ft),!mt)return;p.emit("element:select",Object.assign(Object.assign({},ut),{nativeEvent:mt,data:{data:[n(ft),...Mt.map(n)]}}))}},Ye=(ut,ft,mt=!0)=>{const Xt=r(ft),Mt=M.get(Xt),kt=new Set(Mt);if(ve(ft,"selected")){if(!b.some(zn=>!kt.has(zn)&&ve(zn,"selected")))return ye();for(const zn of Mt)Y(zn,"unselected"),N(zn),H(zn)}else{const Tn=Mt.some(zn=>ve(zn,"selected"));for(const zn of b)kt.has(zn)?Y(zn,"selected"):ve(zn,"selected")||Y(zn,"unselected");!Tn&&i&&I(Mt),z(ft)}mt&&p.emit("element:select",Object.assign(Object.assign({},ut),{nativeEvent:mt,data:{data:b.filter(Tn=>ve(Tn,"selected")).map(n)}}))},Qe=ut=>{const{target:ft,nativeEvent:mt=!0}=ut;return T.has(ft)?s?De(ut,ft,mt):Ye(ut,ft,mt):ye()};e.addEventListener("click",Qe);const yt=ut=>{const{nativeEvent:ft,data:mt}=ut;if(ft)return;const Xt=s?mt.data.slice(0,1):mt.data;for(const Mt of Xt){const kt=tR(b,Mt,n);Qe({target:kt,nativeEvent:!1})}},qe=()=>{ye(!1)};return p.on("element:select",yt),p.on("element:unselect",qe),()=>{for(const ut of b)N(ut);e.removeEventListener("click",Qe),p.off("element:select",yt),p.off("element:unselect",qe)}}function fA(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=CJ(e,["createGroup","background","link"]);return(s,l,c)=>{const{container:h,view:p,options:v}=s,{coordinate:y,scale:b}=p,T=Sm(h);return OJ(T,Object.assign({elements:zy,datum:r1(p),groupKey:t?t(p):void 0,coordinate:y,scale:b,state:Vb(v,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:c},i))}}fA.props={reapplyWhenUpdate:!0};function Ak(e){return fA(Object.assign(Object.assign({},e),{createGroup:eR}))}Ak.props={reapplyWhenUpdate:!0};function Ck(e){return fA(Object.assign(Object.assign({},e),{createGroup:uL}))}Ck.props={reapplyWhenUpdate:!0};var v1=function(e,t,n){var r,i,s,l,c=0;n||(n={});var h=function(){c=n.leading===!1?0:Date.now(),r=null,l=e.apply(i,s),r||(i=s=null)},p=function(){var v=Date.now();!c&&n.leading===!1&&(c=v);var y=t-(v-c);return i=this,s=arguments,y<=0||y>t?(r&&(clearTimeout(r),r=null),c=v,l=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(h,y)),l};return p.cancel=function(){clearTimeout(r),c=0,r=i=s=null},p};function MJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(s=>s.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function RJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:s,setState:l,container:c}=r,h=Sm(c),p=v1(v=>{const y=QM(h,v);if(!y){l("fisheye"),s();return}l("fisheye",b=>{const T=Jr({},b,{interaction:{tooltip:{preserve:!0}}});for(const N of T.marks)N.animate=!1;const[M,R]=y,I=MJ(T);return I.focusX=M,I.focusY=R,I.visual=!0,T}),s()},e,{leading:t,trailing:n});return h.addEventListener("pointerenter",p),h.addEventListener("pointermove",p),h.addEventListener("pointerleave",p),()=>{h.removeEventListener("pointerenter",p),h.removeEventListener("pointermove",p),h.removeEventListener("pointerleave",p)}}}var PJ=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},IJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function LJ(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:s}=i,l=c=>{const h=s[c];return[c,h?h.value:void 0]};return Object.fromEntries(n.map(l))});return r}function Ok(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=l=>`${l}`}=e,s=IJ(e,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:c,container:h,update:p,setState:v}=l,{markState:y,scale:b,coordinate:T}=c,M=LJ(y,"line",["x","y","series"]);if(!M)return;const{y:R,x:I,series:N=[]}=M,z=R.map((Xt,Mt)=>Mt),H=Ig(z.map(Xt=>I[Xt])),X=Sm(h),Y=h.getElementsByClassName(va),ne=h.getElementsByClassName(Wl),ye=Mu(ne,Xt=>Xt.__data__.key.split("-")[0]),De=new J1({style:Object.assign({x1:0,y1:0,x2:0,y2:X.getAttribute("height"),stroke:"black",lineWidth:1},bo(s,"rule"))}),Ye=new sd({style:Object.assign({x:0,y:X.getAttribute("height"),text:"",fontSize:10},bo(s,"label"))});De.append(Ye),X.appendChild(De);const Qe=(Xt,Mt,kt)=>{const[Tn]=Xt.invert(kt),zn=Mt.invert(Tn);return H[yW(H,zn)]},yt=(Xt,Mt)=>{De.setAttribute("x1",Xt[0]),De.setAttribute("x2",Xt[0]),Ye.setAttribute("text",i(Mt))};let qe;const ut=Xt=>PJ(this,void 0,void 0,function*(){const{x:Mt}=b,kt=Qe(T,Mt,Xt);yt(Xt,kt),v("chartIndex",zn=>{const lr=Jr({},zn),ir=lr.marks.find(Xr=>Xr.type==="line"),Ti=vs(b2(z,Xr=>vs(Xr,mo=>+R[mo])/a0(Xr,mo=>+R[mo]),Xr=>N[Xr]).values()),ro=[1/Ti,Ti];Jr(ir,{scale:{y:{domain:ro}}});const si=DJ(ir);si.groupBy="color",si.basis=(Xr,mo)=>{const ho=Xr[zb(Ho=>I[+Ho]).center(Xr,kt)];return mo[ho]};for(const Xr of lr.marks)Xr.animate=!1;return lr}),qe=(yield p("chartIndex")).view}),ft=Xt=>{const{scale:Mt,coordinate:kt}=qe,{x:Tn,y:zn}=Mt,lr=Qe(kt,Tn,Xt);yt(Xt,lr);for(const ir of Y){const{seriesIndex:Hr,key:Ti}=ir.__data__,ro=Hr[zb(Ia=>I[+Ia]).center(Hr,lr)],si=[0,zn.map(1)],Xr=[0,zn.map(R[ro]/R[Hr[0]])],[,mo]=kt.map(si),[,ho]=kt.map(Xr),Ho=mo-ho;ir.setAttribute("transform",`translate(0, ${Ho})`);const ma=ye.get(Ti)||[];for(const Ia of ma)Ia.setAttribute("dy",Ho)}},mt=v1(Xt=>{const Mt=QM(X,Xt);Mt&&ft(Mt)},t,{leading:n,trailing:r});return ut([0,0]),X.addEventListener("pointerenter",mt),X.addEventListener("pointermove",mt),X.addEventListener("pointerleave",mt),()=>{De.remove(),X.removeEventListener("pointerenter",mt),X.removeEventListener("pointermove",mt),X.removeEventListener("pointerleave",mt)}}}Ok.props={reapplyWhenUpdate:!0};function mE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function hA(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function Mk(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function NJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var FJ=NJ;function SP(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var Rk={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function BJ(e){var t;e===void 0&&(e="");var n=SP(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,se.pi)({flex:1},Rk),t[".".concat(n.VALUE)]=(0,se.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Rk),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var kJ=function(e){(0,se.ZT)(t,e);function t(n){var r=this,i,s,l=(s=(i=n.style)===null||i===void 0?void 0:i.template)===null||s===void 0?void 0:s.prefixCls,c=SP(l);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(c.CONTAINER,'"></div>'),title:'<div class="'.concat(c.TITLE,'"></div>'),item:'<li class="'.concat(c.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(c.NAME,`">
          <span class="`).concat(c.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(c.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(c.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:BJ(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(s,l){var c=s.name,h=c===void 0?"":c,p=s.color,v=p===void 0?"black":p,y=s.index,b=(0,se._T)(s,["name","color","index"]),T=(0,se.pi)({name:h,color:v,index:y!=null?y:l},b);return Mk(FJ(i.item,T))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=Mk(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,s=i.template,l=i.title,c=i.enterable,h=i.style,p=i.content,v=SP(s.prefixCls),y=this.element;if(this.element.style.pointerEvents=c?"auto":"none",p)this.renderCustomContent();else{l?(y.innerHTML=s.title,y.getElementsByClassName(v.TITLE)[0].innerHTML=l):(r=(n=y.getElementsByClassName(v.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var b=this.HTMLTooltipItemsElements,T=document.createElement("ul");T.className=v.LIST,T.replaceChildren.apply(T,(0,se.ev)([],(0,se.CR)(b),!1));var M=this.element.querySelector(".".concat(v.LIST));M?M.replaceWith(T):y.appendChild(T)}kj(y,h)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,s=r.offset,l=n||i,c=l.split("-"),h={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},p=this.elementSize,v=p.width,y=p.height,b=[-v/2,-y/2];return c.forEach(function(T){var M=(0,se.CR)(b,2),R=M[0],I=M[1],N=(0,se.CR)(h[T],2),z=N[0],H=N[1];b=[R+(v/2+s[0])*z,I+(y/2+s[1])*H]}),b},t.prototype.setOffsetPosition=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=c===void 0?0:c,p=l.y,v=p===void 0?0:p,y=l.container,b=y.x,T=y.y;this.element.style.left="".concat(+h+b+i,"px"),this.element.style.top="".concat(+v+T+s,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,se.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=l.y,p=l.bounding,v=l.position;if(!p)return[i,s];var y=this.element,b=y.offsetWidth,T=y.offsetHeight,M=(0,se.CR)([+c+i,+h+s],2),R=M[0],I=M[1],N={left:"right",right:"left",top:"bottom",bottom:"top"},z=p.x,H=p.y,X=p.width,Y=p.height,ne={left:R<z,right:R+b>z+X,top:I<H,bottom:I+T>H+Y},ve=[];v.split("-").forEach(function(De){ne[De]?ve.push(N[De]):ve.push(De)});var ye=ve.join("-");return this.getRelativeOffsetFromCursor(ye)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),s=i.x,l=i.y,c=i.width,h=i.height;return new Zu(s,l,c,h).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(uh),gE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dA(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function zJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return{x:n,y:r,width:i-n,height:s-r}}function UJ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function jJ(e,t,n,r,i,s,l,c={}){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new kJ({className:"tooltip",style:{x:t,y:n,container:l,data:[],bounding:s,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:Jr(h,c)}});return e.appendChild(p.HTMLTooltipElement),p}function Pk({root:e,data:t,x:n,y:r,render:i,event:s,single:l,position:c="right-bottom",enterable:h=!1,css:p,mount:v,bounding:y}){const b=dA(e,v),T=dA(e),M=l?T:e,R=y||zJ(e),I=UJ(T,b),{tooltipElement:N=jJ(b,n,r,c,h,R,I,p)}=M,{items:z,title:H=""}=t;N.update(Object.assign({x:n,y:r,data:z,title:H,position:c,enterable:h},i!==void 0&&{content:i(s,{items:z,title:H})})),M.tooltipElement=N}function Yy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=dA(e),l=t?s:e,{tooltipElement:c}=l;c&&c.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY)}function wP({root:e,single:t}){const n=dA(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function Ik(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function VJ(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(su).map(s=>{var{color:l=Dk(e)}=s,c=gE(s,["color"]);return Object.assign(Object.assign({},c),{color:l})}).map(Ik);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function HJ(e,t){const{color:n,series:r,facet:i=!1}=e,{color:s,series:l}=t,c=h=>h&&h.invert&&!(h instanceof Wy)&&!(h instanceof F2);if(c(r))return r.clone().invert(l);if(l&&r instanceof Wy&&r.invert(l)!==s&&!i)return r.invert(l);if(c(n)){const h=n.invert(s);return Array.isArray(h)?null:h}return null}function Dk(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function Lk(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function Nk(e,t,n,r=e.map(s=>s.__data__),i={}){const s=h=>h instanceof Date?+h:h,l=Lk(r.map(h=>h.title),s).filter(su),c=r.flatMap((h,p)=>{const v=e[p],{items:y=[],title:b}=h,T=y.filter(su),M=n!==void 0?n:y.length<=1;return T.map(R=>{var{color:I=Dk(v)||i.color,name:N}=R,z=gE(R,["color","name"]);const H=HJ(t,h),X=M?H||N:N||H;return Object.assign(Object.assign({},z),{color:I,name:X||b})})}).map(Ik);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:Lk(c,h=>`(${s(h.name)}, ${s(h.value)}, ${s(h.color)})`)})}function GJ(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:s,mainHeight:l,startX:c,startY:h,transposed:p,polar:v,insetLeft:y,insetTop:b}=n,T=gE(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const M=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},T),R=t.map(De=>De[1]),I=t.map(De=>De[0]),N=mE(R),z=mE(I),H=()=>{if(v){const De=Math.min(s,l)/2,Ye=c+y+s/2,Qe=h+b+l/2,yt=$0(Ic([z,N],[Ye,Qe])),qe=Ye+De*Math.cos(yt),ut=Qe+De*Math.sin(yt);return[Ye,qe,Qe,ut]}return p?[c,c+r,N+h,N+h]:[z+c,z+c,h,h+i]},[X,Y,ne,ve]=H(),ye=()=>{const De=new J1({style:Object.assign({x1:X,x2:Y,y1:ne,y2:ve},M)});return e.appendChild(De),De};if(I.length>0){const De=e.ruleY||ye();De.style.x1=X,De.style.x2=Y,De.style.y1=ne,De.style.y2=ve,e.ruleY=De}}function Fk(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function WJ(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(s=>s.remove());const i=t.filter(s=>{const[{x:l,y:c}]=s;return su(l)&&su(c)}).map(s=>{const[{color:l,element:c},h]=s,p=l||c.style.fill||c.style.stroke||r.color;return new _g({style:Object.assign({cx:h[0],cy:h[1],fill:p,r:4,stroke:"#fff",lineWidth:2},n)})});for(const s of i)e.appendChild(s);e.markers=i}function Bk(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function kk(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function TP(e,t){return e===void 0?t:e}function zk(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function ZJ(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function XJ(e){return AT(e,t=>t.classList?t.classList.includes("element"):!1)}function Uk(e,t){var{elements:n,sort:r,filter:i,scale:s,coordinate:l,crosshairs:c,render:h,groupName:p,emitter:v,wait:y=50,leading:b=!0,trailing:T=!1,startX:M=0,startY:R=0,body:I=!0,single:N=!0,position:z,enterable:H,mount:X,bounding:Y,theme:ne,disableNative:ve=!1,marker:ye=!0,preserve:De=!1,style:Ye={},css:Qe={}}=t,yt=gE(t,["elements","sort","filter","scale","coordinate","crosshairs","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const qe=n(e),ut=Ru(l),ft=_o(l),mt=Jr(Ye,yt),{innerWidth:Xt,innerHeight:Mt,width:kt,height:Tn,insetLeft:zn,insetTop:lr}=l.getOptions(),ir=[],Hr=[];for(const Ya of qe){const{__data__:Ps}=Ya,{seriesX:us,title:ka,items:Sl}=Ps;us?ir.push(Ya):(ka||Sl)&&Hr.push(Ya)}const ro=!!(ut?s.y:s.x).getBandWidth&&Hr.length>0;ir.sort((Ya,Ps)=>{const us=ut?0:1,ka=Sl=>Sl.getBounds().min[us];return ut?ka(Ps)-ka(Ya):ka(Ya)-ka(Ps)});const si=Ya=>{const Ps=ut?1:0,{min:us,max:ka}=Ya.getLocalBounds();return Ig([us[Ps],ka[Ps]])};Hr.sort((Ya,Ps)=>{const[us,ka]=si(Ya),[Sl,ul]=si(Ps),qs=(us+ka)/2,Iu=(Sl+ul)/2;return ut?Iu-qs:qs-Iu});const Xr=new Map(ir.map(Ya=>{const{__data__:Ps}=Ya,{seriesX:us}=Ps,ka=us.map((ul,qs)=>qs),Sl=Ig(ka,ul=>us[+ul]);return[Ya,[Sl,us]]})),{x:mo}=s,ho=mo!=null&&mo.getBandWidth?mo.getBandWidth()/2:0,Ho=Ya=>{const[Ps]=l.invert(Ya);return Ps-ho},ma=(Ya,Ps,us)=>{const ka=Ho(Ya),Sl=us.filter(su),[ul,qs]=Ig([Sl[0],Sl[Sl.length-1]]),Iu=ul===qs;if(!ro&&(ka<ul||ka>qs)&&!Iu)return null;const lc=zb(Ug=>us[+Ug]).center,yd=lc(Ps,ka);return Ps[yd]},Ia=(Ya,Ps)=>{const ka=Ya[ut?1:0],Sl=Ps.filter(Iu=>{const[lc,yd]=si(Iu);return ka>=lc&&ka<=yd});if(!ro||Sl.length>0)return Sl;const ul=zb(Iu=>{const[lc,yd]=si(Iu);return(lc+yd)/2}).center,qs=ul(Ps,ka);return[Ps[qs]].filter(su)},Da=(Ya,Ps)=>{const{__data__:us}=Ya;return Object.fromEntries(Object.entries(us).filter(([ka])=>ka.startsWith("series")&&ka!=="series").map(([ka,Sl])=>{const ul=Sl[Ps];return[jw(ka.replace("series","")),ul]}))},ms=v1(Ya=>{const Ps=QM(e,Ya);if(!Ps)return;const us=lL(e),ka=us.min[0],Sl=us.min[1],ul=[Ps[0]-M,Ps[1]-R];if(!ul)return;const qs=Ia(ul,Hr),Iu=[],lc=[];for(const If of ir){const[KE,wI]=Xr.get(If),gj=ma(ul,KE,wI);if(gj!==null){Iu.push(If);const yj=Da(If,gj),{x:gde,y:yde}=yj,_de=l.map([(gde||0)+ho,yde||0]);lc.push([Object.assign(Object.assign({},yj),{element:If}),_de])}}const yd=Array.from(new Set(lc.map(If=>If[0].x))),Ug=yd[hA(yd,If=>Math.abs(If-Ho(ul)))],E1=lc.filter(If=>If[0].x===Ug),vC=[...E1.map(If=>If[0]),...qs.map(If=>If.__data__)],mC=[...Iu,...qs],S1=Nk(mC,s,p,vC,ne);if(r&&S1.items.sort((If,KE)=>r(If)-r(KE)),i&&(S1.items=S1.items.filter(i)),mC.length===0||zk(S1)){Nl(Ya);return}if(I&&Pk({root:e,data:S1,x:Ps[0]+ka,y:Ps[1]+Sl,render:h,event:Ya,single:N,position:z,enterable:H,mount:X,bounding:Y,css:Qe}),c){const If=E1.map(wI=>wI[1]),KE=bo(mt,"crosshairs");GJ(e,If,Object.assign(Object.assign({},KE),{plotWidth:Xt,plotHeight:Mt,mainWidth:kt,mainHeight:Tn,insetLeft:zn,insetTop:lr,startX:M,startY:R,transposed:ut,polar:ft}))}if(ye){const If=bo(mt,"marker");WJ(e,{data:E1,style:If,theme:ne})}v.emit("tooltip:show",Object.assign(Object.assign({},Ya),{nativeEvent:!0,data:{data:{x:Ub(s.x,Ho(ul),!0)}}}))},y,{leading:b,trailing:T}),Nl=Ya=>{Yy({root:e,single:N,emitter:v,event:Ya}),c&&Fk(e),ye&&Bk(e)},os=()=>{wP({root:e,single:N}),c&&Fk(e),ye&&Bk(e)},Rs=({nativeEvent:Ya,data:Ps})=>{if(Ya)return;const{x:us}=Ps.data,{x:ka}=s,Sl=ka.map(us),[ul,qs]=l.map([Sl,.5]),{min:[Iu,lc]}=e.getRenderBounds();ms({offsetX:ul+Iu,offsetY:qs+lc})},ju=()=>{Yy({root:e,single:N,emitter:v,nativeEvent:!1})},Kc=()=>{fh(),os()},zp=()=>{Qc()},Qc=()=>{ve||(e.addEventListener("pointerenter",ms),e.addEventListener("pointermove",ms),e.addEventListener("pointerleave",Nl))},fh=()=>{ve||(e.removeEventListener("pointerenter",ms),e.removeEventListener("pointermove",ms),e.removeEventListener("pointerleave",Nl))};return Qc(),v.on("tooltip:show",Rs),v.on("tooltip:hide",ju),v.on("tooltip:disable",Kc),v.on("tooltip:enable",zp),()=>{fh(),v.off("tooltip:show",Rs),v.off("tooltip:hide",ju),v.off("tooltip:disable",Kc),v.off("tooltip:enable",zp),De?Yy({root:e,single:N,emitter:v,nativeEvent:!1}):os()}}function YJ(e,{elements:t,scale:n,render:r,groupName:i,sort:s,filter:l,emitter:c,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:y=De=>De,single:b=!0,position:T,enterable:M,datum:R,view:I,mount:N,bounding:z,theme:H,shared:X=!1,body:Y=!0,disableNative:ne=!1,preserve:ve=!1,css:ye={}}){const De=t(e),Ye=Mu(De,y),Qe=v1(kt=>{const{target:Tn}=kt,zn=XJ(Tn);if(!zn){Yy({root:e,single:b,emitter:c,event:kt});return}const lr=y(zn),ir=Ye.get(lr);if(!ir)return;const Hr=ir.length===1&&!X?VJ(ir[0]):Nk(ir,n,i,void 0,H);if(s&&Hr.items.sort((si,Xr)=>s(si)-s(Xr)),l&&(Hr.items=Hr.items.filter(l)),zk(Hr)){Yy({root:e,single:b,emitter:c,event:kt});return}const{offsetX:Ti,offsetY:ro}=kt;Y&&Pk({root:e,data:Hr,x:Ti,y:ro,render:r,event:kt,single:b,position:T,enterable:M,mount:N,bounding:z,css:ye}),c.emit("tooltip:show",Object.assign(Object.assign({},kt),{nativeEvent:!0,data:{data:pL(zn,I)}}))},h,{leading:p,trailing:v}),yt=kt=>{Yy({root:e,single:b,emitter:c,event:kt})},qe=()=>{ne||(e.addEventListener("pointermove",Qe),e.addEventListener("pointerleave",yt))},ut=()=>{ne||(e.removeEventListener("pointermove",Qe),e.removeEventListener("pointerleave",yt))},ft=({nativeEvent:kt,data:Tn})=>{if(kt)return;const zn=tR(De,Tn.data,R);if(!zn)return;const lr=zn.getBBox(),{x:ir,y:Hr,width:Ti,height:ro}=lr;Qe({target:zn,offsetX:ir+Ti/2,offsetY:Hr+ro/2})},mt=({nativeEvent:kt}={})=>{kt||Yy({root:e,single:b,emitter:c,nativeEvent:!1})},Xt=()=>{ut(),wP({root:e,single:b})},Mt=()=>{qe()};return c.on("tooltip:show",ft),c.on("tooltip:hide",mt),c.on("tooltip:enable",Mt),c.on("tooltip:disable",Xt),qe(),()=>{ut(),c.off("tooltip:show",ft),c.off("tooltip:hide",mt),ve?Yy({root:e,single:b,emitter:c,nativeEvent:!1}):wP({root:e,single:b})}}function jk(e){const{shared:t,crosshairs:n,series:r,name:i,item:s=()=>({}),facet:l=!1}=e,c=gE(e,["shared","crosshairs","series","name","item","facet"]);return(h,p,v)=>{const{container:y,view:b}=h,{scale:T,markState:M,coordinate:R,theme:I}=b,N=kk(M,"seriesTooltip"),z=kk(M,"crosshairs"),H=Sm(y),X=TP(r,N);if(X&&ZJ(M)&&!l)return Uk(H,Object.assign(Object.assign({},c),{theme:I,elements:zy,scale:T,coordinate:R,crosshairs:TP(n,z),item:s,emitter:v}));if(X&&l){const Y=p.filter(Qe=>Qe!==h&&Qe.options.parentKey===h.options.key),ne=sL(h,p),ve=Y[0].view.scale,ye=H.getBounds(),De=ye.min[0],Ye=ye.min[1];return Object.assign(ve,{facet:!0}),Uk(H.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:I,elements:()=>ne,scale:ve,coordinate:R,crosshairs:TP(n,z),item:s,startX:De,startY:Ye,emitter:v}))}return YJ(H,Object.assign(Object.assign({},c),{datum:r1(b),elements:zy,scale:T,coordinate:R,groupKey:t?eR(b):void 0,item:s,emitter:v,view:b,theme:I,shared:t}))}}jk.props={reapplyWhenUpdate:!0};var pA=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Vk="legend-category",$J="legend-continuous",qJ="items-item",KJ="legend-category-item-marker",QJ="legend-category-item-label";function Hk(e){return e.getElementsByClassName(KJ)[0]}function Gk(e){return e.getElementsByClassName(QJ)[0]}function Wk(e){return e.getElementsByClassName(qJ)}function AP(e){return e.getElementsByClassName(Vk)}function Zk(e){return e.getElementsByClassName($J)}function JJ(e,t){[...AP(e),...Zk(e)].forEach(r=>{t(r,i=>i)})}function CP(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function fpe(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function eee(e,{legends:t,marker:n,label:r,datum:i,filter:s,emitter:l,channel:c,state:h={}}){const p=new Map,v=new Map,y=new Map,{unselected:b={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,T={unselected:bo(b,"marker")},M={unselected:bo(b,"label")},{setState:R,removeState:I}=Dg(T,void 0),{setState:N,removeState:z}=Dg(M,void 0),H=Array.from(t(e));let X=H.map(i);const Y=()=>{for(const ye of H){const De=i(ye),Ye=n(ye),Qe=r(ye);X.includes(De)?(I(Ye,"unselected"),z(Qe,"unselected")):(R(Ye,"unselected"),N(Qe,"unselected"))}};for(const ye of H){const De=()=>{Uy(e,"pointer")},Ye=()=>{NW(e)},Qe=yt=>pA(this,void 0,void 0,function*(){const qe=i(ye),ut=X.indexOf(qe);ut===-1?X.push(qe):X.splice(ut,1),X.length===0&&X.push(...H.map(i)),yield s(X),Y();const{nativeEvent:ft=!0}=yt;ft&&(X.length===H.length?l.emit("legend:reset",{nativeEvent:ft}):l.emit("legend:filter",Object.assign(Object.assign({},yt),{nativeEvent:ft,data:{channel:c,values:X}})))});ye.addEventListener("click",Qe),ye.addEventListener("pointerenter",De),ye.addEventListener("pointerout",Ye),p.set(ye,Qe),v.set(ye,De),y.set(ye,Ye)}const ne=ye=>pA(this,void 0,void 0,function*(){const{nativeEvent:De}=ye;if(De)return;const{data:Ye}=ye,{channel:Qe,values:yt}=Ye;Qe===c&&(X=yt,yield s(X),Y())}),ve=ye=>pA(this,void 0,void 0,function*(){const{nativeEvent:De}=ye;De||(X=H.map(i),yield s(X),Y())});return l.on("legend:filter",ne),l.on("legend:reset",ve),()=>{for(const ye of H)ye.removeEventListener("click",p.get(ye)),ye.removeEventListener("pointerenter",v.get(ye)),ye.removeEventListener("pointerout",y.get(ye)),l.off("legend:filter",ne),l.off("legend:reset",ve)}}function tee(e,{legend:t,filter:n,emitter:r,channel:i}){const s=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:i,values:l}})};return t.addEventListener("valuechange",s),()=>{t.removeEventListener("valuechange",s)}}function Xk(e,{legend:t,channel:n,value:r,ordinal:i,channels:s,allChannels:l,facet:c=!1}){return pA(this,void 0,void 0,function*(){const{view:h,update:p,setState:v}=e;v(t,y=>{const{marks:b}=y,T=b.map(M=>{if(M.type==="legends")return M;const{transform:R=[]}=M,I=R.findIndex(({type:H})=>H.startsWith("group")||H.startsWith("bin")),N=[...R];N.splice(I+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const z=Object.fromEntries(s.map(H=>[H,{domain:h.scale[H].getOptions().domain}]));return Jr({},M,Object.assign(Object.assign({transform:N,scale:z},!i&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(H=>[H,{preserve:!0}]))}))});return Object.assign(Object.assign({},y),{marks:T})}),yield p()})}function nee(e,t){for(const n of e)Xk(n,Object.assign(Object.assign({},t),{facet:!0}))}function ree(){return(e,t,n)=>{const{container:r}=e,i=t.filter(y=>y!==e),s=i.length>0,l=y=>CP(y).scales.map(b=>b.name),c=[...AP(r),...Zk(r)],h=c.flatMap(l),p=s?v1(nee,50,{trailing:!0}):v1(Xk,50,{trailing:!0}),v=c.map(y=>{const{name:b,domain:T}=CP(y).scales[0],M=l(y),R={legend:y,channel:b,channels:M,allChannels:h};return y.className===Vk?eee(r,{legends:Wk,marker:Hk,label:Gk,datum:I=>{const{__data__:N}=I,{index:z}=N;return T[z]},filter:I=>{const N=Object.assign(Object.assign({},R),{value:I,ordinal:!0});p(s?i:e,N)},state:y.attributes.state,channel:b,emitter:n}):tee(r,{legend:y,filter:I=>{const N=Object.assign(Object.assign({},R),{value:I,ordinal:!1});p(s?i:e,N)},emitter:n,channel:b})});return()=>{v.forEach(y=>y())}}}function iee(){return(e,t,n)=>{const{container:r,view:i,options:s}=e,l=AP(r),c=zy(r),h=T=>CP(T).scales[0].name,p=T=>{const{scale:{[T]:M}}=i;return M},v=Vb(s,["active","inactive"]),y=X2(c,r1(i)),b=[];for(const T of l){const M=Tn=>{const{data:zn}=T.attributes,{__data__:lr}=Tn,{index:ir}=lr;return zn[ir].label},R=h(T),I=Wk(T),N=p(R),z=Mu(c,Tn=>N.invert(Tn.__data__[R])),{state:H={}}=T.attributes,{inactive:X={}}=H,{setState:Y,removeState:ne}=Dg(v,y),ve={inactive:bo(X,"marker")},ye={inactive:bo(X,"label")},{setState:De,removeState:Ye}=Dg(ve),{setState:Qe,removeState:yt}=Dg(ye),qe=Tn=>{for(const zn of I){const lr=Hk(zn),ir=Gk(zn);zn===Tn||Tn===null?(Ye(lr,"inactive"),yt(ir,"inactive")):(De(lr,"inactive"),Qe(ir,"inactive"))}},ut=(Tn,zn)=>{const lr=M(zn),ir=new Set(z.get(lr));for(const Ti of c)ir.has(Ti)?Y(Ti,"active"):Y(Ti,"inactive");qe(zn);const{nativeEvent:Hr=!0}=Tn;Hr&&n.emit("legend:highlight",Object.assign(Object.assign({},Tn),{nativeEvent:Hr,data:{channel:R,value:lr}}))},ft=new Map;for(const Tn of I){const zn=lr=>{ut(lr,Tn)};Tn.addEventListener("pointerover",zn),ft.set(Tn,zn)}const mt=Tn=>{for(const lr of c)ne(lr,"inactive","active");qe(null);const{nativeEvent:zn=!0}=Tn;zn&&n.emit("legend:unhighlight",{nativeEvent:zn})},Xt=Tn=>{const{nativeEvent:zn,data:lr}=Tn;if(zn)return;const{channel:ir,value:Hr}=lr;if(ir!==R)return;const Ti=I.find(ro=>M(ro)===Hr);Ti&&ut({nativeEvent:!1},Ti)},Mt=Tn=>{const{nativeEvent:zn}=Tn;zn||mt({nativeEvent:!1})};T.addEventListener("pointerleave",mt),n.on("legend:highlight",Xt),n.on("legend:unhighlight",Mt);const kt=()=>{T.removeEventListener(mt),n.off("legend:highlight",Xt),n.off("legend:unhighlight",Mt);for(const[Tn,zn]of ft)Tn.removeEventListener(zn)};b.push(kt)}return()=>b.forEach(T=>T())}}var J0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oee(e,t){const[n,r,i,s]=e,[l,c,h,p]=t;return!(l>i||h<n||c>s||p<r)}function aee(e,t,n,r,i){const[s,l,c,h]=i;return[Math.max(s,Math.min(e,n)),Math.max(l,Math.min(t,r)),Math.min(c,Math.max(e,n)),Math.min(h,Math.max(t,r))]}function see(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function Ng(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const Yk=Bb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:s,class:l,renders:c={},handleSize:h=10,document:p}=t,v=J0(t,["x","y","width","height","class","renders","handleSize","document"]);if(!p||i===void 0||s===void 0||n===void 0||r===void 0)return;const y=h/2,b=(Hr,Ti,ro)=>{Hr.handle||(Hr.handle=ro.createElement("rect"),Hr.append(Hr.handle));const{handle:si}=Hr;return si.attr(Ti),si},T=bo(Z_(v,"handleNW","handleNE"),"handleN"),{render:M=b}=T,R=J0(T,["render"]),I=bo(v,"handleE"),{render:N=b}=I,z=J0(I,["render"]),H=bo(Z_(v,"handleSE","handleSW"),"handleS"),{render:X=b}=H,Y=J0(H,["render"]),ne=bo(v,"handleW"),{render:ve=b}=ne,ye=J0(ne,["render"]),De=bo(v,"handleNW"),{render:Ye=b}=De,Qe=J0(De,["render"]),yt=bo(v,"handleNE"),{render:qe=b}=yt,ut=J0(yt,["render"]),ft=bo(v,"handleSE"),{render:mt=b}=ft,Xt=J0(ft,["render"]),Mt=bo(v,"handleSW"),{render:kt=b}=Mt,Tn=J0(Mt,["render"]),zn=(Hr,Ti)=>{const{id:ro}=Hr,si=Ti(Hr,Hr.attributes,p);si.id=ro,si.style.draggable=!0},lr=Hr=>()=>{const Ti=Bb(ro=>zn(ro,Hr));return new Ti({})},ir=Ta(e).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);ir.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Ng,Object.assign(Object.assign({width:i,height:s},Z_(v,"handle")),{transform:void 0})),ir.maybeAppend("handle-n",lr(M)).style("x",y).style("y",-y).style("width",i-h).style("height",h).style("fill","transparent").call(Ng,R),ir.maybeAppend("handle-e",lr(N)).style("x",i-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Ng,z),ir.maybeAppend("handle-s",lr(X)).style("x",y).style("y",s-y).style("width",i-h).style("height",h).style("fill","transparent").call(Ng,Y),ir.maybeAppend("handle-w",lr(ve)).style("x",-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(Ng,ye),ir.maybeAppend("handle-nw",lr(Ye)).style("x",-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Ng,Qe),ir.maybeAppend("handle-ne",lr(qe)).style("x",i-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(Ng,ut),ir.maybeAppend("handle-se",lr(mt)).style("x",i-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Ng,Xt),ir.maybeAppend("handle-sw",lr(kt)).style("x",-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(Ng,Tn)});function OP(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:c=see(e),brushRegion:h=(si,Xr,mo,ho,Ho)=>[si,Xr,mo,ho],reverse:p=!1,fill:v="#777",fillOpacity:y="0.3",stroke:b="#fff",selectedHandles:T=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,M=J0(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let R=null,I=null,N=null,z=null,H=null,X=!1;const[Y,ne,ve,ye]=c;Uy(e,"crosshair"),e.style.draggable=!0;const De=(si,Xr,mo)=>{if(s(mo),z&&z.remove(),H&&H.remove(),R=[si,Xr],p)return Ye();Qe()},Ye=()=>{H=new ad({style:Object.assign(Object.assign({},M),{fill:v,fillOpacity:y,stroke:b,pointerEvents:"none"})}),z=new Yk({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(H),e.appendChild(z)},Qe=()=>{z=new Yk({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},M),{fill:v,fillOpacity:y,stroke:b,draggable:!0}),className:"mask"}),e.appendChild(z)},yt=(si=!0)=>{z&&z.remove(),H&&H.remove(),R=null,I=null,N=null,X=!1,z=null,H=null,r(si)},qe=(si,Xr,mo=!0)=>{const[ho,Ho,ma,Ia]=aee(si[0],si[1],Xr[0],Xr[1],c),[Da,ms,Nl,os]=h(ho,Ho,ma,Ia,c);return p?ft(Da,ms,Nl,os):ut(Da,ms,Nl,os),n(Da,ms,Nl,os,mo),[Da,ms,Nl,os]},ut=(si,Xr,mo,ho)=>{z.style.x=si,z.style.y=Xr,z.style.width=mo-si,z.style.height=ho-Xr},ft=(si,Xr,mo,ho)=>{H.style.d=`
      M${Y},${ne}L${ve},${ne}L${ve},${ye}L${Y},${ye}Z
      M${si},${Xr}L${si},${ho}L${mo},${ho}L${mo},${Xr}Z
    `,z.style.x=si,z.style.y=Xr,z.style.width=mo-si,z.style.height=ho-Xr},mt=si=>{const Xr=(ms,Nl,os,Rs,ju)=>ms+Nl<Rs?Rs-Nl:ms+os>ju?ju-os:ms,mo=si[0]-N[0],ho=si[1]-N[1],Ho=Xr(mo,R[0],I[0],Y,ve),ma=Xr(ho,R[1],I[1],ne,ye),Ia=[R[0]+Ho,R[1]+ma],Da=[I[0]+Ho,I[1]+ma];qe(Ia,Da)},Xt={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Mt=si=>Tn(si)||kt(si),kt=si=>{const{id:Xr}=si;return T.indexOf(Xr)===-1?!1:new Set(Object.keys(Xt)).has(Xr)},Tn=si=>si===z.getElementById("selection"),zn=si=>{const{target:Xr}=si,[mo,ho]=JM(e,si);if(!z||!Mt(Xr)){De(mo,ho,si),X=!0;return}Mt(Xr)&&(N=[mo,ho])},lr=si=>{const{target:Xr}=si,mo=JM(e,si);if(!R)return;if(!N)return qe(R,mo);if(Tn(Xr))return mt(mo);const[ho,Ho]=[mo[0]-N[0],mo[1]-N[1]],{id:ma}=Xr;if(Xt[ma]){const[Ia,Da,ms,Nl]=Xt[ma].vector;return qe([R[0]+ho*Ia,R[1]+Ho*Da],[I[0]+ho*ms,I[1]+Ho*Nl])}},ir=si=>{if(N){N=null;const{x:ma,y:Ia,width:Da,height:ms}=z.style;R=[ma,Ia],I=[ma+Da,Ia+ms],l(ma,Ia,ma+Da,Ia+ms,si);return}I=JM(e,si);const[Xr,mo,ho,Ho]=qe(R,I);X=!1,i(Xr,mo,ho,Ho,si)},Hr=si=>{const{target:Xr}=si;z&&!Mt(Xr)&&yt()},Ti=si=>{const{target:Xr}=si;!z||!Mt(Xr)||X?Uy(e,"crosshair"):Tn(Xr)?Uy(e,"move"):kt(Xr)&&Uy(e,Xt[Xr.id].cursor)},ro=()=>{Uy(e,"default")};return e.addEventListener("dragstart",zn),e.addEventListener("drag",lr),e.addEventListener("dragend",ir),e.addEventListener("click",Hr),e.addEventListener("pointermove",Ti),e.addEventListener("pointerleave",ro),{mask:z,move(si,Xr,mo,ho,Ho=!0){z||De(si,Xr,{}),R=[si,Xr],I=[mo,ho],qe([si,Xr],[mo,ho],Ho)},remove(si=!0){z&&yt(si)},destroy(){z&&yt(!1),Uy(e,"default"),e.removeEventListener("dragstart",zn),e.removeEventListener("drag",lr),e.removeEventListener("dragend",ir),e.removeEventListener("click",Hr),e.removeEventListener("pointermove",Ti),e.removeEventListener("pointerleave",ro)}}}function MP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(s=>s.brushKey===n)})}function lee(e,t,n){return MP(e,t,n).map(r=>Sm(r.container))}function uee(e,t,n){return MP(e,t,n).map(r=>r.options)}function $k(e,t){var{elements:n,selectedHandles:r,siblings:i=lr=>[],datum:s,brushRegion:l,extent:c,reverse:h,scale:p,coordinate:v,series:y=!1,key:b=lr=>lr,bboxOf:T=lr=>{const{x:ir,y:Hr,width:Ti,height:ro}=lr.style;return{x:ir,y:Hr,width:Ti,height:ro}},state:M={},emitter:R}=t,I=J0(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const N=n(e),z=i(e),H=z.flatMap(n),X=X2(N,s),Y=bo(I,"mask"),{setState:ne,removeState:ve}=Dg(M,X),ye=new Map,{width:De,height:Ye,x:Qe=0,y:yt=0}=T(e),qe=c||[0,0,De,Ye],ut=()=>{for(const lr of[...N,...H])ve(lr,"active","inactive")},ft=(lr,ir,Hr,Ti)=>{var ro;for(const Xr of z)(ro=Xr.brush)===null||ro===void 0||ro.remove();const si=new Set;for(const Xr of N){const{min:mo,max:ho}=Xr.getLocalBounds(),[Ho,ma]=mo,[Ia,Da]=ho;oee([Ho,ma,Ia,Da],[lr,ir,Hr,Ti])?(ne(Xr,"active"),si.add(b(Xr))):ne(Xr,"inactive")}for(const Xr of H)si.has(b(Xr))?ne(Xr,"active"):ne(Xr,"inactive")},mt=()=>{for(const lr of N)ve(lr,"inactive");for(const lr of ye.values())lr.remove();ye.clear()},Xt=(lr,ir,Hr,Ti)=>{const ro=Xr=>{const mo=Xr.cloneNode();return mo.__data__=Xr.__data__,Xr.parentNode.appendChild(mo),ye.set(Xr,mo),mo},si=new Ip({style:{x:lr+Qe,y:ir+yt,width:Hr-lr,height:Ti-ir}});e.appendChild(si);for(const Xr of N){const mo=ye.get(Xr)||ro(Xr);mo.style.clipPath=si,ne(Xr,"inactive"),ne(mo,"active")}},Mt=OP(e,Object.assign(Object.assign({},Y),{extent:qe,brushRegion:l,reverse:h,selectedHandles:r,brushended:lr=>{const ir=y?mt:ut;lr&&R.emit("brush:remove",{nativeEvent:!0}),ir()},brushed:(lr,ir,Hr,Ti,ro)=>{const si=gT(lr,ir,Hr,Ti,p,v);ro&&R.emit("brush:highlight",{nativeEvent:!0,data:{selection:si}}),(y?Xt:ft)(lr,ir,Hr,Ti)},brushcreated:(lr,ir,Hr,Ti,ro)=>{const si=gT(lr,ir,Hr,Ti,p,v);R.emit("brush:end",Object.assign(Object.assign({},ro),{nativeEvent:!0,data:{selection:si}}))},brushupdated:(lr,ir,Hr,Ti,ro)=>{const si=gT(lr,ir,Hr,Ti,p,v);R.emit("brush:end",Object.assign(Object.assign({},ro),{nativeEvent:!0,data:{selection:si}}))},brushstarted:lr=>{R.emit("brush:start",lr)}})),kt=({nativeEvent:lr,data:ir})=>{if(lr)return;const{selection:Hr}=ir,[Ti,ro,si,Xr]=xW(Hr,p,v);Mt.move(Ti,ro,si,Xr,!1)};R.on("brush:highlight",kt);const Tn=({nativeEvent:lr}={})=>{lr||Mt.remove(!1)};R.on("brush:remove",Tn);const zn=Mt.destroy.bind(Mt);return Mt.destroy=()=>{R.off("brush:highlight",kt),R.off("brush:remove",Tn),zn()},Mt}function RP(e){var{facet:t,brushKey:n}=e,r=J0(e,["facet","brushKey"]);return(i,s,l)=>{const{container:c,view:h,options:p}=i,v=Sm(c),y={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},b=["active",["inactive",{opacity:.5}]],{scale:T,coordinate:M}=h;if(t){const I=v.getBounds(),N=I.min[0],z=I.min[1],H=I.max[0],X=I.max[1];return $k(v.parentNode.parentNode,Object.assign(Object.assign({elements:()=>sL(i,s),datum:r1(KM(i,s).map(Y=>Y.view)),brushRegion:(Y,ne,ve,ye)=>[Y,ne,ve,ye],extent:[N,z,H,X],state:Vb(KM(i,s).map(Y=>Y.options),b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r))}const R=$k(v,Object.assign(Object.assign({elements:zy,key:I=>I.__data__.key,siblings:()=>lee(i,s,n),datum:r1([h,...MP(i,s,n).map(I=>I.view)]),brushRegion:(I,N,z,H)=>[I,N,z,H],extent:void 0,state:Vb([p,...uee(i,s,n)],b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r));return v.brush=R,()=>R.destroy()}}function PP(e,t,n,r,i){const[,s,,l]=i;return[e,s,n,l]}function cee(e){return RP(Object.assign(Object.assign({},e),{brushRegion:PP,selectedHandles:["handle-e","handle-w"]}))}function IP(e,t,n,r,i){const[s,,l]=i;return[s,t,l,r]}function fee(e){return RP(Object.assign(Object.assign({},e),{brushRegion:IP,selectedHandles:["handle-n","handle-s"]}))}var DP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hee="axis",dee="axis-line",pee="axis-main-group",qk="axis-hot-area";function vee(e){return e.getElementsByClassName(hee)}function Kk(e){return e.getElementsByClassName(dee)[0]}function mee(e){return e.getElementsByClassName(pee)[0]}function Qk(e){return mee(e).getLocalBounds()}function gee(e,t){var{cross:n,offsetX:r,offsetY:i}=t,s=DP(t,["cross","offsetX","offsetY"]);const l=Qk(e),c=Kk(e),[h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=(y-p)*2;return{brushRegion:IP,hotZone:new Ip({className:qk,style:Object.assign({width:n?T/2:T,transform:`translate(${(n?p:h-T/2).toFixed(2)}, ${v})`,height:b-v},s)}),extent:n?(M,R,I,N)=>[-1/0,R,1/0,N]:(M,R,I,N)=>[Math.floor(p-r),R,Math.ceil(y-r),N]}}function yee(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,s=DP(t,["offsetY","offsetX","cross"]);const l=Qk(e),c=Kk(e),[,h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=b-v;return{brushRegion:PP,hotZone:new Ip({className:qk,style:Object.assign({width:y-p,height:i?T:T*2,transform:`translate(${p}, ${i?v:h-T})`},s)}),extent:i?(M,R,I,N)=>[M,-1/0,I,1/0]:(M,R,I,N)=>[M,Math.floor(v-n),I,Math.ceil(b-n)]}}function _ee(e,t){var{axes:n,elements:r,points:i,horizontal:s,datum:l,offsetY:c,offsetX:h,reverse:p=!1,state:v={},emitter:y,coordinate:b}=t,T=DP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const M=r(e),R=n(e),I=X2(M,l),{setState:N,removeState:z}=Dg(v,I),H=new Map,X=bo(T,"mask"),Y=kt=>Array.from(H.values()).every(([Tn,zn,lr,ir])=>kt.some(([Hr,Ti])=>Hr>=Tn&&Hr<=lr&&Ti>=zn&&Ti<=ir)),ne=R.map(kt=>kt.attributes.scale),ve=kt=>kt.length>2?[kt[0],kt[kt.length-1]]:kt,ye=new Map,De=()=>{ye.clear();for(let kt=0;kt<R.length;kt++){const Tn=ne[kt],{domain:zn}=Tn.getOptions();ye.set(kt,ve(zn))}};De();const Ye=(kt,Tn)=>{const zn=[];for(const ir of M){const Hr=i(ir);Y(Hr)?(N(ir,"active"),zn.push(ir)):N(ir,"inactive")}if(ye.set(kt,yt(zn,kt)),!Tn)return;const lr=()=>{if(!qe)return Array.from(ye.values());const ir=[];for(const[Hr,Ti]of ye){const ro=ne[Hr],{name:si}=ro.getOptions();si==="x"?ir[0]=Ti:ir[1]=Ti}return ir};y.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:lr()}})},Qe=kt=>{for(const Tn of M)z(Tn,"active","inactive");De(),kt&&y.emit("brushAxis:remove",{nativeEvent:!0})},yt=(kt,Tn)=>{const zn=ne[Tn],{name:lr}=zn.getOptions(),ir=kt.map(Hr=>{const Ti=Hr.__data__;return zn.invert(Ti[lr])});return ve(ky(zn,ir))},qe=R.some(s)&&R.some(kt=>!s(kt)),ut=[];for(let kt=0;kt<R.length;kt++){const Tn=R[kt],zn=s(Tn)?yee:gee,{hotZone:lr,brushRegion:ir,extent:Hr}=zn(Tn,{offsetY:c,offsetX:h,cross:qe,zIndex:999,fill:"transparent"});Tn.parentNode.appendChild(lr);const Ti=OP(lr,Object.assign(Object.assign({},X),{reverse:p,brushRegion:ir,brushended(ro){H.delete(Tn),Array.from(H.entries()).length===0?Qe(ro):Ye(kt,ro)},brushed(ro,si,Xr,mo,ho){H.set(Tn,Hr(ro,si,Xr,mo)),Ye(kt,ho)}}));ut.push(Ti)}const ft=(kt={})=>{const{nativeEvent:Tn}=kt;Tn||ut.forEach(zn=>zn.remove(!1))},mt=(kt,Tn,zn)=>{const[lr,ir]=kt,Hr=si=>si.getStep?si.getStep():0,Ti=Xt(lr,Tn,zn),ro=Xt(ir,Tn,zn)+Hr(Tn);return s(zn)?[Ti,-1/0,ro,1/0]:[-1/0,Ti,1/0,ro]},Xt=(kt,Tn,zn)=>{const{height:lr,width:ir}=b.getOptions(),Hr=Tn.clone();return s(zn)?Hr.update({range:[0,ir]}):Hr.update({range:[lr,0]}),Hr.map(kt)},Mt=kt=>{const{nativeEvent:Tn}=kt;if(Tn)return;const{selection:zn}=kt.data;for(let lr=0;lr<ut.length;lr++){const ir=zn[lr],Hr=ut[lr],Ti=R[lr];if(ir){const ro=ne[lr];Hr.move(...mt(ir,ro,Ti),!1)}else Hr.remove(!1)}};return y.on("brushAxis:remove",ft),y.on("brushAxis:highlight",Mt),()=>{ut.forEach(kt=>kt.destroy()),y.off("brushAxis:remove",ft),y.off("brushAxis:highlight",Mt)}}function bee(e){return(t,n,r)=>{const{container:i,view:s,options:l}=t,c=Sm(i),{x:h,y:p}=c.getBBox(),{coordinate:v}=s;return _ee(i,Object.assign({elements:zy,axes:vee,offsetY:p,offsetX:h,points:y=>y.__data__.points,horizontal:y=>{const{startPos:[b,T],endPos:[M,R]}=y.attributes;return b!==M&&T===R},datum:r1(s),state:Vb(l,["active",["inactive",{opacity:.5}]]),coordinate:v,emitter:r},e))}}var xee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Jk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Eee(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function See(e,t){var{filter:n,reset:r,brushRegion:i,extent:s,reverse:l,emitter:c,scale:h,coordinate:p,selection:v,series:y=!1}=t,b=Jk(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const T=bo(b,"mask"),{width:M,height:R}=e.getBBox(),I=s||[0,0,M,R],N=Eee(),z=OP(e,Object.assign(Object.assign({},T),{extent:I,brushRegion:i,reverse:l,brushcreated:H}));e.addEventListener("click",X);function H(ne,ve,ye,De,Ye){Ye.nativeEvent=!0,n(v(ne,ve,ye,De),Ye),z.remove()}function X(ne){N(ne)&&(ne.nativeEvent=!0,r(ne))}const Y=({nativeEvent:ne,data:ve})=>{if(ne)return;const{selection:ye}=ve;n(ye,{nativeEvent:!1})};return c.on("brush:filter",Y),()=>{z.destroy(),c.off("brush:filter",Y),e.removeEventListener("click",X)}}function LP(e){var{hideX:t=!0,hideY:n=!0}=e,r=Jk(e,["hideX","hideY"]);return(i,s,l)=>{const{container:c,view:h,options:p,update:v,setState:y}=i,b=Sm(c),T={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let M=!1,R=!1,I=h;const{scale:N,coordinate:z}=h;return See(b,Object.assign(Object.assign({brushRegion:(H,X,Y,ne)=>[H,X,Y,ne],selection:(H,X,Y,ne)=>{const{scale:ve,coordinate:ye}=I;return gT(H,X,Y,ne,ve,ye)},filter:(H,X)=>xee(this,void 0,void 0,function*(){if(R)return;R=!0;const[Y,ne]=H;y("brushFilter",ye=>{const{marks:De}=ye,Ye=De.map(Qe=>Jr({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},Qe,{scale:{x:{domain:Y,nice:!1},y:{domain:ne,nice:!1}}}));return Object.assign(Object.assign({},p),{marks:Ye,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},X),{data:{selection:[Y,ne]}})),I=(yield v()).view,R=!1,M=!0}),reset:H=>{if(R||!M)return;const{scale:X}=h,{x:Y,y:ne}=X,ve=Y.getOptions().domain,ye=ne.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},H),{data:{selection:[ve,ye]}})),M=!1,I=h,y("brushFilter"),v()},extent:void 0,emitter:l,scale:N,coordinate:z},T),r))}}function wee(e){return LP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:PP}))}function Tee(e){return LP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:IP}))}var Aee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Cee="slider";function Oee(e,t,n,r=!1,i="x",s="y"){const{marks:l}=e,c=l.map(h=>{var p,v;return Jr({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:t,[n]:Object.assign(Object.assign({},((p=h[n])===null||p===void 0?void 0:p[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((v=h[n])===null||v===void 0?void 0:v[s])&&{[s]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:c,clip:!0,animate:!1})}function Mee(e,t,n){const[r,i]=e,s=n?h=>1-h:h=>h,l=Ub(t,s(r),!0),c=Ub(t,s(i),!1);return ky(t,[l,c])}function vA(e){return[e[0],e[e.length-1]]}function e7({initDomain:e={},className:t=Cee,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:i=!1,wait:s=50,leading:l=!0,trailing:c=!1,getInitValues:h=p=>{var v;const y=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(y[0]!==0||y[1]!==1)return y}}){return(p,v,y)=>{const{container:b,view:T,update:M,setState:R}=p,I=b.getElementsByClassName(t);if(!I.length)return()=>{};let N=!1;const{scale:z,coordinate:H,layout:X}=T,{paddingLeft:Y,paddingTop:ne,paddingBottom:ve,paddingRight:ye}=X,{x:De,y:Ye}=z,Qe=Ru(H),yt=mt=>{const Xt=mt==="vertical"?"y":"x",Mt=mt==="vertical"?"x":"y";return Qe?[Mt,Xt]:[Xt,Mt]},qe=new Map,ut=new Set,ft={x:e.x||De.getOptions().domain,y:e.y||Ye.getOptions().domain};for(const mt of I){const{orientation:Xt}=mt.attributes,[Mt,kt]=yt(Xt),Tn=`${n}${mm(Mt)}:filter`,zn=Mt==="x",{ratio:lr}=De.getOptions(),{ratio:ir}=Ye.getOptions(),Hr=Xr=>{if(Xr.data){const{selection:Ia}=Xr.data,[Da=vA(ft.x),ms=vA(ft.y)]=Ia;return zn?[ky(De,Da,lr),ky(Ye,ms,ir)]:[ky(Ye,ms,ir),ky(De,Da,lr)]}const{value:mo}=Xr.detail,ho=z[Mt],Ho=Mee(mo,ho,Qe&&Xt==="horizontal"),ma=ft[kt];return[Ho,ma]},Ti=v1(Xr=>Aee(this,void 0,void 0,function*(){const{initValue:mo=!1}=Xr;if(N&&!mo)return;N=!0;const{nativeEvent:ho=!0}=Xr,[Ho,ma]=Hr(Xr);if(ft[Mt]=Ho,ft[kt]=ma,ho){const Ia=zn?Ho:ma,Da=zn?ma:Ho;y.emit(Tn,Object.assign(Object.assign({},Xr),{nativeEvent:ho,data:{selection:[vA(Ia),vA(Da)]}}))}R(mt,Ia=>Object.assign(Object.assign({},Oee(Ia,{[Mt]:{domain:Ho,nice:!1}},n,i,Mt,kt)),{paddingLeft:Y,paddingTop:ne,paddingBottom:ve,paddingRight:ye})),yield M(),N=!1}),s,{leading:l,trailing:c}),ro=Xr=>{const{nativeEvent:mo}=Xr;if(mo)return;const{data:ho}=Xr,{selection:Ho}=ho,[ma,Ia]=Ho;mt.dispatchEvent(new au("valuechange",{data:ho,nativeEvent:!1}));const Da=zn?yT(ma,De):yT(Ia,Ye);r(mt,Da)};y.on(Tn,ro),mt.addEventListener("valuechange",Ti),qe.set(mt,Ti),ut.add([Tn,ro]);const si=h(mt);si&&mt.dispatchEvent(new au("valuechange",{detail:{value:si},nativeEvent:!1,initValue:!0}))}return M(),()=>{for(const[mt,Xt]of qe)mt.removeEventListener("valuechange",Xt);for(const[mt,Xt]of ut)y.off(mt,Xt)}}}const t7="g2-scrollbar";function Ree(e={}){return(t,n,r)=>{const{view:i,container:s}=t;if(!s.getElementsByClassName(t7).length)return()=>{};const{scale:c}=i,{x:h,y:p}=c,v={x:[...h.getOptions().domain],y:[...p.getOptions().domain]};return h.update({domain:h.getOptions().expectedDomain}),p.update({domain:p.getOptions().expectedDomain}),e7(Object.assign(Object.assign({},e),{initDomain:v,className:t7,prefix:"scrollbar",hasState:!0,setValue:(b,T)=>b.setValue(T[0]),getInitValues:b=>{const T=b.slider.attributes.values;if(T[0]!==0)return T}}))(t,n,r)}}var Pee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Iee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${YG(r)}:${i}`).join(";")}">${t}</${e}>`}const Dee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function n7(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function r7(e){var{offsetX:t=8,offsetY:n=8}=e,r=Pee(e,["offsetX","offsetY"]);return i=>{const{container:s}=i,[l,c]=s.getBounds().min,h=bo(r,"tip"),p=new Set,v=b=>{const{target:T}=b;if(!n7(T)){b.stopPropagation();return}const{offsetX:M,offsetY:R}=b,I=M+t-l,N=R+n-c;if(T.tip){T.tip.style.x=I,T.tip.style.y=N;return}const{text:z}=T.style,H=new V0({className:"poptip",style:{innerHTML:Iee("div",z,Object.assign(Object.assign({},Dee),h)),x:I,y:N}});s.appendChild(H),T.tip=H,p.add(H)},y=b=>{const{target:T}=b;if(!n7(T)){b.stopPropagation();return}T.tip&&(T.tip.remove(),T.tip=null,p.delete(T.tip))};return s.addEventListener("pointerover",v),s.addEventListener("pointerout",y),()=>{s.removeEventListener("pointerover",v),s.removeEventListener("pointerout",y),p.forEach(b=>b.remove())}}}r7.props={reapplyWhenUpdate:!0};function Lee(e,t){var n=CR(t),r=n.length;if((0,Sa.Z)(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Nee=Lee;function Fee(e,t){if(!Vo(e))return null;var n;if(Kd(t)&&(n=t),Z0(t)&&(n=function(i){return Nee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var ix=Fee;function mA(e){return e==null?null:i7(e)}function i7(e){if(typeof e!="function")throw new Error;return e}var Bee={depth:-1},o7={},NP={};function kee(e){return e.id}function zee(e){return e.parentId}function FP(){var e=kee,t=zee,n;function r(i){var s=Array.from(i),l=e,c=t,h,p,v,y,b,T,M,R,I=new Map;if(n!=null){var N=s.map(function(ye,De){return Uee(n(ye,De,i))}),z=N.map(a7),H=new Set(N).add(""),X=SR(z),Y;try{for(X.s();!(Y=X.n()).done;){var ne=Y.value;H.has(ne)||(H.add(ne),N.push(ne),z.push(a7(ne)),s.push(NP))}}catch(ye){X.e(ye)}finally{X.f()}l=function(De,Ye){return N[Ye]},c=function(De,Ye){return z[Ye]}}for(v=0,h=s.length;v<h;++v)p=s[v],T=s[v]=new Kb(p),(M=l(p,v,i))!=null&&(M+="")&&(R=T.id=M,I.set(R,I.has(R)?o7:T)),(M=c(p,v,i))!=null&&(M+="")&&(T.parent=M);for(v=0;v<h;++v)if(T=s[v],M=T.parent){if(b=I.get(M),!b)throw new Error("missing: "+M);if(b===o7)throw new Error("ambiguous: "+M);b.children?b.children.push(T):b.children=[T],T.parent=b}else{if(y)throw new Error("multiple roots");y=T}if(!y)throw new Error("no root");if(n!=null){for(;y.data===NP&&y.children.length===1;)y=y.children[0],--h;for(var ve=s.length-1;ve>=0&&(T=s[ve],T.data===NP);--ve)T.data=null}if(y.parent=Bee,y.eachBefore(function(ye){ye.depth=ye.parent.depth+1,--h}).eachBefore(tN),y.parent=null,h>0)throw new Error("cycle");return y}return r.id=function(i){return arguments.length?(e=mA(i),r):e},r.parentId=function(i){return arguments.length?(t=mA(i),r):t},r.path=function(i){return arguments.length?(n=mA(i),r):n},r}function Uee(e){e="".concat(e);var t=e.length;return BP(e,t-1)&&!BP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function a7(e){var t=e.length;if(t<2)return"";for(;--t>1&&!BP(e,t););return e.slice(0,t)}function BP(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function jee(e,t,n,r,i){var s=e.children,l,c=s.length,h,p=new Array(c+1);for(p[0]=h=l=0;l<c;++l)p[l+1]=h+=s[l].value;v(0,c,e.value,t,n,r,i);function v(y,b,T,M,R,I,N){if(y>=b-1){var z=s[y];z.x0=M,z.y0=R,z.x1=I,z.y1=N;return}for(var H=p[y],X=T/2+H,Y=y+1,ne=b-1;Y<ne;){var ve=Y+ne>>>1;p[ve]<X?Y=ve+1:ne=ve}X-p[Y-1]<p[Y]-X&&y+1<Y&&--Y;var ye=p[Y]-H,De=T-ye;if(I-M>N-R){var Ye=T?(M*De+I*ye)/T:I;v(y,Y,ye,M,R,Ye,N),v(Y,b,De,Ye,R,I,N)}else{var Qe=T?(R*De+N*ye)/T:N;v(y,Y,ye,M,R,I,Qe),v(Y,b,De,M,Qe,I,N)}}}function gA(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(i-n)/e.value;++c<h;)l=s[c],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*p}function Vee(e,t,n,r,i){(e.depth&1?gA:J2)(e,t,n,r,i)}var s7=(1+Math.sqrt(5))/2;function l7(e,t,n,r,i,s){for(var l=[],c=t.children,h,p,v=0,y=0,b=c.length,T,M,R=t.value,I,N,z,H,X,Y,ne;v<b;){T=i-n,M=s-r;do I=c[y++].value;while(!I&&y<b);for(N=z=I,Y=Math.max(M/T,T/M)/(R*e),ne=I*I*Y,X=Math.max(z/ne,ne/N);y<b;++y){if(I+=p=c[y].value,p<N&&(N=p),p>z&&(z=p),ne=I*I*Y,H=Math.max(z/ne,ne/N),H>X){I-=p;break}X=H}l.push(h={value:I,dice:T<M,children:c.slice(v,y)}),h.dice?J2(h,n,r,i,R?r+=M*I/R:s):gA(h,n,r,R?n+=T*I/R:i,s),R-=I,v=y}return l}var u7=function e(t){function n(r,i,s,l,c){l7(t,r,i,s,l,c)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(s7),Hee=function e(t){function n(r,i,s,l,c){if((h=r._squarify)&&h.ratio===t)for(var h,p,v,y,b=-1,T,M=h.length,R=r.value;++b<M;){for(p=h[b],v=p.children,y=p.value=0,T=v.length;y<T;++y)p.value+=v[y].value;p.dice?J2(p,i,s,l,R?s+=(c-s)*p.value/R:c):gA(p,i,s,R?i+=(l-i)*p.value/R:l,c),R-=p.value}else r._squarify=h=l7(t,r,i,s,l,c),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(s7);function m1(){return 0}function ox(e){return function(){return e}}function Gee(){var e=u7,t=!1,n=1,r=1,i=[0],s=m1,l=m1,c=m1,h=m1,p=m1;function v(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(y),i=[0],t&&b.eachBefore(Q6),b}function y(b){var T=i[b.depth],M=b.x0+T,R=b.y0+T,I=b.x1-T,N=b.y1-T;I<M&&(M=I=(M+I)/2),N<R&&(R=N=(R+N)/2),b.x0=M,b.y0=R,b.x1=I,b.y1=N,b.children&&(T=i[b.depth+1]=s(b)/2,M+=p(b)-T,R+=l(b)-T,I-=c(b)-T,N-=h(b)-T,I<M&&(M=I=(M+I)/2),N<R&&(R=N=(R+N)/2),e(b,M,R,I,N))}return v.round=function(b){return arguments.length?(t=!!b,v):t},v.size=function(b){return arguments.length?(n=+b[0],r=+b[1],v):[n,r]},v.tile=function(b){return arguments.length?(e=i7(b),v):e},v.padding=function(b){return arguments.length?v.paddingInner(b).paddingOuter(b):v.paddingInner()},v.paddingInner=function(b){return arguments.length?(s=typeof b=="function"?b:ox(+b),v):s},v.paddingOuter=function(b){return arguments.length?v.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):v.paddingTop()},v.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:ox(+b),v):l},v.paddingRight=function(b){return arguments.length?(c=typeof b=="function"?b:ox(+b),v):c},v.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:ox(+b),v):h},v.paddingLeft=function(b){return arguments.length?(p=typeof b=="function"?b:ox(+b),v):p},v}function Wee(e,t){return Array.isArray(e)?typeof t=="function"?FP().path(t)(e):FP()(e):qb(e)}function c7(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],c7(n,n.path)})}function f7(e){const t=hl(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{f7(n)})}function Zee(e,t){const n={treemapBinary:jee,treemapDice:J2,treemapSlice:gA,treemapSliceDice:Vee,treemapSquarify:u7,treemapResquarify:Hee},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function h7(e,t,n){const{value:r}=n,i=Zee(t.tile,t.ratio),s=Wee(e,t.path);Vo(e)?f7(s):c7(s),r?s.sum(h=>t.ignoreParentValue&&h.children?0:Mm(r)(h)).sort(t.sort):s.count(),Gee().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(s);const l=s.descendants().map(h=>Object.assign(h,{id:h.id.replace(/^\//,""),x:[h.x0,h.x1],y:[h.y0,h.y1]}));return[l.filter(typeof t.layer=="function"?t.layer:h=>h.height===t.layer),l]}var Xee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Yee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $ee(e){return Ta(e).select(`.${Ko}`).node()}const qee={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function Kee(e={}){const{originData:t=[],layout:n}=e,r=Yee(e,["originData","layout"]),i=Jr({},qee,r),s=bo(i,"breadCrumb"),l=bo(i,"active");return c=>{const{update:h,setState:p,container:v,options:y}=c,b=$ee(v),T=y.marks[0],{state:M}=T,R=new Xc;b.appendChild(R);const I=(X,Y)=>Xee(this,void 0,void 0,function*(){if(R.removeChildren(),Y){let ne="",ve=s.y,ye=0;const De=[],Ye=b.getBBox().width,Qe=X.map((yt,qe)=>{ne=`${ne}${yt}/`,De.push(yt);const ut=new sd({name:ne.replace(/\/$/,""),style:Object.assign(Object.assign({text:yt,x:ye,path:[...De],depth:qe},s),{y:ve})});R.appendChild(ut),ye+=ut.getBBox().width;const ft=new sd({style:Object.assign(Object.assign({x:ye,text:" / "},s),{y:ve})});return R.appendChild(ft),ye+=ft.getBBox().width,ye>Ye&&(ve=R.getBBox().height+s.y,ye=0,ut.attr({x:ye,y:ve}),ye+=ut.getBBox().width,ft.attr({x:ye,y:ve}),ye+=ft.getBBox().width),qe===B2(X)-1&&ft.remove(),ut});Qe.forEach((yt,qe)=>{if(qe===B2(Qe)-1)return;const ut=Object.assign({},yt.attributes);yt.attr("cursor","pointer"),yt.addEventListener("mouseenter",()=>{yt.attr(l)}),yt.addEventListener("mouseleave",()=>{yt.attr(ut)}),yt.addEventListener("click",()=>{I(hl(yt,["style","path"]),hl(yt,["style","depth"]))})})}JJ(v,p),p("treemapDrillDown",ne=>{const{marks:ve}=ne,ye=X.join("/"),De=ve.map(Ye=>{if(Ye.type!=="rect")return Ye;let Qe=t;if(Y){const qe=t.filter(Mt=>{const kt=hl(Mt,["id"]);return kt&&(kt.match(`${ye}/`)||ye.match(kt))}).map(Mt=>({value:Mt.height===0?hl(Mt,["value"]):void 0,name:hl(Mt,["id"])})),{paddingLeft:ut,paddingBottom:ft,paddingRight:mt}=n,Xt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||R.getBBox().height+10)/(Y+1),paddingLeft:ut/(Y+1),paddingBottom:ft/(Y+1),paddingRight:mt/(Y+1),path:Mt=>Mt.name,layer:Mt=>Mt.depth===Y+1});Qe=h7(qe,Xt,{value:"value"})[0]}else Qe=t.filter(qe=>qe.depth===1);const yt=[];return Qe.forEach(({path:qe})=>{yt.push(fE(qe))}),Jr({},Ye,{data:Qe,scale:{color:{domain:yt}}})});return Object.assign(Object.assign({},ne),{marks:De})}),yield h(void 0,["legendFilter"])}),N=X=>{const Y=X.target;if(hl(Y,["markType"])!=="rect")return;const ne=hl(Y,["__data__","key"]),ve=ix(t,ye=>ye.id===ne);hl(ve,"height")&&I(hl(ve,"path"),hl(ve,"depth"))};b.addEventListener("click",N);const z=CR(Object.assign(Object.assign({},M.active),M.inactive)),H=()=>{dL(b).forEach(Y=>{const ne=hl(Y,["style","cursor"]),ve=ix(t,ye=>ye.id===hl(Y,["__data__","key"]));if(ne!=="pointer"&&(ve!=null&&ve.height)){Y.style.cursor="pointer";const ye=ER(Y.attributes,z);Y.addEventListener("mouseenter",()=>{Y.attr(M.active)}),Y.addEventListener("mouseleave",()=>{Y.attr(Jr(ye,M.inactive))})}})};return H(),b.addEventListener("mousemove",H),()=>{R.remove(),b.removeEventListener("click",N),b.removeEventListener("mousemove",H)}}}var kP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Qee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Jee={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},zP="movePoint",d7=e=>{const t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},p7=e=>{const t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},ete=(e,t,n)=>t.map(r=>["x","color"].reduce((s,l)=>{const c=n[l];return c&&r[c]!==e[c]?!1:s},!0)?Object.assign(Object.assign({},r),e):r),tte=e=>{const t=hl(e,["__data__","y"]),r=hl(e,["__data__","y1"])-t,{__data__:{data:i,encode:s,transform:l},childNodes:c}=e.parentNode,h=ix(l,({type:y})=>y==="normalizeY"),p=hl(s,["y","field"]),v=i[c.indexOf(e)][p];return(y,b=!1)=>h||b?y/(1-y)/(r/(1-r))*v:y},nte=(e,t)=>{const n=hl(e,["__data__","seriesItems",t,"0","value"]),r=hl(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:s,transform:l}}=e.parentNode,c=ix(l,({type:v})=>v==="normalizeY"),h=hl(s,["y","field"]),p=i[r][h];return v=>c?n===1?v:v/(1-v)/(n/(1-n))*p:v},v7=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},m7=(e,t,n,r)=>{const i=new ad({style:n}),s=new sd({style:r});return t.appendChild(s),e.appendChild(i),[i,s]},g7=(e,t)=>{if(!hl(e,["options","range","indexOf"]))return;const r=e.options.range.indexOf(t);return e.sortedDomain[r]},UP=(e,t,n)=>{const r=TT(e,t),s=TT(e,n)/r,l=e[0]+(t[0]-e[0])*s,c=e[1]+(t[1]-e[1])*s;return[l,c]};function rte(e={}){const{selection:t=[],precision:n=2}=e,r=Qee(e,["selection","precision"]),i=Object.assign(Object.assign({},Jee),r||{}),s=bo(i,"path"),l=bo(i,"label"),c=bo(i,"point");return(h,p,v)=>{const{update:y,setState:b,container:T,view:M,options:{marks:R,coordinate:I}}=h,N=Sm(T);let z=dL(N),H,X=t;const{transform:Y=[],type:ne}=I,ve=!!ix(Y,({type:Mt})=>Mt==="transpose"),ye=ne==="polar",De=ne==="theta",Ye=!!ix(z,({markType:Mt})=>Mt==="area");Ye&&(z=z.filter(({markType:Mt})=>Mt==="area"));const Qe=new Xc({style:{zIndex:2}});N.appendChild(Qe);const yt=()=>{v.emit("element-point:select",{nativeEvent:!0,data:{selection:X}})},qe=(Mt,kt)=>{v.emit("element-point:moved",{nativeEvent:!0,data:{changeData:Mt,data:kt}})},ut=Mt=>{const kt=Mt.target;X=[kt.parentNode.childNodes.indexOf(kt)],yt(),mt(kt)},ft=Mt=>{const{data:{selection:kt},nativeEvent:Tn}=Mt;if(Tn)return;X=kt;const zn=hl(z,[X==null?void 0:X[0]]);zn&&mt(zn)},mt=Mt=>{const{attributes:kt,markType:Tn,__data__:zn}=Mt,{stroke:lr}=kt,{points:ir,seriesTitle:Hr,color:Ti,title:ro,seriesX:si,y1:Xr}=zn;if(ve&&Tn!=="interval")return;const{scale:mo,coordinate:ho}=(H==null?void 0:H.view)||M,{color:Ho,y:ma,x:Ia}=mo,Da=ho.getCenter();Qe.removeChildren();let ms;const Nl=(os,Rs,ju,Kc)=>kP(this,void 0,void 0,function*(){return b("elementPointMove",zp=>{var Qc;const fh=(((Qc=H==null?void 0:H.options)===null||Qc===void 0?void 0:Qc.marks)||R).map(Ya=>{if(!Kc.includes(Ya.type))return Ya;const{data:Ps,encode:us}=Ya,Sl=Object.keys(us).reduce((qs,Iu)=>{const lc=us[Iu];return Iu==="x"&&(qs[lc]=os),Iu==="y"&&(qs[lc]=Rs),Iu==="color"&&(qs[lc]=ju),qs},{}),ul=ete(Sl,Ps,us);return qe(Sl,ul),Jr({},Ya,{data:ul,animate:!1})});return Object.assign(Object.assign({},zp),{marks:fh})}),yield y("elementPointMove")});if(["line","area"].includes(Tn))ir.forEach((os,Rs)=>{const ju=Ia.invert(si[Rs]);if(!ju)return;const Kc=new _g({name:zP,style:Object.assign({cx:os[0],cy:os[1],fill:lr},c)}),zp=nte(Mt,Rs);Kc.addEventListener("mousedown",Qc=>{const fh=ho.output([si[Rs],0]),Ya=Hr==null?void 0:Hr.length;T.attr("cursor","move"),X[1]!==Rs&&(X[1]=Rs,yt()),v7(Qe.childNodes,X,c);const[Ps,us]=m7(Qe,Kc,s,l),ka=ul=>{const qs=os[1]+ul.clientY-ms[1];if(Ye)if(ye){const Iu=os[0]+ul.clientX-ms[0],[lc,yd]=UP(Da,fh,[Iu,qs]),[,Ug]=ho.output([1,ma.output(0)]),[,E1]=ho.invert([lc,Ug-(ir[Rs+Ya][1]-yd)]),vC=(Rs+1)%Ya,mC=(Rs-1+Ya)%Ya,S1=Y2([ir[mC],[lc,yd],Hr[vC]&&ir[vC]]);us.attr("text",zp(ma.invert(E1)).toFixed(n)),Ps.attr("d",S1),Kc.attr("cx",lc),Kc.attr("cy",yd)}else{const[,Iu]=ho.output([1,ma.output(0)]),[,lc]=ho.invert([os[0],Iu-(ir[Rs+Ya][1]-qs)]),yd=Y2([ir[Rs-1],[os[0],qs],Hr[Rs+1]&&ir[Rs+1]]);us.attr("text",zp(ma.invert(lc)).toFixed(n)),Ps.attr("d",yd),Kc.attr("cy",qs)}else{const[,Iu]=ho.invert([os[0],qs]),lc=Y2([ir[Rs-1],[os[0],qs],ir[Rs+1]]);us.attr("text",ma.invert(Iu).toFixed(n)),Ps.attr("d",lc),Kc.attr("cy",qs)}};ms=[Qc.clientX,Qc.clientY],window.addEventListener("mousemove",ka);const Sl=()=>kP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),window.removeEventListener("mousemove",ka),T.removeEventListener("mouseup",Sl),Fs(us.attr("text")))return;const ul=Number(us.attr("text")),qs=g7(Ho,Ti);H=yield Nl(ju,ul,qs,["line","area"]),us.remove(),Ps.remove(),mt(Mt)});T.addEventListener("mouseup",Sl)}),Qe.appendChild(Kc)}),v7(Qe.childNodes,X,c);else if(Tn==="interval"){let os=[(ir[0][0]+ir[1][0])/2,ir[0][1]];ve?os=[ir[0][0],(ir[0][1]+ir[1][1])/2]:De&&(os=ir[0]);const Rs=tte(Mt),ju=new _g({name:zP,style:Object.assign(Object.assign({cx:os[0],cy:os[1],fill:lr},c),{stroke:c.activeStroke})});ju.addEventListener("mousedown",Kc=>{T.attr("cursor","move");const zp=g7(Ho,Ti),[Qc,fh]=m7(Qe,ju,s,l),Ya=us=>{if(ve){const ka=os[0]+us.clientX-ms[0],[Sl]=ho.output([ma.output(0),ma.output(0)]),[,ul]=ho.invert([Sl+(ka-ir[2][0]),os[1]]),qs=Y2([[ka,ir[0][1]],[ka,ir[1][1]],ir[2],ir[3]],!0);fh.attr("text",Rs(ma.invert(ul)).toFixed(n)),Qc.attr("d",qs),ju.attr("cx",ka)}else if(De){const ka=os[1]+us.clientY-ms[1],Sl=os[0]+us.clientX-ms[0],[ul,qs]=UP(Da,[Sl,ka],os),[Iu,lc]=UP(Da,[Sl,ka],ir[1]),yd=ho.invert([ul,qs])[1],Ug=Xr-yd;if(Ug<0)return;const E1=FW(Da,[[ul,qs],[Iu,lc],ir[2],ir[3]],Ug>.5?1:0);fh.attr("text",Rs(Ug,!0).toFixed(n)),Qc.attr("d",E1),ju.attr("cx",ul),ju.attr("cy",qs)}else{const ka=os[1]+us.clientY-ms[1],[,Sl]=ho.output([1,ma.output(0)]),[,ul]=ho.invert([os[0],Sl-(ir[2][1]-ka)]),qs=Y2([[ir[0][0],ka],[ir[1][0],ka],ir[2],ir[3]],!0);fh.attr("text",Rs(ma.invert(ul)).toFixed(n)),Qc.attr("d",qs),ju.attr("cy",ka)}};ms=[Kc.clientX,Kc.clientY],window.addEventListener("mousemove",Ya);const Ps=()=>kP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),T.removeEventListener("mouseup",Ps),window.removeEventListener("mousemove",Ya),Fs(fh.attr("text")))return;const us=Number(fh.attr("text"));H=yield Nl(ro,us,zp,[Tn]),fh.remove(),Qc.remove(),mt(Mt)});T.addEventListener("mouseup",Ps)}),Qe.appendChild(ju)}};z.forEach((Mt,kt)=>{X[0]===kt&&mt(Mt),Mt.addEventListener("click",ut),Mt.addEventListener("mouseenter",d7),Mt.addEventListener("mouseleave",p7)});const Xt=Mt=>{const kt=Mt==null?void 0:Mt.target;(!kt||kt.name!==zP&&!z.includes(kt))&&(X=[],yt(),Qe.removeChildren())};return v.on("element-point:select",ft),v.on("element-point:unselect",Xt),T.addEventListener("mousedown",Xt),()=>{Qe.remove(),v.off("element-point:select",ft),v.off("element-point:unselect",Xt),T.removeEventListener("mousedown",Xt),z.forEach(Mt=>{Mt.removeEventListener("click",ut),Mt.removeEventListener("mouseenter",d7),Mt.removeEventListener("mouseleave",p7)})}}}var ite=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const y7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:s,data:l}=e;return t.map(c=>{var{data:h,x:p,y:v,width:y,height:b}=c,T=ite(c,["data","x","y","width","height"]);return Object.assign(Object.assign({},T),{data:FM(h,l),x:p!=null?p:n,y:v!=null?v:r,width:y!=null?y:i,height:b!=null?b:s})})};y7.props={};var ote=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const _7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:s}=e,[l,c,h,p]=n==="col"?["y","height","width","x"]:["x","width","height","y"],v=r.reduce((R,I)=>R+I),y=e[c]-i*(t.length-1),b=r.map(R=>y*(R/v)),T=[];let M=e[l]||0;for(let R=0;R<b.length;R+=1){const I=t[R],{data:N}=I,z=ote(I,["data"]),H=FM(N,s);T.push(Object.assign({[l]:M,[c]:b[R],[p]:e[p]||0,[h]:e[h],data:H},z)),M+=b[R]+i}return T};_7.props={};class yE{constructor(t){this.$value=t}static of(t){return new yE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var ate=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ste=Lb(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:s,y:l}=t,c=(h,p)=>{var v;if(h===void 0||!i)return{};const y=Mu(n,M=>M[h]),b=((v=r==null?void 0:r[p])===null||v===void 0?void 0:v.domain)||Array.from(y.keys()),T=b.map(M=>y.has(M)?y.get(M).length:1);return{domain:b,flex:T}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),c(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),c(l,"y"))}}}),jP=Lb(e=>{const{data:t,scale:n}=e,r=[e];let i,s,l;for(;r.length;){const y=r.shift(),{children:b,encode:T={},scale:M={},legend:R={}}=y,{color:I}=T,{color:N}=M,{color:z}=R;I!==void 0&&(i=I),N!==void 0&&(s=N),z!==void 0&&(l=z),Array.isArray(b)&&r.push(...b)}const c=()=>{var y;const b=(y=n==null?void 0:n.color)===null||y===void 0?void 0:y.domain;if(b!==void 0)return[b];if(i===void 0)return[void 0];const T=typeof i=="function"?i:R=>R[i],M=t.map(T);return M.some(R=>typeof R=="number")?[Rg(M)]:[Array.from(new Set(M)),"ordinal"]},h=typeof i=="string"?i:"",[p,v]=c();return{encode:{color:i},scale:{color:Jr({},s,{domain:p,type:v})},legend:{color:Jr({title:h},l)}}}),VP=Lb(()=>({animate:{enterType:"fadeIn"}})),HP=Nb(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),GP=Nb(()=>({type:"cell"})),b7=Nb(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:s,y:l}=i,c=s?Array.from(new Set(r.map(v=>v[s]))):[],h=l?Array.from(new Set(r.map(v=>v[l]))):[];return(()=>{if(c.length&&h.length){const v=[];for(const y of c)for(const b of h)v.push({[s]:y,[l]:b});return v}if(c.length)return c.map(v=>({[s]:v}));if(h.length)return h.map(v=>({[l]:v}))})()}}]}}}),x7=Nb((e,t=lte,n=ute,r=cte,i={})=>{const{data:s,encode:l,children:c,scale:h,x:p=0,y:v=0,shareData:y=!1,key:b}=e,{value:T}=s,{x:M,y:R}=l,{color:I}=h,{domain:N}=I;return{children:(H,X,Y)=>{const{x:ne,y:ve}=X,{paddingLeft:ye,paddingTop:De,marginLeft:Ye,marginTop:Qe}=Y,{domain:yt}=ne.getOptions(),{domain:qe}=ve.getOptions(),ut=fr(H),ft=H.map(t),mt=H.map(({x:lr,y:ir})=>[ne.invert(lr),ve.invert(ir)]),Mt=mt.map(([lr,ir])=>Hr=>{const{[M]:Ti,[R]:ro}=Hr;return(M!==void 0?Ti===lr:!0)&&(R!==void 0?ro===ir:!0)}).map(lr=>T.filter(lr)),kt=y?vs(Mt,lr=>lr.length):void 0,Tn=mt.map(([lr,ir])=>({columnField:M,columnIndex:yt.indexOf(lr),columnValue:lr,columnValuesLength:yt.length,rowField:R,rowIndex:qe.indexOf(ir),rowValue:ir,rowValuesLength:qe.length})),zn=Tn.map(lr=>Array.isArray(c)?c:[c(lr)].flat(1));return ut.flatMap(lr=>{const[ir,Hr,Ti,ro]=ft[lr],si=Tn[lr],Xr=Mt[lr];return zn[lr].map(ho=>{var Ho,ma,{scale:Ia,key:Da,facet:ms=!0,axis:Nl={},legend:os={}}=ho,Rs=ate(ho,["scale","key","facet","axis","legend"]);const ju=((Ho=Ia==null?void 0:Ia.y)===null||Ho===void 0?void 0:Ho.guide)||Nl.y,Kc=((ma=Ia==null?void 0:Ia.x)===null||ma===void 0?void 0:ma.guide)||Nl.x,zp={x:{tickCount:M?5:void 0},y:{tickCount:R?5:void 0}},Qc=ms?Xr:Xr.length===0?[]:T,fh={color:{domain:N}},Ya={x:E7(Kc,n)(si,Qc),y:E7(ju,r)(si,Qc)};return Object.assign(Object.assign({key:`${Da}-${lr}`,data:Qc,margin:0,x:ir+ye+p+Ye,y:Hr+De+v+Qe,parentKey:b,width:Ti,height:ro,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Qc.length,dataDomain:kt,scale:Jr(zp,Ia,fh),axis:Jr({},Nl,Ya),legend:!1},Rs),i)})})}}});function lte(e){const{points:t}=e;return kM(t)}function yA(e,t){return t.length?Jr({title:!1,tick:null,label:null},e):Jr({title:!1,tick:null,label:null,grid:null},e)}function ute(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:s,columnValuesLength:l}=t;if(r!==i-1)return yA(e,n);const c=s!==l-1?!1:void 0,h=n.length?void 0:null;return Jr({title:c,grid:h},e)}}function cte(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return yA(e,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return Jr({title:s,grid:l},e)}}function E7(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const S7=()=>e=>[yE.of(e).call(GP).call(jP).call(VP).call(ste).call(HP).call(b7).call(x7).value()];S7.props={};var WP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fte=Lb(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),hte=Nb(e=>{const{data:t,children:n,x:r=0,y:i=0,key:s}=e;return{children:(c,h,p)=>{const{x:v,y}=h,{paddingLeft:b,paddingTop:T,marginLeft:M,marginTop:R}=p,{domain:I}=v.getOptions(),{domain:N}=y.getOptions(),z=fr(c),H=c.map(({points:ve})=>kM(ve)),X=c.map(({x:ve,y:ye})=>[v.invert(ve),y.invert(ye)]),Y=X.map(([ve,ye])=>({columnField:ve,columnIndex:I.indexOf(ve),columnValue:ve,columnValuesLength:I.length,rowField:ye,rowIndex:N.indexOf(ye),rowValue:ye,rowValuesLength:N.length})),ne=Y.map(ve=>Array.isArray(n)?n:[n(ve)].flat(1));return z.flatMap(ve=>{const[ye,De,Ye,Qe]=H[ve],[yt,qe]=X[ve],ut=Y[ve];return ne[ve].map(mt=>{var Xt,Mt;const{scale:kt,key:Tn,encode:zn,axis:lr,interaction:ir}=mt,Hr=WP(mt,["scale","key","encode","axis","interaction"]),Ti=(Xt=kt==null?void 0:kt.y)===null||Xt===void 0?void 0:Xt.guide,ro=(Mt=kt==null?void 0:kt.x)===null||Mt===void 0?void 0:Mt.guide,si={x:{facet:!1},y:{facet:!1}},Xr={x:pte(ro)(ut,t),y:vte(Ti)(ut,t)},mo={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:s,key:`${Tn}-${ve}`,x:ye+b+r+M,y:De+T+i+R,width:Ye,height:Qe,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:Jr(si,kt),axis:Jr(mo,lr,Xr),legend:!1,encode:Jr({},zn,{x:yt,y:qe}),interaction:Jr({},ir,{legendFilter:!1})},Hr)})})}}}),dte=Nb(e=>{const{encode:t}=e,n=WP(e,["encode"]),{position:r=[],x:i=r,y:s=[...r].reverse()}=t,l=WP(t,["position","x","y"]),c=[];for(const h of[i].flat(1))for(const p of[s].flat(1))c.push({$x:h,$y:p});return Object.assign(Object.assign({},n),{data:c,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function pte(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return yA(e,n)}}function vte(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return yA(e,n)}}const mte=()=>e=>[yE.of(e).call(GP).call(jP).call(hte).call(dte).call(VP).call(HP).call(fte).value()];var gte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const yte=Lb(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),_te=Lb(e=>({coordinate:{type:"polar"}})),bte=e=>{const{encode:t}=e,n=gte(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function w7(e){return t=>null}function xte(e){const{points:t}=e,[n,r,i,s]=t,l=sc(n,s),c=Ic(n,s),h=Ic(r,i),p=FD(c,h),v=1/Math.sin(p/2),y=l/(1+v),b=y*Math.sqrt(2),[T,M]=i,I=Fb(c)+p/2,N=y*v,z=T+N*Math.sin(I),H=M-N*Math.cos(I);return[z-b/2,H-b/2,b,b]}const Ete=()=>e=>[yE.of(e).call(GP).call(bte).call(jP).call(_te).call(b7).call(x7,xte,w7,w7,{frame:!1}).call(VP).call(HP).call(yte).value()];function Ste(e,t,n){const i=n,s=[0,i],l=[-i+1,1];if(e==="normal")return s;if(e==="reverse")return l;if(e==="alternate")return t%2===0?s:l;if(e==="reverse-alternate")return t%2===0?l:s}function wte(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=Jr({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:s}=i;Array.isArray(s)&&r.push(...s)}return e}const T7=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:s="ease-in-out-sine"}=e,l=t.length;if(!Array.isArray(t)||l===0)return[];const{key:c}=t[0],h=t.map(p=>Object.assign(Object.assign({},p),{key:c})).map(p=>wte(p,n,s));return function*(){let p=0,v;for(;r==="infinite"||p<r;){const[y,b]=Ste(i,p,l);for(let T=y;T<b;T+=1){const M=Math.abs(T);v!==M&&(yield h[M]),v=M}p++}}};T7.props={};function $y(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=Tte(e).map(l=>{var c;return[l,(c=ll(r,l))===null||c===void 0?void 0:c[0]]}).filter(([,l])=>su(l)),s=l=>i.map(([,c])=>c[l]).join("-");return Array.from(Mu(t,s).values())}function A7(e){return Array.isArray(e)?Ote(e):typeof e=="function"?Cte(e):e==="series"?Ate:e==="value"?Mte:e==="sum"?Rte:e==="maxIndex"?Pte:()=>null}function C7(e,t){for(const n of e)n.sort(t)}function O7(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function Tte(e){return Array.isArray(e)?e:[e]}function Ate(e,t,n){return _E(r=>n[r])}function Cte(e){return(t,n,r)=>_E(i=>e(t[i]))}function Ote(e){return(t,n,r)=>(i,s)=>e.reduce((l,c)=>l!==0?l:Dc(t[i][c],t[s][c]),0)}function Mte(e,t,n){return _E(r=>t[r])}function Rte(e,t,n){const r=fr(e),i=Array.from(Mu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,c.reduce((h,p)=>h+ +t[p])]));return _E(l=>s.get(n[l]))}function Pte(e,t,n){const r=fr(e),i=Array.from(Mu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,kb(c,h=>t[h])]));return _E(l=>s.get(n[l]))}function _E(e){return(t,n)=>Dc(e(t),e(n))}const M7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:s="y1",series:l=!0}=e;return(c,h)=>{const{data:p,encode:v,style:y={}}=h,[b,T]=ll(v,"y"),[M,R]=ll(v,"y1"),[I]=l?tE(v,"series","color"):ll(v,"color"),N=$y(t,c,h),H=A7(n)(p,b,I);H&&C7(N,H);const X=new Array(c.length),Y=new Array(c.length),ne=new Array(c.length),ve=[],ye=[];for(const qe of N){r&&qe.reverse();const ut=M?+M[qe[0]]:0,ft=[],mt=[];for(const ir of qe){const Hr=ne[ir]=+b[ir]-ut;Hr<0?mt.push(ir):Hr>=0&&ft.push(ir)}const Xt=ft.length>0?ft:mt,Mt=mt.length>0?mt:ft;let kt=ft.length-1,Tn=0;for(;kt>0&&b[Xt[kt]]===0;)kt--;for(;Tn<Mt.length-1&&b[Mt[Tn]]===0;)Tn++;ve.push(Xt[kt]),ye.push(Mt[Tn]);let zn=ut;for(const ir of mt.reverse()){const Hr=ne[ir];zn=X[ir]=(Y[ir]=zn)+Hr}let lr=ut;for(const ir of ft){const Hr=ne[ir];Hr>0?lr=X[ir]=(Y[ir]=lr)+Hr:X[ir]=Y[ir]=lr}}const De=new Set(ve),Ye=new Set(ye),Qe=i==="y"?X:Y,yt=s==="y"?X:Y;return[c,Jr({},h,{encode:{y0:GT(b,T),y:Uu(Qe,T),y1:Uu(yt,R)},style:Object.assign({first:(qe,ut)=>De.has(ut),last:(qe,ut)=>Ye.has(ut)},y)})]}};M7.props={};function R7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Ite(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i));else{let l=-1;for(let c of e)(c=t(c,++l,e))!=null&&(c=+c)>=c&&(r=c-i,i+=r/++n,s+=r*(c-i))}if(n>1)return s/(n-1)}function P7(e,t){const n=Ite(e,t);return n&&Math.sqrt(n)}function Dte(e,t,n){const r=R7(e),i=P7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var I7=Array.prototype,Lte=I7.slice,hpe=I7.map;function ZP(e){return()=>e}const Nte=Math.sqrt(50),Fte=Math.sqrt(10),Bte=Math.sqrt(2);function _A(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Nte?10:s>=Fte?5:s>=Bte?2:1;let c,h,p;return i<0?(p=Math.pow(10,-i)/l,c=Math.round(e*p),h=Math.round(t*p),c/p<e&&++c,h/p>t&&--h,p=-p):(p=Math.pow(10,i)*l,c=Math.round(e/p),h=Math.round(t/p),c*p<e&&++c,h*p>t&&--h),h<c&&.5<=n&&n<2?_A(e,t,n*2):[c,h,p]}function kte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?_A(t,e,n):_A(e,t,n);if(!(s>=i))return[];const c=s-i+1,h=new Array(c);if(r)if(l<0)for(let p=0;p<c;++p)h[p]=(s-p)/-l;else for(let p=0;p<c;++p)h[p]=(s-p)*l;else if(l<0)for(let p=0;p<c;++p)h[p]=(i+p)/-l;else for(let p=0;p<c;++p)h[p]=(i+p)*l;return h}function bE(e,t,n){return t=+t,e=+e,n=+n,_A(e,t,n)[2]}function dpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bE(t,e,n):bE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function zte(e,t,n){let r;for(;;){const i=bE(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Ute(e){return Math.max(1,Math.ceil(Math.log(R7(e))/Math.LN2)+1)}function jte(){var e=vm,t=Rg,n=Ute;function r(i){Array.isArray(i)||(i=Array.from(i));var s,l=i.length,c,h,p=new Array(l);for(s=0;s<l;++s)p[s]=e(i[s],s,i);var v=t(p),y=v[0],b=v[1],T=n(p,y,b);if(!Array.isArray(T)){const H=b,X=+T;if(t===Rg&&([y,b]=zte(y,b,X)),T=kte(y,b,X),T[0]<=y&&(h=bE(y,b,X)),T[T.length-1]>=b)if(H>=b&&t===Rg){const Y=bE(y,b,X);isFinite(Y)&&(Y>0?b=(Math.floor(b/Y)+1)*Y:Y<0&&(b=(Math.ceil(b*-Y)+1)/-Y))}else T.pop()}for(var M=T.length,R=0,I=M;T[R]<=y;)++R;for(;T[I-1]>b;)--I;(R||I<M)&&(T=T.slice(R,I),M=I-R);var N=new Array(M+1),z;for(s=0;s<=M;++s)z=N[s]=[],z.x0=s>0?T[s-1]:y,z.x1=s<M?T[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[Math.min(M,Math.floor((c-y)/h))].push(i[s]);else if(h<0){for(s=0;s<l;++s)if((c=p[s])!=null&&y<=c&&c<=b){const H=Math.floor((y-c)*h);N[Math.min(M,H+(T[H]<=c))].push(i[s])}}}else for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[_W(T,c,0,M)].push(i[s]);return N}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:ZP(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:ZP([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:ZP(Array.isArray(i)?Lte.call(i):i),r):n},r}function XP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?V2:tL(i);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,v=Math.log(h),y=.5*Math.exp(2*v/3),b=.5*Math.sqrt(v*y*(h-y)/h)*(p-h/2<0?-1:1),T=Math.max(n,Math.floor(t-p*y/h+b)),M=Math.min(r,Math.floor(t+(h-p)*y/h+b));XP(e,t,T,M,i)}const s=e[t];let l=n,c=r;for(xE(e,n,t),i(e[r],s)>0&&xE(e,n,r);l<c;){for(xE(e,l,c),++l,--c;i(e[l],s)<0;)++l;for(;i(e[c],s)>0;)--c}i(e[n],s)===0?xE(e,n,c):(++c,xE(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function xE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Vte(e,t=Dc){let n,r=!1;if(t.length===1){let i;for(const s of e){const l=t(s);(r?Dc(l,i)>0:Dc(l,l)===0)&&(n=s,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function bA(e,t,n){if(e=Float64Array.from(vW(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return a0(e);if(t>=1)return vs(e);var r,i=(r-1)*t,s=Math.floor(i),l=vs(XP(e,s).subarray(0,s+1)),c=a0(e.subarray(s+1));return l+(c-l)*(i-s)}}function ppe(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),c=+n(e[s+1],s+1,e);return l+(c-l)*(i-s)}}function Hte(e,t,n=XM){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(c,h)=>XM(n(e[h],h,e))),t<=0)return hA(r);if(t>=1)return kb(r);var r,i=Uint32Array.from(e,(c,h)=>h),s=r.length-1,l=Math.floor(s*t);return XP(i,l,0,s,(c,h)=>V2(r[c],r[h])),l=Vte(i.subarray(0,l+1),c=>r[c]),l>=0?l:-1}}function YP(e,t){return bA(e,.5,t)}function Gte(e,t){return Hte(e,.5,t)}var Wte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qy(e){return t=>t===null?e:`${e} of ${t}`}function Zte(e){if(typeof e=="function")return[e,null];const n={mean:Xte,max:$te,count:Kte,first:Jte,last:ene,sum:Qte,min:qte,median:Yte}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function Xte(){const e=(n,r)=>mE(n,i=>+r[i]),t=qy("mean");return[e,t]}function Yte(){const e=(n,r)=>YP(n,i=>+r[i]),t=qy("median");return[e,t]}function $te(){const e=(n,r)=>vs(n,i=>+r[i]),t=qy("max");return[e,t]}function qte(){const e=(n,r)=>a0(n,i=>+r[i]),t=qy("min");return[e,t]}function Kte(){const e=(n,r)=>n.length,t=qy("count");return[e,t]}function Qte(){const e=(n,r)=>ku(n,i=>+r[i]),t=qy("sum");return[e,t]}function Jte(){const e=(n,r)=>r[n[0]],t=qy("first");return[e,t]}function ene(){const e=(n,r)=>r[n[n.length-1]],t=qy("last");return[e,t]}const $P=(e={})=>{const{groupBy:t}=e,n=Wte(e,["groupBy"]);return(r,i)=>{const{data:s,encode:l}=i,c=t(r,i);if(!c)return[r,i];const h=(T,M)=>{if(T)return T;const{from:R}=M;if(!R)return T;const[,I]=ll(l,R);return I},p=Object.entries(n).map(([T,M])=>{const[R,I]=Zte(M),[N,z]=ll(l,T),H=h(z,M),X=c.map(Y=>R(Y,N!=null?N:s));return[T,Object.assign(Object.assign({},Lq(X,(I==null?void 0:I(H))||H)),{aggregate:!0})]}),v=Object.keys(l).map(T=>{const[M,R]=ll(l,T),I=c.map(N=>M[N[0]]);return[T,Uu(I,R)]}),y=c.map(T=>s[T[0]]);return[fr(c),Jr({},i,{data:y,encode:Object.fromEntries([...v,...p])})]}};$P.props={};var tne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const D7="thresholds";function nne(e){const[t,n]=Rg(e);return Math.min(200,Dte(e,t,n))}const qP=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=tne(e,["groupChannels","binChannels"]),i={},s=(l,c)=>{const{encode:h}=c,p=n.map(M=>{const[R]=ll(h,M);return R}),v=bo(r,D7),y=l.filter(M=>p.every(R=>su(R[M]))),b=[...t.map(M=>{const[R]=ll(h,M);return R}).filter(su).map(M=>R=>M[R]),...n.map((M,R)=>{const I=p[R],N=v[M]||nne(I),z=jte().thresholds(N).value(X=>+I[X])(y),H=new Map(z.flatMap(X=>{const{x0:Y,x1:ne}=X,ve=`${Y},${ne}`;return X.map(ye=>[ye,ve])}));return i[M]=H,X=>H.get(X)})],T=M=>b.map(R=>R(M)).join("-");return Array.from(Mu(y,T).values())};return $P(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(D7)))),Object.fromEntries(n.flatMap(l=>{const c=([p])=>+i[l].get(p).split(",")[0],h=([p])=>+i[l].get(p).split(",")[1];return h.from=l,[[l,c],[`${l}1`,h]]}))),{groupBy:s}))};qP.props={};const L7=(e={})=>{const{thresholds:t}=e;return qP(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};L7.props={};var rne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const N7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,s=rne(e,["groupBy","reverse","orderBy","padding"]);return(l,c)=>{const{data:h,encode:p,scale:v}=c,{series:y}=v,[b]=ll(p,"y"),[T]=tE(p,"series","color"),M=O7(T,y),R=$y(t,l,c),N=A7(r)(h,b,T);N&&C7(R,N);const z=new Array(l.length);for(const H of R){n&&H.reverse();for(let X=0;X<H.length;X++)z[H[X]]=M[X]}return[l,Jr({},c,{scale:{series:{domain:M,paddingInner:i}},encode:{series:Uu(z)}})]}};N7.props={};function xA(e,t,n){if(e===null)return[-.5,.5];const r=O7(e,t),s=new Wy({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function EA(e,t,n){return t*(1-e)+n*e}const F7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(s,l)=>{const{encode:c,scale:h}=l,{x:p,y:v}=h,[y]=ll(c,"x"),[b]=ll(c,"y"),T=xA(y,p,n),M=xA(b,v,r),R=s.map(()=>EA(i(),...M)),I=s.map(()=>EA(i(),...T));return[s,Jr({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:Uu(R),dx:Uu(I)}})]}};F7.props={};const B7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{x:c}=l,[h]=ll(s,"x"),p=xA(h,c,t),v=r.map(()=>EA(n(),...p));return[r,Jr({scale:{x:{padding:.5}}},i,{encode:{dx:Uu(v)}})]}};B7.props={};const k7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{y:c}=l,[h]=ll(s,"y"),p=xA(h,c,t),v=r.map(()=>EA(n(),...p));return[r,Jr({scale:{y:{padding:.5}}},i,{encode:{dy:Uu(v)}})]}};k7.props={};var ine=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const z7=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:s}=i,l=ine(i,["x"]),c=Object.entries(l).filter(([b])=>b.startsWith("y")).map(([b])=>[b,ll(i,b)[0]]),h=c.map(([b])=>[b,new Array(n.length)]),p=$y(t,n,r),v=new Array(p.length);for(let b=0;b<p.length;b++){const M=p[b].flatMap(N=>c.map(([,z])=>+z[N])),[R,I]=Rg(M);v[b]=(R+I)/2}const y=Math.max(...v);for(let b=0;b<p.length;b++){const T=y-v[b],M=p[b];for(const R of M)for(let I=0;I<c.length;I++){const[,N]=c[I],[,z]=h[I];z[R]=+N[R]+T}}return[n,Jr({},r,{encode:Object.fromEntries(h.map(([b,T])=>[b,Uu(T,ll(i,b)[1])]))})]}};z7.props={};const U7=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:s}=i,[l]=ll(s,"y"),[c,h]=ll(s,"y1"),[p]=n?tE(s,"series","color"):ll(s,"color"),v=$y(t,r,i),y=new Array(r.length);for(const b of v){const T=b.map(M=>+l[M]);for(let M=0;M<b.length;M++){const R=b[M],I=Math.max(...T.filter((N,z)=>z!==M));y[R]=l[R]>I?I:l[R]}}return[r,Jr({},i,{encode:{y1:Uu(y,h)}})]}};U7.props={};const j7=e=>{const{groupBy:t=["x"],reducer:n=(l,c)=>c[l[0]],orderBy:r=null,reverse:i=!1,duration:s}=e;return(l,c)=>{const{encode:h}=c,v=(Array.isArray(t)?t:[t]).map(I=>[I,ll(h,I)[0]]);if(v.length===0)return[l,c];let y=[l];for(const[,I]of v){const N=[];for(const z of y){const H=Array.from(Mu(z,X=>I[X]).values());N.push(...H)}y=N}if(r){const[I]=ll(h,r);I&&y.sort((N,z)=>n(N,I)-n(z,I)),i&&y.reverse()}const b=(s||3e3)/y.length,[T]=s?[Hy(l,b)]:tE(h,"enterDuration",Hy(l,b)),[M]=tE(h,"enterDelay",Hy(l,0)),R=new Array(l.length);for(let I=0,N=0;I<y.length;I++){const z=y[I],H=vs(z,X=>+T[X]);for(const X of z)R[X]=+M[X]+N;N+=H}return[l,Jr({},c,{encode:{enterDuration:WT(T),enterDelay:WT(R)}})]}};j7.props={};var one=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ane(e){return typeof e=="function"?e:{min:(n,r)=>a0(n,i=>r[+i]),max:(n,r)=>vs(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>mE(n,i=>r[+i]),median:(n,r)=>YP(n,i=>r[+i]),sum:(n,r)=>ku(n,i=>r[+i]),deviation:(n,r)=>P7(n,i=>r[+i])}[e]||vs}const V7=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:s,tooltip:l}=i,{x:c}=s,h=one(s,["x"]),p=Object.entries(h).filter(([R])=>R.startsWith("y")).map(([R])=>[R,ll(s,R)[0]]),[,v]=p.find(([R])=>R==="y"),y=p.map(([R])=>[R,new Array(r.length)]),b=$y(t,r,i),T=ane(n);for(const R of b){const I=T(R,v);for(const N of R)for(let z=0;z<p.length;z++){const[,H]=p[z],[,X]=y[z];X[N]=+H[N]/I}}const M=Rv(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,Jr({},i,Object.assign({encode:Object.fromEntries(y.map(([R,I])=>[R,Uu(I,ll(s,R)[1])]))},!M&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};V7.props={};function H7(e,t){return[e[0]]}function sne(e,t){const n=e.length-1;return[e[n]]}function lne(e,t){const n=kb(e,r=>t[r]);return[e[n]]}function une(e,t){const n=hA(e,r=>t[r]);return[e[n]]}function cne(e){return typeof e=="function"?e:{first:H7,last:sne,max:lne,min:une}[e]||H7}const SA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,s)=>{const{encode:l}=s,c=$y(t,i,s),[h]=ll(l,n),p=cne(r);return[c.flatMap(v=>p(v,h)),s]}};SA.props={};var fne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const G7=(e={})=>{const{selector:t}=e,n=fne(e,["selector"]);return SA(Object.assign({channel:"x",selector:t},n))};G7.props={};var hne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const W7=(e={})=>{const{selector:t}=e,n=hne(e,["selector"]);return SA(Object.assign({channel:"y",selector:t},n))};W7.props={};var dne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const EE=(e={})=>{const{channels:t=["x","y"]}=e,n=dne(e,["channels"]),r=(i,s)=>$y(t,i,s);return $P(Object.assign(Object.assign({},n),{groupBy:r}))};EE.props={};const Z7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));Z7.props={};const X7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));X7.props={};const Y7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["color"]}));Y7.props={};function pne(e,t,n){return(t.length!==2?Ig(b2(e,t,n),([r,i],[s,l])=>Dc(i,l)||Dc(r,s)):Ig(Mu(e,n),([r,i],[s,l])=>t(i,l)||Dc(r,s))).map(([r])=>r)}var $7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vne(e,t,n){const{by:r=e,reducer:i="max"}=t,[s]=ll(n,r);if(typeof i=="function")return l=>i(l,s);if(i==="max")return l=>vs(l,c=>+s[c]);if(i==="min")return l=>a0(l,c=>+s[c]);if(i==="sum")return l=>ku(l,c=>+s[c]);if(i==="median")return l=>YP(l,c=>+s[c]);if(i==="mean")return l=>mE(l,c=>+s[c]);if(i==="first")return l=>s[l[0]];if(i==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${i}`)}function mne(e,t,n){const{reverse:r,channel:i}=n,{encode:s}=t,[l]=ll(s,i),c=Ig(e,h=>l[h]);return r&&c.reverse(),[c,t]}function gne(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function yne(e,t,n){var r;const{reverse:i,slice:s,channel:l}=n,c=$7(n,["reverse","slice","channel"]),{encode:h,scale:p={}}=t,v=(r=p[l])===null||r===void 0?void 0:r.domain,[y]=ll(h,l),b=vne(l,c,h),T=gne(e,y,v),M=pne(T,b,N=>y[N]);i&&M.reverse();const R=typeof s=="number"?[0,s]:s,I=s?M.slice(...R):M;return[e,Jr(t,{scale:{[l]:{domain:I}}})]}const wA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,s=$7(e,["reverse","slice","channel","ordinal"]);return(l,c)=>i?yne(l,c,Object.assign({reverse:t,slice:n,channel:r},s)):mne(l,c,Object.assign({reverse:t,slice:n,channel:r},s))};wA.props={};const q7=(e={})=>wA(Object.assign(Object.assign({},e),{channel:"x"}));q7.props={};const K7=(e={})=>wA(Object.assign(Object.assign({},e),{channel:"y"}));K7.props={};const Q7=(e={})=>wA(Object.assign(Object.assign({},e),{channel:"color"}));Q7.props={};function _ne(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function bne(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>ku(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const J7=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,s)=>{const{data:l,encode:c}=s,[h]=ll(c,"x"),p=t?_ne(l,t):ll(c,n)[0],v=bne(r,p),y=x2(i,v,b=>h[b]).map(b=>b[1]);return[i,Jr({},s,{scale:{x:{flex:y}}})]}};J7.props={};function xne(e){const{padding:t=0,direction:n="col"}=e;return(r,i,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:c,innerHeight:h}=s,p=h/c;let v=Math.ceil(Math.sqrt(i/p)),y=c/v,b=Math.ceil(i/v),T=b*y;for(;T>h;)v=v+1,y=c/v,b=Math.ceil(i/v),T=b*y;const M=h-b*y,R=b<=1?0:M/(b-1),[I,N]=b<=1?[(c-l*y)/(l-1),(h-y)/2]:[0,0];return r.map((z,H)=>{const[X,Y,ne,ve]=kM(z),ye=n==="col"?H%v:Math.floor(H/b),De=n==="col"?Math.floor(H/v):H%b,Ye=ye*y,Qe=(b-De-1)*y+M,yt=(y-t)/ne,qe=(y-t)/ve,ut=Ye-X+I*ye+1/2*t,ft=Qe-Y-R*De-N+1/2*t;return`translate(${ut}, ${ft}) scale(${yt}, ${qe})`})}}const e9=e=>(t,n)=>[t,Jr({},n,{modifier:xne(e),axis:!1})];e9.props={};function Ene(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const s=T=>t[e[T]]*1,l=T=>n[e[T]]*1,c=[],h=(i-2)/(r-2);let p=0,v,y,b;c.push(p);for(let T=0;T<r-2;T++){let M=0,R=0,I=Math.floor((T+1)*h)+1,N=Math.floor((T+2)*h)+1;N=Math.min(N,i);const z=N-I;for(;I<N;I++)M+=s(I),R+=l(I);M/=z,R/=z;let H=Math.floor((T+0)*h)+1;const X=Math.floor((T+1)*h)+1,Y=[s(p),l(p)];for(v=y=-1;H<X;H++)y=Math.abs((Y[0]-M)*(s(H)-Y[1])-(Y[0]-l(H))*(R-Y[0]))*.5,y>v&&(v=y,b=H);c.push(b),p=b}return c.push(i-1),c.map(T=>e[T])}function Sne(e){if(typeof e=="function")return e;if(e==="lttb")return Ene;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,s)=>[r[hA(r,l=>s[l])]],max:(r,i,s)=>[r[kb(r,l=>s[l])]],median:(r,i,s)=>[r[Gte(r,l=>s[l])]]},n=t[e]||t.median;return(r,i,s,l)=>{const c=Math.max(1,Math.floor(r.length/l));return wne(r,c).flatMap(p=>n(p,i,s))}}function wne(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const t9=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=Sne(t);return(s,l)=>{const{encode:c}=l,h=$y(r,s,l),[p]=ll(c,"x"),[v]=ll(c,"y");return[h.flatMap(y=>i(y,p,v,n)),l]}};t9.props={};function Tne(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}const n9=(e={})=>(t,n)=>{const{encode:r,data:i}=n,s=Object.entries(e).map(([v,y])=>{const[b]=ll(r,v);if(!b)return null;const[T,M=!0]=Tne(y);if(typeof T=="function")return R=>T(b[R]);if(M){const R=Array.isArray(T)?T:[T];return R.length===0?null:I=>R.includes(b[I])}else{const[R,I]=T;return N=>b[N]>=R&&b[N]<=I}}).filter(su);if(s.length===0)return[t,n];const l=v=>s.every(y=>y(v)),c=t.filter(l),h=c.map((v,y)=>y),p=Object.entries(r).map(([v,y])=>[v,Object.assign(Object.assign({},y),{value:h.map(b=>y.value[c[b]]).filter(b=>b!==void 0)})]);return[h,Jr({},n,{encode:Object.fromEntries(p),data:c.map(v=>i[v])})]};n9.props={};var r9={},KP={},QP=34,SE=10,JP=13;function i9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Ane(e,t){var n=i9(e);return function(r,i){return t(n(r),i,e)}}function o9(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Bp(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Cne(e){return e<0?"-"+Bp(-e,6):e>9999?"+"+Bp(e,6):Bp(e,4)}function One(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Cne(e.getUTCFullYear(),4)+"-"+Bp(e.getUTCMonth()+1,2)+"-"+Bp(e.getUTCDate(),2)+(i?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"."+Bp(i,3)+"Z":r?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"Z":n||t?"T"+Bp(t,2)+":"+Bp(n,2)+"Z":"")}function Mne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,b){var T,M,R=i(y,function(I,N){if(T)return T(I,N-1);M=I,T=b?Ane(I,b):i9(I)});return R.columns=M||[],R}function i(y,b){var T=[],M=y.length,R=0,I=0,N,z=M<=0,H=!1;y.charCodeAt(M-1)===SE&&--M,y.charCodeAt(M-1)===JP&&--M;function X(){if(z)return KP;if(H)return H=!1,r9;var ne,ve=R,ye;if(y.charCodeAt(ve)===QP){for(;R++<M&&y.charCodeAt(R)!==QP||y.charCodeAt(++R)===QP;);return(ne=R)>=M?z=!0:(ye=y.charCodeAt(R++))===SE?H=!0:ye===JP&&(H=!0,y.charCodeAt(R)===SE&&++R),y.slice(ve+1,ne-1).replace(/""/g,'"')}for(;R<M;){if((ye=y.charCodeAt(ne=R++))===SE)H=!0;else if(ye===JP)H=!0,y.charCodeAt(R)===SE&&++R;else if(ye!==n)continue;return y.slice(ve,ne)}return z=!0,y.slice(ve,M)}for(;(N=X())!==KP;){for(var Y=[];N!==r9&&N!==KP;)Y.push(N),N=X();b&&(Y=b(Y,I++))==null||T.push(Y)}return T}function s(y,b){return y.map(function(T){return b.map(function(M){return v(T[M])}).join(e)})}function l(y,b){return b==null&&(b=o9(y)),[b.map(v).join(e)].concat(s(y,b)).join(`
`)}function c(y,b){return b==null&&(b=o9(y)),s(y,b).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(v).join(e)}function v(y){return y==null?"":y instanceof Date?One(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:c,formatRows:h,formatRow:p,formatValue:v}}function Rne(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Pne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Pne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Ine=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const a9=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>Ine(void 0,void 0,void 0,function*(){const s=yield fetch(t);if(n==="csv"){const l=yield s.text();return Mne(r).parse(l,i?Rne:Sg)}else if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};a9.props={};const s9=e=>{const{value:t}=e;return()=>t};s9.props={};function Dne(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const l9=e=>{const{fields:t=[]}=e,n=Dne(t,!0);return r=>{const i=(s,l)=>n.reduce((c,[h,p=!0])=>c!==0?c:p?s[h]<l[h]?-1:+(s[h]!==l[h]):s[h]>l[h]?-1:+(s[h]!==l[h]),0);return[...r].sort(i)}};l9.props={};function vpe(e){return e!=null&&!Number.isNaN(e)}const u9=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};u9.props={};function Lne(e){return e!=null&&!Number.isNaN(e)}const c9=e=>{const{callback:t=Lne}=e;return n=>n.filter(t)};c9.props={};function Nne(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const f9=e=>{const{fields:t}=e;return n=>n.map(r=>Nne(r,t))};f9.props={};function Fne(e){return Object.keys(e).length===0}const h9=e=>t=>{if(!e||Fne(e))return t;const n=r=>Object.entries(r).reduce((i,[s,l])=>(i[e[s]||s]=l,i),{});return t.map(n)};h9.props={};function Bne(e){return!e||Object.keys(e).length===0}const d9=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>Bne(t)?i:i.flatMap(s=>t.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};d9.props={};const p9=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};p9.props={};const v9=e=>{const{callback:t=Sg}=e;return n=>t(n)};v9.props={};const m9=e=>{const{callback:t=Sg}=e;return n=>Array.isArray(n)?n.map(t):n};m9.props={};function g9(e){return typeof e=="string"?t=>t[e]:e}const y9=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:s=NaN}=e,[l,c]=n,h=g9(c),p=g9(l),v=b2(t,([y])=>y,y=>h(y));return y=>y.map(b=>{const T=v.get(p(b));return Object.assign(Object.assign({},b),r.reduce((M,R,I)=>(M[i[I]]=T?T[R]:s,M),{}))})};y9.props={};var kne=L(53843),zne=L.n(kne);function mpe(e){return e!=null&&!Number.isNaN(e)}const _9=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:s,size:l=10,width:c}=e,[h,p]=r;return v=>Array.from(Mu(v,b=>n.map(T=>b[T]).join("-")).values()).map(b=>{const T=zne().create(b.map(I=>I[t]),{min:i,max:s,size:l,width:c}),M=T.map(I=>I.x),R=T.map(I=>I.y);return Object.assign(Object.assign({},b[0]),{[h]:M,[p]:R})})};_9.props={};const b9=()=>e=>(console.log("G2 data section:",e),e);b9.props={};var Une=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function jne(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const s=r?r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this},setAsync(n,r,i){return Une(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const s=r?yield r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this})}}}const e5=Math.PI/180,wE=64,TA=2048;function Vne(e){return e.text}function Hne(){return"serif"}function x9(){return"normal"}function Gne(e){return e.value}function Wne(){return~~(Math.random()*2)*90}function Zne(){return 1}function Xne(){}function Yne(e,t,n,r){if(t.sprite)return;const i=e.context,s=e.ratio;i.clearRect(0,0,(wE<<5)/s,TA/s);let l=0,c=0,h=0;const p=n.length;for(--r;++r<p;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;let b=i.measureText(t.text+"m").width*s,T=t.size<<1;if(t.rotate){const M=Math.sin(t.rotate*e5),R=Math.cos(t.rotate*e5),I=b*R,N=b*M,z=T*R,H=T*M;b=Math.max(Math.abs(I+H),Math.abs(I-H))+31>>5<<5,T=~~Math.max(Math.abs(N+z),Math.abs(N-z))}else b=b+31>>5<<5;if(T>h&&(h=T),l+b>=wE<<5&&(l=0,c+=h,h=0),c+T>=TA)break;i.translate((l+(b>>1))/s,(c+(T>>1))/s),t.rotate&&i.rotate(t.rotate*e5),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=b,t.height=T,t.xoff=l,t.yoff=c,t.x1=b>>1,t.y1=T>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=b}const v=i.getImageData(0,0,(wE<<5)/s,TA/s).data,y=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const b=t.width,T=b>>5;let M=t.y1-t.y0;for(let N=0;N<M*T;N++)y[N]=0;if(l=t.xoff,l==null)return;c=t.yoff;let R=0,I=-1;for(let N=0;N<M;N++){for(let z=0;z<b;z++){const H=T*N+(z>>5),X=v[(c+N)*(wE<<5)+(l+z)<<2]?1<<31-z%32:0;y[H]|=X,R|=X}R?I=N:(t.y0++,M--,N--,c++)}t.y1=t.y0+I,t.sprite=y.slice(0,(t.y1-t.y0)*T)}}function $ne(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,s=e.x-(i<<4),l=s&127,c=32-l,h=e.y1-e.y0;let p=(e.y+e.y0)*n+(s>>5),v;for(let y=0;y<h;y++){v=0;for(let b=0;b<=i;b++)if((v<<c|(b<i?(v=r[y*i+b])>>>l:0))&t[p+b])return!0;p+=n}return!1}function qne(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Kne(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function E9(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Qne(e){const n=4*e[0]/e[1];let r=0,i=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function S9(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function Jne(){return document.createElement("canvas")}function Ky(e){return typeof e=="function"?e:function(){return e}}const ere={archimedean:E9,rectangular:Qne};function tre(){let e=[256,256],t=Vne,n=Hne,r=Gne,i=x9,s=Wne,l=Zne,c=E9,h=Math.random,p=Xne,v=[],y=null,b=1/0;const T=x9,M=Jne,R={};R.start=function(){const[z,H]=e,X=I(M()),Y=R.board?R.board:S9((e[0]>>5)*e[1]),ne=v.length,ve=[],ye=v.map(function(yt,qe,ut){return yt.text=t.call(this,yt,qe,ut),yt.font=n.call(this,yt,qe,ut),yt.style=T.call(this,yt,qe,ut),yt.weight=i.call(this,yt,qe,ut),yt.rotate=s.call(this,yt,qe,ut),yt.size=~~r.call(this,yt,qe,ut),yt.padding=l.call(this,yt,qe,ut),yt}).sort(function(yt,qe){return qe.size-yt.size});let De=-1,Ye=R.board?[{x:0,y:0},{x:z,y:H}]:void 0;y&&clearInterval(y),y=setInterval(Qe,0),Qe();function Qe(){const yt=Date.now();for(;Date.now()-yt<b&&++De<ne;){const qe=ye[De];qe.x=z*(h()+.5)>>1,qe.y=H*(h()+.5)>>1,Yne(X,qe,ye,De),qe.hasText&&N(Y,qe,Ye)&&(p.call(null,"word",{cloud:R,word:qe}),ve.push(qe),Ye?R.hasImage||qne(Ye,qe):Ye=[{x:qe.x+qe.x0,y:qe.y+qe.y0},{x:qe.x+qe.x1,y:qe.y+qe.y1}],qe.x-=e[0]>>1,qe.y-=e[1]>>1)}R._tags=ve,R._bounds=Ye,De>=ne&&(R.stop(),p.call(null,"end",{cloud:R,words:ve,bounds:Ye}))}return R},R.stop=function(){return y&&(clearInterval(y),y=null),R};function I(z){z.width=z.height=1;const H=Math.sqrt(z.getContext("2d").getImageData(0,0,1,1).data.length>>2);z.width=(wE<<5)/H,z.height=TA/H;const X=z.getContext("2d");return X.fillStyle=X.strokeStyle="red",X.textAlign="center",X.textBaseline="middle",{context:X,ratio:H}}function N(z,H,X){const Y=H.x,ne=H.y,ve=Math.sqrt(e[0]*e[0]+e[1]*e[1]),ye=c(e),De=h()<.5?1:-1;let Ye,Qe=-De,yt,qe;for(;(Ye=ye(Qe+=De))&&(yt=~~Ye[0],qe=~~Ye[1],!(Math.min(Math.abs(yt),Math.abs(qe))>=ve));)if(H.x=Y+yt,H.y=ne+qe,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>e[0]||H.y+H.y1>e[1])&&(!X||!$ne(H,z,e[0]))&&(!X||Kne(H,X))){const ut=H.sprite,ft=H.width>>5,mt=e[0]>>5,Xt=H.x-(ft<<4),Mt=Xt&127,kt=32-Mt,Tn=H.y1-H.y0;let zn,lr=(H.y+H.y0)*mt+(Xt>>5);for(let ir=0;ir<Tn;ir++){zn=0;for(let Hr=0;Hr<=ft;Hr++)z[lr+Hr]|=zn<<kt|(Hr<ft?(zn=ut[ir*ft+Hr])>>>Mt:0);lr+=mt}return delete H.sprite,!0}return!1}return R.createMask=z=>{const H=document.createElement("canvas"),[X,Y]=e;if(!X||!Y)return;const ne=X>>5,ve=S9((X>>5)*Y);H.width=X,H.height=Y;const ye=H.getContext("2d");ye.drawImage(z,0,0,z.width,z.height,0,0,X,Y);const De=ye.getImageData(0,0,X,Y).data;for(let Ye=0;Ye<Y;Ye++)for(let Qe=0;Qe<X;Qe++){const yt=ne*Ye+(Qe>>5),qe=Ye*X+Qe<<2,ft=De[qe]>=250&&De[qe+1]>=250&&De[qe+2]>=250?1<<31-Qe%32:0;ve[yt]|=ft}R.board=ve,R.hasImage=!0},R.timeInterval=function(z){b=z==null?1/0:z},R.words=function(z){v=z},R.size=function(z=[]){e=[+z[0],+z[1]]},R.text=function(z){t=Ky(z)},R.font=function(z){n=Ky(z)},R.fontWeight=function(z){i=Ky(z)},R.rotate=function(z){s=Ky(z)},R.spiral=function(z){c=ere[z]||z},R.fontSize=function(z){r=Ky(z)},R.padding=function(z){l=Ky(z)},R.random=function(z){h=Ky(z)},R.on=function(z){p=Ky(z)},R}var nre=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},rre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ire={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function ore(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function are(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,s]=t;return s===i?()=>(r+n)/2:({value:l})=>(r-n)/(s-i)*(l-i)+n}return()=>e}const w9=e=>t=>nre(void 0,void 0,void 0,function*(){const n=Object.assign({},ire,e),r=tre();yield jne(r,n).set("fontSize",N=>{const z=t.map(H=>H.value);return are(N,[a0(z),vs(z)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",ore,r.createMask),r.words([...t]);const i=r.start(),[s,l]=n.size,c=[{x:0,y:0},{x:s,y:l}],{_bounds:h=c,_tags:p,hasImage:v}=i,y=p.map(N=>{var{x:z,y:H,font:X}=N,Y=rre(N,["x","y","font"]);return Object.assign(Object.assign({},Y),{x:z+s/2,y:H+l/2,fontFamily:X})}),[{x:b,y:T},{x:M,y:R}]=h,I={text:"",value:0,opacity:0,fontSize:0};return y.push(Object.assign(Object.assign({},I),{x:v?0:b,y:v?0:T}),Object.assign(Object.assign({},I),{x:v?s:M,y:v?l:R})),y});w9.props={};function t5(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function T9(e,t){const[n,r]=e,[i,s]=t;return n>=i[0]&&n<=s[0]&&r>=i[1]&&r<=s[1]}function sre(e,t){const[n,r]=e;return!(T9(n,t)&&T9(r,t))}function lre(e,t){const[n,r]=e,[i,s]=t;return n[0]<s[0]&&r[0]>i[0]&&n[1]<s[1]&&r[1]>i[1]}const ure=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{ST(i);const s=i.getLocalBounds();r.some(c=>lre(t5(s),t5(c.getLocalBounds())))?qM(i):r.push(i)}),n}};function cre([e,t],[n,r]){return r>e&&t>n}function AA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function fre(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const hre=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const s=i.length;if(s<=1)return i;const[l,c]=AA(),[h,p]=AA(),[v,y]=AA(),[b,T]=AA();for(const M of i){const{min:R,max:I}=fre(M),[N,z]=R,[H,X]=I;c(M,z),p(M,z),y(M,X-z),T(M,[N,H])}for(let M=0;M<t;M++){i.sort((I,N)=>Dc(h(I),h(N)));let R=0;for(let I=0;I<s-1;I++){const N=i[I];let z=I+1,H;for(;(H=i[z])&&!cre(b(N),b(H));)z+=1;if(H){const X=h(N),Y=v(N),ne=h(H),ve=ne-(X+Y);if(ve<r){const ye=(r-ve)/2;R=Math.max(R,ye),p(N,X-ye),p(H,ne+ye)}}}if(R<n)break}for(const M of i)M.style.y+=h(M)-l(M);return i}},dre=()=>e=>(e.forEach(t=>{ST(t);const n=t.attr("bounds"),r=t.getLocalBounds();sre(t5(r),n)&&qM(t)}),e);function pre(e){return typeof e=="object"?e:k0(e)}function n5(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function A9(e,t,n){return .2126*n5(e)+.7152*n5(t)+.0722*n5(n)}function C9(e,t){const{r:n,g:r,b:i}=e,{r:s,g:l,b:c}=t,h=A9(n,r,i),p=A9(s,l,c);return(Math.max(h,p)+.05)/(Math.min(h,p)+.05)}function vre(e,t){const n=kb(t,r=>C9(e,pre(r)));return t[n]}const mre=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const s=i.attr("dependentElement").parsedStyle.fill,l=i.parsedStyle.fill;C9(l,s)<t&&i.attr("fill",vre(s,n))}),r)},gre=(e,t)=>{const[[n,r],[i,s]]=t,[[l,c],[h,p]]=e;let v=0,y=0;return l<n?v=n-l:h>i&&(v=i-h),c<r?y=r-c:p>s&&(y=s-p),[v,y]},yre=()=>(e,{canvas:t})=>{const{width:n,height:r}=t.getConfig();return e.forEach(i=>{ST(i);const{max:s,min:l}=i.getRenderBounds(),[c,h]=s,[p,v]=l,y=gre([[p,v],[c,h]],[[0,0],[n,r]]);i.style.x+=y[0],i.style.y+=y[1]}),e};function _re(){return{"data.fetch":a9,"data.inline":s9,"data.sortBy":l9,"data.sort":u9,"data.filter":c9,"data.pick":f9,"data.rename":h9,"data.fold":d9,"data.slice":p9,"data.custom":v9,"data.map":m9,"data.join":y9,"data.kde":_9,"data.log":b9,"data.wordCloud":w9,"transform.stackY":M7,"transform.binX":L7,"transform.bin":qP,"transform.dodgeX":N7,"transform.jitter":F7,"transform.jitterX":B7,"transform.jitterY":k7,"transform.symmetryY":z7,"transform.diffY":U7,"transform.stackEnter":j7,"transform.normalizeY":V7,"transform.select":SA,"transform.selectX":G7,"transform.selectY":W7,"transform.groupX":Z7,"transform.groupY":X7,"transform.groupColor":Y7,"transform.group":EE,"transform.sortX":q7,"transform.sortY":K7,"transform.sortColor":Q7,"transform.flexX":J7,"transform.pack":e9,"transform.sample":t9,"transform.filter":n9,"coordinate.cartesian":oN,"coordinate.polar":X_,"coordinate.transpose":OR,"coordinate.theta":aN,"coordinate.parallel":MR,"coordinate.fisheye":sN,"coordinate.radial":T2,"coordinate.radar":lN,"encode.constant":uN,"encode.field":cN,"encode.transform":fN,"encode.column":hN,"mark.interval":bN,"mark.rect":EN,"mark.line":YN,"mark.point":kF,"mark.text":GF,"mark.cell":ZF,"mark.area":eB,"mark.link":eP,"mark.image":pB,"mark.polygon":_B,"mark.box":SB,"mark.vector":TB,"mark.lineX":MB,"mark.lineY":IB,"mark.connector":FB,"mark.range":zB,"mark.rangeX":VB,"mark.rangeY":WB,"mark.path":qB,"mark.shape":JB,"mark.density":n8,"mark.heatmap":a8,"mark.wordCloud":iP,"palette.category10":s8,"palette.category20":l8,"scale.linear":u8,"scale.ordinal":d8,"scale.band":m8,"scale.identity":g8,"scale.point":y8,"scale.time":U8,"scale.log":V8,"scale.pow":H8,"scale.sqrt":G8,"scale.threshold":W8,"scale.quantile":Z8,"scale.quantize":X8,"scale.sequential":Y8,"scale.constant":$8,"theme.classic":q8,"theme.classicDark":Q8,"theme.academy":J8,"theme.light":pP,"theme.dark":K8,"component.axisX":ek,"component.axisY":tk,"component.legendCategory":mP,"component.legendContinuous":Fy,"component.legends":rk,"component.title":ok,"component.sliderX":uk,"component.sliderY":ck,"component.scrollbarX":fk,"component.scrollbarY":hk,"animation.scaleInX":bP,"animation.scaleOutX":fJ,"animation.scaleInY":dk,"animation.scaleOutY":hJ,"animation.waveIn":pk,"animation.fadeIn":vk,"animation.fadeOut":mk,"animation.zoomIn":dJ,"animation.zoomOut":pJ,"animation.pathIn":gk,"animation.morphing":xk,"animation.growInX":Ek,"animation.growInY":Sk,"interaction.elementHighlight":cA,"interaction.elementHighlightByX":wk,"interaction.elementHighlightByColor":Tk,"interaction.elementSelect":fA,"interaction.elementSelectByX":Ak,"interaction.elementSelectByColor":Ck,"interaction.fisheye":RJ,"interaction.chartIndex":Ok,"interaction.tooltip":jk,"interaction.legendFilter":ree,"interaction.legendHighlight":iee,"interaction.brushHighlight":RP,"interaction.brushXHighlight":cee,"interaction.brushYHighlight":fee,"interaction.brushAxisHighlight":bee,"interaction.brushFilter":LP,"interaction.brushXFilter":wee,"interaction.brushYFilter":Tee,"interaction.sliderFilter":e7,"interaction.scrollbarFilter":Ree,"interaction.poptip":r7,"interaction.treemapDrillDown":Kee,"interaction.elementPointMove":rte,"composition.spaceLayer":y7,"composition.spaceFlex":_7,"composition.facetRect":S7,"composition.repeatMatrix":mte,"composition.facetCircle":Ete,"composition.timingKeyframe":T7,"labelTransform.overlapHide":ure,"labelTransform.overlapDodgeY":hre,"labelTransform.overflowHide":dre,"labelTransform.contrastReverse":mre,"labelTransform.exceedAdjust":yre}}var TE=e=>e;function CA(e,t){e&&M9.hasOwnProperty(e.type)&&M9[e.type](e,t)}var O9={Feature:function(e,t){CA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)CA(n[r].geometry,t)}},M9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){r5(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)r5(n[r],t,0)},Polygon:function(e,t){R9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)R9(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)CA(n[r],t)}};function r5(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function R9(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)r5(e[n],t,1);t.polygonEnd()}function ax(e,t){e&&O9.hasOwnProperty(e.type)?O9[e.type](e,t):CA(e,t)}class Fg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],l=t+s,c=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);c&&(n[r++]=c),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,s=i-(l-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=l+i,i==r-l&&(l=r))}return l}}function gpe(e,t){const n=new Fg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function ype(e,t){const n=new Fg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var Ja=1e-6,P9=1e-12,il=Math.PI,qc=il/2,I9=il/4,l0=il*2,gd=180/il,Lc=il/180,Vl=Math.abs,sx=Math.atan,Bg=Math.atan2,Zs=Math.cos,OA=Math.ceil,D9=Math.exp,_pe=Math.floor,bpe=Math.hypot,MA=Math.log,i5=Math.pow,As=Math.sin,ev=Math.sign||function(e){return e>0?1:e<0?-1:0},kp=Math.sqrt,o5=Math.tan;function L9(e){return e>1?0:e<-1?il:Math.acos(e)}function tv(e){return e>1?qc:e<-1?-qc:Math.asin(e)}function xpe(e){return(e=As(e/2))*e}function nv(){}var a5=new Fg,s5=new Fg,N9,F9,l5,u5,Qy={point:nv,lineStart:nv,lineEnd:nv,polygonStart:function(){Qy.lineStart=bre,Qy.lineEnd=Ere},polygonEnd:function(){Qy.lineStart=Qy.lineEnd=Qy.point=nv,a5.add(Vl(s5)),s5=new Fg},result:function(){var e=a5/2;return a5=new Fg,e}};function bre(){Qy.point=xre}function xre(e,t){Qy.point=B9,N9=l5=e,F9=u5=t}function B9(e,t){s5.add(u5*e-l5*t),l5=e,u5=t}function Ere(){B9(N9,F9)}var k9=Qy,lx=1/0,RA=lx,AE=-lx,PA=AE,Sre={point:wre,lineStart:nv,lineEnd:nv,polygonStart:nv,polygonEnd:nv,result:function(){var e=[[lx,RA],[AE,PA]];return AE=PA=-(RA=lx=1/0),e}};function wre(e,t){e<lx&&(lx=e),e>AE&&(AE=e),t<RA&&(RA=t),t>PA&&(PA=t)}var IA=Sre,c5=0,f5=0,CE=0,DA=0,LA=0,ux=0,h5=0,d5=0,OE=0,z9,U9,Rm,Pm,Nv={point:g1,lineStart:j9,lineEnd:V9,polygonStart:function(){Nv.lineStart=Cre,Nv.lineEnd=Ore},polygonEnd:function(){Nv.point=g1,Nv.lineStart=j9,Nv.lineEnd=V9},result:function(){var e=OE?[h5/OE,d5/OE]:ux?[DA/ux,LA/ux]:CE?[c5/CE,f5/CE]:[NaN,NaN];return c5=f5=CE=DA=LA=ux=h5=d5=OE=0,e}};function g1(e,t){c5+=e,f5+=t,++CE}function j9(){Nv.point=Tre}function Tre(e,t){Nv.point=Are,g1(Rm=e,Pm=t)}function Are(e,t){var n=e-Rm,r=t-Pm,i=kp(n*n+r*r);DA+=i*(Rm+e)/2,LA+=i*(Pm+t)/2,ux+=i,g1(Rm=e,Pm=t)}function V9(){Nv.point=g1}function Cre(){Nv.point=Mre}function Ore(){H9(z9,U9)}function Mre(e,t){Nv.point=H9,g1(z9=Rm=e,U9=Pm=t)}function H9(e,t){var n=e-Rm,r=t-Pm,i=kp(n*n+r*r);DA+=i*(Rm+e)/2,LA+=i*(Pm+t)/2,ux+=i,i=Pm*e-Rm*t,h5+=i*(Rm+e),d5+=i*(Pm+t),OE+=i*3,g1(Rm=e,Pm=t)}var G9=Nv;function W9(e){this._context=e}W9.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,l0);break}}},result:nv};var p5=new Fg,v5,Z9,X9,ME,RE,NA={point:nv,lineStart:function(){NA.point=Rre},lineEnd:function(){v5&&Y9(Z9,X9),NA.point=nv},polygonStart:function(){v5=!0},polygonEnd:function(){v5=null},result:function(){var e=+p5;return p5=new Fg,e}};function Rre(e,t){NA.point=Y9,Z9=ME=e,X9=RE=t}function Y9(e,t){ME-=e,RE-=t,p5.add(kp(ME*ME+RE*RE)),ME=e,RE=t}var $9=NA;let q9,FA,K9,Q9;class J9{constructor(t){this._append=t==null?ez:Pre(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==K9||this._append!==FA){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,K9=r,FA=this._append,Q9=this._,this._=i}this._+=Q9;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ez(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Pre(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return ez;if(t!==q9){const n=vf(10,t);q9=t,FA=function(i){let s=1;this._+=i[0];for(const l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return FA}function tz(e,t){let n=3,r=4.5,i,s;function l(c){return c&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ax(c,i(s))),s.result()}return l.area=function(c){return ax(c,i(k9)),k9.result()},l.measure=function(c){return ax(c,i($9)),$9.result()},l.bounds=function(c){return ax(c,i(IA)),IA.result()},l.centroid=function(c){return ax(c,i(G9)),G9.result()},l.projection=function(c){return arguments.length?(i=c==null?(e=null,TE):(e=c).stream,l):e},l.context=function(c){return arguments.length?(s=c==null?(t=null,new J9(n)):new W9(t=c),typeof r!="function"&&s.pointRadius(r),l):t},l.pointRadius=function(c){return arguments.length?(r=typeof c=="function"?c:(s.pointRadius(+c),+c),l):r},l.digits=function(c){if(!arguments.length)return n;if(c==null)n=null;else{const h=Math.floor(c);if(!(h>=0))throw new RangeError(`invalid digits: ${c}`);n=h}return t===null&&(s=new J9(n)),l},l.projection(e).digits(n).context(t)}function cx(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function nz(e,t,n){var r=cx(e,t-Ja,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function rz(e,t,n){var r=cx(e,t-Ja,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Ire(){var e,t,n,r,i,s,l,c,h=10,p=h,v=90,y=360,b,T,M,R,I=2.5;function N(){return{type:"MultiLineString",coordinates:z()}}function z(){return cx(OA(r/v)*v,n,v).map(M).concat(cx(OA(c/y)*y,l,y).map(R)).concat(cx(OA(t/h)*h,e,h).filter(function(H){return Vl(H%v)>Ja}).map(b)).concat(cx(OA(s/p)*p,i,p).filter(function(H){return Vl(H%y)>Ja}).map(T))}return N.lines=function(){return z().map(function(H){return{type:"LineString",coordinates:H}})},N.outline=function(){return{type:"Polygon",coordinates:[M(r).concat(R(l).slice(1),M(n).reverse().slice(1),R(c).reverse().slice(1))]}},N.extent=function(H){return arguments.length?N.extentMajor(H).extentMinor(H):N.extentMinor()},N.extentMajor=function(H){return arguments.length?(r=+H[0][0],n=+H[1][0],c=+H[0][1],l=+H[1][1],r>n&&(H=r,r=n,n=H),c>l&&(H=c,c=l,l=H),N.precision(I)):[[r,c],[n,l]]},N.extentMinor=function(H){return arguments.length?(t=+H[0][0],e=+H[1][0],s=+H[0][1],i=+H[1][1],t>e&&(H=t,t=e,e=H),s>i&&(H=s,s=i,i=H),N.precision(I)):[[t,s],[e,i]]},N.step=function(H){return arguments.length?N.stepMajor(H).stepMinor(H):N.stepMinor()},N.stepMajor=function(H){return arguments.length?(v=+H[0],y=+H[1],N):[v,y]},N.stepMinor=function(H){return arguments.length?(h=+H[0],p=+H[1],N):[h,p]},N.precision=function(H){return arguments.length?(I=+H,b=nz(s,i,90),T=rz(t,e,I),M=nz(c,l,90),R=rz(r,n,I),N):I},N.extentMajor([[-180,-90+Ja],[180,90-Ja]]).extentMinor([[-180,-80-Ja],[180,80+Ja]])}function Dre(){return Ire()()}function iz(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:nv,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function BA(e,t){return Vl(e[0]-t[0])<Ja&&Vl(e[1]-t[1])<Ja}function kA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function oz(e,t,n,r,i){var s=[],l=[],c,h;if(e.forEach(function(M){if(!((R=M.length-1)<=0)){var R,I=M[0],N=M[R],z;if(BA(I,N)){if(!I[2]&&!N[2]){for(i.lineStart(),c=0;c<R;++c)i.point((I=M[c])[0],I[1]);i.lineEnd();return}N[0]+=2*Ja}s.push(z=new kA(I,M,null,!0)),l.push(z.o=new kA(I,null,z,!1)),s.push(z=new kA(N,M,null,!1)),l.push(z.o=new kA(N,null,z,!0))}}),!!s.length){for(l.sort(t),az(s),az(l),c=0,h=l.length;c<h;++c)l[c].e=n=!n;for(var p=s[0],v,y;;){for(var b=p,T=!0;b.v;)if((b=b.n)===p)return;v=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(T)for(c=0,h=v.length;c<h;++c)i.point((y=v[c])[0],y[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(T)for(v=b.p.z,c=v.length-1;c>=0;--c)i.point((y=v[c])[0],y[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,v=b.z,T=!T}while(!b.v);i.lineEnd()}}}function az(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function m5(e){return[Bg(e[1],e[0]),tv(e[2])]}function fx(e){var t=e[0],n=e[1],r=Zs(n);return[r*Zs(t),r*As(t),As(n)]}function zA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function UA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function g5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function y5(e){var t=kp(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function _5(e){return Vl(e[0])<=il?e[0]:ev(e[0])*((Vl(e[0])+il)%l0-il)}function Lre(e,t){var n=_5(t),r=t[1],i=As(r),s=[As(n),-Zs(n),0],l=0,c=0,h=new Fg;i===1?r=qc+Ja:i===-1&&(r=-qc-Ja);for(var p=0,v=e.length;p<v;++p)if(b=(y=e[p]).length)for(var y,b,T=y[b-1],M=_5(T),R=T[1]/2+I9,I=As(R),N=Zs(R),z=0;z<b;++z,M=X,I=ne,N=ve,T=H){var H=y[z],X=_5(H),Y=H[1]/2+I9,ne=As(Y),ve=Zs(Y),ye=X-M,De=ye>=0?1:-1,Ye=De*ye,Qe=Ye>il,yt=I*ne;if(h.add(Bg(yt*De*As(Ye),N*ve+yt*Zs(Ye))),l+=Qe?ye+De*l0:ye,Qe^M>=n^X>=n){var qe=UA(fx(T),fx(H));y5(qe);var ut=UA(s,qe);y5(ut);var ft=(Qe^ye>=0?-1:1)*tv(ut[2]);(r>ft||r===ft&&(qe[0]||qe[1]))&&(c+=Qe^ye>=0?1:-1)}}return(l<-Ja||l<Ja&&h<-P9)^c&1}function*Nre(e){for(const t of e)yield*_j(t)}function sz(e){return Array.from(Nre(e))}function lz(e,t,n,r){return function(i){var s=t(i),l=iz(),c=t(l),h=!1,p,v,y,b={point:T,lineStart:R,lineEnd:I,polygonStart:function(){b.point=N,b.lineStart=z,b.lineEnd=H,v=[],p=[]},polygonEnd:function(){b.point=T,b.lineStart=R,b.lineEnd=I,v=sz(v);var X=Lre(p,r);v.length?(h||(i.polygonStart(),h=!0),oz(v,Bre,X,n,i)):X&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),v=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function T(X,Y){e(X,Y)&&i.point(X,Y)}function M(X,Y){s.point(X,Y)}function R(){b.point=M,s.lineStart()}function I(){b.point=T,s.lineEnd()}function N(X,Y){y.push([X,Y]),c.point(X,Y)}function z(){c.lineStart(),y=[]}function H(){N(y[0][0],y[0][1]),c.lineEnd();var X=c.clean(),Y=l.result(),ne,ve=Y.length,ye,De,Ye;if(y.pop(),p.push(y),y=null,!!ve){if(X&1){if(De=Y[0],(ye=De.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),ne=0;ne<ye;++ne)i.point((Ye=De[ne])[0],Ye[1]);i.lineEnd()}return}ve>1&&X&2&&Y.push(Y.pop().concat(Y.shift())),v.push(Y.filter(Fre))}}return b}}function Fre(e){return e.length>1}function Bre(e,t){return((e=e.x)[0]<0?e[1]-qc-Ja:qc-e[1])-((t=t.x)[0]<0?t[1]-qc-Ja:qc-t[1])}var uz=lz(function(){return!0},kre,Ure,[-il,-qc]);function kre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,l){var c=s>0?il:-il,h=Vl(s-t);Vl(h-il)<Ja?(e.point(t,n=(n+l)/2>0?qc:-qc),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(s,n),i=0):r!==c&&h>=il&&(Vl(t-r)<Ja&&(t-=r*Ja),Vl(s-c)<Ja&&(s-=c*Ja),n=zre(t,n,s,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),i=0),e.point(t=s,n=l),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function zre(e,t,n,r){var i,s,l=As(e-n);return Vl(l)>Ja?sx((As(t)*(s=Zs(r))*As(n)-As(r)*(i=Zs(t))*As(e))/(i*s*l)):(t+r)/2}function Ure(e,t,n,r){var i;if(e==null)i=n*qc,r.point(-il,i),r.point(0,i),r.point(il,i),r.point(il,0),r.point(il,-i),r.point(0,-i),r.point(-il,-i),r.point(-il,0),r.point(-il,i);else if(Vl(e[0]-t[0])>Ja){var s=e[0]<t[0]?il:-il;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function cz(e,t,n,r,i,s){if(n){var l=Zs(t),c=As(t),h=r*n;i==null?(i=t+r*l0,s=t-h/2):(i=fz(l,i),s=fz(l,s),(r>0?i<s:i>s)&&(i+=r*l0));for(var p,v=i;r>0?v>s:v<s;v-=h)p=m5([l,-c*Zs(v),-c*As(v)]),e.point(p[0],p[1])}}function fz(e,t){t=fx(t),t[0]-=e,y5(t);var n=L9(-t[1]);return((-t[2]<0?-n:n)+l0-Ja)%l0}function Epe(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,s={point:l};function l(h,p){r.push(h=i(h,p)),h[0]*=degrees,h[1]*=degrees}function c(){var h=e.apply(this,arguments),p=t.apply(this,arguments)*radians,v=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,cz(s,p,v,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return c.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant([+h[0],+h[1]]),c):e},c.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant(+h),c):t},c.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant(+h),c):n},c}function jre(e){var t=Zs(e),n=2*Lc,r=t>0,i=Vl(t)>Ja;function s(v,y,b,T){cz(T,e,n,b,v,y)}function l(v,y){return Zs(v)*Zs(y)>t}function c(v){var y,b,T,M,R;return{lineStart:function(){M=T=!1,R=1},point:function(I,N){var z=[I,N],H,X=l(I,N),Y=r?X?0:p(I,N):X?p(I+(I<0?il:-il),N):0;if(!y&&(M=T=X)&&v.lineStart(),X!==T&&(H=h(y,z),(!H||BA(y,H)||BA(z,H))&&(z[2]=1)),X!==T)R=0,X?(v.lineStart(),H=h(z,y),v.point(H[0],H[1])):(H=h(y,z),v.point(H[0],H[1],2),v.lineEnd()),y=H;else if(i&&y&&r^X){var ne;!(Y&b)&&(ne=h(z,y,!0))&&(R=0,r?(v.lineStart(),v.point(ne[0][0],ne[0][1]),v.point(ne[1][0],ne[1][1]),v.lineEnd()):(v.point(ne[1][0],ne[1][1]),v.lineEnd(),v.lineStart(),v.point(ne[0][0],ne[0][1],3)))}X&&(!y||!BA(y,z))&&v.point(z[0],z[1]),y=z,T=X,b=Y},lineEnd:function(){T&&v.lineEnd(),y=null},clean:function(){return R|(M&&T)<<1}}}function h(v,y,b){var T=fx(v),M=fx(y),R=[1,0,0],I=UA(T,M),N=zA(I,I),z=I[0],H=N-z*z;if(!H)return!b&&v;var X=t*N/H,Y=-t*z/H,ne=UA(R,I),ve=jA(R,X),ye=jA(I,Y);g5(ve,ye);var De=ne,Ye=zA(ve,De),Qe=zA(De,De),yt=Ye*Ye-Qe*(zA(ve,ve)-1);if(!(yt<0)){var qe=kp(yt),ut=jA(De,(-Ye-qe)/Qe);if(g5(ut,ve),ut=m5(ut),!b)return ut;var ft=v[0],mt=y[0],Xt=v[1],Mt=y[1],kt;mt<ft&&(kt=ft,ft=mt,mt=kt);var Tn=mt-ft,zn=Vl(Tn-il)<Ja,lr=zn||Tn<Ja;if(!zn&&Mt<Xt&&(kt=Xt,Xt=Mt,Mt=kt),lr?zn?Xt+Mt>0^ut[1]<(Vl(ut[0]-ft)<Ja?Xt:Mt):Xt<=ut[1]&&ut[1]<=Mt:Tn>il^(ft<=ut[0]&&ut[0]<=mt)){var ir=jA(De,(-Ye+qe)/Qe);return g5(ir,ve),[ut,m5(ir)]}}}function p(v,y){var b=r?e:il-e,T=0;return v<-b?T|=1:v>b&&(T|=2),y<-b?T|=4:y>b&&(T|=8),T}return lz(l,c,s,r?[0,-e]:[-il,e-il])}function Vre(e,t,n,r,i,s){var l=e[0],c=e[1],h=t[0],p=t[1],v=0,y=1,b=h-l,T=p-c,M;if(M=n-l,!(!b&&M>0)){if(M/=b,b<0){if(M<v)return;M<y&&(y=M)}else if(b>0){if(M>y)return;M>v&&(v=M)}if(M=i-l,!(!b&&M<0)){if(M/=b,b<0){if(M>y)return;M>v&&(v=M)}else if(b>0){if(M<v)return;M<y&&(y=M)}if(M=r-c,!(!T&&M>0)){if(M/=T,T<0){if(M<v)return;M<y&&(y=M)}else if(T>0){if(M>y)return;M>v&&(v=M)}if(M=s-c,!(!T&&M<0)){if(M/=T,T<0){if(M>y)return;M>v&&(v=M)}else if(T>0){if(M<v)return;M<y&&(y=M)}return v>0&&(e[0]=l+v*b,e[1]=c+v*T),y<1&&(t[0]=l+y*b,t[1]=c+y*T),!0}}}}}var PE=1e9,VA=-PE;function hz(e,t,n,r){function i(p,v){return e<=p&&p<=n&&t<=v&&v<=r}function s(p,v,y,b){var T=0,M=0;if(p==null||(T=l(p,y))!==(M=l(v,y))||h(p,v)<0^y>0)do b.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==M);else b.point(v[0],v[1])}function l(p,v){return Vl(p[0]-e)<Ja?v>0?0:3:Vl(p[0]-n)<Ja?v>0?2:1:Vl(p[1]-t)<Ja?v>0?1:0:v>0?3:2}function c(p,v){return h(p.x,v.x)}function h(p,v){var y=l(p,1),b=l(v,1);return y!==b?y-b:y===0?v[1]-p[1]:y===1?p[0]-v[0]:y===2?p[1]-v[1]:v[0]-p[0]}return function(p){var v=p,y=iz(),b,T,M,R,I,N,z,H,X,Y,ne,ve={point:ye,lineStart:yt,lineEnd:qe,polygonStart:Ye,polygonEnd:Qe};function ye(ft,mt){i(ft,mt)&&v.point(ft,mt)}function De(){for(var ft=0,mt=0,Xt=T.length;mt<Xt;++mt)for(var Mt=T[mt],kt=1,Tn=Mt.length,zn=Mt[0],lr,ir,Hr=zn[0],Ti=zn[1];kt<Tn;++kt)lr=Hr,ir=Ti,zn=Mt[kt],Hr=zn[0],Ti=zn[1],ir<=r?Ti>r&&(Hr-lr)*(r-ir)>(Ti-ir)*(e-lr)&&++ft:Ti<=r&&(Hr-lr)*(r-ir)<(Ti-ir)*(e-lr)&&--ft;return ft}function Ye(){v=y,b=[],T=[],ne=!0}function Qe(){var ft=De(),mt=ne&&ft,Xt=(b=sz(b)).length;(mt||Xt)&&(p.polygonStart(),mt&&(p.lineStart(),s(null,null,1,p),p.lineEnd()),Xt&&oz(b,c,ft,s,p),p.polygonEnd()),v=p,b=T=M=null}function yt(){ve.point=ut,T&&T.push(M=[]),Y=!0,X=!1,z=H=NaN}function qe(){b&&(ut(R,I),N&&X&&y.rejoin(),b.push(y.result())),ve.point=ye,X&&v.lineEnd()}function ut(ft,mt){var Xt=i(ft,mt);if(T&&M.push([ft,mt]),Y)R=ft,I=mt,N=Xt,Y=!1,Xt&&(v.lineStart(),v.point(ft,mt));else if(Xt&&X)v.point(ft,mt);else{var Mt=[z=Math.max(VA,Math.min(PE,z)),H=Math.max(VA,Math.min(PE,H))],kt=[ft=Math.max(VA,Math.min(PE,ft)),mt=Math.max(VA,Math.min(PE,mt))];Vre(Mt,kt,e,t,n,r)?(X||(v.lineStart(),v.point(Mt[0],Mt[1])),v.point(kt[0],kt[1]),Xt||v.lineEnd(),ne=!1):Xt&&(v.lineStart(),v.point(ft,mt),ne=!1)}z=ft,H=mt,X=Xt}return ve}}function b5(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function x5(e,t){return Vl(e)>il&&(e-=Math.round(e/l0)*l0),[e,t]}x5.invert=x5;function dz(e,t,n){return(e%=l0)?t||n?b5(vz(e),mz(t,n)):vz(e):t||n?mz(t,n):x5}function pz(e){return function(t,n){return t+=e,Vl(t)>il&&(t-=Math.round(t/l0)*l0),[t,n]}}function vz(e){var t=pz(e);return t.invert=pz(-e),t}function mz(e,t){var n=Zs(e),r=As(e),i=Zs(t),s=As(t);function l(c,h){var p=Zs(h),v=Zs(c)*p,y=As(c)*p,b=As(h),T=b*n+v*r;return[Bg(y*i-T*s,v*n-b*r),tv(T*i+y*s)]}return l.invert=function(c,h){var p=Zs(h),v=Zs(c)*p,y=As(c)*p,b=As(h),T=b*i-y*s;return[Bg(y*i+b*s,v*n+T*r),tv(T*n-v*r)]},l}function Hre(e){e=dz(e[0]*Lc,e[1]*Lc,e.length>2?e[2]*Lc:0);function t(n){return n=e(n[0]*Lc,n[1]*Lc),n[0]*=gd,n[1]*=gd,n}return t.invert=function(n){return n=e.invert(n[0]*Lc,n[1]*Lc),n[0]*=gd,n[1]*=gd,n},t}function Spe(e){return{stream:IE(e)}}function IE(e){return function(t){var n=new E5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function E5(){}E5.prototype={constructor:E5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function S5(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ax(n,e.stream(IA)),t(IA.result()),r!=null&&e.clipExtent(r),e}function HA(e,t,n){return S5(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),c=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(s-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([c,h])},n)}function w5(e,t,n){return HA(e,[[0,0],t],n)}function T5(e,t,n){return S5(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),l=(i-s*(r[1][0]+r[0][0]))/2,c=-s*r[0][1];e.scale(150*s).translate([l,c])},n)}function A5(e,t,n){return S5(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),l=-s*r[0][0],c=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,c])},n)}var gz=16,Gre=Zs(30*Lc);function yz(e,t){return+t?Zre(e,t):Wre(e)}function Wre(e){return IE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Zre(e,t){function n(r,i,s,l,c,h,p,v,y,b,T,M,R,I){var N=p-r,z=v-i,H=N*N+z*z;if(H>4*t&&R--){var X=l+b,Y=c+T,ne=h+M,ve=kp(X*X+Y*Y+ne*ne),ye=tv(ne/=ve),De=Vl(Vl(ne)-1)<Ja||Vl(s-y)<Ja?(s+y)/2:Bg(Y,X),Ye=e(De,ye),Qe=Ye[0],yt=Ye[1],qe=Qe-r,ut=yt-i,ft=z*qe-N*ut;(ft*ft/H>t||Vl((N*qe+z*ut)/H-.5)>.3||l*b+c*T+h*M<Gre)&&(n(r,i,s,l,c,h,Qe,yt,De,X/=ve,Y/=ve,ne,R,I),I.point(Qe,yt),n(Qe,yt,De,X,Y,ne,p,v,y,b,T,M,R,I))}}return function(r){var i,s,l,c,h,p,v,y,b,T,M,R,I={point:N,lineStart:z,lineEnd:X,polygonStart:function(){r.polygonStart(),I.lineStart=Y},polygonEnd:function(){r.polygonEnd(),I.lineStart=z}};function N(ye,De){ye=e(ye,De),r.point(ye[0],ye[1])}function z(){y=NaN,I.point=H,r.lineStart()}function H(ye,De){var Ye=fx([ye,De]),Qe=e(ye,De);n(y,b,v,T,M,R,y=Qe[0],b=Qe[1],v=ye,T=Ye[0],M=Ye[1],R=Ye[2],gz,r),r.point(y,b)}function X(){I.point=N,r.lineEnd()}function Y(){z(),I.point=ne,I.lineEnd=ve}function ne(ye,De){H(i=ye,De),s=y,l=b,c=T,h=M,p=R,I.point=H}function ve(){n(y,b,v,T,M,R,s,l,i,c,h,p,gz,r),I.lineEnd=X,X()}return I}}var Xre=IE({point:function(e,t){this.stream.point(e*Lc,t*Lc)}});function Yre(e){return IE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function $re(e,t,n,r,i){function s(l,c){return l*=r,c*=i,[t+e*l,n-e*c]}return s.invert=function(l,c){return[(l-t)/e*r,(n-c)/e*i]},s}function _z(e,t,n,r,i,s){if(!s)return $re(e,t,n,r,i);var l=Zs(s),c=As(s),h=l*e,p=c*e,v=l/e,y=c/e,b=(c*n-l*t)/e,T=(c*t+l*n)/e;function M(R,I){return R*=r,I*=i,[h*R-p*I+t,n-p*R-h*I]}return M.invert=function(R,I){return[r*(v*R-y*I+b),i*(T-y*R-v*I)]},M}function Im(e){return C5(function(){return e})()}function C5(e){var t,n=150,r=480,i=250,s=0,l=0,c=0,h=0,p=0,v,y=0,b=1,T=1,M=null,R=uz,I=null,N,z,H,X=TE,Y=.5,ne,ve,ye,De,Ye;function Qe(ft){return ye(ft[0]*Lc,ft[1]*Lc)}function yt(ft){return ft=ye.invert(ft[0],ft[1]),ft&&[ft[0]*gd,ft[1]*gd]}Qe.stream=function(ft){return De&&Ye===ft?De:De=Xre(Yre(v)(R(ne(X(Ye=ft)))))},Qe.preclip=function(ft){return arguments.length?(R=ft,M=void 0,ut()):R},Qe.postclip=function(ft){return arguments.length?(X=ft,I=N=z=H=null,ut()):X},Qe.clipAngle=function(ft){return arguments.length?(R=+ft?jre(M=ft*Lc):(M=null,uz),ut()):M*gd},Qe.clipExtent=function(ft){return arguments.length?(X=ft==null?(I=N=z=H=null,TE):hz(I=+ft[0][0],N=+ft[0][1],z=+ft[1][0],H=+ft[1][1]),ut()):I==null?null:[[I,N],[z,H]]},Qe.scale=function(ft){return arguments.length?(n=+ft,qe()):n},Qe.translate=function(ft){return arguments.length?(r=+ft[0],i=+ft[1],qe()):[r,i]},Qe.center=function(ft){return arguments.length?(s=ft[0]%360*Lc,l=ft[1]%360*Lc,qe()):[s*gd,l*gd]},Qe.rotate=function(ft){return arguments.length?(c=ft[0]%360*Lc,h=ft[1]%360*Lc,p=ft.length>2?ft[2]%360*Lc:0,qe()):[c*gd,h*gd,p*gd]},Qe.angle=function(ft){return arguments.length?(y=ft%360*Lc,qe()):y*gd},Qe.reflectX=function(ft){return arguments.length?(b=ft?-1:1,qe()):b<0},Qe.reflectY=function(ft){return arguments.length?(T=ft?-1:1,qe()):T<0},Qe.precision=function(ft){return arguments.length?(ne=yz(ve,Y=ft*ft),ut()):kp(Y)},Qe.fitExtent=function(ft,mt){return HA(Qe,ft,mt)},Qe.fitSize=function(ft,mt){return w5(Qe,ft,mt)},Qe.fitWidth=function(ft,mt){return T5(Qe,ft,mt)},Qe.fitHeight=function(ft,mt){return A5(Qe,ft,mt)};function qe(){var ft=_z(n,0,0,b,T,y).apply(null,t(s,l)),mt=_z(n,r-ft[0],i-ft[1],b,T,y);return v=dz(c,h,p),ve=b5(t,mt),ye=b5(v,ve),ne=yz(ve,Y),ut()}function ut(){return De=Ye=null,Qe}return function(){return t=e.apply(this,arguments),Qe.invert=t.invert&&yt,qe()}}function O5(e){var t=0,n=il/3,r=C5(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Lc,n=s[1]*Lc):[t*gd,n*gd]},i}function qre(e){var t=Zs(e);function n(r,i){return[r*t,As(i)/t]}return n.invert=function(r,i){return[r/t,tv(i*t)]},n}function bz(e,t){var n=As(e),r=(n+As(t))/2;if(Vl(r)<Ja)return qre(e);var i=1+n*(2*r-n),s=kp(i)/r;function l(c,h){var p=kp(i-2*r*As(h))/r;return[p*As(c*=r),s-p*Zs(c)]}return l.invert=function(c,h){var p=s-h,v=Bg(c,Vl(p))*ev(p);return p*r<0&&(v-=il*ev(c)*ev(p)),[v/r,tv((i-(c*c+p*p)*r*r)/(2*r))]},l}function GA(){return O5(bz).scale(155.424).center([0,33.6442])}function xz(){return GA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Kre(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Qre(){var e,t,n=xz(),r,i=GA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=GA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,h,p={point:function(b,T){h=[b,T]}};function v(b){var T=b[0],M=b[1];return h=null,r.point(T,M),h||(s.point(T,M),h)||(c.point(T,M),h)}v.invert=function(b){var T=n.scale(),M=n.translate(),R=(b[0]-M[0])/T,I=(b[1]-M[1])/T;return(I>=.12&&I<.234&&R>=-.425&&R<-.214?i:I>=.166&&I<.234&&R>=-.214&&R<-.115?l:n).invert(b)},v.stream=function(b){return e&&t===b?e:e=Kre([n.stream(t=b),i.stream(b),l.stream(b)])},v.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),y()):n.precision()},v.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),v.translate(n.translate())):n.scale()},v.translate=function(b){if(!arguments.length)return n.translate();var T=n.scale(),M=+b[0],R=+b[1];return r=n.translate(b).clipExtent([[M-.455*T,R-.238*T],[M+.455*T,R+.238*T]]).stream(p),s=i.translate([M-.307*T,R+.201*T]).clipExtent([[M-.425*T+Ja,R+.12*T+Ja],[M-.214*T-Ja,R+.234*T-Ja]]).stream(p),c=l.translate([M-.205*T,R+.212*T]).clipExtent([[M-.214*T+Ja,R+.166*T+Ja],[M-.115*T-Ja,R+.234*T-Ja]]).stream(p),y()},v.fitExtent=function(b,T){return HA(v,b,T)},v.fitSize=function(b,T){return w5(v,b,T)},v.fitWidth=function(b,T){return T5(v,b,T)},v.fitHeight=function(b,T){return A5(v,b,T)};function y(){return e=t=null,v}return v.scale(1070)}function Ez(e){return function(t,n){var r=Zs(t),i=Zs(n),s=e(r*i);return s===1/0?[2,0]:[s*i*As(t),s*As(n)]}}function DE(e){return function(t,n){var r=kp(t*t+n*n),i=e(r),s=As(i),l=Zs(i);return[Bg(t*s,r*l),tv(r&&n*s/r)]}}var M5=Ez(function(e){return kp(2/(1+e))});M5.invert=DE(function(e){return 2*tv(e/2)});function Jre(){return Im(M5).scale(124.75).clipAngle(180-.001)}var R5=Ez(function(e){return(e=L9(e))&&e/As(e)});R5.invert=DE(function(e){return e});function eie(){return Im(R5).scale(79.4188).clipAngle(180-.001)}function LE(e,t){return[e,MA(o5((qc+t)/2))]}LE.invert=function(e,t){return[e,2*sx(D9(t))-qc]};function tie(){return Sz(LE).scale(961/l0)}function Sz(e){var t=Im(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,l=null,c,h,p;t.scale=function(y){return arguments.length?(r(y),v()):r()},t.translate=function(y){return arguments.length?(i(y),v()):i()},t.center=function(y){return arguments.length?(n(y),v()):n()},t.clipExtent=function(y){return arguments.length?(y==null?l=c=h=p=null:(l=+y[0][0],c=+y[0][1],h=+y[1][0],p=+y[1][1]),v()):l==null?null:[[l,c],[h,p]]};function v(){var y=il*r(),b=t(Hre(t.rotate()).invert([0,0]));return s(l==null?[[b[0]-y,b[1]-y],[b[0]+y,b[1]+y]]:e===LE?[[Math.max(b[0]-y,l),c],[Math.min(b[0]+y,h),p]]:[[l,Math.max(b[1]-y,c)],[h,Math.min(b[1]+y,p)]])}return v()}function WA(e){return o5((qc+e)/2)}function wz(e,t){var n=Zs(e),r=e===t?As(e):MA(n/Zs(t))/MA(WA(t)/WA(e)),i=n*i5(WA(e),r)/r;if(!r)return LE;function s(l,c){i>0?c<-qc+Ja&&(c=-qc+Ja):c>qc-Ja&&(c=qc-Ja);var h=i/i5(WA(c),r);return[h*As(r*l),i-h*Zs(r*l)]}return s.invert=function(l,c){var h=i-c,p=ev(r)*kp(l*l+h*h),v=Bg(l,Vl(h))*ev(h);return h*r<0&&(v-=il*ev(l)*ev(h)),[v/r,2*sx(i5(i/p,1/r))-qc]},s}function nie(){return O5(wz).scale(109.5).parallels([30,30])}function NE(e,t){return[e,t]}NE.invert=NE;function rie(){return Im(NE).scale(152.63)}function Tz(e,t){var n=Zs(e),r=e===t?As(e):(n-Zs(t))/(t-e),i=n/r+e;if(Vl(r)<Ja)return NE;function s(l,c){var h=i-c,p=r*l;return[h*As(p),i-h*Zs(p)]}return s.invert=function(l,c){var h=i-c,p=Bg(l,Vl(h))*ev(h);return h*r<0&&(p-=il*ev(l)*ev(h)),[p/r,i-ev(r)*kp(l*l+h*h)]},s}function iie(){return O5(Tz).scale(131.154).center([0,13.9389])}var FE=1.340264,BE=-.081106,kE=893e-6,zE=.003796,ZA=kp(3)/2,oie=12;function P5(e,t){var n=tv(ZA*As(t)),r=n*n,i=r*r*r;return[e*Zs(n)/(ZA*(FE+3*BE*r+i*(7*kE+9*zE*r))),n*(FE+BE*r+i*(kE+zE*r))]}P5.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,l,c,h;s<oie&&(c=n*(FE+BE*r+i*(kE+zE*r))-t,h=FE+3*BE*r+i*(7*kE+9*zE*r),n-=l=c/h,r=n*n,i=r*r*r,!(Vl(l)<P9));++s);return[ZA*e*(FE+3*BE*r+i*(7*kE+9*zE*r))/Zs(n),tv(As(n)/ZA)]};function aie(){return Im(P5).scale(177.158)}function I5(e,t){var n=Zs(t),r=Zs(e)*n;return[n*As(e)/r,As(t)/r]}I5.invert=DE(sx);function sie(){return Im(I5).scale(144.049).clipAngle(60)}function lie(){var e=1,t=0,n=0,r=1,i=1,s=0,l,c,h=null,p,v,y,b=1,T=1,M=IE({point:function(X,Y){var ne=H([X,Y]);this.stream.point(ne[0],ne[1])}}),R=TE,I,N;function z(){return b=e*r,T=e*i,I=N=null,H}function H(X){var Y=X[0]*b,ne=X[1]*T;if(s){var ve=ne*l-Y*c;Y=Y*l+ne*c,ne=ve}return[Y+t,ne+n]}return H.invert=function(X){var Y=X[0]-t,ne=X[1]-n;if(s){var ve=ne*l+Y*c;Y=Y*l-ne*c,ne=ve}return[Y/b,ne/T]},H.stream=function(X){return I&&N===X?I:I=M(R(N=X))},H.postclip=function(X){return arguments.length?(R=X,h=p=v=y=null,z()):R},H.clipExtent=function(X){return arguments.length?(R=X==null?(h=p=v=y=null,TE):hz(h=+X[0][0],p=+X[0][1],v=+X[1][0],y=+X[1][1]),z()):h==null?null:[[h,p],[v,y]]},H.scale=function(X){return arguments.length?(e=+X,z()):e},H.translate=function(X){return arguments.length?(t=+X[0],n=+X[1],z()):[t,n]},H.angle=function(X){return arguments.length?(s=X%360*Lc,c=As(s),l=Zs(s),z()):s*gd},H.reflectX=function(X){return arguments.length?(r=X?-1:1,z()):r<0},H.reflectY=function(X){return arguments.length?(i=X?-1:1,z()):i<0},H.fitExtent=function(X,Y){return HA(H,X,Y)},H.fitSize=function(X,Y){return w5(H,X,Y)},H.fitWidth=function(X,Y){return T5(H,X,Y)},H.fitHeight=function(X,Y){return A5(H,X,Y)},H}function D5(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}D5.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,l=s*s;n-=i=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-t)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(Vl(i)>Ja&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function uie(){return Im(D5).scale(175.295)}function L5(e,t){return[Zs(t)*As(e),As(t)]}L5.invert=DE(tv);function cie(){return Im(L5).scale(249.5).clipAngle(90+Ja)}function N5(e,t){var n=Zs(t),r=1+Zs(e)*n;return[n*As(e)/r,As(t)/r]}N5.invert=DE(function(e){return 2*sx(e)});function fie(){return Im(N5).scale(250).clipAngle(142)}function F5(e,t){return[MA(o5((qc+t)/2)),-e]}F5.invert=function(e,t){return[-t,2*sx(D9(e))-qc]};function hie(){var e=Sz(F5),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var die=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pie(e){if(typeof e=="function")return e;const t=`geo${mm(e)}`,n=E[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function vie(e){return{type:"FeatureCollection",features:e.flatMap(t=>mie(t).features)}}function mie(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function gie(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function yie(e,t,n,r){const i=()=>{const c=t.filter(Az);return c.find(p=>p.sphere)?{type:"Sphere"}:vie(c.filter(p=>!p.sphere).flatMap(p=>p.data.value))},{outline:s=i()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return _ie(e,s,n);if(l==="fitWidth")return bie(e,s,n)}function _ie(e,t,n){const{x:r,y:i,width:s,height:l}=n;e.fitExtent([[r,i],[s,l]],t)}function bie(e,t,n){const{width:r,height:i}=n,[[s,l],[c,h]]=tz(e.fitWidth(r,t)).bounds(t),p=Math.ceil(h-l),v=Math.min(Math.ceil(c-s),p),y=e.scale()*(v-1)/v,[b,T]=e.translate(),M=T+(i-p)/2;e.scale(y).translate([b,M]).precision(.2)}function xie(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[Dre()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function Az(e){return e.type==="geoPath"}const Cz=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=die(n,["type"]),s=pie(r),l=t.map(xie);let c;function h(){return[["custom",(y,b,T,M)=>{const R=s();yie(R,l,{x:y,y:b,width:T,height:M},i),gie(R,i),c=tz(R);const N=new hd({domain:[y,y+T]}),z=new hd({domain:[b,b+M]}),H=Y=>{const ne=R(Y);if(!ne)return[null,null];const[ve,ye]=ne;return[N.map(ve),z.map(ye)]},X=Y=>{if(!Y)return null;const[ne,ve]=Y,ye=[N.invert(ne),z.invert(ve)];return R.invert(ye)};return{transform:Y=>H(Y),untransform:Y=>X(Y)}}]]}function p(y){const{style:b,tooltip:T={}}=y;return Object.assign(Object.assign({},y),{type:"path",tooltip:zT(T,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},b),{d:M=>c(M)||[]})})}const v=y=>Az(y)?p(y):y;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:h},children:l.flatMap(v)})]};Cz.props={};var Eie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Oz=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:s,animate:l,key:c,state:h}=e,p=Eie(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${c}-0`,data:{value:n},scale:r,encode:i,style:s,animate:l,state:h}]})]};Oz.props={};function Sie(){return{"composition.geoView":Cz,"composition.geoPath":Oz}}function wie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Mz(this.cover(t,n),t,n,e)}function Mz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,l={data:r},c=e._x0,h=e._y0,p=e._x1,v=e._y1,y,b,T,M,R,I,N,z;if(!s)return e._root=l,e;for(;s.length;)if((R=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b,i=s,!(s=s[N=I<<1|R]))return i[N]=l,e;if(T=+e._x.call(null,s.data),M=+e._y.call(null,s.data),t===T&&n===M)return l.next=s,i?i[N]=l:e._root=l,e;do i=i?i[N]=new Array(4):e._root=new Array(4),(R=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b;while((N=I<<1|R)===(z=(M>=b)<<1|T>=y));return i[z]=s,i[N]=l,e}function Tie(e){var t,n,r=e.length,i,s,l=new Array(r),c=new Array(r),h=1/0,p=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(l[n]=i,c[n]=s,i<h&&(h=i),i>v&&(v=i),s<p&&(p=s),s>y&&(y=s));if(h>v||p>y)return this;for(this.cover(h,p).cover(v,y),n=0;n<r;++n)Mz(this,l[n],c[n],e[n]);return this}function Aie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var l=i-n||1,c=this._root,h,p;n>e||e>=i||r>t||t>=s;)switch(p=(t<r)<<1|e<n,h=new Array(4),h[p]=c,c=h,l*=2,p){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Cie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Oie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Jd(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Mie(e,t,n){var r,i=this._x0,s=this._y0,l,c,h,p,v=this._x1,y=this._y1,b=[],T=this._root,M,R;for(T&&b.push(new Jd(T,i,s,v,y)),n==null?n=1/0:(i=e-n,s=t-n,v=e+n,y=t+n,n*=n);M=b.pop();)if(!(!(T=M.node)||(l=M.x0)>v||(c=M.y0)>y||(h=M.x1)<i||(p=M.y1)<s))if(T.length){var I=(l+h)/2,N=(c+p)/2;b.push(new Jd(T[3],I,N,h,p),new Jd(T[2],l,N,I,p),new Jd(T[1],I,c,h,N),new Jd(T[0],l,c,I,N)),(R=(t>=N)<<1|e>=I)&&(M=b[b.length-1],b[b.length-1]=b[b.length-1-R],b[b.length-1-R]=M)}else{var z=e-+this._x.call(null,T.data),H=t-+this._y.call(null,T.data),X=z*z+H*H;if(X<n){var Y=Math.sqrt(n=X);i=e-Y,s=t-Y,v=e+Y,y=t+Y,r=T.data}}return r}function Rie(e){if(isNaN(v=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,l=this._x0,c=this._y0,h=this._x1,p=this._y1,v,y,b,T,M,R,I,N;if(!n)return this;if(n.length)for(;;){if((M=v>=(b=(l+h)/2))?l=b:h=b,(R=y>=(T=(c+p)/2))?c=T:p=T,t=n,!(n=n[I=R<<1|M]))return this;if(!n.length)break;(t[I+1&3]||t[I+2&3]||t[I+3&3])&&(r=t,N=I)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[I]=s:delete t[I],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[N]=n:this._root=n),this):(this._root=s,this)}function Pie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Iie(){return this._root}function Die(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Lie(e){var t=[],n,r=this._root,i,s,l,c,h;for(r&&t.push(new Jd(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,l=n.y0,c=n.x1,h=n.y1)&&r.length){var p=(s+c)/2,v=(l+h)/2;(i=r[3])&&t.push(new Jd(i,p,v,c,h)),(i=r[2])&&t.push(new Jd(i,s,v,p,h)),(i=r[1])&&t.push(new Jd(i,p,l,c,v)),(i=r[0])&&t.push(new Jd(i,s,l,p,v))}return this}function Nie(e){var t=[],n=[],r;for(this._root&&t.push(new Jd(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,l=r.x0,c=r.y0,h=r.x1,p=r.y1,v=(l+h)/2,y=(c+p)/2;(s=i[0])&&t.push(new Jd(s,l,c,v,y)),(s=i[1])&&t.push(new Jd(s,v,c,h,y)),(s=i[2])&&t.push(new Jd(s,l,y,v,p)),(s=i[3])&&t.push(new Jd(s,v,y,h,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Fie(e){return e[0]}function Bie(e){return arguments.length?(this._x=e,this):this._x}function kie(e){return e[1]}function zie(e){return arguments.length?(this._y=e,this):this._y}function Rz(e,t,n){var r=new B5(t==null?Fie:t,n==null?kie:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function B5(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Pz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ep=Rz.prototype=B5.prototype;ep.copy=function(){var e=new B5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Pz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Pz(r));return e},ep.add=wie,ep.addAll=Tie,ep.cover=Aie,ep.data=Cie,ep.extent=Oie,ep.find=Mie,ep.remove=Rie,ep.removeAll=Pie,ep.root=Iie,ep.size=Die,ep.visit=Lie,ep.visitAfter=Nie,ep.x=Bie,ep.y=zie;function u0(e){return function(){return e}}function hx(e){return(e()-.5)*1e-6}var Uie={value:function(){}};function Iz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new XA(n)}function XA(e){this._=e}function jie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}XA.prototype=Iz.prototype={constructor:XA,on:function(t,n){var r=this._,i=jie(t+"",r),s,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((s=(t=i[l]).type)&&(s=Vie(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<c;)if(s=(t=i[l]).type)r[s]=Dz(r[s],t.name,n);else if(n==null)for(s in r)r[s]=Dz(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new XA(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,l;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,s=l.length;i<s;++i)l[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(n,r)}};function Vie(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Dz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Uie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hie=Iz,dx=0,UE=0,jE=0,Lz=1e3,YA,VE,$A=0,y1=0,qA=0,HE=typeof performance=="object"&&performance.now?performance:Date,Nz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fz(){return y1||(Nz(Gie),y1=HE.now()+qA)}function Gie(){y1=0}function k5(){this._call=this._time=this._next=null}k5.prototype=Bz.prototype={constructor:k5,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fz():+n)+(t==null?0:+t),!this._next&&VE!==this&&(VE?VE._next=this:YA=this,VE=this),this._call=e,this._time=n,z5()},stop:function(){this._call&&(this._call=null,this._time=1/0,z5())}};function Bz(e,t,n){var r=new k5;return r.restart(e,t,n),r}function Wie(){Fz(),++dx;for(var e=YA,t;e;)(t=y1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--dx}function kz(){y1=($A=HE.now())+qA,dx=UE=0;try{Wie()}finally{dx=0,Xie(),y1=0}}function Zie(){var e=HE.now(),t=e-$A;t>Lz&&(qA-=t,$A=e)}function Xie(){for(var e,t=YA,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:YA=n);VE=e,z5(r)}function z5(e){if(!dx){UE&&(UE=clearTimeout(UE));var t=e-y1;t>24?(e<1/0&&(UE=setTimeout(kz,e-HE.now()-qA)),jE&&(jE=clearInterval(jE))):(jE||($A=HE.now(),jE=setInterval(Zie,Lz)),dx=1,Nz(kz))}}const Yie=1664525,$ie=1013904223,zz=4294967296;function qie(){let e=1;return()=>(e=(Yie*e+$ie)%zz)/zz}function Kie(e){return e.x}function Qie(e){return e.y}var Jie=10,eoe=Math.PI*(3-Math.sqrt(5));function toe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,l=.6,c=new Map,h=Bz(y),p=Hie("tick","end"),v=qie();e==null&&(e=[]);function y(){b(),p.call("tick",t),n<r&&(h.stop(),p.call("end",t))}function b(R){var I,N=e.length,z;R===void 0&&(R=1);for(var H=0;H<R;++H)for(n+=(s-n)*i,c.forEach(function(X){X(n)}),I=0;I<N;++I)z=e[I],z.fx==null?z.x+=z.vx*=l:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=l:(z.y=z.fy,z.vy=0);return t}function T(){for(var R=0,I=e.length,N;R<I;++R){if(N=e[R],N.index=R,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var z=Jie*Math.sqrt(.5+R),H=R*eoe;N.x=z*Math.cos(H),N.y=z*Math.sin(H)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function M(R){return R.initialize&&R.initialize(e,v),R}return T(),t={tick:b,restart:function(){return h.restart(y),t},stop:function(){return h.stop(),t},nodes:function(R){return arguments.length?(e=R,T(),c.forEach(M),t):e},alpha:function(R){return arguments.length?(n=+R,t):n},alphaMin:function(R){return arguments.length?(r=+R,t):r},alphaDecay:function(R){return arguments.length?(i=+R,t):+i},alphaTarget:function(R){return arguments.length?(s=+R,t):s},velocityDecay:function(R){return arguments.length?(l=1-R,t):1-l},randomSource:function(R){return arguments.length?(v=R,c.forEach(M),t):v},force:function(R,I){return arguments.length>1?(I==null?c.delete(R):c.set(R,M(I)),t):c.get(R)},find:function(R,I,N){var z=0,H=e.length,X,Y,ne,ve,ye;for(N==null?N=1/0:N*=N,z=0;z<H;++z)ve=e[z],X=R-ve.x,Y=I-ve.y,ne=X*X+Y*Y,ne<N&&(ye=ve,N=ne);return ye},on:function(R,I){return arguments.length>1?(p.on(R,I),t):p.on(R)}}}function noe(){var e,t,n,r,i=u0(-30),s,l=1,c=1/0,h=.81;function p(T){var M,R=e.length,I=Rz(e,Kie,Qie).visitAfter(y);for(r=T,M=0;M<R;++M)t=e[M],I.visit(b)}function v(){if(e){var T,M=e.length,R;for(s=new Array(M),T=0;T<M;++T)R=e[T],s[R.index]=+i(R,T,e)}}function y(T){var M=0,R,I,N=0,z,H,X;if(T.length){for(z=H=X=0;X<4;++X)(R=T[X])&&(I=Math.abs(R.value))&&(M+=R.value,N+=I,z+=I*R.x,H+=I*R.y);T.x=z/N,T.y=H/N}else{R=T,R.x=R.data.x,R.y=R.data.y;do M+=s[R.data.index];while(R=R.next)}T.value=M}function b(T,M,R,I){if(!T.value)return!0;var N=T.x-t.x,z=T.y-t.y,H=I-M,X=N*N+z*z;if(H*H/h<X)return X<c&&(N===0&&(N=hx(n),X+=N*N),z===0&&(z=hx(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)),t.vx+=N*T.value*r/X,t.vy+=z*T.value*r/X),!0;if(T.length||X>=c)return;(T.data!==t||T.next)&&(N===0&&(N=hx(n),X+=N*N),z===0&&(z=hx(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)));do T.data!==t&&(H=s[T.data.index]*r/X,t.vx+=N*H,t.vy+=z*H);while(T=T.next)}return p.initialize=function(T,M){e=T,n=M,v()},p.strength=function(T){return arguments.length?(i=typeof T=="function"?T:u0(+T),v(),p):i},p.distanceMin=function(T){return arguments.length?(l=T*T,p):Math.sqrt(l)},p.distanceMax=function(T){return arguments.length?(c=T*T,p):Math.sqrt(c)},p.theta=function(T){return arguments.length?(h=T*T,p):Math.sqrt(h)},p}function roe(e){return e.index}function Uz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ioe(e){var t=roe,n=y,r,i=u0(30),s,l,c,h,p,v=1;e==null&&(e=[]);function y(I){return 1/Math.min(c[I.source.index],c[I.target.index])}function b(I){for(var N=0,z=e.length;N<v;++N)for(var H=0,X,Y,ne,ve,ye,De,Ye;H<z;++H)X=e[H],Y=X.source,ne=X.target,ve=ne.x+ne.vx-Y.x-Y.vx||hx(p),ye=ne.y+ne.vy-Y.y-Y.vy||hx(p),De=Math.sqrt(ve*ve+ye*ye),De=(De-s[H])/De*I*r[H],ve*=De,ye*=De,ne.vx-=ve*(Ye=h[H]),ne.vy-=ye*Ye,Y.vx+=ve*(Ye=1-Ye),Y.vy+=ye*Ye}function T(){if(l){var I,N=l.length,z=e.length,H=new Map(l.map((Y,ne)=>[t(Y,ne,l),Y])),X;for(I=0,c=new Array(N);I<z;++I)X=e[I],X.index=I,typeof X.source!="object"&&(X.source=Uz(H,X.source)),typeof X.target!="object"&&(X.target=Uz(H,X.target)),c[X.source.index]=(c[X.source.index]||0)+1,c[X.target.index]=(c[X.target.index]||0)+1;for(I=0,h=new Array(z);I<z;++I)X=e[I],h[I]=c[X.source.index]/(c[X.source.index]+c[X.target.index]);r=new Array(z),M(),s=new Array(z),R()}}function M(){if(l)for(var I=0,N=e.length;I<N;++I)r[I]=+n(e[I],I,e)}function R(){if(l)for(var I=0,N=e.length;I<N;++I)s[I]=+i(e[I],I,e)}return b.initialize=function(I,N){l=I,p=N,T()},b.links=function(I){return arguments.length?(e=I,T(),b):e},b.id=function(I){return arguments.length?(t=I,b):t},b.iterations=function(I){return arguments.length?(v=+I,b):v},b.strength=function(I){return arguments.length?(n=typeof I=="function"?I:u0(+I),M(),b):n},b.distance=function(I){return arguments.length?(i=typeof I=="function"?I:u0(+I),R(),b):i},b}function ooe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,l=n.length,c,h=0,p=0;for(s=0;s<l;++s)c=n[s],h+=c.x,p+=c.y;for(h=(h/l-e)*r,p=(p/l-t)*r,s=0;s<l;++s)c=n[s],c.x-=h,c.y-=p}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function aoe(e){var t=u0(.1),n,r,i;typeof e!="function"&&(e=u0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vx+=(i[h]-v.x)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:u0(+c),l(),s):t},s.x=function(c){return arguments.length?(e=typeof c=="function"?c:u0(+c),l(),s):e},s}function soe(e){var t=u0(.1),n,r,i;typeof e!="function"&&(e=u0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vy+=(i[h]-v.y)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:u0(+c),l(),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:u0(+c),l(),s):e},s}var loe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const uoe={joint:!0},coe={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},foe={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},hoe={text:""};function doe(e,t,n){const{nodes:r,links:i}=e,{joint:s,nodeStrength:l,linkStrength:c}=t,{nodeKey:h=M=>M.id,linkKey:p=M=>M.id}=n,v=noe(),y=ioe(i).id(Mm(p));typeof l=="function"&&v.strength(l),typeof c=="function"&&y.strength(c);const b=toe(r).force("link",y).force("charge",v);s?b.force("center",ooe()):b.force("x",aoe()).force("y",soe()),b.stop();const T=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));for(let M=0;M<T;M++)b.tick();return{nodesData:r,linksData:i}}const jz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{nodeKey:v=ne=>ne.id,linkKey:y=ne=>ne.id}=n,b=loe(n,["nodeKey","linkKey"]),T=Object.assign({nodeKey:v,linkKey:y},b),M=bo(T,"node"),R=bo(T,"link"),{links:I,nodes:N}=NR(t,T),{nodesData:z,linksData:H}=doe({links:I,nodes:N},Jr({},uoe,s),T),X=Am(p,"link",{items:[ne=>({name:"source",value:Mm(y)(ne.source)}),ne=>({name:"target",value:Mm(y)(ne.target)})]}),Y=Am(p,"node",{items:[ne=>({name:"key",value:Mm(v)(ne)})]},!0);return[Jr({},coe,{data:H,encode:R,labels:c,style:bo(i,"link"),tooltip:X,animate:Cm(h,"link")}),Jr({},foe,{data:z,encode:Object.assign({},M),scale:r,style:bo(i,"node"),tooltip:Y,labels:[Object.assign(Object.assign({},hoe),bo(i,"label")),...l],animate:Cm(h,"link")})]};jz.props={};function poe(e,t){return e.parent===t.parent?1:2}function U5(e){var t=e.children;return t?t[0]:e.t}function j5(e){var t=e.children;return t?t[t.length-1]:e.t}function voe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function moe(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function goe(e,t,n){return e.a.parent===t.parent?e.a:n}function KA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}KA.prototype=Object.create(Kb.prototype);function yoe(e){for(var t=new KA(e,0),n,r=[t],i,s,l,c;n=r.pop();)if(s=n._.children)for(n.children=new Array(c=s.length),l=c-1;l>=0;--l)r.push(i=n.children[l]=new KA(s[l],l)),i.parent=n;return(t.parent=new KA(null,0)).children=[t],t}function _oe(){var e=poe,t=1,n=1,r=null;function i(p){var v=yoe(p);if(v.eachAfter(s),v.parent.m=-v.z,v.eachBefore(l),r)p.eachBefore(h);else{var y=p,b=p,T=p;p.eachBefore(function(z){z.x<y.x&&(y=z),z.x>b.x&&(b=z),z.depth>T.depth&&(T=z)});var M=y===b?1:e(y,b)/2,R=M-y.x,I=t/(b.x+M+R),N=n/(T.depth||1);p.eachBefore(function(z){z.x=(z.x+R)*I,z.y=z.depth*N})}return p}function s(p){var v=p.children,y=p.parent.children,b=p.i?y[p.i-1]:null;if(v){moe(p);var T=(v[0].z+v[v.length-1].z)/2;b?(p.z=b.z+e(p._,b._),p.m=p.z-T):p.z=T}else b&&(p.z=b.z+e(p._,b._));p.parent.A=c(p,b,p.parent.A||y[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function c(p,v,y){if(v){for(var b=p,T=p,M=v,R=b.parent.children[0],I=b.m,N=T.m,z=M.m,H=R.m,X;M=j5(M),b=U5(b),M&&b;)R=U5(R),T=j5(T),T.a=p,X=M.z+z-b.z-I+e(M._,b._),X>0&&(voe(goe(M,p,y),p,X),I+=X,N+=X),z+=M.m,I+=b.m,H+=R.m,N+=T.m;M&&!j5(T)&&(T.t=M,T.m+=z-N),b&&!U5(R)&&(R.t=b,R.m+=I-H,y=p)}return y}function h(p){p.x*=t,p.y=p.depth*n}return i.separation=function(p){return arguments.length?(e=p,i):e},i.size=function(p){return arguments.length?(r=!1,t=+p[0],n=+p[1],i):r?null:[t,n]},i.nodeSize=function(p){return arguments.length?(r=!0,t=+p[0],n=+p[1],i):r?[t,n]:null},i}function boe(e,t){return e.parent===t.parent?1:2}function xoe(e){return e.reduce(Eoe,0)/e.length}function Eoe(e,t){return e+t.x}function Soe(e){return 1+e.reduce(woe,0)}function woe(e,t){return Math.max(e,t.y)}function Toe(e){for(var t;t=e.children;)e=t[0];return e}function Aoe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Coe(){var e=boe,t=1,n=1,r=!1;function i(s){var l,c=0;s.eachAfter(function(b){var T=b.children;T?(b.x=xoe(T),b.y=Soe(T)):(b.x=l?c+=e(b,l):0,b.y=0,l=b)});var h=Toe(s),p=Aoe(s),v=h.x-e(h,p)/2,y=p.x+e(p,h)/2;return s.eachAfter(r?function(b){b.x=(b.x-s.x)*t,b.y=(s.y-b.y)*n}:function(b){b.x=(b.x-v)/(y-v)*t,b.y=(1-(s.y?b.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}const Vz=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:s,sortBy:l,as:c=["x","y"]}=t,[h,p]=c,v=qb(n,M=>M.children).sum(M=>M[r]).sort(l),y=e();y.size([1,1]),i&&y.nodeSize(i),s&&y.separation(s),y(v);const b=[];v.each(M=>{M[h]=M.x,M[p]=M.y,M.name=M.data.name,b.push(M)});const T=v.links();return T.forEach(M=>{M[h]=[M.source[h],M.target[h]],M[p]=[M.source[p],M.target[p]]}),{nodes:b,edges:T}},Hz=e=>Vz(Coe)(e);Hz.props={};const Gz=e=>Vz(_oe)(e);Gz.props={};const Ooe={sortBy:(e,t)=>t.value-e.value},Moe={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Roe={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Poe={text:"",fontSize:10},Wz=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,v=n==null?void 0:n.value,{nodes:y,edges:b}=Gz(Object.assign(Object.assign(Object.assign({},Ooe),s),{field:v}))(t),T=Am(p,"node",{title:"name",items:["value"]},!0),M=Am(p,"link",{title:"",items:[R=>({name:"source",value:R.source.name}),R=>({name:"target",value:R.target.name})]});return[Jr({},Roe,{data:b,encode:bo(n,"link"),scale:bo(r,"link"),labels:c,style:Object.assign({stroke:"#999"},bo(i,"link")),tooltip:M,animate:Cm(h,"link")}),Jr({},Moe,{data:y,scale:bo(r,"node"),encode:bo(n,"node"),labels:[Object.assign(Object.assign({},Poe),bo(i,"label")),...l],style:Object.assign({},bo(i,"node")),tooltip:T,animate:Cm(h,"node")})]};Wz.props={};var Ioe=1664525,Doe=1013904223,Zz=4294967296;function Loe(){var e=1;return function(){return(e=(Ioe*e+Doe)%Zz)/Zz}}var Noe=L(52677);function Foe(e){return Noe(e)==="object"&&"length"in e?e:Array.from(e)}function Boe(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function wpe(e){return Xz(e,lcg())}function Xz(e,t){for(var n=0,r=(e=Boe(Array.from(e),t)).length,i=[],s,l;n<r;)s=e[n],l&&Yz(l,s)?++n:(l=zoe(i=koe(i,s)),n=0);return l}function koe(e,t){var n,r;if(V5(t,e))return[t];for(n=0;n<e.length;++n)if(QA(t,e[n])&&V5(GE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(QA(GE(e[n],e[r]),t)&&QA(GE(e[n],t),e[r])&&QA(GE(e[r],t),e[n])&&V5($z(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function QA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Yz(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function V5(e,t){for(var n=0;n<t.length;++n)if(!Yz(e,t[n]))return!1;return!0}function zoe(e){switch(e.length){case 1:return Uoe(e[0]);case 2:return GE(e[0],e[1]);case 3:return $z(e[0],e[1],e[2])}}function Uoe(e){return{x:e.x,y:e.y,r:e.r}}function GE(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,l=t.y,c=t.r,h=s-n,p=l-r,v=c-i,y=Math.sqrt(h*h+p*p);return{x:(n+s+h/y*v)/2,y:(r+l+p/y*v)/2,r:(y+i+c)/2}}function $z(e,t,n){var r=e.x,i=e.y,s=e.r,l=t.x,c=t.y,h=t.r,p=n.x,v=n.y,y=n.r,b=r-l,T=r-p,M=i-c,R=i-v,I=h-s,N=y-s,z=r*r+i*i-s*s,H=z-l*l-c*c+h*h,X=z-p*p-v*v+y*y,Y=T*M-b*R,ne=(M*X-R*H)/(Y*2)-r,ve=(R*I-M*N)/Y,ye=(T*H-b*X)/(Y*2)-i,De=(b*N-T*I)/Y,Ye=ve*ve+De*De-1,Qe=2*(s+ne*ve+ye*De),yt=ne*ne+ye*ye-s*s,qe=-(Math.abs(Ye)>1e-6?(Qe+Math.sqrt(Qe*Qe-4*Ye*yt))/(2*Ye):yt/Qe);return{x:r+ne+ve*qe,y:i+ye+De*qe,r:qe}}function qz(e,t,n){var r=e.x-t.x,i,s,l=e.y-t.y,c,h,p=r*r+l*l;p?(s=t.r+n.r,s*=s,h=e.r+n.r,h*=h,s>h?(i=(p+h-s)/(2*p),c=Math.sqrt(Math.max(0,h/p-i*i)),n.x=e.x-i*r-c*l,n.y=e.y-i*l+c*r):(i=(p+s-h)/(2*p),c=Math.sqrt(Math.max(0,s/p-i*i)),n.x=t.x+i*r-c*l,n.y=t.y+i*l+c*r)):(n.x=t.x+n.r,n.y=t.y)}function Kz(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Qz(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function JA(e){this._=e,this.next=null,this.previous=null}function Jz(e,t){if(!(s=(e=Foe(e)).length))return 0;var n,r,i,s,l,c,h,p,v,y,b;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;qz(r,n,i=e[2]),n=new JA(n),r=new JA(r),i=new JA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<s;++h){qz(n._,r._,i=e[h]),i=new JA(i),p=r.next,v=n.previous,y=r._.r,b=n._.r;do if(y<=b){if(Kz(p._,i._)){r=p,n.next=r,r.previous=n,--h;continue e}y+=p._.r,p=p.next}else{if(Kz(v._,i._)){n=v,n.next=r,r.previous=n,--h;continue e}b+=v._.r,v=v.previous}while(p!==v.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=Qz(n);(i=i.next)!==r;)(c=Qz(i))<l&&(n=i,l=c);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xz(n,t),h=0;h<s;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function Tpe(e){return Jz(e,lcg()),e}function joe(e){return Math.sqrt(e.value)}function Voe(){var e=null,t=1,n=1,r=m1;function i(s){var l=Loe();return s.x=t/2,s.y=n/2,e?s.eachBefore(eU(e)).eachAfter(H5(r,.5,l)).eachBefore(tU(1)):s.eachBefore(eU(joe)).eachAfter(H5(m1,1,l)).eachAfter(H5(r,s.r/Math.min(t,n),l)).eachBefore(tU(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=mA(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:ox(+s),i):r},i}function eU(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function H5(e,t,n){return function(r){if(i=r.children){var i,s,l=i.length,c=e(r)*t||0,h;if(c)for(s=0;s<l;++s)i[s].r+=c;if(h=Jz(i,n),c)for(s=0;s<l;++s)i[s].r-=c;r.r=h+c}}}function tU(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var Hoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Goe=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),Woe=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),Zoe={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},Xoe={title:e=>e.data.name,items:[{field:"value"}]},Yoe=(e,t,n)=>{const{value:r}=n,i=Vo(e)?FP().path(t.path)(e):qb(e);return r?i.sum(s=>Mm(r)(s)).sort(t.sort):i.count(),Voe().size(t.size).padding(t.padding)(i),i.descendants()},nU=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:s={},scale:l={},style:c={},layout:h={},labels:p=[],tooltip:v={}}=e,y=Hoe(e,["data","encode","scale","style","layout","labels","tooltip"]),b=Woe(n,r,s),T=Yoe(i,Jr({},Goe(n,r),h),Jr({},b.encode,s)),M=bo(c,"label");return Jr({},b,Object.assign(Object.assign({data:T,encode:s,scale:l,style:c,labels:[Object.assign(Object.assign({},Zoe),M),...p]},y),{tooltip:zT(v,Xoe),axis:!1}))};nU.props={};function $oe(e){return e.target.depth}function qoe(e){return e.depth}function Koe(e,t){return t-1-e.height}function eC(e,t){return e.sourceLinks.length?e.depth:t-1}function Qoe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?a0(e.sourceLinks,$oe)-1:0}function tC(e){return function(){return e}}function rU(e,t){return nC(e.source,t.source)||e.index-t.index}function iU(e,t){return nC(e.target,t.target)||e.index-t.index}function nC(e,t){return e.y0-t.y0}function G5(e){return e.value}function Joe(e){return e.index}function eae(e){return e.nodes}function tae(e){return e.links}function oU(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function aU({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function nae(){let e=0,t=0,n=1,r=1,i=24,s=8,l,c=Joe,h=eC,p,v,y,b=eae,T=tae,M=6;function R(mt){const Xt={nodes:b(mt),links:T(mt)};return I(Xt),N(Xt),z(Xt),H(Xt),ne(Xt),aU(Xt),Xt}R.update=function(mt){return aU(mt),mt},R.nodeId=function(mt){return arguments.length?(c=typeof mt=="function"?mt:tC(mt),R):c},R.nodeAlign=function(mt){return arguments.length?(h=typeof mt=="function"?mt:tC(mt),R):h},R.nodeDepth=function(mt){return arguments.length?(p=mt,R):p},R.nodeSort=function(mt){return arguments.length?(v=mt,R):v},R.nodeWidth=function(mt){return arguments.length?(i=+mt,R):i},R.nodePadding=function(mt){return arguments.length?(s=l=+mt,R):s},R.nodes=function(mt){return arguments.length?(b=typeof mt=="function"?mt:tC(mt),R):b},R.links=function(mt){return arguments.length?(T=typeof mt=="function"?mt:tC(mt),R):T},R.linkSort=function(mt){return arguments.length?(y=mt,R):y},R.size=function(mt){return arguments.length?(e=t=0,n=+mt[0],r=+mt[1],R):[n-e,r-t]},R.extent=function(mt){return arguments.length?(e=+mt[0][0],n=+mt[1][0],t=+mt[0][1],r=+mt[1][1],R):[[e,t],[n,r]]},R.iterations=function(mt){return arguments.length?(M=+mt,R):M};function I({nodes:mt,links:Xt}){mt.forEach((kt,Tn)=>{kt.index=Tn,kt.sourceLinks=[],kt.targetLinks=[]});const Mt=new Map(mt.map(kt=>[c(kt),kt]));if(Xt.forEach((kt,Tn)=>{kt.index=Tn;let{source:zn,target:lr}=kt;typeof zn!="object"&&(zn=kt.source=oU(Mt,zn)),typeof lr!="object"&&(lr=kt.target=oU(Mt,lr)),zn.sourceLinks.push(kt),lr.targetLinks.push(kt)}),y!=null)for(const{sourceLinks:kt,targetLinks:Tn}of mt)kt.sort(y),Tn.sort(y)}function N({nodes:mt}){for(const Xt of mt)Xt.value=Xt.fixedValue===void 0?Math.max(ku(Xt.sourceLinks,G5),ku(Xt.targetLinks,G5)):Xt.fixedValue}function z({nodes:mt}){const Xt=mt.length;let Mt=new Set(mt),kt=new Set,Tn=0;for(;Mt.size;){if(Mt.forEach(zn=>{zn.depth=Tn;for(const{target:lr}of zn.sourceLinks)kt.add(lr)}),++Tn>Xt)throw new Error("circular link");Mt=kt,kt=new Set}if(p){const zn=Math.max(vs(mt,ir=>ir.depth)+1,0);let lr;for(let ir=0;ir<mt.length;ir++)lr=mt[ir],lr.depth=p.call(null,lr,zn)}}function H({nodes:mt}){const Xt=mt.length;let Mt=new Set(mt),kt=new Set,Tn=0;for(;Mt.size;){if(Mt.forEach(zn=>{zn.height=Tn;for(const{source:lr}of zn.targetLinks)kt.add(lr)}),++Tn>Xt)throw new Error("circular link");Mt=kt,kt=new Set}}function X({nodes:mt}){const Xt=Math.max(vs(mt,Tn=>Tn.depth)+1,0),Mt=(n-e-i)/(Xt-1),kt=new Array(Xt).fill(0).map(()=>[]);for(const Tn of mt){const zn=Math.max(0,Math.min(Xt-1,Math.floor(h.call(null,Tn,Xt))));Tn.layer=zn,Tn.x0=e+zn*Mt,Tn.x1=Tn.x0+i,kt[zn]?kt[zn].push(Tn):kt[zn]=[Tn]}if(v)for(const Tn of kt)Tn.sort(v);return kt}function Y(mt){const Xt=a0(mt,Mt=>(r-t-(Mt.length-1)*l)/ku(Mt,G5));for(const Mt of mt){let kt=t;for(const Tn of Mt){Tn.y0=kt,Tn.y1=kt+Tn.value*Xt,kt=Tn.y1+l;for(const zn of Tn.sourceLinks)zn.width=zn.value*Xt}kt=(r-kt+l)/(Mt.length+1);for(let Tn=0;Tn<Mt.length;++Tn){const zn=Mt[Tn];zn.y0+=kt*(Tn+1),zn.y1+=kt*(Tn+1)}qe(Mt)}}function ne(mt){const Xt=X(mt);l=Math.min(s,(r-t)/(vs(Xt,Mt=>Mt.length)-1)),Y(Xt);for(let Mt=0;Mt<M;++Mt){const kt=Math.pow(.99,Mt),Tn=Math.max(1-kt,(Mt+1)/M);ye(Xt,kt,Tn),ve(Xt,kt,Tn)}}function ve(mt,Xt,Mt){for(let kt=1,Tn=mt.length;kt<Tn;++kt){const zn=mt[kt];for(const lr of zn){let ir=0,Hr=0;for(const{source:ro,value:si}of lr.targetLinks){const Xr=si*(lr.layer-ro.layer);ir+=ut(ro,lr)*Xr,Hr+=Xr}if(!(Hr>0))continue;const Ti=(ir/Hr-lr.y0)*Xt;lr.y0+=Ti,lr.y1+=Ti,yt(lr)}v===void 0&&zn.sort(nC),zn.length&&De(zn,Mt)}}function ye(mt,Xt,Mt){for(let kt=mt.length,Tn=kt-2;Tn>=0;--Tn){const zn=mt[Tn];for(const lr of zn){let ir=0,Hr=0;for(const{target:ro,value:si}of lr.sourceLinks){const Xr=si*(ro.layer-lr.layer);ir+=ft(lr,ro)*Xr,Hr+=Xr}if(!(Hr>0))continue;const Ti=(ir/Hr-lr.y0)*Xt;lr.y0+=Ti,lr.y1+=Ti,yt(lr)}v===void 0&&zn.sort(nC),zn.length&&De(zn,Mt)}}function De(mt,Xt){const Mt=mt.length>>1,kt=mt[Mt];Qe(mt,kt.y0-l,Mt-1,Xt),Ye(mt,kt.y1+l,Mt+1,Xt),Qe(mt,r,mt.length-1,Xt),Ye(mt,t,0,Xt)}function Ye(mt,Xt,Mt,kt){for(;Mt<mt.length;++Mt){const Tn=mt[Mt],zn=(Xt-Tn.y0)*kt;zn>1e-6&&(Tn.y0+=zn,Tn.y1+=zn),Xt=Tn.y1+l}}function Qe(mt,Xt,Mt,kt){for(;Mt>=0;--Mt){const Tn=mt[Mt],zn=(Tn.y1-Xt)*kt;zn>1e-6&&(Tn.y0-=zn,Tn.y1-=zn),Xt=Tn.y0-l}}function yt({sourceLinks:mt,targetLinks:Xt}){if(y===void 0){for(const{source:{sourceLinks:Mt}}of Xt)Mt.sort(iU);for(const{target:{targetLinks:Mt}}of mt)Mt.sort(rU)}}function qe(mt){if(y===void 0)for(const{sourceLinks:Xt,targetLinks:Mt}of mt)Xt.sort(iU),Mt.sort(rU)}function ut(mt,Xt){let Mt=mt.y0-(mt.sourceLinks.length-1)*l/2;for(const{target:kt,width:Tn}of mt.sourceLinks){if(kt===Xt)break;Mt+=Tn+l}for(const{source:kt,width:Tn}of Xt.targetLinks){if(kt===mt)break;Mt-=Tn}return Mt}function ft(mt,Xt){let Mt=Xt.y0-(Xt.targetLinks.length-1)*l/2;for(const{source:kt,width:Tn}of Xt.targetLinks){if(kt===mt)break;Mt+=Tn+l}for(const{target:kt,width:Tn}of mt.sourceLinks){if(kt===Xt)break;Mt-=Tn}return Mt}return R}const rae={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},iae={left:qoe,right:Koe,center:Qoe,justify:eC};function oae(e){const t=typeof e;return t==="string"?iae[e]||eC:t==="function"?e:eC}const sU=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:s,nodePadding:l,nodeDepth:c,nodes:h,links:p,linkSort:v,iterations:y}=Object.assign({},rae,e),b=nae().nodeSort(r).linkSort(v).links(p).nodes(h).nodeWidth(s).nodePadding(l).nodeDepth(c).nodeAlign(oae(i)).iterations(y).extent([[0,0],[1,1]]);typeof n=="function"&&b.nodeId(n);const T=b(t),{nodes:M,links:R}=T,I=M.map(z=>{const{x0:H,x1:X,y0:Y,y1:ne}=z;return Object.assign(Object.assign({},z),{x:[H,X,X,H],y:[Y,Y,ne,ne]})}),N=R.map(z=>{const{source:H,target:X}=z,Y=H.x1,ne=X.x0,ve=z.width/2;return Object.assign(Object.assign({},z),{x:[Y,Y,ne,ne],y:[z.y0+ve,z.y0-ve,z.y1+ve,z.y1-ve]})});return{nodes:I,links:N}};sU.props={};var aae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const sae={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},lae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},uae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},cae={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},lU=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{links:v,nodes:y}=NR(t,n),b=bo(n,"node"),T=bo(n,"link"),{key:M=De=>De.key,color:R=M}=b,{links:I,nodes:N}=sU(Object.assign(Object.assign(Object.assign({},sae),{nodeId:Mm(M)}),s))({links:v,nodes:y}),z=bo(i,"label"),{text:H=M,spacing:X=5}=z,Y=aae(z,["text","spacing"]),ne=Mm(M),ve=Am(p,"node",{title:ne,items:[{field:"value"}]},!0),ye=Am(p,"link",{title:"",items:[De=>({name:"source",value:ne(De.source)}),De=>({name:"target",value:ne(De.target)})]});return[Jr({},lae,{data:N,encode:Object.assign(Object.assign({},b),{color:R}),scale:r,style:bo(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},cae),{text:H,dx:De=>De.x[0]<.5?X:-X}),Y),...l],tooltip:ve,animate:Cm(h,"node"),axis:!1}),Jr({},uae,{data:I,encode:T,labels:c,style:Object.assign({fill:T.color?void 0:"#aaa",lineWidth:0},bo(i,"link")),tooltip:ye,animate:Cm(h,"link")})]};lU.props={};function fae(e,t){return t.value-e.value}function hae(e,t){return t.frequency-e.frequency}function dae(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function pae(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const vae={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function mae(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:s,source:l,target:c,sourceWeight:h,targetWeight:p,sortBy:v}=Object.assign(Object.assign({},vae),e);function y(I){const N=I.nodes.map(H=>Object.assign({},H)),z=I.edges.map(H=>Object.assign({},H));return b(N,z),T(N,z),M(N,z),R(N,z),{nodes:N,edges:z}}function b(I,N){N.forEach(X=>{X.source=l(X),X.target=c(X),X.sourceWeight=h(X),X.targetWeight=p(X)});const z=Mu(N,X=>X.source),H=Mu(N,X=>X.target);return I.forEach(X=>{X.id=s(X);const Y=z.has(X.id)?z.get(X.id):[],ne=H.has(X.id)?H.get(X.id):[];X.frequency=Y.length+ne.length,X.value=ku(Y,ve=>ve.sourceWeight)+ku(ne,ve=>ve.targetWeight)}),{nodes:I,edges:N}}function T(I,N){const z=typeof v=="function"?v:de[v];z&&I.sort(z)}function M(I,N){const z=I.length;if(!z)throw wg("Invalid nodes: it's empty!");if(!r){const Y=1/z;return I.forEach((ne,ve)=>{ne.x=(ve+.5)*Y,ne.y=t}),{nodes:I,edges:N}}const H=i/(2*z),X=I.reduce((Y,ne)=>Y+=ne.value,0);return I.reduce((Y,ne)=>{ne.weight=ne.value/X,ne.width=ne.weight*(1-i),ne.height=n;const ve=H+Y,ye=ve+ne.width,De=t-n/2,Ye=De+n;return ne.x=[ve,ye,ye,ve],ne.y=[De,De,Ye,Ye],Y+ne.width+2*H},0),{nodes:I,edges:N}}function R(I,N){const z=new Map(I.map(Y=>[Y.id,Y]));if(!r)return N.forEach(Y=>{const ne=l(Y),ve=c(Y),ye=z.get(ne),De=z.get(ve);ye&&De&&(Y.x=[ye.x,De.x],Y.y=[ye.y,De.y])}),{nodes:I,edges:N};N.forEach(Y=>{Y.x=[0,0,0,0],Y.y=[t,t,t,t]});const H=Mu(N,Y=>Y.source),X=Mu(N,Y=>Y.target);I.forEach(Y=>{const{edges:ne,width:ve,x:ye,y:De,value:Ye,id:Qe}=Y,yt=H.get(Qe)||[],qe=X.get(Qe)||[];let ut=0;yt.map(ft=>{const mt=ft.sourceWeight/Ye*ve;ft.x[0]=ye[0]+ut,ft.x[1]=ye[0]+ut+mt,ut+=mt}),qe.forEach(ft=>{const mt=ft.targetWeight/Ye*ve;ft.x[3]=ye[0]+ut,ft.x[2]=ye[0]+ut+mt,ut+=mt})})}return y}const W5=e=>t=>mae(e)(t);W5.props={};var uU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Z5={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},gae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},yae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},_ae={position:"outside",fontSize:10},cU=(e,t)=>{const{data:n,encode:r={},scale:i,style:s={},layout:l={},nodeLabels:c=[],linkLabels:h=[],animate:p={},tooltip:v={}}=e,{nodes:y,links:b}=NR(n,r),T=bo(r,"node"),M=bo(r,"link"),{key:R=ft=>ft.key,color:I=R}=T,{linkEncodeColor:N=ft=>ft.source}=M,{nodeWidthRatio:z=Z5.thickness,nodePaddingRatio:H=Z5.marginRatio}=l,X=uU(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:Y,edges:ne}=W5(Object.assign(Object.assign(Object.assign(Object.assign({},Z5),{id:Mm(R),thickness:z,marginRatio:H}),X),{weight:!0}))({nodes:y,edges:b}),ve=bo(s,"label"),{text:ye=R}=ve,De=uU(ve,["text"]),Ye=Am(v,"node",{title:"",items:[ft=>({name:ft.key,value:ft.value})]},!0),Qe=Am(v,"link",{title:"",items:[ft=>({name:`${ft.source} -> ${ft.target}`,value:ft.value})]}),{height:yt,width:qe}=t,ut=Math.min(yt,qe);return[Jr({},yae,{data:ne,encode:Object.assign(Object.assign({},M),{color:N}),labels:h,style:Object.assign({fill:N?void 0:"#aaa"},bo(s,"link")),tooltip:Qe,animate:Cm(p,"link")}),Jr({},gae,{data:Y,encode:Object.assign(Object.assign({},T),{color:I}),scale:i,style:bo(s,"node"),coordinate:{type:"polar",outerRadius:(ut-20)/ut,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},_ae),{text:ye}),De),...c],tooltip:Ye,animate:Cm(p,"node"),axis:!1})]};cU.props={};var bae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xae=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Eae=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Sae={fontSize:10,text:e=>fE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},wae={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Tae={title:e=>fE(e.path),items:[{field:"value"}]},fU=(e,t)=>{const{width:n,height:r,options:i}=t,{data:s,encode:l={},scale:c,style:h={},layout:p={},labels:v=[],tooltip:y={}}=e,b=bae(e,["data","encode","scale","style","layout","labels","tooltip"]),T=hl(i,["interaction","treemapDrillDown"]),M=Jr({},xae(n,r),p,{layer:T?z=>z.depth===1:p.layer}),[R,I]=h7(s,M,l),N=bo(h,"label");return Jr({},Eae(n,r),Object.assign(Object.assign({data:R,scale:c,style:h,labels:[Object.assign(Object.assign({},Sae),N),...v]},b),{encode:l,tooltip:zT(y,wae),axis:!1}),T?{interaction:Object.assign(Object.assign({},b.interaction),{treemapDrillDown:T?Object.assign(Object.assign({},T),{originData:I,layout:M}):void 0}),encode:Object.assign({color:z=>fE(z.path)},l),tooltip:zT(y,Tae)}:{})};fU.props={};function Aae(){return{"data.arc":W5,"data.cluster":Hz,"mark.forceGraph":jz,"mark.tree":Wz,"mark.pack":nU,"mark.sankey":lU,"mark.chord":cU,"mark.treemap":fU}}var hU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Cae(e,t){return a0(e,n=>t[n])}function Oae(e,t){return vs(e,n=>t[n])}function dU(e,t){const n=X5(e,t)*2.5-Y5(e,t)*1.5;return a0(e,r=>t[r]>=n?t[r]:NaN)}function X5(e,t){return bA(e,.25,n=>t[n])}function Mae(e,t){return bA(e,.5,n=>t[n])}function Y5(e,t){return bA(e,.75,n=>t[n])}function pU(e,t){const n=Y5(e,t)*2.5-X5(e,t)*1.5;return vs(e,r=>t[r]<=n?t[r]:NaN)}function Rae(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:s}=r,{value:l}=i;return[Array.from(Mu(e,p=>l[+p]).values()).flatMap(p=>{const v=dU(p,s),y=pU(p,s);return p.filter(b=>s[b]<v||s[b]>y)}),t]}}const vU=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:s,animate:l}=e,c=hU(e,["data","encode","style","tooltip","transform","animate"]),{point:h=!0}=r,p=hU(r,["point"]),{y:v}=n,y={y:v,y1:v,y2:v,y3:v,y4:v},b={y1:X5,y2:Mae,y3:Y5},T=Am(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),M=Am(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!h)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Cae},b),{y4:Oae})],encode:Object.assign(Object.assign({},n),y),style:p,tooltip:T},c);const R=bo(p,"box"),I=bo(p,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:dU},b),{y4:pU})],encode:Object.assign(Object.assign({},n),y),style:R,tooltip:T,animate:Cm(l,"box")},c),{type:"point",data:t,transform:[{type:Rae}],encode:n,style:Object.assign({},I),tooltip:M,animate:Cm(l,"point")}]};vU.props={};const mU=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,Pae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,s,l)=>{const{document:c}=t.canvas,{color:h,index:p}=s,v=c.createElement("g",{}),y=mU(i[0],i[1]),b=mU(i[0],r)*2,T=c.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",y,y,0,1,0,...i[1]],["A",b+y*2,b+y*2,0,0,0,...i[2]],["A",y,y,0,1,p===0?0:1,...i[3]],["A",b,b,0,0,1,...i[0]],["Z"]]},l),J_(e,["shape","last","first"])),{fill:h||l.color})});return v.appendChild(T),v}};var rC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Iae=(e,t)=>{const{shape:n,radius:r}=e,i=rC(e,["shape","radius"]),s=bo(i,"pointer"),l=bo(i,"pin"),{shape:c}=s,h=rC(s,["shape"]),{shape:p}=l,v=rC(l,["shape"]),{coordinate:y,theme:b}=t;return(T,M)=>{const R=T.map(ut=>y.invert(ut)),[I,N,z]=xj(y,"polar"),H=y.clone(),{color:X}=M,Y=T2({startAngle:I,endAngle:N,innerRadius:z,outerRadius:r});Y.push(["cartesian"]),H.update({transformations:Y});const ne=R.map(ut=>H.map(ut)),[ve,ye]=UM(ne),[De,Ye]=y.getCenter(),Qe=Object.assign(Object.assign({x1:ve,y1:ye,x2:De,y2:Ye,stroke:X},h),i),yt=Object.assign(Object.assign({cx:De,cy:Ye,stroke:X},v),i),qe=Ta(new Xc);return Rv(c)||(typeof c=="function"?qe.append(()=>c(ne,M,H,b)):qe.append("line").call(sa,Qe).node()),Rv(p)||(typeof p=="function"?qe.append(()=>p(ne,M,H,b)):qe.append("circle").call(sa,yt).node()),qe.node()}},gU={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Dae={style:{shape:Iae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Lae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function Nae(e){if((0,Yl.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function Fae(e,t){const{name:n="score",target:r,total:i,percent:s,thresholds:l=[]}=Nae(e),c=s||r,h=s?1:i,p=Object.assign({y:{domain:[0,h]}},t);return l.length?{targetData:[{x:n,y:c,color:"target"}],totalData:l.map((v,y)=>({x:n,y:y>=1?v-l[y-1]:v,color:y})),target:c,total:h,scale:p}:{targetData:[{x:n,y:c,color:"target"}],totalData:[{x:n,y:c,color:"target"},{x:n,y:h-c,color:"total"}],target:c,total:h,scale:p}}function Bae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const yU=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:s=[]}=e,l=rC(e,["data","scale","style","animate","transform"]),{targetData:c,totalData:h,target:p,total:v,scale:y}=Fae(t,n),b=bo(r,"text"),T=aM(r,["pointer","pin"]),M=bo(r,"arc"),R=M.shape;return[Jr({},gU,Object.assign({type:"interval",transform:[{type:"stackY"}],data:h,scale:y,style:R==="round"?Object.assign(Object.assign({},M),{shape:Pae}):M,animate:typeof i=="object"?bo(i,"arc"):i},l)),Jr({},gU,Dae,Object.assign({type:"point",data:c,scale:y,style:T,animate:typeof i=="object"?bo(i,"indicator"):i},l)),Jr({},Lae,{style:Object.assign({text:Bae(b,{target:p,total:v})},b),animate:typeof i=="object"?bo(i,"text"):i})]};yU.props={};const _U=5e3;function bU(e,t,n){return e+(t-e)*n}function kae(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function zae(e,t,n,r,i,s,l){const c=Math.ceil(2*e/n*4)*4,h=[];let p=r;for(;p<-Math.PI*2;)p+=Math.PI*2;for(;p>0;)p-=Math.PI*2;p=p/Math.PI/2*n;const v=s-e+p-e*2;h.push(["M",v,t]);let y=0;for(let b=0;b<c;++b){const T=b%4,M=kae(b*n/4,T,n,i);h.push(["C",M[0][0]+v,-M[0][1]+t,M[1][0]+v,-M[1][1]+t,M[2][0]+v,-M[2][1]+t]),b===c-1&&(y=M[2][0])}return h.push(["L",y+v,l+e]),h.push(["L",v,l+e]),h.push(["Z"]),h}function Uae(e,t,n,r,i,s,l,c,h,p,v){const{fill:y,fillOpacity:b,opacity:T}=i;for(let M=0;M<r;M++){const R=r<=1?1:M/(r-1),I=zae(c,l+c*n,h,0,c/40,e,t),N=v.createElement("path",{style:{d:I,fill:y,opacity:bU(.2,.9,R)*Number(T||b)}});s.appendChild(N);try{if(p===!1)return;const z=[{transform:"translate(0, 0)"},{transform:`translate(${h*2}, 0)`}];N.animate(z,{duration:bU(.5*_U,_U,R)*2,iterations:1/0})}catch(z){console.warn("off-screen group animate error!")}}}function jae(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function Vae(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function Hae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function Gae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function Wae(e,t,n){const r=n*4/3,i=Math.max(r,n*2),s=r/2,l=e,c=s+t-i/2,h=Math.asin(s/((i-s)*.85)),p=Math.sin(h)*s,v=Math.cos(h)*s,y=l-v,b=c+p,T=e,M=c+s/Math.sin(h);return`
      M ${y} ${b}
      A ${s} ${s} 0 1 1 ${y+v*2} ${b}
      Q ${T} ${M} ${e} ${t+i/2}
      Q ${T} ${M} ${y} ${b}
      Z 
    `}const xU={pin:Wae,rect:Vae,circle:jae,diamond:Hae,triangle:Gae};var EU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Zae=(e="circle")=>xU[e]||xU.circle,SU=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:s,percent:l}=r,{background:c,outline:h={},wave:p={}}=i,v=EU(i,["background","outline","wave"]),{border:y=2,distance:b=0}=h,T=EU(h,["border","distance"]),{length:M=192,count:R=3}=p;return(I,N,z)=>{const{document:H}=t.canvas,{color:X,fillOpacity:Y}=z,ne=Object.assign(Object.assign({fill:X},z),v),ve=H.createElement("g",{}),[ye,De]=n.getCenter(),Ye=n.getSize(),Qe=Math.min(...Ye)/2,qe=(Kd(s)?s:Zae(s))(ye,De,Qe,...Ye);if(Object.keys(c).length){const mt=H.createElement("path",{style:Object.assign({d:qe,fill:"#fff"},c)});ve.appendChild(mt)}if(l>0){const mt=H.createElement("path",{style:{d:qe}});ve.appendChild(mt),ve.style.clipPath=mt,Uae(ye,De,1-l,R,ne,ve,mt.getBBox().y,Qe*2,M,!0,H)}const ut=H.createElement("path",{style:{d:qe,fill:"transparent",lineWidth:y+2*b,stroke:"#fff"}}),ft=H.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:qe,stroke:X,strokeOpacity:Y,lineWidth:y},ne),T),{fill:"transparent"})});return ve.appendChild(ut),ve.appendChild(ft),ve}};SU.props={};var Xae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Yae={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:SU},animate:{enter:{type:"fadeIn"}}},$ae={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},wU=e=>{const{data:t={},style:n={},animate:r}=e,i=Xae(e,["data","style","animate"]),s=Math.max(0,(0,Yl.Z)(t)?t:t==null?void 0:t.percent),l=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},bo(n,"text")),bo(n,"content")),h=bo(n,"outline"),p=bo(n,"wave"),v=bo(n,"background");return[Jr({},Yae,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:h,wave:p,background:v})},animate:r},i)),Jr({},$ae,{style:Object.assign({text:`${Cb(s*100)} %`},c),animate:r})]};wU.props={};var kg=L(69916);const TU=1e-10;function AU(e,t){const n=Kae(e),r=n.filter(function(h){return qae(h,e)});let i=0,s=0,l;const c=[];if(r.length>1){const h=Qae(r);for(l=0;l<r.length;++l){const v=r[l];v.angle=Math.atan2(v.x-h.x,v.y-h.y)}r.sort(function(v,y){return y.angle-v.angle});let p=r[r.length-1];for(l=0;l<r.length;++l){const v=r[l];s+=(p.x+v.x)*(v.y-p.y);const y={x:(v.x+p.x)/2,y:(v.y+p.y)/2};let b=null;for(let T=0;T<v.parentIndex.length;++T)if(p.parentIndex.indexOf(v.parentIndex[T])>-1){const M=e[v.parentIndex[T]],R=Math.atan2(v.x-M.x,v.y-M.y),I=Math.atan2(p.x-M.x,p.y-M.y);let N=I-R;N<0&&(N+=2*Math.PI);const z=I-N/2;let H=WE(y,{x:M.x+M.radius*Math.sin(z),y:M.y+M.radius*Math.cos(z)});H>M.radius*2&&(H=M.radius*2),(b===null||b.width>H)&&(b={circle:M,width:H,p1:v,p2:p})}b!==null&&(c.push(b),i+=$5(b.circle.radius,b.width),p=v)}}else{let h=e[0];for(l=1;l<e.length;++l)e[l].radius<h.radius&&(h=e[l]);let p=!1;for(l=0;l<e.length;++l)if(WE(e[l],h)>Math.abs(h.radius-e[l].radius)){p=!0;break}p?i=s=0:(i=h.radius*h.radius*Math.PI,c.push({circle:h,p1:{x:h.x,y:h.y+h.radius},p2:{x:h.x-TU,y:h.y+h.radius},width:h.radius*2}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=c,t.innerPoints=r,t.intersectionPoints=n),i+s}function qae(e,t){for(let n=0;n<t.length;++n)if(WE(e,t[n])>t[n].radius+TU)return!1;return!0}function Kae(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=OU(e[n],e[r]);for(let s=0;s<i.length;++s){const l=i[s];l.parentIndex=[n,r],t.push(l)}}return t}function $5(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function WE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function CU(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return $5(e,r)+$5(t,i)}function OU(e,t){const n=WE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),l=Math.sqrt(r*r-s*s),c=e.x+s*(t.x-e.x)/n,h=e.y+s*(t.y-e.y)/n,p=-(t.y-e.y)*(l/n),v=-(t.x-e.x)*(l/n);return[{x:c+p,y:h-v},{x:c-p,y:h+v}]}function Qae(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function Jae(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||rse,r=t.lossFunction||K5;e=ese(e);const i=n(e,t),s=[],l=[];let c;for(c in i)i.hasOwnProperty(c)&&(s.push(i[c].x),s.push(i[c].y),l.push(c));const p=(0,kg.nelderMead)(function(v){const y={};for(let b=0;b<l.length;++b){const T=l[b];y[T]={x:v[2*b],y:v[2*b+1],radius:i[T].radius}}return r(y,e)},s,t).x;for(let v=0;v<l.length;++v)c=l[v],i[c].x=p[2*v],i[c].y=p[2*v+1];return i}const MU=1e-10;function q5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+MU?Math.abs(e-t):(0,kg.bisect)(function(r){return CU(e,t,r)-n},0,e+t)}function ese(e){e=e.slice();const t=[],n={};let r,i,s,l;for(r=0;r<e.length;++r){const c=e[r];c.sets.length==1?t.push(c.sets[0]):c.sets.length==2&&(s=c.sets[0],l=c.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(t.sort((c,h)=>c>h?1:-1),r=0;r<t.length;++r)for(s=t[r],i=r+1;i<t.length;++i)l=t[i],[s,l]in n||e.push({sets:[s,l],size:0});return e}function tse(e,t,n){const r=(0,kg.zerosM)(t.length,t.length),i=(0,kg.zerosM)(t.length,t.length);return e.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],c=n[s.sets[1]],h=Math.sqrt(t[l].size/Math.PI),p=Math.sqrt(t[c].size/Math.PI),v=q5(h,p,s.size);r[l][c]=r[c][l]=v;let y=0;s.size+1e-10>=Math.min(t[l].size,t[c].size)?y=1:s.size<=1e-10&&(y=-1),i[l][c]=i[c][l]=y}),{distances:r,constraints:i}}function nse(e,t,n,r){let i=0,s;for(s=0;s<t.length;++s)t[s]=0;for(s=0;s<n.length;++s){const l=e[2*s],c=e[2*s+1];for(let h=s+1;h<n.length;++h){const p=e[2*h],v=e[2*h+1],y=n[s][h],b=r[s][h],T=(p-l)*(p-l)+(v-c)*(v-c),M=Math.sqrt(T),R=T-y*y;b>0&&M<=y||b<0&&M>=y||(i+=2*R*R,t[2*s]+=4*R*(l-p),t[2*s+1]+=4*R*(c-v),t[2*h]+=4*R*(p-l),t[2*h+1]+=4*R*(v-c))}}return i}function rse(e,t){let n=ose(e,t);const r=t.lossFunction||K5;if(e.length>=8){const i=ise(e,t),s=r(i,e),l=r(n,e);s+1e-8<l&&(n=i)}return n}function ise(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let s;for(s=0;s<e.length;++s){const R=e[s];R.sets.length==1&&(i[R.sets[0]]=r.length,r.push(R))}const l=tse(e,r,i);let c=l.distances;const h=l.constraints,p=(0,kg.norm2)(c.map(kg.norm2))/c.length;c=c.map(function(R){return R.map(function(I){return I/p})});const v=function(R,I){return nse(R,I,c,h)};let y,b;for(s=0;s<n;++s){const R=(0,kg.zeros)(c.length*2).map(Math.random);b=(0,kg.conjugateGradient)(v,R,t),(!y||b.fx<y.fx)&&(y=b)}const T=y.x,M={};for(s=0;s<r.length;++s){const R=r[s];M[R.sets[0]]={x:T[2*s]*p,y:T[2*s+1]*p,radius:Math.sqrt(R.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)(0,kg.scale)(t.history[s].x,p);return M}function ose(e,t){const n=t&&t.lossFunction?t.lossFunction:K5,r={},i={};let s;for(let y=0;y<e.length;++y){const b=e[y];b.sets.length==1&&(s=b.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:b.size,radius:Math.sqrt(b.size/Math.PI)},i[s]=[])}e=e.filter(function(y){return y.sets.length==2});for(let y=0;y<e.length;++y){const b=e[y];let T=b.hasOwnProperty("weight")?b.weight:1;const M=b.sets[0],R=b.sets[1];b.size+MU>=Math.min(r[M].size,r[R].size)&&(T=0),i[M].push({set:R,size:b.size,weight:T}),i[R].push({set:M,size:b.size,weight:T})}const l=[];for(s in i)if(i.hasOwnProperty(s)){let y=0;for(let b=0;b<i[s].length;++b)y+=i[s][b].size*i[s][b].weight;l.push({set:s,size:y})}function c(y,b){return b.size-y.size}l.sort(c);const h={};function p(y){return y.set in h}function v(y,b){r[b].x=y.x,r[b].y=y.y,h[b]=!0}v({x:0,y:0},l[0].set);for(let y=1;y<l.length;++y){const b=l[y].set,T=i[b].filter(p);if(s=r[b],T.sort(c),T.length===0)throw"ERROR: missing pairwise overlap information";const M=[];for(let N=0;N<T.length;++N){const z=r[T[N].set],H=q5(s.radius,z.radius,T[N].size);M.push({x:z.x+H,y:z.y}),M.push({x:z.x-H,y:z.y}),M.push({y:z.y+H,x:z.x}),M.push({y:z.y-H,x:z.x});for(let X=N+1;X<T.length;++X){const Y=r[T[X].set],ne=q5(s.radius,Y.radius,T[X].size),ve=OU({x:z.x,y:z.y,radius:H},{x:Y.x,y:Y.y,radius:ne});for(let ye=0;ye<ve.length;++ye)M.push(ve[ye])}}let R=1e50,I=M[0];for(let N=0;N<M.length;++N){r[b].x=M[N].x,r[b].y=M[N].y;const z=n(r,e);z<R&&(R=z,I=M[N])}v(I,b)}return r}function K5(e,t){let n=0;function r(i){return i.map(function(s){return e[s]})}for(let i=0;i<t.length;++i){const s=t[i];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const h=e[s.sets[0]],p=e[s.sets[1]];l=CU(h.radius,p.radius,WE(h,p))}else l=AU(r(s.sets));const c=s.hasOwnProperty("weight")?s.weight:1;n+=c*(l-s.size)*(l-s.size)}return n}function ase(e,t,n){n===null?e.sort(function(i,s){return s.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,s=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=s}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let s,l;const c=Math.cos(i),h=Math.sin(i);for(r=0;r<e.length;++r)s=e[r].x,l=e[r].y,e[r].x=c*s-h*l,e[r].y=h*s+c*l}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const s=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const l=(e[r].x+s*e[r].y)/(1+s*s);e[r].x=2*l-e[r].x,e[r].y=2*l*s-e[r].y}}}}function sse(e){e.map(function(l){l.parent=l});function t(l){return l.parent!==l&&(l.parent=t(l.parent)),l.parent}function n(l,c){const h=t(l),p=t(c);h.parent=p}for(let l=0;l<e.length;++l)for(let c=l+1;c<e.length;++c){const h=e[l].radius+e[c].radius;distance(e[l],e[c])+1e-10<h&&n(e[c],e[l])}const r={};let i;for(let l=0;l<e.length;++l)i=t(e[l]).parent.setid,i in r||(r[i]=[]),r[i].push(e[l]);e.map(function(l){delete l.parent});const s=[];for(i in r)r.hasOwnProperty(i)&&s.push(r[i]);return s}function Q5(e){const t=function(n){const r=Math.max.apply(null,e.map(function(s){return s[n]+s.radius})),i=Math.min.apply(null,e.map(function(s){return s[n]-s.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function Ape(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,s;for(s in e)if(e.hasOwnProperty(s)){const b=e[s];r.push({x:b.x,y:b.y,radius:b.radius,setid:s})}const l=sse(r);for(i=0;i<l.length;++i){ase(l[i],t,n);const b=Q5(l[i]);l[i].size=(b.xRange.max-b.xRange.min)*(b.yRange.max-b.yRange.min),l[i].bounds=b}l.sort(function(b,T){return T.size-b.size}),r=l[0];let c=r.bounds;const h=(c.xRange.max-c.xRange.min)/50;function p(b,T,M){if(!b)return;const R=b.bounds;let I,N,z;T?I=c.xRange.max-R.xRange.min+h:(I=c.xRange.max-R.xRange.max,z=(R.xRange.max-R.xRange.min)/2-(c.xRange.max-c.xRange.min)/2,z<0&&(I+=z)),M?N=c.yRange.max-R.yRange.min+h:(N=c.yRange.max-R.yRange.max,z=(R.yRange.max-R.yRange.min)/2-(c.yRange.max-c.yRange.min)/2,z<0&&(N+=z));for(let H=0;H<b.length;++H)b[H].x+=I,b[H].y+=N,r.push(b[H])}let v=1;for(;v<l.length;)p(l[v],!0,!1),p(l[v+1],!1,!0),p(l[v+2],!0,!0),v+=3,c=Q5(r);const y={};for(i=0;i<r.length;++i)y[r[i].setid]=r[i];return y}function lse(e,t,n,r){const i=[],s=[];for(const R in e)e.hasOwnProperty(R)&&(s.push(R),i.push(e[R]));t-=2*r,n-=2*r;const l=Q5(i),c=l.xRange,h=l.yRange;if(c.max==c.min||h.max==h.min)return console.log("not scaling solution: zero size detected"),e;const p=t/(c.max-c.min),v=n/(h.max-h.min),y=Math.min(v,p),b=(t-(c.max-c.min)*y)/2,T=(n-(h.max-h.min)*y)/2,M={};for(let R=0;R<i.length;++R){const I=i[R];M[s[R]]={radius:y*I.radius,x:r+b+(I.x-c.min)*y,y:r+T+(I.y-h.min)*y}}return M}function use(e,t,n){const r=[],i=e-n,s=t;return r.push("M",i,s),r.push("A",n,n,0,1,0,i+2*n,s),r.push("A",n,n,0,1,0,i,s),r.join(" ")}function cse(e){const t={};AU(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return use(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const s=n[i],l=s.circle.radius,c=s.width>l;r.push(`
A`,l,l,0,c?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const RU=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[s,l]=r;return c=>{const h=c.map(y=>Object.assign(Object.assign({},y),{sets:y[t],size:y[n],[s]:y.sets.join("&")}));h.sort((y,b)=>y.sets.length-b.sets.length);const p=Jae(h);let v;return h.map(y=>{const b=y[t],T=({width:M,height:R})=>{v=v||lse(p,M,R,i);const I=b.map(z=>v[z]);let N=cse(I);return/[zZ]$/.test(N)||(N+=" Z"),N};return Object.assign(Object.assign({},y),{[l]:T})})}};RU.props={};function fse(){return{"data.venn":RU,"mark.boxplot":vU,"mark.gauge":yU,"mark.wordCloud":iP,"mark.liquid":wU}}function hse(){return Object.assign(Object.assign(Object.assign(Object.assign({},Sie()),Aae()),fse()),_re())}var iC=function(){return iC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},iC.apply(this,arguments)},dse=Y$(X$,iC(iC({},hse()),Iq())),pse="[object Boolean]";function vse(e){return e===!0||e===!1||Xs(e)&&pe(e)==pse}var J5=vse,ZE=function(){return ZE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZE.apply(this,arguments)},mse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},gse=["renderer"],PU=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],eI="__transform__",yse="__skipDelCustomKeys__",_1=function(e,t){return J5(t)?{type:e,available:t}:ZE({type:e},t)},tI={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return _1("stackY",e)}},normalize:{target:"transform",value:function(e){return _1("normalizeY",e)}},percent:{target:"transform",value:function(e){return _1("normalizeY",e)}},group:{target:"transform",value:function(e){return _1("dodgeX",e)}},sort:{target:"transform",value:function(e){return _1("sortX",e)}},symmetry:{target:"transform",value:function(e){return _1("symmetryY",e)}},diff:{target:"transform",value:function(e){return _1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return J5(e)?{connect:e}:e}}},nI=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],oC=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:nI},{key:"point",type:"point",extend_keys:nI},{key:"area",type:"area",extend_keys:nI}],_se=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,s=i===void 0?!0:i,l=mse(n,["available"]);if(s)e[t].push(ZE((r={},r[eI]=!0,r),l));else{var c=e[t].indexOf(function(h){return h.type===n.type});c!==-1&&e[t].splice(c,1)}}},{key:"labels",callback:function(e,t,n){var r;if(!n||Pt(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(ZE((r={},r[eI]=!0,r),n))}}],rI=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],bse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aC=function(){return aC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},aC.apply(this,arguments)},xse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Ese=function(e){bse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=xse(n,["style"]);return e.call(this,aC({style:aC({fill:"#eee"},r)},i))||this}return t}(Ey),Sse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sC=function(){return sC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sC.apply(this,arguments)},wse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},IU=function(e){Sse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=wse(n,["style"]);return e.call(this,sC({style:sC({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(sd);function Tse(e,t,n){(n!==void 0&&!dt(e[t],n)||n===void 0&&!(t in e))&&an(e,t,n)}var iI=Tse;function Ase(e){return function(t,n,r){for(var i=-1,s=Object(t),l=r(t),c=l.length;c--;){var h=l[e?c:++i];if(n(s[h],h,s)===!1)break}return t}}var Cse=Ase,Ose=Cse(),DU=Ose;function Mse(e){return Xs(e)&&eu(e)}var Rse=Mse,Pse="[object Object]",Ise=Function.prototype,Dse=Object.prototype,LU=Ise.toString,Lse=Dse.hasOwnProperty,Nse=LU.call(Object);function Fse(e){if(!Xs(e)||pe(e)!=Pse)return!1;var t=Uf(e);if(t===null)return!0;var n=Lse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&LU.call(n)==Nse}var oI=Fse;function Bse(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var aI=Bse;function kse(e){return zr(e,Qt(e))}var zse=kse;function Use(e,t,n,r,i,s,l){var c=aI(e,n),h=aI(t,n),p=l.get(h);if(p){iI(e,n,p);return}var v=s?s(c,h,n+"",e,t,l):void 0,y=v===void 0;if(y){var b=Pt(h),T=!b&&_f(h),M=!b&&!T&&p0(h);v=h,b||T||M?Pt(c)?v=c:Rse(c)?v=ws(c):T?(y=!1,v=Du(h,!0)):M?(y=!1,v=Zh(h,!0)):v=[]:oI(h)||yf(h)?(v=c,yf(c)?v=zse(c):(!he(c)||Yn(c))&&(v=uv(h))):y=!1}y&&(l.set(h,v),i(v,h,r,s,l),l.delete(h)),iI(e,n,v)}var jse=Use;function NU(e,t,n,r,i){e!==t&&DU(t,function(s,l){if(i||(i=new $u),he(s))jse(e,t,l,n,NU,r,i);else{var c=r?r(aI(e,l),s,l+"",e,t,i):void 0;c===void 0&&(c=s),iI(e,l,c)}},Qt)}var Vse=NU;function Hse(e){return e}var sI=Hse;function Gse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Wse=Gse,FU=Math.max;function Zse(e,t,n){return t=FU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=FU(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(l),Wse(e,this,c)}}var BU=Zse;function Xse(e){return function(){return e}}var Yse=Xse,$se=vn?function(e,t){return vn(e,"toString",{configurable:!0,enumerable:!1,value:Yse(t),writable:!0})}:sI,qse=$se,Kse=800,Qse=16,Jse=Date.now;function ele(e){var t=0,n=0;return function(){var r=Jse(),i=Qse-(r-n);if(n=r,i>0){if(++t>=Kse)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var tle=ele,nle=tle(qse),kU=nle;function rle(e,t){return kU(BU(e,t,sI),e+"")}var ile=rle;function ole(e,t,n){if(!he(n))return!1;var r=typeof t;return(r=="number"?eu(n)&&bf(t,n.length):r=="string"&&t in n)?dt(n[t],e):!1}var ale=ole;function sle(e){return ile(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,l&&ale(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t})}var zU=sle,lle=zU(function(e,t,n,r){Vse(e,t,n,r)}),ule=lle,UU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},cle=function(e,t){if(Pt(t))return t},Jy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ule.apply(void 0,UU(UU([],e,!1),[cle],!1))},fle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jU=function(e){fle(t,e);function t(n,r,i){var s=e.call(this,{style:Jy(i,r)})||this;return s.chart=n,s}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Jy({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(s){var l=s.getBBox(),c=l.x,h=l.y,p=l.width,v=l.height,y=s.__data__;i.push({bbox:l,x:c,y:h,width:p,height:v,key:y.key,data:y})}),i},t.prototype.bindEvents=function(n,r){},t}(wv),hle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lC=function(){return lC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lC.apply(this,arguments)},dle=function(e){hle(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],s=i.x,l=i.y,c=i.height,h=i.width,p=i.data,v=["items",0,"value"],y=pi(p,v),b=n?r[1].y-l-c:r[1].x-s-h,T=[],M=this.attributes,R=M.size,I=R===void 0?40:R,N=M.arrowSize,z=N===void 0?20:N,H=M.spacing,X=H===void 0?4:H;return r.forEach(function(Y,ne){if(ne>0){var ve=Y.x,ye=Y.y,De=Y.height,Ye=Y.width,Qe=Y.data,yt=Y.key,qe=pi(Qe,v),ut=I/2;if(n){var ft=ve+Ye/2,mt=ye;T.push({points:[[ft+ut,mt-b+X],[ft+ut,mt-z-X],[ft,mt-X],[ft-ut,mt-z-X],[ft-ut,mt-b+X]],center:[ft,mt-b/2-X],width:b,value:[y,qe],key:yt})}else{var ft=ve,mt=ye+De/2;T.push({points:[[ve-b+X,mt-ut],[ve-z-X,mt-ut],[ft-X,mt],[ve-z-X,mt+ut],[ve-b+X,mt+ut]],center:[ft-b/2-X,mt],width:b,value:[y,qe],key:yt})}y=qe}}),T},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=pi(n,"options.transformations"),i="horizontal";r.forEach(function(s){s.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,s=i.style,l=i.text,c=l.style,h=l.formatter;r.forEach(function(p){var v=p.points,y=p.center,b=p.value,T=p.key,M=b[0],R=b[1],I=y[0],N=y[1],z=new Ese({style:lC({points:v,fill:"#eee"},s),id:"polygon-".concat(T)}),H=new IU({style:lC({x:I,y:N,text:Yn(h)?h(M,R):(R/M*100).toFixed(2)+"%"},c),id:"text-".concat(T)});n.appendChild(z),n.appendChild(H)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var s=i.points,l=i.center,c=i.key,h=l[0],p=l[1],v=n.getElementById("polygon-".concat(c)),y=n.getElementById("text-".concat(c));v.setAttribute("points",s),y.setAttribute("x",h),y.setAttribute("y",p)})},t.tag="ConversionTag",t}(jU),ple=1,vle=2;function mle(e,t,n,r){var i=n.length,s=i,l=!r;if(e==null)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){c=n[i];var h=c[0],p=e[h],v=c[1];if(l&&c[2]){if(p===void 0&&!(h in e))return!1}else{var y=new $u;if(r)var b=r(p,v,h,e,t,y);if(!(b===void 0?Ve(v,p,ple|vle,r,y):b))return!1}}return!0}var gle=mle;function yle(e){return e===e&&!he(e)}var VU=yle;function _le(e){for(var t=Ju(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,VU(i)]}return t}var ble=_le;function xle(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var HU=xle;function Ele(e){var t=ble(e);return t.length==1&&t[0][2]?HU(t[0][0],t[0][1]):function(n){return n===e||gle(n,e,t)}}var Sle=Ele;function wle(e,t){return e!=null&&t in Object(e)}var Tle=wle;function Ale(e,t,n){t=gi(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var l=to(t[r]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&op(i)&&bf(l,i)&&(Pt(e)||yf(e)))}var Cle=Ale;function Ole(e,t){return e!=null&&Cle(e,t,Tle)}var GU=Ole,Mle=1,Rle=2;function Ple(e,t){return gp(e)&&VU(t)?HU(to(e),t):function(n){var r=pi(n,e);return r===void 0&&r===t?GU(n,e):Ve(t,r,Mle|Rle)}}var Ile=Ple;function Dle(e){return function(t){return t==null?void 0:t[e]}}var Lle=Dle;function Nle(e){return function(t){return no(t,e)}}var Fle=Nle;function Ble(e){return gp(e)?Lle(to(e)):Fle(e)}var kle=Ble;function zle(e){return typeof e=="function"?e:e==null?sI:typeof e=="object"?Pt(e)?Ile(e[0],e[1]):Sle(e):kle(e)}var lI=zle;function Ule(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var jle=Ule;function Vle(e){return e!==e}var Hle=Vle;function Gle(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Wle=Gle;function Zle(e,t,n){return t===t?Wle(e,t,n):jle(e,Hle,n)}var WU=Zle;function Xle(e,t){var n=e==null?0:e.length;return!!n&&WU(e,t,0)>-1}var Yle=Xle;function $le(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var qle=$le;function Kle(){}var ZU=Kle,Qle=1/0,Jle=Sc&&1/Fl(new Sc([,-0]))[1]==Qle?function(e){return new Sc(e)}:ZU,eue=Jle,tue=200;function nue(e,t,n){var r=-1,i=Yle,s=e.length,l=!0,c=[],h=c;if(n)l=!1,i=qle;else if(s>=tue){var p=t?null:eue(e);if(p)return Fl(p);l=!1,i=nf,h=new Ih}else h=t?[]:c;e:for(;++r<s;){var v=e[r],y=t?t(v):v;if(v=n||v!==0?v:0,l&&y===y){for(var b=h.length;b--;)if(h[b]===y)continue e;t&&h.push(y),c.push(v)}else i(h,y,n)||(h!==c&&h.push(y),c.push(v))}return c}var rue=nue;function iue(e,t){return e&&e.length?rue(e,lI(t,2)):[]}var uI=iue;function oue(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var l=e[i];t(r,l,n(l),e)}return r}var aue=oue;function sue(e,t){return e&&DU(e,t,Ju)}var lue=sue;function uue(e,t){return function(n,r){if(n==null)return n;if(!eu(n))return e(n,r);for(var i=n.length,s=t?i:-1,l=Object(n);(t?s--:++s<i)&&r(l[s],s,l)!==!1;);return n}}var cue=uue,fue=cue(lue),XU=fue;function hue(e,t,n,r){return XU(e,function(i,s,l){t(r,i,n(i),l)}),r}var due=hue;function pue(e,t){return function(n,r){var i=Pt(n)?aue:due,s=t?t():{};return i(n,e,lI(r,2),s)}}var vue=pue,mue=Object.prototype,gue=mue.hasOwnProperty,yue=vue(function(e,t,n){gue.call(e,n)?e[n].push(t):an(e,n,[t])}),YU=yue,cI=32,$U=16,qU=48,_ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XE=function(){return XE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XE.apply(this,arguments)},bue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},xue=function(e){_ue(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),s=r?uI(i,"x"):uI(i,"y"),l=["title"],c=[],h=this.chart.getContext().views,p=pi(h,[0,"layout"]),v=p.width,y=p.height;return s.forEach(function(b){var T=b.x,M=b.y,R=b.height,I=b.width,N=b.data,z=b.key,H=pi(N,l);r?c.push({x:T+I/2,y,text:H,key:z}):c.push({x:v,y:M+R/2,text:H,key:z})}),uI(c,"text").length!==c.length&&(c=Object.values(YU(c,"text")).map(function(b){var T,M=b.reduce(function(R,I){return R+(r?I.x:I.y)},0);return XE(XE({},b[0]),(T={},T[r?"x":"y"]=M/b.length,T))})),c},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(s){i.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,s=i.layout,l=i.labelFormatter,c=bue(i,["layout","labelFormatter"]);r.forEach(function(h){var p=h.x,v=h.y,y=h.text,b=h.key,T=new IU({style:XE({x:p,y:v,text:Yn(l)?l(y):y,wordWrap:!0,wordWrapWidth:s==="horizontal"?cI*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(c)),id:"text-".concat(b)});n.appendChild(T)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var s=i.x,l=i.y,c=i.key,h=n.getElementById("text-".concat(c));h.setAttribute("x",s),h.setAttribute("y",l)})},t.tag="BidirectionalBarAxisText",t}(jU),Eue={ConversionTag:dle,BidirectionalBarAxisText:xue},Sue=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;rI.forEach(function(n){var r,i=n.key,s=n.shape,l=t.config[i];if(l){var c=new Eue[s](t.chart,l),h=t.chart.getContext().canvas;h.appendChild(c),t.container.set(i,c)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&rI.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function wue(e,t,n,r){if(!he(e))return e;t=gi(t,e);for(var i=-1,s=t.length,l=s-1,c=e;c!=null&&++i<s;){var h=to(t[i]),p=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var v=c[h];p=r?r(v,h,c):void 0,p===void 0&&(p=he(v)?v:bf(t[i+1])?[]:{})}Rr(c,h,p),c=c[h]}return e}var KU=wue;function Tue(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var l=t[r],c=no(e,l);n(c,l)&&KU(s,gi(l,e),c)}return s}var Aue=Tue;function Cue(e,t){return Aue(e,t,function(n,r){return GU(e,r)})}var Oue=Cue,QU=mn?mn.isConcatSpreadable:void 0;function Mue(e){return Pt(e)||yf(e)||!!(QU&&e&&e[QU])}var Rue=Mue;function JU(e,t,n,r,i){var s=-1,l=e.length;for(n||(n=Rue),i||(i=[]);++s<l;){var c=e[s];t>0&&n(c)?t>1?JU(c,t-1,n,r,i):Vi(i,c):r||(i[i.length]=c)}return i}var Pue=JU;function Iue(e){var t=e==null?0:e.length;return t?Pue(e,1):[]}var Due=Iue;function Lue(e){return kU(BU(e,void 0,Due),e+"")}var fI=Lue,Nue=fI(function(e,t){return e==null?{}:Oue(e,t)}),ej=Nue,Fue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),px=function(){return px=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},px.apply(this,arguments)},tj="data-chart-source-type",Ll=function(e){Fue(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return px(px({},ej(this.options,gse)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[yse]?px(px({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new dse(this.getChartOptions()),this.container.setAttribute(tj,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new Sue(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Jy({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(tj)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(Dl.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(Bo),Bue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kue=function(e){Bue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Ll);function zue(){}var hI=zue;function uC(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}uC.prototype=sv(hI.prototype),uC.prototype.constructor=uC;var YE=uC,Uue=Uc&&new Uc,nj=Uue,jue=nj?function(e){return nj.get(e)}:ZU,rj=jue,Vue={},ij=Vue,Hue=Object.prototype,Gue=Hue.hasOwnProperty;function Wue(e){for(var t=e.name+"",n=ij[t],r=Gue.call(ij,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}var cC=Wue,Zue=4294967295;function fC(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zue,this.__views__=[]}fC.prototype=sv(hI.prototype),fC.prototype.constructor=fC;var dI=fC;function Xue(e){if(e instanceof dI)return e.clone();var t=new YE(e.__wrapped__,e.__chain__);return t.__actions__=ws(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Yue=Xue,$ue=Object.prototype,que=$ue.hasOwnProperty;function hC(e){if(Xs(e)&&!Pt(e)&&!(e instanceof dI)){if(e instanceof YE)return e;if(que.call(e,"__wrapped__"))return Yue(e)}return new YE(e)}hC.prototype=hI.prototype,hC.prototype.constructor=hC;var Kue=hC;function Que(e){var t=cC(e),n=Kue[t];if(typeof n!="function"||!(t in dI.prototype))return!1;if(e===n)return!0;var r=rj(n);return!!r&&e===r[0]}var oj=Que,Jue="Expected a function",ece=8,tce=32,nce=128,rce=256;function ice(e){return fI(function(t){var n=t.length,r=n,i=YE.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new TypeError(Jue);if(i&&!l&&cC(s)=="wrapper")var l=new YE([],!0)}for(r=l?r:n;++r<n;){s=t[r];var c=cC(s),h=c=="wrapper"?rj(s):void 0;h&&oj(h[0])&&h[1]==(nce|ece|tce|rce)&&!h[4].length&&h[9]==1?l=l[cC(h[0])].apply(l,h[3]):l=s.length==1&&oj(s)?l[c]():l.thru(s)}return function(){var p=arguments,v=p[0];if(l&&p.length==1&&Pt(v))return l.plant(v).value();for(var y=0,b=n?t[y].apply(this,p):v;++y<n;)b=t[y].call(this,b);return b}})}var oce=ice,ace=oce(),Hl=ace,sce=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(s){Pt(i[s])&&s!=="data"&&(i[s]=i[s].filter(function(l){return!l[eI]}))})}),t};function lce(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var uce=lce;function cce(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var fce=cce;function hce(e,t){return t.length<2?e:no(e,fce(t,0,-1))}var dce=hce;function pce(e,t){return t=gi(t,e),e=dce(e,t),e==null||delete e[to(uce(t))]}var vce=pce;function mce(e){return oI(e)?void 0:e}var gce=mce,yce=1,_ce=2,bce=4,xce=fI(function(e,t){var n={};if(e==null)return n;var r=!1;t=di(t,function(s){return s=gi(s,e),r||(r=s.length>1),s}),zr(e,Vh(e),n),r&&(n=Um(n,yce|_ce|bce,gce));for(var i=t.length;i--;)vce(n,t[i]);return n}),pI=xce;function Ece(e){return e===void 0}var Sce=Ece;function wce(e,t,n){return e==null?e:KU(e,t,n)}var Ra=wce,aj=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},Tce=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(tI).concat(oC.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(s){r.includes(s)&&delete i[s]})}),Object.keys(e).forEach(function(i){aj(aj([],PU,!0),rI.map(function(s){return s.key}),!0).includes(i)||delete e[i]}),e},Kl=function(e){var t=sce(e),n=t.children,r=n===void 0?[]:n,i=pI(t,[].concat(PU,oC.map(function(p){return p.key}))),s=function(p){var v;return(v=_se.find(function(y){return y.key===p}))===null||v===void 0?void 0:v.callback},l=function(p,v,y){var b=s(v);b?b(p,v,y):p[v]=Jy({},p[v],y)},c=function(p){Object.keys(p).forEach(function(v){if(p[v]){var y=oC.find(function(M){return M.key===v});if(y){var b=y.type,T=y.extend_keys;b?r.push(h(Jy({},ej(p,T),{type:b},p[v]))):Pt(p[v])&&p[v].forEach(function(M){r.push(h(M))})}}})},h=function(p){return c(p),Object.keys(tI).forEach(function(v){var y=tI[v];if(!Sce(p[v]))if(he(y)){var b=y.value,T=y.target,M=b(p[v]);l(p,T,M)}else Ra(p,y,p[v])}),p};return r.forEach(function(p){var v=Jy({},i,p);h(Jy(p,v))}),c(t),Tce(t),e},vI=function(){return vI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vI.apply(this,arguments)};function Ace(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var s=oC.map(function(c){return c.type}).filter(function(c){return!!c}),l=!1;return s.forEach(function(c){t[c]&&(l=!0,Ra(t,[c,"stack"],vI({y1:"y"},typeof n=="object"?n:{})))}),l&&!J5(r)&&!r&&Ra(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Nc(e){return Hl(Ace)(e)}function Cce(e){return Hl(Nc,Kl)(e)}var Oce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mce=function(e){Oce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Cce},t}(Ll),vx=function(){return vx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vx.apply(this,arguments)};function sj(e){var t=function(n){var r=n.options;pi(r,"children.length")>1&&Ra(r,"children",[{type:"interval"}]);var i=r.scale,s=r.markBackground,l=r.data,c=r.children,h=r.yField,p=pi(i,"y.domain",[]);if(s&&p.length&&Pt(l)){var v="domainMax",y=l.map(function(b){var T;return vx(vx({originData:vx({},b)},pI(b,h)),(T={},T[v]=p[p.length-1],T))});c.unshift(vx({type:"interval",data:y,yField:v,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return Hl(t,Nc,Kl)(e)}var Rce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[0],M=r[1],R=r[2],I=r[3],N=(M[1]-T[1])/2,z=n.document,H=z.createElement("g",{}),X=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],[R[0]-b,T[1]+N],I],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),Y=z.createElement("polygon",{style:{points:[[T[0]-b,T[1]+N],M,R,[R[0]-b,T[1]+N]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),ne=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],M,[T[0]+b,T[1]+N]],fill:s,fillOpacity:h-.2}});return H.appendChild(X),H.appendChild(Y),H.appendChild(ne),H}};Qs("shape.interval.bar25D",e)},Pce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Rce();var Ice=function(e){Pce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sj},t}(Ll),Dce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[1][0]-r[0][0],M=T/2+r[0][0],R=n.document,I=R.createElement("g",{}),N=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]+b],[M,r[3][1]+b],[r[3][0],r[3][1]]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),z=R.createElement("polygon",{style:{points:[[M,r[1][1]+b],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[M,r[2][1]+b]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),H=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]-b],[r[1][0],r[1][1]],[M,r[1][1]+b]],fill:s,fillOpacity:h-.2}});return I.appendChild(z),I.appendChild(N),I.appendChild(H),I}};Qs("shape.interval.column25D",e)},Lce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Dce();var Nce=function(e){Lce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return sj},t}(Ll);function Fce(e){var t=function(r){var i=r.options,s=i.children,l=s===void 0?[]:s,c=i.legend;return c&&l.forEach(function(h){if(!pi(h,"colorField")){var p=pi(h,"yField");Ra(h,"colorField",function(){return p})}}),r},n=function(r){var i=r.options,s=i.annotations,l=s===void 0?[]:s,c=i.children,h=c===void 0?[]:c,p=i.scale,v=!1;return pi(p,"y.key")||h.forEach(function(y,b){if(!pi(y,"scale.y.key")){var T="child".concat(b,"Scale");Ra(y,"scale.y.key",T);var M=y.annotations,R=M===void 0?[]:M;R.length>0&&(Ra(y,"scale.y.independent",!1),R.forEach(function(I){Ra(I,"scale.y.key",T)})),!v&&l.length>0&&pi(y,"scale.y.independent")===void 0&&(v=!0,Ra(y,"scale.y.independent",!1),l.forEach(function(I){Ra(I,"scale.y.key",T)}))}}),r};return Hl(t,n,Nc,Kl)(e)}var Bce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lj=function(e){Bce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Fce},t}(Ll);function kce(e){var t=function(s){var l=s.options,c=l.xField,h=l.colorField;return h||Ra(l,"colorField",c),s},n=function(s){var l=s.options,c=l.compareField,h=l.transform,p=l.isTransposed,v=p===void 0?!0:p,y=l.coordinate;return h||(c?Ra(l,"transform",[]):Ra(l,"transform",[{type:"symmetryY"}])),!y&&v&&Ra(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,c=l.compareField,h=l.seriesField,p=l.data,v=l.children,y=l.yField,b=l.isTransposed,T=b===void 0?!0:b;if(c||h){var M=Object.values(YU(p,function(R){return R[c||h]}));v[0].data=M[0],v.push({type:"interval",data:M[1],yField:function(R){return-R[y]}}),delete l.compareField,delete l.data}return h&&(Ra(l,"type","spaceFlex"),Ra(l,"ratio",[1,1]),Ra(l,"direction",T?"row":"col"),delete l.seriesField),s},i=function(s){var l=s.options,c=l.tooltip,h=l.xField,p=l.yField;return c||Ra(l,"tooltip",{title:!1,items:[function(v){return{name:v[h],value:v[p]}}]}),s};return Hl(t,n,r,i,Nc,Kl)(e)}var zce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uce=function(e){zce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return kce},t}(Ll);function jce(e){return Hl(Nc,Kl)(e)}var Vce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hce=function(e){Vce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jce},t}(Ll);function $E(e){switch(typeof e){case"function":return e;case"string":return function(t){return pi(t,[e])};default:return function(){return e}}}var e_=function(){return e_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},e_.apply(this,arguments)};function Gce(e){var t=function(n){var r=n.options,i=r.angleField,s=r.data,l=r.label,c=r.tooltip,h=r.colorField,p=$E(h);if(Pt(s)){var v=s.reduce(function(b,T){return b+T[i]},0);if(v===0){var y=s.map(function(b){var T;return e_(e_({},b),(T={},T[i]=1,T))});Ra(r,"data",y),l&&Ra(r,"label",e_(e_({},l),{formatter:function(){return 0}})),c!==!1&&Ra(r,"tooltip",e_(e_({},c),{items:[function(b,T,M){return{name:p(b,T,M),value:0}}]}))}}return n};return Hl(t,Kl)(e)}var Wce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zce=function(e){Wce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Gce},t}(Ll);function Xce(e){return Hl(Nc,Kl)(e)}var Yce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$ce=function(e){Yce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xce},t}(Ll);function qce(e){var t=function(n){return Ra(n,"options.coordinate",{type:pi(n,"options.coordinateType","polar")}),n};return Hl(t,Kl)(e)}var Kce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qce=function(e){Kce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qce},t}(Ll);function Jce(e,t){var n=-1,r=eu(e)?Array(e.length):[];return XU(e,function(i,s,l){r[++n]=t(i,s,l)}),r}var efe=Jce;function tfe(e,t){var n=Pt(e)?di:efe;return n(e,lI(t,3))}var mx=tfe,zg=function(){return zg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zg.apply(this,arguments)},nfe="__stock-range__",rfe="trend",ife="up",ofe="down";function afe(e){var t=function(r){var i=r.options,s=i.data,l=i.yField;return r.options.data=mx(s,function(c){var h=c&&zg({},c);if(Array.isArray(l)&&h){var p=l[0],v=l[1],y=l[2],b=l[3];h[rfe]=h[p]<=h[v]?ife:ofe,h[nfe]=[h[p],h[v],h[y],h[b]]}return h}),r},n=function(r){var i=r.options,s=i.xField,l=i.yField,c=i.fallingFill,h=i.risingFill,p=l[0],v=l[1],y=l[2],b=l[3],T=$E(s);return r.options.children=mx(r.options.children,function(M,R){var I=R===0;return zg(zg({},M),{tooltip:{title:function(N,z,H){var X=T(N,z,H);return X instanceof Date?X.toLocaleString():X},items:[{field:y},{field:b},{field:p},{field:v}]},encode:zg(zg({},M.encode||{}),{y:I?[y,b]:[p,v],color:function(N){return Math.sign(N[v]-N[p])}}),style:zg(zg({},M.style||{}),{lineWidth:I?1:10})})}),delete i.yField,r.options.legend={color:!1},c&&Ra(r,"options.scale.color.range[0]",c),h&&Ra(r,"options.scale.color.range[2]",h),r};return Hl(t,n,Kl)(e)}var sfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lfe=["#26a69a","#999999","#ef5350"],ufe=function(e){sfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:lfe},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return afe},t}(Ll);function cfe(e){return Hl(Nc,Kl)(e)}var ffe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hfe=function(e){ffe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return cfe},t}(Ll);function dfe(e){return Hl(Nc,Kl)(e)}var pfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vfe=function(e){pfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dfe},t}(Ll);function mfe(e){return Hl(Nc,Kl)(e)}var gfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yfe=function(e){gfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mfe},t}(Ll),mI=function(){return mI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mI.apply(this,arguments)};function _fe(e){var t=function(n){var r=n.options,i=r.percent,s=r.color,l=s===void 0?[]:s;if(!i)return n;var c={scale:{color:{range:l.length?l:[]}},data:[1,i]};return Object.assign(r,mI({},c)),n};return Hl(t,Nc,Kl)(e)}var bfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xfe=function(e){bfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _fe},t}(Ll),gI=function(){return gI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gI.apply(this,arguments)};function Efe(e){var t=function(r){var i=r.options,s=i.radius,l=s===void 0?.8:s;return Ra(r,"options.coordinate.innerRadius",l),r},n=function(r){var i=r.options,s=i.percent,l=i.color,c=l===void 0?[]:l;if(!s)return r;var h={scale:{color:{range:c.length?c:[]}},data:[1,s]};return Object.assign(i,gI({},h)),r};return Hl(t,n,Nc,Kl)(e)}var Sfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wfe=function(e){Sfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Efe},t}(Ll);function Tfe(e){return Hl(Kl)(e)}var Afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cfe=function(e){Afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Tfe},t}(Ll),yI="__start__",gx="__end__",_I="__waterfall_value__",bI=function(){return bI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bI.apply(this,arguments)},Ofe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function Mfe(e){var t=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.yField;return l.length&&(l.reduce(function(h,p,v){var y,b=$E(c),T=b(p,v,l);if(v===0||p.isTotal)p[yI]=0,p[gx]=T,p[_I]=T;else{var M=(y=h[gx])!==null&&y!==void 0?y:b(h,v,l);p[yI]=M,p[gx]=M+T,p[_I]=h[gx]}return p},[]),Object.assign(i,{yField:[yI,gx]})),r},n=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.xField,h=i.children,p=i.linkStyle,v=Ofe([],l,!0);return v.reduce(function(y,b,T){return T>0&&(b.x1=y[c],b.x2=b[c],b.y1=y[gx]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:bI({stroke:"#697474"},p),label:!1,tooltip:!1}),r};return Hl(t,n,Nc,Kl)(e)}var Rfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pfe=function(e){Rfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:_I,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Mfe},t}(Ll),Ife="[object Number]";function Dfe(e){return typeof e=="number"||Xs(e)&&pe(e)==Ife}var yx=Dfe,Lfe=Object.prototype,Nfe=Lfe.hasOwnProperty,Ffe=zU(function(e,t){if(hc(t)||eu(t)){zr(t,Ju(t),e);return}for(var n in t)Nfe.call(t,n)&&Rr(e,n,t[n])}),uj=Ffe,Bfe=/\s/;function kfe(e){for(var t=e.length;t--&&Bfe.test(e.charAt(t)););return t}var zfe=kfe,Ufe=/^\s+/;function jfe(e){return e&&e.slice(0,zfe(e)+1).replace(Ufe,"")}var Vfe=jfe,cj=NaN,Hfe=/^[-+]0x[0-9a-f]+$/i,Gfe=/^0b[01]+$/i,Wfe=/^0o[0-7]+$/i,Zfe=parseInt;function Xfe(e){if(typeof e=="number")return e;if(kd(e))return cj;if(he(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=he(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Vfe(e);var n=Gfe.test(e);return n||Wfe.test(e)?Zfe(e.slice(2),n?2:8):Hfe.test(e)?cj:+e}var fj=Xfe,hj=1/0,Yfe=17976931348623157e292;function $fe(e){if(!e)return e===0?e:0;if(e=fj(e),e===hj||e===-hj){var t=e<0?-1:1;return t*Yfe}return e===e?e:0}var qfe=$fe;function Kfe(e){var t=qfe(e),n=t%1;return t===t?n?t-n:t:0}var dj=Kfe,Qfe=Ie.isFinite,Jfe=Math.min;function ehe(e){var t=Math[e];return function(n,r){if(n=fj(n),r=r==null?0:Jfe(dj(r),292),r&&Qfe(n)){var i=(dr(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(dr(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var the=ehe,nhe=the("ceil"),rhe=nhe,ihe=NaN;function ohe(e){return typeof e=="number"?e:kd(e)?ihe:+e}var pj=ohe;function ahe(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=mi(n),r=mi(r)):(n=pj(n),r=pj(r)),i=e(n,r)}return i}}var she=ahe,lhe=she(function(e,t){return e/t},1),uhe=lhe;function che(e){var t=function(n){var r=n.options,i=r.data,s=r.binNumber,l=r.binWidth,c=r.children,h=r.channel,p=h===void 0?"count":h,v=pi(c,"[0].transform[0]",{});return yx(l)?(uj(v,{thresholds:rhe(uhe(i.length,l)),y:p}),n):(yx(s)&&uj(v,{thresholds:s,y:p}),n)};return Hl(t,Nc,Kl)(e)}var fhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hhe=function(e){fhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return che},t}(Ll);function dhe(e){var t=function(r){var i=r.options,s=i.tooltip,l=s===void 0?{}:s,c=i.colorField,h=i.sizeField;return l&&!l.field&&(l.field=c||h),r},n=function(r){var i=r.options,s=i.mark,l=i.children;return s&&(l[0].type=s),r};return Hl(t,n,Nc,Kl)(e)}var phe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vhe=function(e){phe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dhe},t}(Ll);function mhe(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Hl(t,Nc,Kl)(e)}var ghe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yhe=function(e){ghe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mhe},t}(Ll);function _he(e){var t=function(n){var r=n.options,i=r.data,s=[{type:"custom",callback:function(c){return{links:c}}}];if(Pt(i))i.length>0?Ra(r,"data",{value:i,transform:s}):delete r.children;else if(pi(i,"type")==="fetch"&&pi(i,"value")){var l=pi(i,"transform");Pt(l)?Ra(i,"transform",l.concat(s)):Ra(i,"transform",s)}return n};return Hl(t,Nc,Kl)(e)}var bhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xhe=function(e){bhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _he},t}(Ll);function Ehe(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function She(e){Ehe(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function whe(e){return e==null}var The=whe,Ahe="[object String]";function Che(e){return typeof e=="string"||!Pt(e)&&Xs(e)&&pe(e)==Ahe}var vj=Che;function Ohe(e,t){return di(t,function(n){return e[n]})}var Mhe=Ohe;function Rhe(e){return e==null?[]:Mhe(e,Ju(e))}var Phe=Rhe,Ihe=Math.max;function Dhe(e,t,n,r){e=eu(e)?e:Phe(e),n=n&&!r?dj(n):0;var i=e.length;return n<0&&(n=Ihe(i+n,0)),vj(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&WU(e,t,n)>-1}var Lhe=Dhe,Fv=function(){return Fv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fv.apply(this,arguments)},dC=["#f0efff","#5B8FF9","#3D76DD"];function xI(e,t,n,r){r===void 0&&(r=!0);var i=0,s=!1,l=mx(e,function(c){var h,p,v=pi(c,[t]);if(The(v))return[];if(vj(v)){var y=Number(v);return isNaN(y)?[]:(h={},h[n]=c[n],h[t]=y,h)}return Pt(v)?(s=!0,i=Math.max(i,v.length),mx(r?v.sort(function(b,T){return T-b}):v,function(b,T){var M;return M={},M[n]=c[n],M[t]=b,M.index=T,M})):(i=Math.max(1,i),p={},p[n]=c[n],p[t]=v,p)}).flat();return s?[l.map(function(c){return Fv({index:0},c)}),i]:[l,i]}function EI(e,t){return new Array(e).fill("").map(function(n,r){return Pt(t)?t[r%t.length]:t})}function Nhe(e){var t=function(i){var s=i.options,l=s.color,c=s.rangeField,h=c===void 0?"ranges":c,p=s.measureField,v=p===void 0?"measures":p,y=s.targetField,b=y===void 0?"targets":y,T=s.xField,M=T===void 0?"title":T,R=s.mapField,I=s.data,N=xI(I,h,M),z=N[0],H=N[1],X=xI(I,v,M,!1),Y=X[0],ne=X[1],ve=xI(I,b,M,!1),ye=ve[0],De=ve[1],Ye=pi(l,[h],dC[0]),Qe=pi(l,[v],dC[1]),yt=pi(l,[b],dC[2]),qe=[EI(H,Ye),EI(ne,Qe),EI(De,yt)].flat();return i.options.children=mx(i.options.children,function(ut,ft){var mt=[z,Y,ye][ft],Xt=[h,v,b][ft];return Fv(Fv({},ut),{data:mt,encode:Fv(Fv({},ut.encode||{}),{x:M,y:Xt,color:function(Mt){var kt=Mt.index,Tn=yx(kt)?"".concat(Xt,"_").concat(kt):Xt;return R?pi(R,[Xt,kt],Tn):Tn}}),style:Fv(Fv({},ut.style||{}),{zIndex:function(Mt){return-Mt[Xt]}}),labels:ft!==0?mx(ut.labels,function(Mt){return Fv(Fv({},Mt),{text:Xt})}):void 0})}),i.options.scale.color.range=qe,i.options.legend.color.itemMarker=function(ut){return R&&Lhe(R==null?void 0:R[b],ut)||(ut==null?void 0:ut.replace(/\_\d$/,""))===b?"line":"square"},i},n=function(i){var s=i.options.layout,l=s===void 0?"horizontal":s;return l!=="horizontal"&&Ra(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var s=i.options,l=s.range,c=l===void 0?{}:l,h=s.measure,p=h===void 0?{}:h,v=s.target,y=v===void 0?{}:v,b=s.children;return i.options.children=[c,p,y].map(function(T,M){return Jy(b[M],T)}),i};return Hl(t,n,r,She,Kl)(e)}var Fhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bhe=function(e){Fhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:dC}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Nhe},t}(Ll);function khe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return Hl(t,Nc,Kl)(e)}var zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uhe=function(e){zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return khe},t}(Ll);function jhe(e){var t=function(n){var r=n.options.percent;return yx(r)&&Ra(n,"options.data",r),n};return Hl(t,Nc,Kl)(e)}var Vhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hhe=function(e){Vhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jhe},t}(Ll);function Ghe(e){return Hl(Nc,Kl)(e)}var Whe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zhe=function(e){Whe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ghe},t}(Ll);function Xhe(e){var t=function(n){var r=n.options,i=r.data;return i&&Ra(r,"data",{value:i}),n};return Hl(t,Nc,Kl)(e)}var Yhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$he=function(e){Yhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xhe},t}(Ll),b1=function(){return b1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b1.apply(this,arguments)};function qhe(e){var t=function(i){var s=i.options,l=s.startAngle,c=s.maxAngle,h=s.coordinate,p=yx(l)?l/(2*Math.PI)*360:-90,v=yx(c)?(Number(c)+p)/180*Math.PI:Math.PI;return Ra(i,["options","coordinate"],b1(b1({},h),{endAngle:v,startAngle:l!=null?l:-Math.PI/2})),i},n=function(i){var s=i.options,l=s.tooltip,c=s.xField,h=s.yField,p=$E(c),v=$E(h);return l||Ra(s,"tooltip",{title:!1,items:[function(y,b,T){return{name:p(y,b,T),value:v(y,b,T)}}]}),i},r=function(i){var s=i.options,l=s.markBackground,c=s.children,h=s.scale,p=s.coordinate,v=s.xField,y=pi(h,"y.domain",[]);return l&&c.unshift(b1({type:"interval",xField:v,yField:y[y.length-1],colorField:l.color,scale:{color:{type:"identity"}},style:{fillOpacity:l.opacity,fill:l.color?void 0:"#e0e4ee"},coordinate:b1(b1({},p),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},l)),i};return Hl(t,n,r,Nc,Kl)(e)}var Khe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qhe=function(e){Khe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qhe},t}(Ll);function Jhe(e){return Hl(Kl)(e)}var ede=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tde=function(e){ede(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jhe},t}(Ll),pC=function(){return pC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pC.apply(this,arguments)};function nde(e){var t=function(n){var r=n.options,i=r.xField,s=r.yField,l=r.seriesField,c=r.children,h=c==null?void 0:c.map(function(p){return pC(pC({},p),{xField:i,yField:s,seriesField:l,colorField:l,data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[i,l]}]}:p.data})}).filter(function(p){return r.violinType!=="density"||p.type==="density"});return Ra(r,"children",h),r.violinType==="polar"&&Ra(r,"coordinate",{type:"polar"}),Ra(r,"violinType",void 0),n};return Hl(t,Nc,Kl)(e)}var rde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ide=function(e){rde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nde},t}(Ll),qE=function(){return qE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qE.apply(this,arguments)},ode=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function ade(e){var t=function(s){var l=s.options,c=l.yField,h=l.children;return h.forEach(function(p,v){Ra(p,"yField",c[v])}),s},n=function(s){var l=s.options,c=l.yField,h=l.children,p=l.data;if(oI(p))return s;var v=Pt(pi(p,[0]))?p:[p,p];return h.forEach(function(y,b){Ra(y,"data",ode([],v[b].map(function(T){return qE({groupKey:c[b]},T)}),!0))}),s},r=function(s){var l=s.options,c=l.yField,h=c[0],p=c[1],v=l.tooltip;return v||Ra(l,"tooltip",{items:[{field:h,value:h},{field:p,value:p}]}),s},i=function(s){var l=s.options,c=l.children,h=l.layout,p=l.coordinate.transform,v=l.paddingBottom,y=v===void 0?qU:v,b=l.paddingLeft,T=b===void 0?qU:b,M=l.axis;Ra(l,"axisText",qE(qE({},(M==null?void 0:M.x)||{}),{layout:h}));var R=c[0],I=c[1];if(h==="vertical")Ra(l,"direction","col"),Ra(l,"paddingLeft",T),Ra(l,"coordinate.transform",p.filter(function(Y){return Y.type!=="transpose"})),Ra(R,"paddingBottom",$U),Ra(I,"paddingTop",$U),Ra(I,"axis",{x:{position:"top"}}),Ra(I,"scale",{y:{range:[0,1]}});else{Ra(l,"paddingBottom",y),Ra(R,"scale",{y:{range:[0,1]}});var N=R.paddingRight,z=N===void 0?cI:N,H=I.paddingLeft,X=H===void 0?cI:H;Ra(R,"paddingRight",z),Ra(R,"axis",{x:{position:"right"}}),Ra(I,"paddingLeft",X)}return s};return Hl(t,n,r,i,Nc,Kl)(e)}var sde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lde=function(e){sde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ade},t}(Ll),x1;(function(e){e.color="key",e.d="path"})(x1||(x1={}));function ude(e){var t=function(n){var r=n.options,i=r.data,s=r.setsField,l=r.sizeField;return Pt(i)&&(Ra(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:s,size:l,as:[x1.color,x1.d]}]}),Ra(r,"colorField",s),Ra(r,["children","0","encode","d"],x1.d)),Ra(n,"options",pI(r,["sizeField","setsField"])),n};return Hl(t,Kl)(e)}var cde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fde=function(e){cde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:x1.color,d:x1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ude},t}(Ll);function hde(e){var t=function(n){return n};return Hl(t,Kl)(e)}var dde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pde=function(e){dde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return hde},t}(Ll),vde={Base:kue,Line:Hce,Column:Nce,Pie:Zce,Area:Mce,Bar:Ice,DualAxes:lj,Funnel:Uce,Scatter:$ce,Radar:Qce,Rose:Cfe,Stock:ufe,TinyLine:hfe,TinyArea:vfe,TinyColumn:yfe,TinyProgress:xfe,TinyRing:wfe,Waterfall:Pfe,Histogram:hhe,Heatmap:vhe,Box:yhe,Sankey:xhe,Bullet:Bhe,Gauge:Uhe,Liquid:Hhe,WordCloud:Zhe,Treemap:$he,RadialBar:Qhe,CirclePacking:tde,Violin:ide,BidirectionalBar:lde,Venn:fde,Mix:lj,Sunburst:pde},SI=function(){return SI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},SI.apply(this,arguments)},mj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},mde=(0,ee.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=mj(e,["chartType"]),s=i.containerStyle,l=s===void 0?{height:"inherit"}:s,c=i.containerAttributes,h=c===void 0?{}:c,p=i.className,v=i.loading,y=i.loadingTemplate,b=i.errorTemplate,T=mj(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),M=Ki(vde[r],T),R=M.chart,I=M.container;return(0,ee.useImperativeHandle)(t,function(){return R.current}),ee.createElement(nt,{errorTemplate:b},v&&ee.createElement(St,{loadingTemplate:y}),ee.createElement("div",SI({className:p,style:l,ref:I},h)))})},78677:function(gt,G,L){"use strict";var q=L(67294),W=L(85591),E=function(){return E=Object.assign||function(ee){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(ee[ae]=ue[ae])}return ee},E.apply(this,arguments)},de=(0,q.forwardRef)(function(ee,ue){return q.createElement(W.P,E({},ee,{chartType:"Column",ref:ue}))});G.Z=de},80652:function(gt,G,L){"use strict";var q=L(67294),W=L(85591),E=function(){return E=Object.assign||function(ee){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(ee[ae]=ue[ae])}return ee},E.apply(this,arguments)},de=(0,q.forwardRef)(function(ee,ue){return q.createElement(W.P,E({},ee,{chartType:"Line",ref:ue}))});G.Z=de},63430:function(gt,G,L){"use strict";var q=L(67294),W=L(85591),E=function(){return E=Object.assign||function(ee){for(var ue,ce=1,xe=arguments.length;ce<xe;ce++){ue=arguments[ce];for(var ae in ue)Object.prototype.hasOwnProperty.call(ue,ae)&&(ee[ae]=ue[ae])}return ee},E.apply(this,arguments)},de=(0,q.forwardRef)(function(ee,ue){return q.createElement(W.P,E({},ee,{chartType:"Pie",ref:ue}))});G.Z=de},6466:function(gt,G,L){"use strict";L.d(G,{Z:function(){return _t}});var q=L(4942),W=L(1413),E=L(45987),de=L(28459),ee=L(93967),ue=L.n(ee),ce=L(67294),xe=L(53911),ae=L(44962),We=L(98082),te=function(Ae){return(0,q.Z)({},Ae.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ae.marginLG,marginInline:0,color:Ae.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function me(Me){return(0,We.Xj)("ProCardOperation",function(Ae){var je=(0,W.Z)((0,W.Z)({},Ae),{},{componentCls:".".concat(Me)});return[te(je)]})}var Re=L(85893),$=function(Ae){var je=Ae.className,Ze=Ae.style,lt=Ze===void 0?{}:Ze,en=Ae.children,Le=(0,ce.useContext)(de.ZP.ConfigContext),St=Le.getPrefixCls,Oe=St("pro-card-operation"),nt=me(Oe),Ke=nt.wrapSSR,Xe=nt.hashId,Rt=ue()(Oe,je,Xe);return Ke((0,Re.jsx)("div",{className:Rt,style:lt,children:en}))},le=$,K=L(96604),we=function(Ae){return(0,q.Z)({},Ae.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,q.Z)({flexDirection:"row"},"".concat(Ae.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ae.colorBorder)}})};function et(Me){return(0,We.Xj)("StatisticCard",function(Ae){var je=(0,W.Z)((0,W.Z)({},Ae),{},{componentCls:".".concat(Me)});return[we(je)]})}var Je=["children","statistic","className","chart","chartPlacement","footer"],wt=function(Ae){var je=Ae.children,Ze=Ae.statistic,lt=Ae.className,en=Ae.chart,Le=Ae.chartPlacement,St=Ae.footer,Oe=(0,E.Z)(Ae,Je),nt=(0,ce.useContext)(de.ZP.ConfigContext),Ke=nt.getPrefixCls,Xe=Ke("pro-statistic-card"),Rt=et(Xe),bt=Rt.wrapSSR,Ie=Rt.hashId,Gt=ue()(Xe,lt,Ie),mn=Ze&&(0,Re.jsx)(K.Z,(0,W.Z)({layout:"vertical"},Ze)),Ln=ue()("".concat(Xe,"-chart"),Ie,(0,q.Z)((0,q.Z)({},"".concat(Xe,"-chart-left"),Le==="left"&&en&&Ze),"".concat(Xe,"-chart-right"),Le==="right"&&en&&Ze)),qn=en&&(0,Re.jsx)("div",{className:Ln,children:en}),rr=ue()("".concat(Xe,"-content "),Ie,(0,q.Z)({},"".concat(Xe,"-content-horizontal"),Le==="left"||Le==="right")),Ft=(qn||mn)&&(Le==="left"?(0,Re.jsxs)("div",{className:rr,children:[qn,mn]}):(0,Re.jsxs)("div",{className:rr,children:[mn,qn]})),Jt=St&&(0,Re.jsx)("div",{className:"".concat(Xe,"-footer ").concat(Ie).trim(),children:St});return bt((0,Re.jsxs)(xe.Z,(0,W.Z)((0,W.Z)({className:Gt},Oe),{},{children:[Ft,je,Jt]})))},pt=function(Ae){return(0,Re.jsx)(wt,(0,W.Z)({bodyStyle:{padding:0}},Ae))};wt.Statistic=K.Z,wt.Divider=ae.Z,wt.Operation=le,wt.isProCard=!0,wt.Group=pt;var _t=wt},96604:function(gt,G,L){"use strict";L.d(G,{Z:function(){return on}});var q=L(1413),W=L(4942),E=L(45987),de=L(87462),ee=L(67294),ue=L(36688),ce=L(5627),xe=function(Vt,ze){return ee.createElement(ce.Z,(0,de.Z)({},Vt,{ref:ze,icon:ue.Z}))},ae=ee.forwardRef(xe),We=ae,te=L(28459),me=L(83062),Re=L(40411),$=L(57838),le=L(96159),K=L(93967),we=L.n(K),et=L(64217),Je=L(53124),wt=L(87564),_t=Dt=>{const{value:Vt,formatter:ze,precision:rt,decimalSeparator:jt,groupSeparator:U="",prefixCls:pe}=Dt;let ct;if(typeof ze=="function")ct=ze(Vt);else{const he=String(Vt),$t=he.match(/^(-?)(\d*)(\.(\d+))?$/);if(!$t||he==="-")ct=he;else{const sn=$t[1];let pn=$t[2]||"0",Dn=$t[4]||"";pn=pn.replace(/\B(?=(\d{3})+(?!\d))/g,U),typeof rt=="number"&&(Dn=Dn.padEnd(rt,"0").slice(0,rt>0?rt:0)),Dn&&(Dn=`${jt}${Dn}`),ct=[ee.createElement("span",{key:"int",className:`${pe}-content-value-int`},sn,pn),Dn&&ee.createElement("span",{key:"decimal",className:`${pe}-content-value-decimal`},Dn)]}}return ee.createElement("span",{className:`${pe}-content-value`},ct)},Me=L(14747),Ae=L(91945),je=L(45503);const Ze=Dt=>{const{componentCls:Vt,marginXXS:ze,padding:rt,colorTextDescription:jt,titleFontSize:U,colorTextHeading:pe,contentFontSize:ct,fontFamily:he}=Dt;return{[`${Vt}`]:Object.assign(Object.assign({},(0,Me.Wf)(Dt)),{[`${Vt}-title`]:{marginBottom:ze,color:jt,fontSize:U},[`${Vt}-skeleton`]:{paddingTop:rt},[`${Vt}-content`]:{color:pe,fontSize:ct,fontFamily:he,[`${Vt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${Vt}-content-prefix, ${Vt}-content-suffix`]:{display:"inline-block"},[`${Vt}-content-prefix`]:{marginInlineEnd:ze},[`${Vt}-content-suffix`]:{marginInlineStart:ze}}})}},lt=Dt=>{const{fontSizeHeading3:Vt,fontSize:ze}=Dt;return{titleFontSize:ze,contentFontSize:Vt}};var en=(0,Ae.I$)("Statistic",Dt=>{const Vt=(0,je.TS)(Dt,{});return[Ze(Vt)]},lt),Le=function(Dt,Vt){var ze={};for(var rt in Dt)Object.prototype.hasOwnProperty.call(Dt,rt)&&Vt.indexOf(rt)<0&&(ze[rt]=Dt[rt]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,rt=Object.getOwnPropertySymbols(Dt);jt<rt.length;jt++)Vt.indexOf(rt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Dt,rt[jt])&&(ze[rt[jt]]=Dt[rt[jt]]);return ze},Oe=Dt=>{const{prefixCls:Vt,className:ze,rootClassName:rt,style:jt,valueStyle:U,value:pe=0,title:ct,valueRender:he,prefix:$t,suffix:sn,loading:pn=!1,formatter:Dn,precision:Wn,decimalSeparator:Yn=".",groupSeparator:fn=",",onMouseEnter:vt,onMouseLeave:Pt}=Dt,An=Le(Dt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:Pn,direction:Xn,statistic:dt}=ee.useContext(Je.E_),Se=Pn("statistic",Vt),[Be,st,Lt]=en(Se),It=ee.createElement(_t,{decimalSeparator:Yn,groupSeparator:fn,prefixCls:Se,formatter:Dn,precision:Wn,value:pe}),wn=we()(Se,{[`${Se}-rtl`]:Xn==="rtl"},dt==null?void 0:dt.className,ze,rt,st,Lt),Kn=(0,et.Z)(An,{aria:!0,data:!0});return Be(ee.createElement("div",Object.assign({},Kn,{className:wn,style:Object.assign(Object.assign({},dt==null?void 0:dt.style),jt),onMouseEnter:vt,onMouseLeave:Pt}),ct&&ee.createElement("div",{className:`${Se}-title`},ct),ee.createElement(wt.Z,{paragraph:!1,loading:pn,className:`${Se}-skeleton`},ee.createElement("div",{style:U,className:`${Se}-content`},$t&&ee.createElement("span",{className:`${Se}-content-prefix`},$t),he?he(It):It,sn&&ee.createElement("span",{className:`${Se}-content-suffix`},sn)))))};const nt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Ke(Dt,Vt){let ze=Dt;const rt=/\[[^\]]*]/g,jt=(Vt.match(rt)||[]).map(he=>he.slice(1,-1)),U=Vt.replace(rt,"[]"),pe=nt.reduce((he,$t)=>{let[sn,pn]=$t;if(he.includes(sn)){const Dn=Math.floor(ze/pn);return ze-=Dn*pn,he.replace(new RegExp(`${sn}+`,"g"),Wn=>{const Yn=Wn.length;return Dn.toString().padStart(Yn,"0")})}return he},U);let ct=0;return pe.replace(rt,()=>{const he=jt[ct];return ct+=1,he})}function Xe(Dt,Vt){const{format:ze=""}=Vt,rt=new Date(Dt).getTime(),jt=Date.now(),U=Math.max(rt-jt,0);return Ke(U,ze)}var Rt=function(Dt,Vt){var ze={};for(var rt in Dt)Object.prototype.hasOwnProperty.call(Dt,rt)&&Vt.indexOf(rt)<0&&(ze[rt]=Dt[rt]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,rt=Object.getOwnPropertySymbols(Dt);jt<rt.length;jt++)Vt.indexOf(rt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Dt,rt[jt])&&(ze[rt[jt]]=Dt[rt[jt]]);return ze};const bt=1e3/30;function Ie(Dt){return new Date(Dt).getTime()}const Gt=Dt=>{const{value:Vt,format:ze="HH:mm:ss",onChange:rt,onFinish:jt}=Dt,U=Rt(Dt,["value","format","onChange","onFinish"]),pe=(0,$.Z)(),ct=ee.useRef(null),he=()=>{jt==null||jt(),ct.current&&(clearInterval(ct.current),ct.current=null)},$t=()=>{const Dn=Ie(Vt);Dn>=Date.now()&&(ct.current=setInterval(()=>{pe(),rt==null||rt(Dn-Date.now()),Dn<Date.now()&&he()},bt))};ee.useEffect(()=>($t(),()=>{ct.current&&(clearInterval(ct.current),ct.current=null)}),[Vt]);const sn=(Dn,Wn)=>Xe(Dn,Object.assign(Object.assign({},Wn),{format:ze})),pn=Dn=>(0,le.Tm)(Dn,{title:void 0});return ee.createElement(Oe,Object.assign({},U,{value:Vt,valueRender:pn,formatter:sn}))};var mn=ee.memo(Gt);Oe.Countdown=mn;var Ln=Oe,qn=L(98082),rr=function(Vt){return(0,W.Z)({},Vt.componentCls,(0,W.Z)((0,W.Z)((0,W.Z)((0,W.Z)((0,W.Z)({display:"flex",fontSize:Vt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,W.Z)({display:"flex",width:"100%"},"".concat(Vt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,W.Z)({width:"100%"},"".concat(Vt.antCls,"-statistic-content"),{"&-value-int":{fontSize:Vt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(Vt.antCls,"-statistic-title"),{color:Vt.colorText}),"&-trend-up",(0,W.Z)({},"".concat(Vt.antCls,"-statistic-content"),(0,W.Z)({color:"#f5222d"},"".concat(Vt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,W.Z)({},"".concat(Vt.antCls,"-statistic-content"),(0,W.Z)({color:"#389e0d"},"".concat(Vt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,W.Z)((0,W.Z)((0,W.Z)({display:"flex",justifyContent:"space-between"},"".concat(Vt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(Vt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(Vt.antCls,"-statistic-title,").concat(Vt.antCls,"-statistic-content,").concat(Vt.antCls,"-statistic-content-suffix,").concat(Vt.antCls,"-statistic-content-prefix,").concat(Vt.antCls,"-statistic-content-value-decimal"),{fontSize:Vt.fontSize})),"& &-layout-inline",(0,W.Z)((0,W.Z)((0,W.Z)({display:"inline-flex",color:Vt.colorTextSecondary},"".concat(Vt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(Vt.antCls,"-statistic-content"),{color:Vt.colorTextSecondary}),"".concat(Vt.antCls,"-statistic-title,").concat(Vt.antCls,"-statistic-content,").concat(Vt.antCls,"-statistic-content-suffix,").concat(Vt.antCls,"-statistic-content-prefix,").concat(Vt.antCls,"-statistic-content-value-decimal"),{fontSize:Vt.fontSizeSM})))};function Ft(Dt){return(0,qn.Xj)("Statistic",function(Vt){var ze=(0,q.Z)((0,q.Z)({},Vt),{},{componentCls:".".concat(Dt)});return[rr(ze)]})}var Jt=L(85893),un=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Vn=function(Vt){var ze=Vt.className,rt=Vt.layout,jt=rt===void 0?"inline":rt,U=Vt.style,pe=Vt.description,ct=Vt.children,he=Vt.title,$t=Vt.tip,sn=Vt.status,pn=Vt.trend,Dn=Vt.prefix,Wn=Vt.icon,Yn=(0,E.Z)(Vt,un),fn=(0,ee.useContext)(te.ZP.ConfigContext),vt=fn.getPrefixCls,Pt=vt("pro-card-statistic"),An=Ft(Pt),Pn=An.wrapSSR,Xn=An.hashId,dt=we()(Pt,ze,Xn),Se=we()("".concat(Pt,"-status"),Xn),Be=we()("".concat(Pt,"-icon"),Xn),st=we()("".concat(Pt,"-wrapper"),Xn),Lt=we()("".concat(Pt,"-content"),Xn),It=we()(Xn,(0,W.Z)((0,W.Z)({},"".concat(Pt,"-layout-").concat(jt),jt),"".concat(Pt,"-trend-").concat(pn),pn)),wn=$t&&(0,Jt.jsx)(me.Z,{title:$t,children:(0,Jt.jsx)(We,{className:"".concat(Pt,"-tip ").concat(Xn).trim()})}),Kn=we()("".concat(Pt,"-trend-icon"),Xn,(0,W.Z)({},"".concat(Pt,"-trend-icon-").concat(pn),pn)),_r=pn&&(0,Jt.jsx)("div",{className:Kn}),Jn=sn&&(0,Jt.jsx)("div",{className:Se,children:(0,Jt.jsx)(Re.Z,{status:sn,text:null})}),Pe=Wn&&(0,Jt.jsx)("div",{className:Be,children:Wn});return Pn((0,Jt.jsxs)("div",{className:dt,style:U,children:[Pe,(0,Jt.jsxs)("div",{className:st,children:[Jn,(0,Jt.jsxs)("div",{className:Lt,children:[(0,Jt.jsx)(Ln,(0,q.Z)({title:(he||wn)&&(0,Jt.jsxs)(Jt.Fragment,{children:[he,wn]}),prefix:(_r||Dn)&&(0,Jt.jsxs)(Jt.Fragment,{children:[_r,Dn]}),className:It},Yn)),pe&&(0,Jt.jsx)("div",{className:"".concat(Pt,"-description ").concat(Xn).trim(),children:pe})]})]})]}))},on=Vn},46343:function(gt,G,L){"use strict";L.d(G,{S$:function(){return Dt},bf:function(){return Vt},ni:function(){return Gt},oI:function(){return Vn},sX:function(){return on}});var q=L(34155);function W(ze,rt,jt,U){function pe(ct){return ct instanceof jt?ct:new jt(function(he){he(ct)})}return new(jt||(jt=Promise))(function(ct,he){function $t(Dn){try{pn(U.next(Dn))}catch(Wn){he(Wn)}}function sn(Dn){try{pn(U.throw(Dn))}catch(Wn){he(Wn)}}function pn(Dn){Dn.done?ct(Dn.value):pe(Dn.value).then($t,sn)}pn((U=U.apply(ze,rt||[])).next())})}function E(ze,rt){var jt={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},U,pe,ct,he;return he={next:$t(0),throw:$t(1),return:$t(2)},typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function $t(pn){return function(Dn){return sn([pn,Dn])}}function sn(pn){if(U)throw new TypeError("Generator is already executing.");for(;jt;)try{if(U=1,pe&&(ct=pn[0]&2?pe.return:pn[0]?pe.throw||((ct=pe.return)&&ct.call(pe),0):pe.next)&&!(ct=ct.call(pe,pn[1])).done)return ct;switch(pe=0,ct&&(pn=[pn[0]&2,ct.value]),pn[0]){case 0:case 1:ct=pn;break;case 4:return jt.label++,{value:pn[1],done:!1};case 5:jt.label++,pe=pn[1],pn=[0];continue;case 7:pn=jt.ops.pop(),jt.trys.pop();continue;default:if(ct=jt.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(pn[0]===6||pn[0]===2)){jt=0;continue}if(pn[0]===3&&(!ct||pn[1]>ct[0]&&pn[1]<ct[3])){jt.label=pn[1];break}if(pn[0]===6&&jt.label<ct[1]){jt.label=ct[1],ct=pn;break}if(ct&&jt.label<ct[2]){jt.label=ct[2],jt.ops.push(pn);break}ct[2]&&jt.ops.pop(),jt.trys.pop();continue}pn=rt.call(ze,jt)}catch(Dn){pn=[6,Dn],pe=0}finally{U=ct=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}}function de(ze,rt){var jt=typeof Symbol=="function"&&ze[Symbol.iterator];if(!jt)return ze;var U=jt.call(ze),pe,ct=[],he;try{for(;(rt===void 0||rt-- >0)&&!(pe=U.next()).done;)ct.push(pe.value)}catch($t){he={error:$t}}finally{try{pe&&!pe.done&&(jt=U.return)&&jt.call(U)}finally{if(he)throw he.error}}return ct}function ee(ze,rt,jt){if(jt||arguments.length===2)for(var U=0,pe=rt.length,ct;U<pe;U++)(ct||!(U in rt))&&(ct||(ct=Array.prototype.slice.call(rt,0,U)),ct[U]=rt[U]);return ze.concat(ct||Array.prototype.slice.call(rt))}function ue(ze){return ze&&ze.__esModule&&Object.prototype.hasOwnProperty.call(ze,"default")?ze.default:ze}var ce={exports:{}},xe={exports:{}},ae={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){return U&&typeof U.length=="number"&&U.length>=0&&U.length%1===0}ze.exports=rt.default})(ae,ae.exports);var We={},te={exports:{}},me={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(jt){return function(){for(var U=[],pe=arguments.length;pe--;)U[pe]=arguments[pe];var ct=U.pop();return jt.call(this,U,ct)}},ze.exports=rt.default})(me,me.exports);var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.fallback=we,Re.wrap=et;var $=Re.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,le=Re.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,K=Re.hasNextTick=typeof q=="object"&&typeof q.nextTick=="function";function we(ze){setTimeout(ze,0)}function et(ze){return function(rt){for(var jt=[],U=arguments.length-1;U-- >0;)jt[U]=arguments[U+1];return ze(function(){return rt.apply(void 0,jt)})}}var Je;$?Je=queueMicrotask:le?Je=setImmediate:K?Je=q.nextTick:Je=we,Re.default=et(Je),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=sn;var jt=me.exports,U=$t(jt),pe=Re,ct=$t(pe),he=We;function $t(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function sn(Wn){return(0,he.isAsync)(Wn)?function(){for(var Yn=[],fn=arguments.length;fn--;)Yn[fn]=arguments[fn];var vt=Yn.pop(),Pt=Wn.apply(this,Yn);return pn(Pt,vt)}:(0,U.default)(function(Yn,fn){var vt;try{vt=Wn.apply(this,Yn)}catch(Pt){return fn(Pt)}if(vt&&typeof vt.then=="function")return pn(vt,fn);fn(null,vt)})}function pn(Wn,Yn){return Wn.then(function(fn){Dn(Yn,null,fn)},function(fn){Dn(Yn,fn&&fn.message?fn:new Error(fn))})}function Dn(Wn,Yn,fn){try{Wn(Yn,fn)}catch(vt){(0,ct.default)(function(Pt){throw Pt},vt)}}ze.exports=rt.default}(te,te.exports),Object.defineProperty(We,"__esModule",{value:!0}),We.isAsyncIterable=We.isAsyncGenerator=We.isAsync=void 0;var wt=te.exports,pt=_t(wt);function _t(ze){return ze&&ze.__esModule?ze:{default:ze}}function Me(ze){return ze[Symbol.toStringTag]==="AsyncFunction"}function Ae(ze){return ze[Symbol.toStringTag]==="AsyncGenerator"}function je(ze){return typeof ze[Symbol.asyncIterator]=="function"}function Ze(ze){if(typeof ze!="function")throw new Error("expected a function");return Me(ze)?(0,pt.default)(ze):ze}We.default=Ze,We.isAsync=Me,We.isAsyncGenerator=Ae,We.isAsyncIterable=je;var lt={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U,pe){if(pe===void 0&&(pe=U.length),!pe)throw new Error("arity is undefined");function ct(){for(var he=this,$t=[],sn=arguments.length;sn--;)$t[sn]=arguments[sn];return typeof $t[pe-1]=="function"?U.apply(this,$t):new Promise(function(pn,Dn){$t[pe-1]=function(Wn){for(var Yn=[],fn=arguments.length-1;fn-- >0;)Yn[fn]=arguments[fn+1];if(Wn)return Dn(Wn);pn(Yn.length>1?Yn:Yn[0])},U.apply(he,$t)})}return ct}ze.exports=rt.default})(lt,lt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=ae.exports,U=sn(jt),pe=We,ct=sn(pe),he=lt.exports,$t=sn(he);function sn(pn){return pn&&pn.__esModule?pn:{default:pn}}rt.default=(0,$t.default)(function(pn,Dn,Wn){var Yn=(0,U.default)(Dn)?[]:{};pn(Dn,function(fn,vt,Pt){(0,ct.default)(fn)(function(An){for(var Pn,Xn=[],dt=arguments.length-1;dt-- >0;)Xn[dt]=arguments[dt+1];Xn.length<2&&(Pn=Xn,Xn=Pn[0]),Yn[vt]=Xn,Pt(An)})},function(fn){return Wn(fn,Yn)})},3),ze.exports=rt.default}(xe,xe.exports);var en={exports:{}},Le={exports:{}},St={exports:{}},Oe={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){function pe(){for(var ct=[],he=arguments.length;he--;)ct[he]=arguments[he];if(U!==null){var $t=U;U=null,$t.apply(this,ct)}}return Object.assign(pe,U),pe}ze.exports=rt.default})(Oe,Oe.exports);var nt={exports:{}},Ke={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(jt){return jt[Symbol.iterator]&&jt[Symbol.iterator]()},ze.exports=rt.default})(Ke,Ke.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Dn;var jt=ae.exports,U=he(jt),pe=Ke.exports,ct=he(pe);function he(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function $t(Wn){var Yn=-1,fn=Wn.length;return function(){return++Yn<fn?{value:Wn[Yn],key:Yn}:null}}function sn(Wn){var Yn=-1;return function(){var vt=Wn.next();return vt.done?null:(Yn++,{value:vt.value,key:Yn})}}function pn(Wn){var Yn=Wn?Object.keys(Wn):[],fn=-1,vt=Yn.length;return function Pt(){var An=Yn[++fn];return An==="__proto__"?Pt():fn<vt?{value:Wn[An],key:An}:null}}function Dn(Wn){if((0,U.default)(Wn))return $t(Wn);var Yn=(0,ct.default)(Wn);return Yn?sn(Yn):pn(Wn)}ze.exports=rt.default}(nt,nt.exports);var Xe={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){return function(){for(var pe=[],ct=arguments.length;ct--;)pe[ct]=arguments[ct];if(U===null)throw new Error("Callback was already called.");var he=U;U=null,he.apply(this,pe)}}ze.exports=rt.default})(Xe,Xe.exports);var Rt={exports:{}},bt={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt={};rt.default=jt,ze.exports=rt.default})(bt,bt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=ct;var jt=bt.exports,U=pe(jt);function pe(he){return he&&he.__esModule?he:{default:he}}function ct(he,$t,sn,pn){var Dn=!1,Wn=!1,Yn=!1,fn=0,vt=0;function Pt(){fn>=$t||Yn||Dn||(Yn=!0,he.next().then(function(Xn){var dt=Xn.value,Se=Xn.done;if(!(Wn||Dn)){if(Yn=!1,Se){Dn=!0,fn<=0&&pn(null);return}fn++,sn(dt,vt,An),vt++,Pt()}}).catch(Pn))}function An(Xn,dt){if(fn-=1,!Wn){if(Xn)return Pn(Xn);if(Xn===!1){Dn=!0,Wn=!0;return}if(dt===U.default||Dn&&fn<=0)return Dn=!0,pn(null);Pt()}}function Pn(Xn){Wn||(Yn=!1,Dn=!0,pn(Xn))}Pt()}ze.exports=rt.default}(Rt,Rt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Oe.exports,U=fn(jt),pe=nt.exports,ct=fn(pe),he=Xe.exports,$t=fn(he),sn=We,pn=Rt.exports,Dn=fn(pn),Wn=bt.exports,Yn=fn(Wn);function fn(vt){return vt&&vt.__esModule?vt:{default:vt}}rt.default=function(vt){return function(Pt,An,Pn){if(Pn=(0,U.default)(Pn),vt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Pt)return Pn(null);if((0,sn.isAsyncGenerator)(Pt))return(0,Dn.default)(Pt,vt,An,Pn);if((0,sn.isAsyncIterable)(Pt))return(0,Dn.default)(Pt[Symbol.asyncIterator](),vt,An,Pn);var Xn=(0,ct.default)(Pt),dt=!1,Se=!1,Be=0,st=!1;function Lt(wn,Kn){if(!Se)if(Be-=1,wn)dt=!0,Pn(wn);else if(wn===!1)dt=!0,Se=!0;else{if(Kn===Yn.default||dt&&Be<=0)return dt=!0,Pn(null);st||It()}}function It(){for(st=!0;Be<vt&&!dt;){var wn=Xn();if(wn===null){dt=!0,Be<=0&&Pn(null);return}Be+=1,An(wn.value,wn.key,(0,$t.default)(Lt))}st=!1}It()}},ze.exports=rt.default}(St,St.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=St.exports,U=sn(jt),pe=We,ct=sn(pe),he=lt.exports,$t=sn(he);function sn(Dn){return Dn&&Dn.__esModule?Dn:{default:Dn}}function pn(Dn,Wn,Yn,fn){return(0,U.default)(Wn)(Dn,(0,ct.default)(Yn),fn)}rt.default=(0,$t.default)(pn,4),ze.exports=rt.default}(Le,Le.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Le.exports,U=he(jt),pe=lt.exports,ct=he(pe);function he(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn,Dn){return(0,U.default)(sn,1,pn,Dn)}rt.default=(0,ct.default)($t,3),ze.exports=rt.default}(en,en.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=$t;var jt=xe.exports,U=he(jt),pe=en.exports,ct=he(pe);function he(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn){return(0,U.default)(ct.default,sn,pn)}ze.exports=rt.default}(ce,ce.exports);var Ie=ue(ce.exports),Gt=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.call=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tap=function(rt,jt){var U=this;this.tasks.push(function(pe){jt.apply(void 0,ee([],de(U.args),!1)),pe(null,rt)})},ze}(),mn={exports:{}},Ln={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=ae.exports,U=An(jt),pe=bt.exports,ct=An(pe),he=Le.exports,$t=An(he),sn=Oe.exports,pn=An(sn),Dn=Xe.exports,Wn=An(Dn),Yn=We,fn=An(Yn),vt=lt.exports,Pt=An(vt);function An(Se){return Se&&Se.__esModule?Se:{default:Se}}function Pn(Se,Be,st){st=(0,pn.default)(st);var Lt=0,It=0,wn=Se.length,Kn=!1;wn===0&&st(null);function _r(Jn,Pe){Jn===!1&&(Kn=!0),Kn!==!0&&(Jn?st(Jn):(++It===wn||Pe===ct.default)&&st(null))}for(;Lt<wn;Lt++)Be(Se[Lt],Lt,(0,Wn.default)(_r))}function Xn(Se,Be,st){return(0,$t.default)(Se,1/0,Be,st)}function dt(Se,Be,st){var Lt=(0,U.default)(Se)?Pn:Xn;return Lt(Se,(0,fn.default)(Be),st)}rt.default=(0,Pt.default)(dt,3),ze.exports=rt.default})(Ln,Ln.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=$t;var jt=Ln.exports,U=he(jt),pe=xe.exports,ct=he(pe);function he(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn){return(0,ct.default)(U.default,sn,pn)}ze.exports=rt.default}(mn,mn.exports);var qn=ue(mn.exports),rr=function(){function ze(){this.tasks=[]}return ze.prototype.promise=function(){return qn(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(pe){return W(U,void 0,void 0,function(){return E(this,function(ct){switch(ct.label){case 0:return[4,jt()];case 1:return ct.sent(),pe(null,rt),[2]}})})})},ze}(),Ft={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Oe.exports,U=Dn(jt),pe=Xe.exports,ct=Dn(pe),he=We,$t=Dn(he),sn=lt.exports,pn=Dn(sn);function Dn(Yn){return Yn&&Yn.__esModule?Yn:{default:Yn}}function Wn(Yn,fn){if(fn=(0,U.default)(fn),!Array.isArray(Yn))return fn(new Error("First argument to waterfall must be an array of functions"));if(!Yn.length)return fn();var vt=0;function Pt(Pn){var Xn=(0,$t.default)(Yn[vt++]);Xn.apply(void 0,Pn.concat([(0,ct.default)(An)]))}function An(Pn){for(var Xn=[],dt=arguments.length-1;dt-- >0;)Xn[dt]=arguments[dt+1];if(Pn!==!1){if(Pn||vt===Yn.length)return fn.apply(void 0,[Pn].concat(Xn));Pt(Xn)}}Pt([])}rt.default=(0,pn.default)(Wn),ze.exports=rt.default})(Ft,Ft.exports);var Jt=ue(Ft.exports),un=function(){function ze(){this.tasks=[]}return ze.prototype.call=function(){return Jt(this.tasks)},ze.prototype.tap=function(rt,jt){this.tasks.length===0?this.tasks.push(function(U){var pe=jt();U(pe?null:!1,pe)}):this.tasks.push(function(U,pe){var ct=jt.apply(void 0,ee([],de(U),!1));pe(ct?null:!1,rt)})},ze}(),Vn=function(){function ze(){this.tasks=[]}return ze.prototype.call=function(){return Ie(this.tasks)},ze.prototype.tap=function(rt,jt){this.tasks.push(function(U){var pe=jt();U(pe,rt)})},ze}(),on=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.promise=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(pe){return W(U,void 0,void 0,function(){return E(this,function(ct){switch(ct.label){case 0:return[4,jt.apply(void 0,ee([],de(this.args),!1))];case 1:return ct.sent(),pe(null,rt),[2]}})})})},ze}(),Dt=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.promise=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(pe){return W(U,void 0,void 0,function(){var ct;return E(this,function(he){switch(he.label){case 0:return[4,jt.apply(void 0,ee([],de(this.args),!1))];case 1:return ct=he.sent(),pe(ct,rt),[2]}})})})},ze}(),Vt=function(){function ze(){this.tasks=[]}return ze.prototype.promise=function(){return Jt(this.tasks)},ze.prototype.tapPromise=function(rt,jt){this.tasks.length===0?this.tasks.push(function(U){jt().then(function(pe){U(null,pe)})}):this.tasks.push(function(U,pe){jt(U).then(function(ct){pe(null,ct)})})},ze}()},17816:function(gt,G){(function(L,q){q(G)})(this,function(L){"use strict";function q(Fe){var ot=typeof Symbol=="function"&&Symbol.iterator,Ut=ot&&Fe[ot],ln=0;if(Ut)return Ut.call(Fe);if(Fe&&typeof Fe.length=="number")return{next:function(){return{value:(Fe=Fe&&ln>=Fe.length?void 0:Fe)&&Fe[ln++],done:!Fe}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(Fe,ot){var Ut=typeof Symbol=="function"&&Fe[Symbol.iterator];if(!Ut)return Fe;var ln,Nn,Fn=Ut.call(Fe),gn=[];try{for(;(ot===void 0||0<ot--)&&!(ln=Fn.next()).done;)gn.push(ln.value)}catch(Cn){Nn={error:Cn}}finally{try{ln&&!ln.done&&(Ut=Fn.return)&&Ut.call(Fn)}finally{if(Nn)throw Nn.error}}return gn}function E(Fe,ot,Ut){if(Ut||arguments.length===2)for(var ln,Nn=0,Fn=ot.length;Nn<Fn;Nn++)!ln&&Nn in ot||((ln=ln||Array.prototype.slice.call(ot,0,Nn))[Nn]=ot[Nn]);return Fe.concat(ln||Array.prototype.slice.call(ot))}function de(Fe){return ue(Fe,"Function")}var ee={}.toString,ue=function(Fe,ot){return ee.call(Fe)==="[object "+ot+"]"},ce=function(Fe){return Array.isArray?Array.isArray(Fe):ue(Fe,"Array")},xe=function(Fe){if(typeof(ot=Fe)!="object"||ot===null||!ue(Fe,"Object"))return!1;var ot;if(Object.getPrototypeOf(Fe)===null)return!0;for(var Ut=Fe;Object.getPrototypeOf(Ut)!==null;)Ut=Object.getPrototypeOf(Ut);return Object.getPrototypeOf(Fe)===Ut},ae=function(Fe){return ue(Fe,"Number")},We=Object.values?function(Fe){return Object.values(Fe)}:function(Fe){var ot,Ut=[],ln=Fe,Nn=function(pr,hr){de(Fe)&&hr==="prototype"||Ut.push(pr)};if(ln){if(ce(ln))for(var Fn=0,gn=ln.length;Fn<gn&&Nn(ln[Fn],Fn)!==!1;Fn++);else if(ot=typeof ln,ln!==null&&ot=="object"||ot=="function"){for(var Cn in ln)if(ln.hasOwnProperty(Cn)&&Nn(ln[Cn],Cn)===!1)break}}return Ut},te=5;function me(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];for(var ln=0;ln<ot.length;ln+=1)(function Nn(Fn,gn,Cn,pr){for(var hr in Cn=Cn||0,pr=pr||te,gn){var ei;gn.hasOwnProperty(hr)&&((ei=gn[hr])!==null&&xe(ei)?(xe(Fn[hr])||(Fn[hr]={}),Cn<pr?Nn(Fn[hr],ei,Cn+1,pr):Fn[hr]=gn[hr]):ce(ei)?(Fn[hr]=[],Fn[hr]=Fn[hr].concat(ei)):ei!==void 0&&(Fn[hr]=ei))}})(Fe,ot[ln]);return Fe}function Re(Fe){return Fe}(function(Fe,ot){var Ut;if(de(Fe))return(Ut=function(){for(var ln=[],Nn=0;Nn<arguments.length;Nn++)ln[Nn]=arguments[Nn];var Fn,gn=ot?ot.apply(this,ln):ln[0],Cn=Ut.cache;return Cn.has(gn)?Cn.get(gn):(Fn=Fe.apply(this,ln),Cn.set(gn,Fn),Fn)}).cache=new Map;throw new TypeError("Expected a function")})(function(Fe,gn){var Ut=(gn=gn===void 0?{}:gn).fontSize,ln=gn.fontFamily,Nn=gn.fontWeight,Fn=gn.fontStyle,gn=gn.fontVariant;return($=$||document.createElement("canvas").getContext("2d")).font=[Fn,gn,Nn,Ut+"px",ln].join(" "),$.measureText(ue(Fe,"String")?Fe:"").width},function(Fe,ot){return function(){for(var Ut=0,ln=0,Nn=arguments.length;ln<Nn;ln++)Ut+=arguments[ln].length;for(var Fn=Array(Ut),gn=0,ln=0;ln<Nn;ln++)for(var Cn=arguments[ln],pr=0,hr=Cn.length;pr<hr;pr++,gn++)Fn[gn]=Cn[pr];return Fn}([Fe],We(ot=ot===void 0?{}:ot)).join("")});var $,le=typeof Float32Array!="undefined"?Float32Array:Array;function K(){var Fe=new le(9);return le!=Float32Array&&(Fe[1]=0,Fe[2]=0,Fe[3]=0,Fe[5]=0,Fe[6]=0,Fe[7]=0),Fe[0]=1,Fe[4]=1,Fe[8]=1,Fe}Math.hypot||(Math.hypot=function(){for(var Fe=0,ot=arguments.length;ot--;)Fe+=arguments[ot]*arguments[ot];return Math.sqrt(Fe)});var we=function(Fe,ji,Wi){var ln=ji[0],Nn=ji[1],Fn=ji[2],gn=ji[3],Cn=ji[4],pr=ji[5],hr=ji[6],ei=ji[7],ji=ji[8],Ji=Wi[0],ti=Wi[1],Gi=Wi[2],Ni=Wi[3],Gr=Wi[4],So=Wi[5],fi=Wi[6],Eo=Wi[7],Wi=Wi[8];return Fe[0]=Ji*ln+ti*gn+Gi*hr,Fe[1]=Ji*Nn+ti*Cn+Gi*ei,Fe[2]=Ji*Fn+ti*pr+Gi*ji,Fe[3]=Ni*ln+Gr*gn+So*hr,Fe[4]=Ni*Nn+Gr*Cn+So*ei,Fe[5]=Ni*Fn+Gr*pr+So*ji,Fe[6]=fi*ln+Eo*gn+Wi*hr,Fe[7]=fi*Nn+Eo*Cn+Wi*ei,Fe[8]=fi*Fn+Eo*pr+Wi*ji,Fe};function et(){var Fe=new le(16);return le!=Float32Array&&(Fe[1]=0,Fe[2]=0,Fe[3]=0,Fe[4]=0,Fe[6]=0,Fe[7]=0,Fe[8]=0,Fe[9]=0,Fe[11]=0,Fe[12]=0,Fe[13]=0,Fe[14]=0),Fe[0]=1,Fe[5]=1,Fe[10]=1,Fe[15]=1,Fe}var Je=function(Fe,fi,Ut){var ln=fi[0],Nn=fi[1],Fn=fi[2],gn=fi[3],Cn=fi[4],pr=fi[5],hr=fi[6],ei=fi[7],ji=fi[8],Ji=fi[9],ti=fi[10],Gi=fi[11],Ni=fi[12],Gr=fi[13],So=fi[14],fi=fi[15],Eo=Ut[0],Wi=Ut[1],io=Ut[2],Ao=Ut[3];return Fe[0]=Eo*ln+Wi*Cn+io*ji+Ao*Ni,Fe[1]=Eo*Nn+Wi*pr+io*Ji+Ao*Gr,Fe[2]=Eo*Fn+Wi*hr+io*ti+Ao*So,Fe[3]=Eo*gn+Wi*ei+io*Gi+Ao*fi,Eo=Ut[4],Wi=Ut[5],io=Ut[6],Ao=Ut[7],Fe[4]=Eo*ln+Wi*Cn+io*ji+Ao*Ni,Fe[5]=Eo*Nn+Wi*pr+io*Ji+Ao*Gr,Fe[6]=Eo*Fn+Wi*hr+io*ti+Ao*So,Fe[7]=Eo*gn+Wi*ei+io*Gi+Ao*fi,Eo=Ut[8],Wi=Ut[9],io=Ut[10],Ao=Ut[11],Fe[8]=Eo*ln+Wi*Cn+io*ji+Ao*Ni,Fe[9]=Eo*Nn+Wi*pr+io*Ji+Ao*Gr,Fe[10]=Eo*Fn+Wi*hr+io*ti+Ao*So,Fe[11]=Eo*gn+Wi*ei+io*Gi+Ao*fi,Eo=Ut[12],Wi=Ut[13],io=Ut[14],Ao=Ut[15],Fe[12]=Eo*ln+Wi*Cn+io*ji+Ao*Ni,Fe[13]=Eo*Nn+Wi*pr+io*Ji+Ao*Gr,Fe[14]=Eo*Fn+Wi*hr+io*ti+Ao*So,Fe[15]=Eo*gn+Wi*ei+io*Gi+Ao*fi,Fe};function wt(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];return Fe?ot.reduce(function(ln,Nn){return function(Fn){return Nn(ln(Fn))}},Fe):Re}function pt(Fe){return Fe instanceof Float32Array||Fe instanceof Array}function _t(Fe,ot,Ut){for(;Fe<ot;)Fe+=2*Math.PI;for(;Ut<Fe;)Fe-=2*Math.PI;return Fe}st=new le(3),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0),st=new le(4),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0);function Me(gn,ot,Ut,ln,Nn){var Fn=(gn=W(gn,2))[0],gn=gn[1],Cn=K();return Fn=[Fn,gn],(gn=Cn)[0]=1,gn[1]=0,gn[2]=0,gn[3]=0,gn[4]=1,gn[5]=0,gn[6]=Fn[0],gn[7]=Fn[1],gn[8]=1,gn}function Ae(Fe,...ot){return ot.reduce((Ut,ln)=>Nn=>Ut(ln(Nn)),Fe)}function je(Fe,ot){return ot-Fe?Ut=>(Ut-Fe)/(ot-Fe):Ut=>.5}const Ze=Math.sqrt(50),lt=Math.sqrt(10),en=Math.sqrt(2);function Le(Fe,ot,Ut){return ot=(ot-Fe)/Math.max(0,Ut),Fe=Math.floor(Math.log(ot)/Math.LN10),Ut=ot/vf(10,Fe),0<=Fe?(Ut>=Ze?10:Ut>=lt?5:Ut>=en?2:1)*vf(10,Fe):-vf(10,-Fe)/(Ut>=Ze?10:Ut>=lt?5:Ut>=en?2:1)}const St=(Fe,ot,Ut=5)=>{Fe=[Fe,ot];let ln=0,Nn=Fe.length-1,Fn=Fe[ln],gn=Fe[Nn],Cn;return gn<Fn&&([Fn,gn]=[gn,Fn],[ln,Nn]=[Nn,ln]),0<(Cn=Le(Fn,gn,Ut))?(Fn=Math.floor(Fn/Cn)*Cn,gn=Math.ceil(gn/Cn)*Cn,Cn=Le(Fn,gn,Ut)):Cn<0&&(Fn=Math.ceil(Fn*Cn)/Cn,gn=Math.floor(gn*Cn)/Cn,Cn=Le(Fn,gn,Ut)),0<Cn?(Fe[ln]=Math.floor(Fn/Cn)*Cn,Fe[Nn]=Math.ceil(gn/Cn)*Cn):Cn<0&&(Fe[ln]=Math.ceil(Fn*Cn)/Cn,Fe[Nn]=Math.floor(gn*Cn)/Cn),Fe};function Oe(Fe){return Fe!=null&&!Number.isNaN(Fe)}function nt(Fe,ot){return Ut=>{Ut.prototype.rescale=function(){this.initRange(),this.nice();var[ln]=this.chooseTransforms();this.composeOutput(ln,this.chooseClamp(ln))},Ut.prototype.initRange=function(){var ln=this.options.interpolator;this.options.range=Fe(ln)},Ut.prototype.composeOutput=function(ln,Nn){var Fn,{domain:Cn,interpolator:gn,round:pr}=this.getOptions(),Cn=ot(Cn.map(ln)),pr=pr?(Fn=gn,hr=>(hr=Fn(hr),ae(hr)?Math.round(hr):hr)):gn;this.output=Ae(pr,Cn,Nn,ln)},Ut.prototype.invert=void 0}}var Ke,st={exports:{}},Be={exports:{}},Xe=function(Fe){return!(!Fe||typeof Fe=="string")&&(Fe instanceof Array||Array.isArray(Fe)||0<=Fe.length&&(Fe.splice instanceof Function||Object.getOwnPropertyDescriptor(Fe,Fe.length-1)&&Fe.constructor.name!=="String"))},Rt=Array.prototype.concat,bt=Array.prototype.slice,Ie=Be.exports=function(Fe){for(var ot=[],Ut=0,ln=Fe.length;Ut<ln;Ut++){var Nn=Fe[Ut];Xe(Nn)?ot=Rt.call(ot,bt.call(Nn)):ot.push(Nn)}return ot},Gt=(Ie.wrap=function(Fe){return function(){return Fe(Ie(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),mn=Be.exports,Ln=Object.hasOwnProperty,qn=Object.create(null);for(Ke in Gt)Ln.call(Gt,Ke)&&(qn[Gt[Ke]]=Ke);var rr=st.exports={to:{},get:{}};function Ft(Fe,ot,Ut){return Math.min(Math.max(ot,Fe),Ut)}function Jt(Fe){return Fe=Math.round(Fe).toString(16).toUpperCase(),Fe.length<2?"0"+Fe:Fe}rr.get=function(Fe){var ot,Ut;switch(Fe.substring(0,3).toLowerCase()){case"hsl":ot=rr.get.hsl(Fe),Ut="hsl";break;case"hwb":ot=rr.get.hwb(Fe),Ut="hwb";break;default:ot=rr.get.rgb(Fe),Ut="rgb"}return ot?{model:Ut,value:ot}:null},rr.get.rgb=function(Fe){if(!Fe)return null;var ot,Ut,ln,Nn=[0,0,0,1];if(ot=Fe.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(ln=ot[2],ot=ot[1],Ut=0;Ut<3;Ut++){var Fn=2*Ut;Nn[Ut]=parseInt(ot.slice(Fn,2+Fn),16)}ln&&(Nn[3]=parseInt(ln,16)/255)}else if(ot=Fe.match(/^#([a-f0-9]{3,4})$/i)){for(ln=(ot=ot[1])[3],Ut=0;Ut<3;Ut++)Nn[Ut]=parseInt(ot[Ut]+ot[Ut],16);ln&&(Nn[3]=parseInt(ln+ln,16)/255)}else{if(ot=Fe.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Ut=0;Ut<3;Ut++)Nn[Ut]=parseInt(ot[Ut+1],0);else{if(!(ot=Fe.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(ot=Fe.match(/^(\w+)$/))?ot[1]==="transparent"?[0,0,0,0]:Ln.call(Gt,ot[1])?((Nn=Gt[ot[1]])[3]=1,Nn):null:null;for(Ut=0;Ut<3;Ut++)Nn[Ut]=Math.round(2.55*parseFloat(ot[Ut+1]))}ot[4]&&(ot[5]?Nn[3]=.01*parseFloat(ot[4]):Nn[3]=parseFloat(ot[4]))}for(Ut=0;Ut<3;Ut++)Nn[Ut]=Ft(Nn[Ut],0,255);return Nn[3]=Ft(Nn[3],0,1),Nn},rr.get.hsl=function(Fe){var ot;return(Fe=Fe&&Fe.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ot=parseFloat(Fe[4]),[(parseFloat(Fe[1])%360+360)%360,Ft(parseFloat(Fe[2]),0,100),Ft(parseFloat(Fe[3]),0,100),Ft(isNaN(ot)?1:ot,0,1)]):null},rr.get.hwb=function(Fe){var ot;return(Fe=Fe&&Fe.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ot=parseFloat(Fe[4]),[(parseFloat(Fe[1])%360+360)%360,Ft(parseFloat(Fe[2]),0,100),Ft(parseFloat(Fe[3]),0,100),Ft(isNaN(ot)?1:ot,0,1)]):null},rr.to.hex=function(){var Fe=mn(arguments);return"#"+Jt(Fe[0])+Jt(Fe[1])+Jt(Fe[2])+(Fe[3]<1?Jt(Math.round(255*Fe[3])):"")},rr.to.rgb=function(){var Fe=mn(arguments);return Fe.length<4||Fe[3]===1?"rgb("+Math.round(Fe[0])+", "+Math.round(Fe[1])+", "+Math.round(Fe[2])+")":"rgba("+Math.round(Fe[0])+", "+Math.round(Fe[1])+", "+Math.round(Fe[2])+", "+Fe[3]+")"},rr.to.rgb.percent=function(){var Fe=mn(arguments),ot=Math.round(Fe[0]/255*100),Ut=Math.round(Fe[1]/255*100),ln=Math.round(Fe[2]/255*100);return Fe.length<4||Fe[3]===1?"rgb("+ot+"%, "+Ut+"%, "+ln+"%)":"rgba("+ot+"%, "+Ut+"%, "+ln+"%, "+Fe[3]+")"},rr.to.hsl=function(){var Fe=mn(arguments);return Fe.length<4||Fe[3]===1?"hsl("+Fe[0]+", "+Fe[1]+"%, "+Fe[2]+"%)":"hsla("+Fe[0]+", "+Fe[1]+"%, "+Fe[2]+"%, "+Fe[3]+")"},rr.to.hwb=function(){var Fe=mn(arguments),ot="";return 4<=Fe.length&&Fe[3]!==1&&(ot=", "+Fe[3]),"hwb("+Fe[0]+", "+Fe[1]+"%, "+Fe[2]+"%"+ot+")"},rr.to.keyword=function(Fe){return qn[Fe.slice(0,3)]};var un=st.exports;function Vn(Fe,ot,Ut){let ln=Ut;return ln<0&&(ln+=1),1<ln&&--ln,ln<1/6?Fe+6*(ot-Fe)*ln:ln<.5?ot:ln<2/3?Fe+(ot-Fe)*(2/3-ln)*6:Fe}function on(Nn){var ot,Ut,ln,Nn=un.get(Nn);return Nn?({model:Nn,value:ot}=Nn,Nn==="rgb"?ot:Nn==="hsl"?(ot=(Nn=ot)[0]/360,Ut=Nn[1]/100,ln=Nn[2]/100,Nn=Nn[3],Ut==0?[255*ln,255*ln,255*ln,Nn]:[255*Vn(Ut=2*ln-(ln=ln<.5?ln*(1+Ut):ln+Ut-ln*Ut),ln,ot+1/3),255*Vn(Ut,ln,ot),255*Vn(Ut,ln,ot-1/3),Nn]):null):null}const Dt=(Fe,ot)=>Ut=>Fe*(1-Ut)+ot*Ut,Vt=(Fe,ot)=>{if(typeof Fe=="number"&&typeof ot=="number")return Dt(Fe,ot);if(typeof Fe!="string"||typeof ot!="string")return()=>Fe;{var Ut=Fe,ln=ot;const Nn=on(Ut),Fn=on(ln);return Nn===null||Fn===null?Nn?()=>Ut:()=>ln:gn=>{var Cn=new Array(4);for(let Gi=0;Gi<4;Gi+=1){var pr=Nn[Gi],hr=Fn[Gi];Cn[Gi]=pr*(1-gn)+hr*gn}var[ei,ji,Ji,ti]=Cn;return`rgba(${Math.round(ei)}, ${Math.round(ji)}, ${Math.round(Ji)}, ${ti})`}}},ze=(Fe,ot)=>{const Ut=Dt(Fe,ot);return ln=>Math.round(Ut(ln))};function rt({map:Fe,initKey:ot},Ut){return ot=ot(Ut),Fe.has(ot)?Fe.get(ot):Ut}function jt(Fe){return typeof Fe=="object"?Fe.valueOf():Fe}class U extends Map{constructor(ot){if(super(),this.map=new Map,this.initKey=jt,ot!==null)for(var[Ut,ln]of ot)this.set(Ut,ln)}get(ot){return super.get(rt({map:this.map,initKey:this.initKey},ot))}has(ot){return super.has(rt({map:this.map,initKey:this.initKey},ot))}set(ot,Ut){return super.set(([{map:ot,initKey:ln},Nn]=[{map:this.map,initKey:this.initKey},ot],ln=ln(Nn),ot.has(ln)?ot.get(ln):(ot.set(ln,Nn),Nn)),Ut);var ln,Nn}delete(ot){return super.delete(([{map:ot,initKey:Ut},ln]=[{map:this.map,initKey:this.initKey},ot],Ut=Ut(ln),ot.has(Ut)&&(ln=ot.get(Ut),ot.delete(Ut)),ln));var Ut,ln}}class pe{constructor(ot){this.options=me({},this.getDefaultOptions()),this.update(ot)}getOptions(){return this.options}update(ot={}){this.options=me({},this.options,ot),this.rescale(ot)}rescale(ot){}}const ct=Symbol("defaultUnknown");function he(Fe,ot,Ut){for(let ln=0;ln<ot.length;ln+=1)Fe.has(ot[ln])||Fe.set(Ut(ot[ln]),ln)}function $t(ot){var{value:ot,from:Ut,to:ln,mapper:Nn,notFoundReturn:Fn}=ot;let gn=Nn.get(ot);if(gn===void 0){if(Fn!==ct)return Fn;gn=Ut.push(ot)-1,Nn.set(ot,gn)}return ln[gn%ln.length]}function sn(Fe){return Fe instanceof Date?ot=>""+ot:typeof Fe=="object"?ot=>JSON.stringify(ot):ot=>ot}class pn extends pe{getDefaultOptions(){return{domain:[],range:[],unknown:ct}}constructor(ot){super(ot)}map(ot){return this.domainIndexMap.size===0&&he(this.domainIndexMap,this.getDomain(),this.domainKey),$t({value:this.domainKey(ot),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(ot){return this.rangeIndexMap.size===0&&he(this.rangeIndexMap,this.getRange(),this.rangeKey),$t({value:this.rangeKey(ot),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(ot){var[Ut]=this.options.domain,[ln]=this.options.range;this.domainKey=sn(Ut),this.rangeKey=sn(ln),this.rangeIndexMap?(ot&&!ot.range||this.rangeIndexMap.clear(),ot&&!ot.domain&&!ot.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new pn(this.options)}getRange(){return this.options.range}getDomain(){var ot,Ut;return this.sortedDomain||({domain:ot,compare:Ut}=this.options,this.sortedDomain=Ut?[...ot].sort(Ut):ot),this.sortedDomain}}function Dn(Gr){const{domain:ot,range:Ut,paddingOuter:ln,paddingInner:Nn,flex:Fn,round:gn,align:Cn}=Gr;var pr=ot.length,ti=0<(ti=(Gr=pr)-(hr=Fn).length)?[...hr,...new Array(ti).fill(1)]:ti<0?hr.slice(0,Gr):hr,[Gr,hr]=Ut,hr=hr-Gr,Ni=hr/(2/pr*ln+1-1/pr*Nn);const ei=Ni*Nn/pr;Ni-=pr*ei;const ji=function(Wi){const io=Math.min(...Wi);return Wi.map(Ao=>Ao/io)}(ti),Ji=Ni/ji.reduce((Wi,io)=>Wi+io);var ti=new U(ot.map((Wi,io)=>(io=ji[io]*Ji,[Wi,gn?Math.floor(io):io]))),Gi=new U(ot.map((Wi,io)=>(io=ji[io]*Ji+ei,[Wi,gn?Math.floor(io):io]))),Ni=Array.from(Gi.values()).reduce((Wi,io)=>Wi+io),Gr=Gr+(hr-(Ni-Ni/pr*Nn))*Cn;let So=gn?Math.round(Gr):Gr;var fi=new Array(pr);for(let Wi=0;Wi<pr;Wi+=1){fi[Wi]=(Eo=So,Math.round(1e12*Eo)/1e12);var Eo=ot[Wi];So+=Gi.get(Eo)}return{valueBandWidth:ti,valueStep:Gi,adjustedRange:fi}}class Wn extends pn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ct,flex:[]}}constructor(ot){super(ot)}clone(){return new Wn(this.options)}getStep(ot){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:ot===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(ot)}getBandWidth(ot){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:ot===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(ot)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:ot,paddingInner:Ut}=this.options;return 0<ot?ot:Ut}getPaddingOuter(){var{padding:ot,paddingOuter:Ut}=this.options;return 0<ot?ot:Ut}rescale(){super.rescale();var{align:ln,domain:ot,range:Nn,round:Fn,flex:Ut}=this.options,{adjustedRange:ln,valueBandWidth:Nn,valueStep:Fn}=function(hr){var Cn=hr.domain;if((Cn=Cn.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((pr=hr.flex)==null||!pr.length))return Dn(hr);var{range:pr,paddingOuter:hr,paddingInner:ei,round:ji,align:Ji}=hr;let ti,Gi,Ni=pr[0];return pr=pr[1]-Ni,ti=pr/Math.max(1,2*hr+(Cn-ei)),ji&&(ti=Math.floor(ti)),Ni+=(pr-ti*(Cn-ei))*Ji,Gi=ti*(1-ei),ji&&(Ni=Math.round(Ni),Gi=Math.round(Gi)),hr=new Array(Cn).fill(0).map((Gr,So)=>Ni+So*ti),{valueStep:ti,valueBandWidth:Gi,adjustedRange:hr}}({align:ln,range:Nn,round:Fn,flex:Ut,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:ot});this.valueStep=Fn,this.valueBandWidth=Nn,this.adjustedRange=ln}}const Yn=(Fe,ot,Ut)=>{let ln,Nn,Fn=Fe,gn=ot;if(Fn===gn&&0<Ut)return[Fn];let Cn=Le(Fn,gn,Ut);if(Cn===0||!Number.isFinite(Cn))return[];if(0<Cn){Fn=Math.ceil(Fn/Cn),gn=Math.floor(gn/Cn),Nn=new Array(ln=Math.ceil(gn-Fn+1));for(let pr=0;pr<ln;pr+=1)Nn[pr]=(Fn+pr)*Cn}else{Cn=-Cn,Fn=Math.ceil(Fn*Cn),gn=Math.floor(gn*Cn),Nn=new Array(ln=Math.ceil(gn-Fn+1));for(let pr=0;pr<ln;pr+=1)Nn[pr]=(Fn+pr)/Cn}return Nn},fn=(ln,Fn,Ut)=>{var[ln,Nn]=ln,[Fn,gn]=Fn;let Cn,pr;return Ae(pr=ln<Nn?(Cn=je(ln,Nn),Ut(Fn,gn)):(Cn=je(Nn,ln),Ut(gn,Fn)),Cn)},vt=(Fe,ot,Ut)=>{const ln=Math.min(Fe.length,ot.length)-1,Nn=new Array(ln),Fn=new Array(ln);var gn=Fe[0]>Fe[ln],Cn=gn?[...Fe].reverse():Fe,pr=gn?[...ot].reverse():ot;for(let hr=0;hr<ln;hr+=1)Nn[hr]=je(Cn[hr],Cn[hr+1]),Fn[hr]=Ut(pr[hr],pr[hr+1]);return hr=>{var ei=function(Ji,ti,Gi,Ni,Gr){let So=Gi||0,fi=Ni||Ji.length;for(var Eo=Gr||(io=>io);So<fi;){var Wi=Math.floor((So+fi)/2);Eo(Ji[Wi])>ti?fi=Wi:So=Wi+1}return So}(Fe,hr,1,ln)-1,ji=Nn[ei];return Ae(Fn[ei],ji)(hr)}},Pt=(Fe,ot,Ut,ln)=>(2<Math.min(Fe.length,ot.length)?vt:fn)(Fe,ot,ln?ze:Ut);class An extends pe{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Dt,tickCount:5}}map(ot){return Oe(ot)?this.output(ot):this.options.unknown}invert(ot){return Oe(ot)?this.input(ot):this.options.unknown}nice(){var ot,Ut,ln,Nn;this.options.nice&&([ot,Ut,ln,...Nn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(ot,Ut,ln,...Nn))}getTicks(){var ot=this.options.tickMethod,[Ut,ln,Nn,...Fn]=this.getTickMethodOptions();return ot(Ut,ln,Nn,...Fn)}getTickMethodOptions(){var{domain:ot,tickCount:Ut}=this.options;return[ot[0],ot[ot.length-1],Ut]}chooseNice(){return St}rescale(){this.nice();var[ot,Ut]=this.chooseTransforms();this.composeOutput(ot,this.chooseClamp(ot)),this.composeInput(ot,Ut,this.chooseClamp(Ut))}chooseClamp(ln){var{clamp:Ut,range:Nn}=this.options,ln=this.options.domain.map(ln),Nn=Math.min(ln.length,Nn.length);if(Ut){Ut=ln[0],ln=ln[Nn-1];const Fn=ln<Ut?ln:Ut,gn=ln<Ut?Ut:ln;return Cn=>Math.min(Math.max(Fn,Cn),gn)}return Re}composeOutput(ot,Ut){var{domain:gn,range:ln,round:Nn,interpolate:Fn}=this.options,gn=Pt(gn.map(ot),ln,Fn,Nn);this.output=Ae(gn,Ut,ot)}composeInput(ot,Ut,ln){var{domain:Nn,range:Fn}=this.options,Fn=Pt(Fn,Nn.map(ot),Dt);this.input=Ae(Ut,ln,Fn)}}class Pn extends An{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Vt,tickMethod:Yn,tickCount:5}}chooseTransforms(){return[Re,Re]}clone(){return new Pn(this.options)}}class Xn extends Wn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ct,paddingInner:1,paddingOuter:0}}constructor(ot){super(ot)}getPaddingInner(){return 1}clone(){return new Xn(this.options)}update(ot){super.update(ot)}getPaddingOuter(){return this.options.padding}}function dt(Fe,ot){for(var Ut=[],ln=0,Nn=Fe.length;ln<Nn;ln++)Ut.push(Fe[ln].substr(0,ot));return Ut}var Se,Be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],st=["January","February","March","April","May","June","July","August","September","October","November","December"],Lt=dt(st,3);(function(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];for(var ln=0,Nn=ot;ln<Nn.length;ln++){var Fn,gn=Nn[ln];for(Fn in gn)Fe[Fn]=gn[Fn]}})({},{dayNamesShort:dt(Be,3),dayNames:Be,monthNamesShort:Lt,monthNames:st,amPm:["am","pm"],DoFn:function(Fe){return Fe+["th","st","nd","rd"][3<Fe%10?0:(Fe-Fe%10!=10?1:0)*Fe%10]}});var It;let wn=Se=class extends Pn{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Re,tickMethod:Yn,tickCount:5}}constructor(Fe){super(Fe)}clone(){return new Se(this.options)}};wn=Se=function(Fe,ot,Ut,ln){var Nn,Fn=arguments.length,gn=Fn<3?ot:ln===null?ln=Object.getOwnPropertyDescriptor(ot,Ut):ln;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gn=Reflect.decorate(Fe,ot,Ut,ln);else for(var Cn=Fe.length-1;0<=Cn;Cn--)(Nn=Fe[Cn])&&(gn=(Fn<3?Nn(gn):3<Fn?Nn(ot,Ut,gn):Nn(ot,Ut))||gn);return 3<Fn&&gn&&Object.defineProperty(ot,Ut,gn),gn}([nt(function(Fe){return[Fe(0),Fe(1)]},ot=>{var[ot,Ut]=ot;return Ae(Dt(0,1),je(ot,Ut))})],wn);let Kn=It=class extends Pn{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Re,tickMethod:Yn,tickCount:5}}constructor(Fe){super(Fe)}clone(){return new It(this.options)}};Kn=It=function(Fe,ot,Ut,ln){var Nn,Fn=arguments.length,gn=Fn<3?ot:ln===null?ln=Object.getOwnPropertyDescriptor(ot,Ut):ln;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gn=Reflect.decorate(Fe,ot,Ut,ln);else for(var Cn=Fe.length-1;0<=Cn;Cn--)(Nn=Fe[Cn])&&(gn=(Fn<3?Nn(gn):3<Fn?Nn(ot,Ut,gn):Nn(ot,Ut))||gn);return 3<Fn&&gn&&Object.defineProperty(ot,Ut,gn),gn}([nt(function(Fe){return[Fe(0),Fe(.5),Fe(1)]},Fe=>{const[ot,Ut,ln]=Fe,Nn=Ae(Dt(0,.5),je(ot,Ut)),Fn=Ae(Dt(.5,1),je(Ut,ln));return gn=>(ot>ln?gn<Ut?Fn:Nn:gn<Ut?Nn:Fn)(gn)})],Kn);function _r(Fe,ot,Ut,ln,Nn){var Fn=new Pn({range:[ot,ot+ln]}),gn=new Pn({range:[Ut,Ut+Nn]});return{transform:function(hr){var hr=W(hr,2),pr=hr[0],hr=hr[1];return[Fn.map(pr),gn.map(hr)]},untransform:function(hr){var hr=W(hr,2),pr=hr[0],hr=hr[1];return[Fn.invert(pr),gn.invert(hr)]}}}function Jn(Fe,ot,Ut,ln,Nn){return(0,W(Fe,1)[0])(ot,Ut,ln,Nn)}function Pe(Fe,ot,Ut,ln,Nn){return W(Fe,1)[0]}function Te(pr,ot,Ut,ln,Nn){var Fn=(pr=W(pr,4))[0],gn=pr[1],Cn=pr[2],pr=pr[3],hr=new Pn({range:[Cn,pr]}),ei=new Pn({range:[Fn,gn]}),ji=1<(Cn=Nn/ln)?1:Cn,Ji=1<Cn?1/Cn:1;return{transform:function(Ni){var Ni=W(Ni,2),Gi=Ni[0],Ni=Ni[1],Gi=ei.map(Gi),Ni=hr.map(Ni);return[.5*(Ni*Math.cos(Gi)*ji)+.5,.5*(Ni*Math.sin(Gi)*Ji)+.5]},untransform:function(Gr){var Gr=W(Gr,2),Gi=Gr[0],Gr=Gr[1],Gi=2*(Gi-.5)/ji,Gr=2*(Gr-.5)/Ji,Ni=Math.sqrt(Math.pow(Gi,2)+Math.pow(Gr,2)),Gr=_t(Math.atan2(Gr,Gi),Fn,gn);return[ei.invert(Gr),hr.invert(Ni)]}}}function ke(Fe,ot,Ut,ln,Nn){return{transform:function(gn){var gn=W(gn,2),Cn=gn[0];return[gn[1],Cn]},untransform:function(gn){var gn=W(gn,2),Cn=gn[0];return[gn[1],Cn]}}}function it(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];return er.apply(void 0,E([[-1,-1]],W(ot),!1))}function At(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];return er.apply(void 0,E([[-1,1]],W(ot),!1))}function Yt(Fe){for(var ot=[],Ut=1;Ut<arguments.length;Ut++)ot[Ut-1]=arguments[Ut];return er.apply(void 0,E([[1,-1]],W(ot),!1))}function hn(gn,ot,Ut,ln,Nn){var Fn,gn=W(gn,1)[0],Cn=K();return Cn=Cn,gn=gn,Fn=Math.sin(gn),gn=Math.cos(gn),Cn[0]=gn,Cn[1]=Fn,Cn[2]=0,Cn[3]=-Fn,Cn[4]=gn,Cn[5]=0,Cn[6]=0,Cn[7]=0,Cn[8]=1,Cn}function Et(Fe,ot,Ut,ln,Nn){var Fn=(Fe=W(Fe,4))[0],gn=Fe[1],Cn=Fe[2],pr=(Fe[3]-Cn)/(+gn/(2*Math.PI)+1),hr=pr/(2*Math.PI),ei=new Pn({range:[Cn,Cn+.99*pr]}),ji=new Pn({range:[Fn,gn]}),Ji=1<(Fe=Nn/ln)?1:Fe,ti=1<Fe?1/Fe:1;return{transform:function(Gr){var Gr=W(Gr,2),Ni=Gr[0],Gr=Gr[1],Ni=ji.map(Ni),Gr=ei.map(Gr);return[.5*(Math.cos(Ni)*(hr*Ni+Gr)*Ji)+.5,.5*(Math.sin(Ni)*(hr*Ni+Gr)*ti)+.5]},untransform:function(Gr){var Gr=W(Gr,2),So=Gr[0],Gr=Gr[1],So=2*(So-.5)/Ji,Gr=2*(Gr-.5)/ti,Ni=Math.sqrt(Math.pow(So,2)+Math.pow(Gr,2)),Gr=_t(Math.atan2(Gr,So)+Math.floor(Ni/pr)*Math.PI*2,Fn,gn),So=Ni-hr*Gr;return[ji.invert(Gr),ei.invert(So)]}}}function Kt(pr,ot,Ut,ln,Nn){var Fn=(pr=W(pr,4))[0],gn=pr[1],Cn=pr[2],pr=pr[3],hr=new Pn({range:[Cn,pr]});return{transform:function(ei){for(var ji=[],Ji=ei.length,ti=new Xn({domain:new Array(Ji).fill(0).map(function(So,fi){return fi}),range:[Fn,gn]}),Gi=0;Gi<Ji;Gi++){var Gr=ei[Gi],Ni=ti.map(Gi),Gr=hr.map(Gr);ji.push(Ni,Gr)}return ji},untransform:function(ei){for(var ji=[],Ji=0;Ji<ei.length;Ji+=2){var ti=ei[Ji+1];ji.push(hr.invert(ti))}return ji}}}var er=function(gn,ot,Ut,ln,Nn){var gn=W(gn,2),Fn=gn[0],gn=gn[1],Cn=K();return Fn=[Fn,gn],(gn=Cn)[0]=Fn[0],gn[1]=0,gn[2]=0,gn[3]=0,gn[4]=Fn[1],gn[5]=0,gn[6]=0,gn[7]=0,gn[8]=1,gn};function br(Fe){return 1/Math.tan(Fe)}function Vr(Fe,ot,Ut,ln,Nn){var Fn=br(W(Fe,1)[0]);return{transform:function(pr){var pr=W(pr,2),Cn=pr[0],pr=pr[1];return[Cn+pr*Fn,pr]},untransform:function(pr){var pr=W(pr,2),Cn=pr[0],pr=pr[1];return[Cn-pr*Fn,pr]}}}function vr(Fe,ot,Ut,ln,Nn){var Fn=br(W(Fe,1)[0]);return{transform:function(Cn){var Cn=W(Cn,2),pr=Cn[0];return[pr,Cn[1]+pr*Fn]},untransform:function(Cn){var Cn=W(Cn,2),pr=Cn[0];return[pr,Cn[1]-pr*Fn]}}}function Ur(Fe,ot,Ut,Cn,gn){var Fn=Fe<ot,gn=(Fn?ot-Cn:gn-ot)||gn-Cn,Cn=Fn?-1:1;return Cn*gn*(Ut+1)/(Ut+gn/((Fe-ot)*Cn))+ot}function _i(Fe,ot,Ut,ln,gn){var Fn=Fe<ot,gn=(Fn?ot-ln:gn-ot)||gn-ln;return gn/(gn*(Ut+1)/(Fe-ot)-Ut*(Fn?-1:1))+ot}function Ai(Fe,ot,Ut){return Ut?new Pn({range:[0,1],domain:[0,ot]}).map(Fe):Fe}function wr(Cn,ot,Ut,ln,Nn){var Fn=(Cn=W(Cn,3))[0],gn=Cn[1],Cn=Cn[2],pr=Ai(Fn,ln,Cn!==void 0&&Cn);return{transform:function(ji){var ji=W(ji,2),ei=ji[0],ji=ji[1];return[Ur(ei,pr,gn,0,1),ji]},untransform:function(ji){var ji=W(ji,2),ei=ji[0],ji=ji[1];return[_i(ei,pr,gn,0,1),ji]}}}function Ei(Cn,ot,Ut,ln,Nn){var Fn=(Cn=W(Cn,3))[0],gn=Cn[1],Cn=Cn[2],pr=Ai(Fn,Nn,Cn!==void 0&&Cn);return{transform:function(hr){return hr=W(hr,2),[hr[0],Ur(hr[1],pr,gn,0,1)]},untransform:function(hr){return hr=W(hr,2),[hr[0],_i(hr[1],pr,gn,0,1)]}}}function hi(hr,ot,Ut,ln,Nn){var Fn=(hr=W(hr,5))[0],gn=hr[1],Cn=hr[2],pr=hr[3],hr=hr[4],ei=Ai(Fn,ln,hr=hr!==void 0&&hr),ji=Ai(gn,Nn,hr);return{transform:function(Gi){var Gi=W(Gi,2),ti=Gi[0],Gi=Gi[1];return[Ur(ti,ei,Cn,0,1),Ur(Gi,ji,pr,0,1)]},untransform:function(Gi){var Gi=W(Gi,2),ti=Gi[0],Gi=Gi[1];return[_i(ti,ei,Cn,0,1),_i(Gi,ji,pr,0,1)]}}}function ai(hr,ot,Ut,ln,Nn){var Fn=(hr=W(hr,5))[0],gn=hr[1],Cn=hr[2],pr=hr[3],hr=(hr=hr[4])!==void 0&&hr,ei=new Pn({range:[0,ln]}),ji=new Pn({range:[0,Nn]}),Ji=hr?Fn:ei.map(Fn),ti=hr?gn:ji.map(gn);return{transform:function(Gr){var Gr=W(Gr,2),Ni=Gr[0],Gr=Gr[1],So=ei.map(Ni)-Ji,fi=ji.map(Gr)-ti,Eo=Math.sqrt(So*So+fi*fi);return Cn<Eo?[Ni,Gr]:(Ni=Ur(Eo,0,pr,0,Cn),Gr=Math.atan2(fi,So),Eo=Ji+Ni*Math.cos(Gr),fi=ti+Ni*Math.sin(Gr),[ei.invert(Eo),ji.invert(fi)])},untransform:function(Gr){var Gr=W(Gr,2),Ni=Gr[0],Gr=Gr[1],So=ei.map(Ni)-Ji,fi=ji.map(Gr)-ti,Eo=Math.sqrt(So*So+fi*fi);return Cn<Eo?[Ni,Gr]:(Ni=_i(Eo,0,pr,0,Cn),Gr=Math.atan2(fi,So),Eo=Ji+Ni*Math.cos(Gr),fi=ti+Ni*Math.sin(Gr),[ei.invert(Eo),ji.invert(fi)])}}}function Io(Fe,ot,Ut,ln,Nn,Fn,gn){var Cn=new Pn({range:[ot,ot+Nn]}),pr=new Pn({range:[Ut,Ut+Fn]}),hr=new Pn({range:[ln,ln+gn]});return{transform:function(ti){var ti=W(ti,3),ji=ti[0],Ji=ti[1],ti=ti[2];return[Cn.map(ji),pr.map(Ji),hr.map(ti)]},untransform:function(ti){var ti=W(ti,3),ji=ti[0],Ji=ti[1],ti=ti[2];return[Cn.invert(ji),pr.invert(Ji),hr.invert(ti)]}}}function xi(ei,ot,Ut,ln,Nn,Fn,gn){var Cn,pr=(ei=W(ei,3))[0],hr=ei[1],ei=ei[2];return Cn=et(),pr=[pr,hr,ei],Cn[0]=1,Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=1,Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=1,Cn[11]=0,Cn[12]=pr[0],Cn[13]=pr[1],Cn[14]=pr[2],Cn[15]=1,Cn}function Qo(Fe,ot,Ut,ln,Nn,Fn,gn){return{transform:function(pr){var pr=W(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]},untransform:function(pr){var pr=W(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]}}}function ga(ei,ot,Ut,ln,Nn,Fn,gn){var Cn,pr=(ei=W(ei,3))[0],hr=ei[1],ei=ei[2];return Cn=et(),pr=[pr,hr,ei],Cn[0]=pr[0],Cn[1]=0,Cn[2]=0,Cn[3]=0,Cn[4]=0,Cn[5]=pr[1],Cn[6]=0,Cn[7]=0,Cn[8]=0,Cn[9]=0,Cn[10]=pr[2],Cn[11]=0,Cn[12]=0,Cn[13]=0,Cn[14]=0,Cn[15]=1,Cn}Po.prototype.update=function(Fe){this.options=me({},this.options,Fe),this.recoordinate()},Po.prototype.clone=function(){return new Po(this.options)},Po.prototype.getOptions=function(){return this.options},Po.prototype.clear=function(){this.update({transformations:[]})},Po.prototype.getSize=function(){var Fe=this.options;return[Fe.width,Fe.height]},Po.prototype.getCenter=function(){var Fe=this.options,ot=Fe.x,Ut=Fe.y;return[(2*ot+Fe.width)/2,(2*Ut+Fe.height)/2]},Po.prototype.transform=function(){for(var Fe=[],ot=0;ot<arguments.length;ot++)Fe[ot]=arguments[ot];var Ut=this.options.transformations;return this.update({transformations:E(E([],W(Ut),!1),[E([],W(Fe),!1)],!1)}),this},Po.prototype.map=function(Fe){return this.output(Fe)},Po.prototype.invert=function(Fe){return this.input(Fe)},Po.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Po.prototype.compose=function(Fe){function ot(Wi,io){var Ao;Cn.push((io=io===void 0?!0:io)?(Ao=Wi,function(xs){for(var ya=[],ra=0;ra<xs.length-1;ra+=2){var gs=[xs[ra],xs[ra+1]],gs=Ao(gs);ya.push.apply(ya,E([],W(gs),!1))}return ya}):Wi)}var Ut,ln,Nn=(Fe=Fe===void 0?!1:Fe)?E([],W(this.options.transformations),!1).reverse():this.options.transformations,Fn=Fe?function(Wi){return Wi.untransform}:function(Wi){return Wi.transform},gn=[],Cn=[];try{for(var pr=q(Nn),hr=pr.next();!hr.done;hr=pr.next()){var ei,ji,Ji,ti,Gi,Ni,Gr=W(hr.value),So=Gr[0],fi=Gr.slice(1),Eo=this.transformers[So];Eo&&(ji=(ei=this.options).x,Ji=ei.y,ti=ei.width,Gi=ei.height,pt(Ni=Eo(E([],W(fi),!1),ji,Ji,ti,Gi))?gn.push(Ni):(gn.length&&(ot(this.createMatrixTransform(gn,Fe)),gn.splice(0,gn.length)),ot(Fn(Ni)||Re,So!=="parallel")))}}catch(Wi){Ut={error:Wi}}finally{try{hr&&!hr.done&&(ln=pr.return)&&ln.call(pr)}finally{if(Ut)throw Ut.error}}return gn.length&&ot(this.createMatrixTransform(gn,Fe)),wt.apply(void 0,E([],W(Cn),!1))},Po.prototype.createMatrixTransform=function(Fe,ot){var Ut,ln,Nn,Fn,gn,Cn,pr,hr,ei,ji,Ji,ti,Gi=K();return ot&&Fe.reverse(),Fe.forEach(function(Ni){return we(Gi,Gi,Ni)}),ot&&(ot=Fe=Gi,(ti=new le(9))[0]=ot[0],ti[1]=ot[1],ti[2]=ot[2],ti[3]=ot[3],ti[4]=ot[4],ti[5]=ot[5],ti[6]=ot[6],ti[7]=ot[7],ti[8]=ot[8],ti=(ot=ti)[0],Ut=ot[1],ln=ot[2],Nn=ot[3],Fn=ot[4],gn=ot[5],Cn=ot[6],pr=ot[7],hr=(ot=ot[8])*Fn-gn*pr,Ji=ti*hr+Ut*(ei=-ot*Nn+gn*Cn)+ln*(ji=pr*Nn-Fn*Cn))&&(Fe[0]=hr*(Ji=1/Ji),Fe[1]=(-ot*Ut+ln*pr)*Ji,Fe[2]=(gn*Ut-ln*Fn)*Ji,Fe[3]=ei*Ji,Fe[4]=(ot*ti-ln*Cn)*Ji,Fe[5]=(-gn*ti+ln*Nn)*Ji,Fe[6]=ji*Ji,Fe[7]=(-pr*ti+Ut*Cn)*Ji,Fe[8]=(Fn*ti-Ut*Nn)*Ji),function(io){var Gr,So,fi,Eo,Wi,io=[io[0],io[1],1];return fi=Gi,Eo=(So=Gr=io)[0],Wi=So[1],So=So[2],Gr[0]=Eo*fi[0]+Wi*fi[3]+So*fi[6],Gr[1]=Eo*fi[1]+Wi*fi[4]+So*fi[7],Gr[2]=Eo*fi[2]+Wi*fi[5]+So*fi[8],[io[0],io[1]]}},Be=Po;function Po(Fe){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:_r,translate:Me,custom:Jn,matrix:Pe,polar:Te,transpose:ke,scale:er,"shear.x":Vr,"shear.y":vr,reflect:it,"reflect.x":At,"reflect.y":Yt,rotate:hn,helix:Et,parallel:Kt,fisheye:hi,"fisheye.x":wr,"fisheye.y":Ei,"fisheye.circular":ai},this.update(Fe)}$o.prototype.update=function(Fe){this.options=me({},this.options,Fe),this.recoordinate()},$o.prototype.clone=function(){return new $o(this.options)},$o.prototype.getOptions=function(){return this.options},$o.prototype.clear=function(){this.update({transformations:[]})},$o.prototype.getSize=function(){var Fe=this.options;return[Fe.width,Fe.height,Fe.depth]},$o.prototype.getCenter=function(){var Fe=this.options,ot=Fe.x,Ut=Fe.y,ln=Fe.z;return[(2*ot+Fe.width)/2,(2*Ut+Fe.height)/2,(2*ln+Fe.depth)/2]},$o.prototype.transform=function(){for(var Fe=[],ot=0;ot<arguments.length;ot++)Fe[ot]=arguments[ot];var Ut=this.options.transformations;return this.update({transformations:E(E([],W(Ut),!1),[E([],W(Fe),!1)],!1)}),this},$o.prototype.map=function(Fe){return this.output(Fe)},$o.prototype.invert=function(Fe){return this.input(Fe)},$o.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},$o.prototype.compose=function(Fe){function ot(Ao,xs){var ya;Cn.push((xs=xs===void 0?!0:xs)?(ya=Ao,function(ra){for(var gs=[],as=0;as<ra.length-1;as+=3){var Ct=[ra[as],ra[as+1],ra[as+2]],Ct=ya(Ct);gs.push.apply(gs,E([],W(Ct),!1))}return gs}):Ao)}var Ut,ln,Nn=(Fe=Fe===void 0?!1:Fe)?E([],W(this.options.transformations),!1).reverse():this.options.transformations,Fn=Fe?function(Ao){return Ao.untransform}:function(Ao){return Ao.transform},gn=[],Cn=[];try{for(var pr=q(Nn),hr=pr.next();!hr.done;hr=pr.next()){var ei,ji,Ji,ti,Gi,Ni,Gr,So,fi=W(hr.value),Eo=fi[0],Wi=fi.slice(1),io=this.transformers[Eo];io&&(ji=(ei=this.options).x,Ji=ei.y,ti=ei.z,Gi=ei.width,Ni=ei.height,Gr=ei.depth,pt(So=io(E([],W(Wi),!1),ji,Ji,ti,Gi,Ni,Gr))?gn.push(So):(gn.length&&(ot(this.createMatrixTransform(gn,Fe)),gn.splice(0,gn.length)),ot(Fn(So)||Re,!0)))}}catch(Ao){Ut={error:Ao}}finally{try{hr&&!hr.done&&(ln=pr.return)&&ln.call(pr)}finally{if(Ut)throw Ut.error}}return gn.length&&ot(this.createMatrixTransform(gn,Fe)),wt.apply(void 0,E([],W(Cn),!1))},$o.prototype.createMatrixTransform=function(Fe,ot){var Ut,ln,Nn,Fn,gn,Cn,pr,hr,ei,ji,Ji,ti,Gi,Ni,Gr,So,fi,Eo,Wi,io,Ao,xs,ya,ra,gs,as,Ct,Wt,jn=et();return ot&&Fe.reverse(),Fe.forEach(function(Lr){return Je(jn,jn,Lr)}),ot&&(ot=Fe=jn,(Wt=new le(16))[0]=ot[0],Wt[1]=ot[1],Wt[2]=ot[2],Wt[3]=ot[3],Wt[4]=ot[4],Wt[5]=ot[5],Wt[6]=ot[6],Wt[7]=ot[7],Wt[8]=ot[8],Wt[9]=ot[9],Wt[10]=ot[10],Wt[11]=ot[11],Wt[12]=ot[12],Wt[13]=ot[13],Wt[14]=ot[14],Wt[15]=ot[15],Wt=(ot=Wt)[0],Ut=ot[1],ln=ot[2],Nn=ot[3],Fn=ot[4],gn=ot[5],Cn=ot[6],pr=ot[7],hr=ot[8],ei=ot[9],ji=ot[10],Ji=ot[11],ti=ot[12],Gi=ot[13],Ni=ot[14],ot=ot[15],Ct=(Gr=Wt*gn-Ut*Fn)*(as=ji*ot-Ji*Ni)-(So=Wt*Cn-ln*Fn)*(gs=ei*ot-Ji*Gi)+(fi=Wt*pr-Nn*Fn)*(ra=ei*Ni-ji*Gi)+(Eo=Ut*Cn-ln*gn)*(ya=hr*ot-Ji*ti)-(Wi=Ut*pr-Nn*gn)*(xs=hr*Ni-ji*ti)+(io=ln*pr-Nn*Cn)*(Ao=hr*Gi-ei*ti))&&(Fe[0]=(gn*as-Cn*gs+pr*ra)*(Ct=1/Ct),Fe[1]=(ln*gs-Ut*as-Nn*ra)*Ct,Fe[2]=(Gi*io-Ni*Wi+ot*Eo)*Ct,Fe[3]=(ji*Wi-ei*io-Ji*Eo)*Ct,Fe[4]=(Cn*ya-Fn*as-pr*xs)*Ct,Fe[5]=(Wt*as-ln*ya+Nn*xs)*Ct,Fe[6]=(Ni*fi-ti*io-ot*So)*Ct,Fe[7]=(hr*io-ji*fi+Ji*So)*Ct,Fe[8]=(Fn*gs-gn*ya+pr*Ao)*Ct,Fe[9]=(Ut*ya-Wt*gs-Nn*Ao)*Ct,Fe[10]=(ti*Wi-Gi*fi+ot*Gr)*Ct,Fe[11]=(ei*fi-hr*Wi-Ji*Gr)*Ct,Fe[12]=(gn*xs-Fn*ra-Cn*Ao)*Ct,Fe[13]=(Wt*ra-Ut*xs+ln*Ao)*Ct,Fe[14]=(Gi*So-ti*Eo-Ni*Gr)*Ct,Fe[15]=(hr*Eo-ei*So+ji*Gr)*Ct),function(dl){var Si,Zi,Jo,Hs,Is,Us,dl=[dl[0],dl[1],dl[2],1];return Jo=jn,Hs=(Zi=Si=dl)[0],Is=Zi[1],Us=Zi[2],Zi=Zi[3],Si[0]=Jo[0]*Hs+Jo[4]*Is+Jo[8]*Us+Jo[12]*Zi,Si[1]=Jo[1]*Hs+Jo[5]*Is+Jo[9]*Us+Jo[13]*Zi,Si[2]=Jo[2]*Hs+Jo[6]*Is+Jo[10]*Us+Jo[14]*Zi,Si[3]=Jo[3]*Hs+Jo[7]*Is+Jo[11]*Us+Jo[15]*Zi,[dl[0],dl[1],dl[2]]}},Lt=$o;function $o(Fe){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Io,translate3D:xi,scale3D:ga,transpose3D:Qo},this.update(Fe)}L.Coordinate=Be,L.Coordinate3D=Lt,Object.defineProperty(L,"__esModule",{value:!0})})},90857:function(gt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(L=!1));function W(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,ae,We){if(typeof xe!="function")throw new TypeError("The listener must be a function");var te=new W(xe,ae||ue,We),me=L?L+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],te]:ue._events[me].push(te):(ue._events[me]=te,ue._eventsCount++),ue}function de(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ee(){this._events=new q,this._eventsCount=0}ee.prototype.eventNames=function(){var ce=[],xe,ae;if(this._eventsCount===0)return ce;for(ae in xe=this._events)G.call(xe,ae)&&ce.push(L?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ee.prototype.listeners=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];if(!ae)return[];if(ae.fn)return[ae.fn];for(var We=0,te=ae.length,me=new Array(te);We<te;We++)me[We]=ae[We].fn;return me},ee.prototype.listenerCount=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];return ae?ae.fn?1:ae.length:0},ee.prototype.emit=function(ce,xe,ae,We,te,me){var Re=L?L+ce:ce;if(!this._events[Re])return!1;var $=this._events[Re],le=arguments.length,K,we;if($.fn){switch($.once&&this.removeListener(ce,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,xe),!0;case 3:return $.fn.call($.context,xe,ae),!0;case 4:return $.fn.call($.context,xe,ae,We),!0;case 5:return $.fn.call($.context,xe,ae,We,te),!0;case 6:return $.fn.call($.context,xe,ae,We,te,me),!0}for(we=1,K=new Array(le-1);we<le;we++)K[we-1]=arguments[we];$.fn.apply($.context,K)}else{var et=$.length,Je;for(we=0;we<et;we++)switch($[we].once&&this.removeListener(ce,$[we].fn,void 0,!0),le){case 1:$[we].fn.call($[we].context);break;case 2:$[we].fn.call($[we].context,xe);break;case 3:$[we].fn.call($[we].context,xe,ae);break;case 4:$[we].fn.call($[we].context,xe,ae,We);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];$[we].fn.apply($[we].context,K)}}return!0},ee.prototype.on=function(ce,xe,ae){return E(this,ce,xe,ae,!1)},ee.prototype.once=function(ce,xe,ae){return E(this,ce,xe,ae,!0)},ee.prototype.removeListener=function(ce,xe,ae,We){var te=L?L+ce:ce;if(!this._events[te])return this;if(!xe)return de(this,te),this;var me=this._events[te];if(me.fn)me.fn===xe&&(!We||me.once)&&(!ae||me.context===ae)&&de(this,te);else{for(var Re=0,$=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||We&&!me[Re].once||ae&&me[Re].context!==ae)&&$.push(me[Re]);$.length?this._events[te]=$.length===1?$[0]:$:de(this,te)}return this},ee.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=L?L+ce:ce,this._events[xe]&&de(this,xe)):(this._events=new q,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,gt.exports=ee},38554:function(gt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(L=!1));function W(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,ae,We){if(typeof xe!="function")throw new TypeError("The listener must be a function");var te=new W(xe,ae||ue,We),me=L?L+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],te]:ue._events[me].push(te):(ue._events[me]=te,ue._eventsCount++),ue}function de(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ee(){this._events=new q,this._eventsCount=0}ee.prototype.eventNames=function(){var ce=[],xe,ae;if(this._eventsCount===0)return ce;for(ae in xe=this._events)G.call(xe,ae)&&ce.push(L?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ee.prototype.listeners=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];if(!ae)return[];if(ae.fn)return[ae.fn];for(var We=0,te=ae.length,me=new Array(te);We<te;We++)me[We]=ae[We].fn;return me},ee.prototype.listenerCount=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];return ae?ae.fn?1:ae.length:0},ee.prototype.emit=function(ce,xe,ae,We,te,me){var Re=L?L+ce:ce;if(!this._events[Re])return!1;var $=this._events[Re],le=arguments.length,K,we;if($.fn){switch($.once&&this.removeListener(ce,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,xe),!0;case 3:return $.fn.call($.context,xe,ae),!0;case 4:return $.fn.call($.context,xe,ae,We),!0;case 5:return $.fn.call($.context,xe,ae,We,te),!0;case 6:return $.fn.call($.context,xe,ae,We,te,me),!0}for(we=1,K=new Array(le-1);we<le;we++)K[we-1]=arguments[we];$.fn.apply($.context,K)}else{var et=$.length,Je;for(we=0;we<et;we++)switch($[we].once&&this.removeListener(ce,$[we].fn,void 0,!0),le){case 1:$[we].fn.call($[we].context);break;case 2:$[we].fn.call($[we].context,xe);break;case 3:$[we].fn.call($[we].context,xe,ae);break;case 4:$[we].fn.call($[we].context,xe,ae,We);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];$[we].fn.apply($[we].context,K)}}return!0},ee.prototype.on=function(ce,xe,ae){return E(this,ce,xe,ae,!1)},ee.prototype.once=function(ce,xe,ae){return E(this,ce,xe,ae,!0)},ee.prototype.removeListener=function(ce,xe,ae,We){var te=L?L+ce:ce;if(!this._events[te])return this;if(!xe)return de(this,te),this;var me=this._events[te];if(me.fn)me.fn===xe&&(!We||me.once)&&(!ae||me.context===ae)&&de(this,te);else{for(var Re=0,$=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||We&&!me[Re].once||ae&&me[Re].context!==ae)&&$.push(me[Re]);$.length?this._events[te]=$.length===1?$[0]:$:de(this,te)}return this},ee.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=L?L+ce:ce,this._events[xe]&&de(this,xe)):(this._events=new q,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,gt.exports=ee},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(gt){try{let ae=function(){ee||(ee=!0,E())},We=function(){try{de.documentElement.doScroll("left")}catch(te){return void setTimeout(We,50)}ae()};var ce=ae,xe=We,L=(L=document.getElementsByTagName("script"))[L.length-1],G=L.getAttribute("data-injectcss"),L=L.getAttribute("data-disable-injectsvg");if(!L){var q,W,E,de,ee,ue=function(te,me){me.parentNode.insertBefore(te,me)};if(G&&!gt.__iconfont__svg__cssinject__){gt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(te){console&&console.log(te)}}q=function(){var te,me=document.createElement("div");me.innerHTML=gt._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(te=document.body).firstChild?ue(me,te.firstChild):te.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(q,0):(W=function(){document.removeEventListener("DOMContentLoaded",W,!1),q()},document.addEventListener("DOMContentLoaded",W,!1)):document.attachEvent&&(E=q,de=gt.document,ee=!1,We(),de.onreadystatechange=function(){de.readyState=="complete"&&(de.onreadystatechange=null,ae())})}}catch(ae){}}(window)},39827:function(gt,G,L){"use strict";L.d(G,{GC:function(){return U},h0:function(){return on},lv:function(){return qn},lo:function(){return Ft},kw:function(){return Jt},Or:function(){return un},KD:function(){return ze},I9:function(){return pe},lE:function(){return Vt},d:function(){return rr},n3:function(){return Nh},vY:function(){return rt},P7:function(){return pl},yn:function(){return Dt},ee:function(){return jt},v2:function(){return Cn},e7:function(){return Lh},Hp:function(){return Xf},gl:function(){return ee},cO:function(){return ys},Vb:function(){return le}});var q=L(1413),W=L(4942),E=L(66366);let de=function(oe){return oe.Normal="normal",oe.PostProcessing="post-processing",oe}({}),ee=function(oe){return oe[oe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",oe[oe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",oe[oe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",oe[oe.POINTS=0]="POINTS",oe[oe.LINES=1]="LINES",oe[oe.LINE_LOOP=2]="LINE_LOOP",oe[oe.LINE_STRIP=3]="LINE_STRIP",oe[oe.TRIANGLES=4]="TRIANGLES",oe[oe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",oe[oe.TRIANGLE_FAN=6]="TRIANGLE_FAN",oe[oe.ZERO=0]="ZERO",oe[oe.ONE=1]="ONE",oe[oe.SRC_COLOR=768]="SRC_COLOR",oe[oe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",oe[oe.SRC_ALPHA=770]="SRC_ALPHA",oe[oe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",oe[oe.DST_ALPHA=772]="DST_ALPHA",oe[oe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",oe[oe.DST_COLOR=774]="DST_COLOR",oe[oe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",oe[oe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",oe[oe.FUNC_ADD=32774]="FUNC_ADD",oe[oe.BLEND_EQUATION=32777]="BLEND_EQUATION",oe[oe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",oe[oe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",oe[oe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",oe[oe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",oe[oe.MAX_EXT=32776]="MAX_EXT",oe[oe.MIN_EXT=32775]="MIN_EXT",oe[oe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",oe[oe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",oe[oe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",oe[oe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",oe[oe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",oe[oe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",oe[oe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",oe[oe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",oe[oe.BLEND_COLOR=32773]="BLEND_COLOR",oe[oe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",oe[oe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",oe[oe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",oe[oe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",oe[oe.STREAM_DRAW=35040]="STREAM_DRAW",oe[oe.STATIC_DRAW=35044]="STATIC_DRAW",oe[oe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",oe[oe.BUFFER_SIZE=34660]="BUFFER_SIZE",oe[oe.BUFFER_USAGE=34661]="BUFFER_USAGE",oe[oe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",oe[oe.FRONT=1028]="FRONT",oe[oe.BACK=1029]="BACK",oe[oe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",oe[oe.CULL_FACE=2884]="CULL_FACE",oe[oe.BLEND=3042]="BLEND",oe[oe.DITHER=3024]="DITHER",oe[oe.STENCIL_TEST=2960]="STENCIL_TEST",oe[oe.DEPTH_TEST=2929]="DEPTH_TEST",oe[oe.SCISSOR_TEST=3089]="SCISSOR_TEST",oe[oe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",oe[oe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",oe[oe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",oe[oe.NO_ERROR=0]="NO_ERROR",oe[oe.INVALID_ENUM=1280]="INVALID_ENUM",oe[oe.INVALID_VALUE=1281]="INVALID_VALUE",oe[oe.INVALID_OPERATION=1282]="INVALID_OPERATION",oe[oe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",oe[oe.CW=2304]="CW",oe[oe.CCW=2305]="CCW",oe[oe.LINE_WIDTH=2849]="LINE_WIDTH",oe[oe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",oe[oe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",oe[oe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",oe[oe.FRONT_FACE=2886]="FRONT_FACE",oe[oe.DEPTH_RANGE=2928]="DEPTH_RANGE",oe[oe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",oe[oe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",oe[oe.DEPTH_FUNC=2932]="DEPTH_FUNC",oe[oe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",oe[oe.STENCIL_FUNC=2962]="STENCIL_FUNC",oe[oe.STENCIL_FAIL=2964]="STENCIL_FAIL",oe[oe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",oe[oe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",oe[oe.STENCIL_REF=2967]="STENCIL_REF",oe[oe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",oe[oe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",oe[oe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",oe[oe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",oe[oe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",oe[oe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",oe[oe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",oe[oe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",oe[oe.VIEWPORT=2978]="VIEWPORT",oe[oe.SCISSOR_BOX=3088]="SCISSOR_BOX",oe[oe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",oe[oe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",oe[oe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",oe[oe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",oe[oe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",oe[oe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",oe[oe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",oe[oe.RED_BITS=3410]="RED_BITS",oe[oe.GREEN_BITS=3411]="GREEN_BITS",oe[oe.BLUE_BITS=3412]="BLUE_BITS",oe[oe.ALPHA_BITS=3413]="ALPHA_BITS",oe[oe.DEPTH_BITS=3414]="DEPTH_BITS",oe[oe.STENCIL_BITS=3415]="STENCIL_BITS",oe[oe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",oe[oe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",oe[oe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",oe[oe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",oe[oe.SAMPLES=32937]="SAMPLES",oe[oe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",oe[oe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",oe[oe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",oe[oe.DONT_CARE=4352]="DONT_CARE",oe[oe.FASTEST=4353]="FASTEST",oe[oe.NICEST=4354]="NICEST",oe[oe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",oe[oe.BYTE=5120]="BYTE",oe[oe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",oe[oe.SHORT=5122]="SHORT",oe[oe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",oe[oe.INT=5124]="INT",oe[oe.UNSIGNED_INT=5125]="UNSIGNED_INT",oe[oe.FLOAT=5126]="FLOAT",oe[oe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",oe[oe.ALPHA=6406]="ALPHA",oe[oe.RGB=6407]="RGB",oe[oe.RGBA=6408]="RGBA",oe[oe.LUMINANCE=6409]="LUMINANCE",oe[oe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",oe[oe.RED=6403]="RED",oe[oe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",oe[oe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",oe[oe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",oe[oe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",oe[oe.VERTEX_SHADER=35633]="VERTEX_SHADER",oe[oe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",oe[oe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",oe[oe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",oe[oe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",oe[oe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",oe[oe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",oe[oe.SHADER_TYPE=35663]="SHADER_TYPE",oe[oe.DELETE_STATUS=35712]="DELETE_STATUS",oe[oe.LINK_STATUS=35714]="LINK_STATUS",oe[oe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",oe[oe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",oe[oe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",oe[oe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",oe[oe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",oe[oe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",oe[oe.NEVER=512]="NEVER",oe[oe.LESS=513]="LESS",oe[oe.EQUAL=514]="EQUAL",oe[oe.LEQUAL=515]="LEQUAL",oe[oe.GREATER=516]="GREATER",oe[oe.NOTEQUAL=517]="NOTEQUAL",oe[oe.GEQUAL=518]="GEQUAL",oe[oe.ALWAYS=519]="ALWAYS",oe[oe.KEEP=7680]="KEEP",oe[oe.REPLACE=7681]="REPLACE",oe[oe.INCR=7682]="INCR",oe[oe.DECR=7683]="DECR",oe[oe.INVERT=5386]="INVERT",oe[oe.INCR_WRAP=34055]="INCR_WRAP",oe[oe.DECR_WRAP=34056]="DECR_WRAP",oe[oe.VENDOR=7936]="VENDOR",oe[oe.RENDERER=7937]="RENDERER",oe[oe.VERSION=7938]="VERSION",oe[oe.NEAREST=9728]="NEAREST",oe[oe.LINEAR=9729]="LINEAR",oe[oe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",oe[oe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",oe[oe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",oe[oe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",oe[oe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",oe[oe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",oe[oe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",oe[oe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",oe[oe.TEXTURE_2D=3553]="TEXTURE_2D",oe[oe.TEXTURE=5890]="TEXTURE",oe[oe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",oe[oe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",oe[oe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",oe[oe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",oe[oe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",oe[oe.TEXTURE0=33984]="TEXTURE0",oe[oe.TEXTURE1=33985]="TEXTURE1",oe[oe.TEXTURE2=33986]="TEXTURE2",oe[oe.TEXTURE3=33987]="TEXTURE3",oe[oe.TEXTURE4=33988]="TEXTURE4",oe[oe.TEXTURE5=33989]="TEXTURE5",oe[oe.TEXTURE6=33990]="TEXTURE6",oe[oe.TEXTURE7=33991]="TEXTURE7",oe[oe.TEXTURE8=33992]="TEXTURE8",oe[oe.TEXTURE9=33993]="TEXTURE9",oe[oe.TEXTURE10=33994]="TEXTURE10",oe[oe.TEXTURE11=33995]="TEXTURE11",oe[oe.TEXTURE12=33996]="TEXTURE12",oe[oe.TEXTURE13=33997]="TEXTURE13",oe[oe.TEXTURE14=33998]="TEXTURE14",oe[oe.TEXTURE15=33999]="TEXTURE15",oe[oe.TEXTURE16=34e3]="TEXTURE16",oe[oe.TEXTURE17=34001]="TEXTURE17",oe[oe.TEXTURE18=34002]="TEXTURE18",oe[oe.TEXTURE19=34003]="TEXTURE19",oe[oe.TEXTURE20=34004]="TEXTURE20",oe[oe.TEXTURE21=34005]="TEXTURE21",oe[oe.TEXTURE22=34006]="TEXTURE22",oe[oe.TEXTURE23=34007]="TEXTURE23",oe[oe.TEXTURE24=34008]="TEXTURE24",oe[oe.TEXTURE25=34009]="TEXTURE25",oe[oe.TEXTURE26=34010]="TEXTURE26",oe[oe.TEXTURE27=34011]="TEXTURE27",oe[oe.TEXTURE28=34012]="TEXTURE28",oe[oe.TEXTURE29=34013]="TEXTURE29",oe[oe.TEXTURE30=34014]="TEXTURE30",oe[oe.TEXTURE31=34015]="TEXTURE31",oe[oe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",oe[oe.REPEAT=10497]="REPEAT",oe[oe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",oe[oe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",oe[oe.FLOAT_VEC2=35664]="FLOAT_VEC2",oe[oe.FLOAT_VEC3=35665]="FLOAT_VEC3",oe[oe.FLOAT_VEC4=35666]="FLOAT_VEC4",oe[oe.INT_VEC2=35667]="INT_VEC2",oe[oe.INT_VEC3=35668]="INT_VEC3",oe[oe.INT_VEC4=35669]="INT_VEC4",oe[oe.BOOL=35670]="BOOL",oe[oe.BOOL_VEC2=35671]="BOOL_VEC2",oe[oe.BOOL_VEC3=35672]="BOOL_VEC3",oe[oe.BOOL_VEC4=35673]="BOOL_VEC4",oe[oe.FLOAT_MAT2=35674]="FLOAT_MAT2",oe[oe.FLOAT_MAT3=35675]="FLOAT_MAT3",oe[oe.FLOAT_MAT4=35676]="FLOAT_MAT4",oe[oe.SAMPLER_2D=35678]="SAMPLER_2D",oe[oe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",oe[oe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",oe[oe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",oe[oe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",oe[oe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",oe[oe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",oe[oe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",oe[oe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",oe[oe.COMPILE_STATUS=35713]="COMPILE_STATUS",oe[oe.LOW_FLOAT=36336]="LOW_FLOAT",oe[oe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",oe[oe.HIGH_FLOAT=36338]="HIGH_FLOAT",oe[oe.LOW_INT=36339]="LOW_INT",oe[oe.MEDIUM_INT=36340]="MEDIUM_INT",oe[oe.HIGH_INT=36341]="HIGH_INT",oe[oe.FRAMEBUFFER=36160]="FRAMEBUFFER",oe[oe.RENDERBUFFER=36161]="RENDERBUFFER",oe[oe.RGBA4=32854]="RGBA4",oe[oe.RGB5_A1=32855]="RGB5_A1",oe[oe.RGB565=36194]="RGB565",oe[oe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",oe[oe.STENCIL_INDEX=6401]="STENCIL_INDEX",oe[oe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",oe[oe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",oe[oe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",oe[oe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",oe[oe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",oe[oe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",oe[oe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",oe[oe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",oe[oe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",oe[oe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",oe[oe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",oe[oe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",oe[oe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",oe[oe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",oe[oe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",oe[oe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",oe[oe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",oe[oe.NONE=0]="NONE",oe[oe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",oe[oe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",oe[oe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",oe[oe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",oe[oe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",oe[oe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",oe[oe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",oe[oe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",oe[oe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",oe[oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",oe[oe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",oe[oe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",oe[oe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",oe}({});const ue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:ce,isNil:xe,upperFirst:ae}=E.lodashUtil;class We{constructor(){(0,W.Z)(this,"shaderModuleService",void 0),(0,W.Z)(this,"rendererService",void 0),(0,W.Z)(this,"config",void 0),(0,W.Z)(this,"quad",ue),(0,W.Z)(this,"enabled",!0),(0,W.Z)(this,"renderToScreen",!1),(0,W.Z)(this,"model",void 0),(0,W.Z)(this,"name",void 0),(0,W.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(_e){this.name=_e}getType(){return de.PostProcessing}init(_e,tt){this.config=tt,this.rendererService=_e.getContainer().rendererService,this.shaderModuleService=_e.getContainer().shaderModuleService;const{createAttribute:cn,createBuffer:En,createModel:re}=this.rendererService,{vs:Nr,fs:Di,uniforms:Vi}=this.setupShaders();this.model=re({vs:Nr,fs:Di,attributes:{a_Position:cn({buffer:En({data:[-4,-4,4,-4,0,4],type:ee.FLOAT}),size:2})},uniforms:(0,q.Z)((0,q.Z)({u_Texture:null},Vi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(_e,tt){const cn=_e.multiPassRenderer.getPostProcessor(),{useFramebuffer:En,getViewportSize:re,clear:Nr}=this.rendererService,{width:Di,height:Vi}=re();En(this.renderToScreen?null:cn.getWriteFBO(),()=>{Nr({framebuffer:cn.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const xo=(0,q.Z)({u_BloomFinal:0,u_Texture:cn.getReadFBO(),u_ViewportSize:[Di,Vi]},this.convertOptionsToUniforms(this.optionsToUpdate));tt&&(xo.u_BloomFinal=1,xo.u_Texture2=tt),this.model.draw({uniforms:xo})})}isEnabled(){return this.enabled}setEnabled(_e){this.enabled=_e}setRenderToScreen(_e){this.renderToScreen=_e}updateOptions(_e){this.optionsToUpdate=(0,q.Z)((0,q.Z)({},this.optionsToUpdate),_e)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(_e){const tt={};return Object.keys(_e).forEach(cn=>{xe(_e[cn])||(tt[`u_${ae(ce(cn))}`]=_e[cn])}),tt}}function te(oe){let _e=0;switch(oe){case"vec2":case"ivec2":_e=2;break;case"vec3":case"ivec3":_e=3;break;case"vec4":case"ivec4":case"mat2":_e=4;break;case"mat3":_e=9;break;case"mat4":_e=16;break;default:}return _e}const me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Re(oe,_e=!1){const tt={};return oe=oe.replace(me,(cn,En,re)=>{const Nr=re.split(":"),Di=Nr[0].trim();let Vi="";switch(Nr.length>1&&(Vi=Nr[1].trim()),En){case"bool":Vi=Vi==="true";break;case"float":case"int":Vi=Number(Vi);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Vi?Vi=Vi.replace("[","").replace("]","").split(",").reduce((xo,yo)=>(xo.push(Number(yo.trim())),xo),[]):Vi=new Array(te(En)).fill(0);break;default:}return tt[Di]=Vi,`${_e?"uniform ":""}${En} ${Di};
`}),{content:oe,uniforms:tt}}function $(oe){let{content:_e,uniforms:tt}=Re(oe,!0);return _e=_e.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(cn,En,re)=>{re=re.trim().replace(/^.*$/gm,Vi=>`uniform ${Vi}`);const{content:Nr,uniforms:Di}=Re(re);return Object.assign(tt,Di),`${En}{
${Nr}
};`}),{content:_e,uniforms:tt}}function le(oe){const _e={};return oe.replace(me,(tt,cn,En)=>{const re=En.trim();return _e[re]?"":(_e[re]=!0,`uniform ${cn} ${re};
`)})}const K=null;function we(oe){return K.indexOf(oe)}const{clamp:et}=E.lodashUtil,Je=2,wt=4,pt=64,_t=128,Me=256,Ae=512,je=8192,Ze=16384,lt=32768,en=null,Le=131072,St=262144,Oe=524288,nt=1048576,Ke=2097152,Xe=4194304,Rt=8388608,bt=16777216,Ie=null;function Gt(oe,_e){return oe=et(Math.floor(oe),0,255),_e=et(Math.floor(_e),0,255),256*oe+_e}function mn(oe){const{color:_e,radius:tt,tileX:cn,tileY:En,shape:re,opacity:Nr,stroke:Di,strokeWidth:Vi,strokeOpacity:xo}=oe,yo=[],za=[],ba=[],go=[Gt(_e[0],_e[1]),Gt(_e[2],_e[3])],Ua=[Gt(Di[0],Di[1]),Gt(Di[2],Di[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([ja,xa])=>{yo.push([...go,(ja+1)*Rt+(xa+1)*Ke+getShapeIndex(re)*Le+tt,(cn+512)*Oe+(En+512)*pt]),za.push([...Ua,Vi,xo]),ba.push([Nr,0,0,0])}),{packedBuffer:yo,packedBuffer2:za,packedBuffer3:ba}}function Ln(oe,_e){if(oe===0&&!_e)return 0;if(oe===1&&_e)return 4294967295;const tt=_e?1:0,cn=Math.floor(oe*127);return cn*Ie+tt*bt+cn*Le+tt*en+cn*Ae+tt*Me+cn*Je+tt}const qn={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let rr=function(oe){return oe.TOPRIGHT="topright",oe.TOPLEFT="topleft",oe.BOTTOMRIGHT="bottomright",oe.BOTTOMLEFT="bottomleft",oe.TOPCENTER="topcenter",oe.BOTTOMCENTER="bottomcenter",oe.LEFTCENTER="leftcenter",oe.RIGHTCENTER="rightcenter",oe.LEFTTOP="lefttop",oe.RIGHTTOP="righttop",oe.LEFTBOTTOM="leftbottom",oe.RIGHTBOTTOM="rightbottom",oe}({}),Ft=function(oe){return oe[oe.LNGLAT=1]="LNGLAT",oe[oe.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",oe[oe.VECTOR_TILE=3]="VECTOR_TILE",oe[oe.IDENTITY=4]="IDENTITY",oe[oe.P20=5]="P20",oe[oe.P20_OFFSET=6]="P20_OFFSET",oe[oe.METER_OFFSET=7]="METER_OFFSET",oe[oe.P20_2=8]="P20_2",oe}({});const Jt={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"};var un={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Vn=function(oe){return oe.Hover="hover",oe.Click="click",oe.Select="select",oe.Active="active",oe.Drag="drag",oe}({}),on=function(oe){return oe.normal="normal",oe.additive="additive",oe.subtractive="subtractive",oe.min="min",oe.max="max",oe.none="none",oe}({}),Dt=function(oe){return oe.MULTIPLE="MULTIPLE",oe.SINGLE="SINGLE",oe}({}),Vt=function(oe){return oe.AND="and",oe.OR="or",oe}({}),ze=function(oe){return oe.INIT="init",oe.UPDATE="update",oe}({}),rt=function(oe){return oe.LINEAR="linear",oe.SEQUENTIAL="sequential",oe.POWER="power",oe.LOG="log",oe.IDENTITY="identity",oe.TIME="time",oe.QUANTILE="quantile",oe.QUANTIZE="quantize",oe.THRESHOLD="threshold",oe.CAT="cat",oe.DIVERGING="diverging",oe.CUSTOM="threshold",oe}({}),jt=function(oe){return oe.CONSTANT="constant",oe.VARIABLE="variable",oe}({}),U=function(oe){return oe[oe.Attribute=0]="Attribute",oe[oe.InstancedAttribute=1]="InstancedAttribute",oe[oe.Uniform=2]="Uniform",oe}({});const pe=["mapload","mapchange","mapAfterFrameChange"];var ct=L(49296),he=L.n(ct),$t=L(26729),sn=L.n($t);const pn=30;function Dn({characterSet:oe,getFontWidth:_e,fontHeight:tt,buffer:cn,maxCanvasWidth:En,mapping:re={},xOffset:Nr=0,yOffset:Di=0}){let Vi=0,xo=Nr;Array.from(oe).forEach((za,ba)=>{if(!re[za]){const go=_e(za,ba);xo+pn>En&&(xo=0,Vi++),re[za]={x:xo,y:Di+Vi*pn,width:pn,height:pn,advance:go},xo+=pn}});const yo=tt+cn*2;return{mapping:re,xOffset:xo,yOffset:Di+Vi*yo,canvasHeight:fn(Di+(Vi+1)*yo)}}function Wn(oe,_e,tt){let cn=0,En=0,re=0,Nr=[];const Di={};for(const xo of oe)if(!Di[xo.id]){const{size:yo}=xo;cn+yo+_e>tt&&(Yn(Di,Nr,En),cn=0,En=re+En+_e,re=0,Nr=[]),Nr.push({icon:xo,xOffset:cn}),cn=cn+yo+_e,re=Math.max(re,yo)}Nr.length>0&&Yn(Di,Nr,En);const Vi=fn(re+En+_e);return{mapping:Di,canvasHeight:Vi}}function Yn(oe,_e,tt){for(const cn of _e){const{icon:En,xOffset:re}=cn;oe[En.id]=(0,q.Z)((0,q.Z)({},En),{},{x:re,y:tt,image:En.image,width:En.width,height:En.height})}}function fn(oe){return Math.pow(2,Math.ceil(Math.log2(oe)))}const vt=Kn(),Pt="sans-serif",An="normal",Pn=24,Xn=3,dt=.25,Se=8,Be=1024,st=1,Lt=1,It=3,wn=null;function Kn(){const oe=[];for(let _e=32;_e<128;_e++)oe.push(String.fromCharCode(_e));return oe}function _r(oe,_e,tt,cn){oe.font=`${cn} ${tt}px ${_e}`,oe.fillStyle="black",oe.textBaseline="middle"}function Jn(oe,_e){for(let tt=0;tt<oe.length;tt++)_e.data[4*tt+3]=oe[tt]}class Pe extends $t.EventEmitter{constructor(..._e){super(..._e),(0,W.Z)(this,"fontAtlas",void 0),(0,W.Z)(this,"iconFontMap",void 0),(0,W.Z)(this,"iconFontGlyphs",{}),(0,W.Z)(this,"fontOptions",void 0),(0,W.Z)(this,"key",void 0),(0,W.Z)(this,"cache",new E.z6(It))}get scale(){return Lt}get canvas(){const _e=this.cache.get(this.key);return _e&&_e.data}get mapping(){const _e=this.cache.get(this.key);return _e&&_e.mapping||{}}getCanvasByKey(_e){const tt=this.cache.get(_e);return tt&&tt.data}getMappingByKey(_e){const tt=this.cache.get(_e);return tt&&tt.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Pt,fontWeight:An,characterSet:vt,fontSize:Pn,buffer:Xn,sdf:!0,cutoff:dt,radius:Se,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(_e){_e.forEach(tt=>{this.iconFontGlyphs[tt.name]=tt.unicode})}addIconFont(_e,tt){this.iconFontMap.set(_e,tt)}getIconFontKey(_e){return this.iconFontMap.get(_e)||_e}getGlyph(_e){return this.iconFontGlyphs[_e]?String.fromCharCode(parseInt(this.iconFontGlyphs[_e],16)):""}setFontOptions(_e){this.fontOptions=(0,q.Z)((0,q.Z)({},this.fontOptions),_e),this.key=this.getKey();const tt=this.getNewChars(this.key,this.fontOptions.characterSet),cn=this.cache.get(this.key);if(cn&&tt.length===0)return;const En=this.generateFontAtlas(this.key,tt,cn);this.fontAtlas=En,this.cache.set(this.key,En)}addFontFace(_e,tt){const cn=document.createElement("style");cn.type="text/css",cn.innerText=`
        @font-face{
            font-family: '${_e}';
            src: url('${tt}') format('woff2'),
            url('${tt}') format('woff'),
            url('${tt}') format('truetype');
        }`,cn.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${_e}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:_e})})}catch(En){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(En)}},document.getElementsByTagName("head")[0].appendChild(cn)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(_e,tt,cn){const{fontFamily:En,fontWeight:re,fontSize:Nr,buffer:Di,sdf:Vi,radius:xo,cutoff:yo,iconfont:za}=this.fontOptions;let ba=cn&&cn.data;ba||(ba=window.document.createElement("canvas"),ba.width=Be);const go=ba.getContext("2d",{willReadFrequently:!0});_r(go,En,Nr,re);const{mapping:Ua,canvasHeight:ja,xOffset:xa,yOffset:Es}=Dn((0,q.Z)({getFontWidth:Ea=>go.measureText(Ea).width,fontHeight:Nr*Lt,buffer:Di,characterSet:tt,maxCanvasWidth:Be},cn&&{mapping:cn.mapping,xOffset:cn.xOffset,yOffset:cn.yOffset})),$a=go.getImageData(0,0,ba.width,ba.height);if(ba.height=ja,go.putImageData($a,0,0),_r(go,En,Nr,re),Vi){const Ea=new(he())(Nr,Di,xo,yo,En,re),Va=go.getImageData(0,0,Ea.size,Ea.size);for(const js of tt){if(za){const Ql=String.fromCharCode(parseInt(js.replace("&#x","").replace(";",""),16)),Xs=Ea.draw(Ql);Jn(Xs,Va)}else Jn(Ea.draw(js),Va);go.putImageData(Va,Ua[js].x,Ua[js].y)}}else for(const Ea of tt)go.fillText(Ea,Ua[Ea].x,Ua[Ea].y+Nr*st);return{xOffset:xa,yOffset:Es,mapping:Ua,data:ba,width:ba.width,height:ba.height}}getKey(){const{fontFamily:_e,fontWeight:tt}=this.fontOptions;return`${_e}_${tt}`}getNewChars(_e,tt){const cn=this.cache.get(_e);if(!cn)return tt;const En=[],re=cn.mapping,Nr=new Set(Object.keys(re));return new Set(tt).forEach(Vi=>{Nr.has(Vi)||En.push(Vi)}),En}}var Te=L(15861);const ke=3,it=1024,At=64;class Yt extends $t.EventEmitter{constructor(..._e){super(..._e),(0,W.Z)(this,"canvasHeight",128),(0,W.Z)(this,"texture",void 0),(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"iconData",void 0),(0,W.Z)(this,"iconMap",void 0),(0,W.Z)(this,"ctx",void 0),(0,W.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(_e,tt){var cn=this;return(0,Te.Z)(function*(){let En=new Image;cn.loadingImageCount++,cn.hasImage(_e)?console.warn("Image Id already exists"):cn.iconData.push({id:_e,size:At}),cn.updateIconMap(),En=yield cn.loadImage(tt);const re=cn.iconData.find(Nr=>Nr.id===_e);re&&(re.image=En,re.width=En.width,re.height=En.height),cn.update()})()}addImageMini(_e,tt,cn){const En=cn.getSceneConfig().canvas;let re=En.createImage();if(this.loadingImageCount++,this.hasImage(_e))throw new Error("Image Id already exists");this.iconData.push({id:_e,size:At}),this.updateIconMap(),this.loadImageMini(tt,En).then(Nr=>{re=Nr;const Di=this.iconData.find(Vi=>Vi.id===_e);Di&&(Di.image=re,Di.width=re.width,Di.height=re.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(_e){return this.iconMap.hasOwnProperty(_e)}removeImage(_e){this.hasImage(_e)&&(this.iconData=this.iconData.filter(tt=>tt.id!==_e),delete this.iconMap[_e],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(_e){return new Promise((tt,cn)=>{if(_e instanceof HTMLImageElement){tt(_e);return}const En=new Image;En.crossOrigin="anonymous",En.onload=()=>{tt(En)},En.onerror=()=>{cn(new Error("Could not load image at "+_e))},En.src=_e instanceof File?URL.createObjectURL(_e):_e})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=it,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(_e=>{const{x:tt,y:cn,image:En,width:re=64,height:Nr=64}=this.iconMap[_e],Vi=Math.max(re,Nr)/At,xo=Nr/Vi,yo=re/Vi;En&&this.ctx.drawImage(En,tt+(At-yo)/2,cn+(At-xo)/2,yo,xo)})}updateIconMap(){const{mapping:_e,canvasHeight:tt}=Wn(this.iconData,ke,it);this.iconMap=_e,this.canvasHeight=tt}loadImageMini(_e,tt){return new Promise((cn,En)=>{const re=tt.createImage();re.crossOrigin="anonymous",re.onload=()=>{cn(re)},re.onerror=()=>{En(new Error("Could not load image at "+_e))},re.src=_e})}}var hn=L(85975);class Et{constructor(){(0,W.Z)(this,"viewport",void 0),(0,W.Z)(this,"overridedViewProjectionMatrix",void 0),(0,W.Z)(this,"viewMatrixInverse",void 0),(0,W.Z)(this,"cameraPosition",void 0)}init(){}update(_e){this.viewport=_e,this.viewMatrixInverse=hn.create(),hn.invert(this.viewMatrixInverse,_e.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[_e,tt]=this.viewport.getCenter();return[_e,tt]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(_e,tt){return this.viewport.projectFlat(_e,tt)}setViewProjectionMatrix(_e){this.overridedViewProjectionMatrix=_e}}const Kt={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class er{constructor(){(0,W.Z)(this,"container",void 0),(0,W.Z)(this,"controlCorners",void 0),(0,W.Z)(this,"controlContainer",void 0),(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"controls",[]),(0,W.Z)(this,"unAddControls",[])}init(_e,tt){this.container=_e.container,this.scene=tt,this.mapsService=tt.mapService,this.initControlPos()}addControl(_e,tt){tt.mapService.map?(_e.addTo(this.scene),this.controls.push(_e)):this.unAddControls.push(_e)}getControlByName(_e){return this.controls.find(tt=>tt.controlOption.name===_e)}removeControl(_e){const tt=this.controls.indexOf(_e);return tt>-1&&this.controls.splice(tt,1),_e.remove(),this}addControls(){this.unAddControls.forEach(_e=>{_e.addTo(this.scene),this.controls.push(_e)}),this.unAddControls=[]}destroy(){for(const _e of this.controls)_e.remove();this.controls=[],this.clearControlPos()}initControlPos(){const _e=this.controlCorners={},tt="l7-",cn=this.controlContainer=E.SO.create("div",tt+"control-container",this.container);function En(Nr=[]){const Di=Nr.map(Vi=>tt+Vi).join(" ");_e[Nr.filter(Vi=>!["row","column"].includes(Vi)).join("")]=E.SO.create("div",Di,cn)}function re(Nr){return[...Nr.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),Kt[Nr]]}Object.values(rr).forEach(Nr=>{En(re(Nr))}),this.checkCornerOverlap()}clearControlPos(){for(const _e in this.controlCorners)this.controlCorners[_e]&&E.SO.remove(this.controlCorners[_e]);this.controlContainer&&E.SO.remove(this.controlContainer)}checkCornerOverlap(){const _e=window.MutationObserver;if(_e)for(const tt of Object.keys(this.controlCorners)){const cn=tt.match(/^(top|bottom)(left|right)$/);if(cn){const[,En,re]=cn,Nr=this.controlCorners[`${En}${re}`];new _e(([{target:Vi}])=>{Nr&&(Nr.style[En]=Vi.clientHeight+"px")}).observe(this.controlCorners[`${re}${En}`],{childList:!0,attributes:!0})}}}}class br{constructor(){(0,W.Z)(this,"container",void 0),(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"markers",[]),(0,W.Z)(this,"markerLayers",[]),(0,W.Z)(this,"unAddMarkers",[]),(0,W.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(_e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(_e),_e.addTo(this.scene)):this.unAddMarkerLayers.push(_e)}removeMarkerLayer(_e){_e.destroy(),this.markerLayers.indexOf(_e);const tt=this.markerLayers.indexOf(_e);tt>-1&&this.markerLayers.splice(tt,1)}addMarker(_e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(_e),_e.addTo(this.scene)):this.unAddMarkers.push(_e)}addMarkers(){this.unAddMarkers.forEach(_e=>{_e.addTo(this.scene),this.markers.push(_e)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(_e=>{this.markerLayers.push(_e),_e.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(_e){_e.remove(),this.markers.indexOf(_e);const tt=this.markers.indexOf(_e);tt>-1&&this.markers.splice(tt,1)}removeAllMarkers(){this.destroy()}init(_e){this.scene=_e,this.mapsService=_e.mapService}destroy(){this.markers.forEach(_e=>{_e.remove()}),this.markers=[],this.markerLayers.forEach(_e=>{_e.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(_e){_e.destroy()}}class Vr{constructor(){(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"popups",[]),(0,W.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(_e){_e!=null&&_e.isOpen()&&_e.remove();const tt=this.popups.indexOf(_e);tt>-1&&this.popups.splice(tt,1);const cn=this.unAddPopups.indexOf(_e);cn>-1&&this.unAddPopups.splice(cn,1)}destroy(){this.popups.forEach(_e=>_e.remove())}addPopup(_e){_e&&_e.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(tt=>{tt.getOptions().autoClose&&this.removePopup(tt)}),this.isMarkerReady?(_e.addTo(this.scene),this.popups.push(_e)):this.unAddPopups.push(_e),_e.on("close",()=>{this.removePopup(_e)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(_e=>{this.addPopup(_e),this.unAddPopups=[]})}init(_e){this.scene=_e,this.mapsService=_e.mapService}}var Ur={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:_i}=E.lodashUtil,Ai={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Vt.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class Ei{constructor(){(0,W.Z)(this,"sceneConfigCache",{}),(0,W.Z)(this,"layerConfigCache",{}),(0,W.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(_e){return this.sceneConfigCache[_e]}getSceneWarninfo(_e){return Ur[_e]}setSceneConfig(_e,tt){this.sceneConfigCache[_e]=(0,q.Z)((0,q.Z)({},Ai),tt)}getLayerConfig(_e){return this.layerConfigCache[_e]}setLayerConfig(_e,tt,cn){this.layerConfigCache[tt]=(0,q.Z)({},_i({},this.sceneConfigCache[_e],wr,cn))}getAttributeConfig(_e){return this.layerAttributeConfigCache[_e]}setAttributeConfig(_e,tt){this.layerAttributeConfigCache[_e]=(0,q.Z)((0,q.Z)({},this.layerAttributeConfigCache[_e]),tt)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var hi=L(98333);const ai=Math.PI/180,Io=512,xi=4003e4;function Qo({latitude:oe=0,zoom:_e=0,scale:tt,highPrecision:cn=!1,flipY:En=!1}){tt=tt!==void 0?tt:Math.pow(2,_e);const re={},Nr=Io*tt,Di=Math.cos(oe*ai),Vi=Nr/360,xo=Vi/Di,yo=Nr/xi/Di;if(re.pixelsPerMeter=[yo,-yo,yo],re.metersPerPixel=[1/yo,-1/yo,1/yo],re.pixelsPerDegree=[Vi,-xo,yo],re.degreesPerPixel=[1/Vi,-1/xo,1/yo],cn){const za=ai*Math.tan(oe*ai)/Di,ba=Vi*za/2,go=Nr/xi*za,Ua=go/xo*yo;re.pixelsPerDegree2=[0,-ba,go],re.pixelsPerMeter2=[Ua,0,Ua],En&&(re.pixelsPerDegree2[1]=-re.pixelsPerDegree2[1],re.pixelsPerMeter2[1]=-re.pixelsPerMeter2[1])}return En&&(re.pixelsPerMeter[1]=-re.pixelsPerMeter[1],re.metersPerPixel[1]=-re.metersPerPixel[1],re.pixelsPerDegree[1]=-re.pixelsPerDegree[1],re.degreesPerPixel[1]=-re.degreesPerPixel[1]),re}const ga=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class Po{constructor(_e){(0,W.Z)(this,"needRefresh",!0),(0,W.Z)(this,"coordinateSystem",void 0),(0,W.Z)(this,"viewportCenter",void 0),(0,W.Z)(this,"viewportCenterProjection",void 0),(0,W.Z)(this,"pixelsPerDegree",void 0),(0,W.Z)(this,"pixelsPerDegree2",void 0),(0,W.Z)(this,"pixelsPerMeter",void 0),this.cameraService=_e}refresh(_e){const tt=this.cameraService.getZoom(),cn=this.cameraService.getZoomScale(),En=_e||this.cameraService.getCenter(),{pixelsPerMeter:re,pixelsPerDegree:Nr}=Qo({latitude:En[1],zoom:tt});this.viewportCenter=En,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=re,this.pixelsPerDegree=Nr,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ft.LNGLAT||this.coordinateSystem===Ft.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ft.LNGLAT_OFFSET?this.calculateLnglatOffset(En,tt):this.coordinateSystem===Ft.P20_OFFSET&&this.calculateLnglatOffset(En,tt,cn,!0),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(_e){this.coordinateSystem=_e}getViewportCenter(){return this.viewportCenter}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(_e,tt,cn,En){const{pixelsPerMeter:re,pixelsPerDegree:Nr,pixelsPerDegree2:Di}=Qo({latitude:_e[1],zoom:tt,scale:cn,flipY:En,highPrecision:!0});let Vi=this.cameraService.getViewMatrix();const xo=this.cameraService.getProjectionMatrix();let yo=hn.multiply([],xo,Vi);const za=this.cameraService.projectFlat([Math.fround(_e[0]),Math.fround(_e[1])],Math.pow(2,tt));this.viewportCenterProjection=hi.fF([],[za[0],za[1],0,1],yo),Vi=this.cameraService.getViewMatrixUncentered()||Vi,yo=hn.multiply([],xo,Vi),yo=hn.multiply([],yo,ga),this.cameraService.setViewProjectionMatrix(yo),this.pixelsPerMeter=re,this.pixelsPerDegree=Nr,this.pixelsPerDegree2=Di}}class $o extends $t.EventEmitter{constructor(..._e){super(..._e),(0,W.Z)(this,"renderMap",new Map),(0,W.Z)(this,"enable",!1),(0,W.Z)(this,"renderEnable",!1),(0,W.Z)(this,"cacheLogs",{})}setEnable(_e){this.enable=!!_e}log(_e,tt){if(!this.enable)return;const cn=_e.split(".");let En=null;cn.forEach((re,Nr)=>{En!==null?(En[re]||(En[re]={}),Nr!==cn.length-1&&(En=En[re])):(this.cacheLogs[re]||(this.cacheLogs[re]={}),Nr!==cn.length-1&&(En=this.cacheLogs[re])),Nr===cn.length-1&&(En[re]=(0,q.Z)((0,q.Z)({time:Date.now()},En[re]),tt))})}getLog(_e){switch(typeof _e){case"string":return this.cacheLogs[_e];case"object":return _e.map(tt=>this.cacheLogs[tt]).filter(tt=>tt!==void 0);case"undefined":return this.cacheLogs}}removeLog(_e){delete this.cacheLogs[_e]}generateRenderUid(){return this.renderEnable?(0,E.M8)():""}renderDebug(_e){this.renderEnable=_e}renderStart(_e){if(!this.renderEnable||!this.enable)return;const tt=this.renderMap.get(_e)||{};this.renderMap.set(_e,(0,q.Z)((0,q.Z)({},tt),{},{renderUid:_e,renderStart:Date.now()}))}renderEnd(_e){if(!this.renderEnable||!this.enable)return;const tt=this.renderMap.get(_e);if(tt){const cn=tt.renderStart,En=Date.now();this.emit("renderEnd",(0,q.Z)((0,q.Z)({},tt),{},{renderEnd:En,renderDuration:En-cn})),this.renderMap.delete(_e)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var Fe=L(50840),ot=L.n(Fe);const Ut={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class ln extends sn(){get mapService(){return this.container.mapService}constructor(_e){super(),(0,W.Z)(this,"indragging",!1),(0,W.Z)(this,"hammertime",void 0),(0,W.Z)(this,"lastClickTime",0),(0,W.Z)(this,"lastClickXY",[-1,-1]),(0,W.Z)(this,"clickTimer",void 0),(0,W.Z)(this,"$containter",void 0),(0,W.Z)(this,"onDrag",tt=>{const cn=this.interactionEvent(tt);cn.type=Ut[cn.type],cn.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Vn.Drag,cn)}),(0,W.Z)(this,"onHammer",tt=>{tt.srcEvent.stopPropagation();const cn=this.interactionEvent(tt);this.emit(Vn.Hover,cn)}),(0,W.Z)(this,"onTouch",tt=>{const cn=tt.touches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchstart"})}),(0,W.Z)(this,"onTouchEnd",tt=>{if(tt.changedTouches.length>0){const cn=tt.changedTouches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchend"})}}),(0,W.Z)(this,"onTouchMove",tt=>{const cn=tt.changedTouches[0];this.onHover({clientX:cn.clientX,clientY:cn.clientY,type:"touchmove"})}),(0,W.Z)(this,"onHover",tt=>{const{clientX:cn,clientY:En}=tt;let re=cn,Nr=En;const Di=tt.type,Vi=this.mapService.getMapContainer();if(Vi){const{top:yo,left:za}=Vi.getBoundingClientRect();re=re-za-Vi.clientLeft,Nr=Nr-yo-Vi.clientTop}const xo=this.mapService.containerToLngLat([re,Nr]);if(Di==="click"){this.isDoubleTap(re,Nr,xo);return}if(Di==="touch"){this.isDoubleTap(re,Nr,xo);return}Di!=="click"&&Di!=="dblclick"&&this.emit(Vn.Hover,{x:re,y:Nr,lngLat:xo,type:Di,target:tt})}),this.container=_e}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Vn.Hover)}triggerHover({x:_e,y:tt}){this.emit(Vn.Hover,{x:_e,y:tt})}triggerSelect(_e){this.emit(Vn.Select,{featureId:_e})}triggerActive(_e){this.emit(Vn.Active,{featureId:_e})}addEventListenerOnMap(){const _e=this.mapService.getMapContainer();if(_e){const tt=new(ot()).Manager(_e);tt.add(new(ot()).Tap({event:"dblclick",taps:2})),tt.add(new(ot()).Tap({event:"click"})),tt.add(new(ot()).Pan({threshold:0,pointers:0})),tt.add(new(ot()).Press({})),tt.on("dblclick click",this.onHammer),tt.on("panstart panmove panend pancancel",this.onDrag),_e.addEventListener("touchstart",this.onTouch),_e.addEventListener("touchend",this.onTouchEnd),_e.addEventListener("mousemove",this.onHover),_e.addEventListener("touchmove",this.onTouchMove),_e.addEventListener("mousedown",this.onHover,!0),_e.addEventListener("mouseup",this.onHover),_e.addEventListener("contextmenu",this.onHover),this.hammertime=tt}}removeEventListenerOnMap(){const _e=this.mapService.getMapContainer();_e&&(_e.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),_e.removeEventListener("touchstart",this.onTouch),_e.removeEventListener("touchend",this.onTouchEnd),_e.removeEventListener("mousedown",this.onHover),_e.removeEventListener("mouseup",this.onHover),_e.removeEventListener("contextmenu",this.onHover))}interactionEvent(_e){const{type:tt,pointerType:cn}=_e;let En,re;cn==="touch"?(re=Math.floor(_e.pointers[0].clientY),En=Math.floor(_e.pointers[0].clientX)):(re=Math.floor(_e.srcEvent.y),En=Math.floor(_e.srcEvent.x));const Nr=this.mapService.getMapContainer();if(Nr){const{top:Vi,left:xo}=Nr.getBoundingClientRect();En-=xo,re-=Vi}const Di=this.mapService.containerToLngLat([En,re]);return{x:En,y:re,lngLat:Di,type:tt,target:_e.srcEvent}}isDoubleTap(_e,tt,cn){const En=new Date().getTime();let re="click";En-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-_e)<10&&Math.abs(this.lastClickXY[1]-tt)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),re="dblclick",this.emit(Vn.Hover,{x:_e,y:tt,lngLat:cn,type:re})):(this.lastClickTime=En,this.lastClickXY=[_e,tt],this.clickTimer=setTimeout(()=>{re="click",this.emit(Vn.Hover,{x:_e,y:tt,lngLat:cn,type:re})},400))}}let Nn=0;function Fn(oe){let _e=oe;if(typeof oe=="string"&&(_e=document.getElementById(oe)),_e){const tt=document.createElement("div");return tt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,tt.id=`l7-scene-${Nn++}`,tt.classList.add("l7-scene"),_e.appendChild(tt),tt}return null}function gn(oe){var _e;let tt=!0;if((oe==null||(_e=oe.target)===null||_e===void 0?void 0:_e.target)instanceof HTMLElement){var cn;let re=oe==null||(cn=oe.target)===null||cn===void 0?void 0:cn.target;for(;re;){var En;const Nr=Array.from(re.classList);if(Nr.includes("l7-marker")||Nr.includes("l7-popup")){tt=!1;break}re=(En=re)===null||En===void 0?void 0:En.parentElement}}return tt}let Cn=function(oe){return oe[oe.SAMPLED=0]="SAMPLED",oe[oe.RENDER_TARGET=1]="RENDER_TARGET",oe}({});class pr{constructor(_e){var tt=this;(0,W.Z)(this,"pickedColors",void 0),(0,W.Z)(this,"pickedTileLayers",[]),(0,W.Z)(this,"pickingFBO",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),(0,W.Z)(this,"alreadyInPicking",!1),(0,W.Z)(this,"pickBufferScale",1),(0,W.Z)(this,"pickFromPickingFBO",function(){var cn=(0,Te.Z)(function*(En,{x:re,y:Nr,lngLat:Di,type:Vi,target:xo}){let yo=!1;const{readPixelsAsync:za,getViewportSize:ba}=tt.rendererService,{width:go,height:Ua}=ba(),{enableHighlight:ja,enableSelect:xa}=En.getLayerConfig(),Es=re*E.SO.DPR,$a=Nr*E.SO.DPR;if(Es>go-1*E.SO.DPR||Es<0||$a>Ua-1*E.SO.DPR||$a<0)return!1;const Ea=yield za({x:Math.floor(Es/tt.pickBufferScale),y:Math.floor((Ua-(Nr+1)*E.SO.DPR)/tt.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:tt.pickingFBO});if(tt.pickedColors=Ea,Ea[0]!==0||Ea[1]!==0||Ea[2]!==0){const Va=(0,E.W0)(Ea),js=En.layerPickService.getFeatureById(Va);Va!==En.getCurrentPickId()&&Vi==="mousemove"&&(Vi="mouseenter");const Ql={x:re,y:Nr,type:Vi,lngLat:Di,featureId:Va,feature:js,target:xo};js&&(yo=!0,En.setCurrentPickId(Va),tt.triggerHoverOnLayer(En,Ql))}else{const Va={x:re,y:Nr,lngLat:Di,type:En.getCurrentPickId()!==null&&Vi==="mousemove"?"mouseout":"un"+Vi,featureId:null,target:xo,feature:null};tt.triggerHoverOnLayer(En,(0,q.Z)((0,q.Z)({},Va),{},{type:"unpick"})),tt.triggerHoverOnLayer(En,Va),En.setCurrentPickId(null)}if(ja&&En.layerPickService.highlightPickedFeature(Ea),xa&&Vi==="click"&&(Ea==null?void 0:Ea.toString())!==[0,0,0,0].toString()){const Va=(0,E.W0)(Ea);En.getCurrentSelectedId()===null||Va!==En.getCurrentSelectedId()?(En.layerPickService.selectFeature(Ea),En.setCurrentSelectedId(Va)):(En.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),En.setCurrentSelectedId(null))}return yo});return function(En,re){return cn.apply(this,arguments)}}()),this.container=_e}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(_e){const{createTexture2D:tt,createFramebuffer:cn,getViewportSize:En}=this.rendererService;let{width:re,height:Nr}=En();this.pickBufferScale=this.configService.getSceneConfig(_e).pickBufferScale||1,re=Math.round(re/this.pickBufferScale),Nr=Math.round(Nr/this.pickBufferScale);const Di=tt({width:re,height:Nr,usage:Cn.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=cn({color:Di,depth:!0,width:re,height:Nr}),this.interactionService.on(Vn.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(_e,tt,cn){var En=this;return(0,Te.Z)(function*(){const{useFramebufferAsync:re,clear:Nr}=En.rendererService;En.resizePickingFBO(),_e.hooks.beforePickingEncode.call(),yield re(En.pickingFBO,(0,Te.Z)(function*(){Nr({framebuffer:En.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),_e.renderModels({ispick:!0})})),_e.hooks.afterPickingEncode.call();const Di=yield En.pickBox(_e,tt);cn(Di)})()}pickBox(_e,tt){var cn=this;return(0,Te.Z)(function*(){const[En,re,Nr,Di]=tt.map(Es=>{const $a=Es<0?0:Es;return Math.floor($a*E.SO.DPR/cn.pickBufferScale)}),{readPixelsAsync:Vi,getViewportSize:xo}=cn.rendererService,{width:yo,height:za}=xo();if(En>(yo-1)*E.SO.DPR/cn.pickBufferScale||Nr<0||re>(za-1)*E.SO.DPR/cn.pickBufferScale||Di<0)return[];const ba=Math.min(yo/cn.pickBufferScale,Nr)-En,go=Math.min(za/cn.pickBufferScale,Di)-re,Ua=yield Vi({x:En,y:Math.floor(za/cn.pickBufferScale-(Di+1)),width:ba,height:go,data:new Uint8Array(ba*go*4),framebuffer:cn.pickingFBO}),ja=[],xa={};for(let Es=0;Es<Ua.length/4;Es=Es+1){const $a=Ua.slice(Es*4,Es*4+4),Ea=(0,E.W0)($a);if(Ea!==-1&&!xa[Ea]){const Va=_e.layerPickService.getFeatureById(Ea);ja.push((0,q.Z)((0,q.Z)({},Va),{},{pickedFeatureIdx:Ea})),xa[Ea]=!0}}return ja})()}handleCursor(_e,tt){const{cursor:cn="",cursorEnabled:En}=_e.getLayerConfig();if(En){const Nr=this.mapService.version==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Di=Nr==null?void 0:Nr.style.getPropertyValue("cursor");tt==="unmousemove"&&Di!==""?Nr==null||Nr.style.setProperty("cursor",""):tt==="mousemove"&&(Nr==null||Nr.style.setProperty("cursor",cn))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(_e){var tt=this;return(0,Te.Z)(function*(){!tt.layerService.needPick(_e.type)||!tt.isPickingAllLayer()||(tt.alreadyInPicking=!0,yield tt.pickingLayers(_e),tt.layerService.renderLayers(),tt.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:_e}=this.rendererService,{width:tt,height:cn}=_e();(this.width!==tt||this.height!==cn)&&(this.pickingFBO.resize({width:Math.round(tt/this.pickBufferScale),height:Math.round(cn/this.pickBufferScale)}),this.width=tt,this.height=cn)}pickingLayers(_e){var tt=this;return(0,Te.Z)(function*(){const{clear:cn,useFramebufferAsync:En}=tt.rendererService;tt.resizePickingFBO();const re=tt.layerService.getRenderList();for(const Nr of re.filter(Di=>Di.needPick(_e.type)).reverse()){yield En(tt.pickingFBO,(0,Te.Z)(function*(){cn({framebuffer:tt.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Nr.layerPickService.pickRender(_e)}));const Di=yield tt.pickFromPickingFBO(Nr,_e);if(tt.layerService.pickedLayerId=Di?+Nr.id:-1,Di&&!Nr.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(_e,tt){gn(tt)&&(this.handleCursor(_e,tt.type),_e.emit(tt.type,tt))}}class hr{constructor(_e=!0){(0,W.Z)(this,"autoStart",void 0),(0,W.Z)(this,"startTime",0),(0,W.Z)(this,"oldTime",0),(0,W.Z)(this,"running",!1),(0,W.Z)(this,"elapsedTime",0),this.autoStart=_e}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const tt=(typeof performance=="undefined"?Date:performance).now();_e=(tt-this.oldTime)/1e3,this.oldTime=tt,this.elapsedTime+=_e}return _e}}const{throttle:ei}=E.lodashUtil;class ji extends $t.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(_e){super(),(0,W.Z)(this,"pickedLayerId",-1),(0,W.Z)(this,"clock",new hr),(0,W.Z)(this,"alreadyInRendering",!1),(0,W.Z)(this,"layers",[]),(0,W.Z)(this,"layerList",[]),(0,W.Z)(this,"layerRenderID",void 0),(0,W.Z)(this,"sceneInited",!1),(0,W.Z)(this,"animateInstanceCount",0),(0,W.Z)(this,"shaderPicking",!0),(0,W.Z)(this,"enableRender",!0),(0,W.Z)(this,"reRender",ei(()=>{this.renderLayers()},32)),(0,W.Z)(this,"throttleRenderLayers",ei(()=>{this.renderLayers()},16)),this.container=_e}needPick(_e){return this.updateLayerRenderList(),this.layerList.some(tt=>tt.needPick(_e))}add(_e){this.layers.push(_e),this.sceneInited&&_e.init().then(()=>{this.renderLayers()})}addMask(_e){this.sceneInited&&_e.init().then(()=>{this.renderLayers()})}initLayers(){var _e=this;return(0,Te.Z)(function*(){_e.sceneInited=!0,_e.layers.forEach(function(){var tt=(0,Te.Z)(function*(cn){cn.startInit||(yield cn.init(),_e.updateLayerRenderList())});return function(cn){return tt.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(_e){return this.layers.find(tt=>tt.id===_e)}getLayerByName(_e){return this.layers.find(tt=>tt.name===_e)}remove(_e,tt){var cn=this;return(0,Te.Z)(function*(){tt?tt.layerChildren=tt.layerChildren.filter(En=>En!==_e):cn.layers=cn.layers.filter(En=>En!==_e),_e.destroy(),cn.reRender(),cn.emit("layerChange",cn.layers)})()}removeAllLayers(){var _e=this;return(0,Te.Z)(function*(){_e.destroy(),_e.reRender()})()}setEnableRender(_e){this.enableRender=_e}renderLayers(){var _e=this;return(0,Te.Z)(function*(){if(_e.alreadyInRendering||!_e.enableRender)return;_e.updateLayerRenderList();const tt=_e.debugService.generateRenderUid();_e.debugService.renderStart(tt),_e.alreadyInRendering=!0,_e.clear();for(const cn of _e.layerList)cn.prerender();_e.renderService.beginFrame();for(const cn of _e.layerList){const{enableMask:En}=cn.getLayerConfig();cn.masks.filter(re=>re.inited).length>0&&En&&_e.renderMask(cn.masks),cn.getLayerConfig().enableMultiPassRenderer?yield cn.renderMultiPass():cn.render()}_e.renderService.endFrame(),_e.debugService.renderEnd(tt),_e.alreadyInRendering=!1})()}renderMask(_e){let tt=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const cn=_e.length>1?Dt.MULTIPLE:Dt.SINGLE;for(const En of _e)En.render({isStencil:!0,stencilType:cn,stencilIndex:tt++})}beforeRenderData(_e){var tt=this;return(0,Te.Z)(function*(){(yield _e.hooks.beforeRenderData.promise())&&tt.renderLayers()})()}renderTileLayerMask(_e){let tt=0;const{enableMask:cn=!0}=_e.getLayerConfig();let En=_e.tileMask?1:0;const re=_e.masks.filter(Di=>Di.inited);En=En+(cn?re.length:1);const Nr=En>1?Dt.MULTIPLE:Dt.SINGLE;if((_e.tileMask||re.length&&cn)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),re.length&&cn)for(const Di of re)Di.render({isStencil:!0,stencilType:Nr,stencilIndex:tt++});_e.tileMask&&_e.tileMask.render({isStencil:!0,stencilType:Nr,stencilIndex:tt++,stencilOperation:Vt.OR})}renderTileLayer(_e){var tt=this;return(0,Te.Z)(function*(){tt.renderTileLayerMask(_e),_e.getLayerConfig().enableMultiPassRenderer?yield _e.renderMultiPass():yield _e.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(_e=>_e.inited).filter(_e=>_e.isVisible()).sort((_e,tt)=>_e.zIndex-tt.zIndex).forEach(_e=>{this.layerList.push(_e)})}destroy(){this.layers.forEach(_e=>{_e.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const _e=(0,E.CI)(this.mapService.bgColor);this.renderService.clear({color:_e,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var Ji=L(45987);const{isNil:ti}=E.lodashUtil;class Gi{constructor(_e){(0,W.Z)(this,"name",void 0),(0,W.Z)(this,"type",void 0),(0,W.Z)(this,"scale",void 0),(0,W.Z)(this,"descriptor",void 0),(0,W.Z)(this,"featureBufferLayout",[]),(0,W.Z)(this,"needRescale",!1),(0,W.Z)(this,"needRemapping",!1),(0,W.Z)(this,"needRegenerateVertices",!1),(0,W.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,W.Z)(this,"vertexAttribute",void 0),(0,W.Z)(this,"defaultCallback",tt=>{if(tt.length===0){var cn;return((cn=this.scale)===null||cn===void 0?void 0:cn.defaultValues)||[]}return tt.map((En,re)=>{var Nr;return((Nr=this.scale)===null||Nr===void 0?void 0:Nr.scalers[re].func)(En)})}),this.setProps(_e)}setProps(_e){Object.assign(this,_e)}mapping(_e){var tt;if((tt=this.scale)!==null&&tt!==void 0&&tt.callback){var cn;const En=(cn=this.scale)===null||cn===void 0?void 0:cn.callback(..._e);if(!ti(En))return[En]}return this.defaultCallback(_e)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const Ni=["buffer","update","name"],Gr=["buffer","update","name"],So={[ee.FLOAT]:4,[ee.UNSIGNED_BYTE]:1,[ee.UNSIGNED_SHORT]:2};class fi{constructor(_e){(0,W.Z)(this,"attributesAndIndices",void 0),(0,W.Z)(this,"attributes",[]),(0,W.Z)(this,"triangulation",void 0),(0,W.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=_e}registerStyleAttribute(_e){let tt=this.getLayerStyleAttribute(_e.name||"");return tt?tt.setProps(_e):(tt=new Gi(_e),this.attributes.push(tt)),tt}unRegisterStyleAttribute(_e){const tt=this.attributes.findIndex(cn=>cn.name===_e);tt>-1&&this.attributes.splice(tt,1)}updateScaleAttribute(_e){this.attributes.forEach(tt=>{var cn;const En=tt.name,re=(cn=tt.scale)===null||cn===void 0?void 0:cn.field;(_e[En]||re&&_e[re])&&(tt.needRescale=!0,tt.needRemapping=!0,tt.needRegenerateVertices=!0)})}updateStyleAttribute(_e,tt,cn){let En=this.getLayerStyleAttribute(_e);En||(En=this.registerStyleAttribute((0,q.Z)((0,q.Z)({},tt),{},{name:_e})));const{scale:re}=tt;re&&En&&(En.scale=re,En.needRescale=!0,En.needRemapping=!0,En.needRegenerateVertices=!0,cn&&cn.featureRange&&(En.featureRange=cn.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(_e){return this.attributes.find(tt=>tt.name===_e)}getLayerAttributeScale(_e){var tt;const cn=this.getLayerStyleAttribute(_e),En=cn==null||(tt=cn.scale)===null||tt===void 0?void 0:tt.scalers;return En&&En[0]?En[0].func:null}updateAttributeByFeatureRange(_e,tt,cn=0,En,re){const Nr=this.attributes.find(Di=>Di.name===_e);if(Nr&&Nr.descriptor){const{descriptor:Di}=Nr,{update:Vi,buffer:xo,size:yo=0}=Di,za=So[xo.type||ee.FLOAT];if(Vi){const{elements:ba,sizePerElement:go}=this.featureLayout,Ua=ba.slice(cn,En);if(!Ua.length)return;const{offset:ja}=Ua[0],xa=ja*yo*za,Es=Ua.map(({featureIdx:$a,vertices:Ea,normals:Va},js)=>{const Ql=Ea.length/go,Xs=[];for(let cl=0;cl<Ql;cl++){const af=Va?Va.slice(cl*3,cl*3+3):[];Xs.push(...Vi(tt[$a],$a,Ea.slice(cl*go,cl*go+go),js,af))}return Xs}).flat();Nr.vertexAttribute.updateBuffer({data:Es,offset:xa}),re==null||re.emit(`legend:${_e}`,re.getLegend(_e))}}}createAttributesAndIndices(_e,tt,cn,En){this.featureLayout={sizePerElement:0,elements:[]},tt&&(this.triangulation=tt);const re=this.attributes.map(ja=>(ja.resetDescriptor(),ja.descriptor));let Nr=0,Di=0;const Vi=[];let xo=3;_e.forEach((ja,xa)=>{const{indices:Es,vertices:$a,normals:Ea,size:Va,indexes:js,count:Ql}=this.triangulation(ja,cn);typeof Ql=="number"&&(Di+=Ql),Es.forEach(cl=>{Vi.push(cl+Nr)}),xo=Va;const Xs=$a.length/Va;this.featureLayout.sizePerElement=xo,this.featureLayout.elements.push({featureIdx:xa,vertices:$a,normals:Ea,offset:Nr}),Nr+=Xs;for(let cl=0;cl<Xs;cl++){const af=(Ea==null?void 0:Ea.slice(cl*3,cl*3+3))||[],Fh=$a.slice(cl*Va,cl*Va+Va);let kc=0;js&&js[cl]!==void 0&&(kc=js[cl]),re.forEach((du,Td)=>{du&&du.update&&du.buffer.data.push(...du.update(ja,xa,Fh,cl,af,kc))})}});const{createAttribute:yo,createBuffer:za,createElements:ba}=this.rendererService,go={};re.forEach((ja,xa)=>{if(ja){const{buffer:Es,update:$a,name:Ea}=ja,Va=(0,Ji.Z)(ja,Ni),js=yo((0,q.Z)({buffer:za(Es)},Va));go[ja.name||""]=js,this.attributes[xa].vertexAttribute=js}});const Ua=ba({data:Vi,type:ee.UNSIGNED_INT,count:Vi.length});return this.attributesAndIndices={attributes:go,elements:Ua,count:Di},Object.values(this.attributes).filter(ja=>ja.scale).forEach(ja=>{const xa=ja.name;En==null||En.emit(`legend:${xa}`,En.getLegend(xa))}),this.attributesAndIndices}createAttributes(_e,tt){this.featureLayout={sizePerElement:0,elements:[]},tt&&(this.triangulation=tt);const cn=this.attributes.map(yo=>(yo.resetDescriptor(),yo.descriptor));let En=0;const re=[];let Nr=3;_e.forEach((yo,za)=>{const{indices:ba,vertices:go,normals:Ua,size:ja,indexes:xa}=this.triangulation(yo);ba.forEach($a=>{re.push($a+En)}),Nr=ja;const Es=go.length/ja;this.featureLayout.sizePerElement=Nr,this.featureLayout.elements.push({featureIdx:za,vertices:go,normals:Ua,offset:En}),En+=Es;for(let $a=0;$a<Es;$a++){const Ea=(Ua==null?void 0:Ua.slice($a*3,$a*3+3))||[],Va=go.slice($a*ja,$a*ja+ja);let js=0;xa&&xa[$a]!==void 0&&(js=xa[$a]),cn.forEach((Ql,Xs)=>{Ql&&Ql.update&&Ql.buffer.data.push(...Ql.update(yo,za,Va,$a,Ea,js))})}});const{createAttribute:Di,createBuffer:Vi}=this.rendererService,xo={};return cn.forEach((yo,za)=>{if(yo){const{buffer:ba,update:go,name:Ua}=yo,ja=(0,Ji.Z)(yo,Gr),xa=Di((0,q.Z)({buffer:Vi(ba)},ja));xo[yo.name||""]=xa,this.attributes[za].vertexAttribute=xa}}),{attributes:xo}}clearAllAttributes(){var _e;this.attributes.forEach(tt=>{tt.vertexAttribute&&tt.vertexAttribute.destroy()}),(_e=this.attributesAndIndices)===null||_e===void 0||_e.elements.destroy(),this.attributes=[]}}var Eo=L(46343),Wi=L(63844),io=L.n(Wi);class Ao extends $t.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(_e){super(),(0,W.Z)(this,"destroyed",!1),(0,W.Z)(this,"loaded",!1),(0,W.Z)(this,"id",void 0),(0,W.Z)(this,"inited",!1),(0,W.Z)(this,"rendering",!1),(0,W.Z)(this,"$container",void 0),(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"markerContainer",void 0),(0,W.Z)(this,"resizeDetector",void 0),(0,W.Z)(this,"hooks",void 0),(0,W.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,W.Z)(this,"handleMapCameraChanged",tt=>{this.cameraService.update(tt),this.render()}),this.container=_e,this.hooks={init:new Eo.sX},this.id=_e.id}init(_e){var tt=this;this.configService.setSceneConfig(this.id,_e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Te.Z)(function*(){tt.debugService.log("map.mapInitStart",{type:tt.map.version}),yield new Promise(cn=>{tt.map.onCameraChanged(En=>{tt.cameraService.init(),tt.cameraService.update(En),cn()}),tt.map.init()}),tt.map.onCameraChanged(tt.handleMapCameraChanged),tt.map.addMarkerContainer(),tt.markerService.addMarkers(),tt.markerService.addMarkerLayers(),tt.popupService.initPopup(),tt.interactionService.init(),tt.interactionService.on(Vn.Drag,tt.addSceneEvent.bind(tt))})),this.hooks.init.tapPromise("initRenderer",(0,Te.Z)(function*(){var cn;const En=((cn=tt.map)===null||cn===void 0?void 0:cn.getOverlayContainer())||void 0;if(En?tt.$container=En:tt.$container=Fn(tt.configService.getSceneConfig(tt.id).id||""),tt.$container){if(tt.canvas=E.SO.create("canvas","",tt.$container),tt.setCanvas(),yield tt.rendererService.init(tt.canvas,tt.configService.getSceneConfig(tt.id),_e.gl),tt.registerContextLost(),tt.initContainer(),tt.resizeDetector=io()({strategy:"scroll"}),tt.resizeDetector.listenTo(tt.$container,tt.handleWindowResized),window.matchMedia){var re;(re=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||re===void 0||re.addListener(tt.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");tt.pickingService.init(tt.id)})),this.render()}registerContextLost(){const _e=this.rendererService.getCanvas();_e&&_e.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(_e){this.layerService.sceneService=this,this.layerService.add(_e)}addMask(_e){this.layerService.sceneService=this,this.layerService.addMask(_e)}render(){var _e=this;return(0,Te.Z)(function*(){_e.rendering||_e.destroyed||(_e.rendering=!0,_e.inited?(yield _e.layerService.initLayers(),yield _e.layerService.renderLayers()):(yield _e.hooks.init.promise(),_e.destroyed&&_e.destroy(),yield _e.layerService.initLayers(),_e.layerService.renderLayers(),_e.controlService.addControls(),_e.loaded=!0,_e.emit("loaded"),_e.inited=!0),_e.rendering=!1)})()}addFontFace(_e,tt){this.fontService.addFontFace(_e,tt)}getSceneContainer(){return this.$container}exportPng(_e){var tt=this;return(0,Te.Z)(function*(){var cn;const En=(cn=tt.$container)===null||cn===void 0?void 0:cn.getElementsByTagName("canvas")[0];return yield tt.render(),_e==="jpg"?En==null?void 0:En.toDataURL("image/jpeg"):En==null?void 0:En.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const _e=this.$container.parentElement;_e!==null&&(this.markerContainer=E.SO.create("div","l7-marker-container",_e))}getMarkerContainer(){return this.markerContainer}destroy(){var _e;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var tt;(tt=this.$container)===null||tt===void 0||tt.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(_e=this.$container)===null||_e===void 0||(_e=_e.parentNode)===null||_e===void 0||_e.removeChild(this.$container),this.emit("destroy")}initContainer(){var _e,tt;const cn=E.SO.DPR,En=((_e=this.$container)===null||_e===void 0?void 0:_e.clientWidth)||400,re=((tt=this.$container)===null||tt===void 0?void 0:tt.clientHeight)||300,Nr=this.canvas;Nr&&(Nr.width=En*cn,Nr.height=re*cn),this.rendererService.viewport({x:0,y:0,width:cn*En,height:cn*re})}setCanvas(){var _e,tt;const cn=E.SO.DPR,En=((_e=this.$container)===null||_e===void 0?void 0:_e.clientWidth)||400,re=((tt=this.$container)===null||tt===void 0?void 0:tt.clientHeight)||300,Nr=this.canvas;Nr.width=En*cn,Nr.height=re*cn,Nr.style.width="100%",Nr.style.height="100%"}addSceneEvent(_e){this.emit(_e.type,_e)}}const{uniq:xs}=E.lodashUtil,ya="#define PI 3.14159265359",ra=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,gs=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,as=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Ct=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Wt=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,jn=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,Lr=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Si=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,Zi=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,Jo=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,Hs=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Is=/precision\s+(high|low|medium)p\s+float/,Us=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,dl=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Ph=/void\s+main\s*\([^)]*\)\s*\{\n?/;class Up{constructor(){(0,W.Z)(this,"moduleCache",{}),(0,W.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ya,fs:ya}),this.registerModule("decode",{vs:gs,fs:""}),this.registerModule("scene_uniforms",{vs:Jo,fs:Jo}),this.registerModule("picking_uniforms",{vs:jn,fs:jn}),this.registerModule("projection",{vs:Si,fs:Si}),this.registerModule("project",{vs:Lr,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Hs}),this.registerModule("lighting",{vs:as,fs:""}),this.registerModule("light",{vs:ra,fs:""}),this.registerModule("picking",{vs:Wt,fs:Ct}),this.registerModule("rotation_2d",{vs:Zi,fs:""})}registerModule(_e,tt){tt.vs=tt.vs.replace(/\r\n/g,`
`),tt.fs=tt.fs.replace(/\r\n/g,`
`);const{vs:cn,fs:En,uniforms:re,inject:Nr}=tt,{content:Di,uniforms:Vi}=$(cn),{content:xo,uniforms:yo}=$(En);this.rawContentCache[_e]={fs:xo,inject:Nr,uniforms:(0,q.Z)((0,q.Z)((0,q.Z)({},Vi),yo),re),vs:Di}}destroy(){this.moduleCache={},this.rawContentCache={}}getModule(_e){let tt=this.rawContentCache[_e].vs,cn=this.rawContentCache[_e].fs;const En=this.rawContentCache[_e].inject;let re={};En!=null&&En["vs:#decl"]&&(tt=(En==null?void 0:En["vs:#decl"])+tt,re=$(En==null?void 0:En["vs:#decl"]).uniforms),En!=null&&En["vs:#main-start"]&&(tt=tt.replace(Ph,go=>go+(En==null?void 0:En["vs:#main-start"]))),En!=null&&En["fs:#decl"]&&(cn=(En==null?void 0:En["fs:#decl"])+cn);const{content:Nr,includeList:Di}=this.processModule(tt,[],"vs"),{content:Vi,includeList:xo}=this.processModule(cn,[],"fs");let yo="";const za=xs(Di.concat(xo).concat(_e)).reduce((go,Ua)=>(0,q.Z)((0,q.Z)({},go),this.rawContentCache[Ua].uniforms),(0,q.Z)({},re));Is.test(Vi)||(yo=yo+Us),yo=yo+Vi;let ba="";return Is.test(Nr)||(ba=ba+Us),ba=ba+Nr,this.moduleCache[_e]={fs:yo.trim(),uniforms:za,vs:ba.trim()},this.moduleCache[_e]}processModule(_e,tt,cn){return{content:_e.replace(dl,(re,Nr)=>{const Vi=Nr.split(" ")[0].replace(/"/g,"");if(tt.indexOf(Vi)>-1)return"";const xo=this.rawContentCache[Vi][cn];tt.push(Vi);const{content:yo}=this.processModule(xo,tt,cn);return yo}),includeList:tt}}injectDefines(_e){return Object.keys(_e).reduce((cn,En)=>cn+`#define ${En.toUpperCase()} ${_e[En]};
`,`
`)}}class hh{constructor(){(0,W.Z)(this,"shaderModuleService",void 0),(0,W.Z)(this,"rendererService",void 0),(0,W.Z)(this,"cameraService",void 0),(0,W.Z)(this,"mapService",void 0),(0,W.Z)(this,"interactionService",void 0),(0,W.Z)(this,"layerService",void 0),(0,W.Z)(this,"config",void 0)}getName(){return""}getType(){return de.Normal}init(_e,tt){this.config=tt,this.rendererService=_e.getContainer().rendererService,this.cameraService=_e.getContainer().cameraService,this.mapService=_e.getContainer().mapService,this.interactionService=_e.getContainer().interactionService,this.layerService=_e.getContainer().layerService,this.shaderModuleService=_e.getContainer().shaderModuleService}render(_e){}}class uu extends hh{getName(){return"clear"}init(_e,tt){super.init(_e,tt)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Df{constructor(_e){(0,W.Z)(this,"passes",[]),(0,W.Z)(this,"layer",void 0),(0,W.Z)(this,"renderFlag",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),this.postProcessor=_e}setLayer(_e){this.layer=_e}setRenderFlag(_e){this.renderFlag=_e}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var _e=this;return(0,Te.Z)(function*(){for(const tt of _e.passes)yield tt.render(_e.layer);yield _e.postProcessor.render(_e.layer)})()}resize(_e,tt){(this.width!==_e||this.height!==tt)&&(this.postProcessor.resize(_e,tt),this.width=_e,this.height=tt)}add(_e,tt){_e.getType()===de.PostProcessing?this.postProcessor.add(_e,this.layer,tt):(_e.init(this.layer,tt),this.passes.push(_e))}insert(_e,tt,cn){_e.init(this.layer,tt),this.passes.splice(cn,0,_e)}destroy(){this.passes.length=0}}class Jc extends hh{constructor(..._e){var tt;super(..._e),tt=this,(0,W.Z)(this,"pickingFBO",void 0),(0,W.Z)(this,"layer",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),(0,W.Z)(this,"alreadyInRendering",!1),(0,W.Z)(this,"pickFromPickingFBO",({x:cn,y:En,lngLat:re,type:Nr})=>{if(!this.layer.isVisible()||!this.layer.needPick(Nr))return;const{getViewportSize:Di,readPixelsAsync:Vi,useFramebuffer:xo}=this.rendererService,{width:yo,height:za}=Di(),{enableHighlight:ba,enableSelect:go}=this.layer.getLayerConfig(),Ua=cn*E.SO.DPR,ja=En*E.SO.DPR;if(Ua>yo||Ua<0||ja>za||ja<0)return;let xa;xo(this.pickingFBO,(0,Te.Z)(function*(){var Es;if(xa=yield Vi({x:Math.round(Ua),y:Math.round(za-(En+1)*E.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:tt.pickingFBO}),xa[0]!==0||xa[1]!==0||xa[2]!==0){const $a=(0,E.W0)(xa),Ea=tt.layer.getSource().getFeatureById($a),Va={x:cn,y:En,type:Nr,lngLat:re,featureId:$a,feature:Ea};Ea&&(tt.layer.setCurrentPickId($a),tt.triggerHoverOnLayer(Va))}else{const $a={x:cn,y:En,lngLat:re,type:tt.layer.getCurrentPickId()===null?"un"+Nr:"mouseout",featureId:null,feature:null};tt.triggerHoverOnLayer((0,q.Z)((0,q.Z)({},$a),{},{type:"unpick"})),tt.triggerHoverOnLayer($a),tt.layer.setCurrentPickId(null)}ba&&tt.highlightPickedFeature(xa),go&&Nr==="click"&&((Es=xa)===null||Es===void 0?void 0:Es.toString())!==[0,0,0,0].toString()&&tt.selectFeature(xa)}))})}getType(){return de.Normal}getName(){return"pixelPicking"}init(_e,tt){super.init(_e,tt),this.layer=_e;const{createTexture2D:cn,createFramebuffer:En,getViewportSize:re}=this.rendererService,{width:Nr,height:Di}=re(),Vi=cn({width:Nr,height:Di,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=En({color:Vi}),this.interactionService.on(Vn.Hover,this.pickFromPickingFBO),this.interactionService.on(Vn.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Vn.Active,this.highlightFeatureHandle.bind(this))}render(_e){if(this.alreadyInRendering)return;const{getViewportSize:tt,useFramebuffer:cn,clear:En}=this.rendererService,{width:re,height:Nr}=tt();this.alreadyInRendering=!0,(this.width!==re||this.height!==Nr)&&(this.pickingFBO.resize({width:re,height:Nr}),this.width=re,this.height=Nr),cn(this.pickingFBO,()=>{En({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const Di=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),_e.hooks.beforePickingEncode.call(),_e.render(),_e.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(Di),this.alreadyInRendering=!1})}triggerHoverOnLayer(_e){this.layer.emit(_e.type,_e)}highlightPickedFeature(_e){const[tt,cn,En]=_e;this.layer.hooks.beforeHighlight.call([tt,cn,En]),this.layerService.renderLayers()}selectFeature(_e){const[tt,cn,En]=_e;this.layer.hooks.beforeSelect.call([tt,cn,En]),this.layerService.renderLayers()}selectFeatureHandle({featureId:_e}){const tt=(0,E.Z6)(_e);this.selectFeature(new Uint8Array(tt))}highlightFeatureHandle({featureId:_e}){const tt=(0,E.Z6)(_e);this.highlightPickedFeature(new Uint8Array(tt))}}class cu{constructor(_e){(0,W.Z)(this,"passes",[]),(0,W.Z)(this,"readFBO",void 0),(0,W.Z)(this,"writeFBO",void 0),this.rendererService=_e,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:_e,createTexture2D:tt}=this.rendererService,{width:cn,height:En}=_e();return tt({x:0,y:0,width:cn,height:En,copy:!0})}getReadFBOTex(){var _e=this;const{useFramebuffer:tt}=this.rendererService;return new Promise(cn=>{tt(this.readFBO,(0,Te.Z)(function*(){cn(_e.getCurrentFBOTex())}))})}renderBloomPass(_e,tt){var cn=this;return(0,Te.Z)(function*(){const En=yield cn.getReadFBOTex();let re=0;for(;re<4;)yield tt.render(_e,En),cn.swap(),re++})()}render(_e){var tt=this;return(0,Te.Z)(function*(){for(let cn=0;cn<tt.passes.length;cn++){const En=tt.passes[cn];En.setRenderToScreen(tt.isLastEnabledPass(cn)),En.getName()==="bloom"?yield tt.renderBloomPass(_e,En):(yield En.render(_e),cn!==tt.passes.length-1&&tt.swap())}})()}resize(_e,tt){this.readFBO.resize({width:_e,height:tt}),this.writeFBO.resize({width:_e,height:tt})}add(_e,tt,cn){_e.init(tt,cn),this.passes.push(_e)}insert(_e,tt,cn,En){_e.init(cn,En),this.passes.splice(tt,0,_e)}getPostProcessingPassByName(_e){return this.passes.find(tt=>tt.getName()===_e)}init(){const{createFramebuffer:_e,createTexture2D:tt}=this.rendererService;this.readFBO=_e({color:tt({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})}),this.writeFBO=_e({color:tt({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})})}isLastEnabledPass(_e){for(let tt=_e+1;tt<this.passes.length;tt++)if(this.passes[tt].isEnabled())return!1;return!0}swap(){const _e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=_e}}class Eu extends hh{getType(){return de.Normal}getName(){return"render"}init(_e,tt){super.init(_e,tt)}render(_e){const{useFramebuffer:tt,clear:cn}=this.rendererService,En=_e.multiPassRenderer.getPostProcessor().getReadFBO();tt(En,()=>{cn({color:[0,0,0,0],depth:1,stencil:0,framebuffer:En}),_e.multiPassRenderer.setRenderFlag(!1),_e.models.forEach(re=>{re.draw({uniforms:_e.layerModel.getUninforms()})}),_e.multiPassRenderer.setRenderFlag(!0)})}}const ef=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Lf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:fu}=E.lodashUtil;class Ds extends We{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Lf,fs:ef});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}convertOptionsToUniforms(_e){const tt={};return fu(_e.bloomRadius)||(tt.u_radius=_e.bloomRadius),fu(_e.bloomIntensity)||(tt.u_intensity=_e.bloomIntensity),fu(_e.bloomBaseRadio)||(tt.u_baseRadio=_e.bloomBaseRadio),tt}}const $u=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,tf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:_d}=E.lodashUtil;class tp extends We{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:tf,fs:$u});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}convertOptionsToUniforms(_e){const tt={};return _d(_e.blurRadius)||(tt.u_BlurDir=[_e.blurRadius,0]),tt}}const dh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,bd=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:ph}=E.lodashUtil;class Ih extends We{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:bd,fs:dh});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("blur-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}convertOptionsToUniforms(_e){const tt={};return ph(_e.blurRadius)||(tt.u_BlurDir=[0,_e.blurRadius]),tt}}const Dh=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,xd=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class c0 extends We{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:xd,fs:Dh});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}}const nf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Fc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Ed extends We{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:Fc,fs:nf}),this.shaderModuleService.getModule("copy-pass")}}const Gl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class rf extends We{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:xc,fs:Gl});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}}const hu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class uc extends We{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:Bc,fs:hu});const{vs:_e,fs:tt,uniforms:cn}=this.shaderModuleService.getModule("ink-pass"),{width:En,height:re}=this.rendererService.getViewportSize();return{vs:_e,fs:tt,uniforms:(0,q.Z)((0,q.Z)({},cn),{},{u_ViewportSize:[En,re]})}}}const mf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Fl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class of extends We{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:Fl,fs:mf}),this.shaderModuleService.getModule("noise-pass")}}const gf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Sd=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class wd extends We{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:gf,fs:Sd}),this.shaderModuleService.getModule("sepia-pass")}}const ys=new Ei;let np=0;function Xf(){const oe=new Up,_e=new $o,tt=new Et,cn=new Po(tt),En=new Pe,re=new Yt,Nr=new br,Di=new Vr,Vi=new er,xo={id:`${np++}`,globalConfigService:ys,shaderModuleService:oe,debugService:_e,cameraService:tt,coordinateSystemService:cn,fontService:En,iconService:re,markerService:Nr,popupService:Di,controlService:Vi,customRenderService:{}},yo=new ji(xo);xo.layerService=yo;const za=new Ao(xo);xo.sceneService=za;const ba=new ln(xo);xo.interactionService=ba;const go=new pr(xo);xo.pickingService=go;const Ua={clear:new uu,pixelPicking:new Jc,render:new Eu};xo.normalPassFactory=xa=>Ua[xa];const ja={copy:new Ed,bloom:new Ds,blurH:new tp,blurV:new Ih,noise:new of,sepia:new wd,colorHalftone:new c0,hexagonalPixelate:new rf,ink:new uc};return xo.postProcessingPass=ja,xo.postProcessingPassFactory=xa=>ja[xa],xo}function Lh(oe){const _e=(0,q.Z)({},oe);return _e.postProcessor=new cu(_e.rendererService),_e.multiPassRenderer=new Df(_e.postProcessor),_e.styleAttributeService=new fi(_e.rendererService),_e}const pl=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let Nh=function(oe){return oe.IMAGE="image",oe.CUSTOMIMAGE="customImage",oe.ARRAYBUFFER="arraybuffer",oe.RGB="rgb",oe.TERRAINRGB="terrainRGB",oe.CUSTOMRGB="customRGB",oe.CUSTOMARRAYBUFFER="customArrayBuffer",oe.CUSTOMTERRAINRGB="customTerrainRGB",oe}({})},83366:function(gt,G,L){"use strict";L.d(G,{Z:function(){return Yn}});var q=L(1413),W=L(4942);class E{constructor(vt){(0,W.Z)(this,"configService",void 0),(0,W.Z)(this,"config",void 0),this.config=vt}setContainer(vt,Pt,An){this.configService=vt.globalConfigService,vt.mapConfig=(0,q.Z)((0,q.Z)({},this.config),{},{id:Pt,canvas:An}),vt.mapService=new(this.getServiceConstructor())(vt)}getServiceConstructor(){throw new Error("Method not implemented.")}}var de=L(45987),ee=L(15861),ue=L(85975),ce=L(77160),xe=L(6158),ae=L.n(xe),We=L(39827),te=L(66366),me=L(26729);class Re{constructor(vt){(0,W.Z)(this,"size",1e4),this.size=vt||1e4}setSize(vt){this.size=vt}getSize(){return[this.size,this.size]}mercatorXfromLng(vt){return(180+vt)/360*this.size}mercatorYfromLat(vt){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+vt*Math.PI/360)))/360)*this.size}lngFromMercatorX(vt){return vt/this.size*360-180}latFromMercatorY(vt){const Pt=180-(1-vt/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(Pt*Math.PI/180))-90}project(vt){const Pt=this.mercatorXfromLng(vt[0]),An=this.mercatorYfromLat(vt[1]);return[Pt,An]}unproject(vt){const Pt=this.lngFromMercatorX(vt[0]),An=this.latFromMercatorY(vt[1]);return[Pt,An]}}const $={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},le={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},K=12;class we{constructor(vt){(0,W.Z)(this,"version","DEFAUlTMAP"),(0,W.Z)(this,"map",void 0),(0,W.Z)(this,"simpleMapCoord",new Re),(0,W.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,W.Z)(this,"config",void 0),(0,W.Z)(this,"configService",void 0),(0,W.Z)(this,"coordinateSystemService",void 0),(0,W.Z)(this,"eventEmitter",void 0),(0,W.Z)(this,"markerContainer",void 0),(0,W.Z)(this,"cameraChangedCallback",void 0),(0,W.Z)(this,"$mapContainer",void 0),(0,W.Z)(this,"handleCameraChanged",Pt=>{const{lat:An,lng:Pn}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[Pn,An],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=vt.mapConfig,this.configService=vt.globalConfigService,this.coordinateSystemService=vt.coordinateSystemService,this.eventEmitter=new me.EventEmitter}setBgColor(vt){this.bgColor=vt}addMarkerContainer(){const vt=this.map.getCanvasContainer();this.markerContainer=te.SO.create("div","l7-marker-container",vt),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(vt,Pt){We.I9.indexOf(vt)!==-1?this.eventEmitter.on(vt,Pt):this.map.on(le[vt]||vt,Pt)}off(vt,Pt){this.map.off(le[vt]||vt,Pt),this.eventEmitter.off(vt,Pt)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const vt=this.map.transform;return[vt.width,vt.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(vt){return this.map.setZoom(vt)}getCenter(){return this.map.getCenter()}setCenter(vt){this.map.setCenter(vt)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(vt){this.map.setBearing(vt)}zoomIn(vt,Pt){this.map.zoomIn(vt,Pt)}zoomOut(vt,Pt){this.map.zoomOut(vt,Pt)}setPitch(vt){return this.map.setPitch(vt)}panTo(vt){this.map.panTo(vt)}panBy(vt=0,Pt=0){this.map.panBy([vt,Pt])}fitBounds(vt,Pt){this.map.fitBounds(vt,Pt)}setMaxZoom(vt){this.map.setMaxZoom(vt)}setMinZoom(vt){this.map.setMinZoom(vt)}setMapStatus(vt){vt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),vt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),vt.dragEnable===!1&&this.map.dragPan.disable(),vt.dragEnable===!0&&this.map.dragPan.enable(),vt.rotateEnable===!1&&this.map.dragRotate.disable(),vt.dragEnable===!0&&this.map.dragRotate.enable(),vt.keyboardEnable===!1&&this.map.keyboard.disable(),vt.keyboardEnable===!0&&this.map.keyboard.enable(),vt.zoomEnable===!1&&this.map.scrollZoom.disable(),vt.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(vt,Pt){this.map.flyTo({zoom:vt,center:Pt})}setMapStyle(vt){this.map.setStyle(this.getMapStyleValue(vt))}meterToCoord(vt,Pt){return 1}pixelToLngLat(vt){return this.map.unproject(vt)}lngLatToPixel(vt){return this.map.project(vt)}containerToLngLat(vt){return this.map.unproject(vt)}lngLatToContainer(vt){return this.map.project(vt)}getMapStyle(){try{var vt;const Pt=(vt=this.map.getStyle().sprite)!==null&&vt!==void 0?vt:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(Pt)?Pt==null?void 0:Pt.replace(/\/\w+$/,"").replace(/sprites/,"styles"):Pt}catch(Pt){return""}}getMapStyleConfig(){return $}getMapStyleValue(vt){var Pt;return(Pt=this.getMapStyleConfig()[vt])!==null&&Pt!==void 0?Pt:vt}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...Pt){this.eventEmitter.emit(vt,...Pt)}once(vt,...Pt){this.eventEmitter.once(vt,...Pt)}getMapContainer(){return this.$mapContainer}exportMap(vt){const Pt=this.map.getCanvas();return vt==="jpg"?Pt==null?void 0:Pt.toDataURL("image/jpeg"):Pt==null?void 0:Pt.toDataURL("image/png")}onCameraChanged(vt){this.cameraChangedCallback=vt}creatMapContainer(vt){let Pt=vt;return typeof vt=="string"&&(Pt=document.getElementById(vt)),Pt}updateView(vt){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:vt.bearing,center:vt.center,viewportHeight:vt.viewportHeight,pitch:vt.pitch,viewportWidth:vt.viewportWidth,zoom:vt.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:vt=!0}=this.config;this.viewport.getZoom()>K&&vt?this.coordinateSystemService.setCoordinateSystem(We.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(We.lo.LNGLAT)}}var et=L(15671),Je=L(43144),wt=L(82963),pt=L(61120),_t=L(60136),Me=L(97326),Ae=L(97685),je=L(98333);function Ze(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function lt(fn,vt){var Pt=je.fF([],vt,fn);return je.bA(Pt,Pt,1/Pt[3]),Pt}function en(fn,vt){var Pt=fn%vt;return Pt<0?vt+Pt:Pt}function Le(fn,vt,Pt){return Pt*vt+(1-Pt)*fn}var St=L(31437);function Oe(fn,vt){if(!fn)throw new Error(vt||"viewport-mercator-project: assertion failed.")}var nt=Math.PI,Ke=nt/4,Xe=nt/180,Rt=180/nt,bt=512,Ie=4003e4,Gt=1.5;function mn(fn){return Math.pow(2,fn)}function Ln(fn){return Math.log2(fn)}function qn(fn,vt){var Pt=(0,Ae.Z)(fn,2),An=Pt[0],Pn=Pt[1];Oe(Number.isFinite(An)&&Number.isFinite(vt)),Oe(Number.isFinite(Pn)&&Pn>=-90&&Pn<=90,"invalid latitude"),vt*=bt;var Xn=An*Xe,dt=Pn*Xe,Se=vt*(Xn+nt)/(2*nt),Be=vt*(nt-Math.log(Math.tan(Ke+dt*.5)))/(2*nt);return[Se,Be]}function rr(fn,vt){var Pt=(0,Ae.Z)(fn,2),An=Pt[0],Pn=Pt[1];vt*=bt;var Xn=An/vt*(2*nt)-nt,dt=2*(Math.atan(Math.exp(nt-Pn/vt*(2*nt)))-Ke);return[Xn*Rt,dt*Rt]}function Ft(fn){var vt=fn.latitude;assert(Number.isFinite(vt));var Pt=Math.cos(vt*Xe);return Ln(Ie*Pt)-9}function Jt(fn){var vt=fn.latitude,Pt=fn.longitude,An=fn.zoom,Pn=fn.scale,Xn=fn.highPrecision,dt=Xn===void 0?!1:Xn;Pn=Pn!==void 0?Pn:mn(An),Oe(Number.isFinite(vt)&&Number.isFinite(Pt)&&Number.isFinite(Pn));var Se={},Be=bt*Pn,st=Math.cos(vt*Xe),Lt=Be/360,It=Lt/st,wn=Be/Ie/st;if(Se.pixelsPerMeter=[wn,-wn,wn],Se.metersPerPixel=[1/wn,-1/wn,1/wn],Se.pixelsPerDegree=[Lt,-It,wn],Se.degreesPerPixel=[1/Lt,-1/It,1/wn],dt){var Kn=Xe*Math.tan(vt*Xe)/st,_r=Lt*Kn/2,Jn=Be/Ie*Kn,Pe=Jn/It*wn;Se.pixelsPerDegree2=[0,-_r,Jn],Se.pixelsPerMeter2=[Pe,0,Pe]}return Se}function un(fn,vt){var Pt=_slicedToArray(fn,3),An=Pt[0],Pn=Pt[1],Xn=Pt[2],dt=_slicedToArray(vt,3),Se=dt[0],Be=dt[1],st=dt[2],Lt=1,It=Jt({longitude:An,latitude:Pn,scale:Lt,highPrecision:!0}),wn=It.pixelsPerMeter,Kn=It.pixelsPerMeter2,_r=qn(fn,Lt);_r[0]+=Se*(wn[0]+Kn[0]*Be),_r[1]+=Be*(wn[1]+Kn[1]*Be);var Jn=rr(_r,Lt),Pe=(Xn||0)+(st||0);return Number.isFinite(Xn)||Number.isFinite(st)?[Jn[0],Jn[1],Pe]:Jn}function Vn(fn){var vt=fn.height,Pt=fn.pitch,An=fn.bearing,Pn=fn.altitude,Xn=fn.center,dt=Xn===void 0?null:Xn,Se=fn.flipY,Be=Se===void 0?!1:Se,st=Ze();return ue.translate(st,st,[0,0,-Pn]),ue.scale(st,st,[1,1,1/vt]),ue.rotateX(st,st,-Pt*Xe),ue.rotateZ(st,st,An*Xe),Be&&ue.scale(st,st,[1,-1,1]),dt&&ue.translate(st,st,ce.tk([],dt)),st}function on(fn){var vt=fn.width,Pt=fn.height,An=fn.altitude,Pn=An===void 0?Gt:An,Xn=fn.pitch,dt=Xn===void 0?0:Xn,Se=fn.nearZMultiplier,Be=Se===void 0?1:Se,st=fn.farZMultiplier,Lt=st===void 0?1:st,It=dt*Xe,wn=Math.atan(.5/Pn),Kn=Math.sin(wn)*Pn/Math.sin(Math.PI/2-It-wn),_r=Math.cos(Math.PI/2-It)*Kn+Pn;return{fov:2*Math.atan(Pt/2/Pn),aspect:vt/Pt,focalDistance:Pn,near:Be,far:_r*Lt}}function Dt(fn){var vt=fn.width,Pt=fn.height,An=fn.pitch,Pn=fn.altitude,Xn=fn.nearZMultiplier,dt=fn.farZMultiplier,Se=on({width:vt,height:Pt,altitude:Pn,pitch:An,nearZMultiplier:Xn,farZMultiplier:dt}),Be=Se.fov,st=Se.aspect,Lt=Se.near,It=Se.far,wn=ue.perspective([],Be,st,Lt,It);return wn}function Vt(fn,vt){var Pt=(0,Ae.Z)(fn,3),An=Pt[0],Pn=Pt[1],Xn=Pt[2],dt=Xn===void 0?0:Xn;return Oe(Number.isFinite(An)&&Number.isFinite(Pn)&&Number.isFinite(dt)),lt(vt,[An,Pn,dt,1])}function ze(fn,vt){var Pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,An=(0,Ae.Z)(fn,3),Pn=An[0],Xn=An[1],dt=An[2];if(Oe(Number.isFinite(Pn)&&Number.isFinite(Xn),"invalid pixel coordinate"),Number.isFinite(dt)){var Se=lt(vt,[Pn,Xn,dt,1]);return Se}var Be=lt(vt,[Pn,Xn,0,1]),st=lt(vt,[Pn,Xn,1,1]),Lt=Be[2],It=st[2],wn=Lt===It?0:((Pt||0)-Lt)/(It-Lt);return St.t7([],Be,st,wn)}var rt=Ze(),jt=function(){function fn(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pt=vt.width,An=vt.height,Pn=vt.viewMatrix,Xn=Pn===void 0?rt:Pn,dt=vt.projectionMatrix,Se=dt===void 0?rt:dt;(0,et.Z)(this,fn),this.width=Pt||1,this.height=An||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Xn,this.projectionMatrix=Se;var Be=Ze();ue.multiply(Be,Be,this.projectionMatrix),ue.multiply(Be,Be,this.viewMatrix),this.viewProjectionMatrix=Be;var st=Ze();ue.scale(st,st,[this.width/2,-this.height/2,1]),ue.translate(st,st,[1,-1,0]),ue.multiply(st,st,this.viewProjectionMatrix);var Lt=ue.invert(Ze(),st);if(!Lt)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=st,this.pixelUnprojectionMatrix=Lt,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,Je.Z)(fn,[{key:"equals",value:function(Pt){return Pt instanceof fn?Pt.width===this.width&&Pt.height===this.height&&ue.equals(Pt.projectionMatrix,this.projectionMatrix)&&ue.equals(Pt.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(Pt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=An.topLeft,Xn=Pn===void 0?!0:Pn,dt=this.projectPosition(Pt),Se=Vt(dt,this.pixelProjectionMatrix),Be=(0,Ae.Z)(Se,2),st=Be[0],Lt=Be[1],It=Xn?Lt:this.height-Lt;return Pt.length===2?[st,It]:[st,It,Se[2]]}},{key:"unproject",value:function(Pt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pn=An.topLeft,Xn=Pn===void 0?!0:Pn,dt=An.targetZ,Se=(0,Ae.Z)(Pt,3),Be=Se[0],st=Se[1],Lt=Se[2],It=Xn?st:this.height-st,wn=dt&&dt*this.pixelsPerMeter,Kn=ze([Be,It,Lt],this.pixelUnprojectionMatrix,wn),_r=this.unprojectPosition(Kn),Jn=(0,Ae.Z)(_r,3),Pe=Jn[0],Te=Jn[1],ke=Jn[2];return Number.isFinite(Lt)?[Pe,Te,ke]:Number.isFinite(dt)?[Pe,Te,dt]:[Pe,Te]}},{key:"projectPosition",value:function(Pt){var An=this.projectFlat(Pt),Pn=(0,Ae.Z)(An,2),Xn=Pn[0],dt=Pn[1],Se=(Pt[2]||0)*this.pixelsPerMeter;return[Xn,dt,Se]}},{key:"unprojectPosition",value:function(Pt){var An=this.unprojectFlat(Pt),Pn=(0,Ae.Z)(An,2),Xn=Pn[0],dt=Pn[1],Se=(Pt[2]||0)/this.pixelsPerMeter;return[Xn,dt,Se]}},{key:"projectFlat",value:function(Pt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Pt}},{key:"unprojectFlat",value:function(Pt){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Pt}}]),fn}();function U(fn){var vt=fn.width,Pt=fn.height,An=fn.bounds,Pn=fn.minExtent,Xn=Pn===void 0?0:Pn,dt=fn.maxZoom,Se=dt===void 0?24:dt,Be=fn.padding,st=Be===void 0?0:Be,Lt=fn.offset,It=Lt===void 0?[0,0]:Lt,wn=(0,Ae.Z)(An,2),Kn=(0,Ae.Z)(wn[0],2),_r=Kn[0],Jn=Kn[1],Pe=(0,Ae.Z)(wn[1],2),Te=Pe[0],ke=Pe[1];if(Number.isFinite(st)){var it=st;st={top:it,bottom:it,left:it,right:it}}else Oe(Number.isFinite(st.top)&&Number.isFinite(st.bottom)&&Number.isFinite(st.left)&&Number.isFinite(st.right));var At=new pe({width:vt,height:Pt,longitude:0,latitude:0,zoom:0}),Yt=At.project([_r,ke]),hn=At.project([Te,Jn]),Et=[Math.max(Math.abs(hn[0]-Yt[0]),Xn),Math.max(Math.abs(hn[1]-Yt[1]),Xn)],Kt=[vt-st.left-st.right-Math.abs(It[0])*2,Pt-st.top-st.bottom-Math.abs(It[1])*2];Oe(Kt[0]>0&&Kt[1]>0);var er=Kt[0]/Et[0],br=Kt[1]/Et[1],Vr=(st.right-st.left)/2/er,vr=(st.bottom-st.top)/2/br,Ur=[(hn[0]+Yt[0])/2+Vr,(hn[1]+Yt[1])/2+vr],_i=At.unproject(Ur),Ai=At.zoom+Math.log2(Math.abs(Math.min(er,br)));return{longitude:_i[0],latitude:_i[1],zoom:Math.min(Ai,Se)}}var pe=function(fn){(0,_t.Z)(vt,fn);function vt(){var Pt,An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pn=An.width,Xn=An.height,dt=An.latitude,Se=dt===void 0?0:dt,Be=An.longitude,st=Be===void 0?0:Be,Lt=An.zoom,It=Lt===void 0?0:Lt,wn=An.pitch,Kn=wn===void 0?0:wn,_r=An.bearing,Jn=_r===void 0?0:_r,Pe=An.altitude,Te=Pe===void 0?1.5:Pe,ke=An.nearZMultiplier,it=An.farZMultiplier;(0,et.Z)(this,vt),Pn=Pn||1,Xn=Xn||1;var At=mn(It);Te=Math.max(.75,Te);var Yt=qn([st,Se],At);Yt[2]=0;var hn=Dt({width:Pn,height:Xn,pitch:Kn,bearing:Jn,altitude:Te,nearZMultiplier:ke||1/Xn,farZMultiplier:it||1.01}),Et=Vn({height:Xn,center:Yt,pitch:Kn,bearing:Jn,altitude:Te,flipY:!0});return Pt=(0,wt.Z)(this,(0,pt.Z)(vt).call(this,{width:Pn,height:Xn,viewMatrix:Et,projectionMatrix:hn})),Pt.latitude=Se,Pt.longitude=st,Pt.zoom=It,Pt.pitch=Kn,Pt.bearing=Jn,Pt.altitude=Te,Pt.scale=At,Pt.center=Yt,Pt.pixelsPerMeter=Jt((0,Me.Z)((0,Me.Z)(Pt))).pixelsPerMeter[2],Object.freeze((0,Me.Z)((0,Me.Z)(Pt))),Pt}return(0,Je.Z)(vt,[{key:"projectFlat",value:function(An){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return qn(An,Pn)}},{key:"unprojectFlat",value:function(An){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return rr(An,Pn)}},{key:"getMapCenterByLngLatPosition",value:function(An){var Pn=An.lngLat,Xn=An.pos,dt=ze(Xn,this.pixelUnprojectionMatrix),Se=qn(Pn,this.scale),Be=St.IH([],Se,St.tk([],dt)),st=St.IH([],this.center,Be);return rr(st,this.scale)}},{key:"getLocationAtPoint",value:function(An){var Pn=An.lngLat,Xn=An.pos;return this.getMapCenterByLngLatPosition({lngLat:Pn,pos:Xn})}},{key:"fitBounds",value:function(An){var Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xn=this.width,dt=this.height,Se=U(Object.assign({width:Xn,height:dt,bounds:An},Pn)),Be=Se.longitude,st=Se.latitude,Lt=Se.zoom;return new vt({width:Xn,height:dt,longitude:Be,latitude:st,zoom:Lt})}}]),vt}(jt);class ct{constructor(){(0,W.Z)(this,"viewport",void 0)}syncWithMapCamera(vt){const{center:Pt,zoom:An,pitch:Pn,bearing:Xn,viewportHeight:dt,viewportWidth:Se}=vt;this.viewport=new pe({width:Se,height:dt,longitude:Pt&&Pt[0],latitude:Pt&&Pt[1],zoom:An,pitch:Pn,bearing:Xn})}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(vt,Pt){return this.viewport.projectFlat(vt,Pt)}}const he=["id","attributionControl","style","token","rotation","mapInstance"];function $t(fn,vt){var Pt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Pt||An)&&(vt||(vt=document),!!vt)){var Pn=vt.head||vt.getElementsByTagName("head")[0];if(!Pn){Pn=vt.createElement("head");var Xn=vt.body||vt.getElementsByTagName("body")[0];Xn?Xn.parentNode.insertBefore(Pn,Xn):vt.documentElement.appendChild(Pn)}var dt=vt.createElement("style");return dt.type="text/css",dt.styleSheet?dt.styleSheet.cssText=fn:dt.appendChild(vt.createTextNode(fn)),Pn.appendChild(dt),dt}}$t(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ae();let sn=0;const pn="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class Dn extends we{constructor(...vt){super(...vt),(0,W.Z)(this,"version","MAPBOX"),(0,W.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(vt,Pt={x:0,y:0,z:0}){const{x:An,y:Pn}=this.lngLatToMercator(vt,0);return[An-Pt.x,Pn-Pt.y]}lngLatToMercator(vt,Pt){const{x:An=0,y:Pn=0,z:Xn=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,Pt);return{x:An,y:Pn,z:Xn}}getModelMatrix(vt,Pt,An,Pn=[1,1,1],Xn={x:0,y:0,z:0}){const dt=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,Pt),Se=dt.meterInMercatorCoordinateUnits(),Be=ue.create();return ue.translate(Be,Be,ce.al(dt.x-Xn.x,dt.y-Xn.y,dt.z||0-Xn.z)),ue.scale(Be,Be,ce.al(Se*Pn[0],-Se*Pn[1],Se*Pn[2])),ue.rotateX(Be,Be,An[0]),ue.rotateY(Be,Be,An[1]),ue.rotateZ(Be,Be,An[2]),Be}init(){var vt=this;return(0,ee.Z)(function*(){const Pt=vt.config,{id:An="map",attributionControl:Pn=!1,style:Xn="light",token:dt=pn,rotation:Se=0,mapInstance:Be}=Pt,st=(0,de.Z)(Pt,he);vt.viewport=new ct,!Be&&!window.mapboxgl&&console.error(vt.configService.getSceneWarninfo("SDK")),dt===pn&&Xn!=="blank"&&!window.mapboxgl.accessToken&&!Be&&console.warn(vt.configService.getSceneWarninfo("MapToken")),!Be&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=dt),Be?(vt.map=Be,vt.$mapContainer=vt.map.getContainer()):(vt.$mapContainer=vt.creatMapContainer(An),vt.map=new window.mapboxgl.Map((0,q.Z)({container:vt.$mapContainer,style:vt.getMapStyleValue(Xn),attributionControl:Pn,bearing:Se},st))),vt.map.on("load",()=>{vt.handleCameraChanged()}),vt.map.on("move",vt.handleCameraChanged),vt.handleCameraChanged()})()}destroy(){var vt;(vt=this.$mapContainer)===null||vt===void 0||(vt=vt.parentNode)===null||vt===void 0||vt.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...Pt){this.eventEmitter.emit(vt,...Pt)}once(vt,...Pt){this.eventEmitter.once(vt,...Pt)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var vt;return(vt=this.getMapContainer())===null||vt===void 0?void 0:vt.querySelector(".mapboxgl-canvas-container")}meterToCoord(vt,Pt){const An=new(ae()).LngLat(vt[0],vt[1]),Pn=new(ae()).LngLat(Pt[0],Pt[1]),Xn=An.distanceTo(Pn),dt=ae().MercatorCoordinate.fromLngLat({lng:vt[0],lat:vt[1]}),Se=ae().MercatorCoordinate.fromLngLat({lng:Pt[0],lat:Pt[1]}),{x:Be,y:st}=dt,{x:Lt,y:It}=Se;return Math.sqrt(Math.pow(Be-Lt,2)+Math.pow(st-It,2))*4194304*2/Xn}exportMap(vt){const Pt=this.map.getCanvas();return vt==="jpg"?Pt==null?void 0:Pt.toDataURL("image/jpeg"):Pt==null?void 0:Pt.toDataURL("image/png")}creatMapContainer(vt){let Pt=vt;typeof vt=="string"&&(Pt=document.getElementById(vt));const An=document.createElement("div");return An.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,An.id="l7_mapbox_div"+sn++,Pt.appendChild(An),An}}function Wn(fn,vt){var Pt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(Pt||An)&&(vt||(vt=document),!!vt)){var Pn=vt.head||vt.getElementsByTagName("head")[0];if(!Pn){Pn=vt.createElement("head");var Xn=vt.body||vt.getElementsByTagName("body")[0];Xn?Xn.parentNode.insertBefore(Pn,Xn):vt.documentElement.appendChild(Pn)}var dt=vt.createElement("style");return dt.type="text/css",dt.styleSheet?dt.styleSheet.cssText=fn:dt.appendChild(vt.createTextNode(fn)),Pn.appendChild(dt),dt}}Wn(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class Yn extends E{getServiceConstructor(){return Dn}}},4771:function(){},66366:function(gt,G,L){"use strict";L.d(G,{SO:function(){return q},z6:function(){return oe},a5:function(){return W},SA:function(){return E},nx:function(){return Yf},Z:function(){return dl},rQ:function(){return Le},bV:function(){return en},zi:function(){return St},ds:function(){return Eu},oO:function(){return cu},SI:function(){return tp},Rx:function(){return dh},W0:function(){return Xe},LS:function(){return La},Z6:function(){return Rt},We:function(){return Wt},Co:function(){return lt},hj:function(){return Gt},Cl:function(){return bt},Oc:function(){return Ln},M4:function(){return Ie},NJ:function(){return mn},ks:function(){return Je},Ol:function(){return bd},fj:function(){return Jt},Yu:function(){return pt},ZB:function(){return rr},gJ:function(){return Ze},z0:function(){return xf},jG:function(){return $f},M8:function(){return Dh},fg:function(){return ti},if:function(){return Ct},vP:function(){return Zi},lodashUtil:function(){return Kt},LF:function(){return K},Fv:function(){return ef},yA:function(){return Jc},CI:function(){return Ke}});var q={};L.r(q),L.d(q,{DPR:function(){return Ut},addClass:function(){return wr},addStyle:function(){return ln},appendElementType:function(){return ji},clearChildren:function(){return hr},create:function(){return _i},css2Style:function(){return gn},empty:function(){return Qo},findParentElement:function(){return Ji},getClass:function(){return xi},getContainer:function(){return br},getDiffRect:function(){return Cn},getStyleList:function(){return Nn},getViewPortScale:function(){return ot},hasClass:function(){return hi},printCanvas:function(){return Fe},remove:function(){return Ai},removeClass:function(){return Ei},removeStyle:function(){return Fn},setChecked:function(){return pr},setClass:function(){return ai},setTransform:function(){return Po},setUnDraggable:function(){return ei},splitWords:function(){return vr},toggleClass:function(){return Io},triggerResize:function(){return $o},trim:function(){return Vr}});var W={};L.r(W),L.d(W,{getColumn:function(){return Di},getSatByColumn:function(){return Vi},max:function(){return _e},mean:function(){return En},min:function(){return tt},mode:function(){return re},statMap:function(){return Nr},sum:function(){return cn}});var E={REGISTERED_PROTOCOLS:{}},de=Object.defineProperty,ee=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,ce=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,We=(fe,Ge,xt)=>Ge in fe?de(fe,Ge,{enumerable:!0,configurable:!0,writable:!0,value:xt}):fe[Ge]=xt,te=(fe,Ge)=>{for(var xt in Ge||(Ge={}))xe.call(Ge,xt)&&We(fe,xt,Ge[xt]);if(ce)for(var xt of ce(Ge))ae.call(Ge,xt)&&We(fe,xt,Ge[xt]);return fe},me=(fe,Ge)=>ee(fe,ue(Ge)),Re=fe=>E.REGISTERED_PROTOCOLS[fe.substring(0,fe.indexOf("://"))],$=class extends Error{constructor(fe,Ge,xt,Rn){super(`AJAXError: ${Ge} (${fe}): ${xt}`),this.status=fe,this.statusText=Ge,this.url=xt,this.body=Rn}};function le(fe,Ge){const xt=new XMLHttpRequest,Rn=Array.isArray(fe.url)?fe.url[0]:fe.url;xt.open(fe.method||"GET",Rn,!0),fe.type==="arrayBuffer"&&(xt.responseType="arraybuffer");for(const ur in fe.headers)fe.headers.hasOwnProperty(ur)&&xt.setRequestHeader(ur,fe.headers[ur]);return fe.type==="json"&&(xt.responseType="text",xt.setRequestHeader("Accept","application/json")),xt.withCredentials=fe.credentials==="include",xt.onerror=()=>{Ge(new Error(xt.statusText))},xt.onload=()=>{if((xt.status>=200&&xt.status<300||xt.status===0)&&xt.response!==null){let ur=xt.response;if(fe.type==="json")try{ur=JSON.parse(xt.response)}catch(Fr){return Ge(Fr)}Ge(null,ur,xt.getResponseHeader("Cache-Control"),xt.getResponseHeader("Expires"),xt)}else{const ur=new Blob([xt.response],{type:xt.getResponseHeader("Content-Type")});Ge(new $(xt.status,xt.statusText,Rn.toString(),ur))}},xt.cancel=xt.abort,xt.send(fe.body),xt}function K(fe){return new Promise((Ge,xt)=>{le(fe,(Rn,ur,Fr,ci,Ri)=>{Rn?xt({err:Rn,data:null,xhr:Ri}):Ge({err:null,data:ur,cacheControl:Fr,expires:ci,xhr:Ri})})})}function we(fe,Ge){return le(fe,Ge)}var et=(fe,Ge)=>(Re(fe.url)||we)(me(te({},fe),{type:"json"}),Ge),Je=(fe,Ge)=>(Re(fe.url)||we)(me(te({},fe),{type:"arrayBuffer"}),Ge),wt=(fe,Ge)=>we(me(te({},fe),{method:"POST"}),Ge),pt=(fe,Ge)=>we(me(te({},fe),{method:"GET"}),Ge);function _t(fe){const Ge=window.document.createElement("a");return Ge.href=fe,Ge.protocol===window.document.location.protocol&&Ge.host===window.document.location.host}var Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ae(fe,Ge){const xt=new window.Image,Rn=window.URL||window.webkitURL;xt.crossOrigin="anonymous",xt.onload=()=>{Ge(null,xt),Rn.revokeObjectURL(xt.src),xt.onload=null,window.requestAnimationFrame(()=>{xt.src=Me})},xt.onerror=()=>Ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ur=new Blob([new Uint8Array(fe)],{type:"image/png"});xt.src=fe.byteLength?Rn.createObjectURL(ur):Me}function je(fe,Ge){const xt=new Blob([new Uint8Array(fe)],{type:"image/png"});createImageBitmap(xt).then(Rn=>{Ge(null,Rn)}).catch(Rn=>{Ge(new Error(`Could not load image because of ${Rn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var Ze=(fe,Ge,xt)=>{const Rn=(ur,Fr)=>{if(ur)Ge(ur);else if(Fr){const ci=typeof createImageBitmap=="function",Ri=xt?xt(Fr):Fr;ci?je(Ri,Ge):Ae(Ri,Ge)}};return fe.type==="json"?et(fe,Rn):Je(fe,Rn)},lt=(fe,Ge)=>{typeof createImageBitmap=="function"?je(fe,Ge):Ae(fe,Ge)},en=(fe=>(fe.CENTER="center",fe.TOP="top",fe["TOP-LEFT"]="top-left",fe["TOP-RIGHT"]="top-right",fe.BOTTOM="bottom",fe["BOTTOM-LEFT"]="bottom-left",fe["BOTTOM-RIGHT"]="bottom-right",fe.LEFT="left",fe.RIGHT="right",fe))(en||{}),Le={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function St(fe,Ge,xt){const Rn=fe.classList;for(const ur in Le)Le.hasOwnProperty(ur)&&Rn.remove(`l7-${xt}-anchor-${ur}`);Rn.add(`l7-${xt}-anchor-${Ge}`)}var Oe=L(37620);function nt(fe){return typeof fe=="string"?!!d3.color(fe):!1}function Ke(fe){const Ge=Oe.ZP(fe),xt=[0,0,0,0];return Ge!=null&&(xt[0]=Ge.r/255,xt[1]=Ge.g/255,xt[2]=Ge.b/255,xt[3]=Ge.opacity),xt}function Xe(fe){const Ge=fe&&fe[0],xt=fe&&fe[1],Rn=fe&&fe[2];return Ge+xt*256+Rn*65536-1}function Rt(fe){return[fe+1&255,fe+1>>8&255,fe+1>>8>>8&255]}function bt(fe){let Ge=window.document.createElement("canvas"),xt=Ge.getContext("2d");Ge.width=256,Ge.height=1;let Rn=null;const ur=xt.createLinearGradient(0,0,256,1),Fr=fe.positions[0],ci=fe.positions[fe.positions.length-1];for(let Ri=0;Ri<fe.colors.length;++Ri){const Wo=(fe.positions[Ri]-Fr)/(ci-Fr);ur.addColorStop(Wo,fe.colors[Ri])}return xt.fillStyle=ur,xt.fillRect(0,0,256,1),Rn=new Uint8ClampedArray(xt.getImageData(0,0,256,1).data),Ge=null,xt=null,{data:Rn,width:256,height:1}}function Ie(fe,Ge){let xt=window.document.createElement("canvas"),Rn=xt.getContext("2d");xt.width=256,xt.height=1;const ur=Rn.createLinearGradient(0,0,256,1),Fr=Ge[1]-Ge[0];for(let Wo=0;Wo<fe.colors.length;++Wo){const Go=Math.max((fe.positions[Wo]-Ge[0])/Fr,0);ur.addColorStop(Go,fe.colors[Wo])}Rn.fillStyle=ur,Rn.fillRect(0,0,256,1);const ci=Rn.getImageData(0,0,256,1).data,Ri=qn(Rn,ci);return xt=null,Rn=null,Ri}function Gt(fe){let Ge=window.document.createElement("canvas"),xt=Ge.getContext("2d");Ge.width=256,Ge.height=1;const Rn=xt.createImageData(256,1);return Rn.data.fill(0),fe.positions.forEach((ur,Fr)=>{const ci=Ke(fe.colors[Fr]);Rn.data[ur*4+0]=ci[0]*255,Rn.data[ur*4+1]=ci[1]*255,Rn.data[ur*4+2]=ci[2]*255,Rn.data[ur*4+3]=ci[3]*255}),Ge=null,xt=null,Rn}function mn(fe){let Ge=window.document.createElement("canvas"),xt=Ge.getContext("2d");xt.globalAlpha=1,Ge.width=256,Ge.height=1;const Rn=256/fe.colors.length;for(let ci=0;ci<fe.colors.length;ci++)xt.beginPath(),xt.lineWidth=2,xt.strokeStyle=fe.colors[ci],xt.moveTo(ci*Rn,0),xt.lineTo((ci+1)*Rn,0),xt.stroke();const ur=xt.getImageData(0,0,256,1).data,Fr=qn(xt,ur);return Ge=null,xt=null,Fr}function Ln(fe,Ge){let xt=window.document.createElement("canvas"),Rn=xt.getContext("2d");Rn.globalAlpha=1,xt.width=256,xt.height=1;const ur=Ge[1]-Ge[0];fe.positions.length-fe.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let Ri=0;Ri<fe.colors.length;Ri++)Rn.beginPath(),Rn.lineWidth=2,Rn.strokeStyle=fe.colors[Ri],Rn.moveTo((fe.positions[Ri]-Ge[0])/ur*255,0),Rn.lineTo((fe.positions[Ri+1]-Ge[0])/ur*255,0),Rn.stroke();const Fr=Rn.getImageData(0,0,256,1).data,ci=qn(Rn,Fr);return xt=null,Rn=null,ci}function qn(fe,Ge){const xt=fe.createImageData(256,1);for(let Rn=0;Rn<xt.data.length;Rn+=4)xt.data[Rn+0]=Ge[Rn+0],xt.data[Rn+1]=Ge[Rn+1],xt.data[Rn+2]=Ge[Rn+2],xt.data[Rn+3]=Ge[Rn+3];return xt}function rr(fe){switch(fe==null?void 0:fe.type){case"cat":return[0,255];default:return[0,1]}}var Ft={BACK:1029,FRONT:1028};function Jt(fe){switch(fe){case"GAODE1.x":return Ft.BACK;case"GAODE2.x":return Ft.BACK;case"MAPBOX":return Ft.FRONT;case"SIMPLE":return Ft.FRONT;case"GLOBEL":return Ft.BACK;case"DEBAULT":return Ft.FRONT;default:return Ft.FRONT}}var un=L(74691),Vn=L.n(un),on=L(50361),Dt=L.n(on),Vt=L(23279),ze=L.n(Vt),rt=L(27361),jt=L.n(rt),U=L(51584),pe=L.n(U),ct=L(18446),he=L.n(ct),$t=L(14293),sn=L.n($t),pn=L(81763),Dn=L.n(pn),Wn=L(68630),Yn=L.n(Wn),fn=L(47037),vt=L.n(fn),Pt=L(36719),An=L.n(Pt),Pn=L(82492),Xn=L.n(Pn),dt=L(30236),Se=L.n(dt),Be=L(97019),st=L.n(Be),Lt=L(23493),It=L.n(Lt),wn=L(44908),Kn=L.n(wn),_r=L(11700),Jn=L.n(_r),Pe=L(23560),Te=L.n(Pe),ke=L(13218),it=L.n(ke),At=L(52353),Yt=L.n(At),hn=L(68929),Et=L.n(hn),Kt={isNil:sn(),merge:Xn(),throttle:It(),isString:vt(),debounce:ze(),pull:st(),isTypedArray:An(),isPlainObject:Yn(),isNumber:Dn(),isBoolean:pe(),isEqual:he(),cloneDeep:Dt(),uniq:Kn(),clamp:Vn(),upperFirst:Jn(),get:jt(),mergeWith:Se(),isFunction:Te(),isObject:it(),isUndefined:Yt(),camelCase:Et()},{pull:er}=Kt;function br(fe){let Ge=fe;return typeof fe=="string"&&(Ge=window.document.getElementById(fe)),Ge}function Vr(fe){return fe.trim?fe.trim():fe.replace(/^\s+|\s+$/g,"")}function vr(fe){return Vr(fe).split(/\s+/)}function Ur(fe){var Ge;const xt=(Ge=document==null?void 0:document.documentElement)==null?void 0:Ge.style;if(!xt)return fe[0];for(const Rn in fe)if(fe[Rn]&&fe[Rn]in xt)return fe[Rn];return fe[0]}function _i(fe,Ge,xt){const Rn=window.document.createElement(fe);return Ge&&(Rn.className=Ge||""),xt&&xt.appendChild(Rn),Rn}function Ai(fe){const Ge=fe.parentNode;Ge&&Ge.removeChild(fe)}function wr(fe,Ge){if(fe.classList!==void 0){const xt=vr(Ge);for(let Rn=0,ur=xt.length;Rn<ur;Rn++)fe.classList.add(xt[Rn])}else if(!hi(fe,Ge)){const xt=xi(fe);ai(fe,(xt?xt+" ":"")+Ge)}}function Ei(fe,Ge){fe.classList!==void 0?vr(Ge).forEach(Rn=>{fe.classList.remove(Rn)}):ai(fe,Vr((" "+xi(fe)+" ").replace(" "+Ge+" "," ")))}function hi(fe,Ge){if(fe.classList!==void 0)return fe.classList.contains(Ge);const xt=xi(fe);return xt.length>0&&new RegExp("(^|\\s)"+Ge+"(\\s|$)").test(xt)}function ai(fe,Ge){fe instanceof HTMLElement?fe.className=Ge:fe.className.baseVal=Ge}function Io(fe,Ge,xt){xt===void 0?hi(fe,Ge)?Ei(fe,Ge):wr(fe,Ge):xt?wr(fe,Ge):Ei(fe,Ge)}function xi(fe){return fe instanceof SVGElement&&(fe=fe.correspondingElement),fe.className.baseVal===void 0?fe.className:fe.className.baseVal}function Qo(fe){for(;fe&&fe.firstChild;)fe.removeChild(fe.firstChild)}var ga=Ur(["transform","WebkitTransform"]);function Po(fe,Ge){fe.style[ga]=Ge}function $o(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const fe=window.document.createEvent("UIEvents");fe.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(fe)}}function Fe(fe){const Ge=["padding: "+(fe.height/2-8)+"px "+fe.width/2+"px;","line-height: "+fe.height+"px;","background-image: url("+fe.toDataURL()+");"];console.log(`%c
`,Ge.join(""))}function ot(){var fe;const Ge=window.document.querySelector('meta[name="viewport"]');if(!Ge)return 1;const Rn=((fe=Ge.content)==null?void 0:fe.split(",")).find(ur=>{const[Fr]=ur.split("=");return Fr==="initial-scale"});return Rn?Rn.split("=")[1]*1:1}var Ut=ot()<1?1:window.devicePixelRatio;function ln(fe,Ge){fe.setAttribute("style",`${fe.style.cssText}${Ge}`)}function Nn(fe){return fe.split(";").map(Ge=>Ge.trim()).filter(Ge=>Ge)}function Fn(fe,Ge){var xt;const Rn=Nn((xt=fe.getAttribute("style"))!=null?xt:""),ur=Nn(Ge),Fr=er(Rn,...ur);fe.setAttribute("style",Fr.join(";"))}function gn(fe){return Object.entries(fe).map(([Ge,xt])=>`${Ge}: ${xt}`).join(";")}function Cn(fe,Ge){return{left:fe.left-Ge.left,top:fe.top-Ge.top,right:Ge.left+Ge.width-fe.left-fe.width,bottom:Ge.top+Ge.height-fe.top-fe.height}}function pr(fe,Ge){fe.checked=Ge,Ge?fe.setAttribute("checked","true"):fe.removeAttribute("checked")}function hr(fe){fe.innerHTML=""}function ei(fe){fe.setAttribute("draggable","false")}function ji(fe,Ge){if(typeof Ge=="string"){const xt=document.createElement("div");for(xt.innerHTML=Ge;xt.firstChild;)fe.append(xt.firstChild)}else Array.isArray(Ge)?fe.append(...Ge):fe.append(Ge)}function Ji(fe,Ge){var xt;const Rn=Array.isArray(Ge)?Ge:[Ge];let ur=fe;for(;ur instanceof Element&&ur!==window.document.body;){if(Rn.find(Fr=>ur==null?void 0:ur.matches(Fr)))return ur;ur=(xt=ur==null?void 0:ur.parentElement)!=null?xt:null}}function ti(fe){return typeof ImageBitmap!="undefined"&&fe instanceof ImageBitmap}function Gi(){return typeof importScripts=="function"}var Ni=Gi()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Gr=navigator==null?void 0:navigator.userAgent,So=!!Gr.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),fi=Gr.indexOf("Android")>-1||Gr.indexOf("Adr")>-1;function Eo(){const fe=Gr,Ge=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let xt=!0;for(const Rn of Ge)if(fe.indexOf(Rn)>0){xt=!1;break}return xt}function Wi(fe,Ge){fe.forEach(xt=>{Ge[xt]&&(Ge[xt]=Ge[xt].bind(Ge))})}var io=class{constructor(fe=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=fe}run(fe){const Ge=new Date().getTime(),xt=Ge-this.timestamp;this.timestamp=Ge,xt>=this.duration&&fe()}},Ao=L(39034);function xs(fe){var Ge=[1/0,1/0,-1/0,-1/0];return(0,Ao.pZ)(fe,function(xt){Ge[0]>xt[0]&&(Ge[0]=xt[0]),Ge[1]>xt[1]&&(Ge[1]=xt[1]),Ge[2]<xt[0]&&(Ge[2]=xt[0]),Ge[3]<xt[1]&&(Ge[3]=xt[1])}),Ge}xs.default=xs;var ya=xs,ra=L(1449);function gs(fe){return typeof fe=="number"}var as=2*Math.PI*6378137/2;function Ct(fe,Ge){const[xt,Rn,ur,Fr]=Ge;return fe.lng>xt&&fe.lng<=ur&&fe.lat>Rn&&fe.lat<=Fr}function Wt(fe){const Ge=[1/0,1/0,-1/0,-1/0];return fe.forEach(xt=>{const{coordinates:Rn}=xt;jn(Ge,Rn)}),Ge}function jn(fe,Ge){return Array.isArray(Ge[0])?Ge.forEach(xt=>{jn(fe,xt)}):(fe[0]>Ge[0]&&(fe[0]=Ge[0]),fe[1]>Ge[1]&&(fe[1]=Ge[1]),fe[2]<Ge[0]&&(fe[2]=Ge[0]),fe[3]<Ge[1]&&(fe[3]=Ge[1])),fe}function Lr(fe,Ge){return Si(fe,Ge)}function Si(fe,Ge){return Array.isArray(fe[0])?fe.map(xt=>Si(xt,Ge)):Ge(fe)}function Zi(fe,Ge=!0,xt={enable:!0,decimal:1}){fe=Us(fe,Ge);const Rn=fe[0],ur=fe[1];let Fr=Rn*as/180,ci=Math.log(Math.tan((90+ur)*Math.PI/360))/(Math.PI/180);return ci=ci*as/180,xt.enable&&(Fr=Number(Fr.toFixed(xt.decimal)),ci=Number(ci.toFixed(xt.decimal))),fe.length===3?[Fr,ci,fe[2]]:[Fr,ci]}function Jo(fe,Ge=6){const xt=fe[0],Rn=fe[1];let ur=xt/as*180,Fr=Rn/as*180;return Fr=180/Math.PI*(2*Math.atan(Math.exp(Fr*Math.PI/180))-Math.PI/2),Ge!=null&&(ur=Number(ur.toFixed(Ge)),Fr=Number(Fr.toFixed(Ge))),fe.length===3?[ur,Fr,fe[2]]:[ur,Fr]}function Hs(fe){if(fe==null)throw new Error("lng is required");return(fe>180||fe<-180)&&(fe=fe%360,fe>180&&(fe=-360+fe),fe<-180&&(fe=360+fe),fe===0&&(fe=0)),fe}function Is(fe){if(fe==null)throw new Error("lat is required");return(fe>90||fe<-90)&&(fe=fe%180,fe>90&&(fe=-180+fe),fe<-90&&(fe=180+fe),fe===0&&(fe=0)),fe}function Us(fe,Ge){if(Ge===!1)return fe;const xt=Hs(fe[0]);let Rn=Is(fe[1]);return Rn>85&&(Rn=85),Rn<-85&&(Rn=-85),fe.length===3?[xt,Rn,fe[2]]:[xt,Rn]}function dl(fe){const Ge=85.0511287798,xt=Math.max(Math.min(Ge,fe[1]),-Ge),Rn=256<<20;let ur=Math.PI/180,Fr=fe[0]*ur,ci=xt*ur;ci=Math.log(Math.tan(Math.PI/4+ci/2));const Ri=.5/Math.PI,Wo=.5,Go=-.5/Math.PI;return ur=.5,Fr=Rn*(Ri*Fr+Wo),ci=Rn*(Go*ci+ur),[Math.floor(Fr),Math.floor(ci)]}function Ph(fe){const Ge=.5/Math.PI,xt=.5,Rn=-.5/Math.PI;let ur=.5;const Fr=256<<20;let[ci,Ri]=fe;ci=(ci/Fr-xt)/Ge,Ri=(Ri/Fr-ur)/Rn,Ri=(Math.atan(Math.pow(Math.E,Ri))-Math.PI/4)*2,ur=Math.PI/180;const Wo=Ri/ur;return[ci/ur,Wo]}function Up(fe,Ge){const xt=85.0511287798,Rn=Math.PI/180,ur=6378137;return Ge=Math.max(Math.min(xt,Ge),-xt),fe*=Rn,Ge*=Rn,Ge=Math.log(Math.tan(Math.PI/4+Ge/2)),[fe*ur,Ge*ur]}function hh(fe,Ge){const xt=Math.PI/180,Rn=6378137,ur=fe/Rn/xt,Fr=2*(Math.atan(Math.exp(Ge/Rn))-Math.PI/4)/xt;return[ur,Fr]}function uu(fe,Ge,xt){const Rn=degreesToRadians(Ge[1]-fe[1]),ur=degreesToRadians(Ge[0]-fe[0]),Fr=degreesToRadians(fe[1]),ci=degreesToRadians(Ge[1]),Ri=Math.pow(Math.sin(Rn/2),2)+Math.pow(Math.sin(ur/2),2)*Math.cos(Fr)*Math.cos(ci);return radiansToLength(2*Math.atan2(Math.sqrt(Ri),Math.sqrt(1-Ri)),xt="meters")}function Df(fe){const Ge=Math.PI/180,xt=85.0511287798,Rn=6378137,ur=Math.max(Math.min(xt,fe[1]),-xt),Fr=Math.sin(ur*Ge),ci=Rn*fe[0]*Ge,Ri=Rn*Math.log((1+Fr)/(1-Fr))/2;return[ci,Ri]}function Jc(fe,Ge){const xt=Math.abs(fe[1][1]-fe[0][1])*Ge,Rn=Math.abs(fe[1][0]-fe[0][0])*Ge;return[[fe[0][0]-Rn,fe[0][1]-xt],[fe[1][0]+Rn,fe[1][1]+xt]]}function cu(fe,Ge){return fe[0][0]<=Ge[0][0]&&fe[0][1]<=Ge[0][1]&&fe[1][0]>=Ge[1][0]&&fe[1][1]>=Ge[1][1]}function Eu(fe){return[[fe[0],fe[1]],[fe[2],fe[3]]]}function ef(fe){const Ge=Lf(fe,[0,0]);return[fe[0]/Ge,fe[1]/Ge]}function Lf(fe,Ge){return Math.sqrt(Math.pow(fe[0]-Ge[0],2)+Math.pow(fe[1]-Ge[1],2))}function fu(fe,Ge){return fe[0]*Ge[0]+fe[1]*Ge[1]}function Ds(fe){return Math.sqrt(fe[0]*fe[0]+fe[1]*fe[1])}function $u(fe,Ge){return Math.acos(fu(fe,Ge)/(Ds(fe)*Ds(Ge)))*180/Math.PI}function tf(fe,Ge){return Ge[0]>0?Ge[1]>0?90-Math.atan(Ge[1]/Ge[0])*180/Math.PI:90+Math.atan(-Ge[1]/Ge[0])*180/Math.PI:Ge[1]<0?180+(90-Math.atan(Ge[1]/Ge[0])*180/Math.PI):270+Math.atan(Ge[1]/-Ge[0])*180/Math.PI}function _d(fe,Ge=100){if(!fe||fe.length<2)return;const xt=[0,1];let Rn=0;const ur=[];for(let Fr=0;Fr<fe.length-1;Fr++){const ci=fe[Fr],Ri=fe[Fr+1],Wo=Lf(ci,Ri);Rn+=Wo;const Go=[ci[0]-Ri[0],ci[1]-Ri[1]];let la=tf(xt,Go);if(Fr>0){const ol=ur[Fr-1].rotation;ol-la>360-ol+la&&(la=la+360)}ur.push({start:ci,end:Ri,dis:Wo,rotation:la,duration:0})}return ur.map(Fr=>{Fr.duration=Ge*(Fr.dis/Rn)}),ur}function tp(fe){if(gs(fe[0]))return fe;if(gs(fe[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(gs(fe[0][0][0])){const Ge=fe;let xt=0,Rn=0,ur=0;return Ge.forEach(Fr=>{Fr.forEach(ci=>{xt+=ci[0],Rn+=ci[1],ur++})}),[xt/ur,Rn/ur,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function dh(fe){let Ge=fe[0],xt=fe[1],Rn=fe[0],ur=fe[1],Fr=0,ci=0,Ri=0;for(let Wo=0;Wo<fe.length;Wo+=2){const Go=fe[Wo],la=fe[Wo+1];Go&&la&&(Ge=Math.max(Go,Ge),xt=Math.max(la,xt),Rn=Math.min(Go,Rn),ur=Math.min(la,ur),Fr+=Go,ci+=la,Ri++)}return{center:[Fr/Ri,ci/Ri],radius:Math.sqrt(Math.pow(Ge-Rn,2)+Math.pow(xt-ur,2))/2}}function bd(fe){return ya((0,ra.uf)([(0,ra.Tu)(fe)]))}function ph(fe){let Rn=0;fe+="x";const ur=Math.floor(9007199254740991/137);for(let Fr=0;Fr<fe.length;Fr++)Rn>ur&&(Rn=Math.floor(Rn/137)),Rn=Rn*131+fe.charCodeAt(Fr);return Rn}function Ih(fe){fe=fe.toString();let Ge=5381,xt=fe.length;for(;xt;)Ge=Ge*33^fe.charCodeAt(--xt);return Ge>>>0}function Dh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,fe=>{const Ge=Math.random()*16|0;return(fe==="x"?Ge:Ge&3|8).toString(16)})}var xd=(fe=>(fe["GAODE1.x"]="GAODE1.x",fe["GAODE2.x"]="GAODE2.x",fe.MAPBOX="MAPBOX",fe.DEFAULT="DEFAUlTMAP",fe.SIMPLE="SIMPLE",fe.GLOBEL="GLOBEL",fe))(xd||{});function c0(fe,Ge,xt,Rn,ur,Fr=30,ci){let Ri=xt;return ci&&(Ri=Math.round(xt*(Fr-1))/(Fr-1)),Rn?Gl(fe,Ge,Ri,Rn,ur):Gl(fe,Ge,Ri,.314,ur)}function nf(fe,Ge){const xt=1-Ge;return(fe[0]*xt+fe[1]*Ge)*xt+(fe[1]*xt+fe[2]*Ge)*Ge}function Fc(fe,Ge){return Math.sqrt(Math.pow(fe[0]-Ge[0],2)+Math.pow(fe[1]-Ge[1],2))}function Ed(fe,Ge,xt){const Rn=[Ge[0]-fe[0],Ge[1]-fe[1]],ur=Fc(Rn,[0,0]),Fr=Math.atan2(Rn[1],Rn[0]),ci=ur/2/Math.cos(xt),Ri=Fr+xt;return[ci*Math.cos(Ri)+fe[0],ci*Math.sin(Ri)+fe[1]]}function Gl(fe,Ge,xt,Rn,ur){if(ur===MapType["GAODE2.x"]){const Fr=amap2Project(fe[0],fe[1]),ci=amap2Project(Ge[0],Ge[1]),Ri=Ed(Fr,ci,Rn),Wo=[Fr[0],Ri[0],ci[0]],Go=[Fr[1],Ri[1],ci[1]];return[...amap2UnProject(nf(Wo,xt),nf(Go,xt)),0]}else{const Fr=Ed(fe,Ge,Rn),ci=[fe[0],Fr[0],Ge[0]],Ri=[fe[1],Fr[1],Ge[1]];return[nf(ci,xt),nf(Ri,xt),0]}}function xc(fe,Ge,xt,Rn,ur,Fr=30,ci){let Ri=xt;return ci&&(Ri=Math.round(xt*29)/29),uc(fe,Ge,Ri,ur)}function rf(fe,Ge){const xt=[Ge[0]-fe[0],Ge[1]-fe[1]],Rn=calDistance(xt,[0,0]),ur=Math.atan2(xt[1],xt[0]),Fr=.314,ci=Rn/2/Math.cos(Fr),Ri=ur+Fr;return[ci*Math.cos(Ri)+fe[0],ci*Math.sin(Ri)+fe[1]]}function hu(fe,Ge){const xt=1-Ge;return(fe[0]*xt+fe[1]*Ge)*xt+(fe[1]*xt+fe[2]*Ge)*Ge}function Bc(fe,Ge){const xt=[fe[0]-Ge[0],fe[1]-Ge[1]],Rn=[Math.sin(xt[0]/2),Math.sin(xt[1]/2)],ur=Rn[1]*Rn[1]+Math.cos(fe[1])*Math.cos(Ge[1])*Rn[0]*Rn[0];return 2*Math.atan2(Math.sqrt(ur),Math.sqrt(1-ur))}function uc(fe,Ge,xt,Rn){const ur=[degreesToRadians(fe[0]),degreesToRadians(fe[1])],Fr=[degreesToRadians(Ge[0]),degreesToRadians(Ge[1])];if(Rn==="GAODE2.x"){const ci=rf(ur,Fr),Ri=[ur[0],ci[0],Fr[0]],Wo=[ur[1],ci[1],Fr[1]];return[hu(Ri,xt),hu(Wo,xt),0]}else{const ci=Bc(ur,Fr);if(Math.abs(ci-Math.PI)<.001)return[(1-xt)*ur[0]+xt*Fr[0],(1-xt)*ur[1]+xt*Fr[1]];const Ri=Math.sin((1-xt)*ci)/Math.sin(ci),Wo=Math.sin(xt*ci)/Math.sin(ci),Go=[Math.sin(ur[0]),Math.sin(ur[1])],la=[Math.cos(ur[0]),Math.cos(ur[1])],ol=[Math.sin(Fr[0]),Math.sin(Fr[1])],Al=[Math.cos(Fr[0]),Math.cos(Fr[1])],Ss=Ri*la[1]*la[0]+Wo*Al[1]*Al[0],eo=Ri*la[1]*Go[0]+Wo*Al[1]*ol[0],Bl=Ri*Go[1]+Wo*ol[1];return[radiansToDegrees(Math.atan2(eo,Ss)),radiansToDegrees(Math.atan2(Bl,Math.sqrt(Ss*Ss+eo*eo)))]}}function mf(fe,Ge){let xt=0;const Rn=[];for(let Ri=0;Ri<fe.length-1;Ri++){const Wo=fe[Ri],Go=fe[Ri+1],la=of(Wo,Go),ol=xt;xt+=la,Rn.push({p1:Wo,p2:Go,totalDistance:xt,distance:la,lastTotalDistance:ol})}const ur=xt*Ge;let Fr,ci;for(const Ri of Rn)if(Ri.totalDistance>ur){const Go=Ri.p1,la=Ri.p2,ol=(ur-Ri.lastTotalDistance)/Ri.distance,Al=Fl(la,Go,ol);Fr=Al[0],ci=Al[1];break}return{lng:Fr,lat:ci,height:0}}function Fl(fe,Ge,xt){return[fe[0]*xt+Ge[0]*(1-xt),fe[1]*xt+Ge[1]*(1-xt)]}function of(fe,Ge){return Math.sqrt(Math.pow(fe[0]-Ge[0],2)+Math.pow(fe[1]-Ge[1],2))}var gf=Object.defineProperty,Sd=Object.getOwnPropertySymbols,wd=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,np=(fe,Ge,xt)=>Ge in fe?gf(fe,Ge,{enumerable:!0,configurable:!0,writable:!0,value:xt}):fe[Ge]=xt,Xf=(fe,Ge)=>{for(var xt in Ge||(Ge={}))wd.call(Ge,xt)&&np(fe,xt,Ge[xt]);if(Sd)for(var xt of Sd(Ge))ys.call(Ge,xt)&&np(fe,xt,Ge[xt]);return fe};function Lh(fe,Ge){const{featureId:xt}=Ge;let Rn=fe.data.dataArray;return typeof xt=="number"&&(Rn=Rn.filter(({id:ur})=>ur===xt)),Rn.map(ur=>{const Fr=Nh(ur,Ge);return Xf(Xf({},ur),Fr)})}function pl(fe,Ge){return new Promise(xt=>{fe.inited?xt(Lh(fe,Ge)):fe.once("update",()=>{xt(Lh(fe,Ge))})})}function Nh(fe,Ge){const{offset:xt,shape:Rn,thetaOffset:ur,mapVersion:Fr,segmentNumber:ci=30,autoFit:Ri=!0}=Ge,{coordinates:Wo}=fe;if(Rn==="line")return pathLineAtOffset(Wo,xt);const Go=Wo[0],la=Wo[1],ol=typeof ur=="string"?fe[ur]||0:ur;let Al;switch(Rn){case"arc":Al=arcLineAtOffset;break;case"greatcircle":Al=greatCircleLineAtOffset;break;default:Al=arcLineAtOffset}const[Ss,eo,Bl]=Al(Go,la,xt,ol,Fr,ci,Ri);return{lng:Ss,lat:eo,height:Bl}}var oe=class{constructor(fe=50,Ge){this.limit=fe,this.destroy=Ge||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(fe=>{this.delete(fe)}),this.cache={},this.order=[]}get(fe){const Ge=this.cache[fe];return Ge&&(this.deleteOrder(fe),this.appendOrder(fe)),Ge}set(fe,Ge){this.cache[fe]?(this.delete(fe),this.cache[fe]=Ge,this.appendOrder(fe)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[fe]=Ge,this.appendOrder(fe))}delete(fe){const Ge=this.cache[fe];Ge&&(this.deleteCache(fe),this.deleteOrder(fe),this.destroy(Ge,fe))}deleteCache(fe){delete this.cache[fe]}deleteOrder(fe){const Ge=this.order.findIndex(xt=>xt===fe);Ge>=0&&this.order.splice(Ge,1)}appendOrder(fe){this.order.push(fe)}defaultDestroy(fe,Ge){return null}};function _e(fe){if(fe.length===0)throw new Error("max requires at least one data point");let Ge=fe[0];for(let xt=1;xt<fe.length;xt++)fe[xt]>Ge&&(Ge=fe[xt]);return Ge*1}function tt(fe){if(fe.length===0)throw new Error("min requires at least one data point");let Ge=fe[0];for(let xt=1;xt<fe.length;xt++)fe[xt]<Ge&&(Ge=fe[xt]);return Ge*1}function cn(fe){if(fe.length===0)return 0;let Ge=fe[0]*1;for(let xt=1;xt<fe.length;xt++)Ge+=fe[xt]*1;return Ge}function En(fe){if(fe.length===0)throw new Error("mean requires at least one data point");return cn(fe)/fe.length}function re(fe){if(fe.length===0)throw new Error("mean requires at least one data point");if(fe.length<3)return fe[0];fe.sort();let Ge=fe[0],xt=NaN,Rn=0,ur=1;for(let Fr=1;Fr<fe.length+1;Fr++)fe[Fr]!==Ge?(ur>Rn&&(Rn=ur,xt=Ge),ur=1,Ge=fe[Fr]):ur++;return xt*1}var Nr={min:tt,max:_e,mean:En,sum:cn,mode:re};function Di(fe,Ge){return fe.map(xt=>xt[Ge])}function Vi(fe,Ge){return Nr[fe](Ge)}function xo(fe,Ge){Ge===void 0&&(Ge={});var xt=Number(fe[0]),Rn=Number(fe[1]),ur=Number(fe[2]),Fr=Number(fe[3]);if(fe.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var ci=[xt,Rn],Ri=[xt,Fr],Wo=[ur,Fr],Go=[ur,Rn];return(0,ra.yu)([[ci,Go,Wo,Ri,ci]],Ge.properties,{bbox:fe,id:Ge.id})}var yo=L(26729),za=L.n(yo),ba=(fe=>(fe.Realtime="realtime",fe.Overlap="overlap",fe.Replace="replace",fe))(ba||{}),go=(fe=>(fe.Loading="Loading",fe.Loaded="Loaded",fe.Failure="Failure",fe.Cancelled="Cancelled",fe))(go||{}),Ua=0,ja=1,xa=2;function Es(fe){fe.forEach(Ge=>{Ge.isCurrent&&(Ge.isVisible=Ge.isLoaded)})}function $a(fe){fe.forEach(Ge=>{Ge.properties.state=Ua}),fe.forEach(Ge=>{Ge.isCurrent&&!Va(Ge)&&js(Ge)}),fe.forEach(Ge=>{Ge.isVisible=!!(Ge.properties.state&xa)})}function Ea(fe){fe.forEach(xt=>{xt.properties.state=Ua}),fe.forEach(xt=>{xt.isCurrent&&Va(xt)}),fe.slice().sort((xt,Rn)=>xt.z-Rn.z).forEach(xt=>{xt.isVisible=!!(xt.properties.state&xa),xt.children.length&&(xt.isVisible||xt.properties.state&ja)?xt.children.forEach(Rn=>{Rn.properties.state=ja}):xt.isCurrent&&js(xt)})}function Va(fe){for(;fe;){if(fe.isLoaded)return fe.properties.state|=xa,!0;fe=fe.parent}return!1}function js(fe){fe.children.forEach(Ge=>{Ge.isLoaded?Ge.properties.state|=xa:js(Ge)})}var Ql=256,Xs=[-1/0,-1/0,1/0,1/0],cl=.2,af=5,Fh={[ba.Realtime]:Es,[ba.Overlap]:$a,[ba.Replace]:Ea},kc=()=>{};function du(fe,Ge,xt){const Rn=Math.floor((fe+180)/360*Math.pow(2,xt)),ur=Math.floor((1-Math.log(Math.tan(Ge*Math.PI/180)+1/Math.cos(Ge*Math.PI/180))/Math.PI)/2*Math.pow(2,xt));return[Rn,ur]}function Td(fe,Ge,xt){const Rn=fe/Math.pow(2,xt)*360-180,ur=Math.PI-2*Math.PI*Ge/Math.pow(2,xt),Fr=180/Math.PI*Math.atan(.5*(Math.exp(ur)-Math.exp(-ur)));return[Rn,Fr]}var Ad=(fe,Ge,xt)=>{const[Rn,ur]=Td(fe,Ge,xt),[Fr,ci]=Td(fe+1,Ge+1,xt);return[Rn,ci,Fr,ur]};function yf({zoom:fe,latLonBounds:Ge,maxZoom:xt=1/0,minZoom:Rn=0,zoomOffset:ur=0,extent:Fr=Xs}){let ci=Math.ceil(fe)+ur;if(Number.isFinite(Rn)&&ci<Rn)return[];Number.isFinite(xt)&&ci>xt&&(ci=xt);const[Ri,Wo,Go,la]=Ge,ol=[Math.max(Ri,Fr[0]),Math.max(Wo,Fr[1]),Math.min(Go,Fr[2]),Math.min(la,Fr[3])],Al=[],[Ss,eo]=du(ol[0],ol[1],ci),[Bl,yh]=du(ol[2],ol[3],ci);for(let lf=Ss;lf<=Bl;lf++)for(let Fi=yh;Fi<=eo;Fi++)Al.push({x:lf,y:Fi,z:ci});const Bh=(Bl+Ss)/2,qa=(eo+yh)/2,Ls=(lf,Fi)=>Math.abs(lf-Bh)+Math.abs(Fi-qa);return Al.sort((lf,Fi)=>Ls(lf.x,lf.y)-Ls(Fi.x,Fi.y)),Al}var Nf=(fe,Ge,xt,Rn=!0)=>{const ur=Math.pow(2,xt),Fr=ur-1,ci=ur;let Ri=fe;const Wo=Ge;return Rn&&(Ri<0?Ri=Ri+ci:Ri>Fr&&(Ri=Ri%ci)),{warpX:Ri,warpY:Wo}},sf=(fe,Ge,xt)=>new Promise((Rn,ur)=>{var Fr=Wo=>{try{Ri(xt.next(Wo))}catch(Go){ur(Go)}},ci=Wo=>{try{Ri(xt.throw(Wo))}catch(Go){ur(Go)}},Ri=Wo=>Wo.done?Rn(Wo.value):Promise.resolve(Wo.value).then(Fr,ci);Ri((xt=xt.apply(fe,Ge)).next())}),vh=class extends yo.EventEmitter{constructor(fe){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:Ge,y:xt,z:Rn,tileSize:ur,warp:Fr=!0}=fe;this.x=Ge,this.y=xt,this.z=Rn,this.warp=Fr||!0,this.tileSize=ur}get isLoading(){return this.loadStatus===go.Loading}get isLoaded(){return this.loadStatus===go.Loaded}get isFailure(){return this.loadStatus===go.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===go.Cancelled}get isDone(){return[go.Loaded,go.Cancelled,go.Failure].includes(this.loadStatus)}get bounds(){return Ad(this.x,this.y,this.z)}get bboxPolygon(){const[fe,Ge,xt,Rn]=this.bounds,ur=[(xt-fe)/2,(Rn-Ge)/2];return xo(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:ur,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(fe){return sf(this,arguments,function*({getData:Ge,onLoad:xt,onError:Rn}){this.loadDataId++;const ur=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=go.Loading;let Fr=null,ci;try{const{x:Ri,y:Wo,z:Go,bounds:la,tileSize:ol,warp:Al}=this,{warpX:Ss,warpY:eo}=Nf(Ri,Wo,Go,Al),{signal:Bl}=this.abortController;Fr=yield Ge({x:Ss,y:eo,z:Go,bounds:la,tileSize:ol,signal:Bl,warp:Al},this)}catch(Ri){ci=Ri}if(ur===this.loadDataId&&!(this.isCancelled&&!Fr)){if(ci||!Fr){this.loadStatus=go.Failure,Rn(ci,this);return}this.loadStatus=go.Loaded,this.data=Fr,xt(this)}})}reloadData(fe){this.isLoading&&this.abortLoad(),this.loadData(fe)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=go.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},mh=(fe,Ge)=>{const xt=Eu(fe),Rn=Jc(xt,Ge),ur=360*3-180,Fr=85.0511287798065;return[Math.max(Rn[0][0],-ur),Math.max(Rn[0][1],-Fr),Math.min(Rn[1][0],ur),Math.min(Rn[1][1],Fr)]},Ff=(fe,Ge)=>{const xt=Eu(fe),Rn=Eu(Ge);return cu(xt,Rn)},f0=Object.defineProperty,rp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,_f=Object.getOwnPropertySymbols,h0=Object.prototype.hasOwnProperty,ip=Object.prototype.propertyIsEnumerable,Cd=(fe,Ge,xt)=>Ge in fe?f0(fe,Ge,{enumerable:!0,configurable:!0,writable:!0,value:xt}):fe[Ge]=xt,bf=(fe,Ge)=>{for(var xt in Ge||(Ge={}))h0.call(Ge,xt)&&Cd(fe,xt,Ge[xt]);if(_f)for(var xt of _f(Ge))ip.call(Ge,xt)&&Cd(fe,xt,Ge[xt]);return fe},Vp=(fe,Ge)=>rp(fe,jp(Ge)),{throttle:gh}=Kt,op=(fe=>(fe.TilesLoadStart="tiles-load-start",fe.TileLoaded="tile-loaded",fe.TileError="tile-error",fe.TileUnload="tile-unload",fe.TileUpdate="tile-update",fe.TilesLoadFinished="tiles-load-finished",fe))(op||{}),Yf=class extends za(){constructor(fe){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=gh((Ge,xt)=>{this.update(Ge,xt)},16),this.onTileLoad=Ge=>{this.emit("tile-loaded",Ge),this.updateTileVisible(),this.loadFinished()},this.onTileError=(Ge,xt)=>{this.emit("tile-error",{error:Ge,tile:xt}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=Ge=>{this.emit("tile-unload",Ge),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Xs,getTileData:kc,warp:!0,updateStrategy:ba.Replace},this.updateOptions(fe)}get isLoaded(){return this.currentTiles.every(fe=>fe.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((Ge,xt)=>Ge.z-xt.z)}updateOptions(fe){const Ge=fe.minZoom===void 0?this.options.minZoom:Math.ceil(fe.minZoom),xt=fe.maxZoom===void 0?this.options.maxZoom:Math.floor(fe.maxZoom);this.options=Vp(bf(bf({},this.options),fe),{minZoom:Ge,maxZoom:xt})}update(fe,Ge){const xt=Math.max(0,Math.ceil(fe));if(this.lastViewStates&&this.lastViewStates.zoom===xt&&Ff(this.lastViewStates.latLonBoundsBuffer,Ge))return;const Rn=mh(Ge,cl);this.lastViewStates={zoom:xt,latLonBounds:Ge,latLonBoundsBuffer:Rn},this.currentZoom=xt;let ur=!1;const Fr=this.getTileIndices(xt,Rn).filter(ci=>this.options.warp||ci.x>=0&&ci.x<Math.pow(2,xt));this.emit("tiles-load-start"),this.currentTiles=Fr.map(({x:ci,y:Ri,z:Wo})=>{let Go=this.getTile(ci,Ri,Wo);return Go?(((Go==null?void 0:Go.isFailure)||(Go==null?void 0:Go.isCancelled))&&Go.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Go):(Go=this.createTile(ci,Ri,Wo),ur=!0,Go)}),ur&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[fe,Ge]of this.cacheTiles){if(!this.currentTiles.includes(Ge)){this.cacheTiles.delete(fe),this.onTileUnload(Ge);return}this.onTileUnload(Ge),Ge.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(fe,Ge,xt){const Rn=this.cacheTiles.get(`${Ge},${xt},${fe}`);Rn&&(this.onTileUnload(Rn),Rn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(fe,Ge,xt){const Rn=this.getTileByLngLat(fe,Ge,xt);Rn&&this.reloadTileById(Rn.z,Rn.x,Rn.y)}reloadTileByExtent(fe,Ge){this.getTileIndices(Ge,fe).forEach(Rn=>{this.reloadTileById(Rn.z,Rn.x,Rn.y)})}pruneRequests(){const fe=[];for(const Ge of this.cacheTiles.values())Ge.isLoading&&!Ge.isCurrent&&!Ge.isVisible&&fe.push(Ge);for(;fe.length>0;)fe.shift().abortLoad()}getTileByLngLat(fe,Ge,xt){const{zoomOffset:Rn}=this.options,ur=Math.ceil(xt)+Rn,Fr=du(fe,Ge,ur);return this.tiles.filter(Ri=>Ri.key===`${Fr[0]}_${Fr[1]}_${ur}`)[0]}getTileExtent(fe,Ge){return this.getTileIndices(Ge,fe)}getTileByZXY(fe,Ge,xt){return this.tiles.filter(ur=>ur.key===`${Ge}_${xt}_${fe}`)[0]}clear(){for(const fe of this.cacheTiles.values())fe.isLoading?fe.abortLoad():this.onTileUnload(fe);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const fe=this.options.updateStrategy,Ge=new Map;for(const ur of this.cacheTiles.values())Ge.set(ur.key,ur.isVisible),ur.isCurrent=!1,ur.isVisible=!1;for(const ur of this.currentTiles)ur.isCurrent=!0,ur.isVisible=!0;const xt=Array.from(this.cacheTiles.values());typeof fe=="function"?fe(xt):Fh[fe](xt);let Rn=!1;Array.from(this.cacheTiles.values()).forEach(ur=>{ur.isVisible!==Ge.get(ur.key)?(ur.isVisibleChange=!0,Rn=!0):ur.isVisibleChange=!1}),Rn&&this.emit("tile-update")}getTileIndices(fe,Ge){const{tileSize:xt,extent:Rn,zoomOffset:ur}=this.options,Fr=Math.floor(this.options.maxZoom),ci=Math.ceil(this.options.minZoom);return yf({maxZoom:Fr,minZoom:ci,zoomOffset:ur,tileSize:xt,zoom:fe,latLonBounds:Ge,extent:Rn})}getTileId(fe,Ge,xt){return`${fe},${Ge},${xt}`}loadFinished(){const fe=!this.currentTiles.some(Ge=>!Ge.isDone);return fe&&this.emit("tiles-load-finished"),fe}getTile(fe,Ge,xt){const Rn=this.getTileId(fe,Ge,xt);return this.cacheTiles.get(Rn)}createTile(fe,Ge,xt){const Rn=this.getTileId(fe,Ge,xt),ur=new vh({x:fe,y:Ge,z:xt,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Rn,ur),ur.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),ur}resizeCacheTiles(){const fe=af*this.currentTiles.length;if(this.cacheTiles.size>fe){for(const[xt,Rn]of this.cacheTiles)if(!Rn.isVisible&&!this.currentTiles.includes(Rn)&&(this.cacheTiles.delete(xt),this.onTileUnload(Rn)),this.cacheTiles.size<=fe)break}this.rebuildTileTree()}rebuildTileTree(){for(const fe of this.cacheTiles.values())fe.parent=null,fe.children.length=0;for(const fe of this.cacheTiles.values()){const Ge=this.getNearestAncestor(fe.x,fe.y,fe.z);fe.parent=Ge,Ge!=null&&Ge.children&&Ge.children.push(fe)}}getNearestAncestor(fe,Ge,xt){for(;xt>this.options.minZoom;){fe=Math.floor(fe/2),Ge=Math.floor(Ge/2),xt=xt-1;const Rn=this.getTile(fe,Ge,xt);if(Rn)return Rn}return null}};function Ks(fe){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(fe)}function Od(fe){const Ge=[];let xt=/\{([a-z])-([a-z])\}/.exec(fe);if(xt){const Rn=xt[1].charCodeAt(0),ur=xt[2].charCodeAt(0);let Fr;for(Fr=Rn;Fr<=ur;++Fr)Ge.push(fe.replace(xt[0],String.fromCharCode(Fr)));return Ge}if(xt=/\{(\d+)-(\d+)\}/.exec(fe),xt){const Rn=parseInt(xt[2],10);for(let ur=parseInt(xt[1],10);ur<=Rn;ur++)Ge.push(fe.replace(xt[0],ur.toString()));return Ge}return Ge.push(fe),Ge}function xf(fe,Ge){if(!fe||!fe.length)throw new Error("url is not allowed to be empty");const{x:xt,y:Rn,z:ur}=Ge,Fr=Od(fe),ci=Math.abs(xt+Rn)%Fr.length;return(Re(Fr[ci])?`${Fr[ci]}/{z}/{x}/{y}`:Fr[ci]).replace(/\{x\}/g,xt.toString()).replace(/\{y\}/g,Rn.toString()).replace(/\{z\}/g,ur.toString()).replace(/\{bbox\}/g,Ad(xt,Rn,ur).join(",")).replace(/\{-y\}/g,(Math.pow(2,ur)-Rn-1).toString())}function $f(fe,Ge){const{x:xt,y:Rn,z:ur,layer:Fr,version:ci="1.0.0",style:Ri="default",format:Wo,service:Go="WMTS",tileMatrixset:la}=Ge,ol=Od(fe),Al=Math.abs(xt+Rn)%ol.length;return`${ol[Al]}&SERVICE=${Go}&REQUEST=GetTile&VERSION=${ci}&LAYER=${Fr}&STYLE=${Ri}&TILEMATRIXSET=${la}&FORMAT=${Wo}&TILECOL=${xt}&TILEROW=${Rn}&TILEMATRIX=${ur}`}function La(fe,Ge){return fe==null?Ge:fe}},48271:function(gt,G,L){"use strict";L.d(G,{oT:function(){return da},Ie:function(){return T_},dW:function(){return vy},GI:function(){return SO},xs:function(){return lM}});var q={},W={},E=a=>W[a],de=(a,o)=>{W[a]=o},ee=a=>q[a],ue=(a,o)=>{q[a]=o},ce={},xe={},ae=34,We=10,te=13;function me(a){return new Function("d","return {"+a.map(function(o,f){return JSON.stringify(o)+": d["+f+'] || ""'}).join(",")+"}")}function Re(a,o){var f=me(a);return function(m,w){return o(f(m),w,a)}}function $(a){var o=Object.create(null),f=[];return a.forEach(function(m){for(var w in m)w in o||f.push(o[w]=w)}),f}function le(a,o){var f=a+"",m=f.length;return m<o?new Array(o-m+1).join(0)+f:f}function K(a){return a<0?"-"+le(-a,6):a>9999?"+"+le(a,6):le(a,4)}function we(a){var o=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),w=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":K(a.getUTCFullYear(),4)+"-"+le(a.getUTCMonth()+1,2)+"-"+le(a.getUTCDate(),2)+(w?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"."+le(w,3)+"Z":m?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"Z":f||o?"T"+le(o,2)+":"+le(f,2)+"Z":"")}function et(a){var o=new RegExp('["'+a+`
\r]`),f=a.charCodeAt(0);function m(Ce,He){var Ot,nn,Bn=w(Ce,function(sr,xr){if(Ot)return Ot(sr,xr-1);nn=sr,Ot=He?Re(sr,He):me(sr)});return Bn.columns=nn||[],Bn}function w(Ce,He){var Ot=[],nn=Ce.length,Bn=0,sr=0,xr,fr=nn<=0,Yr=!1;Ce.charCodeAt(nn-1)===We&&--nn,Ce.charCodeAt(nn-1)===te&&--nn;function Pi(){if(fr)return xe;if(Yr)return Yr=!1,ce;var ao,Zr=Bn,Qi;if(Ce.charCodeAt(Zr)===ae){for(;Bn++<nn&&Ce.charCodeAt(Bn)!==ae||Ce.charCodeAt(++Bn)===ae;);return(ao=Bn)>=nn?fr=!0:(Qi=Ce.charCodeAt(Bn++))===We?Yr=!0:Qi===te&&(Yr=!0,Ce.charCodeAt(Bn)===We&&++Bn),Ce.slice(Zr+1,ao-1).replace(/""/g,'"')}for(;Bn<nn;){if((Qi=Ce.charCodeAt(ao=Bn++))===We)Yr=!0;else if(Qi===te)Yr=!0,Ce.charCodeAt(Bn)===We&&++Bn;else if(Qi!==f)continue;return Ce.slice(Zr,ao)}return fr=!0,Ce.slice(Zr,nn)}for(;(xr=Pi())!==xe;){for(var Co=[];xr!==ce&&xr!==xe;)Co.push(xr),xr=Pi();He&&(Co=He(Co,sr++))==null||Ot.push(Co)}return Ot}function C(Ce,He){return Ce.map(function(Ot){return He.map(function(nn){return Ee(Ot[nn])}).join(a)})}function D(Ce,He){return He==null&&(He=$(Ce)),[He.map(Ee).join(a)].concat(C(Ce,He)).join(`
`)}function B(Ce,He){return He==null&&(He=$(Ce)),C(Ce,He).join(`
`)}function V(Ce){return Ce.map(ie).join(`
`)}function ie(Ce){return Ce.map(Ee).join(a)}function Ee(Ce){return Ce==null?"":Ce instanceof Date?we(Ce):o.test(Ce+="")?'"'+Ce.replace(/"/g,'""')+'"':Ce}return{parse:m,parseRows:w,format:D,formatBody:B,formatRows:V,formatRow:ie,formatValue:Ee}}var Je=et(","),wt=Je.parse,pt=Je.parseRows,_t=Je.format,Me=Je.formatBody,Ae=Je.formatRows,je=Je.formatRow,Ze=Je.formatValue,lt=L(1449);function en(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Le(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function St(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return St(a[0]);throw new Error("coordinates must only contain numbers")}function Oe(a,o,f){if(!o||!f)throw new Error("type and name required");if(!a||a.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.type)}function nt(a,o,f){if(!a)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!a.geometry||a.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.geometry.type)}function Ke(a,o,f){if(!a)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,w=a.features;m<w.length;m++){var C=w[m];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+C.geometry.type)}}function Xe(a){return a.type==="Feature"?a.geometry:a}function Rt(a,o){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var bt=L(39034),Ie=L(66366),Gt=L(38163),mn=L.n(Gt);function Ln(a,o){return a.map(f=>f[o]*1)}function qn(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function rr(a){return Array.isArray(a)?a.length===0?!1:!!qn(a[0]):!1}function Ft(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function Jt(a){const o=Object.isFrozen(a)?Ie.lodashUtil.cloneDeep(a):a;return mn()(o,!0),o}function un(a,o){return a||[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}var Vn=Object.defineProperty,on=Object.defineProperties,Dt=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,jt=(a,o,f)=>o in a?Vn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,U=(a,o)=>{for(var f in o||(o={}))ze.call(o,f)&&jt(a,f,o[f]);if(Vt)for(var f of Vt(o))rt.call(o,f)&&jt(a,f,o[f]);return a},pe=(a,o)=>on(a,Dt(o));function ct(a,o){const{x:f,y:m,x1:w,y1:C,coordinates:D,geometry:B}=o,V=[];if(!Array.isArray(a))return{dataArray:[]};if(B)return a.filter(ie=>ie[B]&&ie[B].type&&ie[B].coordinates&&ie[B].coordinates.length>0).forEach((ie,Ee)=>{const Ce=Jt(ie[B]);(0,bt.nG)(Ce,He=>{const Ot=Le(He),nn=pe(U({},ie),{_id:Ee,coordinates:Ot});V.push(nn)})}),{dataArray:V};for(let ie=0;ie<a.length;ie++){const Ee=a[ie];let Ce=[];if(D){let Ot="Polygon";Array.isArray(D[0])||(Ot="Point"),Array.isArray(D[0])&&!Array.isArray(D[0][0])&&(Ot="LineString"),Ce=Jt({type:Ot,coordinates:Ee[D]}).coordinates}else if(f&&m&&w&&C){const Ot=[parseFloat(Ee[f]),parseFloat(Ee[m])],nn=[parseFloat(Ee[w]),parseFloat(Ee[C])];Ce=[Ot,nn]}else f&&m&&(Ce=[parseFloat(Ee[f]),parseFloat(Ee[m])]);const He=pe(U({},Ee),{_id:ie,coordinates:Ce});V.push(He)}return{dataArray:V}}function he(a,o){const f=wt(a);return ct(f,o)}var $t=Object.defineProperty,sn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,Yn=Object.prototype.propertyIsEnumerable,fn=(a,o,f)=>o in a?$t(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,vt=(a,o)=>{for(var f in o||(o={}))Wn.call(o,f)&&fn(a,f,o[f]);if(Dn)for(var f of Dn(o))Yn.call(o,f)&&fn(a,f,o[f]);return a},Pt=(a,o)=>sn(a,pn(o));function An(a){const o=a.toString();let f=5381,m=o.length;for(;m;)f=f*33^o.charCodeAt(--m);return f>>>0}function Pn(a,o){return o===void 0?null:typeof(a.properties[o]*1)=="number"?a.properties[o]*1:a.properties&&a.properties[o]?An(a.properties[o]+"")%1000019:null}function Xn(a,o){const f=[],m={};return a.features?(a.features=a.features.filter(w=>{const C=w.geometry;return w!=null&&C&&C.type&&C.coordinates&&C.coordinates.length>0}),a=Jt(a),a.features.length===0?{dataArray:[],featureKeys:m}:((0,bt.nG)(a,(w,C)=>{let D=Pn(w,o==null?void 0:o.featureId);D===null&&(D=C);const B=D,V=Le(w),ie=Pt(vt({},w.properties),{coordinates:V,_id:B});f.push(ie)}),{dataArray:f,featureKeys:m})):(a.features=[],{dataArray:[]})}function dt(a,o,f,m){for(var w=m,C=f-o>>1,D=f-o,B,V=a[o],ie=a[o+1],Ee=a[f],Ce=a[f+1],He=o+3;He<f;He+=3){var Ot=Se(a[He],a[He+1],V,ie,Ee,Ce);if(Ot>w)B=He,w=Ot;else if(Ot===w){var nn=Math.abs(He-C);nn<D&&(B=He,D=nn)}}w>m&&(B-o>3&&dt(a,o,B,m),a[B+2]=w,f-B>3&&dt(a,B,f,m))}function Se(a,o,f,m,w,C){var D=w-f,B=C-m;if(D!==0||B!==0){var V=((a-f)*D+(o-m)*B)/(D*D+B*B);V>1?(f=w,m=C):V>0&&(f+=D*V,m+=B*V)}return D=a-f,B=o-m,D*D+B*B}function Be(a,o,f,m){var w={id:typeof a=="undefined"?null:a,type:o,geometry:f,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return st(w),w}function st(a){var o=a.geometry,f=a.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")Lt(a,o);else if(f==="Polygon"||f==="MultiLineString")for(var m=0;m<o.length;m++)Lt(a,o[m]);else if(f==="MultiPolygon")for(m=0;m<o.length;m++)for(var w=0;w<o[m].length;w++)Lt(a,o[m][w])}function Lt(a,o){for(var f=0;f<o.length;f+=3)a.minX=Math.min(a.minX,o[f]),a.minY=Math.min(a.minY,o[f+1]),a.maxX=Math.max(a.maxX,o[f]),a.maxY=Math.max(a.maxY,o[f+1])}function It(a,o){var f=[];if(a.type==="FeatureCollection")for(var m=0;m<a.features.length;m++)wn(f,a.features[m],o,m);else a.type==="Feature"?wn(f,a,o):wn(f,{geometry:a},o);return f}function wn(a,o,f,m){if(o.geometry){var w=o.geometry.coordinates,C=o.geometry.type,D=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),B=[],V=o.id;if(f.promoteId?V=o.properties[f.promoteId]:f.generateId&&(V=m||0),C==="Point")Kn(w,B);else if(C==="MultiPoint")for(var ie=0;ie<w.length;ie++)Kn(w[ie],B);else if(C==="LineString")_r(w,B,D,!1);else if(C==="MultiLineString")if(f.lineMetrics){for(ie=0;ie<w.length;ie++)B=[],_r(w[ie],B,D,!1),a.push(Be(V,"LineString",B,o.properties));return}else Jn(w,B,D,!1);else if(C==="Polygon")Jn(w,B,D,!0);else if(C==="MultiPolygon")for(ie=0;ie<w.length;ie++){var Ee=[];Jn(w[ie],Ee,D,!0),B.push(Ee)}else if(C==="GeometryCollection"){for(ie=0;ie<o.geometry.geometries.length;ie++)wn(a,{id:V,geometry:o.geometry.geometries[ie],properties:o.properties},f,m);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Be(V,C,B,o.properties))}}function Kn(a,o){o.push(Pe(a[0])),o.push(Te(a[1])),o.push(0)}function _r(a,o,f,m){for(var w,C,D=0,B=0;B<a.length;B++){var V=Pe(a[B][0]),ie=Te(a[B][1]);o.push(V),o.push(ie),o.push(0),B>0&&(m?D+=(w*ie-V*C)/2:D+=Math.sqrt(Math.pow(V-w,2)+Math.pow(ie-C,2))),w=V,C=ie}var Ee=o.length-3;o[2]=1,dt(o,0,Ee,f),o[Ee+2]=1,o.size=Math.abs(D),o.start=0,o.end=o.size}function Jn(a,o,f,m){for(var w=0;w<a.length;w++){var C=[];_r(a[w],C,f,m),o.push(C)}}function Pe(a){return a/360+.5}function Te(a){var o=Math.sin(a*Math.PI/180),f=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return f<0?0:f>1?1:f}function ke(a,o,f,m,w,C,D,B){if(f/=o,m/=o,C>=f&&D<m)return a;if(D<f||C>=m)return null;for(var V=[],ie=0;ie<a.length;ie++){var Ee=a[ie],Ce=Ee.geometry,He=Ee.type,Ot=w===0?Ee.minX:Ee.minY,nn=w===0?Ee.maxX:Ee.maxY;if(Ot>=f&&nn<m){V.push(Ee);continue}else if(nn<f||Ot>=m)continue;var Bn=[];if(He==="Point"||He==="MultiPoint")it(Ce,Bn,f,m,w);else if(He==="LineString")At(Ce,Bn,f,m,w,!1,B.lineMetrics);else if(He==="MultiLineString")hn(Ce,Bn,f,m,w,!1);else if(He==="Polygon")hn(Ce,Bn,f,m,w,!0);else if(He==="MultiPolygon")for(var sr=0;sr<Ce.length;sr++){var xr=[];hn(Ce[sr],xr,f,m,w,!0),xr.length&&Bn.push(xr)}if(Bn.length){if(B.lineMetrics&&He==="LineString"){for(sr=0;sr<Bn.length;sr++)V.push(Be(Ee.id,He,Bn[sr],Ee.tags));continue}(He==="LineString"||He==="MultiLineString")&&(Bn.length===1?(He="LineString",Bn=Bn[0]):He="MultiLineString"),(He==="Point"||He==="MultiPoint")&&(He=Bn.length===3?"Point":"MultiPoint"),V.push(Be(Ee.id,He,Bn,Ee.tags))}}return V.length?V:null}function it(a,o,f,m,w){for(var C=0;C<a.length;C+=3){var D=a[C+w];D>=f&&D<=m&&(o.push(a[C]),o.push(a[C+1]),o.push(a[C+2]))}}function At(a,o,f,m,w,C,D){for(var B=Yt(a),V=w===0?Kt:er,ie=a.start,Ee,Ce,He=0;He<a.length-3;He+=3){var Ot=a[He],nn=a[He+1],Bn=a[He+2],sr=a[He+3],xr=a[He+4],fr=w===0?Ot:nn,Yr=w===0?sr:xr,Pi=!1;D&&(Ee=Math.sqrt(Math.pow(Ot-sr,2)+Math.pow(nn-xr,2))),fr<f?Yr>f&&(Ce=V(B,Ot,nn,sr,xr,f),D&&(B.start=ie+Ee*Ce)):fr>m?Yr<m&&(Ce=V(B,Ot,nn,sr,xr,m),D&&(B.start=ie+Ee*Ce)):Et(B,Ot,nn,Bn),Yr<f&&fr>=f&&(Ce=V(B,Ot,nn,sr,xr,f),Pi=!0),Yr>m&&fr<=m&&(Ce=V(B,Ot,nn,sr,xr,m),Pi=!0),!C&&Pi&&(D&&(B.end=ie+Ee*Ce),o.push(B),B=Yt(a)),D&&(ie+=Ee)}var Co=a.length-3;Ot=a[Co],nn=a[Co+1],Bn=a[Co+2],fr=w===0?Ot:nn,fr>=f&&fr<=m&&Et(B,Ot,nn,Bn),Co=B.length-3,C&&Co>=3&&(B[Co]!==B[0]||B[Co+1]!==B[1])&&Et(B,B[0],B[1],B[2]),B.length&&o.push(B)}function Yt(a){var o=[];return o.size=a.size,o.start=a.start,o.end=a.end,o}function hn(a,o,f,m,w,C){for(var D=0;D<a.length;D++)At(a[D],o,f,m,w,C,!1)}function Et(a,o,f,m){a.push(o),a.push(f),a.push(m)}function Kt(a,o,f,m,w,C){var D=(C-o)/(m-o);return a.push(C),a.push(f+(w-f)*D),a.push(1),D}function er(a,o,f,m,w,C){var D=(C-f)/(w-f);return a.push(o+(m-o)*D),a.push(C),a.push(1),D}function br(a,o){var f=o.buffer/o.extent,m=a,w=ke(a,1,-1-f,f,0,-1,2,o),C=ke(a,1,1-f,2+f,0,-1,2,o);return(w||C)&&(m=ke(a,1,-f,1+f,0,-1,2,o)||[],w&&(m=Vr(w,1).concat(m)),C&&(m=m.concat(Vr(C,-1)))),m}function Vr(a,o){for(var f=[],m=0;m<a.length;m++){var w=a[m],C=w.type,D;if(C==="Point"||C==="MultiPoint"||C==="LineString")D=vr(w.geometry,o);else if(C==="MultiLineString"||C==="Polygon"){D=[];for(var B=0;B<w.geometry.length;B++)D.push(vr(w.geometry[B],o))}else if(C==="MultiPolygon")for(D=[],B=0;B<w.geometry.length;B++){for(var V=[],ie=0;ie<w.geometry[B].length;ie++)V.push(vr(w.geometry[B][ie],o));D.push(V)}f.push(Be(w.id,C,D,w.tags))}return f}function vr(a,o){var f=[];f.size=a.size,a.start!==void 0&&(f.start=a.start,f.end=a.end);for(var m=0;m<a.length;m+=3)f.push(a[m]+o,a[m+1],a[m+2]);return f}function Ur(a,o){if(a.transformed)return a;var f=1<<a.z,m=a.x,w=a.y,C,D,B;for(C=0;C<a.features.length;C++){var V=a.features[C],ie=V.geometry,Ee=V.type;if(V.geometry=[],Ee===1)for(D=0;D<ie.length;D+=2)V.geometry.push(_i(ie[D],ie[D+1],o,f,m,w));else for(D=0;D<ie.length;D++){var Ce=[];for(B=0;B<ie[D].length;B+=2)Ce.push(_i(ie[D][B],ie[D][B+1],o,f,m,w));V.geometry.push(Ce)}}return a.transformed=!0,a}function _i(a,o,f,m,w,C){return[Math.round(f*(a*m-w)),Math.round(f*(o*m-C))]}function Ai(a,o,f,m,w){for(var C=o===w.maxZoom?0:w.tolerance/((1<<o)*w.extent),D={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:m,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},B=0;B<a.length;B++){D.numFeatures++,wr(D,a[B],C,w);var V=a[B].minX,ie=a[B].minY,Ee=a[B].maxX,Ce=a[B].maxY;V<D.minX&&(D.minX=V),ie<D.minY&&(D.minY=ie),Ee>D.maxX&&(D.maxX=Ee),Ce>D.maxY&&(D.maxY=Ce)}return D}function wr(a,o,f,m){var w=o.geometry,C=o.type,D=[];if(C==="Point"||C==="MultiPoint")for(var B=0;B<w.length;B+=3)D.push(w[B]),D.push(w[B+1]),a.numPoints++,a.numSimplified++;else if(C==="LineString")Ei(D,w,a,f,!1,!1);else if(C==="MultiLineString"||C==="Polygon")for(B=0;B<w.length;B++)Ei(D,w[B],a,f,C==="Polygon",B===0);else if(C==="MultiPolygon")for(var V=0;V<w.length;V++){var ie=w[V];for(B=0;B<ie.length;B++)Ei(D,ie[B],a,f,!0,B===0)}if(D.length){var Ee=o.tags||null;if(C==="LineString"&&m.lineMetrics){Ee={};for(var Ce in o.tags)Ee[Ce]=o.tags[Ce];Ee.mapbox_clip_start=w.start/w.size,Ee.mapbox_clip_end=w.end/w.size}var He={geometry:D,type:C==="Polygon"||C==="MultiPolygon"?3:C==="LineString"||C==="MultiLineString"?2:1,tags:Ee};o.id!==null&&(He.id=o.id),a.features.push(He)}}function Ei(a,o,f,m,w,C){var D=m*m;if(m>0&&o.size<(w?D:m)){f.numPoints+=o.length/3;return}for(var B=[],V=0;V<o.length;V+=3)(m===0||o[V+2]>D)&&(f.numSimplified++,B.push(o[V]),B.push(o[V+1])),f.numPoints++;w&&hi(B,C),a.push(B)}function hi(a,o){for(var f=0,m=0,w=a.length,C=w-2;m<w;C=m,m+=2)f+=(a[m]-a[C])*(a[m+1]+a[C+1]);if(f>0===o)for(m=0,w=a.length;m<w/2;m+=2){var D=a[m],B=a[m+1];a[m]=a[w-2-m],a[m+1]=a[w-1-m],a[w-2-m]=D,a[w-1-m]=B}}function ai(a,o){return new Io(a,o)}function Io(a,o){o=this.options=Qo(Object.create(this.options),o);var f=o.debug;if(f&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var m=It(a,o);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),m=br(m,o),m.length&&this.splitTile(m,0,0,0),f&&(m.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Io.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Io.prototype.splitTile=function(a,o,f,m,w,C,D){for(var B=[a,o,f,m],V=this.options,ie=V.debug;B.length;){m=B.pop(),f=B.pop(),o=B.pop(),a=B.pop();var Ee=1<<o,Ce=xi(o,f,m),He=this.tiles[Ce];if(!He&&(ie>1&&console.time("creation"),He=this.tiles[Ce]=Ai(a,o,f,m,V),this.tileCoords.push({z:o,x:f,y:m}),ie)){ie>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,f,m,He.numFeatures,He.numPoints,He.numSimplified),console.timeEnd("creation"));var Ot="z"+o;this.stats[Ot]=(this.stats[Ot]||0)+1,this.total++}if(He.source=a,w){if(o===V.maxZoom||o===w)continue;var nn=1<<w-o;if(f!==Math.floor(C/nn)||m!==Math.floor(D/nn))continue}else if(o===V.indexMaxZoom||He.numPoints<=V.indexMaxPoints)continue;if(He.source=null,a.length!==0){ie>1&&console.time("clipping");var Bn=.5*V.buffer/V.extent,sr=.5-Bn,xr=.5+Bn,fr=1+Bn,Yr,Pi,Co,ao,Zr,Qi;Yr=Pi=Co=ao=null,Zr=ke(a,Ee,f-Bn,f+xr,0,He.minX,He.maxX,V),Qi=ke(a,Ee,f+sr,f+fr,0,He.minX,He.maxX,V),a=null,Zr&&(Yr=ke(Zr,Ee,m-Bn,m+xr,1,He.minY,He.maxY,V),Pi=ke(Zr,Ee,m+sr,m+fr,1,He.minY,He.maxY,V),Zr=null),Qi&&(Co=ke(Qi,Ee,m-Bn,m+xr,1,He.minY,He.maxY,V),ao=ke(Qi,Ee,m+sr,m+fr,1,He.minY,He.maxY,V),Qi=null),ie>1&&console.timeEnd("clipping"),B.push(Yr||[],o+1,f*2,m*2),B.push(Pi||[],o+1,f*2,m*2+1),B.push(Co||[],o+1,f*2+1,m*2),B.push(ao||[],o+1,f*2+1,m*2+1)}}},Io.prototype.getTile=function(a,o,f){var m=this.options,w=m.extent,C=m.debug;if(a<0||a>24)return null;var D=1<<a;o=(o%D+D)%D;var B=xi(a,o,f);if(this.tiles[B])return Ur(this.tiles[B],w);C>1&&console.log("drilling down to z%d-%d-%d",a,o,f);for(var V=a,ie=o,Ee=f,Ce;!Ce&&V>0;)V--,ie=Math.floor(ie/2),Ee=Math.floor(Ee/2),Ce=this.tiles[xi(V,ie,Ee)];return!Ce||!Ce.source?null:(C>1&&console.log("found parent tile z%d-%d-%d",V,ie,Ee),C>1&&console.time("drilling down"),this.splitTile(Ce.source,V,ie,Ee,a,o,f),C>1&&console.timeEnd("drilling down"),this.tiles[B]?Ur(this.tiles[B],w):null)};function xi(a,o,f){return((1<<a)*f+o)*32+a}function Qo(a,o){for(var f in o)a[f]=o[f];return a}var ga=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},Po=Object.defineProperty,$o=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,Nn=(a,o,f)=>o in a?Po(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Fn=(a,o)=>{for(var f in o||(o={}))Ut.call(o,f)&&Nn(a,f,o[f]);if(ot)for(var f of ot(o))ln.call(o,f)&&Nn(a,f,o[f]);return a},gn=(a,o)=>$o(a,Fe(o)),Cn=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),pr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function hr(a){let o=0;for(let f=0,m=a.length,w=m-1,C,D;f<m;w=f++)C=a[f],D=a[w],o+=(D.x-C.x)*(C.y+D.y);return o}function ei(a){const o=a.length;if(o<=1)return[a];const f=[];let m,w;for(let C=0;C<o;C++){const D=hr(a[C]);D!==0&&(w===void 0&&(w=D<0),w===D<0?(m&&f.push(m),m=[a[C]]):m.push(a[C]))}return m&&f.push(m),f}var ji=["Unknown","Point","LineString","Polygon"];function Ji(a,o,f,m,w){let C=w.geometry;const D=w.type,B=w.tags,V=w.id,ie=a*Math.pow(2,m),Ee=a*o,Ce=a*f;let He=ji[D],Ot,nn;function Bn(xr){for(let fr=0;fr<xr.length;fr++){const Yr=xr[fr];if(Yr[3])break;const Pi=180-(Yr[1]+Ce)*360/ie,Co=(Yr[0]+Ee)*360/ie-180,ao=360/Math.PI*Math.atan(Math.exp(Pi*Math.PI/180))-90;xr[fr]=[Co,ao,0,1]}}switch(D){case 1:const xr=[];for(Ot=0;Ot<C.length;Ot++)xr[Ot]=C[Ot][0];C=xr,Bn(C);break;case 2:for(Ot=0;Ot<C.length;Ot++)Bn(C[Ot]);break;case 3:for(C=ei(C),Ot=0;Ot<C.length;Ot++)for(nn=0;nn<C[Ot].length;nn++)Bn(C[Ot][nn]);break}return C.length===1?C=C[0]:He="Multi"+He,{type:"Feature",geometry:{type:He,coordinates:C},properties:B,id:V,tileOrigin:[0,0],coord:""}}var ti=(a,o,f,m)=>Cn(void 0,null,function*(){return new Promise(w=>{const C=o.getTile(a.z,a.x,a.y),B={layers:{defaultLayer:{features:C?C.features.map(ie=>Ji(m,f.x,f.y,f.z,ie)):[]}}},V=new ga(B,a.x,a.y,a.z);w(V)})});function Gi(a){const o={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?o:Fn(Fn({},o),a.geojsonvtOptions)}function Ni(a,o){const f=Gi(o),m=f.extent||4096,w=ai(a,f),C=(B,V)=>ti(V,w,B,m),D=gn(Fn(Fn({},pr),o),{getTileData:C});return{data:a,dataArray:[],tilesetOptions:D,isTile:!0}}var Gr=Object.defineProperty,So=Object.defineProperties,fi=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,Wi=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,Ao=(a,o,f)=>o in a?Gr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,xs=(a,o)=>{for(var f in o||(o={}))Wi.call(o,f)&&Ao(a,f,o[f]);if(Eo)for(var f of Eo(o))io.call(o,f)&&Ao(a,f,o[f]);return a},ya=(a,o)=>So(a,fi(o));function ra(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,requestParameters:w={}}=o,C=new Promise(V=>{a instanceof HTMLImageElement||(0,Ie.fg)(a)?V([a]):gs(a,w,ie=>{V(ie)})}),D=un(m,f);return{originData:a,images:C,_id:1,dataArray:[{_id:0,coordinates:D}]}}function gs(a,o,f){const m=[];if(typeof a=="string")(0,Ie.gJ)(ya(xs({},o),{url:a}),(w,C)=>{C&&(m.push(C),f(m))});else{const w=a.length;let C=0;a.forEach(D=>{(0,Ie.gJ)(ya(xs({},o),{url:D}),(B,V)=>{C++,V&&m.push(V),C===w&&f(m)})})}return ra}var as=Object.defineProperty,Ct=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable,Zi=(a,o,f)=>o in a?as(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Jo=(a,o)=>{for(var f in o||(o={}))Lr.call(o,f)&&Zi(a,f,o[f]);if(jn)for(var f of jn(o))Si.call(o,f)&&Zi(a,f,o[f]);return a},Hs=(a,o)=>Ct(a,Wt(o)),Is=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),Us=(a,o,f,m)=>Is(void 0,null,function*(){const w={x:o.x,y:o.y,z:o.z},C=(0,Ie.z0)(a,w);return new Promise(D=>{m?m(w,(B,V)=>{if(B||!V){const ie={layers:{defaultLayer:{features:[]}}},Ee=new ga(ie,o.x,o.y,o.z);D(Ee)}else{const ie={layers:{defaultLayer:{features:V.features}}},Ee=new ga(ie,o.x,o.y,o.z);D(Ee)}}):(0,Ie.Yu)(Hs(Jo({},f),{url:C}),(B,V)=>{if(B||!V){const ie={layers:{defaultLayer:{features:[]}}},Ee=new ga(ie,o.x,o.y,o.z);D(Ee)}else{const Ee={layers:{defaultLayer:{features:JSON.parse(V)}}},Ce=new ga(Ee,o.x,o.y,o.z);D(Ce)}})})});function dl(a,o){const f=(w,C)=>Us(a,C,o==null?void 0:o.requestParameters,o.getCustomData),m=Hs(Jo({},o),{getTileData:f});return{dataArray:[],tilesetOptions:m,isTile:!0}}var Ph=L(38929),Up=L(3614),hh=L.n(Up),uu=Object.defineProperty,Df=Object.defineProperties,Jc=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,Eu=Object.prototype.hasOwnProperty,ef=Object.prototype.propertyIsEnumerable,Lf=(a,o,f)=>o in a?uu(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,fu=(a,o)=>{for(var f in o||(o={}))Eu.call(o,f)&&Lf(a,f,o[f]);if(cu)for(var f of cu(o))ef.call(o,f)&&Lf(a,f,o[f]);return a},Ds=(a,o)=>Df(a,Jc(o)),$u=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=new Ph.VectorTile(new(hh())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const o=this.vectorTile.layers[a];if(Array.isArray(o.features))return this.vectorLayerCache[a]=o.features,o.features;const f=[];for(let m=0;m<o.length;m++){const C=o.feature(m).toGeoJSON(this.x,this.y,this.z);f.push(Ds(fu({},C),{properties:fu({id:C.id},C.properties)}))}return this.vectorLayerCache[a]=f,f}getFeatureById(){throw new Error("Method not implemented.")}},tf=Object.defineProperty,_d=Object.defineProperties,tp=Object.getOwnPropertyDescriptors,dh=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,Ih=(a,o,f)=>o in a?tf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Dh=(a,o)=>{for(var f in o||(o={}))bd.call(o,f)&&Ih(a,f,o[f]);if(dh)for(var f of dh(o))ph.call(o,f)&&Ih(a,f,o[f]);return a},xd=(a,o)=>_d(a,tp(o)),c0=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),nf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Fc=(a,o,f,m,w)=>c0(void 0,null,function*(){const C=(0,Ie.z0)(a,o);return new Promise(D=>{if(w)w({x:f.x,y:f.y,z:f.z},(B,V)=>{if(B||!V)D(void 0);else{const ie=new $u(V,f.x,f.y,f.z);D(ie)}});else{const B=(0,Ie.ks)(xd(Dh({},m),{url:C}),(V,ie)=>{if(V||!ie)D(void 0);else{const Ee=new $u(ie,f.x,f.y,f.z);D(Ee)}});f.xhrCancel=()=>B.cancel()}})});function Ed(a,o){const f=Array.isArray(a)?a[0]:a,m=(C,D)=>Fc(f,C,D,o==null?void 0:o.requestParameters,o==null?void 0:o.getCustomData),w=xd(Dh(Dh({},nf),o),{getTileData:m});return{data:f,dataArray:[],tilesetOptions:w,isTile:!0}}function Gl(a,o,f){switch(a){case"+":return o+f;case"-":return o-f;case"*":return o*f;case"/":return o/f;case"%":return o%f;case"^":return Math.pow(o,f);case"abs":return Math.abs(o);case"floor":return Math.floor(o);case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"sin":return Math.sin(o);case"cos":return Math.cos(o);case"atan":return f===-1?Math.atan(o):Math.atan2(o,f);case"min":return Math.min(o,f);case"max":return Math.max(o,f);case"log10":return Math.log(o);case"log2":return Math.log2(o);default:return console.warn("Calculate symbol err! Return default 0"),0}}function xc(a,o){const{width:f,height:m}=o[0],w=o.map(V=>V.rasterData),C=f*m,D=[],B=JSON.stringify(a);for(let V=0;V<C;V++){const ie=JSON.parse(B),Ee=rf(ie,w,V);if(typeof Ee=="number")D.push(Ee);else{const Ce=Bc(ie);D.push(Ce)}}return D}function rf(a,o,f){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return o[a[1]][f]}catch(m){return console.warn("Raster Data err!"),0}a.map((m,w)=>{if(Array.isArray(m)&&m.length>0)switch(m[0]){case"band":try{a[w]=o[m[1]][f]}catch(C){console.warn("Raster Data err!"),a[w]=0}break;default:rf(m,o,f)}})}function hu(a){const[o,f=-1,m=-1]=a;return o===void 0?(console.warn("Express err!"),["+",0,0]):[o.replace(/\s+/g,""),f,m]}function Bc(a){const o=hu(a),f=o[0];let m=o[1],w=o[2];return Array.isArray(m)&&(m=Bc(a[1])),Array.isArray(w)&&(w=Bc(a[2])),Gl(f,m,w)}var uc={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:mf}};function mf(a,o){const f=a[0].rasterData,m=a[1].rasterData,w=a[2].rasterData,C=[],[D,B]=(o==null?void 0:o.countCut)||[2,98],V=(o==null?void 0:o.RMinMax)||Fl(f,D,B),ie=(o==null?void 0:o.GMinMax)||Fl(m,D,B),Ee=(o==null?void 0:o.BMinMax)||Fl(w,D,B);for(let Ce=0;Ce<f.length;Ce++)C.push(Math.max(0,f[Ce]-V[0])),C.push(Math.max(0,m[Ce]-ie[0])),C.push(Math.max(0,w[Ce]-Ee[0]));return{rasterData:C,rMinMax:V,gMinMax:ie,bMinMax:Ee}}function Fl(a,o,f){const m=a.slice().sort((B,V)=>B-V),w=m.length,C=m[Math.ceil(w*o/100)],D=m[Math.ceil(w*f/100)];return[C,D]}var of=Object.defineProperty,gf=Object.defineProperties,Sd=Object.getOwnPropertyDescriptors,wd=Object.getOwnPropertySymbols,ys=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,Xf=(a,o,f)=>o in a?of(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Lh=(a,o)=>{for(var f in o||(o={}))ys.call(o,f)&&Xf(a,f,o[f]);if(wd)for(var f of wd(o))np.call(o,f)&&Xf(a,f,o[f]);return a},pl=(a,o)=>gf(a,Sd(o)),Nh=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())});function oe(a,o,f){return Nh(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const m=yield Promise.all(a.map(({data:V,bands:ie=[0]})=>o(V,ie))),w=[];m.forEach(V=>{Array.isArray(V)?w.push(...V):w.push(V)});const{width:C,height:D}=w[0];let B;switch(typeof f){case"function":B=f(w);break;case"object":Array.isArray(f)?B={rasterData:xc(f,w)}:B=_e(f,w);break;default:B={rasterData:w[0].rasterData}}return pl(Lh({},B),{width:C,height:D})})}function _e(a,o){const f=uc[a.type];if(f.type==="function")return f.method(o,a==null?void 0:a.options);if(f.type==="operation")return a.type==="rgb"?tt(f.expression,o):{rasterData:xc(f.expression,o)}}function tt(a,o){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const f=xc(a.r||["band",0],o),m=xc(a.g||["band",0],o),w=xc(a.b||["band",0],o);return[f,m,w]}function cn(a,o,f,m){return Nh(this,null,function*(){const w=yield oe(a,o,f);m(null,{data:w})})}function En(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,width:w,height:C,min:D,max:B,format:V,operation:ie}=o;let Ee,Ce,He;if(V===void 0||Ft(a))Ee=Array.from(a),Ce=w,He=C;else{const Bn=Array.isArray(a)?a:[a];Ee=oe(Bn,V,ie)}const Ot=un(m,f);return{_id:1,dataArray:[{_id:1,data:Ee,width:Ce,height:He,min:D,max:B,coordinates:Ot}]}}var re=L(39827),Nr=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),Di=(a,o,f,m)=>Nr(void 0,null,function*(){return new Promise((w,C)=>{o({x:a.x,y:a.y,z:a.z},(D,B)=>{if(D||B.length===0){C(D);return}B&&cn([{data:B,bands:[0]}],f,m,(V,ie)=>{V?C(V):ie&&w(ie)})})})}),Vi=(a,o)=>Nr(void 0,null,function*(){return new Promise((f,m)=>{o({x:a.x,y:a.y,z:a.z},(w,C)=>{if(w||!C){m(w);return}C instanceof ArrayBuffer?(0,Ie.Co)(C,(D,B)=>{D&&m(D),f(B)}):C instanceof HTMLImageElement?f(C):m(w)})})});function xo(a,o){return Array.isArray(a)?typeof a[0]=="string"?a.map(f=>(0,Ie.z0)(f,o)):a.map(f=>({url:(0,Ie.z0)(f.url,o),bands:f.bands||[0]})):(0,Ie.z0)(a,o)}function yo(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(o=>({url:o,bands:[0]})):a}function za(a,o){a.xhrCancel=()=>{o.map(f=>{f.abort()})}}var ba=Object.defineProperty,go=Object.defineProperties,Ua=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,xa=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,$a=(a,o,f)=>o in a?ba(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ea=(a,o)=>{for(var f in o||(o={}))xa.call(o,f)&&$a(a,f,o[f]);if(ja)for(var f of ja(o))Es.call(o,f)&&$a(a,f,o[f]);return a},Va=(a,o)=>go(a,Ua(o)),js=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),Ql=(a,o,f,m,w)=>js(void 0,null,function*(){const C=yo(o.url);if(C.length>1){const{rasterFiles:D,xhrList:B,errList:V}=yield Xs(C,o);if(za(a,B),V.length>0){f(V,null);return}cn(D,m,w,f)}else{const D=(0,Ie.ks)(o,(B,V)=>{if(B)f(B);else if(V){const ie=[{data:V,bands:C[0].bands}];cn(ie,m,w,f)}});za(a,[D])}});function Xs(a,o){return js(this,null,function*(){const f=[],m=[],w=[];for(let C=0;C<a.length;C++){const D=a[C],B=Va(Ea({},o),{url:D.url}),V=D.bands,{err:ie,data:Ee,xhr:Ce}=yield(0,Ie.LF)(Va(Ea({},B),{type:"arrayBuffer"}));ie&&w.push(ie),m.push(Ce),f.push({data:Ee,bands:V})}return{rasterFiles:f,xhrList:m,errList:w}})}var cl=Object.defineProperty,af=Object.defineProperties,Fh=Object.getOwnPropertyDescriptors,kc=Object.getOwnPropertySymbols,du=Object.prototype.hasOwnProperty,Td=Object.prototype.propertyIsEnumerable,Ad=(a,o,f)=>o in a?cl(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,yf=(a,o)=>{for(var f in o||(o={}))du.call(o,f)&&Ad(a,f,o[f]);if(kc)for(var f of kc(o))Td.call(o,f)&&Ad(a,f,o[f]);return a},Nf=(a,o)=>af(a,Fh(o)),sf=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),vh=(a,o,f,m)=>sf(void 0,null,function*(){const{format:w=Ff,operation:C,requestParameters:D={}}=m,B=Nf(yf({},D),{url:xo(a,o)});return new Promise((V,ie)=>{Ql(f,B,(Ee,Ce)=>{Ee?ie(Ee):Ce&&V(Ce)},w,C)})}),mh=(a,o,f,m)=>sf(void 0,null,function*(){let w;const C=Array.isArray(a)?a[0]:a;return m.wmtsOptions?w=((m==null?void 0:m.getURLFromTemplate)||Ie.jG)(C,yf(yf({},o),m.wmtsOptions)):w=((m==null?void 0:m.getURLFromTemplate)||Ie.z0)(C,o),new Promise((D,B)=>{var V;const ie=(0,Ie.gJ)(Nf(yf({},m==null?void 0:m.requestParameters),{url:w,type:((V=m==null?void 0:m.requestParameters)==null?void 0:V.type)||"arrayBuffer"}),(Ee,Ce)=>{Ee?B(Ee):Ce&&D(Ce)},m.transformResponse);f.xhrCancel=()=>ie.cancel()})}),Ff=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),f0=Object.defineProperty,rp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,_f=Object.getOwnPropertySymbols,h0=Object.prototype.hasOwnProperty,ip=Object.prototype.propertyIsEnumerable,Cd=(a,o,f)=>o in a?f0(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bf=(a,o)=>{for(var f in o||(o={}))h0.call(o,f)&&Cd(a,f,o[f]);if(_f)for(var f of _f(o))ip.call(o,f)&&Cd(a,f,o[f]);return a},Vp=(a,o)=>rp(a,jp(o)),gh={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},op=[re.n3.ARRAYBUFFER,re.n3.RGB];function Yf(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function Ks(a,o={}){if(Yf(a))throw new Error("tile server url is error");let f=(o==null?void 0:o.dataType)||re.n3.IMAGE;f===re.n3.RGB&&(f=re.n3.ARRAYBUFFER);const m=(C,D)=>{switch(f){case re.n3.IMAGE:return mh(a,C,D,o);case re.n3.CUSTOMIMAGE:case re.n3.CUSTOMTERRAINRGB:return Vi(D,o==null?void 0:o.getCustomData);case re.n3.ARRAYBUFFER:return vh(a,C,D,o);case re.n3.CUSTOMARRAYBUFFER:case re.n3.CUSTOMRGB:return Di(D,o==null?void 0:o.getCustomData,(o==null?void 0:o.format)||Ff,o==null?void 0:o.operation);default:return mh(a,C,D,o)}},w=Vp(bf(bf({},gh),o),{getTileData:m});return{data:a,dataArray:[],tilesetOptions:w,isTile:!0}}var Od=Object.defineProperty,xf=Object.defineProperties,$f=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,xt=(a,o,f)=>o in a?Od(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Rn=(a,o)=>{for(var f in o||(o={}))fe.call(o,f)&&xt(a,f,o[f]);if(La)for(var f of La(o))Ge.call(o,f)&&xt(a,f,o[f]);return a},ur=(a,o)=>xf(a,$f(o)),Fr=(a,o)=>{var f={};for(var m in a)fe.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&La)for(var m of La(a))o.indexOf(m)<0&&Ge.call(a,m)&&(f[m]=a[m]);return f};function ci(a,o){const f=o,{extent:m=[121.168,30.2828,121.384,30.4219],coordinates:w,width:C,height:D}=f,B=Fr(f,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,ie]=B.bands||[0,1],Ee=[a[V],a[ie]],Ce=[];for(let nn=0;nn<Ee[0].length;nn++)Ce.push((Ee[1][nn]-Ee[0][nn])/(Ee[1][nn]+Ee[0][nn]));const He=un(w,m);return{_id:1,dataArray:[ur(Rn({_id:1,data:Ce,width:C,height:D},B),{coordinates:He})]}}var Ri=Object.defineProperty,Wo=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,Al=Object.prototype.propertyIsEnumerable,Ss=(a,o,f)=>o in a?Ri(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,eo=(a,o)=>{for(var f in o||(o={}))ol.call(o,f)&&Ss(a,f,o[f]);if(la)for(var f of la(o))Al.call(o,f)&&Ss(a,f,o[f]);return a},Bl=(a,o)=>Wo(a,Go(o)),yh=(a,o)=>{var f={};for(var m in a)ol.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&la)for(var m of la(a))o.indexOf(m)<0&&Al.call(a,m)&&(f[m]=a[m]);return f};function Bh(a,o){const f=o,{extent:m,coordinates:w,width:C,height:D}=f,B=yh(f,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,ie,Ee]=B.bands||[0,1,2],Ce=[a[V],a[ie],a[Ee]],He=[],[Ot,nn]=(B==null?void 0:B.countCut)||[2,98],Bn=(B==null?void 0:B.RMinMax)||Fl(Ce[0],Ot,nn),sr=(B==null?void 0:B.GMinMax)||Fl(Ce[1],Ot,nn),xr=(B==null?void 0:B.BMinMax)||Fl(Ce[2],Ot,nn);for(let Pi=0;Pi<Ce[0].length;Pi++)He.push(Math.max(0,Ce[0][Pi]-Bn[0])),He.push(Math.max(0,Ce[1][Pi]-sr[0])),He.push(Math.max(0,Ce[2][Pi]-xr[0]));const fr=un(w,m);return{_id:1,dataArray:[Bl(eo({_id:1,data:He,width:C,height:D,rMinMax:Bn,gMinMax:sr,bMinMax:xr},B),{coordinates:fr})]}}var qa=Object.defineProperty,Ls=Object.defineProperties,lf=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertySymbols,Ef=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable,_h=(a,o,f)=>o in a?qa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Sf=(a,o)=>{for(var f in o||(o={}))Ef.call(o,f)&&_h(a,f,o[f]);if(Fi)for(var f of Fi(o))Md.call(o,f)&&_h(a,f,o[f]);return a},cc=(a,o)=>Ls(a,lf(o)),d0=(a,o)=>{var f={};for(var m in a)Ef.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Fi)for(var m of Fi(a))o.indexOf(m)<0&&Md.call(a,m)&&(f[m]=a[m]);return f};function bh(a,o){const f=o,{extent:m,coordinates:w,min:C,max:D,width:B,height:V,format:ie,operation:Ee}=f,Ce=d0(f,["extent","coordinates","min","max","width","height","format","operation"]);let He;if(ie===void 0||Ft(a))He=Array.from(a);else{const Bn=Array.isArray(a)?a:[a];He=oe(Bn,ie,Ee)}const Ot=un(w,m);return{_id:1,dataArray:[cc(Sf({_id:1,data:He,width:B,height:V},Ce),{min:C,max:D,coordinates:Ot})]}}var qu=Object.defineProperty,qf=Object.defineProperties,p0=Object.getOwnPropertyDescriptors,Rd=Object.getOwnPropertySymbols,v0=Object.prototype.hasOwnProperty,rv=Object.prototype.propertyIsEnumerable,fc=(a,o,f)=>o in a?qu(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,zc=(a,o)=>{for(var f in o||(o={}))v0.call(o,f)&&fc(a,f,o[f]);if(Rd)for(var f of Rd(o))rv.call(o,f)&&fc(a,f,o[f]);return a},wa=(a,o)=>qf(a,p0(o)),hc=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),uf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},Su=a=>hc(void 0,null,function*(){return new Promise(o=>{const[f,m,w,C]=a.bounds,D={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(f+w)/2,y:(m+C)/2},geometry:{type:"LineString",coordinates:[[w,C],[w,m],[f,m],[f,m]]}}]}}};o(D)})});function kh(a,o){const f=w=>Su(w),m=wa(zc(zc({},uf),o),{getTileData:f});return{data:a,dataArray:[],tilesetOptions:m,isTile:!0}}var Jl=L(46343),Vu=L(26729),Ku=L.n(Vu),ap=L(69848),No=L.n(ap),To=Object.defineProperty,eu=Object.getOwnPropertySymbols,Qu=Object.prototype.hasOwnProperty,Ju=Object.prototype.propertyIsEnumerable,vl=(a,o,f)=>o in a?To(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ec=(a,o)=>{for(var f in o||(o={}))Qu.call(o,f)&&vl(a,f,o[f]);if(eu)for(var f of eu(o))Ju.call(o,f)&&vl(a,f,o[f]);return a};function Kf(a,o){const{radius:f=40,maxZoom:m=18,minZoom:w=0,zoom:C=2}=o;if(a.pointIndex){const V=a.pointIndex.getClusters(a.extent,Math.floor(C));return a.dataArray=Pd(V),a}const D=new(No())({radius:f,minZoom:w,maxZoom:m}),B={type:"FeatureCollection",features:[]};return B.features=a.dataArray.map(V=>({type:"Feature",geometry:{type:"Point",coordinates:V.coordinates},properties:Ec({},V)})),D.load(B.features),D}function Pd(a){return a.map((o,f)=>Ec({coordinates:o.geometry.coordinates,_id:f+1},o.properties))}function Cs(a){if(a.length===0)throw new Error("max requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]>o&&(o=a[f]);return o}function wu(a){if(a.length===0)throw new Error("min requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]<o&&(o=a[f]);return o}function m0(a){if(a.length===0)return 0;let o=a[0],f=0,m;for(let w=1;w<a.length;w++)m=o+a[w]*1,Math.abs(o)>=Math.abs(a[w])?f+=o-m+a[w]:f+=a[w]-m+o,o=m;return o+f*1}function zh(a){if(a.length===0)throw new Error("mean requires at least one data point");return m0(a)/a.length}var sp={min:wu,max:Cs,mean:zh,sum:m0},xh=Object.defineProperty,ec=Object.getOwnPropertySymbols,lp=Object.prototype.hasOwnProperty,Sc=Object.prototype.propertyIsEnumerable,Hp=(a,o,f)=>o in a?xh(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Uc=(a,o)=>{for(var f in o||(o={}))lp.call(o,f)&&Hp(a,f,o[f]);if(ec)for(var f of ec(o))Sc.call(o,f)&&Hp(a,f,o[f]);return a},Id=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),{cloneDeep:g0,isFunction:Eh,isString:Uh,mergeWith:y0}=Ie.lodashUtil;function Bf(a,o){if(Array.isArray(o))return o}var kf=class extends Vu.EventEmitter{constructor(a,o){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new Jl.ni},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(o),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:o="sum",field:f}=this.clusterOptions;let m=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,m.forEach(w=>{w.id||(w.properties.point_count=1)}),(f||Eh(o))&&(m=m.map(w=>{const C=w.id;if(C){const B=this.clusterIndex.getLeaves(C,1/0).map(ie=>ie.properties);let V;if(Uh(o)&&f){const ie=Ln(B,f);V=sp[o](ie)}Eh(o)&&(V=o(B)),w.properties.stat=V}else w.properties.point_count=1;return w})),this.data=E("geojson")({type:"FeatureCollection",features:m}),this.executeTrans()}getFeatureById(a){const{type:o="geojson",geometry:f}=this.parser;if(o==="geojson"&&!this.cluster){const m=a<this.originData.features.length?this.originData.features[a]:"null",w=g0(m);if(w!=null&&w.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const C=this.data.dataArray.find(D=>D._id===a);w.properties=C}return w}else return o==="json"&&f?this.data.dataArray.find(m=>m._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,o){this.data.dataArray=this.data.dataArray.map(f=>f._id===a?Uc(Uc({},f),o):f),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,o){const f=this.data.dataArray.find(m=>m[a]===o);return f==null?void 0:f._id}setData(a,o){this.originData=a,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,o,f){var m;(m=this.tileset)==null||m.reloadTileById(a,o,f)}reloadTileByLnglat(a,o,f){var m;(m=this.tileset)==null||m.reloadTileByLnglat(a,o,f)}getTileExtent(a,o){var f;return(f=this.tileset)==null?void 0:f.getTileExtent(a,o)}getTileByZXY(a,o,f){var m;return(m=this.tileset)==null?void 0:m.getTileByZXY(a,o,f)}reloadTileByExtent(a,o){var f;(f=this.tileset)==null||f.reloadTileByExtent(a,o)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return Id(this,null,function*(){return new Promise((a,o)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(f){o(f)}})})}initCfg(a){this.cfg=y0(this.cfg,a,Bf);const o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=Uc(Uc({},this.clusterOptions),o.clusterOptions)))}init(){return Id(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,o=a.type||"geojson",f=E(o);this.data=f(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=(0,Ie.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Ie.nx(Uc({},a))):void 0}executeTrans(){this.transforms.forEach(o=>{const{type:f}=o,m=ee(f)(this.data,o);Object.assign(this.data,m)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=Kf(this.data,a)}caculClusterExtent(a){let o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Ie.yA)((0,Ie.ds)(this.extent),a)),o[0].concat(o[1])}};function _0(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.filter(f)),a}var Qf=6378e3;function wf(a,o){const f=a.dataArray,{size:m=10}=o,w=m/(2*Math.PI*Qf)*(256<<20)/2,{gridHash:C,gridOffset:D}=iv(f,m),B=_(C,D,o);return{yOffset:w,xOffset:w,radius:w,type:"grid",dataArray:B}}function iv(a,o){let f=1/0,m=-1/0,w;for(const V of a)w=V.coordinates[1],Number.isFinite(w)&&(f=w<f?w:f,m=w>m?w:m);const C=(f+m)/2,D=zf(o,C);if(D.xOffset<=0||D.yOffset<=0)return{gridHash:{},gridOffset:D};const B={};for(const V of a){const ie=V.coordinates[1],Ee=V.coordinates[0];if(Number.isFinite(ie)&&Number.isFinite(Ee)){const Ce=Math.floor((ie+90)/D.yOffset),He=Math.floor((Ee+180)/D.xOffset),Ot=`${Ce}-${He}`;B[Ot]=B[Ot]||{count:0,points:[]},B[Ot].count+=1,B[Ot].points.push(V)}}return{gridHash:B,gridOffset:D}}function zf(a,o){const f=jh(a),m=b0(o,a);return{yOffset:f,xOffset:m}}function jh(a){return a/Qf*(180/Math.PI)}function b0(a,o){return o/Qf*(180/Math.PI)/Math.cos(a*Math.PI/180)}function _(a,o,f){return Object.keys(a).reduce((m,w,C)=>{const D=w.split("-"),B=parseInt(D[0],10),V=parseInt(D[1],10),ie={};if(f.field&&f.method){const Ee=Ie.a5.getColumn(a[w].points,f.field);ie[f.method]=Ie.a5.statMap[f.method](Ee)}return Object.assign(ie,{_id:C,coordinates:(0,Ie.Z)([-180+o.xOffset*(V+.5),-90+o.yOffset*(B+.5)]),rawData:a[w].points,count:a[w].count}),m.push(ie),m},[])}var S=Math.PI/3,x=[0,S,2*S,3*S,4*S,5*S];function O(a){return a[0]}function k(a){return a[1]}function Z(){var a=0,o=0,f=1,m=1,w=O,C=k,D,B,V;function ie(Ce){var He={},Ot=[],nn,Bn=Ce.length;for(nn=0;nn<Bn;++nn)if(!(isNaN(xr=+w.call(null,sr=Ce[nn],nn,Ce))||isNaN(fr=+C.call(null,sr,nn,Ce)))){var sr,xr,fr,Yr=Math.round(fr=fr/V),Pi=Math.round(xr=xr/B-(Yr&1)/2),Co=fr-Yr;if(Math.abs(Co)*3>1){var ao=xr-Pi,Zr=Pi+(xr<Pi?-1:1)/2,Qi=Yr+(fr<Yr?-1:1),Ma=xr-Zr,Ms=fr-Qi;ao*ao+Co*Co>Ma*Ma+Ms*Ms&&(Pi=Zr+(Yr&1?1:-1)/2,Yr=Qi)}var na=Pi+"-"+Yr,Qa=He[na];Qa?Qa.push(sr):(Ot.push(Qa=He[na]=[sr]),Qa.x=(Pi+(Yr&1)/2)*B,Qa.y=Yr*V)}return Ot}function Ee(Ce){var He=0,Ot=0;return x.map(function(nn){var Bn=Math.sin(nn)*Ce,sr=-Math.cos(nn)*Ce,xr=Bn-He,fr=sr-Ot;return He=Bn,Ot=sr,[xr,fr]})}return ie.hexagon=function(Ce){return"m"+Ee(Ce==null?D:+Ce).join("l")+"z"},ie.centers=function(){for(var Ce=[],He=Math.round(o/V),Ot=Math.round(a/B),nn=He*V;nn<m+D;nn+=V,++He)for(var Bn=Ot*B+(He&1)*B/2;Bn<f+B/2;Bn+=B)Ce.push([Bn,nn]);return Ce},ie.mesh=function(){var Ce=Ee(D).slice(0,4).join("l");return ie.centers().map(function(He){return"M"+He+"m"+Ce}).join("")},ie.x=function(Ce){return arguments.length?(w=Ce,ie):w},ie.y=function(Ce){return arguments.length?(C=Ce,ie):C},ie.radius=function(Ce){return arguments.length?(D=+Ce,B=D*2*Math.sin(S),V=D*1.5,ie):D},ie.size=function(Ce){return arguments.length?(a=o=0,f=+Ce[0],m=+Ce[1],ie):[f-a,m-o]},ie.extent=function(Ce){return arguments.length?(a=+Ce[0][0],o=+Ce[0][1],f=+Ce[1][0],m=+Ce[1][1],ie):[[a,o],[f,m]]},ie.radius(1)}var Q=Object.defineProperty,ge=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Zt=(a,o,f)=>o in a?Q(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,xn=(a,o)=>{for(var f in o||(o={}))zt.call(o,f)&&Zt(a,f,o[f]);if(ht)for(var f of ht(o))Ht.call(o,f)&&Zt(a,f,o[f]);return a},vn=(a,o)=>ge(a,Ve(o)),Un=6378e3;function an(a,o){const f=a.dataArray,{size:m=10,method:w="sum"}=o,C=m/(2*Math.PI*Un)*(256<<20)/2,D=f.map(Ee=>{const[Ce,He]=(0,Ie.Z)(Ee.coordinates);return vn(xn({},Ee),{coordinates:[Ce,He]})});return{dataArray:Z().radius(C).x(Ee=>Ee.coordinates[0]).y(Ee=>Ee.coordinates[1])(D).map((Ee,Ce)=>{if(o.field&&w){const He=Ie.a5.getColumn(Ee,o.field);Ee[w]=Ie.a5.statMap[w](He)}return{[o.method]:Ee[w],count:Ee.length,rawData:Ee,coordinates:[Ee.x,Ee.y],_id:Ce}}),radius:C,xOffset:C,yOffset:C,type:"hexagon"}}var kn=Object.defineProperty,nr=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Ar=(a,o,f)=>o in a?kn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,zr=(a,o)=>{for(var f in o||(o={}))mr.call(o,f)&&Ar(a,f,o[f]);if(nr)for(var f of nr(o))Rr.call(o,f)&&Ar(a,f,o[f]);return a};function ni(a,o){const{sourceField:f,targetField:m,data:w}=o,C={};return w.forEach(D=>{C[D[f]]=D}),a.dataArray=a.dataArray.map(D=>{const B=D[m];return zr(zr({},D),C[B])}),a}function zi(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.map(f)),a}var Li=L(4771);de("rasterTile",Ks),de("mvt",Ed),de("geojsonvt",Ni),de("testTile",kh),de("geojson",Xn),de("jsonTile",dl),de("image",ra),de("csv",he),de("json",ct),de("raster",En),de("rasterRgb",bh),de("rgb",Bh),de("ndi",ci),ue("cluster",Kf),ue("filter",_0),ue("join",ni),ue("map",zi),ue("grid",wf),ue("hexagon",an);var co=kf;class Uo extends null{getMarkerLayerContainerSize(){}constructor(o){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",f=>{const m=this.mapsService.getContainer();if(!m)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:w,top:C}=m.getClientRects()[0],{x:D,y:B}=f;this.preLngLat=this.mapsService.containerToLngLat([D-w,B-C]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",f=>{const{lng:m,lat:w}=this.preLngLat,{lng:C,lat:D}=f.lnglat,B={lng:this.lngLat.lng+C-m,lat:this.lngLat.lat+D-w};this.setLnglat(B),this.preLngLat=f.lnglat,this.emit("dragging",B)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",f=>{this.polyfillEvent(f),this.emit(f.type,{target:f,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),o),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}addTo(o){this.scene=o,this.mapsService=o.mapService;const{element:f}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(f),this.registerMarkerEvent(f),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:o}=this.markerOption;return o&&DOM.remove(o),this.popup&&this.popup.remove(),this}setLnglat(o){return this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(o){if(!this.added)return this.once("added",()=>{this.setElement(o)}),this;const{element:f}=this.markerOption;return f&&DOM.remove(f),this.markerOption.element=o,this.init(),this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const o=this.popup;return o&&o.remove(),this}setPopup(o){return this.popup=o,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const o=this.popup;if(o)o.isOpen()?o.remove():o.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(o){this.markerOption.draggable=o,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(o){this.markerOption.extData=o}update(){if(!this.mapsService)return;const{element:o,anchor:f}=this.markerOption;this.updatePosition(),DOM.setTransform(o,`${anchorTranslate[f]}`)}updatePositionWhenZoom(o){if(!this.mapsService)return;const{element:f,offsets:m}=this.markerOption,{lng:w,lat:C}=this.lngLat;if(f){f.style.display="block",f.style.whiteSpace="nowrap";const{containerHeight:D,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;const ie=o.map,Ee=o.center,Ce=o.zoom,He=ie.DE(this.lngLat,Ce,Ee);if(He.x=Math.round(He.x+m[0]),He.y=Math.round(He.y-m[1]),Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(He.x>B){const Ot=this.mapsService.lngLatToContainer([w-360,C]);He.x=Ot.x}if(He.x<0){const Ot=this.mapsService.lngLatToContainer([w+360,C]);He.x=Ot.x}}(He.x>B||He.x<0||He.y>D||He.y<0)&&(f.style.display="none"),f.style.left=He.x+"px",f.style.top=He.y+"px",f.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(o){const{element:f}=this.markerOption;this.popup&&f&&this.togglePopup()}getCurrentContainerSize(){const o=this.mapsService.getContainer();return{containerHeight:(o==null?void 0:o.scrollHeight)||0,containerWidth:(o==null?void 0:o.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:o}=this.markerOption;o==null||o.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(o==null||o.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:o,offsets:f}=this.markerOption,{lng:m,lat:w}=this.lngLat,C=this.mapsService.lngLatToContainer([m,w]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";const{containerHeight:D,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;if(Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(C.x>B){const ie=this.mapsService.lngLatToContainer([m-360,w]);C.x=ie.x}if(C.x<0){const ie=this.mapsService.lngLatToContainer([m+360,w]);C.x=ie.x}}(C.x>B||C.x<0||C.y>D||C.y<0)&&(o.style.display="none"),o.style.left=C.x+f[0]+"px",o.style.top=C.y-f[1]+"px"}}init(){let{element:o}=this.markerOption;const{color:f,anchor:m}=this.markerOption;if(!o){o=DOM.create("div"),this.markerOption.element=o;const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","48px"),w.setAttributeNS(null,"width","48px"),w.setAttributeNS(null,"viewBox","0 0 1024 1024");const C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),C.setAttributeNS(null,"fill",f),w.appendChild(C),o.appendChild(w)}DOM.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(w=>{var C,D;const B=((C=this.markerOption)===null||C===void 0?void 0:C.style)&&((D=this.markerOption)===null||D===void 0?void 0:D.style[w]);o&&(o.style[w]=B)}),applyAnchorClass(o,m,"marker")}registerMarkerEvent(o){o.addEventListener("click",this.onMapClick),o.addEventListener("mousemove",this.eventHandle),o.addEventListener("click",this.eventHandle),o.addEventListener("mousedown",this.eventHandle),o.addEventListener("mouseup",this.eventHandle),o.addEventListener("dblclick",this.eventHandle),o.addEventListener("contextmenu",this.eventHandle),o.addEventListener("mouseover",this.eventHandle),o.addEventListener("mouseout",this.eventHandle),o.addEventListener("touchstart",this.eventHandle),o.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const o=this.getElement();o.removeEventListener("click",this.onMapClick),o.removeEventListener("mousemove",this.eventHandle),o.removeEventListener("click",this.eventHandle),o.removeEventListener("mousedown",this.eventHandle),o.removeEventListener("mouseup",this.eventHandle),o.removeEventListener("dblclick",this.eventHandle),o.removeEventListener("contextmenu",this.eventHandle),o.removeEventListener("mouseover",this.eventHandle),o.removeEventListener("mouseout",this.eventHandle),o.removeEventListener("touchstart",this.eventHandle),o.removeEventListener("touchend",this.eventHandle)}polyfillEvent(o){!this.mapsService||this.mapsService.version!=="GAODE2.x"||isPC()||(o.type==="touchstart"&&(this.touchStartTime=Date.now()),o.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:o,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(o){return null}onUp(o){throw new Error("Method not implemented.")}}const{merge:Zo}=Ie.lodashUtil;class Xo extends null{constructor(o){var f;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=Zo(this.getDefault(),o),bindAll(["update"],this),this.zoom=((f=this.markerLayerOption.clusterOption)===null||f===void 0?void 0:f.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(o){return this.scene=o,this.mapsService=o.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const o=this.mapsService.getContainer();this.containerSize={containerWidth:(o==null?void 0:o.scrollWidth)||0,containerHeight:(o==null?void 0:o.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(o){const f=this.markerLayerOption.cluster;if(o.getMarkerLayerContainerSize=this.getContainerSize.bind(this),f&&(this.addPoint(o,this.markers.length),this.mapsService)){const m=this.mapsService.getZoom(),w=this.mapsService.getBounds();this.bbox=padBounds(w,.5),this.zoom=Math.floor(m),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(o)}removeMarker(o){this.markers.indexOf(o);const f=this.markers.indexOf(o);f>-1&&(this.markers.splice(f,1),this.markerLayerOption.cluster&&(this.removePoint(f),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(o=>{o.getElement().style.opacity="0"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="0"})}show(){this.markers.map(o=>{o.getElement().style.opacity="1"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(o=>{o.addTo(this.scene)})}clear(){this.markers.forEach(o=>{o.remove()}),this.clusterMarkers.forEach(o=>{o.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(o,f){const{lng:m,lat:w}=o.getLnglat(),C={geometry:{type:"Point",coordinates:[m,w]},properties:_objectSpread(_objectSpread({},o.getExtData()),{},{marker_id:f})};this.points.push(C),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(o){const f=this.points.findIndex(m=>m.properties.marker_id===o);f>-1&&this.points.splice(f,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:o,minZoom:f=0,maxZoom:m}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:o,minZoom:f,maxZoom:m}),this.clusterIndex.load(this.points)}getClusterMarker(o,f){const m=o[0].concat(o[1]),w=this.clusterIndex.getClusters(m,f);this.clusterMarkers.forEach(C=>{C.remove()}),this.clusterMarkers=[],w.forEach(C=>{var D;const{field:B,method:V}=this.markerLayerOption.clusterOption;if((D=C.properties)!==null&&D!==void 0&&D.cluster_id){var ie;const Ce=this.getLeaves((ie=C.properties)===null||ie===void 0?void 0:ie.cluster_id);if(C.properties.clusterData=Ce,B&&V){const He=Ce==null?void 0:Ce.map(sr=>({[B]:sr.properties[B]})),Ot=Satistics.getColumn(He,B),nn=Satistics.getSatByColumn(V,Ot),Bn="point_"+V;C.properties[Bn]=nn.toFixed(2)}}const Ee=this.clusterMarker(C);this.clusterMarkers.push(Ee),Ee.addTo(this.scene)})}getLeaves(o,f=1/0,m=0){return o?this.clusterIndex.getLeaves(o,f,m):null}clusterMarker(o){const f=this.markerLayerOption.clusterOption,{element:m=this.generateElement.bind(this)}=f;return new Marker({element:m(o)}).setLnglat({lng:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]})}normalMarker(o){const f=o.properties.marker_id;return this.markers[f]}update(){if(!this.mapsService||this.markers.length===0)return;const o=this.mapsService.getZoom(),f=this.mapsService.getBounds();(!this.bbox||Math.abs(o-this.zoom)>=1||!boundsContains(this.bbox,f))&&(this.bbox=padBounds(f,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom))}generateElement(o){const f=DOM.create("div","l7-marker-cluster"),m=DOM.create("div","",f),w=DOM.create("span","",m),{field:C,method:D}=this.markerLayerOption.clusterOption;o.properties.point_count=o.properties.point_count||1;const B=C&&D?o.properties["point_"+D]||o.properties[C]:o.properties.point_count;return w.textContent=B,f}}var cs=L(4157),Pr=L(1413),Qt=L(4942);class da extends Ku(){constructor(o){super(),(0,Qt.Z)(this,"controlOption",void 0),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"isShow",void 0),(0,Qt.Z)(this,"sceneContainer",void 0),(0,Qt.Z)(this,"scene",void 0),(0,Qt.Z)(this,"mapsService",void 0),(0,Qt.Z)(this,"renderService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"controlService",void 0),(0,Qt.Z)(this,"configService",void 0),da.controlCount++,this.controlOption=(0,Pr.Z)((0,Pr.Z)({},this.getDefault(o)),o||{})}getOptions(){return this.controlOption}setOptions(o){const f=this.getDefault(o);Object.entries(o).forEach(([m,w])=>{w===void 0&&(o[m]=f[m])}),"position"in o&&this.setPosition(o.position),"className"in o&&this.setClassName(o.className),"style"in o&&this.setStyle(o.style),this.controlOption=(0,Pr.Z)((0,Pr.Z)({},this.controlOption),o)}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd(),Ie.SO.addClass(this.container,"l7-control");const{className:f,style:m}=this.controlOption;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ie.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Ie.SO.create("div")}onRemove(){}show(){const o=this.container;Ie.SO.removeClass(o,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const o=this.container;Ie.SO.addClass(o,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(o){return{position:re.d.TOPRIGHT,name:`${da.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(o){if(this.mapsService&&o&&o.screenX>0&&o.screenY>0){const f=this.mapsService.getContainer();f!==null&&f.focus()}}setPosition(o=re.d.TOPLEFT){const f=this.controlService;return f&&f.removeControl(this),this.controlOption.position=o,f&&f.addControl(this,this.sceneContainer),this}setClassName(o){const f=this.container,{className:m}=this.controlOption;m&&Ie.SO.removeClass(f,m),o&&Ie.SO.addClass(f,o)}setStyle(o){const f=this.container;o?f.setAttribute("style",o):f.removeAttribute("style")}insertContainer(){const o=this.controlOption.position,f=this.container;if(o instanceof Element)o.appendChild(f);else{const m=this.controlService.controlCorners[o];["bottomleft","bottomright","righttop","rightbottom"].includes(o)?m.insertBefore(f,m.firstChild):m.appendChild(f)}}checkUpdateOption(o,f){return f.some(m=>m in o)}}(0,Qt.Z)(da,"controlCount",0);class ha extends null{constructor(...o){super(...o),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(o){if(this.isDisable=o,o){var f;(f=this.button)===null||f===void 0||f.setAttribute("disabled","true")}else{var m;(m=this.button)===null||m===void 0||m.removeAttribute("disabled")}}createButton(o=""){return DOM.create("button",`l7-button-control ${o}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:o,btnText:f,btnIcon:m}=this.controlOption;return this.setBtnTitle(o),this.setBtnText(f),this.setBtnIcon(m),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(o){const{title:f,btnText:m,btnIcon:w}=o;this.checkUpdateOption(o,["title"])&&this.setBtnTitle(f),this.checkUpdateOption(o,["btnIcon"])&&this.setBtnIcon(w),this.checkUpdateOption(o,["btnText"])&&this.setBtnText(m),super.setOptions(o)}setBtnTitle(o){var f;(f=this.button)===null||f===void 0||f.setAttribute("title",o!=null?o:"")}setBtnIcon(o){if(this.buttonIcon&&DOM.remove(this.buttonIcon),o){var f;const C=(f=this.button)===null||f===void 0?void 0:f.firstChild;if(C){var m;(m=this.button)===null||m===void 0||m.insertBefore(o,C)}else{var w;(w=this.button)===null||w===void 0||w.appendChild(o)}this.buttonIcon=o}}setBtnText(o){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),o){let m=this.buttonText;if(!m){var f;m=DOM.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(m),this.buttonText=m}m.innerText=o,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!o&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class qo extends Vu.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(o,f){super(),(0,Qt.Z)(this,"popperDOM",void 0),(0,Qt.Z)(this,"contentDOM",void 0),(0,Qt.Z)(this,"button",void 0),(0,Qt.Z)(this,"option",void 0),(0,Qt.Z)(this,"isShow",!1),(0,Qt.Z)(this,"content",void 0),(0,Qt.Z)(this,"timeout",null),(0,Qt.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Ie.SO.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&qo.conflictPopperList.forEach(m=>{m!==this&&m.isShow&&m.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,Qt.Z)(this,"hide",()=>this.isShow?(Ie.SO.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,Qt.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,Qt.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,Qt.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,Qt.Z)(this,"onPopperUnClick",m=>{Ie.SO.findParentElement(m.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,Qt.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,Qt.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=o,this.option=f,this.init(),f.unique&&qo.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(o){typeof o=="string"?this.contentDOM.innerHTML=o:o instanceof HTMLElement&&(Ie.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(o)),this.content=o}init(){const{trigger:o}=this.option;this.popperDOM=this.createPopper(),o==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ie.SO.remove(this.popperDOM)}resetPopperPosition(){const o={},{container:f,offset:m=[0,0],placement:w}=this.option,[C,D]=m,B=this.button.getBoundingClientRect(),V=f.getBoundingClientRect(),{left:ie,right:Ee,top:Ce,bottom:He}=Ie.SO.getDiffRect(B,V);let Ot=!1,nn=!1;/^(left|right)/.test(w)?(w.includes("left")?o.right=`${B.width+Ee}px`:w.includes("right")&&(o.left=`${B.width+ie}px`),w.includes("start")?o.top=`${Ce}px`:w.includes("end")?o.bottom=`${He}px`:(o.top=`${Ce+B.height/2}px`,nn=!0,o.transform=`translate(${C}px, calc(${D}px - 50%))`)):/^(top|bottom)/.test(w)&&(w.includes("top")?o.bottom=`${B.height+He}px`:w.includes("bottom")&&(o.top=`${B.height+Ce}px`),w.includes("start")?o.left=`${ie}px`:w.includes("end")?o.right=`${Ee}px`:(o.left=`${ie+B.width/2}px`,Ot=!0,o.transform=`translate(calc(${C}px - 50%), ${D}px)`)),o.transform=`translate(calc(${C}px - ${Ot?"50%":"0%"}), calc(${D}px - ${nn?"50%":"0%"})`;const Bn=w.split("-");Bn.length&&Ie.SO.addClass(this.popperDOM,Bn.map(sr=>`l7-popper-${sr}`).join(" ")),Ie.SO.addStyle(this.popperDOM,Ie.SO.css2Style(o))}createPopper(){const{container:o,className:f="",content:m}=this.option,w=Ie.SO.create("div",`l7-popper l7-popper-hide ${f}`),C=Ie.SO.create("div","l7-popper-content"),D=Ie.SO.create("div","l7-popper-arrow");return w.appendChild(C),w.appendChild(D),o.appendChild(w),this.popperDOM=w,this.contentDOM=C,m&&this.setContent(m),w}}(0,Qt.Z)(qo,"conflictPopperList",[]);const _a={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class aa extends null{constructor(...o){super(...o),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(o){var f;const m=super.getDefault(o),w=(f=o==null?void 0:o.position)!==null&&f!==void 0?f:m.position;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{popperPlacement:w instanceof Element?"bottom":_a[w],popperTrigger:"click"})}onAdd(){const o=super.onAdd();return this.initPopper(),o}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:o,popperPlacement:f,popperTrigger:m}=this.controlOption,w=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:o,placement:f,trigger:m,container:w,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(o){if(super.setOptions(o),this.checkUpdateOption(o,["popperPlacement","popperTrigger","popperClassName"])){const f=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(f)}}}var Fo=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(Fo||{});class pu extends null{constructor(...o){super(...o),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",f=>{const m=this.selectValue.includes(f.value),w=DOM.create("div",`l7-select-control-item ${m?Fo.ActiveOptionClassName:""}`);this.getIsMultiple()?w.appendChild(this.createCheckbox(m)):w.appendChild(this.createRadio(m)),f.icon&&w.appendChild(f.icon);const C=DOM.create("span");return C.innerText=f.text,w.appendChild(C),w}),_defineProperty(this,"onItemClick",f=>{if(this.getIsMultiple()){const m=this.selectValue.findIndex(w=>w===f.value);m>-1?this.selectValue.splice(m,1):this.selectValue=[...this.selectValue,f.value]}else this.selectValue=[f.value];this.setSelectValue(this.selectValue)})}setOptions(o){super.setOptions(o);const{options:f}=o;f&&this.popper.setContent(this.getPopperContent(f))}onAdd(){const o=super.onAdd(),{defaultValue:f}=this.controlOption;return f&&(this.selectValue=this.transSelectValue(f)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),o}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(o,f=!0){const m=this.transSelectValue(o);this.optionDOMList.forEach(w=>{const C=w.getAttribute(Fo.OptionValueAttrKey),D=w.querySelector("input[type=checkbox]"),B=w.querySelector("input[type=radio]"),V=m.includes(C),ie=(Ee,Ce)=>{DOM.toggleClass(w,Fo.ActiveOptionClassName,Ce),Ee&&DOM.setChecked(Ee,Ce)};ie(D,V),ie(B,V)}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}getIsMultiple(){return!1}getPopperContent(o){const f=this.isImageOptions(),m=DOM.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(m,"l7-select-control--multiple");const w=o.map((C,D)=>{const B=f?this.createImageOption(C):this.createNormalOption(C);return B.setAttribute(Fo.OptionValueAttrKey,C.value),B.setAttribute(Fo.OptionIndexAttrKey,window.String(D)),B.addEventListener("click",this.onItemClick.bind(this,C)),B});return m.append(...w),this.optionDOMList=w,m}createImageOption(o){const f=this.selectValue.includes(o.value),m=DOM.create("div",`l7-select-control-item ${f?Fo.ActiveOptionClassName:""}`),w=DOM.create("img");w.setAttribute("src",o.img),DOM.setUnDraggable(w),m.appendChild(w);const C=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&m.appendChild(this.createCheckbox(f));const D=DOM.create("span");return D.innerText=o.text,C.appendChild(D),m.appendChild(C),m}createCheckbox(o){const f=DOM.create("input");return f.setAttribute("type","checkbox"),o&&DOM.setChecked(f,!0),f}createRadio(o){const f=DOM.create("input");return f.setAttribute("type","radio"),o&&DOM.setChecked(f,!0),f}isImageOptions(){return!!this.controlOption.options.find(o=>o.img)}transSelectValue(o){return Array.isArray(o)?o:[o]}}const Cl=a=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("l7-iconfont"),o.setAttribute("aria-hidden","true");const f=document.createElementNS("http://www.w3.org/2000/svg","use");return f.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),o.appendChild(f),o};class Du extends null{constructor(...o){var f;super(...o),f=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:m}=f.controlOption;m==null||m(yield f.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...m){var w,C;const{imageType:D}=f.controlOption,{width:B=0,height:V=0}=(w=(C=f.mapsService.getContainer())===null||C===void 0?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{},ie=document.createElement("canvas");ie.width=B,ie.height=V;const Ee=ie.getContext("2d");return(yield Promise.all(m.map(He=>new Promise(Ot=>{const nn=new Image;nn.onload=()=>{Ot(nn)},nn.src=He})))).forEach(He=>{Ee==null||Ee.drawImage(He,0,0,B,V)}),ie.toDataURL(`image/${D}`)}))}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var o=this;return _asyncToGenerator(function*(){const f=yield o.mapsService.exportMap("png"),m=yield o.scene.exportPng("png");return o.mergeImage(...[f,m].filter(w=>w))})()}}const vu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ws=(()=>{if(typeof document=="undefined")return!1;const a=vu[0],o={};for(const f of vu)if((f==null?void 0:f[1])in document){for(const[w,C]of f.entries())o[a[w]]=C;return o}return!1})(),wl={change:ws.fullscreenchange,error:ws.fullscreenerror};let ml={request(a=document.documentElement,o){return new Promise((f,m)=>{const w=()=>{ml.off("change",w),f()};ml.on("change",w);const C=a[ws.requestFullscreen](o);C instanceof Promise&&C.then(w).catch(m)})},exit(){return new Promise((a,o)=>{if(!ml.isFullscreen){a();return}const f=()=>{ml.off("change",f),a()};ml.on("change",f);const m=document[ws.exitFullscreen]();m instanceof Promise&&m.then(f).catch(o)})},toggle(a,o){return ml.isFullscreen?ml.exit():ml.request(a,o)},onchange(a){ml.on("change",a)},onerror(a){ml.on("error",a)},on(a,o){const f=wl[a];f&&document.addEventListener(f,o,!1)},off(a,o){const f=wl[a];f&&document.removeEventListener(f,o,!1)},raw:ws};Object.defineProperties(ml,{isFullscreen:{get:()=>!!document[ws.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[ws.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[ws.fullscreenEnabled]}}),ws||(ml={isEnabled:!1});var dc=null;class Uf extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(f.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:m,btnIcon:w,title:C,exitBtnText:D,exitBtnIcon:B,exitTitle:V}=this.controlOption;this.isFullscreen?(this.setBtnTitle(V),this.setBtnText(D),this.setBtnIcon(B)):(this.setBtnTitle(C),this.setBtnText(m),this.setBtnIcon(w)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(o){const{exitBtnText:f,exitBtnIcon:m,exitTitle:w}=o;this.isFullscreen&&(this.checkUpdateOption(o,["exitBtnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(o,["exitBtnText"])&&this.setBtnText(f),this.checkUpdateOption(o,["exitTitle"])&&this.setBtnTitle(w)),super.setOptions(o)}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),o}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class wc extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"getGeoLocation",()=>new Promise((m,w)=>{window.navigator.geolocation.getCurrentPosition(({coords:C})=>{const{longitude:D,latitude:B}=C!=null?C:{};!isNaN(D)&&!isNaN(B)?m([D,B]):w()},C=>{w(C)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:m}=f.controlOption,w=yield f.getGeoLocation(),C=f.mapsService.getZoom();f.mapsService.setZoomAndCenter(C>15?C:15,m?yield m(w):w)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}}function cf(a){return Object.keys(a!=null?a:{}).every(o=>["layer","name","img"].includes(o))}class jc extends null{constructor(...o){super(...o),_defineProperty(this,"onLayerChange",()=>{var f;(f=this.controlOption.layers)!==null&&f!==void 0&&f.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(f=>{const m=this.selectValue.includes(f.name),w=f.isVisible();m&&!w&&f.show(),!m&&w&&f.hide()})})}get layers(){const o=this.layerService,{layers:f}=this.controlOption;if(Array.isArray(f)&&f.length){const m=[];return f.forEach(w=>{if(w instanceof Object&&(cf(w)?m.push(w.layer):m.push(w)),typeof w=="string"){const C=o.getLayer(w)||o.getLayerByName(w);C&&m.push(C)}}),m}return o.getLayers()||[]}getDefault(o){var f;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(f=o==null?void 0:o.multiple)!==null&&f!==void 0?f:!0})}getLayerVisible(){return this.layers.filter(o=>o.isVisible()).map(o=>o.name)}getLayerOptions(){const{layers:o}=this.controlOption,f=o==null?void 0:o.every(m=>m.img);return o?o==null?void 0:o.map(m=>{if(cf(m))return{text:m.name||m.layer.name,value:m.layer.name,img:f?m.img:void 0};if(typeof m=="string"){const w=this.layerService.getLayer(m)||this.layerService.getLayerByName(m);return{text:w==null?void 0:w.name,value:w==null?void 0:w.name}}return{text:m.name,value:m.name}}):this.layers.map(m=>({text:m.name,value:m.name}))}setOptions(o){const f=this.checkUpdateOption(o,["layers","multiple"]);super.setOptions(o),f&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((o,f)=>{f===0?o.show():o.hide()})}onAdd(){var o;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class up extends da{getDefault(){return{position:re.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const o=Ie.SO.create("div","l7-control-logo");return this.setLogoContent(o),o}onRemove(){return null}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["img","href"])&&(Ie.SO.clearChildren(this.container),this.setLogoContent(this.container))}setLogoContent(o){const{href:f,img:m}=this.controlOption,w=Ie.SO.create("img");if(w.setAttribute("src",m),w.setAttribute("aria-label","AntV logo"),Ie.SO.setUnDraggable(w),f){const C=Ie.SO.create("a","l7-control-logo-link");C.target="_blank",C.href=f,C.rel="noopener nofollow",C.setAttribute("rel","noopener nofollow"),C.appendChild(w),o.appendChild(C)}else o.appendChild(w)}}const cp={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},Sh={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class Vh extends null{constructor(...o){super(...o),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const o=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([f,m])=>typeof m=="string"&&f!=="blank").map(([f,m])=>{var w;const{text:C,img:D}=(w=o[f])!==null&&w!==void 0?w:{};return{text:C!=null?C:f,value:m,img:D,key:f}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var o;if((o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m;const w=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(C=>C.key===w))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:w}else{const w=this.getMapStyle();w?this.controlOption.defaultValue=w:this.mapsService.map.once("styledata",()=>{const C=this.mapsService.getMapStyle();this.controlOption.defaultValue=C,this.setSelectValue(C,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class Hh extends null{constructor(...o){super(...o),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",f=>{let m=this.location;const w=f.lngLat||f.lnglat,{transform:C}=this.controlOption;w&&(m=[w.lng,w.lat]),this.location=m,C&&(m=C(m)),this.insertLocation2HTML(m),this.emit("locationChange",m)})}getLocation(){return this.location}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMLEFT,transform:([f,m])=>[+(+f).toFixed(6),+(+m).toFixed(6)]})}onAdd(){const o=DOM.create("div","l7-control-mouse-location");return o.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),o}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(o){this.container.innerText=o.join(", ")}}class Jf extends null{constructor(...o){super(...o),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const f=this.mapsService,{maxWidth:m}=this.controlOption,w=f.getSize()[1]/2,C=f.containerToLngLat([0,w]),D=f.containerToLngLat([m,w]),B=lnglatDistance([C.lng,C.lat],[D.lng,D.lat]);this.updateScales(B)})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const f=DOM.create("div","l7-control-scale");this.resetScaleLines(f);const{updateWhenIdle:m}=this.controlOption;return this.mapsService.on(m?"moveend":"mapmove",this.update),this.mapsService.on(m?"zoomend":"zoomchange",this.update),f}onRemove(){const{updateWhenIdle:o}=this.controlOption;this.mapsService.off(o?"zoomend":"zoomchange",this.update),this.mapsService.off(o?"moveend":"mapmove",this.update)}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(o){const{metric:f,imperial:m}=this.controlOption;f&&o&&this.updateMetric(o),m&&o&&this.updateImperial(o)}resetScaleLines(o){DOM.clearChildren(o);const{metric:f,imperial:m,maxWidth:w,lockWidth:C}=this.controlOption;C&&DOM.addStyle(o,`width: ${w}px`),f&&(this.mScale=DOM.create("div","l7-control-scale-line",o)),m&&(this.iScale=DOM.create("div","l7-control-scale-line",o)),this.update()}updateScale(o,f,m){const{maxWidth:w}=this.controlOption;o.style.width=Math.round(w*m)+"px",o.innerHTML=f}getRoundNum(o){const f=Math.pow(10,(Math.floor(o)+"").length-1);let m=o/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}updateMetric(o){const f=this.getRoundNum(o),m=f<1e3?f+" m":f/1e3+" km";this.updateScale(this.mScale,m,f/o)}updateImperial(o){const f=o*3.2808399;let m,w,C;f>5280?(m=f/5280,w=this.getRoundNum(m),this.updateScale(this.iScale,w+" mi",w/m)):(C=this.getRoundNum(f),this.updateScale(this.iScale,C+" ft",C/f))}}var Ci=L(15861),kl=L(45987);const{cloneDeep:zl}=Ie.lodashUtil;class tc{constructor(){(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"fontService",void 0)}apply(o,{styleAttributeService:f,mapService:m,fontService:w}){var C=this;this.mapService=m,this.fontService=w,o.hooks.init.tapPromise("DataMappingPlugin",(0,Ci.Z)(function*(){o.log(re.Or.MappingStart,re.KD.INIT),C.generateMaping(o,{styleAttributeService:f}),o.log(re.Or.MappingEnd,re.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var D=(0,Ci.Z)(function*(B){if(!B)return B;o.dataState.dataMappingNeedUpdate=!1,o.log(re.Or.MappingStart,re.KD.UPDATE);const V=C.generateMaping(o,{styleAttributeService:f});return o.log(re.Or.MappingEnd,re.KD.UPDATE),V});return function(B){return D.apply(this,arguments)}}()),o.hooks.beforeRender.tap("DataMappingPlugin",()=>{const D=o.getSource();if(o.layerModelNeedUpdate||!D||!D.inited)return;const B=f.getLayerStyleAttributes()||[],V=f.getLayerStyleAttribute("filter"),{dataArray:ie}=D.data;if(Array.isArray(ie)&&ie.length===0)return;const Ee=B.filter(He=>He.needRemapping);let Ce=ie;if(V!=null&&V.needRemapping&&V!==null&&V!==void 0&&V.scale&&(Ce=ie.filter(He=>this.applyAttributeMapping(V,He)[0])),Ee.length){const He=this.mapping(o,Ee,Ce,o.getEncodedData());o.setEncodedData(He)}})}generateMaping(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter"),{dataArray:C}=o.getSource().data;let D=C;w!=null&&w.scale&&(D=C.filter(V=>this.applyAttributeMapping(w,V)[0])),D=o.processData(D);const B=this.mapping(o,m,D,void 0);return o.setEncodedData(B),o.emit("dataUpdate",null),!0}mapping(o,f,m,w){const C=f.filter(B=>B.scale!==void 0).filter(B=>B.name!=="filter"),D=m.map((B,V)=>{const ie=w?w[V]:{},Ee=(0,Pr.Z)({id:B._id,coordinates:B.coordinates},ie);return C.forEach(Ce=>{let He=this.applyAttributeMapping(Ce,B);(Ce.name==="color"||Ce.name==="stroke")&&(He=He.map(Ot=>(0,Ie.CI)(Ot))),Ee[Ce.name]=Array.isArray(He)&&He.length===1?He[0]:He,Ce.name==="shape"&&(Ee.shape=this.fontService.getIconFontKey(Ee[Ce.name]))}),Ee});return f.forEach(B=>{B.needRemapping=!1}),this.adjustData2Amap2Coordinates(D,o),this.adjustData2SimpleCoordinates(D),D}adjustData2Amap2Coordinates(o,f){if(o.length>0&&this.mapService.version==="GAODE2.x"){const m=f.coordCenter||f.getSource().center;o.filter(w=>!w.originCoordinates).map(w=>{w.version="GAODE2.x",w.originCoordinates=zl(w.coordinates),w.coordinates=this.mapService.coordToAMap2RelativeCoordinates(w.coordinates,m)})}}adjustData2SimpleCoordinates(o){o.length>0&&this.mapService.version==="SIMPLE"&&o.map(f=>{f.simpleCoordinate||(f.coordinates=this.unProjectCoordinates(f.coordinates),f.simpleCoordinate=!0)})}unProjectCoordinates(o){if(typeof o[0]=="number")return this.mapService.simpleMapCoord.unproject(o);if(o[0]&&o[0][0]instanceof Array){const f=[];return o.map(m=>{const w=[];m.map(C=>{w.push(this.mapService.simpleMapCoord.unproject(C))}),f.push(w)}),f}else{const f=[];return o.map(m=>{f.push(this.mapService.simpleMapCoord.unproject(m))}),f}}applyAttributeMapping(o,f){var m;if(!o.scale)return[];const w=(o==null||(m=o.scale)===null||m===void 0?void 0:m.scalers)||[],C=[];return w.forEach(({field:B})=>{var V;(f.hasOwnProperty(B)||((V=o.scale)===null||V===void 0?void 0:V.type)==="variable")&&C.push(f[B])}),o.mapping?o.mapping(C):[]}getArrowPoints(o,f){const m=[f[0]-o[0],f[1]-o[1]],w=(0,Ie.Fv)(m);return[o[0]+w[0]*1e-4,o[1]+w[1]*1e-4]}}class Tf{constructor(){(0,Qt.Z)(this,"mapService",void 0)}apply(o){var f=this;this.mapService=o.getContainer().mapService,o.hooks.init.tapPromise("DataSourcePlugin",(0,Ci.Z)(function*(){o.log(re.Or.SourceInitStart,re.KD.INIT);let m=o.getSource();if(!m){const{data:w,options:C}=o.sourceOption||o.defaultSourceConfig;m=new co(w,C),o.setSource(m)}m.inited?(f.updateClusterData(o),o.log(re.Or.SourceInitEnd,re.KD.INIT)):yield new Promise(w=>{m.on("update",C=>{C.type==="inited"&&(f.updateClusterData(o),o.log(re.Or.SourceInitEnd,re.KD.INIT)),w(null)})})})),o.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Ci.Z)(function*(){const m=f.updateClusterData(o),w=o.dataState.dataSourceNeedUpdate;return o.dataState.dataSourceNeedUpdate=!1,m||w}))}updateClusterData(o){if(o.isTileLayer||o.tileLayer||!o.getSource())return!1;const f=o.getSource(),m=f.cluster,{zoom:w=0}=f.clusterOptions,C=this.mapService.getZoom()-1,D=o.dataState.dataSourceNeedUpdate;return m&&D&&f.updateClusterData(Math.floor(C)),m&&Math.abs(o.clusterZoom-C)>=1?(w!==Math.floor(C)&&f.updateClusterData(Math.floor(C)),o.clusterZoom=C,!0):!1}}var jf=L(64599),Wa=L.n(jf);function Tu(a,o){var f,m;if(o===void 0){var w=Wa()(a),C;try{for(w.s();!(C=w.n()).done;){var D=C.value;D!=null&&(f===void 0?D>=D&&(f=m=D):(f>D&&(f=D),m<D&&(m=D)))}}catch(Ce){w.e(Ce)}finally{w.f()}}else{var B=-1,V=Wa()(a),ie;try{for(V.s();!(ie=V.n()).done;){var Ee=ie.value;(Ee=o(Ee,++B,a))!=null&&(f===void 0?Ee>=Ee&&(f=m=Ee):(f>Ee&&(f=Ee),m<Ee&&(m=Ee)))}}catch(Ce){V.e(Ce)}finally{V.f()}}return[f,m]}var Ol=L(37620);function Af(a,o,f,m,w){var C=a*a,D=C*a;return((1-3*a+3*C-D)*o+(4-6*C+3*D)*f+(1+3*a+3*C-3*D)*m+D*w)/6}function Gp(a){var o=a.length-1;return function(f){var m=f<=0?f=0:f>=1?(f=1,o-1):Math.floor(f*o),w=a[m],C=a[m+1],D=m>0?a[m-1]:2*w-C,B=m<o-1?a[m+2]:2*C-w;return Af((f-m/o)*o,D,w,C,B)}}function Gh(a){var o=a.length;return function(f){var m=Math.floor(((f%=1)<0?++f:f)*o),w=a[(m+o-1)%o],C=a[m%o],D=a[(m+1)%o],B=a[(m+2)%o];return Af((f-m/o)*o,w,C,D,B)}}function Wp(a){return function(){return a}}function Wh(a,o){return function(f){return a+f*o}}function Zh(a,o,f){return a=Math.pow(a,f),o=Math.pow(o,f)-a,f=1/f,function(m){return Math.pow(a+m*o,f)}}function eh(a,o){var f=o-a;return f?Wh(a,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(a)?o:a)}function x0(a){return(a=+a)==1?Bv:function(o,f){return f-o?Zh(o,f,a):Wp(isNaN(o)?f:o)}}function Bv(a,o){var f=o-a;return f?Wh(a,f):Wp(isNaN(a)?o:a)}var Dd=function a(o){var f=x0(o);function m(w,C){var D=f((w=(0,Ol.B8)(w)).r,(C=(0,Ol.B8)(C)).r),B=f(w.g,C.g),V=f(w.b,C.b),ie=Bv(w.opacity,C.opacity);return function(Ee){return w.r=D(Ee),w.g=B(Ee),w.b=V(Ee),w.opacity=ie(Ee),w+""}}return m.gamma=a,m}(1);function pc(a){return function(o){var f=o.length,m=new Array(f),w=new Array(f),C=new Array(f),D,B;for(D=0;D<f;++D)B=(0,Ol.B8)(o[D]),m[D]=B.r||0,w[D]=B.g||0,C[D]=B.b||0;return m=a(m),w=a(w),C=a(C),B.opacity=1,function(V){return B.r=m(V),B.g=w(V),B.b=C(V),B+""}}}var jg=pc(Gp),t_=pc(Gh);function fp(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function Vg(a){return a.length===1&&(a=n_(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)<0?m=C+1:w=C}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)>0?w=C:m=C+1}return m}}}function n_(a){return function(o,f){return fp(a(o),f)}}var Hg=Vg(fp),kv=Hg.right,w1=Hg.left,Zp=kv,Dm=Array.prototype,Xp=Dm.slice,zv=Dm.map,Lm=Math.sqrt(50),Nm=Math.sqrt(10),Fm=Math.sqrt(2);function Gg(a,o,f){var m,w=-1,C,D,B;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(B=ov(a,o,f))===0||!isFinite(B))return[];if(B>0)for(a=Math.ceil(a/B),o=Math.floor(o/B),D=new Array(C=Math.ceil(o-a+1));++w<C;)D[w]=(a+w)*B;else for(a=Math.floor(a*B),o=Math.ceil(o*B),D=new Array(C=Math.ceil(a-o+1));++w<C;)D[w]=(a-w)/B;return m&&D.reverse(),D}function ov(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,w);return w>=0?(C>=Lm?10:C>=Nm?5:C>=Fm?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(C>=Lm?10:C>=Nm?5:C>=Fm?2:1)}function av(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/w;return C>=Lm?w*=10:C>=Nm?w*=5:C>=Fm&&(w*=2),o<a?-w:w}function sv(){var a=identity,o=extent,f=sturges;function m(w){var C,D=w.length,B,V=new Array(D);for(C=0;C<D;++C)V[C]=a(w[C],C,w);var ie=o(V),Ee=ie[0],Ce=ie[1],He=f(V,Ee,Ce);Array.isArray(He)||(He=tickStep(Ee,Ce,He),He=range(Math.ceil(Ee/He)*He,Ce,He));for(var Ot=He.length;He[0]<=Ee;)He.shift(),--Ot;for(;He[Ot-1]>Ce;)He.pop(),--Ot;var nn=new Array(Ot+1),Bn;for(C=0;C<=Ot;++C)Bn=nn[C]=[],Bn.x0=C>0?He[C-1]:Ee,Bn.x1=C<Ot?He[C]:Ce;for(C=0;C<D;++C)B=V[C],Ee<=B&&B<=Ce&&nn[bisect(He,B,0,Ot)].push(w[C]);return nn}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function lv(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function uv(a){return a===null?NaN:+a}function hp(a,o,f){if(f==null&&(f=uv),!!(m=a.length)){if((o=+o)<=0||m<2)return+f(a[0],0,a);if(o>=1)return+f(a[m-1],m-1,a);var m,w=(m-1)*o,C=Math.floor(w),D=+f(a[C],C,a),B=+f(a[C+1],C+1,a);return D+(B-D)*(w-C)}}var ff="$";function gl(){}gl.prototype=Ld.prototype={constructor:gl,has:function(a){return ff+a in this},get:function(a){return this[ff+a]},set:function(a,o){return this[ff+a]=o,this},remove:function(a){var o=ff+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===ff&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===ff&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===ff&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===ff&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===ff&&++a;return a},empty:function(){for(var a in this)if(a[0]===ff)return!1;return!0},each:function(a){for(var o in this)o[0]===ff&&a(this[o],o.slice(1),this)}};function Ld(a,o){var f=new gl;if(a instanceof gl)a.each(function(B,V){f.set(V,B)});else if(Array.isArray(a)){var m=-1,w=a.length,C;if(o==null)for(;++m<w;)f.set(m,a[m]);else for(;++m<w;)f.set(o(C=a[m],m,a),C)}else if(a)for(var D in a)f.set(D,a[D]);return f}var E0=Ld;function S0(){var a=[],o=[],f,m,w;function C(B,V,ie,Ee){if(V>=a.length)return f!=null&&B.sort(f),m!=null?m(B):B;for(var Ce=-1,He=B.length,Ot=a[V++],nn,Bn,sr=map(),xr,fr=ie();++Ce<He;)(xr=sr.get(nn=Ot(Bn=B[Ce])+""))?xr.push(Bn):sr.set(nn,[Bn]);return sr.each(function(Yr,Pi){Ee(fr,Pi,C(Yr,V,ie,Ee))}),fr}function D(B,V){if(++V>a.length)return B;var ie,Ee=o[V-1];return m!=null&&V>=a.length?ie=B.entries():(ie=[],B.each(function(Ce,He){ie.push({key:He,values:D(Ce,V)})})),Ee!=null?ie.sort(function(Ce,He){return Ee(Ce.key,He.key)}):ie}return w={object:function(B){return C(B,0,Yp,dp)},map:function(B){return C(B,0,$p,pp)},entries:function(B){return D(C(B,0,$p,pp),0)},key:function(B){return a.push(B),w},sortKeys:function(B){return o[a.length-1]=B,w},sortValues:function(B){return f=B,w},rollup:function(B){return m=B,w}}}function Yp(){return{}}function dp(a,o,f){a[o]=f}function $p(){return map()}function pp(a,o,f){a.set(o,f)}function th(){}var Vf=E0.prototype;th.prototype=qp.prototype={constructor:th,has:Vf.has,add:function(a){return a+="",this[ff+a]=a,this},remove:Vf.remove,clear:Vf.clear,values:Vf.keys,size:Vf.size,empty:Vf.empty,each:Vf.each};function qp(a,o){var f=new th;if(a instanceof th)a.each(function(C){f.add(C)});else if(a){var m=-1,w=a.length;if(o==null)for(;++m<w;)f.add(a[m]);else for(;++m<w;)f.add(o(a[m],m,a))}return f}var r_=null,Xh=Array.prototype,Nd=Xh.map,Yh=Xh.slice;function $h(a,o){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(o).domain(a);break}return this}function Uv(a,o){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(o).domain(a);break}return this}var jv={name:"implicit"};function hf(){var a=E0(),o=[],f=[],m=jv;function w(C){var D=C+"",B=a.get(D);if(!B){if(m!==jv)return m;a.set(D,B=o.push(C))}return f[(B-1)%f.length]}return w.domain=function(C){if(!arguments.length)return o.slice();o=[],a=E0();for(var D=-1,B=C.length,V,ie;++D<B;)a.has(ie=(V=C[D])+"")||a.set(ie,o.push(V));return w},w.range=function(C){return arguments.length?(f=Yh.call(C),w):f.slice()},w.unknown=function(C){return arguments.length?(m=C,w):m},w.copy=function(){return hf(o,f).unknown(m)},$h.apply(w,arguments),w}function Fd(){var a=ordinal().unknown(void 0),o=a.domain,f=a.range,m=[0,1],w,C,D=!1,B=0,V=0,ie=.5;delete a.unknown;function Ee(){var Ce=o().length,He=m[1]<m[0],Ot=m[He-0],nn=m[1-He];w=(nn-Ot)/Math.max(1,Ce-B+V*2),D&&(w=Math.floor(w)),Ot+=(nn-Ot-w*(Ce-B))*ie,C=w*(1-B),D&&(Ot=Math.round(Ot),C=Math.round(C));var Bn=sequence(Ce).map(function(sr){return Ot+w*sr});return f(He?Bn.reverse():Bn)}return a.domain=function(Ce){return arguments.length?(o(Ce),Ee()):o()},a.range=function(Ce){return arguments.length?(m=[+Ce[0],+Ce[1]],Ee()):m.slice()},a.rangeRound=function(Ce){return m=[+Ce[0],+Ce[1]],D=!0,Ee()},a.bandwidth=function(){return C},a.step=function(){return w},a.round=function(Ce){return arguments.length?(D=!!Ce,Ee()):D},a.padding=function(Ce){return arguments.length?(B=Math.min(1,V=+Ce),Ee()):B},a.paddingInner=function(Ce){return arguments.length?(B=Math.min(1,Ce),Ee()):B},a.paddingOuter=function(Ce){return arguments.length?(V=+Ce,Ee()):V},a.align=function(Ce){return arguments.length?(ie=Math.max(0,Math.min(1,Ce)),Ee()):ie},a.copy=function(){return Fd(o(),m).round(D).paddingInner(B).paddingOuter(V).align(ie)},initRange.apply(Ee(),arguments)}function Bm(a){var o=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return Bm(o())},a}function i_(){return Bm(Fd.apply(null,arguments).paddingInner(1))}function Wg(a,o){return(isNumberArray(o)?numberArray:km)(a,o)}function km(a,o){var f=o?o.length:0,m=a?Math.min(f,a.length):0,w=new Array(m),C=new Array(f),D;for(D=0;D<m;++D)w[D]=nc(a[D],o[D]);for(;D<f;++D)C[D]=o[D];return function(B){for(D=0;D<m;++D)C[D]=w[D](B);return C}}function Kp(a,o){var f=new Date;return a=+a,o=+o,function(m){return f.setTime(a*(1-m)+o*m),f}}function Vv(a,o){return a=+a,o=+o,function(f){return a*(1-f)+o*f}}function qh(a,o){var f={},m={},w;(a===null||typeof a!="object")&&(a={}),(o===null||typeof o!="object")&&(o={});for(w in o)w in a?f[w]=nc(a[w],o[w]):m[w]=o[w];return function(C){for(w in f)m[w]=f[w](C);return m}}var cv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bd=new RegExp(cv.source,"g");function vp(a){return function(){return a}}function Zg(a){return function(o){return a(o)+""}}function mp(a,o){var f=cv.lastIndex=Bd.lastIndex=0,m,w,C,D=-1,B=[],V=[];for(a=a+"",o=o+"";(m=cv.exec(a))&&(w=Bd.exec(o));)(C=w.index)>f&&(C=o.slice(f,C),B[D]?B[D]+=C:B[++D]=C),(m=m[0])===(w=w[0])?B[D]?B[D]+=w:B[++D]=w:(B[++D]=null,V.push({i:D,x:Vv(m,w)})),f=Bd.lastIndex;return f<o.length&&(C=o.slice(f),B[D]?B[D]+=C:B[++D]=C),B.length<2?V[0]?Zg(V[0].x):vp(o):(o=V.length,function(ie){for(var Ee=0,Ce;Ee<o;++Ee)B[(Ce=V[Ee]).i]=Ce.x(ie);return B.join("")})}function Hv(a,o){o||(o=[]);var f=a?Math.min(o.length,a.length):0,m=o.slice(),w;return function(C){for(w=0;w<f;++w)m[w]=a[w]*(1-C)+o[w]*C;return m}}function Gv(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function nc(a,o){var f=typeof o,m;return o==null||f==="boolean"?Wp(o):(f==="number"?Vv:f==="string"?(m=(0,Ol.ZP)(o))?(o=m,Dd):mp:o instanceof Ol.ZP?Dd:o instanceof Date?Kp:Gv(o)?Hv:Array.isArray(o)?km:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?qh:Vv)(a,o)}function vc(a,o){return a=+a,o=+o,function(f){return Math.round(a*(1-f)+o*f)}}function Au(a){return function(){return a}}function Cf(a){return+a}var zm=[0,1];function Za(a){return a}function Qp(a,o){return(o-=a=+a)?function(f){return(f-a)/o}:Au(isNaN(o)?NaN:.5)}function Um(a){var o=a[0],f=a[a.length-1],m;return o>f&&(m=o,o=f,f=m),function(w){return Math.max(o,Math.min(f,w))}}function o_(a,o,f){var m=a[0],w=a[1],C=o[0],D=o[1];return w<m?(m=Qp(w,m),C=f(D,C)):(m=Qp(m,w),C=f(C,D)),function(B){return C(m(B))}}function Xg(a,o,f){var m=Math.min(a.length,o.length)-1,w=new Array(m),C=new Array(m),D=-1;for(a[m]<a[0]&&(a=a.slice().reverse(),o=o.slice().reverse());++D<m;)w[D]=Qp(a[D],a[D+1]),C[D]=f(o[D],o[D+1]);return function(B){var V=Zp(a,B,1,m)-1;return C[V](w[V](B))}}function Wv(a,o){return o.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function fv(){var a=zm,o=zm,f=nc,m,w,C,D=Za,B,V,ie;function Ee(){return B=Math.min(a.length,o.length)>2?Xg:o_,V=ie=null,Ce}function Ce(He){return isNaN(He=+He)?C:(V||(V=B(a.map(m),o,f)))(m(D(He)))}return Ce.invert=function(He){return D(w((ie||(ie=B(o,a.map(m),Vv)))(He)))},Ce.domain=function(He){return arguments.length?(a=Nd.call(He,Cf),D===Za||(D=Um(a)),Ee()):a.slice()},Ce.range=function(He){return arguments.length?(o=Yh.call(He),Ee()):o.slice()},Ce.rangeRound=function(He){return o=Yh.call(He),f=vc,Ee()},Ce.clamp=function(He){return arguments.length?(D=He?Um(a):Za,Ce):D!==Za},Ce.interpolate=function(He){return arguments.length?(f=He,Ee()):f},Ce.unknown=function(He){return arguments.length?(C=He,Ce):C},function(He,Ot){return m=He,w=Ot,Ee()}}function mc(a,o){return fv()(a,o)}var a_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kd(a){if(!(o=a_.exec(a)))throw new Error("invalid format: "+a);var o;return new hv({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}kd.prototype=hv.prototype;function hv(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}hv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yg(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function w0(a,o){if((f=(a=o?a.toExponential(o-1):a.toExponential()).indexOf("e"))<0)return null;var f,m=a.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+a.slice(f+1)]}function gp(a){return a=w0(Math.abs(a)),a?a[1]:NaN}function s_(a,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gp(o)/3)))*3-gp(Math.abs(a)))}function Zv(a,o){return function(f,m){for(var w=f.length,C=[],D=0,B=a[0],V=0;w>0&&B>0&&(V+B+1>m&&(B=Math.max(1,m-V)),C.push(f.substring(w-=B,w+B)),!((V+=B+1)>m));)B=a[D=(D+1)%a.length];return C.reverse().join(o)}}function $g(a){return function(o){return o.replace(/[0-9]/g,function(f){return a[+f]})}}function Ue(a){e:for(var o=a.length,f=1,m=-1,w;f<o;++f)switch(a[f]){case".":m=w=f;break;case"0":m===0&&(m=f),w=f;break;default:if(!+a[f])break e;m>0&&(m=0);break}return m>0?a.slice(0,m)+a.slice(w+1):a}var qt;function On(a,o){var f=w0(a,o);if(!f)return a+"";var m=f[0],w=f[1],C=w-(qt=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=m.length;return C===D?m:C>D?m+new Array(C-D+1).join("0"):C>0?m.slice(0,C)+"."+m.slice(C):"0."+new Array(1-C).join("0")+w0(a,Math.max(0,o+C-1))[0]}function Cr(a,o){var f=w0(a,o);if(!f)return a+"";var m=f[0],w=f[1];return w<0?"0."+new Array(-w).join("0")+m:m.length>w+1?m.slice(0,w+1)+"."+m.slice(w+1):m+new Array(w-m.length+2).join("0")}var $r={"%":function(a,o){return(a*100).toFixed(o)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:Yg,e:function(a,o){return a.toExponential(o)},f:function(a,o){return a.toFixed(o)},g:function(a,o){return a.toPrecision(o)},o:function(a){return Math.round(a).toString(8)},p:function(a,o){return Cr(a*100,o)},r:Cr,s:On,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Mr(a){return a}var yr=Array.prototype.map,Oi=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function di(a){var o=a.grouping===void 0||a.thousands===void 0?Mr:Zv(yr.call(a.grouping,Number),a.thousands+""),f=a.currency===void 0?"":a.currency[0]+"",m=a.currency===void 0?"":a.currency[1]+"",w=a.decimal===void 0?".":a.decimal+"",C=a.numerals===void 0?Mr:$g(yr.call(a.numerals,String)),D=a.percent===void 0?"%":a.percent+"",B=a.minus===void 0?"-":a.minus+"",V=a.nan===void 0?"NaN":a.nan+"";function ie(Ce){Ce=kd(Ce);var He=Ce.fill,Ot=Ce.align,nn=Ce.sign,Bn=Ce.symbol,sr=Ce.zero,xr=Ce.width,fr=Ce.comma,Yr=Ce.precision,Pi=Ce.trim,Co=Ce.type;Co==="n"?(fr=!0,Co="g"):$r[Co]||(Yr===void 0&&(Yr=12),Pi=!0,Co="g"),(sr||He==="0"&&Ot==="=")&&(sr=!0,He="0",Ot="=");var ao=Bn==="$"?f:Bn==="#"&&/[boxX]/.test(Co)?"0"+Co.toLowerCase():"",Zr=Bn==="$"?m:/[%p]/.test(Co)?D:"",Qi=$r[Co],Ma=/[defgprs%]/.test(Co);Yr=Yr===void 0?6:/[gprs]/.test(Co)?Math.max(1,Math.min(21,Yr)):Math.max(0,Math.min(20,Yr));function Ms(na){var Qa=ao,Ws=Zr,lh,ku,vs;if(Co==="c")Ws=Qi(na)+Ws,na="";else{na=+na;var Tg=na<0||1/na<0;if(na=isNaN(na)?V:Qi(Math.abs(na),Yr),Pi&&(na=Ue(na)),Tg&&+na==0&&nn!=="+"&&(Tg=!1),Qa=(Tg?nn==="("?nn:B:nn==="-"||nn==="("?"":nn)+Qa,Ws=(Co==="s"?Oi[8+qt/3]:"")+Ws+(Tg&&nn==="("?")":""),Ma){for(lh=-1,ku=na.length;++lh<ku;)if(vs=na.charCodeAt(lh),48>vs||vs>57){Ws=(vs===46?w+na.slice(lh+1):na.slice(lh))+Ws,na=na.slice(0,lh);break}}}fr&&!sr&&(na=o(na,1/0));var Ag=Qa.length+na.length+Ws.length,qd=Ag<xr?new Array(xr-Ag+1).join(He):"";switch(fr&&sr&&(na=o(qd+na,qd.length?xr-Ws.length:1/0),qd=""),Ot){case"<":na=Qa+na+Ws+qd;break;case"=":na=Qa+qd+na+Ws;break;case"^":na=qd.slice(0,Ag=qd.length>>1)+Qa+na+Ws+qd.slice(Ag);break;default:na=qd+Qa+na+Ws;break}return C(na)}return Ms.toString=function(){return Ce+""},Ms}function Ee(Ce,He){var Ot=ie((Ce=kd(Ce),Ce.type="f",Ce)),nn=Math.max(-8,Math.min(8,Math.floor(gp(He)/3)))*3,Bn=Math.pow(10,-nn),sr=Oi[8+nn/3];return function(xr){return Ot(Bn*xr)+sr}}return{format:ie,formatPrefix:Ee}}var ki,Mi,Bi;Xi({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Xi(a){return ki=di(a),Mi=ki.format,Bi=ki.formatPrefix,ki}function mi(a,o){return a=Math.abs(a),o=Math.abs(o)-a,Math.max(0,gp(o)-gp(a))+1}function Ui(a){return Math.max(0,-gp(Math.abs(a)))}function dr(a,o,f,m){var w=av(a,o,f),C;switch(m=kd(m==null?",f":m),m.type){case"s":{var D=Math.max(Math.abs(a),Math.abs(o));return m.precision==null&&!isNaN(C=s_(w,D))&&(m.precision=C),Bi(m,D)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(C=mi(w,Math.max(Math.abs(a),Math.abs(o))))&&(m.precision=C-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(C=Ui(w))&&(m.precision=C-(m.type==="%")*2);break}}return Mi(m)}function Br(a){var o=a.domain;return a.ticks=function(f){var m=o();return Gg(m[0],m[m.length-1],f==null?10:f)},a.tickFormat=function(f,m){var w=o();return dr(w[0],w[w.length-1],f==null?10:f,m)},a.nice=function(f){f==null&&(f=10);var m=o(),w=0,C=m.length-1,D=m[w],B=m[C],V;return B<D&&(V=D,D=B,B=V,V=w,w=C,C=V),V=ov(D,B,f),V>0?(D=Math.floor(D/V)*V,B=Math.ceil(B/V)*V,V=ov(D,B,f)):V<0&&(D=Math.ceil(D*V)/V,B=Math.floor(B*V)/V,V=ov(D,B,f)),V>0?(m[w]=Math.floor(D/V)*V,m[C]=Math.ceil(B/V)*V,o(m)):V<0&&(m[w]=Math.ceil(D*V)/V,m[C]=Math.floor(B*V)/V,o(m)),a},a}function gi(){var a=mc(Za,Za);return a.copy=function(){return Wv(a,gi())},$h.apply(a,arguments),Br(a)}function oo(a){var o;function f(m){return isNaN(m=+m)?o:m}return f.invert=f,f.domain=f.range=function(m){return arguments.length?(a=map.call(m,number),f):a.slice()},f.unknown=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return oo(a).unknown(o)},a=arguments.length?map.call(a,number):[0,1],linearish(f)}function ii(a,o){a=a.slice();var f=0,m=a.length-1,w=a[f],C=a[m],D;return C<w&&(D=f,f=m,m=D,D=w,w=C,C=D),a[f]=o.floor(w),a[m]=o.ceil(C),a}function to(a){return Math.log(a)}function bi(a){return Math.exp(a)}function no(a){return-Math.log(-a)}function li(a){return-Math.exp(-a)}function pi(a){return isFinite(a)?+("1e"+a):a<0?0:a}function jo(a){return a===10?pi:a===Math.E?Math.exp:function(o){return Math.pow(a,o)}}function pa(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(o){return Math.log(o)/a})}function Ki(a){return function(o){return-a(-o)}}function wi(a){var o=a(to,bi),f=o.domain,m=10,w,C;function D(){return w=pa(m),C=jo(m),f()[0]<0?(w=Ki(w),C=Ki(C),a(no,li)):a(to,bi),o}return o.base=function(B){return arguments.length?(m=+B,D()):m},o.domain=function(B){return arguments.length?(f(B),D()):f()},o.ticks=function(B){var V=f(),ie=V[0],Ee=V[V.length-1],Ce;(Ce=Ee<ie)&&(He=ie,ie=Ee,Ee=He);var He=w(ie),Ot=w(Ee),nn,Bn,sr,xr=B==null?10:+B,fr=[];if(!(m%1)&&Ot-He<xr){if(He=Math.round(He)-1,Ot=Math.round(Ot)+1,ie>0){for(;He<Ot;++He)for(Bn=1,nn=C(He);Bn<m;++Bn)if(sr=nn*Bn,!(sr<ie)){if(sr>Ee)break;fr.push(sr)}}else for(;He<Ot;++He)for(Bn=m-1,nn=C(He);Bn>=1;--Bn)if(sr=nn*Bn,!(sr<ie)){if(sr>Ee)break;fr.push(sr)}}else fr=Gg(He,Ot,Math.min(Ot-He,xr)).map(C);return Ce?fr.reverse():fr},o.tickFormat=function(B,V){if(V==null&&(V=m===10?".0e":","),typeof V!="function"&&(V=Mi(V)),B===1/0)return V;B==null&&(B=10);var ie=Math.max(1,m*B/o.ticks().length);return function(Ee){var Ce=Ee/C(Math.round(w(Ee)));return Ce*m<m-.5&&(Ce*=m),Ce<=ie?V(Ee):""}},o.nice=function(){return f(ii(f(),{floor:function(B){return C(Math.floor(w(B)))},ceil:function(B){return C(Math.ceil(w(B)))}}))},o}function qr(){var a=wi(fv()).domain([1,10]);return a.copy=function(){return Wv(a,qr()).base(a.base())},$h.apply(a,arguments),a}function Bo(a){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/a))}}function Ca(a){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*a}}function so(a){var o=1,f=a(Bo(o),Ca(o));return f.constant=function(m){return arguments.length?a(Bo(o=+m),Ca(o)):o},linearish(f)}function va(){var a=so(transformer());return a.copy=function(){return copy(a,va()).constant(a.constant())},initRange.apply(a,arguments)}function ua(a){return function(o){return o<0?-Math.pow(-o,a):Math.pow(o,a)}}function Ko(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function ds(a){return a<0?-a*a:a*a}function Wl(a){var o=a(Za,Za),f=1;function m(){return f===1?a(Za,Za):f===.5?a(Ko,ds):a(ua(f),ua(1/f))}return o.exponent=function(w){return arguments.length?(f=+w,m()):f},Br(o)}function mu(){var a=Wl(fv());return a.copy=function(){return Wv(a,mu()).exponent(a.exponent())},$h.apply(a,arguments),a}function es(){return mu.apply(null,arguments).exponent(.5)}function Zl(){var a=[],o=[],f=[],m;function w(){var D=0,B=Math.max(1,o.length);for(f=new Array(B-1);++D<B;)f[D-1]=hp(a,D/B);return C}function C(D){return isNaN(D=+D)?m:o[Zp(f,D)]}return C.invertExtent=function(D){var B=o.indexOf(D);return B<0?[NaN,NaN]:[B>0?f[B-1]:a[0],B<f.length?f[B]:a[a.length-1]]},C.domain=function(D){if(!arguments.length)return a.slice();a=[];for(var B=0,V=D.length,ie;B<V;++B)ie=D[B],ie!=null&&!isNaN(ie=+ie)&&a.push(ie);return a.sort(fp),w()},C.range=function(D){return arguments.length?(o=Yh.call(D),w()):o.slice()},C.unknown=function(D){return arguments.length?(m=D,C):m},C.quantiles=function(){return f.slice()},C.copy=function(){return Zl().domain(a).range(o).unknown(m)},$h.apply(C,arguments)}function Qs(){var a=0,o=1,f=1,m=[.5],w=[0,1],C;function D(V){return V<=V?w[Zp(m,V,0,f)]:C}function B(){var V=-1;for(m=new Array(f);++V<f;)m[V]=((V+1)*o-(V-f)*a)/(f+1);return D}return D.domain=function(V){return arguments.length?(a=+V[0],o=+V[1],B()):[a,o]},D.range=function(V){return arguments.length?(f=(w=Yh.call(V)).length-1,B()):w.slice()},D.invertExtent=function(V){var ie=w.indexOf(V);return ie<0?[NaN,NaN]:ie<1?[a,m[0]]:ie>=f?[m[f-1],o]:[m[ie-1],m[ie]]},D.unknown=function(V){return arguments.length&&(C=V),D},D.thresholds=function(){return m.slice()},D.copy=function(){return Qs().domain([a,o]).range(w).unknown(C)},$h.apply(Br(D),arguments)}function se(){var a=[.5],o=[0,1],f,m=1;function w(C){return C<=C?o[Zp(a,C,0,m)]:f}return w.domain=function(C){return arguments.length?(a=Yh.call(C),m=Math.min(a.length,o.length-1),w):a.slice()},w.range=function(C){return arguments.length?(o=Yh.call(C),m=Math.min(a.length,o.length-1),w):o.slice()},w.invertExtent=function(C){var D=o.indexOf(C);return[a[D-1],a[D]]},w.unknown=function(C){return arguments.length?(f=C,w):f},w.copy=function(){return se().domain(a).range(o).unknown(f)},$h.apply(w,arguments)}var tu=new Date,fl=new Date;function or(a,o,f,m){function w(C){return a(C=arguments.length===0?new Date:new Date(+C)),C}return w.floor=function(C){return a(C=new Date(+C)),C},w.ceil=function(C){return a(C=new Date(C-1)),o(C,1),a(C),C},w.round=function(C){var D=w(C),B=w.ceil(C);return C-D<B-C?D:B},w.offset=function(C,D){return o(C=new Date(+C),D==null?1:Math.floor(D)),C},w.range=function(C,D,B){var V=[],ie;if(C=w.ceil(C),B=B==null?1:Math.floor(B),!(C<D)||!(B>0))return V;do V.push(ie=new Date(+C)),o(C,B),a(C);while(ie<C&&C<D);return V},w.filter=function(C){return or(function(D){if(D>=D)for(;a(D),!C(D);)D.setTime(D-1)},function(D,B){if(D>=D)if(B<0)for(;++B<=0;)for(;o(D,-1),!C(D););else for(;--B>=0;)for(;o(D,1),!C(D););})},f&&(w.count=function(C,D){return tu.setTime(+C),fl.setTime(+D),a(tu),a(fl),Math.floor(f(tu,fl))},w.every=function(C){return C=Math.floor(C),!isFinite(C)||!(C>0)?null:C>1?w.filter(m?function(D){return m(D)%C===0}:function(D){return w.count(0,D)%C===0}):w}),w}var Qr=or(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o)},function(a,o){return o.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Qr.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:or(function(o){o.setFullYear(Math.floor(o.getFullYear()/a)*a),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,f){o.setFullYear(o.getFullYear()+f*a)})};var Js=Qr,Oa=Qr.range,Hu=or(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,o){a.setMonth(a.getMonth()+o)},function(a,o){return o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),Ns=Hu,oa=Hu.range,Pa=1e3,ts=6e4,gu=36e5,wh=864e5,_n=6048e5;function Or(a){return or(function(o){o.setDate(o.getDate()-(o.getDay()+7-a)%7),o.setHours(0,0,0,0)},function(o,f){o.setDate(o.getDate()+f*7)},function(o,f){return(f-o-(f.getTimezoneOffset()-o.getTimezoneOffset())*ts)/_n})}var Sr=Or(0),lo=Or(1),Na=Or(2),el=Or(3),Nt=Or(4),rn=Or(5),Mn=Or(6),Tr=Sr.range,Er=lo.range,Hn=Na.range,tr=el.range,ar=Nt.range,Sn=rn.range,Zn=Mn.range,tn=or(function(a){a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*ts)/wh},function(a){return a.getDate()-1}),$n=tn,kr=tn.range,jr=or(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Pa-a.getMinutes()*ts)},function(a,o){a.setTime(+a+o*gu)},function(a,o){return(o-a)/gu},function(a){return a.getHours()}),vi=jr,oi=jr.range,yi=or(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Pa)},function(a,o){a.setTime(+a+o*ts)},function(a,o){return(o-a)/ts},function(a){return a.getMinutes()}),Do=yi,Hi=yi.range,Yi=or(function(a){a.setTime(a-a.getMilliseconds())},function(a,o){a.setTime(+a+o*Pa)},function(a,o){return(o-a)/Pa},function(a){return a.getUTCSeconds()}),ia=Yi,ea=Yi.range,_s=or(function(){},function(a,o){a.setTime(+a+o)},function(a,o){return o-a});_s.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?or(function(o){o.setTime(Math.floor(o/a)*a)},function(o,f){o.setTime(+o+f*a)},function(o,f){return(f-o)/a}):_s};var Lu=_s,Tc=_s.range;function yp(a){return or(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-a)%7),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCDate(o.getUTCDate()+f*7)},function(o,f){return(f-o)/_n})}var nh=yp(0),Xv=yp(1),_p=yp(2),jm=yp(3),dv=yp(4),_x=yp(5),qg=yp(6),T1=nh.range,T0=Xv.range,bx=_p.range,Vm=jm.range,Kg=dv.range,rc=_x.range,Xl=qg.range,Hm=or(function(a){a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+o)},function(a,o){return(o-a)/wh},function(a){return a.getUTCDate()-1}),Yv=Hm,QE=Hm.range,l_=or(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o)},function(a,o){return o.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});l_.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:or(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/a)*a),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCFullYear(o.getUTCFullYear()+f*a)})};var pv=l_,A1=l_.range;function Jp(a){if(0<=a.y&&a.y<100){var o=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return o.setFullYear(a.y),o}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function A0(a){if(0<=a.y&&a.y<100){var o=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return o.setUTCFullYear(a.y),o}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Gm(a,o,f){return{y:a,m:o,d:f,H:0,M:0,S:0,L:0}}function Gu(a){var o=a.dateTime,f=a.date,m=a.time,w=a.periods,C=a.days,D=a.shortDays,B=a.months,V=a.shortMonths,ie=Kh(w),Ee=Xm(w),Ce=Kh(C),He=Xm(C),Ot=Kh(D),nn=Xm(D),Bn=Kh(B),sr=Xm(B),xr=Kh(V),fr=Xm(V),Yr={a:Tg,A:Ag,b:qd,B:Py,c:null,d:yn,e:yn,f:Ir,g:Oo,G:Vo,H:Gn,I:In,j:cr,L:gr,m:Dr,M:Wr,p:X_,q:Ww,Q:bu,s:gc,S:Ii,u:$i,U:ko,V:Yo,w:po,W:Fa,x:null,X:null,y:ca,Y:Xa,Z:ns,"%":yl},Pi={a:T2,A:Ab,b:Cb,B:uM,c:null,d:zo,e:zo,f:Rl,g:Ys,G:Hc,H:Os,I:sl,j:nu,L:Ml,m:ru,M:_u,p:Zw,q:Ru,Q:bu,s:gc,S:Cu,u:Vc,U:Wu,V:$l,w:ic,W:Ka,x:null,X:null,y:nl,Y:bs,Z:Cc,"%":yl},Co={a:Ms,A:na,b:Qa,B:Ws,c:lh,d:F,e:F,f:at,g:d,G:u,H:J,I:J,j,L:$e,m:P,M:be,p:Ma,q:A,Q:Bt,s:dn,S:Ne,u:Yl,U:tl,V:Sa,w:$v,W:Ym,x:ku,X:vs,y:d,Y:u,Z:g,"%":Tt};Yr.x=ao(f,Yr),Yr.X=ao(m,Yr),Yr.c=ao(o,Yr),Pi.x=ao(f,Pi),Pi.X=ao(m,Pi),Pi.c=ao(o,Pi);function ao(_o,ks){return function(El){var uo=[],Ch=-1,Pu=0,Pf=_o.length,fd,Iy,Xw;for(El instanceof Date||(El=new Date(+El));++Ch<Pf;)_o.charCodeAt(Ch)===37&&(uo.push(_o.slice(Pu,Ch)),(Iy=Wm[fd=_o.charAt(++Ch)])!=null?fd=_o.charAt(++Ch):Iy=fd==="e"?" ":"0",(Xw=ks[fd])&&(fd=Xw(El,Iy)),uo.push(fd),Pu=Ch+1);return uo.push(_o.slice(Pu,Ch)),uo.join("")}}function Zr(_o,ks){return function(El){var uo=Gm(1900,void 0,1),Ch=Qi(uo,_o,El+="",0),Pu,Pf;if(Ch!=El.length)return null;if("Q"in uo)return new Date(uo.Q);if("s"in uo)return new Date(uo.s*1e3+("L"in uo?uo.L:0));if(ks&&!("Z"in uo)&&(uo.Z=0),"p"in uo&&(uo.H=uo.H%12+uo.p*12),uo.m===void 0&&(uo.m="q"in uo?uo.q:0),"V"in uo){if(uo.V<1||uo.V>53)return null;"w"in uo||(uo.w=1),"Z"in uo?(Pu=A0(Gm(uo.y,0,1)),Pf=Pu.getUTCDay(),Pu=Pf>4||Pf===0?Xv.ceil(Pu):Xv(Pu),Pu=Yv.offset(Pu,(uo.V-1)*7),uo.y=Pu.getUTCFullYear(),uo.m=Pu.getUTCMonth(),uo.d=Pu.getUTCDate()+(uo.w+6)%7):(Pu=Jp(Gm(uo.y,0,1)),Pf=Pu.getDay(),Pu=Pf>4||Pf===0?lo.ceil(Pu):lo(Pu),Pu=$n.offset(Pu,(uo.V-1)*7),uo.y=Pu.getFullYear(),uo.m=Pu.getMonth(),uo.d=Pu.getDate()+(uo.w+6)%7)}else("W"in uo||"U"in uo)&&("w"in uo||(uo.w="u"in uo?uo.u%7:"W"in uo?1:0),Pf="Z"in uo?A0(Gm(uo.y,0,1)).getUTCDay():Jp(Gm(uo.y,0,1)).getDay(),uo.m=0,uo.d="W"in uo?(uo.w+6)%7+uo.W*7-(Pf+5)%7:uo.w+uo.U*7-(Pf+6)%7);return"Z"in uo?(uo.H+=uo.Z/100|0,uo.M+=uo.Z%100,A0(uo)):Jp(uo)}}function Qi(_o,ks,El,uo){for(var Ch=0,Pu=ks.length,Pf=El.length,fd,Iy;Ch<Pu;){if(uo>=Pf)return-1;if(fd=ks.charCodeAt(Ch++),fd===37){if(fd=ks.charAt(Ch++),Iy=Co[fd in Wm?ks.charAt(Ch++):fd],!Iy||(uo=Iy(_o,El,uo))<0)return-1}else if(fd!=El.charCodeAt(uo++))return-1}return uo}function Ma(_o,ks,El){var uo=ie.exec(ks.slice(El));return uo?(_o.p=Ee[uo[0].toLowerCase()],El+uo[0].length):-1}function Ms(_o,ks,El){var uo=Ot.exec(ks.slice(El));return uo?(_o.w=nn[uo[0].toLowerCase()],El+uo[0].length):-1}function na(_o,ks,El){var uo=Ce.exec(ks.slice(El));return uo?(_o.w=He[uo[0].toLowerCase()],El+uo[0].length):-1}function Qa(_o,ks,El){var uo=xr.exec(ks.slice(El));return uo?(_o.m=fr[uo[0].toLowerCase()],El+uo[0].length):-1}function Ws(_o,ks,El){var uo=Bn.exec(ks.slice(El));return uo?(_o.m=sr[uo[0].toLowerCase()],El+uo[0].length):-1}function lh(_o,ks,El){return Qi(_o,o,ks,El)}function ku(_o,ks,El){return Qi(_o,f,ks,El)}function vs(_o,ks,El){return Qi(_o,m,ks,El)}function Tg(_o){return D[_o.getDay()]}function Ag(_o){return C[_o.getDay()]}function qd(_o){return V[_o.getMonth()]}function Py(_o){return B[_o.getMonth()]}function X_(_o){return w[+(_o.getHours()>=12)]}function Ww(_o){return 1+~~(_o.getMonth()/3)}function T2(_o){return D[_o.getUTCDay()]}function Ab(_o){return C[_o.getUTCDay()]}function Cb(_o){return V[_o.getUTCMonth()]}function uM(_o){return B[_o.getUTCMonth()]}function Zw(_o){return w[+(_o.getUTCHours()>=12)]}function Ru(_o){return 1+~~(_o.getUTCMonth()/3)}return{format:function(_o){var ks=ao(_o+="",Yr);return ks.toString=function(){return _o},ks},parse:function(_o){var ks=Zr(_o+="",!1);return ks.toString=function(){return _o},ks},utcFormat:function(_o){var ks=ao(_o+="",Pi);return ks.toString=function(){return _o},ks},utcParse:function(_o){var ks=Zr(_o+="",!0);return ks.toString=function(){return _o},ks}}}var Wm={"-":"",_:" ",0:"0"},yu=/^\s*\d+/,vv=/^%/,u_=/[\\^$*+?|[\]().{}]/g;function al(a,o,f){var m=a<0?"-":"",w=(m?-a:a)+"",C=w.length;return m+(C<f?new Array(f-C+1).join(o)+w:w)}function Zm(a){return a.replace(u_,"\\$&")}function Kh(a){return new RegExp("^(?:"+a.map(Zm).join("|")+")","i")}function Xm(a){for(var o={},f=-1,m=a.length;++f<m;)o[a[f].toLowerCase()]=f;return o}function $v(a,o,f){var m=yu.exec(o.slice(f,f+1));return m?(a.w=+m[0],f+m[0].length):-1}function Yl(a,o,f){var m=yu.exec(o.slice(f,f+1));return m?(a.u=+m[0],f+m[0].length):-1}function tl(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.U=+m[0],f+m[0].length):-1}function Sa(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.V=+m[0],f+m[0].length):-1}function Ym(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.W=+m[0],f+m[0].length):-1}function u(a,o,f){var m=yu.exec(o.slice(f,f+4));return m?(a.y=+m[0],f+m[0].length):-1}function d(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.y=+m[0]+(+m[0]>68?1900:2e3),f+m[0].length):-1}function g(a,o,f){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(f,f+6));return m?(a.Z=m[1]?0:-(m[2]+(m[3]||"00")),f+m[0].length):-1}function A(a,o,f){var m=yu.exec(o.slice(f,f+1));return m?(a.q=m[0]*3-3,f+m[0].length):-1}function P(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.m=m[0]-1,f+m[0].length):-1}function F(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.d=+m[0],f+m[0].length):-1}function j(a,o,f){var m=yu.exec(o.slice(f,f+3));return m?(a.m=0,a.d=+m[0],f+m[0].length):-1}function J(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.H=+m[0],f+m[0].length):-1}function be(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.M=+m[0],f+m[0].length):-1}function Ne(a,o,f){var m=yu.exec(o.slice(f,f+2));return m?(a.S=+m[0],f+m[0].length):-1}function $e(a,o,f){var m=yu.exec(o.slice(f,f+3));return m?(a.L=+m[0],f+m[0].length):-1}function at(a,o,f){var m=yu.exec(o.slice(f,f+6));return m?(a.L=Math.floor(m[0]/1e3),f+m[0].length):-1}function Tt(a,o,f){var m=vv.exec(o.slice(f,f+1));return m?f+m[0].length:-1}function Bt(a,o,f){var m=yu.exec(o.slice(f));return m?(a.Q=+m[0],f+m[0].length):-1}function dn(a,o,f){var m=yu.exec(o.slice(f));return m?(a.s=+m[0],f+m[0].length):-1}function yn(a,o){return al(a.getDate(),o,2)}function Gn(a,o){return al(a.getHours(),o,2)}function In(a,o){return al(a.getHours()%12||12,o,2)}function cr(a,o){return al(1+$n.count(Js(a),a),o,3)}function gr(a,o){return al(a.getMilliseconds(),o,3)}function Ir(a,o){return gr(a,o)+"000"}function Dr(a,o){return al(a.getMonth()+1,o,2)}function Wr(a,o){return al(a.getMinutes(),o,2)}function Ii(a,o){return al(a.getSeconds(),o,2)}function $i(a){var o=a.getDay();return o===0?7:o}function ko(a,o){return al(Sr.count(Js(a)-1,a),o,2)}function fo(a){var o=a.getDay();return o>=4||o===0?Nt(a):Nt.ceil(a)}function Yo(a,o){return a=fo(a),al(Nt.count(Js(a),a)+(Js(a).getDay()===4),o,2)}function po(a){return a.getDay()}function Fa(a,o){return al(lo.count(Js(a)-1,a),o,2)}function ca(a,o){return al(a.getFullYear()%100,o,2)}function Oo(a,o){return a=fo(a),al(a.getFullYear()%100,o,2)}function Xa(a,o){return al(a.getFullYear()%1e4,o,4)}function Vo(a,o){var f=a.getDay();return a=f>=4||f===0?Nt(a):Nt.ceil(a),al(a.getFullYear()%1e4,o,4)}function ns(a){var o=a.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+al(o/60|0,"0",2)+al(o%60,"0",2)}function zo(a,o){return al(a.getUTCDate(),o,2)}function Os(a,o){return al(a.getUTCHours(),o,2)}function sl(a,o){return al(a.getUTCHours()%12||12,o,2)}function nu(a,o){return al(1+Yv.count(pv(a),a),o,3)}function Ml(a,o){return al(a.getUTCMilliseconds(),o,3)}function Rl(a,o){return Ml(a,o)+"000"}function ru(a,o){return al(a.getUTCMonth()+1,o,2)}function _u(a,o){return al(a.getUTCMinutes(),o,2)}function Cu(a,o){return al(a.getUTCSeconds(),o,2)}function Vc(a){var o=a.getUTCDay();return o===0?7:o}function Wu(a,o){return al(nh.count(pv(a)-1,a),o,2)}function Ac(a){var o=a.getUTCDay();return o>=4||o===0?dv(a):dv.ceil(a)}function $l(a,o){return a=Ac(a),al(dv.count(pv(a),a)+(pv(a).getUTCDay()===4),o,2)}function ic(a){return a.getUTCDay()}function Ka(a,o){return al(Xv.count(pv(a)-1,a),o,2)}function nl(a,o){return al(a.getUTCFullYear()%100,o,2)}function Ys(a,o){return a=Ac(a),al(a.getUTCFullYear()%100,o,2)}function bs(a,o){return al(a.getUTCFullYear()%1e4,o,4)}function Hc(a,o){var f=a.getUTCDay();return a=f>=4||f===0?dv(a):dv.ceil(a),al(a.getUTCFullYear()%1e4,o,4)}function Cc(){return"+0000"}function yl(){return"%"}function bu(a){return+a}function gc(a){return Math.floor(+a/1e3)}var ss,Fs,rh,zd,_l;bp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bp(a){return ss=Gu(a),Fs=ss.format,rh=ss.parse,zd=ss.utcFormat,_l=ss.utcParse,ss}var Gc=1e3,Ud=Gc*60,Hf=Ud*60,ih=Hf*24,Qh=ih*7,Jh=ih*30,xp=ih*365;function Gf(a){return new Date(a)}function $m(a){return a instanceof Date?+a:+new Date(+a)}function qm(a,o,f,m,w,C,D,B,V){var ie=mc(Za,Za),Ee=ie.invert,Ce=ie.domain,He=V(".%L"),Ot=V(":%S"),nn=V("%I:%M"),Bn=V("%I %p"),sr=V("%a %d"),xr=V("%b %d"),fr=V("%B"),Yr=V("%Y"),Pi=[[D,1,Gc],[D,5,5*Gc],[D,15,15*Gc],[D,30,30*Gc],[C,1,Ud],[C,5,5*Ud],[C,15,15*Ud],[C,30,30*Ud],[w,1,Hf],[w,3,3*Hf],[w,6,6*Hf],[w,12,12*Hf],[m,1,ih],[m,2,2*ih],[f,1,Qh],[o,1,Jh],[o,3,3*Jh],[a,1,xp]];function Co(Zr){return(D(Zr)<Zr?He:C(Zr)<Zr?Ot:w(Zr)<Zr?nn:m(Zr)<Zr?Bn:o(Zr)<Zr?f(Zr)<Zr?sr:xr:a(Zr)<Zr?fr:Yr)(Zr)}function ao(Zr,Qi,Ma,Ms){if(Zr==null&&(Zr=10),typeof Zr=="number"){var na=Math.abs(Ma-Qi)/Zr,Qa=Vg(function(Ws){return Ws[2]}).right(Pi,na);Qa===Pi.length?(Ms=av(Qi/xp,Ma/xp,Zr),Zr=a):Qa?(Qa=Pi[na/Pi[Qa-1][2]<Pi[Qa][2]/na?Qa-1:Qa],Ms=Qa[1],Zr=Qa[0]):(Ms=Math.max(av(Qi,Ma,Zr),1),Zr=B)}return Ms==null?Zr:Zr.every(Ms)}return ie.invert=function(Zr){return new Date(Ee(Zr))},ie.domain=function(Zr){return arguments.length?Ce(Nd.call(Zr,$m)):Ce().map(Gf)},ie.ticks=function(Zr,Qi){var Ma=Ce(),Ms=Ma[0],na=Ma[Ma.length-1],Qa=na<Ms,Ws;return Qa&&(Ws=Ms,Ms=na,na=Ws),Ws=ao(Zr,Ms,na,Qi),Ws=Ws?Ws.range(Ms,na+1):[],Qa?Ws.reverse():Ws},ie.tickFormat=function(Zr,Qi){return Qi==null?Co:V(Qi)},ie.nice=function(Zr,Qi){var Ma=Ce();return(Zr=ao(Zr,Ma[0],Ma[Ma.length-1],Qi))?Ce(ii(Ma,Zr)):ie},ie.copy=function(){return Wv(ie,qm(a,o,f,m,w,C,D,B,V))},ie}function Qg(){return $h.apply(qm(Js,Ns,Sr,$n,vi,Do,ia,Lu,Fs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C0(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O0(){var a=0,o=1,f,m,w,C,D=Za,B=!1,V;function ie(Ee){return isNaN(Ee=+Ee)?V:D(w===0?.5:(Ee=(C(Ee)-f)*w,B?Math.max(0,Math.min(1,Ee)):Ee))}return ie.domain=function(Ee){return arguments.length?(f=C(a=+Ee[0]),m=C(o=+Ee[1]),w=f===m?0:1/(m-f),ie):[a,o]},ie.clamp=function(Ee){return arguments.length?(B=!!Ee,ie):B},ie.interpolator=function(Ee){return arguments.length?(D=Ee,ie):D},ie.unknown=function(Ee){return arguments.length?(V=Ee,ie):V},function(Ee){return C=Ee,f=Ee(a),m=Ee(o),w=f===m?0:1/(m-f),ie}}function Ep(a,o){return o.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function e0(){var a=Br(O0()(Za));return a.copy=function(){return Ep(a,e0())},Uv.apply(a,arguments)}function mv(){var a=loggish(O0()).domain([1,10]);return a.copy=function(){return Ep(a,mv()).base(a.base())},initInterpolator.apply(a,arguments)}function Km(){var a=symlogish(O0());return a.copy=function(){return Ep(a,Km()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Qm(){var a=powish(O0());return a.copy=function(){return Ep(a,Qm()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Jg(){return Qm.apply(null,arguments).exponent(.5)}function qv(){var a=[],o=identity;function f(m){if(!isNaN(m=+m))return o((bisect(a,m)-1)/(a.length-1))}return f.domain=function(m){if(!arguments.length)return a.slice();a=[];for(var w=0,C=m.length,D;w<C;++w)D=m[w],D!=null&&!isNaN(D=+D)&&a.push(D);return a.sort(ascending),f},f.interpolator=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return qv(o).domain(a)},initInterpolator.apply(f,arguments)}function Sp(){var a=0,o=.5,f=1,m,w,C,D,B,V=Za,ie,Ee=!1,Ce;function He(Ot){return isNaN(Ot=+Ot)?Ce:(Ot=.5+((Ot=+ie(Ot))-w)*(Ot<w?D:B),V(Ee?Math.max(0,Math.min(1,Ot)):Ot))}return He.domain=function(Ot){return arguments.length?(m=ie(a=+Ot[0]),w=ie(o=+Ot[1]),C=ie(f=+Ot[2]),D=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),He):[a,o,f]},He.clamp=function(Ot){return arguments.length?(Ee=!!Ot,He):Ee},He.interpolator=function(Ot){return arguments.length?(V=Ot,He):V},He.unknown=function(Ot){return arguments.length?(Ce=Ot,He):Ce},function(Ot){return ie=Ot,m=Ot(a),w=Ot(o),C=Ot(f),D=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),He}}function gv(){var a=Br(Sp()(Za));return a.copy=function(){return Ep(a,gv())},Uv.apply(a,arguments)}function M0(){var a=loggish(Sp()).domain([.1,1,10]);return a.copy=function(){return copy(a,M0()).base(a.base())},initInterpolator.apply(a,arguments)}function Jm(){var a=symlogish(Sp());return a.copy=function(){return copy(a,Jm()).constant(a.constant())},initInterpolator.apply(a,arguments)}function eg(){var a=powish(Sp());return a.copy=function(){return copy(a,eg()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function Wc(){return eg.apply(null,arguments).exponent(.5)}function Kv(a){let o,f=[];function m(w){return w==null?o:w}return m.invert=m,m.domain=m.range=w=>w?(f=w,w):f,m.unknown=w=>w?(o=w,w):o,m.copy=()=>Kv(a).unknown(o),m}const{isNil:R0,isString:Qv,uniq:wp}=Ie.lodashUtil,jd=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,ed={[re.vY.LINEAR]:gi,[re.vY.POWER]:mu,[re.vY.LOG]:qr,[re.vY.IDENTITY]:Kv,[re.vY.SEQUENTIAL]:e0,[re.vY.TIME]:Qg,[re.vY.QUANTILE]:Zl,[re.vY.QUANTIZE]:Qs,[re.vY.THRESHOLD]:se,[re.vY.CAT]:hf,[re.vY.DIVERGING]:gv};class ey{constructor(){(0,Qt.Z)(this,"scaleOptions",{})}apply(o,{styleAttributeService:f}){var m=this;o.hooks.init.tapPromise("FeatureScalePlugin",(0,Ci.Z)(function*(){var w;o.log(re.Or.ScaleInitStart,re.KD.INIT),m.scaleOptions=o.getScaleOptions();const C=f.getLayerStyleAttributes(),D=(w=o.getSource())===null||w===void 0?void 0:w.data.dataArray;Array.isArray(D)&&D.length===0||(m.caculateScalesForAttributes(C||[],D),o.log(re.Or.ScaleInitEnd,re.KD.INIT))})),o.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var w=(0,Ci.Z)(function*(C){if(!C)return C;o.log(re.Or.ScaleInitStart,re.KD.UPDATE),m.scaleOptions=o.getScaleOptions();const D=f.getLayerStyleAttributes(),B=o.getSource().data.dataArray;return Array.isArray(B)&&B.length===0||(m.caculateScalesForAttributes(D||[],B),o.log(re.Or.ScaleInitEnd,re.KD.UPDATE),o.layerModelNeedUpdate=!0),!0});return function(C){return w.apply(this,arguments)}}()),o.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(o.layerModelNeedUpdate)return;this.scaleOptions=o.getScaleOptions();const w=f.getLayerStyleAttributes(),C=o.getSource().data.dataArray;if(!(Array.isArray(C)&&C.length===0)&&w){const D=w.filter(B=>B.needRescale);D.length&&this.caculateScalesForAttributes(D,C)}})}isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}caculateScalesForAttributes(o,f){o.forEach(m=>{if(m.scale){const w=m.scale,C=m.scale.field;w.names=this.parseFields(R0(C)?[]:C);const D=[];w.names.forEach(B=>{var V;D.push(this.createScale(B,m.name,(V=m.scale)===null||V===void 0?void 0:V.values,f))}),D.some(B=>B.type===re.ee.VARIABLE)?(w.type=re.ee.VARIABLE,D.forEach(B=>{if(!w.callback&&w.values!=="text"){var V;switch((V=B.option)===null||V===void 0?void 0:V.type){case re.vY.LOG:case re.vY.LINEAR:case re.vY.POWER:if(w.values&&w.values.length>2){const Ee=B.scale.ticks(w.values.length);B.scale.domain(Ee)}w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case re.vY.QUANTILE:case re.vY.QUANTIZE:case re.vY.THRESHOLD:B.scale.range(w.values);break;case re.vY.IDENTITY:break;case re.vY.CAT:w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case re.vY.DIVERGING:case re.vY.SEQUENTIAL:B.scale.interpolator(jg(w.values));break}}if(w.values==="text"){var ie;B.scale.range((ie=B.option)===null||ie===void 0?void 0:ie.domain)}})):(w.type=re.ee.CONSTANT,w.defaultValues=D.map((B,V)=>B.scale(w.names[V]))),w.scalers=D.map(B=>({field:B.field,func:B.scale,option:B.option})),m.needRescale=!1}})}parseFields(o){return Array.isArray(o)?o:Qv(o)?o.split("*"):[o]}createScale(o,f,m,w){var C,D;const B=this.scaleOptions[f]&&((C=this.scaleOptions[f])===null||C===void 0?void 0:C.field)===o?this.scaleOptions[f]:this.scaleOptions[o],V={field:o,scale:void 0,type:re.ee.VARIABLE,option:B};if(!w||!w.length)return B&&B.type?V.scale=this.createDefaultScale(B):(V.scale=hf([o]),V.type=re.ee.CONSTANT),V;const ie=(D=w.find(Ee=>!R0(Ee[o])))===null||D===void 0?void 0:D[o];if(this.isNumber(o)||R0(ie)&&!B)V.scale=hf([o]),V.type=re.ee.CONSTANT;else{let Ee=B&&B.type||this.getDefaultType(ie);m==="text"&&(Ee=re.vY.CAT),m===void 0&&(Ee=re.vY.IDENTITY);const Ce=this.createScaleConfig(Ee,o,B,w);V.scale=this.createDefaultScale(Ce),V.option=Ce}return V}getDefaultType(o){let f=re.vY.LINEAR;return typeof o=="string"&&(f=jd.test(o)?re.vY.TIME:re.vY.CAT),f}createScaleConfig(o,f,m,w){const C={type:o};let D=[];if(o===re.vY.QUANTILE){const B=new Map;w==null||w.forEach(V=>{B.set(V._id,V[f])}),D=Array.from(B.values())}else D=(w==null?void 0:w.map(B=>B[f]))||[];if(m!=null&&m.domain)C.domain=m==null?void 0:m.domain;else if(o===re.vY.CAT||o===re.vY.IDENTITY)C.domain=wp(D);else if(o===re.vY.QUANTILE)C.domain=D;else if(o===re.vY.DIVERGING){const B=Tu(D),V=(m==null?void 0:m.neutral)!==void 0?m==null?void 0:m.neutral:(B[0]+B[1])/2;C.domain=[B[0],V,B[1]]}else C.domain=Tu(D);return(0,Pr.Z)((0,Pr.Z)({},C),m)}createDefaultScale({type:o,domain:f,unknown:m,clamp:w,nice:C}){const D=ed[o]();return f&&D.domain&&D.domain(f),m&&D.unknown(m),w!==void 0&&D.clamp&&D.clamp(w),C!==void 0&&D.nice&&D.nice(C),D}}class c_{apply(o){o.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{o.animateStatus&&o.models.forEach(m=>{m.addUniforms((0,Pr.Z)({},o.layerModel.getAnimateUniforms()))})})}}class f_{apply(o){o.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:f,enableMask:m}=o.getLayerConfig();!o.tileLayer&&f&&f.length>0&&o.updateLayerConfig({mask:m})})}}class td{build(o){return(0,Ci.Z)(function*(){o.prepareBuildModel(),yield o.buildModels()})()}initLayerModel(o){var f=this;return(0,Ci.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}prepareLayerModel(o){var f=this;return(0,Ci.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}apply(o){var f=this;o.hooks.init.tapPromise("LayerModelPlugin",(0,Ci.Z)(function*(){if(o.getSource().isTile){o.prepareBuildModel();return}o.log(re.Or.BuildModelStart,re.KD.INIT),yield f.initLayerModel(o),o.log(re.Or.BuildModelEnd,re.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var m=(0,Ci.Z)(function*(w){return!w||o.getSource().isTile?!1:(o.log(re.Or.BuildModelStart,re.KD.UPDATE),yield f.prepareLayerModel(o),o.log(re.Or.BuildModelEnd,re.KD.UPDATE),!0)});return function(w){return m.apply(this,arguments)}}())}}class ty{apply(o){o.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:f,fitBoundsOptions:m}=o.getLayerConfig();f&&o.fitBounds(m),o.styleNeedUpdate=!1})}}const ny=["type"],P0={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Ts={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},oh={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},C1={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function t0(a){const o={u_DirectionalLights:new Array(3).fill((0,Pr.Z)({},oh)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,Pr.Z)({},C1)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[Ts]),a.forEach(f=>{let{type:m="directional"}=f,w=(0,kl.Z)(f,ny);const C=P0[m].lights,D=P0[m].num,B=o[D];o[C][B]=(0,Pr.Z)((0,Pr.Z)({},o[C][B]),w),o[D]++}),o}class h_{apply(o){o.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:f}=o.getLayerConfig();f&&o.models.forEach(m=>m.addUniforms((0,Pr.Z)({},t0())))})}}function d_(a){return a.map(o=>(typeof o=="string"&&(o=[o,{}]),o))}function tg(a,o,f,m){const w=a.multiPassRenderer;return w.add(m("render")),d_(o).forEach(C=>{const[D,B]=C;w.add(f(D),B)}),w.add(f("copy")),w}class Tp{constructor(){(0,Qt.Z)(this,"enabled",void 0)}apply(o,{rendererService:f,postProcessingPassFactory:m,normalPassFactory:w}){o.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:C,passes:D=[]}=o.getLayerConfig();this.enabled=!!C&&o.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(o.multiPassRenderer=tg(o,D,m,w),o.multiPassRenderer.setRenderFlag(!0))}),o.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:C,height:D}=f.getViewportSize();o.multiPassRenderer.resize(C,D)}})}}let fa=function(a){return a[a.POSITION=0]="POSITION",a[a.COLOR=1]="COLOR",a[a.VERTEX_ID=2]="VERTEX_ID",a[a.PICKING_COLOR=3]="PICKING_COLOR",a[a.STROKE=4]="STROKE",a[a.OPACITY=5]="OPACITY",a[a.OFFSETS=6]="OFFSETS",a[a.ROTATION=7]="ROTATION",a[a.EXTRUSION_BASE=8]="EXTRUSION_BASE",a[a.SIZE=9]="SIZE",a[a.SHAPE=10]="SHAPE",a[a.EXTRUDE=11]="EXTRUDE",a[a.MAX=12]="MAX",a[a.NORMAL=13]="NORMAL",a[a.UV=14]="UV",a[a.LINEAR=15]="LINEAR",a}({});function ng(a){switch(a){case"rotation":return{name:"Rotation",type:re.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:fa.ROTATION,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{rotation:f=0}=o;return Array.isArray(f)?[f[0]]:[f]}}};case"stroke":return{name:"stroke",type:re.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:fa.STROKE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:o=>{const{stroke:f=[1,1,1,1]}=o;return f}}};case"opacity":return{name:"opacity",type:re.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:fa.OPACITY,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{opacity:f=1}=o;return[f]}}};case"extrusionBase":return{name:"extrusionBase",type:re.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:fa.EXTRUSION_BASE,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{extrusionBase:f=0}=o;return[f]}}};case"offsets":return{name:"offsets",type:re.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:fa.OFFSETS,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const{offsets:f}=o;return f}}};case"thetaOffset":return{name:"thetaOffset",type:re.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}};default:return}}const{isNumber:ry}=Ie.lodashUtil,n0={NONE:0,ENCODE:1,HIGHLIGHT:2};class iy{constructor(){(0,Qt.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const o=[];return this.pickingUniformMap.forEach(f=>{ry(f)?o.push(f):o.push(...f)}),o}updatePickOption(o,f){Object.keys(o).forEach(D=>{this.pickingUniformMap.set(D,o[D])});const m=f.getLayerConfig().pickingBuffer||0,w=Number(f.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",m),this.pickingUniformMap.set("u_shaderPick",w),f.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(o,{styleAttributeService:f}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),o.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();f.registerStyleAttribute({name:"pickingColor",type:re.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:fa.PICKING_COLOR,buffer:{data:[],type:re.gl.FLOAT},size:3,update:w=>{const{id:C}=w;return m?(0,Ie.Z6)(C):[0,0,0]}}})}),o.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:n0.ENCODE},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:n0.ENCODE})))}),o.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:n0.HIGHLIGHT},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:n0.HIGHLIGHT})))}),o.hooks.beforeHighlight.tap("PixelPickingPlugin",m=>{const{highlightColor:w,activeMix:C=0}=o.getLayerConfig(),D=typeof w=="string"?(0,Ie.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const B={u_PickingStage:n0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:D.map(V=>V*255),u_activeMix:C};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))}),o.hooks.beforeSelect.tap("PixelPickingPlugin",m=>{const{selectColor:w,selectMix:C=0}=o.getLayerConfig(),D=typeof w=="string"?(0,Ie.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const B={u_PickingStage:n0.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:D.map(V=>V*255),u_activeMix:C,u_CurrentSelectedId:m,u_SelectColor:D.map(V=>V*255)};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))})}}const p_=["mvt","geojsonvt","testTile"];function rg(a){const o=a.getSource();return p_.includes(o.parser.type)}class xx{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{rg(o)||this.registerBuiltinAttributes(f,o)})}registerBuiltinAttributes(o,f){if(f.type==="MaskLayer"){this.registerPositionAttribute(o);return}this.registerPositionAttribute(o),this.registerColorAttribute(o),this.registerVertexIdAttribute(o)}registerPositionAttribute(o){o.registerStyleAttribute({name:"position",type:re.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:fa.POSITION,buffer:{data:[],type:re.gl.FLOAT},size:3,update:(f,m,w)=>w.length===2?[w[0],w[1],0]:[w[0],w[1],w[2]]}})}registerColorAttribute(o){o.registerStyleAttribute({name:"color",type:re.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:fa.COLOR,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:f=>{const{color:m}=f;return!m||!m.length?[1,1,1,1]:m}}})}registerVertexIdAttribute(o){o.registerStyleAttribute({name:"vertexId",type:re.GC.Attribute,descriptor:{name:"a_vertexId",shaderLocation:fa.VERTEX_ID,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:(f,m)=>[m]}})}}class Ex{constructor(){(0,Qt.Z)(this,"cameraService",void 0),(0,Qt.Z)(this,"coordinateSystemService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"layerService",void 0)}apply(o,{rendererService:f,mapService:m,layerService:w,coordinateSystemService:C,cameraService:D}){this.rendererService=f,this.mapService=m,this.layerService=w,this.coordinateSystemService=C,this.cameraService=D;const B=this.mapService.version;let V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ie=[0,0],Ee;this.rendererService.uniformBuffers[0]||(Ee=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=Ee),o.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const Ce=o.getLayerConfig().tileOrigin;this.coordinateSystemService.refresh(Ce),B==="GAODE2.x"&&(this.setLayerCenter(o),V=this.mapService.map.customCoords.getMVPMatrix(),ie=this.mapService.getCustomCoordCenter(),o.getLayerUniformBuffer().subData({offset:0,data:new Uint8Array(new Float32Array([...V,...ie]).buffer)}));const{width:He,height:Ot}=this.rendererService.getViewportSize(),{data:nn,uniforms:Bn}=this.generateUBO(V,ie,He,Ot);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:nn}),this.rendererService.queryVerdorInfo()==="WebGL1"&&o.models.forEach(xr=>{xr.addUniforms((0,Pr.Z)((0,Pr.Z)({},Bn),{},{u_PickingBuffer:o.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(o.getShaderPickStat())}))})})}setLayerCenter(o){o.coordCenter===void 0&&(o.coordCenter=o.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(o.coordCenter)}generateUBO(o,f,m,w){const C=this.cameraService.getProjectionMatrix(),D=this.cameraService.getViewMatrix(),B=this.cameraService.getViewProjectionMatrix(),V=this.cameraService.getModelMatrix(),ie=this.coordinateSystemService.getViewportCenterProjection(),Ee=this.coordinateSystemService.getPixelsPerDegree(),Ce=this.cameraService.getZoom(),He=this.coordinateSystemService.getPixelsPerDegree2(),Ot=this.cameraService.getZoomScale(),nn=this.coordinateSystemService.getPixelsPerMeter(),Bn=this.coordinateSystemService.getCoordinateSystem(),sr=this.cameraService.getCameraPosition(),xr=window.devicePixelRatio,fr=this.coordinateSystemService.getViewportCenter(),Yr=[m,w],Pi=this.cameraService.getFocalDistance();return{data:[...D,...C,...B,...V,...ie,...Ee,Ce,...He,Ot,...nn,Bn,...sr,xr,...fr,...Yr,Pi,0,0,0],uniforms:{[re.lv.ProjectionMatrix]:C,[re.lv.ViewMatrix]:D,[re.lv.ViewProjectionMatrix]:B,[re.lv.Zoom]:Ce,[re.lv.ZoomScale]:Ot,[re.lv.FocalDistance]:Pi,[re.lv.CameraPosition]:sr,[re.kw.CoordinateSystem]:Bn,[re.kw.ViewportCenter]:fr,[re.kw.ViewportCenterProjection]:ie,[re.kw.PixelsPerDegree]:Ee,[re.kw.PixelsPerDegree2]:He,[re.kw.PixelsPerMeter]:nn,[re.kw.Mvp]:o,u_sceneCenterMercator:f,u_ViewportSize:Yr,u_ModelMatrix:V,u_DevicePixelRatio:xr}}}}class O1{apply(o){o.hooks.beforeRender.tap("UpdateModelPlugin",()=>{o.layerModel&&o.layerModel.needUpdate().then(f=>{f&&o.renderLayers()})}),o.hooks.afterRender.tap("UpdateModelPlugin",()=>{o.layerModelNeedUpdate=!1})}}class v_{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(o,{styleAttributeService:f})}),o.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{o.layerModelNeedUpdate||o.inited&&this.updateStyleAttribute(o,{styleAttributeService:f})})}updateStyleAttribute(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter");if(w&&w.needRegenerateVertices){o.layerModelNeedUpdate=!0,m.forEach(C=>C.needRegenerateVertices=!1);return}m.filter(C=>C.needRegenerateVertices).forEach(C=>{f.updateAttributeByFeatureRange(C.name,o.getEncodedData(),C.featureRange.startIndex,C.featureRange.endIndex,o),C.needRegenerateVertices=!1})}initStyleAttribute(o,{styleAttributeService:f}){(f.getLayerStyleAttributes()||[]).filter(w=>w.needRegenerateVertices).forEach(w=>{f.updateAttributeByFeatureRange(w.name,o.getEncodedData(),w.featureRange.startIndex,w.featureRange.endIndex),w.needRegenerateVertices=!1})}}function M1(){return[new Tf,new xx,new ey,new tc,new ty,new f_,new v_,new O1,new Tp,new Ex,new c_,new h_,new iy,new td]}const ah={[re.h0.additive]:{enable:!0,func:{srcRGB:re.gl.ONE,dstRGB:re.gl.ONE,srcAlpha:1,dstAlpha:1}},[re.h0.none]:{enable:!1},[re.h0.normal]:{enable:!0,func:{srcRGB:re.gl.SRC_ALPHA,dstRGB:re.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[re.h0.subtractive]:{enable:!0,func:{srcRGB:re.gl.ONE,dstRGB:re.gl.ONE,srcAlpha:re.gl.ZERO,dstAlpha:re.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:re.gl.FUNC_SUBTRACT,alpha:re.gl.FUNC_SUBTRACT}},[re.h0.max]:{enable:!0,func:{srcRGB:re.gl.ONE,dstRGB:re.gl.ONE},equation:{rgb:re.gl.MAX_EXT}},[re.h0.min]:{enable:!0,func:{srcRGB:re.gl.ONE,dstRGB:re.gl.ONE},equation:{rgb:re.gl.MIN_EXT}}};class ig{constructor(o){(0,Qt.Z)(this,"layer",void 0),this.layer=o}pickRender(o){const m=this.layer.getContainer().layerService,w=this.layer;if(w.tileLayer)return w.tileLayer.pickRender(o);w.hooks.beforePickingEncode.call(),m.renderTileLayerMask(w),w.renderModels({ispick:!0}),w.hooks.afterPickingEncode.call()}pick(o,f){var m=this;return(0,Ci.Z)(function*(){const C=m.layer.getContainer().pickingService;return o.type==="RasterLayer"?m.pickRasterLayer(o,f):(m.pickRender(f),C.pickFromPickingFBO(o,f))})()}pickRasterLayer(o,f,m){const w=this.layer.getContainer(),C=w.pickingService,D=w.mapService,B=this.layer.getSource().extent,V=(0,Ie.if)(f.lngLat,B),ie={x:f.x,y:f.y,type:f.type,lngLat:f.lngLat,target:f,rasterValue:null},Ee=m||o;if(V){const Ce=this.readRasterValue(o,B,D,f.x,f.y);return ie.rasterValue=Ce,C.triggerHoverOnLayer(Ee,ie),!0}else return ie.type=f.type==="mousemove"?"mouseout":"un"+f.type,C.triggerHoverOnLayer(Ee,(0,Pr.Z)((0,Pr.Z)({},ie),{},{type:"unpick"})),C.triggerHoverOnLayer(Ee,ie),!1}readRasterValue(o,f,m,w,C){const D=o.getSource().data.dataArray[0],[B=0,V=0,ie=10,Ee=-10]=f,Ce=m.lngLatToContainer([B,V]),He=m.lngLatToContainer([ie,Ee]),Ot=He.x-Ce.x,nn=Ce.y-He.y,Bn=[(w-Ce.x)/Ot,(C-He.y)/nn],sr=D.width||1,xr=D.height||1,fr=Math.floor(Bn[0]*sr),Yr=Math.floor(Bn[1]*xr),Pi=Math.max(0,Yr-1)*sr+fr;return D.data[Pi]}selectFeature(o){const f=this.layer,[m,w,C]=o;f.hooks.beforeSelect.call([m,w,C])}highlightPickedFeature(o){const[f,m,w]=o;this.layer.hooks.beforeHighlight.call([f,m,w])}getFeatureById(o){return this.layer.getSource().getFeatureById(o)}}class Vd{constructor(o){(0,Qt.Z)(this,"layer",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"colorTexture",void 0),(0,Qt.Z)(this,"key",void 0),this.layer=o;const f=this.layer.getContainer();this.rendererService=f.rendererService}getColorTexture(o,f){const m=this.getTextureKey(o,f);return this.key===m?this.colorTexture:(this.createColorTexture(o,f),this.key=m,this.colorTexture)}createColorTexture(o,f){const{createTexture2D:m}=this.rendererService,w=this.getColorRampBar(o,f),C=m({data:new Uint8Array(w.data),width:w.width,height:w.height,flipY:!1,unorm:!0});return this.colorTexture=C,C}setColorTexture(o,f,m){this.key=this.getTextureKey(f,m),this.colorTexture=o}destroy(){var o;(o=this.colorTexture)===null||o===void 0||o.destroy()}getColorRampBar(o,f){switch(o.type){case"cat":return(0,Ie.hj)(o);case"quantize":return(0,Ie.NJ)(o);case"custom":return(0,Ie.Oc)(o,f);case"linear":return(0,Ie.M4)(o,f);default:return(0,Ie.Cl)(o)}}getTextureKey(o,f){var m;return`${o.colors.join("_")}_${o==null||(m=o.positions)===null||m===void 0?void 0:m.join("_")}_${o.type}_${f==null?void 0:f.join("_")}`}}const Ap=["passes"],R1=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","pickingEnabled"],{isEqual:m_,isFunction:sh,isNumber:I0,isObject:Nu,isPlainObject:Jv,isUndefined:D0}=Ie.lodashUtil;let g_=0;class em extends Vu.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){return this.container.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(o={}){super(),(0,Qt.Z)(this,"id",`${g_++}`),(0,Qt.Z)(this,"name",`${g_}`),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"coordCenter",void 0),(0,Qt.Z)(this,"type",void 0),(0,Qt.Z)(this,"visible",!0),(0,Qt.Z)(this,"zIndex",0),(0,Qt.Z)(this,"minZoom",void 0),(0,Qt.Z)(this,"maxZoom",void 0),(0,Qt.Z)(this,"inited",!1),(0,Qt.Z)(this,"layerModelNeedUpdate",!1),(0,Qt.Z)(this,"pickedFeatureID",null),(0,Qt.Z)(this,"selectedFeatureID",null),(0,Qt.Z)(this,"styleNeedUpdate",!1),(0,Qt.Z)(this,"rendering",void 0),(0,Qt.Z)(this,"forceRender",!1),(0,Qt.Z)(this,"clusterZoom",0),(0,Qt.Z)(this,"layerType",void 0),(0,Qt.Z)(this,"triangulation",void 0),(0,Qt.Z)(this,"layerPickService",void 0),(0,Qt.Z)(this,"textureService",void 0),(0,Qt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Qt.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Qt.Z)(this,"hooks",{init:new Jl.S$,afterInit:new Jl.oI,beforeRender:new Jl.oI,beforeRenderData:new Jl.bf,afterRender:new Jl.ni,beforePickingEncode:new Jl.ni,afterPickingEncode:new Jl.ni,beforeHighlight:new Jl.ni(["pickedColor"]),afterHighlight:new Jl.ni,beforeSelect:new Jl.ni(["pickedColor"]),afterSelect:new Jl.ni,beforeDestroy:new Jl.ni,afterDestroy:new Jl.ni}),(0,Qt.Z)(this,"models",[]),(0,Qt.Z)(this,"multiPassRenderer",void 0),(0,Qt.Z)(this,"plugins",void 0),(0,Qt.Z)(this,"startInit",!1),(0,Qt.Z)(this,"sourceOption",void 0),(0,Qt.Z)(this,"layerModel",void 0),(0,Qt.Z)(this,"shapeOption",void 0),(0,Qt.Z)(this,"tileLayer",void 0),(0,Qt.Z)(this,"layerChildren",[]),(0,Qt.Z)(this,"masks",[]),(0,Qt.Z)(this,"configService",re.cO),(0,Qt.Z)(this,"styleAttributeService",void 0),(0,Qt.Z)(this,"layerSource",void 0),(0,Qt.Z)(this,"postProcessingPassFactory",void 0),(0,Qt.Z)(this,"animateOptions",{enable:!1}),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"encodedData",void 0),(0,Qt.Z)(this,"currentPickId",null),(0,Qt.Z)(this,"rawConfig",void 0),(0,Qt.Z)(this,"needUpdateConfig",void 0),(0,Qt.Z)(this,"encodeStyleAttribute",{}),(0,Qt.Z)(this,"enableShaderEncodeStyles",[]),(0,Qt.Z)(this,"enableDataEncodeStyles",[]),(0,Qt.Z)(this,"pendingStyleAttributes",[]),(0,Qt.Z)(this,"scaleOptions",{}),(0,Qt.Z)(this,"animateStartTime",void 0),(0,Qt.Z)(this,"animateStatus",!1),(0,Qt.Z)(this,"isDestroyed",!1),(0,Qt.Z)(this,"uniformBuffers",[]),(0,Qt.Z)(this,"encodeDataLength",0),(0,Qt.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0;const f=this.getLayerConfig();f&&f.autoFit&&this.fitBounds(f.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=o.name||this.id,this.zIndex=o.zIndex||0,this.rawConfig=o,this.masks=o.maskLayers||[]}addMask(o){this.masks.push(o),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(o){this.masks.push(o)}removeMaskLayer(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),o.destroy()}getAttribute(o){return this.styleAttributeService.getLayerStyleAttribute(o)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(o){if(Object.keys(o).map(f=>{f in this.rawConfig&&(this.rawConfig[f]=o[f])}),!this.startInit)this.needUpdateConfig=(0,Pr.Z)((0,Pr.Z)({},this.needUpdateConfig),o);else{const f=this.container.id;this.configService.setLayerConfig(f,this.id,(0,Pr.Z)((0,Pr.Z)((0,Pr.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),o)),this.needUpdateConfig={}}}setContainer(o){this.container=o}getContainer(){return this.container}addPlugin(o){return this.plugins.push(o),this}init(){var o=this;return(0,Ci.Z)(function*(){const f=o.container.id;o.startInit=!0,o.configService.setLayerConfig(f,o.id,o.rawConfig),o.layerType=o.rawConfig.layerType;const{enableMultiPassRenderer:m,passes:w}=o.getLayerConfig();m&&w!==null&&w!==void 0&&w.length&&w.length>0&&o.mapService.on("mapAfterFrameChange",()=>{o.renderLayers()}),o.postProcessingPassFactory=o.container.postProcessingPassFactory,o.styleAttributeService=o.container.styleAttributeService,m&&(o.multiPassRenderer=o.container.multiPassRenderer,o.multiPassRenderer.setLayer(o)),o.pendingStyleAttributes.forEach(({attributeName:C,attributeField:D,attributeValues:B,updateOptions:V})=>{o.styleAttributeService.updateStyleAttribute(C,{scale:(0,Pr.Z)({field:D},o.splitValuesAndCallbackInAttribute(B,D?void 0:o.getLayerConfig()[C]))},V)}),o.pendingStyleAttributes=[],o.plugins=M1();for(const C of o.plugins)C.apply(o,o.container);o.layerPickService=new ig(o),o.textureService=new Vd(o),o.log(re.Or.LayerInitStart),yield o.hooks.init.promise(),o.log(re.Or.LayerInitEnd),o.inited=!0,o.emit("inited",{target:o,type:"inited"}),o.emit("add",{target:o,type:"add"}),o.hooks.afterInit.call()})()}log(o,f="init"){var m;if(this.tileLayer||this.isTileLayer)return;const w=`${this.id}.${f}.${o}`,C={id:this.id,type:this.type};(m=this.debugService)===null||m===void 0||m.log(w,C)}updateModelData(o){o.attributes&&o.elements?this.models.map(f=>{f.updateAttributesAndElements(o.attributes,o.elements)}):console.warn("data error")}setLayerPickService(o){this.layerPickService=o}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:o}=this.getLayerConfig();o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(o,f,m){return this.updateStyleAttribute("color",o,f,m),this}texture(o,f,m){return this.updateStyleAttribute("texture",o,f,m),this}rotate(o,f,m){return this.updateStyleAttribute("rotate",o,f,m),this}size(o,f,m){return this.updateStyleAttribute("size",o,f,m),this}filter(o,f,m){const w=this.updateStyleAttribute("filter",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}shape(o,f,m){this.shapeOption={field:o,values:f};const w=this.updateStyleAttribute("shape",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}label(o,f,m){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:o,attributeValues:f,updateOptions:m}),this}animate(o){let f={};return Nu(o)?(f.enable=!0,f=(0,Pr.Z)((0,Pr.Z)({},f),o)):f.enable=o,this.updateLayerConfig({animateOption:f}),this}source(o,f){return(o==null?void 0:o.type)==="source"?(this.setSource(o),this):(this.sourceOption={data:o,options:f},this.clusterZoom=0,this)}setData(o,f){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(o,f)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(o,f)}),this}dataUpdatelog(){this.log(re.Or.SourceInitStart,re.KD.UPDATE),this.layerSource.once("update",()=>{this.log(re.Or.SourceInitEnd,re.KD.UPDATE)})}style(o){const{passes:f}=o,m=(0,kl.Z)(o,Ap);f&&d_(f).forEach(C=>{const D=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(C[0]);D&&D.updateOptions(C[1])}),m.borderColor&&(m.stroke=m.borderColor),m.borderWidth&&(m.strokeWidth=m.borderWidth);const w=m;return Object.keys(m).forEach(C=>{const D=m[C];Array.isArray(D)&&D.length===2&&!I0(D[0])&&!I0(D[1])&&(w[C]={field:D[0],value:D[1]})}),this.encodeStyle(w),this.updateLayerConfig(w),this}encodeStyle(o){Object.keys(o).forEach(f=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(f)&&Jv(o[f])&&(o[f].field||o[f].value)&&!m_(this.encodeStyleAttribute[f],o[f])?(this.encodeStyleAttribute[f]=o[f],this.updateStyleAttribute(f,o[f].field,o[f].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[f]&&(delete this.encodeStyleAttribute[f],this.dataState.dataSourceNeedUpdate=!0)})}scale(o,f){const m=(0,Pr.Z)({},this.scaleOptions);if(Nu(o)?this.scaleOptions=(0,Pr.Z)((0,Pr.Z)({},this.scaleOptions),o):this.scaleOptions[o]=f,this.styleAttributeService&&!m_(m,this.scaleOptions)){const w=Nu(o)?o:{[o]:f};this.styleAttributeService.updateScaleAttribute(w)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(o={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(o),this))}renderMultiPass(){var o=this;return(0,Ci.Z)(function*(){o.encodeDataLength<=0&&!o.forceRender||(o.multiPassRenderer&&o.multiPassRenderer.getRenderFlag()?yield o.multiPassRenderer.render():o.renderModels())})()}active(o){const f={};return f.enableHighlight=Nu(o)?!0:o,Nu(o)?(f.enableHighlight=!0,o.color&&(f.highlightColor=o.color),o.mix&&(f.activeMix=o.mix)):f.enableHighlight=!!o,this.updateLayerConfig(f),this}setActive(o,f){if(Nu(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({highlightColor:Nu(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Nu(f)?f.mix:this.getLayerConfig().activeMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,highlightColor:Nu(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Nu(f)?f.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(o){const f={};return f.enableSelect=Nu(o)?!0:o,Nu(o)?(f.enableSelect=!0,o.color&&(f.selectColor=o.color),o.mix&&(f.selectMix=o.mix)):f.enableSelect=!!o,this.updateLayerConfig(f),this}setSelect(o,f){if(Nu(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({selectColor:Nu(f)?f.color:this.getLayerConfig().selectColor,selectMix:Nu(f)?f.mix:this.getLayerConfig().selectMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,selectColor:Nu(f)?f.color:this.getLayerConfig().selectColor,selectMix:Nu(f)?f.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(o){return this.updateLayerConfig({blend:o}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(o){return this.zIndex=o,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(o){this.currentPickId=o}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(o){this.selectedFeatureID=o}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const o=this.mapService.getZoom(),{visible:f,minZoom:m=-1/0,maxZoom:w=1/0}=this.getLayerConfig();return!!f&&o>=m&&o<w}setMultiPass(o,f){if(this.updateLayerConfig({enableMultiPassRenderer:o}),f&&this.updateLayerConfig({passes:f}),o){const{passes:m=[]}=this.getLayerConfig();this.multiPassRenderer=tg(this,m,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:w,height:C}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(w,C)}return this}setMinZoom(o){return this.updateLayerConfig({minZoom:o}),this}getMinZoom(){const{minZoom:o}=this.getLayerConfig();return o}getMaxZoom(){const{maxZoom:o}=this.getLayerConfig();return o}get(o){return this.getLayerConfig()[o]}setMaxZoom(o){return this.updateLayerConfig({maxZoom:o}),this}setAutoFit(o){return this.updateLayerConfig({autoFit:o}),this}fitBounds(o){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const m=this.getSource().extent;return m.some(C=>Math.abs(C)===1/0)?this:(this.mapService.fitBounds([[m[0],m[1]],[m[2],m[3]]],o),this)}destroy(o=!0){var f,m,w,C,D;if(this.isDestroyed)return;(f=this.layerModel)===null||f===void 0||f.uniformBuffers.forEach(V=>{V.destroy()}),this.layerChildren.map(V=>V.destroy(!1)),this.layerChildren=[];const{maskfence:B}=this.getLayerConfig();B&&(this.masks.map(V=>V.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(m=this.multiPassRenderer)===null||m===void 0||m.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(w=this.layerModel)===null||w===void 0||w.clearModels(o),(C=this.tileLayer)===null||C===void 0||C.destroy(),this.models=[],(D=this.debugService)===null||D===void 0||D.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var o;this.models.forEach(f=>f.destroy()),(o=this.layerModel)===null||o===void 0||o.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(o=>o.needRescale||o.needRemapping||o.needRegenerateVertices).length}setSource(o){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=o,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:f})=>{if(this.coordCenter===void 0){var m;const w=this.layerSource.center;this.coordCenter=w,(m=this.mapService)!==null&&m!==void 0&&m.setCoordCenter&&this.mapService.setCoordCenter(w)}if(f==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(o){this.encodedData=o,this.encodeDataLength=o.length}getEncodedData(){return this.encodedData}getScale(o){return this.styleAttributeService.getLayerAttributeScale(o)}getLegend(o){var f,m,w;const C=this.styleAttributeService.getLayerStyleAttribute(o);return{type:(m=((C==null||(f=C.scale)===null||f===void 0?void 0:f.scalers)||[])[0])===null||m===void 0||(m=m.option)===null||m===void 0?void 0:m.type,field:C==null||(w=C.scale)===null||w===void 0?void 0:w.field,items:this.getLegendItems(o)}}getLegendItems(o){const f=this.styleAttributeService.getLayerAttributeScale(o);return f?f.invertExtent?f.range().map(w=>({value:f.invertExtent(w),[o]:w})):f.ticks?f.ticks().map(w=>({value:w,[o]:f(w)})):f!=null&&f.domain?f.domain().filter(w=>!D0(w)).map(w=>({value:w,[o]:f(w)})):[]:[]}pick({x:o,y:f}){this.interactionService.triggerHover({x:o,y:f})}boxSelect(o,f){this.pickingService.boxPickLayer(this,o,f)}buildLayerModel(o){var f=this;return(0,Ci.Z)(function*(){const{moduleName:m,vertexShader:w,fragmentShader:C,inject:D,triangulation:B,styleOption:V,pickingEnabled:ie=!0}=o,Ee=(0,kl.Z)(o,R1);f.shaderModuleService.registerModule(m,{vs:w,fs:C,inject:D});const{vs:Ce,fs:He,uniforms:Ot}=f.shaderModuleService.getModule(m),{createModel:nn}=f.rendererService;return new Promise(Bn=>{const{attributes:sr,elements:xr,count:fr}=f.styleAttributeService.createAttributesAndIndices(f.encodedData,B,V,f),Yr=[...f.layerModel.uniformBuffers,...f.rendererService.uniformBuffers,f.getLayerUniformBuffer()];ie&&Yr.push(f.getPickingUniformBuffer());const Pi=(0,Pr.Z)({attributes:sr,uniforms:Ot,fs:He,vs:Ce,elements:xr,blend:ah[re.h0.normal],uniformBuffers:Yr,textures:f.layerModel.textures},Ee);fr&&(Pi.count=fr);const Co=nn(Pi);Bn(Co)})})()}createAttributes(o){const{triangulation:f}=o,{attributes:m}=this.styleAttributeService.createAttributes(this.encodedData,f);return m}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(o){const{enableHighlight:f=!0,enableSelect:m=!0}=this.getLayerConfig();let w=this.eventNames().indexOf(o)!==-1||this.eventNames().indexOf("un"+o)!==-1;return(o==="click"||o==="dblclick")&&m&&(w=!0),o==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(w=!0),this.isVisible()&&w}buildModels(){return(0,Ci.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var o=this;return(0,Ci.Z)(function*(){yield o.buildModels()})()}renderMulPass(o){return(0,Ci.Z)(function*(){yield o.render()})()}renderModels(o={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(f=>{f.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(o),textures:this.layerModel.textures},(o==null?void 0:o.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(o,f,m,w){const C=this.configService.getAttributeConfig(this.id)||{};return m_(C[o],{field:f,values:m})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(o)!==-1&&this.configService.setAttributeConfig(this.id,{[o]:{field:f,values:m}}),this.startInit?this.styleAttributeService.updateStyleAttribute(o,{scale:(0,Pr.Z)({field:f},this.splitValuesAndCallbackInAttribute(m,this.getLayerConfig()[f]))},w):this.pendingStyleAttributes.push({attributeName:o,attributeField:f,attributeValues:m,updateOptions:w}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(o){console.warn("empty fn")}processData(o){return o}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}initLayerModels(){var o=this;return(0,Ci.Z)(function*(){o.models.forEach(w=>w.destroy()),o.models=[],o.uniformBuffers.forEach(w=>{w.destroy()}),o.uniformBuffers=[];const f=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0});o.uniformBuffers.push(f);const m=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0});o.uniformBuffers.push(m),o.models=yield o.layerModel.initModels()})()}getLayerUniformBuffer(){return this.uniformBuffers[0]}getPickingUniformBuffer(){return this.uniformBuffers[1]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(o){return{values:sh(o)?void 0:o,callback:sh(o)?o:void 0}}}function P1(a,o){return{enable:a,mask:255,func:{cmp:re.gl.EQUAL,ref:o?1:0,mask:1}}}function oy(a){return a.maskOperation===re.lE.OR?{enable:!0,mask:255,func:{cmp:re.gl.ALWAYS,ref:1,mask:255},opFront:{fail:re.gl.KEEP,zfail:re.gl.REPLACE,zpass:re.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===re.yn.SINGLE||a.stencilIndex===0?re.gl.ALWAYS:re.gl.LESS,ref:a.stencilType===re.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:re.gl.KEEP,zfail:re.gl.REPLACE,zpass:re.gl.REPLACE}}}const I1={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},og={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function Hd(a){return Math.max(Math.ceil(a/4)*4,4)}const ag={opacity:fa.OPACITY,stroke:fa.STROKE,offsets:fa.OFFSETS,rotation:fa.ROTATION,extrusionBase:fa.EXTRUSION_BASE,thetaOffset:15};class Tl{constructor(o){(0,Qt.Z)(this,"triangulation",void 0),(0,Qt.Z)(this,"uniformBuffers",[]),(0,Qt.Z)(this,"textures",[]),(0,Qt.Z)(this,"createTexture2D",void 0),(0,Qt.Z)(this,"preStyleAttribute",{}),(0,Qt.Z)(this,"encodeStyleAttribute",{}),(0,Qt.Z)(this,"layer",void 0),(0,Qt.Z)(this,"dataTexture",void 0),(0,Qt.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,Qt.Z)(this,"dataTextureTest",void 0),(0,Qt.Z)(this,"configService",void 0),(0,Qt.Z)(this,"shaderModuleService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"iconService",void 0),(0,Qt.Z)(this,"fontService",void 0),(0,Qt.Z)(this,"styleAttributeService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"cameraService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"pickingService",void 0),(0,Qt.Z)(this,"attributeUnifoms",void 0),(0,Qt.Z)(this,"commonUnifoms",void 0),this.layer=o,this.configService=o.getContainer().globalConfigService,this.rendererService=o.getContainer().rendererService,this.pickingService=o.getContainer().pickingService,this.shaderModuleService=o.getContainer().shaderModuleService,this.styleAttributeService=o.getContainer().styleAttributeService,this.mapService=o.getContainer().mapService,this.iconService=o.getContainer().iconService,this.fontService=o.getContainer().fontService,this.cameraService=o.getContainer().cameraService,this.layerService=o.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:f}=this.rendererService;this.createTexture2D=f}getBlend(){const{blend:o="normal"}=this.layer.getLayerConfig();return ah[re.h0[o]]}getStencil(o){const{mask:f=!1,maskInside:m=!0,enableMask:w,maskOperation:C=re.lE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return oy({isStencil:!0,stencilType:re.yn.SINGLE});if(o.isStencil)return oy((0,Pr.Z)((0,Pr.Z)({},o),{},{maskOperation:C}));const D=f||w&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return P1(D,m)}getDefaultStyle(){return{}}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const m=(0,Pr.Z)((0,Pr.Z)({},f.uniformsOption),o.uniformsOption);return Object.keys(m).forEach(w=>{typeof m[w]=="boolean"&&(m[w]=m[w]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(m.u_texture=this.textures[0]),m}getAnimateUniforms(){return{}}needUpdate(){return(0,Ci.Z)(function*(){return!1})()}buildModels(){return(0,Ci.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,Ci.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(o=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(o){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(o){return[o.enable?0:1,o.duration||4,o.interval||.2,o.trailLength||.1]}startModelAnimate(){const{animateOption:o}=this.layer.getLayerConfig();o.enable&&this.layer.setAnimateStartTime()}getInject(){const o=this.layer.encodeStyleAttribute;let f="";const m=[];this.layer.enableShaderEncodeStyles.forEach(D=>{o[D]?f+=`#define USE_ATTRIBUTE_${D.toUpperCase()} 0.0; 

`:m.push(`  ${og[D]} u_${D};`);let B=ag[D];!B&&D==="THETA_OFFSET"&&(B=15),f+=`
          #ifdef USE_ATTRIBUTE_${D.toUpperCase()}
          layout(location = ${ag[D]}) in ${og[D]} a_${D.charAt(0).toUpperCase()+D.slice(1)};
        #endif

        `});const w=m.length?`
layout(std140) uniform AttributeUniforms {
${m.join(`
`)}
};
    `:"";f+=w;let C="";return this.layer.enableShaderEncodeStyles.forEach(D=>{C+=`

    #ifdef USE_ATTRIBUTE_${D.toUpperCase()}
      ${og[D]} ${D}  = a_${D.charAt(0).toUpperCase()+D.slice(1)};
    #else
      ${og[D]} ${D} = u_${D};
    #endif

    `}),{"vs:#decl":f,"fs:#decl":w,"vs:#main-start":C}}getStyleAttribute(){const o={};return this.layer.enableShaderEncodeStyles.forEach(f=>{if(!this.layer.encodeStyleAttribute[f]){const m=this.layer.getLayerConfig()[f];let w=typeof m=="undefined"?I1[f]:m;f==="stroke"&&(w=(0,Ie.CI)(w)),o["u_"+f]=w}}),o}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(o=>{const f=ng(o);f&&(this.styleAttributeService.registerStyleAttribute(f),f.descriptor&&(f.descriptor.shaderLocation=ag[o]))})}updateEncodeAttribute(o,f){this.encodeStyleAttribute[o]=f}initUniformsBuffer(){const o=this.getUniformsBufferInfo(this.getStyleAttribute()),f=this.getCommonUniformsInfo();o.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Hd(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),f.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Hd(f.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(o){let f=0;const m=[];return Object.values(o).forEach(w=>{Array.isArray(w)?(m.push(...w),f+=w.length):typeof w=="number"?(m.push(w),f+=1):typeof w=="boolean"&&(m.push(Number(w)),f+=1)}),{uniformsOption:o,uniformsLength:f,uniformsArray:m}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var o,f;const{uniformsArray:m}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:w}=this.getCommonUniformsInfo();(o=this.attributeUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(m).buffer)}),(f=this.commonUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(w).buffer)})}}var ay=L(9187),Cp=L.n(ay);const sy=100,Sx=36,JE=40;function y_(a){return a/180*Math.acos(-1)}function D1(a){const o=y_(a[0])+Math.PI/2,f=y_(a[1]),m=sy+Math.random()*.4,w=m*Math.cos(f)*Math.cos(o),C=m*Math.cos(f)*Math.sin(o),D=m*Math.sin(f);return[C,D,w]}function yv(a,o){const f=mat4.create(),m=mat4.create(),w=vec3.fromValues(0,1,0),C=vec3.fromValues(0,0,0);o=o||{},a=typeof a!="undefined"?a:1;const B=2+(typeof o.segments!="undefined"?o.segments:32),V=2*B,ie=[],Ee=[],Ce=[],He=[],Ot=[],nn=[];for(let Bn=0;Bn<=B;Bn++){const sr=Bn/B,xr=sr*Math.PI;for(let fr=0;fr<=V;fr++){const Yr=fr/V,Pi=Yr*Math.PI*2;mat4.identity(m),mat4.rotateZ(m,m,-xr),mat4.identity(f),mat4.rotateY(f,f,Pi),vec3.transformMat4(C,w,m),vec3.transformMat4(C,C,f),vec3.scale(C,C,-a),Ce.push(C.slice()),He.push(...C.slice()),vec3.normalize(C,C),Ot.push(...C.slice()),nn.push([Yr,1-sr]),He.push(Yr,1-sr)}if(Bn>0){const fr=Ce.length;let Yr=fr-2*(V+1);for(;Yr+V+2<fr;Yr++)ie.push([Yr,Yr+1,Yr+V+1]),Ee.push(Yr,Yr+1,Yr+V+1),ie.push([Yr+V+1,Yr+1,Yr+V+2]),Ee.push(Yr+V+1,Yr+1,Yr+V+2)}}return{cells:ie,positions:Ce,uvs:nn,positionsArr:He,indicesArr:Ee,normalArr:Ot}}var Aa=L(31437);const tm=Aa.Ue(),gC=Aa.Ue(),yc=Aa.Ue(),_v=Aa.Ue(),Op=Aa.Ue();function ly(a,o,f,m,w){Aa.IH(a,f,m),Aa.Fv(a,a),o=Aa.al(-a[1],a[0]);const C=Aa.al(-f[1],f[0]);return[w/Aa.AK(o,C),o]}function L0(a,o){return Aa.t8(a,-o[1],o[0])}function N0(a,o,f){return Aa.lu(a,o,f),Aa.Fv(a,a),a}function __(a,o){return a[0]===o[0]&&a[1]===o[1]}function yC(a){const o=new Map;for(let f=0;f<a.length;f++){const m=a[0].toString()+"-"+a[1].toString();o.get(m)?(a.splice(f,1),f++):o.set(m,m)}return a}class Tx{constructor(o={}){(0,Qt.Z)(this,"complex",void 0),(0,Qt.Z)(this,"join",void 0),(0,Qt.Z)(this,"cap",void 0),(0,Qt.Z)(this,"miterLimit",void 0),(0,Qt.Z)(this,"thickness",void 0),(0,Qt.Z)(this,"normal",void 0),(0,Qt.Z)(this,"lastFlip",-1),(0,Qt.Z)(this,"miter",Aa.al(0,0)),(0,Qt.Z)(this,"started",!1),(0,Qt.Z)(this,"dash",!1),(0,Qt.Z)(this,"totalDistance",0),(0,Qt.Z)(this,"currentIndex",0),this.join=o.join||"miter",this.cap=o.cap||"butt",this.miterLimit=o.miterLimit||10,this.thickness=o.thickness||1,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const D=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,ie=this.simpleSegment(f,w,D,B,V);w+=ie}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleExtrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let ie=1;ie<w;ie++){var D,B,V;const Ee=o[ie-1];Ee.push((D=f[ie-1][2])!==null&&D!==void 0?D:0);const Ce=f[ie-1],He=o[ie];He.push((B=f[ie][2])!==null&&B!==void 0?B:0);const Ot=f[ie],nn=ie<o.length-1?[...o[ie+1],(V=f[ie+1][2])!==null&&V!==void 0?V:0]:null,Bn=ie<f.length-1?f[ie+1]:null,sr=this.simpleSegment(m,C,Ee,He,nn,Ce,Ot,Bn);C+=sr}if(this.dash)for(let ie=0;ie<m.positions.length/6;ie++)m.positions[ie*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let ie=1;ie<w;ie++){var D,B,V;const Ee=o[ie-1];Ee.push((D=f[ie-1][2])!==null&&D!==void 0?D:0);const Ce=f[ie-1],He=o[ie];He.push((B=f[ie][2])!==null&&B!==void 0?B:0);const Ot=f[ie],nn=ie<o.length-1?[...o[ie+1],(V=f[ie+1][2])!==null&&V!==void 0?V:0]:null,Bn=ie<f.length-1?f[ie+1]:null,sr=this.segment_gaode2(m,C,Ee,He,nn,Ce,Ot,Bn);C+=sr}if(this.dash)for(let ie=0;ie<m.positions.length/6;ie++)m.positions[ie*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const D=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,ie=this.segment(f,w,D,B,V);w+=ie}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleSegment(o,f,m,w,C){let D=0;const B=o.indices,V=o.positions,ie=o.normals,Ee=(0,Ie.Z)([w[0],w[1]]),Ce=(0,Ie.Z)([m[0],m[1]]);N0(yc,Ee,Ce);let He=0;if(this.dash&&(He=this.lineSegmentDistance(Ee,Ce),this.totalDistance+=He),this.normal||(this.normal=Aa.Ue(),L0(this.normal,yc)),this.started||(this.started=!0,this.extrusions(V,ie,m,this.normal,this.thickness,this.totalDistance-He)),B.push(f+0,f+1,f+2),!C)L0(this.normal,yc),this.extrusions(V,ie,w,this.normal,this.thickness,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),D+=2;else{const Ot=(0,Ie.Z)([C[0],C[1]]);__(Ee,Ot)&&Aa.IH(Ot,Ee,Aa.Fv(Ot,Aa.$X(Ot,Ee,Ce))),N0(_v,Ot,Ee);const[nn,Bn]=ly(Op,Aa.Ue(),yc,_v,this.thickness);let sr=Aa.AK(Op,this.normal)<0?-1:1;this.extrusions(V,ie,w,Bn,nn,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),sr=-1,Aa.JG(this.normal,Bn),D+=2,this.lastFlip=sr}return D}segment_gaode2(o,f,m,w,C,D,B,V){let ie=0;const Ee=o.indices,Ce=o.positions,He=o.normals,Ot=this.cap==="square",nn=this.join==="bevel",Bn=(0,Ie.Z)([B[0],B[1]]),sr=(0,Ie.Z)([D[0],D[1]]);N0(yc,w,m);let xr=0;if(this.dash&&(xr=this.lineSegmentDistance(Bn,sr),this.totalDistance+=xr),this.normal||(this.normal=Aa.Ue(),L0(this.normal,yc)),!this.started)if(this.started=!0,Ot){const fr=Aa.Ue(),Yr=Aa.Ue();Aa.IH(fr,this.normal,yc),Aa.IH(Yr,this.normal,yc),He.push(Yr[0],Yr[1],0),He.push(fr[0],fr[1],0),Ce.push(m[0],m[1],m[2]|0,this.totalDistance-xr,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(m[0],m[1],m[2]|0,this.totalDistance-xr,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ce,He,m,this.normal,this.thickness,this.totalDistance-xr);if(Ee.push(f+0,f+1,f+2),C){__(w,C)&&Aa.IH(C,w,Aa.Fv(C,Aa.$X(C,w,m))),N0(_v,C,w);const[fr,Yr]=ly(Op,Aa.Ue(),yc,_v,this.thickness);let Pi=Aa.AK(Op,this.normal)<0?-1:1,Co=nn;!Co&&this.join==="miter"&&fr>this.miterLimit&&(Co=!0),Co?(He.push(this.normal[0],this.normal[1],0),He.push(Yr[0],Yr[1],0),Ce.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*Pi,w[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*Pi,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Ee.push(...this.lastFlip!==-Pi?[f,f+2,f+3]:[f+2,f+1,f+3]),Ee.push(f+2,f+3,f+4),L0(tm,_v),Aa.JG(this.normal,tm),He.push(this.normal[0],this.normal[1],0),Ce.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*Pi,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,ie+=3):(this.extrusions(Ce,He,w,Yr,fr,this.totalDistance),Ee.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),Pi=-1,Aa.JG(this.normal,Yr),ie+=2),this.lastFlip=Pi}else{if(L0(this.normal,yc),Ot){const fr=Aa.Ue(),Yr=Aa.Ue();Aa.lu(Yr,yc,this.normal),Aa.IH(fr,yc,this.normal),He.push(Yr[0],Yr[1],0),He.push(fr[0],fr[1],0),Ce.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),Ce.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ce,He,w,this.normal,this.thickness,this.totalDistance);Ee.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),ie+=2}return ie}segment(o,f,m,w,C){let D=0;const B=o.indices,V=o.positions,ie=o.normals,Ee=this.cap==="square",Ce=this.join==="bevel",He=(0,Ie.Z)([w[0],w[1]]),Ot=(0,Ie.Z)([m[0],m[1]]);N0(yc,He,Ot);let nn=0;if(this.dash&&(nn=this.lineSegmentDistance(He,Ot),this.totalDistance+=nn),this.normal||(this.normal=Aa.Ue(),L0(this.normal,yc)),!this.started)if(this.started=!0,Ee){const Bn=Aa.Ue(),sr=Aa.Ue();Aa.IH(Bn,this.normal,yc),Aa.IH(sr,this.normal,yc),ie.push(sr[0],sr[1],0),ie.push(Bn[0],Bn[1],0),V.push(m[0],m[1],m[2]|0,this.totalDistance-nn,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),V.push(m[0],m[1],m[2]|0,this.totalDistance-nn,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,ie,m,this.normal,this.thickness,this.totalDistance-nn);if(B.push(f+0,f+1,f+2),C){const Bn=(0,Ie.Z)([C[0],C[1]]);__(He,Bn)&&Aa.IH(Bn,He,Aa.Fv(Bn,Aa.$X(Bn,He,Ot))),N0(_v,Bn,He);const[sr,xr]=ly(Op,Aa.Ue(),yc,_v,this.thickness);let fr=Aa.AK(Op,this.normal)<0?-1:1,Yr=Ce;!Yr&&this.join==="miter"&&sr>this.miterLimit&&(Yr=!0),Yr?(ie.push(this.normal[0],this.normal[1],0),ie.push(xr[0],xr[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*fr,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*fr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,B.push(...this.lastFlip!==-fr?[f,f+2,f+3]:[f+2,f+1,f+3]),B.push(f+2,f+3,f+4),L0(tm,_v),Aa.JG(this.normal,tm),ie.push(this.normal[0],this.normal[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*fr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D+=3):(this.extrusions(V,ie,w,xr,sr,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),fr=-1,Aa.JG(this.normal,xr),D+=2),this.lastFlip=fr}else{if(L0(this.normal,yc),Ee){const Bn=Aa.Ue(),sr=Aa.Ue();Aa.lu(sr,yc,this.normal),Aa.IH(Bn,yc,this.normal),ie.push(sr[0],sr[1],0),ie.push(Bn[0],Bn[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,ie,w,this.normal,this.thickness,this.totalDistance);B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),D+=2}return D}extrusions(o,f,m,w,C,D){f.push(w[0],w[1],0),f.push(w[0],w[1],0),o.push(m[0],m[1],m[2]|0,D,-C,m[2]|0),this.complex.indexes.push(this.currentIndex),o.push(m[0],m[1],m[2]|0,D,C,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(o,f){const m=f[0]-o[0],w=f[1]-o[1];return Math.sqrt(m*m+w*w)}}var Gs=L(77160);function b_(a){const o=a[0][0],f=a[0][a[0].length-1];o[0]===f[0]&&o[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const m=a[0].length,w=earcut.flatten(a),{vertices:C,dimensions:D}=w,B=[],V=[];for(let Ee=0;Ee<C.length/D;Ee++)D===2?B.push(C[Ee*2],C[Ee*2+1],1):B.push(C[Ee*3],C[Ee*3+1],1);const ie=earcut(w.vertices,w.holes,w.dimensions);V.push(...ie);for(let Ee=0;Ee<m;Ee++){const Ce=w.vertices.slice(Ee*D,(Ee+1)*D);let He=w.vertices.slice((Ee+1)*D,(Ee+2)*D);He.length===0&&(He=w.vertices.slice(0,D));const Ot=B.length/3;B.push(Ce[0],Ce[1],1,He[0],He[1],1,Ce[0],Ce[1],0,He[0],He[1],0),V.push(...[0,2,1,2,3,1].map(nn=>nn+Ot))}return{positions:B,index:V}}function L1(a){const o=earcut.flatten(a),f=earcut(o.vertices,o.holes,o.dimensions);return{positions:o.vertices,index:f}}function nm(a,o=!1){const f=a[0][0],m=a[0][a[0].length-1];f[0]===m[0]&&f[1]===m[1]&&(a[0]=a[0].slice(0,a[0].length-1));const w=a[0].length,C=Cp().flatten(a),{vertices:D,dimensions:B}=C,V=[],ie=[],Ee=[];for(let He=0;He<D.length/B;He++)V.push(D[He*B],D[He*B+1],1,-1,-1),Ee.push(0,0,1);const Ce=Cp()(C.vertices,C.holes,C.dimensions);ie.push(...Ce);for(let He=0;He<w;He++){const Ot=C.vertices.slice(He*B,(He+1)*B);let nn=C.vertices.slice((He+1)*B,(He+2)*B);nn.length===0&&(nn=C.vertices.slice(0,B));const Bn=V.length/5;V.push(Ot[0],Ot[1],1,0,0,nn[0],nn[1],1,.1,0,Ot[0],Ot[1],0,0,.8,nn[0],nn[1],0,.1,.8);const sr=ui([nn[0],nn[1],1],[Ot[0],Ot[1],0],[Ot[0],Ot[1],1],o);Ee.push(...sr,...sr,...sr,...sr),ie.push(...[1,2,0,3,2,1].map(xr=>xr+Bn))}return{positions:V,index:ie,normals:Ee}}function ui(a,o,f,m=!1){const w=Gs.Ue(),C=Gs.Ue(),D=Gs.Ue();m&&(a=(0,Ie.vP)(a),o=(0,Ie.vP)(o),f=(0,Ie.vP)(f));const B=Gs.al(...a),V=Gs.al(...o),ie=Gs.al(...f);Gs.lu(w,ie,V),Gs.lu(C,B,V),Gs.kC(D,w,C);const Ee=Gs.Ue();return Gs.Fv(Ee,D),Ee}let F0=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),Mp=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function x_(a,o=0){const f=Math.PI*2/a,m=[];for(let C=0;C<a;C++)m.push(f*C+o*Math.PI/12);return m.map(C=>{const D=Math.sin(C+Math.PI/4),B=Math.cos(C+Math.PI/4);return[D,B,0]})}function rm(){return x_(30)}function N1(){return x_(4)}function E_(){return x_(3)}function Ax(){return x_(6,1)}function eS(){return x_(5)}const Cx={[Mp.CIRCLE]:rm,[Mp.HEXAGON]:Ax,[Mp.TRIANGLE]:E_,[Mp.SQUARE]:N1,[Mp.PENTAGON]:eS,[F0.CYLINDER]:rm,[F0.HEXAGONCOLUMN]:Ax,[F0.TRIANGLECOLUMN]:E_,[F0.SQUARECOLUMN]:N1,[F0.PENTAGONCOLUMN]:eS},bv={};function Oc(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o,...o,...o,...o],indices:[0,1,2,2,3,0],size:o.length}}function Ul(a){const o=(0,Ie.SI)(a.coordinates),f=D1(o);return{vertices:[...f,...f,...f,...f],indices:[0,1,2,2,3,0],size:f.length}}function Gd(a){const{shape:o}=a,{positions:f,index:m,normals:w}=Mx(o,!1);return{vertices:f,indices:m,normals:w,size:5}}function CI(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o],indices:[0],size:o.length}}function tS(a){const{coordinates:o,originCoordinates:f,version:m}=a,w=new Tx({dash:!0,join:"bevel"});if(m==="GAODE2.x"){let D=o;Array.isArray(D[0][0])||(D=[o]);let B=f;Array.isArray(B[0][0])||(B=[f]);for(let V=0;V<D.length;V++){const ie=D[V],Ee=B[V];w.extrude_gaode2(ie,Ee)}}else{let D=o;D[0]&&!Array.isArray(D[0][0])&&(D=[o]),D.forEach(B=>{w.extrude(B)})}const C=w.complex;return{vertices:C.positions,indices:C.indices,normals:C.normals,indexes:C.indexes,size:6}}function OI(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function _C(a){const{coordinates:o,originCoordinates:f}=a,m=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:w,totalDistance:C}=bC(o,f);return w.map(D=>{m.push(D[0],D[1],D[2],D[3],0,C)}),{vertices:m,indices:[],normals:[],size:6,count:w.length}}function MI(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],size:4,count:0};const{results:m}=nS(o);return m.map(w=>{f.push(w[0],w[1],w[2],w[3])}),{vertices:f,indices:[],size:4,count:m.length}}function F1(a,o){const f=o[0]-a[0],m=o[1]-a[1];return Math.sqrt(f*f+m*m)}function uy(a,o){return a.length<3&&a.push(0),o!==void 0&&a.push(o),a}function bC(a,o){let f=a,m=o||a;Array.isArray(f)&&Array.isArray(f[0])&&Array.isArray(f[0][0])&&(f=o.flat(),m=o.flat());let w=0;if(f.length<2)return{results:f,totalDistance:0};{const C=[],D=uy(f[0],w);C.push(D);for(let V=1;V<f.length-1;V++){const ie=F1((0,Ie.Z)(m[V-1]),(0,Ie.Z)(m[V]));w+=ie;const Ee=uy(f[V],w);C.push(Ee),C.push(Ee)}const B=F1((0,Ie.Z)(m[m.length-2]),(0,Ie.Z)(m[m.length-1]));return w+=B,C.push(uy(f[f.length-1],w)),{results:C,totalDistance:w}}}function nS(a){if(a.length<2)return{results:a};{const o=[],f=uy(a[0]);o.push(f);for(let m=1;m<a.length-1;m++){const w=uy(a[m]);o.push(w),o.push(w)}return o.push(uy(a[a.length-1])),{results:o}}}function Wd(a){const{coordinates:o}=a,f=Cp().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:Cp()(m,C,w),vertices:m,size:w}}function r0(a){const{coordinates:o}=a,f=Cp().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:Cp()(m,C,w),vertices:S_(m),size:w+4}}function S_(a){const o=[],{center:f,radius:m}=(0,Ie.Rx)(a);for(let w=0;w<a.length;w+=2){const C=a[w],D=a[w+1];o.push(C,D,0,...f,m)}return o}function Ga(a){const o=a.coordinates,{positions:f,index:m,normals:w}=nm(o,!0);return{vertices:f,indices:m,normals:w,size:5}}function xC(a){const{shape:o}=a,{positions:f,index:m}=SC(o);return{vertices:f,indices:m,size:3}}function B1(a){const o=a.coordinates;return{vertices:[...o[0],0,0,0,...o[1],0,1,0,...o[2],0,1,1,...o[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function Ox(a,o){const{segmentNumber:f=30}=o,m=a.coordinates,w=[],C=[];for(let D=0;D<f;D++)w.push(D,1,D,m[0][0],m[0][1],m[1][0],m[1][1],D,-1,D,m[0][0],m[0][1],m[1][0],m[1][1]),D!==f-1&&C.push(...[0,1,2,1,3,2].map(B=>D*2+B));return{vertices:w,indices:C,size:7}}function RI(a){const o=a.coordinates;o.length===2&&o.push(0);const f=Zc(-1,1),m=Zc(1,1),w=Zc(-1,-1),C=Zc(1,-1);return{vertices:[...o,...f,...o,...w,...o,...C,...o,...m],indices:[0,1,2,3,0,2],size:5}}function Mx(a,o=!1){if(bv&&bv[a])return bv[a];const f=Cx[a]?Cx[a]():Cx.cylinder(),m=nm([f],o);return bv[a]=m,m}function Mc(a,o,f=3,m=!1){const w=new Float32Array(a.length/f*3);let C,D,B;const V=vec3.create(),ie=vec3.create(),Ee=vec3.create();for(let Ce=0,He=o.length;Ce<He;Ce+=3){C=o[Ce+0]*3,D=o[Ce+1]*3,B=o[Ce+2]*3;let Ot=[a[C],a[C+1]],nn=[a[D],a[D+1]],Bn=[a[B],a[B+1]];m&&(Ot=lngLatToMeters(Ot),nn=lngLatToMeters(nn),Bn=lngLatToMeters(Bn));const[sr,xr]=Ot,fr=vec3.fromValues(sr,xr,a[C+2]),[Yr,Pi]=nn,Co=vec3.fromValues(Yr,Pi,a[D+2]),[ao,Zr]=Bn,Qi=vec3.fromValues(ao,Zr,a[B+2]);vec3.sub(V,Qi,Co),vec3.sub(ie,fr,Co),vec3.cross(Ee,V,ie),w[C]+=V[0],w[C+1]+=V[1],w[C+2]+=V[2],w[D]+=V[0],w[D+1]+=V[1],w[D+2]+=V[2],w[B]+=V[0],w[B+1]+=V[1],w[B+2]+=V[2]}return EC(w),w}function EC(a){for(let o=0,f=a.length;o<f;o+=3){const m=vec3.fromValues(a[o],a[o+1],a[o+2]),w=vec3.create();vec3.normalize(w,m),a.set(w,o)}}function sg(a){const o=a[0][0],f=a[0][a[0].length-1];return o[0]===f[0]&&o[1]===f[1]}function SC(a){const o=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[a]?geometryShape[a]():geometryShape.circle();return o.indexOf(a)===-1?fillPolygon([f]):extrudePolygon([f])}function Zc(a,o){const f=(a+1)/2,m=(o+1)/2;return[f,m]}function cy(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}function iu(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}const fy=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,wC=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Pl={solid:0,dash:1};class w_ extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.NEAREST,min:re.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],forward:D=!0,lineTexture:B=!1,iconStep:V=100,segmentNumber:ie=30}=this.layer.getLayerConfig(),{animateOption:Ee}=this.layer.getLayerConfig();let Ce=C;w!=="dash"&&(Ce=[0,0]),Ce.length===2&&Ce.push(0,0);let He=0,Ot=[0,0,0,0],nn=[0,0,0,0];if(o&&f&&(Ot=(0,Ie.CI)(o),nn=(0,Ie.CI)(f),He=1),this.rendererService.getDirty()){var Bn;(Bn=this.texture)===null||Bn===void 0||Bn.bind()}const sr={u_animate:this.animateOption2Array(Ee),u_dash_array:Ce,u_sourceColor:Ot,u_targetColor:nn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:ie,u_lineDir:D?1:-1,u_icon_step:V,u_line_texture:B?1:0,u_textureBlend:m==="normal"?0:1,u_blur:.9,u_line_type:Pl[w||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:He};return this.getUniformsBufferInfo(sr)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:fy,vert:wC,type:""}}buildModels(){var o=this;return(0,Ci.Z)(function*(){o.initUniformsBuffer();const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc2d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:Ox,depth:{enable:!1},styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:re.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const nd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,rS=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,iS={solid:0,dash:1};class Rx extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.NEAREST,min:re.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:D=!1,iconStep:B=100,segmentNumber:V=30,globalArcHeight:ie=10}=this.layer.getLayerConfig(),{animateOption:Ee}=this.layer.getLayerConfig();C.length===2&&C.push(0,0);let Ce=0,He=[0,0,0,0],Ot=[0,0,0,0];if(o&&f&&(He=(0,Ie.CI)(o),Ot=(0,Ie.CI)(f),Ce=1),this.rendererService.getDirty()){var nn;(nn=this.texture)===null||nn===void 0||nn.bind()}const Bn={u_animate:this.animateOption2Array(Ee),u_dash_array:C,u_sourceColor:He,u_targetColor:Ot,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:sy,u_global_height:ie,segmentNumber:V,u_line_type:iS[w]||0,u_icon_step:B,u_line_texture:D?1:0,u_textureBlend:m==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Ce};return this.getUniformsBufferInfo(Bn)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:nd,vert:rS,type:""}}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc3d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:Ox,styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:re.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const Of={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},qi=1/2;function Zd(a,o){const{width:f=2,height:m=1}=o;return{vertices:[0,qi*a,1*a*f,-(m+qi)*a,1*a*f,(m-qi)*a,0,qi*a,1*a*f,-(m+qi)*a,1*a*f,(m-qi)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function oS(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*a*f,1*m,1*a*f,-1*m,0,0,1*a*f,1*m,1*a*f,-1*m],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Px(a,o){const{width:f=2,height:m=2}=o;return{vertices:[0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2,0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function Ix(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m,0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function TC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m,0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function im(a,o){const{width:f=2,height:m=2}=o,w=rm(),C=Cp().flatten([w]),D=Cp()(C.vertices,C.holes,C.dimensions),B=w.map(V=>[V[0]*f*a,V[1]*m]).flat();return{vertices:[...B,...B],dimensions:2,indices:D.map(V=>V+w.length),outLineIndices:D,normals:[...w.map(V=>[V[1]*m,V[0]*f*a,1]).flat(),...new Array(w.length*3).fill(0)]}}function AC(a,o=0,f){const m=typeof f.source=="object"?f.source.type:f.source,w=typeof f.target=="object"?f.target.type:f.target,{width:C=m?Of[m]:0}=typeof f.source=="object"?f.source:{},{width:D=w?Of[w]:0}=typeof f.target=="object"?f.target:{};return{vertices:[0,qi,1*C,...a,1,qi,-1*D,...a,1,-qi,-1*D,...a,0,-qi,1*C,...a,0,qi,1*C,...a,1,qi,-1*D,...a,1,-qi,-1*D,...a,0,-qi,1*C,...a],outLineIndices:[0,1,2,0,2,3].map(B=>B+o),indices:[4,5,6,4,6,7].map(B=>B+o),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function aS(a,o){const f=typeof a=="object"?a.type:a,m=o==="source"?1:-1,w=typeof a=="object"?a:{};switch(f){case"circle":return im(m,w);case"triangle":return oS(m,w);case"diamond":return Ix(m,w);case"rect":return Px(m,w);case"classic":return TC(m,w);case"halfTriangle":return Zd(m,w);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function CC(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function OC(a,o){return o?sS(a,o):CC(a)}function sS(a,o){const f=a.coordinates.flat(),{target:m="classic",source:w="circle"}=o,C=k1(aS(w,"source"),f,0,0),D=AC(f,C.vertices.length/7,o),B=k1(aS(m,"target"),f,1,C.vertices.length/7+D.vertices.length/7);return{vertices:[...C.vertices,...D.vertices,...B.vertices],indices:[...C.outLineIndices,...D.outLineIndices,...B.outLineIndices,...C.indices,...D.indices,...B.indices],normals:[...C.normals,...D.normals,...B.normals],size:7}}function k1(a,o,f=1,m=0){const w=[],{vertices:C,indices:D,dimensions:B,outLineIndices:V}=a;for(let ie=0;ie<C.length;ie+=B)w.push(f,C[ie+1],C[ie],...o);return(0,Pr.Z)((0,Pr.Z)({},a),{},{vertices:w,indices:D.map(ie=>ie+m),outLineIndices:V.map(ie=>ie+m)})}const z1=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,MC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`;class B0 extends Tl{getCommonUniformsInfo(){const{gapWidth:o=2,strokeWidth:f=1,strokeOpacity:m=1}=this.layer.getLayerConfig(),w={u_gap_width:o,u_stroke_width:f,u_stroke_opacity:m};return this.getUniformsBufferInfo(w)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"flow_line",vertexShader:MC,fragmentShader:z1,inject:o.getInject(),triangulation:OC,styleOption:o.layer.getLayerConfig().symbol,primitive:re.gl.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:re.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}})}}const U1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,rd=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,RC={solid:0,dash:1};class lS extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.NEAREST,min:re.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:D=!1,iconStep:B=100,segmentNumber:V=30}=this.layer.getLayerConfig(),{animateOption:ie}=this.layer.getLayerConfig();if(C.length===2&&C.push(0,0),this.rendererService.getDirty()){var Ee;(Ee=this.texture)===null||Ee===void 0||Ee.bind()}let Ce=0,He=[0,0,0,0],Ot=[0,0,0,0];o&&f&&(He=(0,Ie.CI)(o),Ot=(0,Ie.CI)(f),Ce=1);let nn=this.layer.getLayerAnimateTime();isNaN(nn)&&(nn=0);const Bn={u_animate:this.animateOption2Array(ie),u_dash_array:C,u_sourceColor:He,u_targetColor:Ot,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:V,u_line_type:RC[w]||0,u_icon_step:B,u_line_texture:D?1:0,u_textureBlend:m==="normal"?0:1,u_time:nn,u_linearColor:Ce};return this.getUniformsBufferInfo(Bn)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig();return[yield o.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:rd,fragmentShader:U1,triangulation:Ox,styleOption:{segmentNumber:f},inject:o.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:re.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}let PI=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),lg=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),PC=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),uS=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),II=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const Dx=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,IC=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in vec3 a_DistanceAndIndexAndMiter;
layout(location = 13) in vec4 a_Normal_Total_Distance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};


out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class j1 extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"textureEventFlag",!1),(0,Qt.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.NEAREST,min:re.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5,0,0],lineTexture:D=!1,iconStep:B=100,vertexHeightScale:V=20,strokeWidth:ie=0,raisingHeight:Ee=0,heightfixed:Ce=!1,linearDir:He=lg.VERTICAL,blur:Ot=[1,1,1,0]}=this.layer.getLayerConfig();let nn=C;if(w!=="dash"&&(nn=[0,0,0,0]),nn.length===2&&nn.push(0,0),this.rendererService.getDirty()&&this.texture){var Bn;(Bn=this.texture)===null||Bn===void 0||Bn.bind()}const{animateOption:sr}=this.layer.getLayerConfig();let xr=0,fr=[0,0,0,0],Yr=[0,0,0,0];o&&f&&(fr=(0,Ie.CI)(o),Yr=(0,Ie.CI)(f),xr=1);const Pi={u_animate:this.animateOption2Array(sr),u_dash_array:nn,u_blur:Ot,u_sourceColor:fr,u_targetColor:Yr,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:B,u_heightfixed:Number(Ce),u_vertexScale:V,u_raisingHeight:Number(Ee),u_strokeWidth:ie,u_textureBlend:m===PC.NORMAL?0:1,u_line_texture:D?1:0,u_linearDir:He===lg.VERTICAL?1:0,u_linearColor:xr,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Pi)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.textureEventFlag||(o.textureEventFlag=!0,o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture)),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{depth:f=!1}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return o.layer.triangulation=tS,[yield o.layer.buildLayerModel({moduleName:"line"+C,vertexShader:w,fragmentShader:m,triangulation:tS,inject:o.getInject(),depth:{enable:f}})]})()}getShaders(){return{frag:Dx,vert:IC,type:""}}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:re.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:10,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C,D)=>D===void 0?[m[3],10,m[4]]:[m[3],D,m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:re.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m,w,C)=>[...C,m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const ql=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,_c=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`;class Rp extends Tl{getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,lineType:m="solid",dashArray:w=[10,5,0,0],vertexHeightScale:C=20}=this.layer.getLayerConfig();let D=w;m!=="dash"&&(D=[0,0,0,0]),D.length===2&&D.push(0,0);let B=0,V=[0,0,0,0],ie=[0,0,0,0];o&&f&&(V=(0,Ie.CI)(o),ie=(0,Ie.CI)(f),B=1);const Ee={u_sourceColor:V,u_targetColor:ie,u_dash_array:D,u_vertexScale:C,u_linearColor:B};return this.getUniformsBufferInfo(Ee)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}getShaders(){return{frag:ql,vert:_c,type:"lineSimpleNormal"}}buildModels(){var o=this;return(0,Ci.Z)(function*(){o.initUniformsBuffer();const{frag:f,vert:m,type:w}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,triangulation:_C,inject:o.getInject(),primitive:re.gl.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:re.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:fa.SIZE,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:4,update:(o,f,m)=>{const{size:w=1}=o,C=Array.isArray(w)?[w[0],w[1]]:[w,0];return[C[0],C[1],m[3],m[5]]}}})}}const Lx=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,Ou=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
// \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      if(u_heightfixed > 0.0) {
        wallHeight *= mapboxZoomScale;
      }
      
    } else {
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        wallHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class DC extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.NEAREST,min:re.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",heightfixed:w=!1,lineTexture:C=!1,iconStep:D=100,iconStepCount:B=1}=this.layer.getLayerConfig(),{animateOption:V}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var ie;(ie=this.texture)===null||ie===void 0||ie.bind()}let Ee=0,Ce=[0,0,0,0],He=[0,0,0,0];o&&f&&(Ce=(0,Ie.CI)(o),He=(0,Ie.CI)(f),Ee=1);const Ot={u_animate:this.animateOption2Array(V),u_sourceColor:Ce,u_targetColor:He,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:D,u_heightfixed:Number(w),u_linearColor:Ee,u_line_texture:C?1:0,u_textureBlend:m==="normal"?0:1,u_iconStepCount:B,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Ot)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ci.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"lineWall",vertexShader:Ou,fragmentShader:Lx,triangulation:tS,inject:o.getInject(),depth:{enable:!1},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:re.GC.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:(o,f,m)=>[m[3]]}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:re.GC.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:(o,f,m)=>[m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:re.GC.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:(o,f,m)=>[m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}var Nx={arc:w_,arc3d:Rx,greatcircle:lS,wall:DC,line:j1,simple:Rp,flowline:B0,earthArc3d:Rx};class T_ extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","LineLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Qt.Z)(this,"arrowInsertCount",0),(0,Qt.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel=new Nx[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[o]}getModelType(){var o;if(this.layerType)return this.layerType;const f=this.styleAttributeService.getLayerStyleAttribute("shape");return(f==null||(o=f.scale)===null||o===void 0?void 0:o.field)||"line"}processData(o){if(this.getModelType()!=="simple")return o;const f=[];return o.map(m=>{if(Array.isArray(m.coordinates)&&Array.isArray(m.coordinates[0])&&Array.isArray(m.coordinates[0][0])){const w=(0,Pr.Z)({},m);m.coordinates.map(C=>{f.push((0,Pr.Z)((0,Pr.Z)({},w),{},{coordinates:C}))})}else f.push(m)}),f}}const V1=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,cS=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`;class fS extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"raiseCount",0),(0,Qt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},sourceColor:f,targetColor:m,pickLight:w=!1,heightfixed:C=!1,opacityLinear:D={enable:!1,dir:"up"},lightEnable:B=!0}=this.layer.getLayerConfig();let V=0,ie=[0,0,0,0],Ee=[0,0,0,0];if(f&&m&&(ie=(0,Ie.CI)(f),Ee=(0,Ie.CI)(m),V=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Ot=.01}=o;this.raiseCount+=Ot,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Ce={u_pickLight:Number(w),u_heightfixed:Number(C),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:V,u_sourceColor:ie,u_targetColor:Ee,u_opacitylinear:Number(D.enable),u_opacitylinear_dir:D.dir==="up"?1:0,u_lightEnable:Number(B)};return this.getUniformsBufferInfo(Ce)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{depth:f=!0,animateOption:{repeat:m=1}}=o.layer.getLayerConfig();return o.raiseRepeat=m,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:cS,fragmentShader:V1,triangulation:Gd,inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)},depth:{enable:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:re.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:o=>{const f=(0,Ie.SI)(o.coordinates);return[f[0],f[1],0]}}})}}const ou=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,Fx=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class ug extends Tl{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0,raisingHeight:C=0,heightfixed:D=!1,unit:B="pixel"}=this.layer.getLayerConfig();let V=this.getAnimateUniforms().u_time;isNaN(V)&&(V=-1);const ie={u_blur_height_fixed:[w,Number(C),Number(D)],u_stroke_width:f,u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_size_unit:uS[B],u_time:V,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(ie)}getAnimateUniforms(){const{animateOption:o={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Oc)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.layer.triangulation=Oc,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:Oc,depth:{enable:!1}})]})()}getShaders(){return{frag:ou,vert:Fx,type:"pointFill"}}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){const o=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:re.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(f,m,w,C)=>{const D=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],B=C%4*3;return[D[B],D[B+1],D[B+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:f=>{const{size:m=5}=f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:re.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:fa.SHAPE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:f=>{const{shape:m=2}=f;return[o.indexOf(m)]}}})}}const hS=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,Mo=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class dS extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.LINEAR,min:re.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}getUninforms(){if(this.rendererService.getDirty()){var o;(o=this.texture)===null||o===void 0||o.bind()}const f=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},f.uniformsOption),m.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1}=this.layer.getLayerConfig(),m={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(o),u_heightfixed:Number(f),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Mo,fragmentShader:hS,triangulation:CI,inject:o.getInject(),depth:{enable:!1},primitive:re.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}})}}const LC=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,NC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function pS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class vS extends Tl{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const o={u_size_scale:.5};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.layer.triangulation=pS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:NC,fragmentShader:LC,triangulation:pS,inject:o.getInject(),depth:{enable:!1},primitive:re.gl.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var Bx=L(98333),H1=L(85975);class mS{constructor(o,f,m){(0,Qt.Z)(this,"boxCells",[]),(0,Qt.Z)(this,"xCellCount",void 0),(0,Qt.Z)(this,"yCellCount",void 0),(0,Qt.Z)(this,"boxKeys",void 0),(0,Qt.Z)(this,"bboxes",void 0),(0,Qt.Z)(this,"width",void 0),(0,Qt.Z)(this,"height",void 0),(0,Qt.Z)(this,"xScale",void 0),(0,Qt.Z)(this,"yScale",void 0),(0,Qt.Z)(this,"boxUid",void 0);const w=this.boxCells;this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(f/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)w.push([]);this.boxKeys=[],this.bboxes=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0}insert(o,f,m,w,C){this.forEachCell(f,m,w,C,this.insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(C)}query(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!1,C)}hitTest(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!0,C)}insertBoxCell(o,f,m,w,C,D){this.boxCells[C].push(D)}queryHitTest(o,f,m,w,C,D){if(m<0||o>this.width||w<0||f>this.height)return C?!1:[];const B=[];if(o<=0&&f<=0&&this.width<=m&&this.height<=w){if(C)return!0;for(let ie=0;ie<this.boxKeys.length;ie++)B.push({key:this.boxKeys[ie],x1:this.bboxes[ie*4],y1:this.bboxes[ie*4+1],x2:this.bboxes[ie*4+2],y2:this.bboxes[ie*4+3]});return D?B.filter(D):B}const V={hitTest:C,seenUids:{box:{},circle:{}}};return this.forEachCell(o,f,m,w,this.queryCell,B,V,D),C?B.length>0:B}queryCell(o,f,m,w,C,D,B,V){const ie=B.seenUids,Ee=this.boxCells[C];if(Ee!==null){const Ce=this.bboxes;for(const He of Ee)if(!ie.box[He]){ie.box[He]=!0;const Ot=He*4;if(o<=Ce[Ot+2]&&f<=Ce[Ot+3]&&m>=Ce[Ot+0]&&w>=Ce[Ot+1]&&(!V||V(this.boxKeys[He]))){if(B.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[He],x1:Ce[Ot],y1:Ce[Ot+1],x2:Ce[Ot+2],y2:Ce[Ot+3]})}}}return!1}forEachCell(o,f,m,w,C,D,B,V){const ie=this.convertToXCellCoord(o),Ee=this.convertToYCellCoord(f),Ce=this.convertToXCellCoord(m),He=this.convertToYCellCoord(w);for(let Ot=ie;Ot<=Ce;Ot++)for(let nn=Ee;nn<=He;nn++){const Bn=this.xCellCount*nn+Ot;if(C.call(this,o,f,m,w,Bn,D,B,V))return}}convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}}var FC=mS;class BC{constructor(o,f){(0,Qt.Z)(this,"width",void 0),(0,Qt.Z)(this,"height",void 0),(0,Qt.Z)(this,"grid",void 0),(0,Qt.Z)(this,"viewportPadding",100),(0,Qt.Z)(this,"screenRightBoundary",void 0),(0,Qt.Z)(this,"screenBottomBoundary",void 0),(0,Qt.Z)(this,"gridRightBoundary",void 0),(0,Qt.Z)(this,"gridBottomBoundary",void 0),this.width=o,this.height=f,this.viewportPadding=Math.max(o,f),this.grid=new FC(o+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=o+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=o+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}placeCollisionBox(o){const f=o.x1+o.anchorPointX+this.viewportPadding,m=o.y1+o.anchorPointY+this.viewportPadding,w=o.x2+o.anchorPointX+this.viewportPadding,C=o.y2+o.anchorPointY+this.viewportPadding;return!this.isInsideGrid(f,m,w,C)||this.grid.hitTest(f,m,w,C)?{box:[]}:{box:[f,m,w,C]}}insertCollisionBox(o,f){const m={featureIndex:f};this.grid.insert(m,o[0],o[1],o[2],o[3])}project(o,f,m){const w=Bx.al(f,m,0,1),C=Bx.Ue(),D=H1.fromValues(...o);return Bx.fF(C,w,D),{x:(C[0]/C[3]+1)/2*this.width+this.viewportPadding,y:(-C[1]/C[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(o,f,m,w){return m>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}}function gS(a){let o=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break;default:o=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:o,verticalAlign:f}}function yS(a,o,f,m,w){if(!w)return;const C=a[m],D=C.glyph;if(D){const B=o[D].advance*C.scale,V=(a[m].x+B)*w;for(let ie=f;ie<=m;ie++)a[ie].x-=V}}function _S(a,o,f,m,w,C,D){const B=(o-f)*w,V=(-m*D+.5)*C;for(const ie of a)ie.x+=B,ie.y+=V}function kC(a,o,f,m,w,C,D){let V=0,ie=-8,Ee=0;const Ce=a.positionedGlyphs,He=C==="right"?1:C==="left"?0:.5,Ot=Ce.length;f.forEach(xr=>{if(xr.split("").forEach(fr=>{const Yr=o[fr];Yr&&(Ce.push({glyph:fr,x:V,y:ie+0,vertical:!1,scale:1,metrics:Yr}),V+=Yr.advance+D)}),Ce.length!==Ot){const fr=V-D;Ee=Math.max(fr,Ee),yS(Ce,o,Ot,Ce.length-1,He)}V=0,ie-=m+5});const{horizontalAlign:nn,verticalAlign:Bn}=gS(w);_S(Ce,He,nn,Bn,Ee,m,f.length);const sr=ie- -8;a.top+=-Bn*sr,a.bottom=a.top-sr,a.left+=-nn*Ee,a.right=a.left+Ee}function zC(a,o,f,m,w,C,D){let V=0,ie=-8,Ee=0;const Ce=a.positionedGlyphs,He=C==="right"?1:C==="left"?0:.5,Ot=Ce.length;f.forEach(xr=>{const fr=o[xr];if(fr&&(Ce.push({glyph:xr,x:fr.advance/2,y:ie+0,vertical:!1,scale:1,metrics:fr}),V+=fr.advance+D),Ce.length!==Ot){const Pi=V-D;Ee=Math.max(Pi,Ee),yS(Ce,o,Ot,Ce.length-1,He)}V=0,ie-=m+5});const{horizontalAlign:nn,verticalAlign:Bn}=gS(w);_S(Ce,He,nn,Bn,Ee,m,f.length);const sr=ie- -8;a.top+=-Bn*sr,a.bottom=a.top-sr,a.left+=-nn*Ee,a.right=a.left+Ee}function LI(a,o,f,m,w,C,D=[0,0],B){const V=a.split(`
`),ie=[],Ee={positionedGlyphs:ie,top:D[1],bottom:D[1],left:D[0],right:D[0],lineCount:V.length,text:a};return B?zC(Ee,o,V,f,m,w,C):kC(Ee,o,V,f,m,w,C),ie.length?Ee:!1}function A_(a,o=[0,0],f){const{positionedGlyphs:m=[]}=a,w=[];for(const C of m){const D=C.metrics,B=4,V=D.advance*C.scale/2,ie=f?[C.x+V,C.y]:[0,0],Ee=f?[0,0]:[C.x+V+o[0],C.y+o[1]],Ce=(0-B)*C.scale-V+Ee[0],He=(0-B)*C.scale+Ee[1],Ot=Ce+D.width*C.scale,nn=He+D.height*C.scale,Bn={x:Ce,y:He},sr={x:Ot,y:He},xr={x:Ce,y:nn},fr={x:Ot,y:nn};w.push({tl:Bn,tr:sr,bl:xr,br:fr,tex:D,glyphOffset:ie})}return w}const C_=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,k0=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:O_}=Ie.lodashUtil;function hy(a){const o=this,f=a.id,m=[],w=[];if(!o.glyphInfoMap||!o.glyphInfoMap[f])return{vertices:[],indices:[],size:7};const C=o.glyphInfoMap[f].centroid,D=C.length===2?[C[0],C[1],0]:C;return o.glyphInfoMap[f].glyphQuads.forEach((B,V)=>{m.push(...D,B.tex.x,B.tex.y+B.tex.height,B.tl.x,B.tl.y,...D,B.tex.x+B.tex.width,B.tex.y+B.tex.height,B.tr.x,B.tr.y,...D,B.tex.x+B.tex.width,B.tex.y,B.br.x,B.br.y,...D,B.tex.x,B.tex.y,B.bl.x,B.bl.y),w.push(0+V*4,1+V*4,2+V*4,2+V*4,3+V*4,0+V*4)}),{vertices:m,indices:w,size:7}}class kx extends Tl{constructor(...o){var f;super(...o),f=this,(0,Qt.Z)(this,"glyphInfo",void 0),(0,Qt.Z)(this,"glyphInfoMap",{}),(0,Qt.Z)(this,"rawEncodeData",void 0),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"currentZoom",-1),(0,Qt.Z)(this,"extent",void 0),(0,Qt.Z)(this,"textureHeight",0),(0,Qt.Z)(this,"textCount",0),(0,Qt.Z)(this,"preTextStyle",{}),(0,Qt.Z)(this,"mapping",(0,Ci.Z)(function*(){f.initGlyph(),f.updateTexture(),yield f.reBuildModel()}))}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:o="#fff",strokeWidth:f=0,halo:m=.5,gamma:w=2,raisingHeight:C=0}=this.layer.getLayerConfig(),D=this.getFontServiceMapping(),B=this.getFontServiceCanvas();D&&Object.keys(D).length!==this.textCount&&B&&(this.updateTexture(),this.textCount=Object.keys(D).length),this.preTextStyle=this.getTextStyle();const V={u_stroke_color:(0,Ie.CI)(o),u_sdf_map_size:[(B==null?void 0:B.width)||1,(B==null?void 0:B.height)||1],u_raisingHeight:Number(C),u_stroke_width:f,u_gamma_scale:w,u_halo_blur:m};return this.getUniformsBufferInfo(V)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.bindEvent(),o.extent=o.textExtent(),o.rawEncodeData=o.layer.getEncodedData(),o.preTextStyle=o.getTextStyle(),o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{textAllowOverlap:f=!1}=o.layer.getLayerConfig();return o.initGlyph(),o.updateTexture(),f||o.filterGlyphs(),[yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:k0,fragmentShader:C_,inject:o.getInject(),triangulation:hy.bind(o),depth:{enable:!1}})]})()}needUpdate(){var o=this;return(0,Ci.Z)(function*(){const{textAllowOverlap:f=!1,textAnchor:m="center",textOffset:w,padding:C,fontFamily:D,fontWeight:B}=o.getTextStyle();if(!O_(C,o.preTextStyle.padding)||!O_(w,o.preTextStyle.textOffset)||!O_(m,o.preTextStyle.textAnchor)||!O_(D,o.preTextStyle.fontFamily)||!O_(B,o.preTextStyle.fontWeight))return yield o.mapping(),!0;if(f)return!1;const V=o.mapService.getZoom(),ie=o.mapService.getBounds(),Ee=(0,Ie.oO)(o.extent,ie);return Math.abs(o.currentZoom-V)>.5||!Ee||f!==o.preTextStyle.textAllowOverlap?(yield o.reBuildModel(),!0):!1})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:re.GC.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:re.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=12}=o;return Array.isArray(f)?[f[0]]:[f]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const o=this.mapService.getBounds();return(0,Ie.yA)(o,.5)}initTextFont(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:D=""}=C;D=D.toString();for(const B of D)w.indexOf(B)===-1&&w.push(B)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!1})}initIconFontTex(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:D=""}=C;D=`${D}`,w.indexOf(D)===-1&&w.push(D)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!0})}getTextStyle(){const{fontWeight:o="400",fontFamily:f="sans-serif",textAllowOverlap:m=!1,padding:w=[0,0],textAnchor:C="center",textOffset:D=[0,0],opacity:B=1,strokeOpacity:V=1,strokeWidth:ie=0,stroke:Ee="#000"}=this.layer.getLayerConfig();return{fontWeight:o,fontFamily:f,textAllowOverlap:m,padding:w,textAnchor:C,textOffset:D,opacity:B,strokeOpacity:V,strokeWidth:ie,stroke:Ee}}generateGlyphLayout(o){const f=this.getFontServiceMapping(),{spacing:m=2,textAnchor:w="center",textOffset:C}=this.layer.getLayerConfig(),D=this.rawEncodeData;this.glyphInfo=D.map(B=>{const{shape:V="",id:ie,size:Ee=1}=B,Ce=B.textOffset?B.textOffset:C||[0,0],He=B.textAnchor?B.textAnchor:w||"center",Ot=LI(V.toString(),f,Ee,He,"left",m,Ce,o),nn=A_(Ot,Ce,!1);return B.shaping=Ot,B.glyphQuads=nn,B.centroid=(0,Ie.SI)(B.coordinates),B.originCentroid=B.version==="GAODE2.x"?(0,Ie.SI)(B.originCoordinates):B.originCentroid=B.centroid,this.glyphInfoMap[ie]={shaping:Ot,glyphQuads:nn,centroid:(0,Ie.SI)(B.coordinates)},B})}getFontServiceMapping(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${f}_${o}`)}getFontServiceCanvas(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${f}_${o}`)}filterGlyphs(){const{padding:o=[0,0],textAllowOverlap:f=!1}=this.layer.getLayerConfig();if(f)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:m,height:w}=this.rendererService.getViewportSize(),C=new BC(m,w);this.glyphInfo.filter(B=>{const{shaping:V,id:ie=0}=B,Ee=B.version==="GAODE2.x"?B.originCentroid:B.centroid,He=B.size/16,Ot=this.mapService.lngLatToContainer(Ee),{box:nn}=C.placeCollisionBox({x1:V.left*He-o[0],x2:V.right*He+o[0],y1:V.top*He-o[1],y2:V.bottom*He+o[1],anchorPointX:Ot.x,anchorPointY:Ot.y});return nn&&nn.length?(C.insertCollisionBox(nn,ie),!0):!1}).forEach(B=>{this.glyphInfoMap[B.id]=B})}initGlyph(){const{iconfont:o=!1}=this.layer.getLayerConfig();o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}updateTexture(){const{createTexture2D:o}=this.rendererService,f=this.getFontServiceCanvas();this.textureHeight=f.height,this.texture&&this.texture.destroy(),this.texture=o({data:f,mag:re.gl.LINEAR,min:re.gl.LINEAR,width:f.width,height:f.height}),this.textures=[this.texture]}reBuildModel(){var o=this;return(0,Ci.Z)(function*(){o.filterGlyphs();const f=yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:k0,fragmentShader:C_,triangulation:hy.bind(o),inject:o.getInject(),depth:{enable:!1}});o.layer.models=[f]})()}}function UC(a){return zx.apply(this,arguments)}function zx(){return zx=(0,Ci.Z)(function*(a){if(window.createImageBitmap){const o=yield fetch(a);return yield createImageBitmap(yield o.blob())}else{const o=new window.Image;return new Promise(f=>{o.onload=()=>f(o),o.src=a,o.crossOrigin="Anonymous"})}}),zx.apply(this,arguments)}const M_=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,dy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,Ux=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,bS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,jC=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,id=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`;class xS extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:o,heightfixed:f=!1,raisingHeight:m=0,topsurface:w=!0,sidesurface:C=!0,sourceColor:D,targetColor:B}=this.layer.getLayerConfig();let V=0,ie=[1,1,1,1],Ee=[1,1,1,1];D&&B&&(ie=(0,Ie.CI)(D),Ee=(0,Ie.CI)(B),V=1);const Ce={u_sourceColor:ie,u_targetColor:Ee,u_linearColor:V,u_topsurface:Number(w),u_sidesurface:Number(C),u_heightfixed:Number(f),u_raisingHeight:Number(m)};return o&&this.texture&&(Ce.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Ce)}initModels(){var o=this;return(0,Ci.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,depth:{enable:!0},inject:o.getInject(),triangulation:Ga})]})()}getShaders(){const{pickLight:o,mapTexture:f}=this.layer.getLayerConfig();return f?{frag:Ux,vert:bS,type:"polygonExtrudeTexture"}:o?{frag:jC,vert:id,type:"polygonExtrudePickLight"}:{frag:M_,vert:dy,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.textures=[]}registerBuiltinAttributes(){const o=this.layer.getSource().extent;let f=o;const m=this.layer.coordCenter||this.layer.getSource().center;let w=f[2]-f[0],C=f[3]-f[1];if(this.mapService.version==="GAODE2.x"){const[D,B]=this.mapService.coordToAMap2RelativeCoordinates([o[0],o[1]],m),[V,ie]=this.mapService.coordToAMap2RelativeCoordinates([o[2],o[3]],m);w=V-D,C=ie-B,f=[D,B,V,ie]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:re.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:fa.UV,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(D,B,V)=>{const ie=V[0],Ee=V[1];return[(ie-f[0])/w,(Ee-f[1])/C,V[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(D,B,V,ie,Ee)=>Ee}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:D=>{const{size:B=10}=D;return Array.isArray(B)?[B[0]]:[B]}}})}loadTexture(){var o=this;return(0,Ci.Z)(function*(){const{mapTexture:f}=o.layer.getLayerConfig(),{createTexture2D:m}=o.rendererService;if(o.texture=m({height:1,width:1}),f){const w=yield UC(f);o.texture=m({data:w,width:w.width,height:w.height,wrapS:re.gl.CLAMP_TO_EDGE,wrapT:re.gl.CLAMP_TO_EDGE,min:re.gl.LINEAR,mag:re.gl.LINEAR})}})()}}const ES=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,Xd=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class VC extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const o={};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:Ga,depth:{enable:!0}})]})()}getShaders(){return{frag:ES,vert:Xd,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=10}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const HC=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,SS=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,wS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,py=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class cg extends Tl{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,opacityLinear:f={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),m={u_raisingHeight:Number(o),u_opacitylinear:Number(f.enable),u_dir:f.dir==="in"?1:0};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{frag:f,vert:m,triangulation:w,type:C}=o.getModelParams();return o.initUniformsBuffer(),o.layer.triangulation=w,[yield o.layer.buildLayerModel({moduleName:C,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:w,primitive:re.gl.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){const{opacityLinear:o={enable:!1,dir:"in"}}=this.layer.getLayerConfig();o.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:re.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:fa.LINEAR,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(f,m,w)=>[w[3],w[4],w[5]]}})}getModelParams(){const{opacityLinear:o={enable:!1}}=this.layer.getLayerConfig();return o.enable?{frag:SS,vert:wS,type:"polygonLinear",triangulation:r0}:{frag:HC,vert:py,type:"polygonFill",triangulation:Wd}}}const jx=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,Vx=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class TS extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture1",void 0),(0,Qt.Z)(this,"texture2",void 0),(0,Qt.Z)(this,"texture3",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{watercolor:o="#6D99A8",watercolor2:f="#0F121C"}=this.layer.getLayerConfig(),m={u_watercolor:(0,Ie.CI)(o),u_watercolor2:(0,Ie.CI)(f),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(m)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Vx,fragmentShader:jx,inject:o.getInject(),triangulation:Wd,primitive:re.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o,f,m;(o=this.texture1)===null||o===void 0||o.destroy(),(f=this.texture2)===null||f===void 0||f.destroy(),(m=this.texture3)===null||m===void 0||m.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,D=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:re.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:fa.UV,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(V,ie,Ee,Ce)=>{const He=V.version==="GAODE2.x"?V.originCoordinates[0][Ce]:Ee,[Ot,nn]=He;return[(Ot-f)/D,(nn-m)/B]}}})}loadTexture(){const{createTexture2D:o}=this.rendererService,f={height:0,width:0};this.texture1=o(f),this.texture2=o(f),this.texture3=o(f),m(C=>{this.texture1=w(C[0]),this.texture2=w(C[1]),this.texture3=w(C[2]),this.layerService.reRender()});function m(C){let D=0;const B=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(ie=>{const Ee=new Image;Ee.crossOrigin="",Ee.src=ie,B.push(Ee),Ee.onload=()=>{D++,D===3&&C(B)}})}function w(C){return o({data:C,width:C.width,height:C.height,wrapS:re.gl.MIRRORED_REPEAT,wrapT:re.gl.MIRRORED_REPEAT,min:re.gl.LINEAR,mag:re.gl.LINEAR})}}}const Hx=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,GC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class WC extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{speed:o=.5}=this.layer.getLayerConfig(),f={u_speed:o,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:GC,fragmentShader:Hx,triangulation:Wd,inject:o.getInject(),primitive:re.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,D=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:re.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:fa.UV,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(V,ie,Ee,Ce)=>{const He=V.version==="GAODE2.x"?V.originCoordinates[0][Ce]:Ee,[Ot,nn]=He;return[(Ot-f)/D,(nn-m)/B]}}})}loadTexture(){const{waterTexture:o}=this.layer.getLayerConfig(),{createTexture2D:f}=this.rendererService;this.texture=f({height:1,width:1});const m=new Image;m.crossOrigin="",o?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),m.src=o):m.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",m.onload=()=>{this.texture=f({data:m,width:m.width,height:m.height,wrapS:re.gl.MIRRORED_REPEAT,wrapT:re.gl.MIRRORED_REPEAT,min:re.gl.LINEAR,mag:re.gl.LINEAR}),this.layerService.reRender()}}}var ZC={fill:cg,line:j1,extrude:xS,text:kx,point_fill:ug,point_image:dS,point_normal:vS,point_extrude:fS,water:WC,ocean:TS,extrusion:VC};class vy extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","PolygonLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel=new ZC[f](o),yield o.initLayerModels()})()}getModelType(){var o;const f=this.styleAttributeService.getLayerStyleAttribute("shape"),m=f==null||(o=f.scale)===null||o===void 0?void 0:o.field;return m==="fill"||!m?"fill":m==="extrude"?"extrude":m==="extrusion"?"extrusion":m==="water"?"water":m==="ocean"?"ocean":m==="line"?"line":this.getPointModelType()}getPointModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m}=this.getLayerConfig(),w=this.iconService.getIconMap(),C=o.find(D=>D.hasOwnProperty("shape"));if(C){const D=C.shape;return D==="dot"?"point_normal":(f==null?void 0:f.indexOf(D))!==-1?"point_fill":(m==null?void 0:m.indexOf(D))!==-1?"point_extrude":w.hasOwnProperty(D)?"point_image":"text"}else return"fill"}}class XC{constructor({rendererService:o,layerService:f,parent:m}){(0,Qt.Z)(this,"tileResource",new Map),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"layerTiles",[]),this.rendererService=o,this.layerService=f,this.parent=m}get tiles(){return this.layerTiles}hasTile(o){return this.layerTiles.some(f=>f.key===o)}addTile(o){this.layerTiles.push(o)}getTile(o){return this.layerTiles.find(f=>f.key===o)}getVisibleTileBylngLat(o){return this.layerTiles.find(f=>f.isLoaded&&f.visible&&f.lnglatInBounds(o))}removeTile(o){const f=this.layerTiles.findIndex(w=>w.key===o),m=this.layerTiles.splice(f,1);m[0]&&m[0].destroy()}updateTileVisible(o){const f=this.getTile(o.key);if(o.isVisible)if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(m)}else f==null||f.updateVisible(!0);else if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(!m)}else f==null||f.updateVisible(!1)}isParentLoaded(o){const f=o.parent;if(!f)return!0;const m=this.getTile(f==null?void 0:f.key);return!!(m!=null&&m.isLoaded)}isChildrenLoaded(o){const f=o==null?void 0:o.children;return f.length===0?!0:f.every(m=>{const w=this.getTile(m==null?void 0:m.key);return w?(w==null?void 0:w.isLoaded)===!0:!0})}render(){var o=this;return(0,Ci.Z)(function*(){const m=o.getRenderLayers().map(function(){var w=(0,Ci.Z)(function*(C){yield o.layerService.renderTileLayer(C)});return function(C){return w.apply(this,arguments)}}());yield Promise.all(m)})()}getRenderLayers(){const o=this.layerTiles.filter(m=>m.visible&&m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getLayers(){const o=this.layerTiles.filter(m=>m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(o=>o.destroy()),this.tileResource.clear()}}var G1=L(32676);function AS(a,o,f){f===void 0&&(f={});var m=Xe(a),w=Xe(o),C=G1.union(m.coordinates,w.coordinates);return C.length===0?null:C.length===1?(0,lt.yu)(C[0],f.properties):(0,lt.tw)(C,f.properties)}var CS=AS;class OS{getCombineFeature(o){let f=null;const m=o[0];return o.map(w=>{const C=lt.yu(w.coordinates);f===null?f=C:f=CS(f,C)}),m&&(f.properties=(0,Pr.Z)({},m)),f}}const R_="select",gy="active";class W1{constructor({layerService:o,tileLayerService:f,parent:m}){(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"tileLayerService",void 0),(0,Qt.Z)(this,"tileSourceService",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"tilePickID",new Map),this.layerService=o,this.tileLayerService=f,this.parent=m,this.tileSourceService=new OS}pickRender(o){const f=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(f){const m=f.getMainLayer();m==null||m.layerPickService.pickRender(o)}}pick(o,f){var m=this;return(0,Ci.Z)(function*(){const C=m.parent.getContainer().pickingService;if(o.type==="RasterLayer"){const D=m.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(D&&D.getMainLayer()!==void 0){const B=D.getMainLayer();return B.layerPickService.pickRasterLayer(B,f,m.parent)}return!1}return m.pickRender(f),C.pickFromPickingFBO(o,f)})()}selectFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(R_,C),this.updateHighLight(f,m,w,R_)}highlightPickedFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(gy,C),this.updateHighLight(f,m,w,gy)}updateHighLight(o,f,m,w){this.tileLayerService.tiles.map(C=>{const D=C.getMainLayer();switch(w){case R_:D==null||D.hooks.beforeSelect.call([o,f,m]);break;case gy:D==null||D.hooks.beforeHighlight.call([o,f,m]);break}})}setPickState(){const o=this.tilePickID.get(R_),f=this.tilePickID.get(gy);if(o){const[m,w,C]=this.pickId2Color(o);this.updateHighLight(m,w,C,R_);return}if(f){const[m,w,C]=this.pickId2Color(f);this.updateHighLight(m,w,C,gy);return}}color2PickId(o,f,m){return(0,Ie.W0)(new Uint8Array([o,f,m]))}pickId2Color(o){return(0,Ie.Z6)(o)}getFeatureById(o){const f=this.tileLayerService.getTiles().filter(w=>w.visible),m=[];return f.forEach(w=>{m.push(...w.getFeatureById(o))}),m}pickRasterLayer(){return!1}}const Gx=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,MS=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function RS(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class YC extends Tl{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:o,strokeOpacity:f=1,strokeWidth:m=0,stroke:w="#fff"}=this.layer.getLayerConfig(),C={u_stroke_color:(0,Ie.CI)(w),u_additive:o==="additive"?1:0,u_stroke_opacity:f,u_stroke_width:m};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.layer.triangulation=RS,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:MS,fragmentShader:Gx,inject:o.getInject(),triangulation:RS,depth:{enable:!1},primitive:re.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const $C=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,PS=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,{isNumber:qC}=Ie.lodashUtil;class KC extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"raiseCount",0),(0,Qt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},opacity:f=1,sourceColor:m,targetColor:w,pickLight:C=!1,heightfixed:D=!0,opacityLinear:B={enable:!1,dir:"up"},lightEnable:V=!0}=this.layer.getLayerConfig();let ie=0,Ee=[0,0,0,0],Ce=[0,0,0,0];if(m&&w&&(Ee=(0,Ie.CI)(m),Ce=(0,Ie.CI)(w),ie=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:nn=.01}=o;this.raiseCount+=nn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const He={u_sourceColor:Ee,u_targetColor:Ce,u_linearColor:ie,u_pickLight:Number(C),u_heightfixed:Number(D),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:qC(f)?f:1,u_opacitylinear:Number(B.enable),u_opacitylinear_dir:B.dir==="up"?1:0,u_lightEnable:Number(V)};return this.getUniformsBufferInfo(He)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){const{animateOption:{repeat:f=1}}=o.layer.getLayerConfig();return o.raiseRepeat=f,[yield o.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:PS,fragmentShader:$C,triangulation:Gd,depth:{enable:!0},inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:re.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:fa.NORMAL,buffer:{usage:re.gl.STATIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:re.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:o=>{const f=(0,Ie.SI)(o.coordinates);return D1([f[0],f[1]])}}})}}const IS=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,FI=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`;class DS extends Tl{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const C={u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_stroke_width:f,u_blur:w};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.layer.triangulation=Ul,[yield o.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:FI,fragmentShader:IS,triangulation:Ul,inject:o.getInject(),depth:{enable:!0},blend:o.getBlend()})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:re.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w)=>{const[C,D,B]=m,V=Gs.al(0,0,1),ie=Gs.al(C,0,B),Ee=C>=0?Gs.EU(V,ie):Math.PI*2-Gs.EU(V,ie),Ce=Math.PI*2-Math.asin(D/100),He=H1.create();H1.rotateY(He,He,Ee),H1.rotateX(He,He,Ce);const Ot=Gs.al(1,1,0);Gs.fF(Ot,Ot,He),Gs.Fv(Ot,Ot);const nn=Gs.al(-1,1,0);Gs.fF(nn,nn,He),Gs.Fv(nn,nn);const Bn=Gs.al(-1,-1,0);Gs.fF(Bn,Bn,He),Gs.Fv(Bn,Bn);const sr=Gs.al(1,-1,0);Gs.fF(sr,sr,He),Gs.Fv(sr,sr);const xr=[...Ot,...nn,...Bn,...sr],fr=w%4*3;return[xr[fr],xr[fr+1],xr[fr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:re.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:fa.SHAPE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{shape:f=2}=o;return[this.layer.getLayerConfig().shape2d.indexOf(f)]}}})}}const QC=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,Wx=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class JC extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"meter2coord",1),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"isMeter",!1),(0,Qt.Z)(this,"radian",0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=f({data:this.iconService.getCanvas(),mag:re.gl.LINEAR,min:re.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1,unit:m="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var w;(w=this.texture)===null||w===void 0||w.bind()}const C={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(f),u_raisingHeight:Number(o),u_size_unit:uS[m]};return this.getUniformsBufferInfo(C)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Oc)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:Wx,fragmentShader:QC,triangulation:Oc,depth:{enable:!1},inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)}})]})()}clearModels(){var o;this.iconService.off("imageUpdate",this.updateTexture),(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:re.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[C[D],C[D+1],C[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:fa.SIZE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const LS=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,eO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class oc extends Tl{getCommonUniformsInfo(){const{blend:o,speed:f=1,unit:m="pixel"}=this.layer.getLayerConfig(),w={u_additive:o==="additive"?1:0,u_size_unit:uS[m],u_speed:f,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(w)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Oc)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:eO,fragmentShader:LS,triangulation:Oc,inject:o.getInject(),depth:{enable:!1}})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:re.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:fa.EXTRUDE,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[C[D],C[D+1],C[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:re.GC.Attribute,descriptor:{shaderLocation:fa.SIZE,name:"a_Size",buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var fg={fillImage:JC,fill:ug,radar:oc,image:dS,normal:vS,simplePoint:YC,extrude:fS,text:kx,earthFill:DS,earthExtrude:KC};class yy extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","PointLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Qt.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Qt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel&&o.layerModel.clearModels(),o.layerModel=new fg[f](o),yield o.initLayerModels()})()}rebuildModels(){var o=this;return(0,Ci.Z)(function*(){yield o.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:o,values:f}=this.shapeOption,{shape2d:m}=this.getLayerConfig(),w=this.iconService.getIconMap();if(o&&(m==null?void 0:m.indexOf(o))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){for(const C of f)if(typeof C=="string"&&w.hasOwnProperty(C))return"image"}}return"normal"}getDefaultConfig(){const o=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[o]}getModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m,billboard:w=!0}=this.getLayerConfig(),C=this.iconService.getIconMap(),D=o.find(B=>B.hasOwnProperty("shape"));if(D){const B=D.shape;return B==="dot"?"normal":B==="simple"?"simplePoint":B==="radar"?"radar":this.layerType==="fillImage"||w===!1?"fillImage":(f==null?void 0:f.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":C.hasOwnProperty(B)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function Zx(a){return a==="PolygonLayer"?vy:a==="LineLayer"?T_:yy}function NS(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class hg extends Vu.EventEmitter{constructor(o,f){super(),(0,Qt.Z)(this,"x",void 0),(0,Qt.Z)(this,"y",void 0),(0,Qt.Z)(this,"z",void 0),(0,Qt.Z)(this,"key",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"sourceTile",void 0),(0,Qt.Z)(this,"visible",!0),(0,Qt.Z)(this,"layers",[]),(0,Qt.Z)(this,"isLoaded",!1),(0,Qt.Z)(this,"tileMaskLayers",[]),(0,Qt.Z)(this,"tileMask",void 0),this.parent=f,this.sourceTile=o,this.x=o.x,this.y=o.y,this.z=o.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...o){}lnglatInBounds(o){const[f,m,w,C]=this.sourceTile.bounds,{lng:D,lat:B}=o;return D>=f&&D<=w&&B>=m&&B<=C}getLayerOptions(){var o;const f=this.parent.getLayerConfig();return(0,Pr.Z)((0,Pr.Z)({},f),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:NS(this.parent.type),mask:f.mask||((o=f.maskLayers)===null||o===void 0?void 0:o.length)!==0&&f.enableMask})}getMaskLayer(){const{maskLayers:o}=this.parent.getLayerConfig(),f=[];return o==null||o.forEach(m=>{if(!m.tileLayer)return f.push(m),m;const C=m.tileLayer.getTile(this.sourceTile.key),D=C==null?void 0:C.getLayers()[0];D&&f.push(D)}),f}addTileMask(){var o=this;return(0,Ci.Z)(function*(){const f=new vy({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[o.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),m=(0,re.e7)(o.parent.container);f.setContainer(m),yield f.init(),o.tileMask=f;const w=o.getMainLayer();return w!==void 0&&(w.tileMask=f),f})()}addMask(o,f){var m=this;return(0,Ci.Z)(function*(){const w=(0,re.e7)(m.parent.container);f.setContainer(w),yield f.init(),o.addMask(f),m.tileMaskLayers.push(f)})()}addLayer(o){var f=this;return(0,Ci.Z)(function*(){o.isTileLayer=!0;const m=(0,re.e7)(f.parent.container);o.setContainer(m),f.layers.push(o),yield o.init()})()}updateVisible(o){this.visible=o,this.updateOptions("visible",o)}updateOptions(o,f){this.layers.forEach(m=>{m.updateLayerConfig({[o]:f})})}getMainLayer(){return this.layers[0]}getFeatures(o){return[]}getFeatureById(o){return[]}destroy(){var o;(o=this.tileMask)===null||o===void 0||o.destroy(),this.layers.forEach(f=>f.destroy())}}class tO extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.getSourceOption(),m=f.data.features[0].properties,w=new T_().source(f.data,f.options).size(1).shape("line").color("red"),C=new yy({minZoom:o.z-1,maxZoom:o.z+1,textAllowOverlap:!0}).source([m],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(o.key).style({stroke:"#fff",strokeWidth:2});yield o.addLayer(w),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:o.transforms}}}}const nO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,FS=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`;class rO extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,brightness:f,contrast:m,saturation:w,gamma:C}=this.layer.getLayerConfig(),D={u_opacity:(0,Ie.LS)(o,1),u_brightness:(0,Ie.LS)(f,1),u_contrast:(0,Ie.LS)(m,1),u_saturation:(0,Ie.LS)(w,1),u_gamma:(0,Ie.LS)(C,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(D)}initModels(){var o=this;return(0,Ci.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}loadTexture(){var o=this;return(0,Ci.Z)(function*(){const{createTexture2D:f}=o.rendererService;o.texture=f({height:1,width:1});const w=yield o.layer.getSource().data.images;o.texture=f({data:w[0],width:w[0].width,height:w[0].height,mag:re.gl.LINEAR,min:re.gl.LINEAR})})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:FS,fragmentShader:nO,triangulation:B1,primitive:re.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var Xx={image:rO};class iO extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","ImageLayer")}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel=new Xx[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{image:{}}[o]}getModelType(){return"image"}}class oO extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new iO((0,Pr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const ie=D;C[ie]((B=f[ie])===null||B===void 0?void 0:B.field,(V=f[ie])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const Yx=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,$x=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`;class aO extends Tl{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,color:f="#000"}=this.layer.getLayerConfig(),m={u_color:(0,Ie.CI)(f),u_opacity:o||1};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"mask",vertexShader:$x,fragmentShader:Yx,triangulation:Wd,depth:{enable:!1},pick:!1})]})()}clearModels(o=!0){o&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var BS={fill:aO};class kS extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","MaskLayer")}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel=new BS[f](o),yield o.initLayerModels()})()}getModelType(){return"fill"}}class Z1 extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new kS((0,Pr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const ie=D;C[ie]((B=f[ie])===null||B===void 0?void 0:B.field,(V=f[ie])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getFeatures(o){return o?this.sourceTile.data.getTileData(o):[]}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f,featureId:m}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}}function qx(a,o){return{type:a.type,field:"value",items:a.positions.map((f,m)=>({[o]:m>=a.colors.length?null:a.colors[m],value:f}))}}const zS=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,om=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class dg extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"colorTexture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:D}=this.layer.getLayerConfig(),B=C||(0,Ie.ZB)(D);this.colorTexture=this.layer.textureService.getColorTexture(D,B);const V={u_domain:B,u_opacity:o||1,u_noDataValue:w,u_clampLow:f?1:0,u_clampHigh:(typeof m!="undefined"?m:f)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(V)}getRasterData(o){return(0,Ci.Z)(function*(){if(Array.isArray(o.data))return{data:o.data,width:o.width,height:o.height};{const{rasterData:f,width:m,height:w}=yield o.data;return{data:Array.from(f),width:m,height:w}}})()}initModels(){var o=this;return(0,Ci.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m,queryVerdorInfo:w}=o.rendererService,C=f.data.dataArray[0],{data:D,width:B,height:V}=yield o.getRasterData(C);return o.texture=m({data:new Float32Array(D),width:B,height:V,format:w()==="WebGL1"?re.gl.LUMINANCE:re.gl.RED,type:re.gl.FLOAT,alignment:1}),[yield o.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:om,fragmentShader:zS,triangulation:B1,primitive:re.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var o,f;(o=this.texture)===null||o===void 0||o.destroy(),(f=this.colorTexture)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{shaderLocation:fa.UV,name:"a_Uv",buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const sO=["data"],lO=["rasterData"],uO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,cO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class fO extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"dataOption",{})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Pr.Z)((0,Pr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,noDataValue:f=0}=this.layer.getLayerConfig(),{rMinMax:m=[0,255],gMinMax:w=[0,255],bMinMax:C=[0,255]}=this.dataOption,D={u_rminmax:m,u_gminmax:w,u_bminmax:C,u_opacity:o||1,u_noDataValue:f,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(D)}getRasterData(o){var f=this;return(0,Ci.Z)(function*(){if(Array.isArray(o.data)){const{data:D}=o,B=(0,kl.Z)(o,sO);return f.dataOption=B,(0,Pr.Z)({data:D},B)}const m=yield o.data,{rasterData:w}=m,C=(0,kl.Z)(m,lO);return f.dataOption=C,Array.isArray(w)?(0,Pr.Z)({data:w},C):(0,Pr.Z)({data:Array.from(w)},C)})()}initModels(){var o=this;return(0,Ci.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=f.data.dataArray[0],{data:C,width:D,height:B}=yield o.getRasterData(w);return o.texture=m({data:new Float32Array(C),width:D,height:B,format:re.gl.RGB,type:re.gl.FLOAT}),[yield o.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:cO,fragmentShader:uO,triangulation:B1,primitive:re.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const hO=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,US=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
   vec4 u_unpack;
   vec2 u_domain;
   float u_opacity;
   float u_noDataValue;
   float u_clampLow;
   float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class Kx extends Tl{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:D,colorTexture:B,rScaler:V=6553.6,gScaler:ie=25.6,bScaler:Ee=.1,offset:Ce=1e4}=this.layer.getLayerConfig(),He=C||(0,Ie.ZB)(D);let Ot=B;B?this.layer.textureService.setColorTexture(B,D,He):Ot=this.layer.textureService.getColorTexture(D,He);const nn={u_unpack:[V,ie,Ee,Ce],u_domain:He,u_opacity:o||1,u_noDataValue:w,u_clampLow:f,u_clampHigh:typeof m!="undefined"?m:f,u_texture:this.texture,u_colorTexture:Ot};return this.textures=[this.texture,Ot],this.getUniformsBufferInfo(nn)}initModels(){var o=this;return(0,Ci.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=yield f.data.images;return o.texture=m({data:w[0],width:w[0].width,height:w[0].height,min:re.gl.LINEAR,mag:re.gl.LINEAR}),[yield o.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:US,fragmentShader:hO,triangulation:B1,primitive:re.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}buildModels(){var o=this;return(0,Ci.Z)(function*(){return o.initModels()})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:re.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:fa.UV,buffer:{usage:re.gl.DYNAMIC_DRAW,data:[],type:re.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var dO={raster:dg,rasterRgb:fO,raster3d:dg,rasterTerrainRgb:Kx};class Qx extends em{constructor(...o){super(...o),(0,Qt.Z)(this,"type","RasterLayer")}buildModels(){var o=this;return(0,Ci.Z)(function*(){const f=o.getModelType();o.layerModel=new dO[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[o]}getModelType(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(o){if(o!=="color")return{type:void 0,field:void 0,items:[]};const f=this.getLayerConfig().rampColors;return qx(f,o)}}const pO=["rasterData"];class vO extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Qx((0,Pr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const ie=D;C[ie]((B=f[ie])===null||B===void 0?void 0:B.field,(V=f[ie])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,kl.Z)(f,pO);return{data:m,options:{parser:(0,Pr.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}}class mO extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Qx((0,Pr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const ie=D;C[ie]((B=f[ie])===null||B===void 0?void 0:B.field,(V=f[ie])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const gO=["rasterData"],yO={positions:[0,1],colors:["#000","#fff"]};class _O extends hg{constructor(...o){super(...o),(0,Qt.Z)(this,"colorTexture",void 0)}initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),{rampColors:C,domain:D}=o.getLayerOptions();o.colorTexture=o.parent.textureService.getColorTexture(C,D);const B=new Qx((0,Pr.Z)((0,Pr.Z)({},m),{},{colorTexture:o.colorTexture})).source(w.data,w.options);f&&Object.keys(f).forEach(V=>{var ie,Ee;const Ce=V;B[Ce]((ie=f[Ce])===null||ie===void 0?void 0:ie.field,(Ee=f[Ce])===null||Ee===void 0?void 0:Ee.values)}),yield o.addLayer(B),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,kl.Z)(f,gO);return{data:m,options:{parser:(0,Pr.Z)({type:"raster",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}styleUpdate(...o){const{rampColors:f=yO,domain:m}=o;this.colorTexture=this.parent.textureService.getColorTexture(f,m||(0,Ie.ZB)(f)),this.layers.forEach(w=>w.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(o=>o.destroy())}}class X1 extends hg{initTileLayer(){var o=this;return(0,Ci.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=Zx(o.parent.type),C=o.getSourceOption();if(!C){o.isLoaded=!0,o.emit("loaded");return}const D=new w((0,Pr.Z)({},m)).source(C.data,C.options);Object.keys(f).forEach(B=>{var V,ie;const Ee=B;D[Ee]((V=f[Ee])===null||V===void 0?void 0:V.field,(ie=f[Ee])===null||ie===void 0?void 0:ie.values)}),yield o.addLayer(D),m.tileMask&&(yield o.addTileMask()),o.setLayerMinMaxZoom(D),o.isLoaded=!0,o.emit("loaded")})()}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f="defaultLayer",featureId:m="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}setLayerMinMaxZoom(o){o.getModelType()==="text"&&o.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(o){return this.sourceTile.data.getTileData(o)}getFeatureById(o){const f=this.getMainLayer();return f?f.getSource().data.dataArray.filter(w=>w._id===o):[]}}function bO(a){switch(a.type){case"PolygonLayer":return X1;case"LineLayer":return X1;case"PointLayer":return X1;case"TileDebugLayer":return tO;case"MaskLayer":return Z1;case"RasterLayer":const{dataType:f}=a.getSource().parser;switch(f){case re.n3.RGB:case re.n3.CUSTOMRGB:return vO;case re.n3.ARRAYBUFFER:case re.n3.CUSTOMARRAYBUFFER:return _O;case re.n3.TERRAINRGB:case re.n3.CUSTOMTERRAINRGB:return mO;default:return oO}default:return X1}}const Jx=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:xO}=Ie.lodashUtil;class EO{constructor(o){(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"tileLayerService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"pickingService",void 0),(0,Qt.Z)(this,"tilePickService",void 0),(0,Qt.Z)(this,"tilesetManager",void 0),(0,Qt.Z)(this,"initedTileset",!1),(0,Qt.Z)(this,"lastViewStates",void 0),(0,Qt.Z)(this,"mapchange",()=>{var m;if(this.parent.isVisible()===!1)return;const{latLonBounds:w,zoom:C}=this.getCurrentView();if(this.mapService.version==="GAODE1.x"){const{visible:D}=this.parent.getLayerConfig();C<2&&D?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):C>=2&&!D&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===C&&this.lastViewStates.latLonBounds.toString()===w.toString()||(this.lastViewStates={zoom:C,latLonBounds:w},(m=this.tilesetManager)===null||m===void 0||m.throttleUpdate(C,w))}),(0,Qt.Z)(this,"viewchange",xO(this.mapchange,24)),this.parent=o;const f=this.parent.getContainer();this.rendererService=f.rendererService,this.layerService=f.layerService,this.mapService=f.mapService,this.pickingService=f.pickingService,this.tileLayerService=new XC({rendererService:this.rendererService,layerService:this.layerService,parent:o}),this.tilePickService=new W1({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:o}),this.parent.setLayerPickService(this.tilePickService),this.proxy(o),this.initTileSetManager()}initTileSetManager(){var o;const f=this.parent.getSource();if(this.tilesetManager=f.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:m,zoom:w}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(w,m)}getCurrentView(){const o=this.mapService.getBounds(),f=[o[0][0],o[0][1],o[1][0],o[1][1]],m=this.mapService.getZoom();return{latLonBounds:f,zoom:m}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",o=>{}),this.tilesetManager.on("tile-unload",o=>{this.tileUnLoad(o)}),this.tilesetManager.on("tile-error",(o,f)=>{this.tileError(o)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(o){return this.tileLayerService.getTile(o)}tileLoaded(o){}tileError(o){console.warn("error:",o)}destroy(){var o;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(o=this.tilesetManager)===null||o===void 0||o.destroy(),this.tileLayerService.destroy()}reload(){var o;this.tilesetManager.clear();const{latLonBounds:f,zoom:m}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(m,f)}tileUnLoad(o){this.tileLayerService.removeTile(o.key)}tileUpdate(){var o=this;return(0,Ci.Z)(function*(){if(!o.tilesetManager)return;const f=o.parent.getMinZoom(),m=o.parent.getMaxZoom(),w=o.tilesetManager.tiles.filter(C=>C.isLoaded).filter(C=>C.isVisibleChange).filter(C=>C.data).filter(C=>C.z>=f&&C.z<m);yield Promise.all(w.map(function(){var C=(0,Ci.Z)(function*(D){if(o.tileLayerService.hasTile(D.key))o.tileLayerService.updateTileVisible(D),o.tilePickService.setPickState(),o.layerService.reRender();else{const B=bO(o.parent),V=new B(D,o.parent);yield V.initTileLayer(),o.tilePickService.setPickState(),V.getLayers().length!==0&&(o.tileLayerService.addTile(V),o.tileLayerService.updateTileVisible(D),o.layerService.reRender())}});return function(D){return C.apply(this,arguments)}}())),o.tilesetManager.isLoaded&&o.parent.emit("tiles-loaded",o.tilesetManager.currentTiles)})()}setPickState(o){}pickRender(o){this.tilePickService.pickRender(o)}selectFeature(o){this.tilePickService.selectFeature(o)}highlightPickedFeature(o){this.tilePickService.highlightPickedFeature(o)}proxy(o){Jx.forEach(f=>{const m=o[f].bind(o);o[f]=(...w)=>(m(...w),this.getLayers().map(C=>{C[f](...w)}),f==="style"&&this.getTiles().forEach(C=>C.styleUpdate(...w)),o)})}}class Y1 extends null{constructor(...o){super(...o),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",f=>{switch(f.stopPropagation(),f.type){case"touchcancel":case"touchend":case"mouseup":{var m;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.removeEventListener(w,this.move)}),(m=this.scene)===null||m===void 0||m.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.addEventListener(w,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let w;if("pageX"in f?w=f.pageX:f.touches&&f.touches.length&&f.touches[0].pageX?w=f.touches[0].pageX:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageX),!w)break;const C=this.getContainerDOMRect(),D=this.getContainerSize(),B=D[0],V=(C==null?void 0:C.left)||0,ie=w-V+window.scrollX-document.documentElement.clientLeft,Ee=B-Math.min(Math.max(0,B-ie),B),Ce=Ee/B;this.setOptions({ratio:Ce}),this.emit("moving",{size:[Ee,D[1]],ratio:[Ce,0]})}else{let w;if("pageY"in f?w=f.pageY:f.touches&&f.touches.length&&f.touches[0].pageY?w=f.touches[0].pageY:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageY),!w)break;const C=this.getContainerDOMRect(),D=this.getContainerSize(),B=D[1],V=(C==null?void 0:C.top)||0,ie=w-V+window.scrollY-document.documentElement.clientTop,Ee=B-Math.min(Math.max(0,B-ie),B),Ce=Ee/B;this.setOptions({ratio:Ce}),this.emit("moving",{size:[D[0],Ee],ratio:[0,Ce]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var f;if(!this.mapsService)return;const m=this.getMaskGeoData();(f=this.maskLayer)===null||f===void 0||f.setData(m)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const o=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",o);const{orientation:f="vertical",ratio:m=.5}=this.controlOption;return f==="horizontal"?(o.style.top=m*100+"%",o.style.left=""):(o.style.left=m*100+"%",o.style.top=""),o.classList.add(f),o}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd();const{className:f,style:m,layers:w,rightLayers:C}=this.controlOption;f&&this.setClassName(f),m&&this.setStyle(m),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const D=createLayerContainer(o);return this.maskLayer.setContainer(D),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(w,!1),this.addMaskToLayers(C,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var o;const{layers:f,rightLayers:m}=this.controlOption;this.removeMaskFromLayers(f),this.removeMaskFromLayers(m),(o=this.layerService)===null||o===void 0||o.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var o;const f=this.container;DOM.removeClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.enableMask()),w.forEach(C=>C.enableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!0,this.emit("show",this)}hide(){var o;const f=this.container;DOM.addClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.disableMask()),w.forEach(C=>C.disableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!1,this.emit("hide",this)}setOptions(o){const f=_objectSpread(_objectSpread({},this.controlOption),o);if(o.className&&this.setClassName(o.className),o.style&&this.setStyle(o.style),(o.orientation||o.ratio!==void 0)&&this.setOrientationAndRatio(f.orientation,f.ratio),o.layers){const m=o.layers,w=this.controlOption.layers;this.setLayers(m,w,!1)}if(o.rightLayers){const m=o.rightLayers,w=this.controlOption.rightLayers;this.setLayers(m,w,!0)}this.controlOption=f,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var o;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(o=this.mapsService)===null||o===void 0||o.off("camerachange",this.updateMask)}setOrientationAndRatio(o="vertical",f=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(o),o==="horizontal"?(this.container.style.top=f*100+"%",this.container.style.left=""):(this.container.style.left=f*100+"%",this.container.style.top="")}setLayers(o,f,m=!1){const w=o.filter(D=>f.includes(D)===!1),C=f.filter(D=>o.includes(D)===!1);this.addMaskToLayers(w,m),this.removeMaskFromLayers(C)}addMaskToLayers(o,f){o.forEach(m=>{m.updateLayerConfig({maskInside:!f}),m.addMask(this.maskLayer)})}removeMaskFromLayers(o){o.forEach(f=>{f.updateLayerConfig({maskInside:!0}),f.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:o=.5,orientation:f="vertical"}=this.controlOption,m=f==="vertical",[w,C]=this.getBounds(),[D,B]=w,[V,ie]=C;let Ee;if(m){const He=D+(V-D)*o;Ee=[[D,ie],[He,ie],[He,B],w,[D,ie]]}else{const He=this.getContainerSize(),nn=this.mapsService.containerToLngLat([He[0],He[1]*o]).lat;Ee=[[D,ie],C,[V,nn],[D,nn],[D,ie]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ee]}}]}}getContainerDOMRect(){var o;return(o=this.mapsService.getContainer())===null||o===void 0?void 0:o.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(o,f=!1){const m=Array.isArray(o)?o:[o];if(f){const w=this.controlOption.rightLayers.concat(...m);this.setOptions({rightLayers:w})}else{const w=this.controlOption.layers.concat(...m);this.setOptions({layers:w})}}removeLayer(o){const f=Array.isArray(o)?o:[o],m=this.controlOption.layers.filter(C=>f.includes(C)),w=this.controlOption.rightLayers.filter(C=>f.includes(C));this.setOptions({layers:m,rightLayers:w})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class UI extends null{constructor(...o){super(...o),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const f=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||f.getZoom()<=f.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(f.getZoom()))),(this.disabled||f.getZoom()>=f.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const o=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(o),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),o}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(o){DOM.clearChildren(o),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",o,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",o)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",o,this.zoomOut),this.updateDisabled()}createButton(o,f,m,w,C){const D=DOM.create("button",m,w);return typeof o=="string"?D.innerHTML=o:D.append(o),D.title=f,C&&D.addEventListener("click",C),D}}class SO extends Vu.EventEmitter{get lngLat(){var o;return(o=this.popupOption.lngLat)!==null&&o!==void 0?o:{lng:0,lat:0}}set lngLat(o){this.popupOption.lngLat=o}constructor(o){super(),(0,Qt.Z)(this,"popupOption",void 0),(0,Qt.Z)(this,"mapsService",void 0),(0,Qt.Z)(this,"sceneService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"scene",void 0),(0,Qt.Z)(this,"closeButton",void 0),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"content",void 0),(0,Qt.Z)(this,"contentTitle",void 0),(0,Qt.Z)(this,"contentPanel",void 0),(0,Qt.Z)(this,"tip",void 0),(0,Qt.Z)(this,"isShow",!0),(0,Qt.Z)(this,"onMouseMove",m=>{var w;const C=this.mapsService.getMapContainer(),{left:D=0,top:B=0}=(w=C==null?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{};this.setPopupPosition(m.clientX-D,m.clientY-B)}),(0,Qt.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:m,lat:w}=this.lngLat,{x:C,y:D}=this.mapsService.lngLatToContainer([m,w]);this.setPopupPosition(C,D)}),(0,Qt.Z)(this,"updateLngLatPositionWhenZoom",m=>{if(!this.mapsService||this.popupOption.followCursor)return;const w=m.map,C=w.getSize();C.x=C.x/2,C.y=C.y/2;const D=m.center,B=m.zoom,V=w.DE(this.lngLat,B,D);V.x=Math.round(V.x),V.y=Math.round(V.y),this.setPopupPosition(V.x,V.y,!0)}),(0,Qt.Z)(this,"onKeyDown",m=>{m.keyCode===27&&this.remove()}),(0,Qt.Z)(this,"onCloseButtonClick",m=>{m.stopPropagation&&m.stopPropagation(),this.hide()}),(0,Qt.Z)(this,"updatePosition",(m,w=!0)=>{const C=!!this.lngLat,{className:D,style:B,maxWidth:V,anchor:ie,stopPropagation:Ee}=this.popupOption;if(!this.mapsService||!C||!this.content)return;const Ce=this.mapsService.getMarkerContainer();if(!this.container&&Ce&&(this.container=Ie.SO.create("div",`l7-popup ${D!=null?D:""} ${this.isShow?"":"l7-popup-hide"}`,Ce),B&&this.container.setAttribute("style",B),this.tip=Ie.SO.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Ee&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(He=>{this.container.addEventListener(He,Ot=>{Ot.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),w?this.updateLngLatPositionWhenZoom(m):this.updateLngLatPosition(),Ie.SO.setTransform(this.container,`${Ie.rQ[ie]}`),(0,Ie.zi)(this.container,ie,"popup"),V){const{width:He}=this.container.getBoundingClientRect();He>parseFloat(V)&&(this.container.style.width=V)}else this.container.style.removeProperty("width")}),(0,Qt.Z)(this,"updateWhenZoom",m=>{this.updatePosition(m,!0)}),(0,Qt.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,Pr.Z)((0,Pr.Z)({},this.getDefault(o!=null?o:{})),o);const{lngLat:f}=this.popupOption;f&&(this.lngLat=f)}getIsShow(){return this.isShow}addTo(o){this.mapsService=o.mapService,this.sceneService=o.sceneService,this.layerService=o.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=o,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:f,text:m,title:w}=this.popupOption;return f?this.setHTML(f):m&&this.setText(m),w&&this.setTitle(w),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ie.SO.remove(this.content),this.container&&(Ie.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(o){this.show();const{className:f}=this.popupOption;if(this.popupOption=(0,Pr.Z)((0,Pr.Z)({},this.popupOption),o),this.checkUpdateOption(o,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Ie.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(o,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(o,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(o,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(o,["html"])&&o.html?this.setHTML(o.html):this.checkUpdateOption(o,["text"])&&o.text&&this.setText(o.text),this.checkUpdateOption(o,["className"])){var m;f&&this.container.classList.remove(f!=null?f:""),this.container.classList.add((m=o.className)!==null&&m!==void 0?m:"")}if(this.checkUpdateOption(o,["style"])){var w;Ie.SO.addStyle(this.container,(w=o.style)!==null&&w!==void 0?w:"")}return this.checkUpdateOption(o,["lngLat"])&&o.lngLat&&this.setLnglat(o.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Ie.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Ie.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(o){return this.popupOption.html=o,this.setDOMContent(o)}setText(o){return this.popupOption.text=o,this.setDOMContent(window.document.createTextNode(o))}setTitle(o){this.show(),this.popupOption.title=o,o?(this.contentTitle||(this.contentTitle=Ie.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Ie.SO.clearChildren(this.contentTitle),Ie.SO.appendElementType(this.contentTitle,o)):this.contentTitle&&(Ie.SO.remove(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:o,lat:f}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([o,f]),this}setLngLat(o){return this.setLnglat(o)}setLnglat(o){return this.show(),this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(o){return this.popupOption.maxWidth=o,this.update(),this}isOpen(){return!!this.mapsService}getDefault(o){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ie.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(o){return this.show(),this.createContent(),Ie.SO.appendElementType(this.contentPanel,o),this.update(),this}updateCloseOnClick(o){const f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!o&&requestAnimationFrame(()=>{f==null||f.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(o){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!o&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(o){var f;const m=(f=this.mapsService)===null||f===void 0?void 0:f.getContainer();m&&(m==null||m.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!o&&(m==null||m.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Ie.SO.remove(this.content),this.contentTitle=void 0,this.content=Ie.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const o=Cl("l7-icon-guanbi");Ie.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",()=>{this.hide()}),o.addEventListener("pointerup",f=>{f.stopPropagation()}),o.addEventListener("pointerdown",f=>{f.stopPropagation()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Ie.SO.create("div","l7-popup-content__panel",this.content)}setPopupPosition(o,f,m=!1){if(this.container){const{offsets:w}=this.popupOption;this.container.style.left=o+w[0]+"px",this.container.style.top=f-w[1]+"px",m?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(o,f){return f.some(m=>m in o)}}const{get:jS}=Ie.lodashUtil;class wO extends null{constructor(...o){super(...o),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(f,m)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(f,m.featureId))this.hide();else{const{title:w,content:C}=this.getLayerInfoFrag(f,m);this.setDOMContent(C),this.setLnglat(m.lngLat),this.setTitle(w),this.setDisplayFeatureInfo({layer:f,featureId:m.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var o;const{config:f,items:m}=this.popupOption;return(o=f!=null?f:m)!==null&&o!==void 0?o:[]}addTo(o){return super.addTo(o),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(o){this.unbindLayerEvent();const f=_objectSpread({},o),m=f.trigger||this.popupOption.trigger,w=f.items||this.popupOption.items,C=(w==null?void 0:w.length)===0;f.followCursor=m==="hover"&&!C;const D=this.isShow;return super.setOptions(f),this.bindLayerEvent(),(C||!D)&&this.hide(),this}getDefault(o){const f=o.trigger!=="click";return _objectSpread(_objectSpread({},super.getDefault(o)),{},{trigger:"hover",followCursor:f,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:o,closeOnClick:f}=this.popupOption;this.layerConfigItems.forEach(m=>{var w;const C=this.getLayerByConfig(m);if(!C)return;const D=_objectSpread({},m);if(o==="hover"){const Ee=this.onLayerMouseMove.bind(this,C),Ce=this.onLayerMouseOut.bind(this,C);D.onMouseMove=Ee,D.onMouseOut=Ce,C==null||C.on("mousemove",Ee),C==null||C.on("mouseout",Ce)}else{var B;const Ee=this.onLayerClick.bind(this,C);D.onClick=Ee,C==null||C.on("click",Ee);const Ce=(B=this.mapsService)===null||B===void 0?void 0:B.getMapContainer();Ce&&f&&Ce.addEventListener("click",this.onSceneClick)}const V=C==null||(w=C.getSource)===null||w===void 0?void 0:w.call(C),ie=this.onSourceUpdate.bind(this);V==null||V.on("update",ie),D.onSourceUpdate=ie,this.layerConfigMap.set(C,D)})}unbindLayerEvent(){this.layerConfigItems.forEach(o=>{var f;const m=this.getLayerByConfig(o),w=m&&this.layerConfigMap.get(m);if(!w)return;const{onMouseMove:C,onMouseOut:D,onClick:B,onSourceUpdate:V}=w;if(C&&m.off("mousemove",C),D&&m.off("mouseout",D),B&&m.off("click",B),V){var ie;m==null||(ie=m.getSource())===null||ie===void 0||ie.off("update",V)}const Ee=(f=this.mapsService)===null||f===void 0?void 0:f.getMapContainer();Ee&&Ee.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(o,f){if(!this.isSameFeature(o,f.featureId)){const{title:m,content:w}=this.getLayerInfoFrag(o,f);this.setDOMContent(w),this.setTitle(m),this.setDisplayFeatureInfo({layer:o,featureId:f.featureId}),this.show()}}onLayerMouseOut(o,f){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(o,f){const m=this.layerConfigMap.get(o);let w;const C=document.createDocumentFragment();if(m){let D=f.feature;D.type==="Feature"&&"properties"in D&&"geometry"in D&&(D=D.properties);const{title:B,fields:V,customContent:ie}=m;if(B){w=document.createDocumentFragment();const Ee=B instanceof Function?B(D):B;DOM.appendElementType(w,Ee)}if(ie){const Ee=ie instanceof Function?ie(D):ie;DOM.appendElementType(C,Ee)}else V!=null&&V.length&&(V==null||V.forEach(Ee=>{var Ce,He;const{field:Ot,formatField:nn,formatValue:Bn,getValue:sr}=typeof Ee=="string"?{field:Ee}:Ee,xr=DOM.create("div","l7-layer-popup__row"),fr=sr?sr(f.feature):jS(D,Ot),Yr=(Ce=nn instanceof Function?nn(Ot,D):nn)!==null&&Ce!==void 0?Ce:Ot;let Pi=(He=Bn instanceof Function?Bn(fr,D):Bn)!==null&&He!==void 0?He:fr;const Co=DOM.create("span","l7-layer-popup__key",xr);DOM.appendElementType(Co,Yr),DOM.appendElementType(Co,document.createTextNode("\uFF1A"));const ao=DOM.create("span","l7-layer-popup__value",xr);Array.isArray(Pi)&&Pi.every(Zr=>!(Zr instanceof Object))&&(Pi=Pi.map(Zr=>String(Zr)).join(",")),DOM.appendElementType(ao,Pi),C.appendChild(xr)}))}return{title:w,content:C}}getLayerByConfig(o){const f=o.layer;if(f instanceof Object)return f;if(typeof f=="string")return this.layerService.getLayer(f)||this.layerService.getLayerByName(f)}isSameFeature(o,f){const m=this.displayFeatureInfo;return m&&o===m.layer&&f===m.featureId}setDisplayFeatureInfo(o){const f=this.displayFeatureInfo;f&&f.layer.off("hide",this.onLayerHide),o&&o.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=o}}function VS(a,o){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||m)&&(o||(o=document),!!o)){var w=o.head||o.getElementsByTagName("head")[0];if(!w){w=o.createElement("head");var C=o.body||o.getElementsByTagName("body")[0];C?C.parentNode.insertBefore(w,C):o.documentElement.appendChild(w)}var D=o.createElement("style");return D.type="text/css",D.styleSheet?D.styleSheet.cssText=a:D.appendChild(o.createTextNode(a)),w.appendChild(D),D}}VS(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var TO=L(81550),HS=L.n(TO),AO=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:D,divisor:B}=o;this.buffer=f,this.attribute={buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},D&&(this.attribute.size=D)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},CO={[re.gl.POINTS]:"points",[re.gl.LINES]:"lines",[re.gl.LINE_LOOP]:"line loop",[re.gl.LINE_STRIP]:"line strip",[re.gl.TRIANGLES]:"triangles",[re.gl.TRIANGLE_FAN]:"triangle fan",[re.gl.TRIANGLE_STRIP]:"triangle strip"},GS={[re.gl.STATIC_DRAW]:"static",[re.gl.DYNAMIC_DRAW]:"dynamic",[re.gl.STREAM_DRAW]:"stream"},e2={[re.gl.BYTE]:"int8",[re.gl.INT]:"int32",[re.gl.UNSIGNED_BYTE]:"uint8",[re.gl.UNSIGNED_SHORT]:"uint16",[re.gl.UNSIGNED_INT]:"uint32",[re.gl.FLOAT]:"float"},t2={[re.gl.ALPHA]:"alpha",[re.gl.LUMINANCE]:"luminance",[re.gl.LUMINANCE_ALPHA]:"luminance alpha",[re.gl.RGB]:"rgb",[re.gl.RGBA]:"rgba",[re.gl.RGBA4]:"rgba4",[re.gl.RGB5_A1]:"rgb5 a1",[re.gl.RGB565]:"rgb565",[re.gl.DEPTH_COMPONENT]:"depth",[re.gl.DEPTH_STENCIL]:"depth stencil"},pg={[re.gl.DONT_CARE]:"dont care",[re.gl.NICEST]:"nice",[re.gl.FASTEST]:"fast"},WS={[re.gl.NEAREST]:"nearest",[re.gl.LINEAR]:"linear",[re.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[re.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[re.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[re.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},ZS={[re.gl.REPEAT]:"repeat",[re.gl.CLAMP_TO_EDGE]:"clamp",[re.gl.MIRRORED_REPEAT]:"mirror"},z0={[re.gl.NONE]:"none",[re.gl.BROWSER_DEFAULT_WEBGL]:"browser"},OO={[re.gl.NEVER]:"never",[re.gl.ALWAYS]:"always",[re.gl.LESS]:"less",[re.gl.LEQUAL]:"lequal",[re.gl.GREATER]:"greater",[re.gl.GEQUAL]:"gequal",[re.gl.EQUAL]:"equal",[re.gl.NOTEQUAL]:"notequal"},XS={[re.gl.FUNC_ADD]:"add",[re.gl.MIN_EXT]:"min",[re.gl.MAX_EXT]:"max",[re.gl.FUNC_SUBTRACT]:"subtract",[re.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},am={[re.gl.ZERO]:"zero",[re.gl.ONE]:"one",[re.gl.SRC_COLOR]:"src color",[re.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[re.gl.SRC_ALPHA]:"src alpha",[re.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[re.gl.DST_COLOR]:"dst color",[re.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[re.gl.DST_ALPHA]:"dst alpha",[re.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[re.gl.CONSTANT_COLOR]:"constant color",[re.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[re.gl.CONSTANT_ALPHA]:"constant alpha",[re.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[re.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},YS={[re.gl.NEVER]:"never",[re.gl.ALWAYS]:"always",[re.gl.LESS]:"less",[re.gl.LEQUAL]:"lequal",[re.gl.GREATER]:"greater",[re.gl.GEQUAL]:"gequal",[re.gl.EQUAL]:"equal",[re.gl.NOTEQUAL]:"notequal"},_y={[re.gl.ZERO]:"zero",[re.gl.KEEP]:"keep",[re.gl.REPLACE]:"replace",[re.gl.INVERT]:"invert",[re.gl.INCR]:"increment",[re.gl.DECR]:"decrement",[re.gl.INCR_WRAP]:"increment wrap",[re.gl.DECR_WRAP]:"decrement wrap"},MO={[re.gl.FRONT]:"front",[re.gl.BACK]:"back"},RO=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w}=o;this.buffer=a.buffer({data:f,usage:GS[m||re.gl.STATIC_DRAW],type:e2[w||re.gl.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){this.buffer.subdata(a,o)}},$S=class{constructor(a,o){const{data:f,usage:m,type:w,count:C}=o;this.elements=a.elements({data:f,usage:GS[m||re.gl.STATIC_DRAW],type:e2[w||re.gl.UNSIGNED_BYTE],count:C})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},PO=class{constructor(a,o){const{width:f,height:m,color:w,colors:C}=o,D={width:f,height:m};Array.isArray(C)&&(D.colors=C.map(B=>B.get())),w&&typeof w!="boolean"&&(D.color=w.get()),this.framebuffer=a.framebuffer(D)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:o}){this.framebuffer.resize(a,o)}},Pp=L(95147),vg=L(25897),n2=L(81957),wo=L(97582),IO=L(90857),qS=IO,bn;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",a[a.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.CULL_FACE=2884]="CULL_FACE",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.BLEND=3042]="BLEND",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.DITHER=3024]="DITHER",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DOUBLE=5130]="DOUBLE",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.ALWAYS=519]="ALWAYS",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.GEQUAL=518]="GEQUAL",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",a[a.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.READ_BUFFER=3074]="READ_BUFFER",a[a.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",a[a.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",a[a.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",a[a.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",a[a.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",a[a.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",a[a.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",a[a.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",a[a.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",a[a.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",a[a.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",a[a.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",a[a.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",a[a.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",a[a.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",a[a.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",a[a.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",a[a.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",a[a.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",a[a.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",a[a.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",a[a.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",a[a.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",a[a.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",a[a.RED=6403]="RED",a[a.RGB8=32849]="RGB8",a[a.RGBA8=32856]="RGBA8",a[a.RGB10_A2=32857]="RGB10_A2",a[a.TEXTURE_3D=32879]="TEXTURE_3D",a[a.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",a[a.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",a[a.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",a[a.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",a[a.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",a[a.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",a[a.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",a[a.SRGB=35904]="SRGB",a[a.SRGB8=35905]="SRGB8",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",a[a.RGBA32F=34836]="RGBA32F",a[a.RGB32F=34837]="RGB32F",a[a.RGBA16F=34842]="RGBA16F",a[a.RGB16F=34843]="RGB16F",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F",a[a.RGB9_E5=35901]="RGB9_E5",a[a.RGBA32UI=36208]="RGBA32UI",a[a.RGB32UI=36209]="RGB32UI",a[a.RGBA16UI=36214]="RGBA16UI",a[a.RGB16UI=36215]="RGB16UI",a[a.RGBA8UI=36220]="RGBA8UI",a[a.RGB8UI=36221]="RGB8UI",a[a.RGBA32I=36226]="RGBA32I",a[a.RGB32I=36227]="RGB32I",a[a.RGBA16I=36232]="RGBA16I",a[a.RGB16I=36233]="RGB16I",a[a.RGBA8I=36238]="RGBA8I",a[a.RGB8I=36239]="RGB8I",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.R8=33321]="R8",a[a.RG8=33323]="RG8",a[a.R16F=33325]="R16F",a[a.R32F=33326]="R32F",a[a.RG16F=33327]="RG16F",a[a.RG32F=33328]="RG32F",a[a.R8I=33329]="R8I",a[a.R8UI=33330]="R8UI",a[a.R16I=33331]="R16I",a[a.R16UI=33332]="R16UI",a[a.R32I=33333]="R32I",a[a.R32UI=33334]="R32UI",a[a.RG8I=33335]="RG8I",a[a.RG8UI=33336]="RG8UI",a[a.RG16I=33337]="RG16I",a[a.RG16UI=33338]="RG16UI",a[a.RG32I=33339]="RG32I",a[a.RG32UI=33340]="RG32UI",a[a.R8_SNORM=36756]="R8_SNORM",a[a.RG8_SNORM=36757]="RG8_SNORM",a[a.RGB8_SNORM=36758]="RGB8_SNORM",a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGB10_A2UI=36975]="RGB10_A2UI",a[a.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",a[a.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.HALF_FLOAT=5131]="HALF_FLOAT",a[a.RG=33319]="RG",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",a[a.CURRENT_QUERY=34917]="CURRENT_QUERY",a[a.QUERY_RESULT=34918]="QUERY_RESULT",a[a.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",a[a.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",a[a.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",a[a.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",a[a.DRAW_BUFFER0=34853]="DRAW_BUFFER0",a[a.DRAW_BUFFER1=34854]="DRAW_BUFFER1",a[a.DRAW_BUFFER2=34855]="DRAW_BUFFER2",a[a.DRAW_BUFFER3=34856]="DRAW_BUFFER3",a[a.DRAW_BUFFER4=34857]="DRAW_BUFFER4",a[a.DRAW_BUFFER5=34858]="DRAW_BUFFER5",a[a.DRAW_BUFFER6=34859]="DRAW_BUFFER6",a[a.DRAW_BUFFER7=34860]="DRAW_BUFFER7",a[a.DRAW_BUFFER8=34861]="DRAW_BUFFER8",a[a.DRAW_BUFFER9=34862]="DRAW_BUFFER9",a[a.DRAW_BUFFER10=34863]="DRAW_BUFFER10",a[a.DRAW_BUFFER11=34864]="DRAW_BUFFER11",a[a.DRAW_BUFFER12=34865]="DRAW_BUFFER12",a[a.DRAW_BUFFER13=34866]="DRAW_BUFFER13",a[a.DRAW_BUFFER14=34867]="DRAW_BUFFER14",a[a.DRAW_BUFFER15=34868]="DRAW_BUFFER15",a[a.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",a[a.SAMPLER_3D=35679]="SAMPLER_3D",a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",a[a.MAX_SAMPLES=36183]="MAX_SAMPLES",a[a.SAMPLER_BINDING=35097]="SAMPLER_BINDING",a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",a[a.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",a[a.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",a[a.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",a[a.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",a[a.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",a[a.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",a[a.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",a[a.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",a[a.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",a[a.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",a[a.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",a[a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",a[a.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",a[a.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",a[a.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",a[a.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",a[a.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",a[a.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",a[a.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",a[a.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",a[a.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",a[a.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",a[a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a[a.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",a[a.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",a[a.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",a[a.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",a[a.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",a[a.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",a[a.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",a[a.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",a[a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",a[a.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",a[a.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",a[a.UNIFORM_TYPE=35383]="UNIFORM_TYPE",a[a.UNIFORM_SIZE=35384]="UNIFORM_SIZE",a[a.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",a[a.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",a[a.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",a[a.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",a[a.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",a[a.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",a[a.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",a[a.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",a[a.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",a[a.OBJECT_TYPE=37138]="OBJECT_TYPE",a[a.SYNC_CONDITION=37139]="SYNC_CONDITION",a[a.SYNC_STATUS=37140]="SYNC_STATUS",a[a.SYNC_FLAGS=37141]="SYNC_FLAGS",a[a.SYNC_FENCE=37142]="SYNC_FENCE",a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",a[a.UNSIGNALED=37144]="UNSIGNALED",a[a.SIGNALED=37145]="SIGNALED",a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",a[a.WAIT_FAILED=37149]="WAIT_FAILED",a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",a[a.COLOR=6144]="COLOR",a[a.DEPTH=6145]="DEPTH",a[a.STENCIL=6146]="STENCIL",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX",a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",a[a.STREAM_READ=35041]="STREAM_READ",a[a.STREAM_COPY=35042]="STREAM_COPY",a[a.STATIC_READ=35045]="STATIC_READ",a[a.STATIC_COPY=35046]="STATIC_COPY",a[a.DYNAMIC_READ=35049]="DYNAMIC_READ",a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY",a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",a[a.INVALID_INDEX=4294967295]="INVALID_INDEX",a[a.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",a[a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",a[a.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",a[a.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",a[a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",a[a.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",a[a.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",a[a.RGBA32F_EXT=34836]="RGBA32F_EXT",a[a.RGB32F_EXT=34837]="RGB32F_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",a[a.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.SRGB_EXT=35904]="SRGB_EXT",a[a.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",a[a.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",a[a.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",a[a.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",a[a.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",a[a.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",a[a.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",a[a.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",a[a.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",a[a.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",a[a.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",a[a.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",a[a.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",a[a.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",a[a.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",a[a.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",a[a.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",a[a.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",a[a.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",a[a.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",a[a.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",a[a.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",a[a.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",a[a.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",a[a.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",a[a.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",a[a.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",a[a.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",a[a.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",a[a.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",a[a.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",a[a.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",a[a.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",a[a.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",a[a.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",a[a.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",a[a.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",a[a.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",a[a.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",a[a.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",a[a.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",a[a.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",a[a.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",a[a.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(bn||(bn={}));var Bs;(function(a){a[a.Buffer=0]="Buffer",a[a.Texture=1]="Texture",a[a.RenderTarget=2]="RenderTarget",a[a.Sampler=3]="Sampler",a[a.Program=4]="Program",a[a.Bindings=5]="Bindings",a[a.InputLayout=6]="InputLayout",a[a.RenderPipeline=7]="RenderPipeline",a[a.ComputePipeline=8]="ComputePipeline",a[a.Readback=9]="Readback",a[a.QueryPool=10]="QueryPool",a[a.RenderBundle=11]="RenderBundle"})(Bs||(Bs={}));var rs;(function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"})(rs||(rs={}));var P_;(function(a){a[a.CCW=2305]="CCW",a[a.CW=2304]="CW"})(P_||(P_={}));var od;(function(a){a[a.NONE=0]="NONE",a[a.FRONT=1]="FRONT",a[a.BACK=2]="BACK",a[a.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(od||(od={}));var ls;(function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC=768]="SRC",a[a.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",a[a.DST=774]="DST",a[a.ONE_MINUS_DST=775]="ONE_MINUS_DST",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.CONST=32769]="CONST",a[a.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(ls||(ls={}));var ac;(function(a){a[a.ADD=32774]="ADD",a[a.SUBSTRACT=32778]="SUBSTRACT",a[a.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX"})(ac||(ac={}));var Th;(function(a){a[a.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",a[a.REPEAT=1]="REPEAT",a[a.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Th||(Th={}));var ps;(function(a){a[a.POINT=0]="POINT",a[a.BILINEAR=1]="BILINEAR"})(ps||(ps={}));var Rc;(function(a){a[a.NO_MIP=0]="NO_MIP",a[a.NEAREST=1]="NEAREST",a[a.LINEAR=2]="LINEAR"})(Rc||(Rc={}));var bc;(function(a){a[a.POINTS=0]="POINTS",a[a.TRIANGLES=1]="TRIANGLES",a[a.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",a[a.LINES=3]="LINES",a[a.LINE_STRIP=4]="LINE_STRIP"})(bc||(bc={}));var Il;(function(a){a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(Il||(Il={}));var i0;(function(a){a[a.STATIC=1]="STATIC",a[a.DYNAMIC=2]="DYNAMIC"})(i0||(i0={}));var mg;(function(a){a[a.VERTEX=1]="VERTEX",a[a.INSTANCE=2]="INSTANCE"})(mg||(mg={}));var KS;(function(a){a.LOADED="loaded"})(KS||(KS={}));var fs;(function(a){a[a.TEXTURE_2D=0]="TEXTURE_2D",a[a.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",a[a.TEXTURE_3D=2]="TEXTURE_3D",a[a.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(fs||(fs={}));var Wf;(function(a){a[a.SAMPLED=1]="SAMPLED",a[a.RENDER_TARGET=2]="RENDER_TARGET",a[a.STORAGE=4]="STORAGE"})(Wf||(Wf={}));var df;(function(a){a[a.NONE=0]="NONE",a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA",a[a.RGB=7]="RGB",a[a.ALL=15]="ALL"})(df||(df={}));var Fu;(function(a){a[a.KEEP=7680]="KEEP",a[a.ZERO=0]="ZERO",a[a.REPLACE=7681]="REPLACE",a[a.INVERT=5386]="INVERT",a[a.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",a[a.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",a[a.INCREMENT_WRAP=34055]="INCREMENT_WRAP",a[a.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(Fu||(Fu={}));function jI(a,o,f,m){var w=fs.TEXTURE_2D,C=1,D=Wf.SAMPLED;return{dimension:w,format:a,width:o,height:f,depthOrArrayLayers:C,mipLevelCount:m,usage:D}}var Bu;(function(a){a[a.Float=0]="Float",a[a.UnfilterableFloat=1]="UnfilterableFloat",a[a.Uint=2]="Uint",a[a.Sint=3]="Sint",a[a.Depth=4]="Depth"})(Bu||(Bu={}));var U0;(function(a){a[a.LOWER_LEFT=0]="LOWER_LEFT",a[a.UPPER_LEFT=1]="UPPER_LEFT"})(U0||(U0={}));var xv;(function(a){a[a.NEGATIVE_ONE=0]="NEGATIVE_ONE",a[a.ZERO=1]="ZERO"})(xv||(xv={}));var I_;(function(a){a[a.OcclusionConservative=0]="OcclusionConservative"})(I_||(I_={}));var ri;(function(a){a[a.U8=1]="U8",a[a.U16=2]="U16",a[a.U32=3]="U32",a[a.S8=4]="S8",a[a.S16=5]="S16",a[a.S32=6]="S32",a[a.F16=7]="F16",a[a.F32=8]="F32",a[a.BC1=65]="BC1",a[a.BC2=66]="BC2",a[a.BC3=67]="BC3",a[a.BC4_UNORM=68]="BC4_UNORM",a[a.BC4_SNORM=69]="BC4_SNORM",a[a.BC5_UNORM=70]="BC5_UNORM",a[a.BC5_SNORM=71]="BC5_SNORM",a[a.U16_PACKED_5551=97]="U16_PACKED_5551",a[a.U16_PACKED_565=98]="U16_PACKED_565",a[a.D24=129]="D24",a[a.D32F=130]="D32F",a[a.D24S8=131]="D24S8",a[a.D32FS8=132]="D32FS8"})(ri||(ri={}));var Ro;(function(a){a[a.R=1]="R",a[a.RG=2]="RG",a[a.RGB=3]="RGB",a[a.RGBA=4]="RGBA",a[a.A=5]="A"})(Ro||(Ro={}));function au(a){return a}var vo;(function(a){a[a.None=0]="None",a[a.Normalized=1]="Normalized",a[a.sRGB=2]="sRGB",a[a.Depth=4]="Depth",a[a.Stencil=8]="Stencil",a[a.RenderTarget=16]="RenderTarget",a[a.Luminance=32]="Luminance"})(vo||(vo={}));function ta(a,o,f){return a<<16|o<<8|f}var Qn;(function(a){a[a.ALPHA=ta(ri.U8,Ro.A,vo.None)]="ALPHA",a[a.U8_LUMINANCE=ta(ri.U8,Ro.A,vo.Luminance)]="U8_LUMINANCE",a[a.F16_LUMINANCE=ta(ri.F16,Ro.A,vo.Luminance)]="F16_LUMINANCE",a[a.F32_LUMINANCE=ta(ri.F32,Ro.A,vo.Luminance)]="F32_LUMINANCE",a[a.F16_R=ta(ri.F16,Ro.R,vo.None)]="F16_R",a[a.F16_RG=ta(ri.F16,Ro.RG,vo.None)]="F16_RG",a[a.F16_RGB=ta(ri.F16,Ro.RGB,vo.None)]="F16_RGB",a[a.F16_RGBA=ta(ri.F16,Ro.RGBA,vo.None)]="F16_RGBA",a[a.F32_R=ta(ri.F32,Ro.R,vo.None)]="F32_R",a[a.F32_RG=ta(ri.F32,Ro.RG,vo.None)]="F32_RG",a[a.F32_RGB=ta(ri.F32,Ro.RGB,vo.None)]="F32_RGB",a[a.F32_RGBA=ta(ri.F32,Ro.RGBA,vo.None)]="F32_RGBA",a[a.U8_R=ta(ri.U8,Ro.R,vo.None)]="U8_R",a[a.U8_R_NORM=ta(ri.U8,Ro.R,vo.Normalized)]="U8_R_NORM",a[a.U8_RG=ta(ri.U8,Ro.RG,vo.None)]="U8_RG",a[a.U8_RG_NORM=ta(ri.U8,Ro.RG,vo.Normalized)]="U8_RG_NORM",a[a.U8_RGB=ta(ri.U8,Ro.RGB,vo.None)]="U8_RGB",a[a.U8_RGB_NORM=ta(ri.U8,Ro.RGB,vo.Normalized)]="U8_RGB_NORM",a[a.U8_RGB_SRGB=ta(ri.U8,Ro.RGB,vo.sRGB|vo.Normalized)]="U8_RGB_SRGB",a[a.U8_RGBA=ta(ri.U8,Ro.RGBA,vo.None)]="U8_RGBA",a[a.U8_RGBA_NORM=ta(ri.U8,Ro.RGBA,vo.Normalized)]="U8_RGBA_NORM",a[a.U8_RGBA_SRGB=ta(ri.U8,Ro.RGBA,vo.sRGB|vo.Normalized)]="U8_RGBA_SRGB",a[a.U16_R=ta(ri.U16,Ro.R,vo.None)]="U16_R",a[a.U16_R_NORM=ta(ri.U16,Ro.R,vo.Normalized)]="U16_R_NORM",a[a.U16_RG_NORM=ta(ri.U16,Ro.RG,vo.Normalized)]="U16_RG_NORM",a[a.U16_RGBA_NORM=ta(ri.U16,Ro.RGBA,vo.Normalized)]="U16_RGBA_NORM",a[a.U16_RGBA=ta(ri.U16,Ro.RGBA,vo.None)]="U16_RGBA",a[a.U16_RGB=ta(ri.U16,Ro.RGB,vo.None)]="U16_RGB",a[a.U16_RG=ta(ri.U16,Ro.RG,vo.None)]="U16_RG",a[a.U32_R=ta(ri.U32,Ro.R,vo.None)]="U32_R",a[a.U32_RG=ta(ri.U32,Ro.RG,vo.None)]="U32_RG",a[a.U32_RGB=ta(ri.U32,Ro.RGB,vo.None)]="U32_RGB",a[a.U32_RGBA=ta(ri.U32,Ro.RGBA,vo.None)]="U32_RGBA",a[a.S8_R=ta(ri.S8,Ro.R,vo.None)]="S8_R",a[a.S8_R_NORM=ta(ri.S8,Ro.R,vo.Normalized)]="S8_R_NORM",a[a.S8_RG_NORM=ta(ri.S8,Ro.RG,vo.Normalized)]="S8_RG_NORM",a[a.S8_RGB_NORM=ta(ri.S8,Ro.RGB,vo.Normalized)]="S8_RGB_NORM",a[a.S8_RGBA_NORM=ta(ri.S8,Ro.RGBA,vo.Normalized)]="S8_RGBA_NORM",a[a.S16_R=ta(ri.S16,Ro.R,vo.None)]="S16_R",a[a.S16_RG=ta(ri.S16,Ro.RG,vo.None)]="S16_RG",a[a.S16_RG_NORM=ta(ri.S16,Ro.RG,vo.Normalized)]="S16_RG_NORM",a[a.S16_RGB_NORM=ta(ri.S16,Ro.RGB,vo.Normalized)]="S16_RGB_NORM",a[a.S16_RGBA=ta(ri.S16,Ro.RGBA,vo.None)]="S16_RGBA",a[a.S16_RGBA_NORM=ta(ri.S16,Ro.RGBA,vo.Normalized)]="S16_RGBA_NORM",a[a.S32_R=ta(ri.S32,Ro.R,vo.None)]="S32_R",a[a.S32_RG=ta(ri.S32,Ro.RG,vo.None)]="S32_RG",a[a.S32_RGB=ta(ri.S32,Ro.RGB,vo.None)]="S32_RGB",a[a.S32_RGBA=ta(ri.S32,Ro.RGBA,vo.None)]="S32_RGBA",a[a.U16_RGBA_5551=ta(ri.U16_PACKED_5551,Ro.RGBA,vo.Normalized)]="U16_RGBA_5551",a[a.U16_RGB_565=ta(ri.U16_PACKED_565,Ro.RGB,vo.Normalized)]="U16_RGB_565",a[a.BC1=ta(ri.BC1,Ro.RGBA,vo.Normalized)]="BC1",a[a.BC1_SRGB=ta(ri.BC1,Ro.RGBA,vo.Normalized|vo.sRGB)]="BC1_SRGB",a[a.BC2=ta(ri.BC2,Ro.RGBA,vo.Normalized)]="BC2",a[a.BC2_SRGB=ta(ri.BC2,Ro.RGBA,vo.Normalized|vo.sRGB)]="BC2_SRGB",a[a.BC3=ta(ri.BC3,Ro.RGBA,vo.Normalized)]="BC3",a[a.BC3_SRGB=ta(ri.BC3,Ro.RGBA,vo.Normalized|vo.sRGB)]="BC3_SRGB",a[a.BC4_UNORM=ta(ri.BC4_UNORM,Ro.R,vo.Normalized)]="BC4_UNORM",a[a.BC4_SNORM=ta(ri.BC4_SNORM,Ro.R,vo.Normalized)]="BC4_SNORM",a[a.BC5_UNORM=ta(ri.BC5_UNORM,Ro.RG,vo.Normalized)]="BC5_UNORM",a[a.BC5_SNORM=ta(ri.BC5_SNORM,Ro.RG,vo.Normalized)]="BC5_SNORM",a[a.D24=ta(ri.D24,Ro.R,vo.Depth)]="D24",a[a.D24_S8=ta(ri.D24S8,Ro.RG,vo.Depth|vo.Stencil)]="D24_S8",a[a.D32F=ta(ri.D32F,Ro.R,vo.Depth)]="D32F",a[a.D32F_S8=ta(ri.D32FS8,Ro.RG,vo.Depth|vo.Stencil)]="D32F_S8",a[a.U8_RGB_RT=ta(ri.U8,Ro.RGB,vo.RenderTarget|vo.Normalized)]="U8_RGB_RT",a[a.U8_RGBA_RT=ta(ri.U8,Ro.RGBA,vo.RenderTarget|vo.Normalized)]="U8_RGBA_RT",a[a.U8_RGBA_RT_SRGB=ta(ri.U8,Ro.RGBA,vo.RenderTarget|vo.Normalized|vo.sRGB)]="U8_RGBA_RT_SRGB"})(Qn||(Qn={}));function $1(a){return a>>>8&255}function j0(a){return a>>>16&255}function by(a){return a&255}function Ev(a){switch(a){case ri.F32:case ri.U32:case ri.S32:return 4;case ri.U16:case ri.S16:case ri.F16:return 2;case ri.U8:case ri.S8:return 1;default:throw new Error("whoops")}}function QS(a){return Ev(j0(a))}function VI(a){return $1(a)}function DO(a){var o=Ev(j0(a)),f=$1(a);return o*f}function gg(a,o){return a&4294967040|o}function Ba(a,o){return a&4294902015|o<<8}function r2(a){var o=by(a);if(o&vo.Depth)return Bu.Depth;if(o&vo.Normalized)return Bu.Float;var f=j0(a);if(f===ri.F16||f===ri.F32)return Bu.Float;if(f===ri.U8||f===ri.U16||f===ri.U32)return Bu.Uint;if(f===ri.S8||f===ri.S16||f===ri.S32)return Bu.Sint;throw new Error("whoops")}function Ha(a,o){if(o===void 0&&(o=""),!a)throw new Error("Assert fail: ".concat(o))}function yg(a){if(a!=null)return a;throw new Error("Missing object")}function sm(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b&&a.a===o.a}function i2(a,o){a.r=o.r,a.g=o.g,a.b=o.b,a.a=o.a}function JS(a){var o=a.r,f=a.g,m=a.b,w=a.a;return{r:o,g:f,b:m,a:w}}function D_(a,o,f,m){return m===void 0&&(m=1),{r:a,g:o,b:f,a:m}}var q1=D_(0,0,0,0),HI=D_(0,0,0,1),LO=D_(1,1,1,0),GI=D_(1,1,1,1),xy=!0;function WI(a,o){o===void 0&&(o=xy),o&&(a[10]=-a[10],a[14]=-a[14])}function ZI(a,o){o===void 0&&(o=xy),o&&(a[10]=-a[10],a[14]=-a[14]+1)}function NO(a,o){if(o===void 0&&(o=xy),o)switch(a){case rs.LESS:return rs.GREATER;case rs.LEQUAL:return rs.GEQUAL;case rs.GEQUAL:return rs.LEQUAL;case rs.GREATER:return rs.LESS;default:return a}else return a}function XI(a,o){return o===void 0&&(o=xy),o?1-a:a}function Kr(a,o){return o===void 0&&(o=xy),o?-a:a}function YI(a,o,f,m){if(m===void 0&&(m=xy),f=NO(f,m),f===rs.LESS)return a<o;if(f===rs.LEQUAL)return a<=o;if(f===rs.GREATER)return a>o;if(f===rs.GEQUAL)return a>=o;throw new Error("whoops")}function K1(a){return!!(a&&!(a&a-1))}function lm(a,o){return a!=null?a:o}function ew(a){return a===void 0?null:a}function bj(a,o,f){a.length=o,a.fill(f)}function L_(a,o){var f=o-1;return a+f&~f}function FO(a,o){return((a+o-1)/o|0)*o}function BO(a,o,f){for(var m=0,w=a.length;m<w;){var C=m+(w-m>>>1),D=f(o,a[C]);D<0?w=C:m=C+1}return m}function $I(a,o,f){var m=BO(a,o,f);a.splice(m,0,o)}function bl(a,o,f){return f?a|=o:a&=~o,a}function tw(a,o){for(var f=new Array(a),m=0;m<a;m++)f[m]=o();return f}function Sv(a,o){o===void 0&&(o=1);var f=a.split(`
`);return f.map(function(m,w){return"".concat(kO(""+(o+w),4," "),"  ").concat(m)}).join(`
`)}function kO(a,o,f){for(f===void 0&&(f="0");a.length<o;)a="".concat(f).concat(a);return a}function qI(a,o){for(var f=[],m=a;m<a+o;m++)f.push(m);return f}function nw(a,o){a.blendDstFactor=o.blendDstFactor,a.blendSrcFactor=o.blendSrcFactor,a.blendMode=o.blendMode}function Q1(a,o){return a===void 0&&(a={}),a.compare=o.compare,a.depthFailOp=o.depthFailOp,a.passOp=o.passOp,a.failOp=o.failOp,a.mask=o.mask,a}function o2(a,o){return a===void 0&&(a={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),nw(a.rgbBlendState,o.rgbBlendState),nw(a.alphaBlendState,o.alphaBlendState),a.channelWriteMask=o.channelWriteMask,a}function Mf(a,o){a.length!==o.length&&(a.length=o.length);for(var f=0;f<o.length;f++)a[f]=o2(a[f],o[f])}function _g(a,o){o.attachmentsState!==void 0&&Mf(a.attachmentsState,o.attachmentsState),a.blendConstant&&o.blendConstant&&i2(a.blendConstant,o.blendConstant),a.depthCompare=lm(o.depthCompare,a.depthCompare),a.depthWrite=lm(o.depthWrite,a.depthWrite),a.stencilWrite=lm(o.stencilWrite,a.stencilWrite),a.stencilFront&&o.stencilFront&&Q1(a.stencilFront,o.stencilFront),a.stencilBack&&o.stencilBack&&Q1(a.stencilBack,o.stencilBack),a.cullMode=lm(o.cullMode,a.cullMode),a.frontFace=lm(o.frontFace,a.frontFace),a.polygonOffset=lm(o.polygonOffset,a.polygonOffset),a.polygonOffsetFactor=lm(o.polygonOffsetFactor,a.polygonOffsetFactor),a.polygonOffsetUnits=lm(o.polygonOffsetUnits,a.polygonOffsetUnits)}function wv(a){var o=Object.assign({},a);return o.attachmentsState=[],Mf(o.attachmentsState,a.attachmentsState),o.blendConstant=o.blendConstant&&JS(o.blendConstant),o.stencilFront=Q1(void 0,a.stencilFront),o.stencilBack=Q1(void 0,a.stencilBack),o}function a2(a,o){o.channelWriteMask!==void 0&&(a.channelWriteMask=o.channelWriteMask),o.rgbBlendMode!==void 0&&(a.rgbBlendState.blendMode=o.rgbBlendMode),o.alphaBlendMode!==void 0&&(a.alphaBlendState.blendMode=o.alphaBlendMode),o.rgbBlendSrcFactor!==void 0&&(a.rgbBlendState.blendSrcFactor=o.rgbBlendSrcFactor),o.alphaBlendSrcFactor!==void 0&&(a.alphaBlendState.blendSrcFactor=o.alphaBlendSrcFactor),o.rgbBlendDstFactor!==void 0&&(a.rgbBlendState.blendDstFactor=o.rgbBlendDstFactor),o.alphaBlendDstFactor!==void 0&&(a.alphaBlendState.blendDstFactor=o.alphaBlendDstFactor)}var Xc={blendMode:ac.ADD,blendSrcFactor:ls.ONE,blendDstFactor:ls.ZERO},V0={attachmentsState:[{channelWriteMask:df.ALL,rgbBlendState:Xc,alphaBlendState:Xc}],blendConstant:JS(q1),depthWrite:!0,depthCompare:rs.LEQUAL,stencilWrite:!1,stencilFront:{compare:rs.ALWAYS,passOp:Fu.KEEP,depthFailOp:Fu.KEEP,failOp:Fu.KEEP},stencilBack:{compare:rs.ALWAYS,passOp:Fu.KEEP,depthFailOp:Fu.KEEP,failOp:Fu.KEEP},cullMode:od.NONE,frontFace:P_.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function s2(a,o){a===void 0&&(a=null),o===void 0&&(o=V0);var f=wv(o);return a!==null&&_g(f,a),f}var J1=s2({depthCompare:rs.ALWAYS,depthWrite:!1},V0);function ad(a,o){return a.attachmentsState===void 0&&(a.attachmentsState=[],Mf(a.attachmentsState,V0.attachmentsState)),a2(a.attachmentsState[0],o),a}var Ey={texture:null,sampler:null,formatKind:Bu.Float,dimension:fs.TEXTURE_2D};function H0(a,o,f){if(a.length!==o.length)return!1;for(var m=0;m<a.length;m++)if(!f(a[m],o[m]))return!1;return!0}function Ip(a,o){for(var f=Array(a.length),m=0;m<a.length;m++)f[m]=o(a[m]);return f}function sd(a,o){return a.texture===o.texture&&a.binding===o.binding}function rw(a,o){return a.buffer===o.buffer&&a.size===o.size&&a.binding===o.binding&&a.offset===o.offset}function iw(a,o){return a===null?o===null:o===null?!1:a.sampler===o.sampler&&a.texture===o.texture&&a.dimension===o.dimension&&a.formatKind===o.formatKind&&a.comparison===o.comparison}function zO(a,o){return a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],a.storageBufferBindings=a.storageBufferBindings||[],a.storageTextureBindings=a.storageTextureBindings||[],o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],!(a.samplerBindings.length!==o.samplerBindings.length||!H0(a.samplerBindings,o.samplerBindings,iw)||!H0(a.uniformBufferBindings,o.uniformBufferBindings,rw)||!H0(a.storageBufferBindings,o.storageBufferBindings,rw)||!H0(a.storageTextureBindings,o.storageTextureBindings,sd))}function ow(a,o){return a.blendMode==o.blendMode&&a.blendSrcFactor===o.blendSrcFactor&&a.blendDstFactor===o.blendDstFactor}function UO(a,o){return!(!ow(a.rgbBlendState,o.rgbBlendState)||!ow(a.alphaBlendState,o.alphaBlendState)||a.channelWriteMask!==o.channelWriteMask)}function eb(a,o){return a.compare==o.compare&&a.depthFailOp===o.depthFailOp&&a.failOp===o.failOp&&a.passOp===o.passOp&&a.mask===o.mask}function jO(a,o){return!H0(a.attachmentsState,o.attachmentsState,UO)||a.blendConstant&&o.blendConstant&&!sm(a.blendConstant,o.blendConstant)||a.stencilFront&&o.stencilFront&&!eb(a.stencilFront,o.stencilFront)||a.stencilBack&&o.stencilBack&&!eb(a.stencilBack,o.stencilBack)?!1:a.depthCompare===o.depthCompare&&a.depthWrite===o.depthWrite&&a.stencilWrite===o.stencilWrite&&a.cullMode===o.cullMode&&a.frontFace===o.frontFace&&a.polygonOffset===o.polygonOffset&&a.polygonOffsetFactor===o.polygonOffsetFactor&&a.polygonOffsetUnits===o.polygonOffsetUnits}function aw(a,o){return a.id===o.id}function KI(a,o){return a===o}function ld(a,o){return!(a.topology!==o.topology||a.inputLayout!==o.inputLayout||a.sampleCount!==o.sampleCount||a.megaStateDescriptor&&o.megaStateDescriptor&&!jO(a.megaStateDescriptor,o.megaStateDescriptor)||!aw(a.program,o.program)||!H0(a.colorAttachmentFormats,o.colorAttachmentFormats,KI)||a.depthStencilAttachmentFormat!==o.depthStencilAttachmentFormat)}function sw(a,o){return a.offset===o.offset&&a.shaderLocation===o.shaderLocation&&a.format===o.format&&a.divisor===o.divisor}function VO(a,o){return(0,Pp.Z)(a)?(0,Pp.Z)(o):(0,Pp.Z)(o)?!1:a.arrayStride===o.arrayStride&&a.stepMode===o.stepMode&&H0(a.attributes,o.attributes,sw)}function HO(a,o){return!(a.indexBufferFormat!==o.indexBufferFormat||!H0(a.vertexBufferDescriptors,o.vertexBufferDescriptors,VO)||!aw(a.program,o.program))}function lw(a,o){return a.addressModeU===o.addressModeU&&a.addressModeV===o.addressModeV&&a.minFilter===o.minFilter&&a.magFilter===o.magFilter&&a.mipmapFilter===o.mipmapFilter&&a.lodMinClamp===o.lodMinClamp&&a.lodMaxClamp===o.lodMaxClamp&&a.maxAnisotropy===o.maxAnisotropy&&a.compareFunction===o.compareFunction}function l2(a){var o=a.sampler,f=a.texture,m=a.dimension,w=a.formatKind,C=a.comparison;return{sampler:o,texture:f,dimension:m,formatKind:w,comparison:C}}function uw(a){var o=a.buffer,f=a.size,m=a.binding,w=a.offset;return{binding:m,buffer:o,offset:w,size:f}}function GO(a){var o=a.binding,f=a.texture;return{binding:o,texture:f}}function WO(a){var o=a.samplerBindings&&Ip(a.samplerBindings,l2),f=a.uniformBufferBindings&&Ip(a.uniformBufferBindings,uw),m=a.storageBufferBindings&&Ip(a.storageBufferBindings,uw),w=a.storageTextureBindings&&Ip(a.storageTextureBindings,GO);return{samplerBindings:o,uniformBufferBindings:f,storageBufferBindings:m,storageTextureBindings:w,pipeline:a.pipeline}}function cw(a){var o=a.inputLayout,f=a.program,m=a.topology,w=a.megaStateDescriptor&&wv(a.megaStateDescriptor),C=a.colorAttachmentFormats.slice(),D=a.depthStencilAttachmentFormat,B=a.sampleCount;return{inputLayout:o,megaStateDescriptor:w,program:f,topology:m,colorAttachmentFormats:C,depthStencilAttachmentFormat:D,sampleCount:B}}function ZO(a){var o=a.shaderLocation,f=a.format,m=a.offset,w=a.divisor;return{shaderLocation:o,format:f,offset:m,divisor:w}}function fw(a){if((0,Pp.Z)(a))return a;var o=a.arrayStride,f=a.stepMode,m=Ip(a.attributes,ZO);return{arrayStride:o,stepMode:f,attributes:m}}function XO(a){var o=Ip(a.vertexBufferDescriptors,fw),f=a.indexBufferFormat,m=a.program;return{vertexBufferDescriptors:o,indexBufferFormat:f,program:m}}var is,YO=/([^[]*)(\[[0-9]+\])?/;function QI(a){if(a[a.length-1]!=="]")return{name:a,length:1,isArray:!1};var o=a.match(YO);if(!o||o.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(a));return{name:o[1],length:Number(o[2])||1,isArray:!!o[2]}}function Rf(){var a=null;return function(o,f,m){var w=a!==m;return w&&(o.uniform1i(f,m),a=m),w}}function xl(a,o,f,m){var w=null,C=null;return function(D,B,V){var ie=o(V,f),Ee=ie.length,Ce=!1;if(w===null)w=new Float32Array(Ee),C=Ee,Ce=!0;else{Ha(C===Ee,"Uniform length cannot change.");for(var He=0;He<Ee;++He)if(ie[He]!==w[He]){Ce=!0;break}}return Ce&&(m(D,a,B,ie),w.set(ie)),Ce}}function Zf(a,o,f,m){a[o](f,m)}function Tv(a,o,f,m){a[o](f,!1,m)}var $O={},qO={},KO={},hw=[0];function tb(a,o,f,m){o===1&&typeof a=="boolean"&&(a=a?1:0),Number.isFinite(a)&&(hw[0]=a,a=hw);var w=a.length;if(a instanceof f)return a;var C=m[w];C||(C=new f(w),m[w]=C);for(var D=0;D<w;D++)C[D]=a[D];return C}function Ah(a,o){return tb(a,o,Float32Array,$O)}function G0(a,o){return tb(a,o,Int32Array,qO)}function nb(a,o){return tb(a,o,Uint32Array,KO)}var u2=(is={},is[bn.FLOAT]=xl.bind(null,"uniform1fv",Ah,1,Zf),is[bn.FLOAT_VEC2]=xl.bind(null,"uniform2fv",Ah,2,Zf),is[bn.FLOAT_VEC3]=xl.bind(null,"uniform3fv",Ah,3,Zf),is[bn.FLOAT_VEC4]=xl.bind(null,"uniform4fv",Ah,4,Zf),is[bn.INT]=xl.bind(null,"uniform1iv",G0,1,Zf),is[bn.INT_VEC2]=xl.bind(null,"uniform2iv",G0,2,Zf),is[bn.INT_VEC3]=xl.bind(null,"uniform3iv",G0,3,Zf),is[bn.INT_VEC4]=xl.bind(null,"uniform4iv",G0,4,Zf),is[bn.BOOL]=xl.bind(null,"uniform1iv",G0,1,Zf),is[bn.BOOL_VEC2]=xl.bind(null,"uniform2iv",G0,2,Zf),is[bn.BOOL_VEC3]=xl.bind(null,"uniform3iv",G0,3,Zf),is[bn.BOOL_VEC4]=xl.bind(null,"uniform4iv",G0,4,Zf),is[bn.FLOAT_MAT2]=xl.bind(null,"uniformMatrix2fv",Ah,4,Tv),is[bn.FLOAT_MAT3]=xl.bind(null,"uniformMatrix3fv",Ah,9,Tv),is[bn.FLOAT_MAT4]=xl.bind(null,"uniformMatrix4fv",Ah,16,Tv),is[bn.UNSIGNED_INT]=xl.bind(null,"uniform1uiv",nb,1,Zf),is[bn.UNSIGNED_INT_VEC2]=xl.bind(null,"uniform2uiv",nb,2,Zf),is[bn.UNSIGNED_INT_VEC3]=xl.bind(null,"uniform3uiv",nb,3,Zf),is[bn.UNSIGNED_INT_VEC4]=xl.bind(null,"uniform4uiv",nb,4,Zf),is[bn.FLOAT_MAT2x3]=xl.bind(null,"uniformMatrix2x3fv",Ah,6,Tv),is[bn.FLOAT_MAT2x4]=xl.bind(null,"uniformMatrix2x4fv",Ah,8,Tv),is[bn.FLOAT_MAT3x2]=xl.bind(null,"uniformMatrix3x2fv",Ah,6,Tv),is[bn.FLOAT_MAT3x4]=xl.bind(null,"uniformMatrix3x4fv",Ah,12,Tv),is[bn.FLOAT_MAT4x2]=xl.bind(null,"uniformMatrix4x2fv",Ah,8,Tv),is[bn.FLOAT_MAT4x3]=xl.bind(null,"uniformMatrix4x3fv",Ah,12,Tv),is[bn.SAMPLER_2D]=Rf,is[bn.SAMPLER_CUBE]=Rf,is[bn.SAMPLER_3D]=Rf,is[bn.SAMPLER_2D_SHADOW]=Rf,is[bn.SAMPLER_2D_ARRAY]=Rf,is[bn.SAMPLER_2D_ARRAY_SHADOW]=Rf,is[bn.SAMPLER_CUBE_SHADOW]=Rf,is[bn.INT_SAMPLER_2D]=Rf,is[bn.INT_SAMPLER_3D]=Rf,is[bn.INT_SAMPLER_CUBE]=Rf,is[bn.INT_SAMPLER_2D_ARRAY]=Rf,is[bn.UNSIGNED_INT_SAMPLER_2D]=Rf,is[bn.UNSIGNED_INT_SAMPLER_3D]=Rf,is[bn.UNSIGNED_INT_SAMPLER_CUBE]=Rf,is[bn.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Rf,is);function rb(a,o,f){var m=u2[f.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(f.type));return m().bind(null,a,o)}var QO={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function JO(a){return Object.prototype.toString.call(a)in QO}function N_(a,o){return"#define ".concat(a," ").concat(o)}function e3(a){var o={};return a.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,m,w){var C=Number(w);return o[m]=isNaN(C)?w:C,""}),o}function t3(a,o){var f=[];return a.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,w,C){var D=Number(w);return f.push({location:isNaN(D)?o[w]:D,name:C}),""}),f}function JI(a){var o=[],f=[];return a.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,w,C){var D=[];return C.trim().replace(`\r
`,`
`).split(`
`).forEach(function(B){var V=__read(B.trim().split(/\s+/),2),ie=V[0],Ee=V[1];D.push({type:ie.trim(),name:Ee.replace(";","").trim()})}),f.push({type:w.trim(),uniforms:D}),""}),a.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,w){return w.trim().replace(`\r
`,`
`).split(`
`).forEach(function(C){var D=C.trim().split(" "),B=D[0]||"",V=D[1]||"",ie=V.indexOf("[")>-1;if(V=V.replace(";","").replace("[","").trim(),!B.startsWith("#")){if(B){var Ee=f.find(function(Ot){return B===Ot.type});if(Ee)if(ie)for(var Ce=function(Ot){Ee.uniforms.forEach(function(nn){o.push("".concat(V,"[").concat(Ot,"].").concat(nn.name))})},He=0;He<5;He++)Ce(He);else Ee.uniforms.forEach(function(Ot){o.push("".concat(V,".").concat(Ot.name))})}V&&o.push(V)}}),""}),o}function Sy(a){if(a===void 0)return null;var o=/binding\s*=\s*(\d+)/.exec(a);if(o!==null){var f=parseInt(o[1],10);if(!Number.isNaN(f))return f}return null}function F_(a){var o="",f=a;return[f,o]}function um(a,o,f,m,w){var C;m===void 0&&(m=null),w===void 0&&(w=!0);var D=a.glslVersion==="#version 100",B=o==="frag"&&((C=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||C===void 0?void 0:C.length)>1,V=f.replace(`\r
`,`
`).split(`
`).map(function(ao){return ao.replace(/[/][/].*$/,"")}).filter(function(ao){var Zr=!ao||/^\s+$/.test(ao);return!Zr}),ie="";m!==null&&(ie=Object.keys(m).map(function(ao){return N_(ao,m[ao])}).join(`
`));var Ee=V.find(function(ao){return ao.startsWith("precision")})||"precision mediump float;",Ce=w?V.filter(function(ao){return!ao.startsWith("precision")}).join(`
`):V.join(`
`),He="";if(a.viewportOrigin===U0.UPPER_LEFT&&(He+="".concat(N_("VIEWPORT_ORIGIN_TL","1"),`
`)),a.clipSpaceNearZ===xv.ZERO&&(He+="".concat(N_("CLIPSPACE_NEAR_ZERO","1"),`
`)),a.explicitBindingLocations){var Ot=0,nn=0,Bn=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(ao,Zr,Qi,Ma){var Ms=Qi?"".concat(Qi,", "):"";return"layout(".concat(Ms,"set = ").concat(Ot,", binding = ").concat(nn++,") uniform ").concat(Ma)}),Ot++,nn=0,Ha(a.separateSamplerTextures),Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ao,Zr,Qi,Ma,Ms){var na=Sy(Qi);na===null&&(na=nn++);var Qa=(0,wo.CR)(F_(Ma),2),Ws=Qa[0],lh=Qa[1];return o==="frag"?`
layout(set = `.concat(Ot,", binding = ").concat(na*2+0,") uniform texture").concat(Ws," T_").concat(Ms,`;
layout(set = `).concat(Ot,", binding = ").concat(na*2+1,") uniform sampler").concat(lh," S_").concat(Ms,";").trim():""}),Ce=Ce.replace(o==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(ao,Zr){return"layout(location = ".concat(Bn++,") ").concat(Zr)}),He+="".concat(N_("gl_VertexID","gl_VertexIndex"),`
`),He+="".concat(N_("gl_InstanceID","gl_InstanceIndex"),`
`),Ee=Ee.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var sr=0;Ce=Ce.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ao,Zr,Qi,Ma,Ms){var na=Sy(Qi);return na===null&&(na=sr++),"uniform sampler".concat(Ma," ").concat(Ms,"; // BINDING=").concat(na)})}if(Ce=Ce.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return"SAMPLER_".concat(Zr,"(P_").concat(Qi,")")}),Ce=Ce.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return"PP_SAMPLER_".concat(Zr,"(P_").concat(Qi,")")}),Ce=Ce.replace(/\bPU_TEXTURE\((.*?)\)/g,function(ao,Zr){return"TEXTURE(P_".concat(Zr,")")}),a.separateSamplerTextures)Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){var Ma=(0,wo.CR)(F_(Zr),2),Ms=Ma[0],na=Ma[1];return"texture".concat(Ms," T_P_").concat(Qi,", sampler").concat(na," S_P_").concat(Qi)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return"T_".concat(Qi,", S_").concat(Qi)}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return"sampler".concat(Zr,"(T_").concat(Qi,", S_").concat(Qi,")")}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(ao,Zr){return"T_".concat(Zr)});else{var xr=[];Ce=Ce.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return"sampler".concat(Zr," P_").concat(Qi)}),Ce=Ce.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return Qi}),Ce=Ce.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ao,Zr,Qi){return xr.push([Qi,Zr]),Qi}),D&&xr.forEach(function(ao){var Zr=(0,wo.CR)(ao,2),Qi=Zr[0],Ma=Zr[1];Ce=Ce.replace(new RegExp("texture\\(".concat(Qi),"g"),function(){return"texture".concat(Ma,"(").concat(Qi)})}),Ce=Ce.replace(/\bTEXTURE\((.*?)\)/g,function(ao,Zr){return Zr})}var fr="".concat(D?"":a.glslVersion,`
`).concat(D&&B?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(D&&o==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(w?Ee:"",`
`).concat(He||"").concat(ie?ie+`
`:"",`
`).concat(Ce,`
`).trim();if(a.explicitBindingLocations&&o==="frag"&&(fr=fr.replace(/^\b(out)\b/g,function(ao,Zr){return"layout(location = 0) ".concat(Zr)})),D){if(o==="frag"&&(fr=fr.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(ao,Zr,Qi){return"varying ".concat(Zr," ").concat(Qi,`;
`)})),o==="vert"&&(fr=fr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ao,Zr,Qi){return"varying ".concat(Zr," ").concat(Qi,`;
`)}),fr=fr.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(ao,Zr,Qi){return"attribute ".concat(Zr," ").concat(Qi,`;
`)})),fr=fr.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(ao,Zr){return Zr.trim().replace(/^.*$/gm,function(Qi){var Ma=Qi.trim();return Ma.startsWith("#")?Ma:Qi?"uniform ".concat(Ma):""})}),o==="frag")if(B){var Yr=[];fr=fr.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(ao,Zr){return Yr.push(Zr),"vec4 ".concat(Zr,`;
`)});var Pi=fr.lastIndexOf("}");fr=fr.substring(0,Pi)+`
    `.concat(Yr.map(function(ao,Zr){return"gl_FragData[".concat(Zr,"] = ").concat(ao,`;
    `)}).join(`
`))+fr.substring(Pi)}else{var Co;if(fr=fr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ao,Zr,Qi){return Co=Qi,"".concat(Zr," ").concat(Qi,`;
`)}),Co){var Pi=fr.lastIndexOf("}");fr=fr.substring(0,Pi)+`
  gl_FragColor = vec4(`.concat(Co,`);
`)+fr.substring(Pi)}}fr=fr.replace(/^\s*layout\((.*)\)/gm,"")}return fr}function n3(a,o,f,m){m===void 0&&(m=null);var w=um(a,"vert",o,m),C=um(a,"frag",f,m);return{vert:o,frag:f,preprocessedVert:w,preprocessedFrag:C}}var $d=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C.device.resourceCreationTracker!==null&&C.device.resourceCreationTracker.trackResourceCreated(C),C}return o.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},o}(qS),dw=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.Bindings;var B=C.uniformBufferBindings,V=C.samplerBindings;return D.uniformBufferBindings=B||[],D.samplerBindings=V||[],D.bindingLayouts=D.createBindingLayouts(),D}return o.prototype.createBindingLayouts=function(){var f=0,m=0,w=[],C=this.uniformBufferBindings.length,D=this.samplerBindings.length;return w.push({firstUniformBuffer:f,numUniformBuffers:C,firstSampler:m,numSamplers:D}),f+=C,m+=D,{numUniformBuffers:f,numSamplers:m,bindingLayoutTables:w}},o}($d);function Lo(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}function c2(a){var o=j0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_UNORM:case ri.BC4_SNORM:case ri.BC5_UNORM:case ri.BC5_SNORM:return!0;default:return!1}}function pw(a){var o=by(a);if(o&vo.Normalized)return!1;var f=j0(a);return f===ri.S8||f===ri.S16||f===ri.S32||f===ri.U8||f===ri.U16||f===ri.U32}function r3(a){switch(a){case i0.STATIC:return bn.STATIC_DRAW;case i0.DYNAMIC:return bn.DYNAMIC_DRAW}}function ib(a){if(a&Il.INDEX)return bn.ELEMENT_ARRAY_BUFFER;if(a&Il.VERTEX)return bn.ARRAY_BUFFER;if(a&Il.UNIFORM)return bn.UNIFORM_BUFFER}function i3(a){switch(a){case bc.TRIANGLES:return bn.TRIANGLES;case bc.POINTS:return bn.POINTS;case bc.TRIANGLE_STRIP:return bn.TRIANGLE_STRIP;case bc.LINES:return bn.LINES;case bc.LINE_STRIP:return bn.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function ob(a){switch(a){case ri.U8:return bn.UNSIGNED_BYTE;case ri.U16:return bn.UNSIGNED_SHORT;case ri.U32:return bn.UNSIGNED_INT;case ri.S8:return bn.BYTE;case ri.S16:return bn.SHORT;case ri.S32:return bn.INT;case ri.F16:return bn.HALF_FLOAT;case ri.F32:return bn.FLOAT;default:throw new Error("whoops")}}function ab(a){switch(a){case Ro.R:return 1;case Ro.RG:return 2;case Ro.RGB:return 3;case Ro.RGBA:return 4;default:return 1}}function sb(a){var o=j0(a),f=$1(a),m=by(a),w=ob(o),C=ab(f),D=!!(m&vo.Normalized);return{size:C,type:w,normalized:D}}function lb(a){switch(a){case Qn.U8_R:return bn.UNSIGNED_BYTE;case Qn.U16_R:return bn.UNSIGNED_SHORT;case Qn.U32_R:return bn.UNSIGNED_INT;default:throw new Error("whoops")}}function cm(a){switch(a){case Th.CLAMP_TO_EDGE:return bn.CLAMP_TO_EDGE;case Th.REPEAT:return bn.REPEAT;case Th.MIRRORED_REPEAT:return bn.MIRRORED_REPEAT;default:throw new Error("whoops")}}function bg(a,o){if(o===Rc.LINEAR&&a===ps.BILINEAR)return bn.LINEAR_MIPMAP_LINEAR;if(o===Rc.LINEAR&&a===ps.POINT)return bn.NEAREST_MIPMAP_LINEAR;if(o===Rc.NEAREST&&a===ps.BILINEAR)return bn.LINEAR_MIPMAP_NEAREST;if(o===Rc.NEAREST&&a===ps.POINT)return bn.NEAREST_MIPMAP_NEAREST;if(o===Rc.NO_MIP&&a===ps.BILINEAR)return bn.LINEAR;if(o===Rc.NO_MIP&&a===ps.POINT)return bn.NEAREST;throw new Error("Unknown texture filter mode")}function Av(a,o){o===void 0&&(o=0);var f=a;return f.gl_buffer_pages[o/f.pageByteSize|0]}function Cv(a){var o=a;return o.gl_texture}function wy(a){var o=a;return o.gl_sampler}function fm(a,o){a.name=o,a.__SPECTOR_Metadata={name:o}}function Ty(a,o){for(var f=[];;){var m=o.exec(a);if(!m)break;f.push(m)}return f}function W0(a){return a.blendMode==ac.ADD&&a.blendSrcFactor==ls.ONE&&a.blendDstFactor===ls.ZERO}function vw(a){switch(a){case I_.OcclusionConservative:return bn.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function ub(a){if(a===fs.TEXTURE_2D)return bn.TEXTURE_2D;if(a===fs.TEXTURE_2D_ARRAY)return bn.TEXTURE_2D_ARRAY;if(a===fs.TEXTURE_CUBE_MAP)return bn.TEXTURE_CUBE_MAP;if(a===fs.TEXTURE_3D)return bn.TEXTURE_3D;throw new Error("whoops")}function ud(a,o,f,m){return!(a%f!==0||o%m!==0)}var Dp=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.Buffer;var B=C.viewOrSize,V=C.usage,ie=C.hint,Ee=ie===void 0?i0.STATIC:ie,Ce=w.uniformBufferMaxPageByteSize,He=w.gl,Ot=V&Il.UNIFORM;Ot||(Lo(He)?He.bindVertexArray(null):w.OES_vertex_array_object.bindVertexArrayOES(null));var nn=(0,vg.Z)(B)?L_(B,4):L_(B.byteLength,4);D.gl_buffer_pages=[];var Bn;if(Ot){for(var sr=nn;sr>0;)D.gl_buffer_pages.push(D.createBufferPage(Math.min(sr,Ce),V,Ee)),sr-=Ce;Bn=Ce}else D.gl_buffer_pages.push(D.createBufferPage(nn,V,Ee)),Bn=nn;return D.pageByteSize=Bn,D.byteSize=nn,D.usage=V,D.gl_target=ib(V),(0,vg.Z)(B)||D.setSubData(0,new Uint8Array(B.buffer)),Ot||(Lo(He)?He.bindVertexArray(D.device.currentBoundVAO):w.OES_vertex_array_object.bindVertexArrayOES(D.device.currentBoundVAO)),D}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=m.byteLength-w);for(var D=this.device.gl,B=this.pageByteSize,V=f+C,ie=f,Ee=f%B;ie<V;){var Ce=Lo(D)?D.COPY_WRITE_BUFFER:this.gl_target,He=Av(this,ie);if(He.ubo)return;D.bindBuffer(Ce,He),Lo(D)?D.bufferSubData(Ce,Ee,m,w,Math.min(V-ie,B)):D.bufferSubData(Ce,Ee,m),ie+=B,Ee=0,w+=B,this.device.debugGroupStatisticsBufferUpload()}},o.prototype.destroy=function(){a.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},o.prototype.createBufferPage=function(f,m,w){var C=this.device.gl,D=m&Il.UNIFORM;if(!Lo(C)&&D)return{ubo:!0};var B=this.device.ensureResourceExists(C.createBuffer()),V=ib(m),ie=r3(w);return C.bindBuffer(V,B),C.bufferData(V,f,ie),B},o}($d),Lp=function(a){(0,wo.ZT)(o,a);function o(f){var m,w,C,D,B=f.id,V=f.device,ie=f.descriptor,Ee,Ce=a.call(this,{id:B,device:V})||this;Ce.type=Bs.InputLayout;var He=ie.vertexBufferDescriptors,Ot=ie.indexBufferFormat,nn=ie.program;Ha(Ot===Qn.U16_R||Ot===Qn.U32_R||Ot===null);var Bn=Ot!==null?lb(Ot):null,sr=Ot!==null?QS(Ot):null,xr=Ce.device.gl,fr=Ce.device.ensureResourceExists(Lo(xr)?xr.createVertexArray():V.OES_vertex_array_object.createVertexArrayOES());Lo(xr)?xr.bindVertexArray(fr):V.OES_vertex_array_object.bindVertexArrayOES(fr),xr.bindBuffer(xr.ARRAY_BUFFER,Av(Ce.device.fallbackVertexBuffer));try{for(var Yr=(0,wo.XA)(ie.vertexBufferDescriptors),Pi=Yr.next();!Pi.done;Pi=Yr.next()){var Co=Pi.value,ao=Co.stepMode,Zr=Co.attributes;try{for(var Qi=(C=void 0,(0,wo.XA)(Zr)),Ma=Qi.next();!Ma.done;Ma=Qi.next()){var Ms=Ma.value,na=Ms.shaderLocation,Qa=Ms.format,Ws=Ms.divisor,lh=Ws===void 0?1:Ws,ku=Lo(xr)?na:(Ee=nn.attributes[na])===null||Ee===void 0?void 0:Ee.location,vs=sb(Qa);if(Ms.vertexFormat=vs,!(0,Pp.Z)(ku)){pw(Qa);var Tg=vs.size,Ag=vs.type,qd=vs.normalized;xr.vertexAttribPointer(ku,Tg,Ag,qd,0,0),ao===mg.INSTANCE&&(Lo(xr)?xr.vertexAttribDivisor(ku,lh):V.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(ku,lh)),xr.enableVertexAttribArray(ku)}}}catch(Py){C={error:Py}}finally{try{Ma&&!Ma.done&&(D=Qi.return)&&D.call(Qi)}finally{if(C)throw C.error}}}}catch(Py){m={error:Py}}finally{try{Pi&&!Pi.done&&(w=Yr.return)&&w.call(Yr)}finally{if(m)throw m.error}}return Lo(xr)?xr.bindVertexArray(null):V.OES_vertex_array_object.bindVertexArrayOES(null),Ce.vertexBufferDescriptors=He,Ce.vao=fr,Ce.indexBufferFormat=Ot,Ce.indexBufferType=Bn,Ce.indexBufferCompByteSize=sr,Ce.program=nn,Ce}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(Lo(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},o}($d),cb=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=f.fake,B=a.call(this,{id:m,device:w})||this;B.type=Bs.Texture,C=(0,wo.pi)({dimension:fs.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},C);var V=B.device.gl,ie,Ee,Ce=B.clampmipLevelCount(C);if(B.immutable=C.usage===Wf.RENDER_TARGET,B.pixelStore=C.pixelStore,B.format=C.format,B.dimension=C.dimension,B.formatKind=r2(C.format),B.width=C.width,B.height=C.height,B.depthOrArrayLayers=C.depthOrArrayLayers,B.mipmaps=Ce>=1,!D){Ee=B.device.ensureResourceExists(V.createTexture());var He=B.device.translateTextureType(C.format),Ot=B.device.translateTextureInternalFormat(C.format);if(B.device.setActiveTexture(V.TEXTURE0),B.device.currentTextures[0]=null,B.preprocessImage(),C.dimension===fs.TEXTURE_2D){if(ie=bn.TEXTURE_2D,V.bindTexture(ie,Ee),B.immutable)if(Lo(V))V.texStorage2D(ie,Ce,Ot,C.width,C.height);else{var nn=(Ot===bn.DEPTH_COMPONENT||B.isNPOT(),0);(B.format===Qn.D32F||B.format===Qn.D24_S8)&&!Lo(V)&&!w.WEBGL_depth_texture||(V.texImage2D(ie,nn,Ot,C.width,C.height,0,Ot,He,null),B.mipmaps&&(B.mipmaps=!1,V.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_MIN_FILTER,bn.LINEAR),V.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_WRAP_S,bn.CLAMP_TO_EDGE),V.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_WRAP_T,bn.CLAMP_TO_EDGE)))}Ha(C.depthOrArrayLayers===1)}else if(C.dimension===fs.TEXTURE_2D_ARRAY)ie=bn.TEXTURE_2D_ARRAY,V.bindTexture(ie,Ee),B.immutable&&Lo(V)&&V.texStorage3D(ie,Ce,Ot,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===fs.TEXTURE_3D)ie=bn.TEXTURE_3D,V.bindTexture(ie,Ee),B.immutable&&Lo(V)&&V.texStorage3D(ie,Ce,Ot,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===fs.TEXTURE_CUBE_MAP)ie=bn.TEXTURE_CUBE_MAP,V.bindTexture(ie,Ee),B.immutable&&Lo(V)&&V.texStorage2D(ie,Ce,Ot,C.width,C.height),Ha(C.depthOrArrayLayers===6);else throw new Error("whoops")}return B.gl_texture=Ee,B.gl_target=ie,B.mipLevelCount=Ce,B}return o.prototype.setImageData=function(f,m){m===void 0&&(m=0);var w=this.device.gl;c2(this.format);var C=this.gl_target===bn.TEXTURE_3D||this.gl_target===bn.TEXTURE_2D_ARRAY,D=this.gl_target===bn.TEXTURE_CUBE_MAP,B=JO(f[0]);this.device.setActiveTexture(w.TEXTURE0),this.device.currentTextures[0]=null;var V=f[0],ie,Ee;B?(ie=this.width,Ee=this.height):(ie=V.width,Ee=V.height,this.width=ie,this.height=Ee),w.bindTexture(this.gl_target,this.gl_texture);var Ce=this.device.translateTextureFormat(this.format),He=Lo(w)?this.device.translateInternalTextureFormat(this.format):Ce,Ot=this.device.translateTextureType(this.format);this.preprocessImage();for(var nn=0;nn<this.depthOrArrayLayers;nn++){var Bn=f[nn],sr=this.gl_target;D&&(sr=bn.TEXTURE_CUBE_MAP_POSITIVE_X+nn%6),this.immutable?w.texSubImage2D(sr,m,0,0,ie,Ee,Ce,Ot,Bn):Lo(w)?C?w.texImage3D(sr,m,He,ie,Ee,this.depthOrArrayLayers,0,Ce,Ot,Bn):w.texImage2D(sr,m,He,ie,Ee,0,Ce,Ot,Bn):B?w.texImage2D(sr,m,Ce,ie,Ee,0,Ce,Ot,Bn):w.texImage2D(sr,m,Ce,Ce,Ot,Bn)}this.mipmaps&&this.generateMipmap(C)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteTexture(Cv(this))},o.prototype.clampmipLevelCount=function(f){if(f.dimension===fs.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var m=j0(f.format);if(m===ri.BC1)for(var w=f.width,C=f.height,D=0;D<f.mipLevelCount;D++){if(w<=2||C<=2)return D-1;w=Math.max(w/2|0,1),C=Math.max(C/2|0,1)}}return f.mipLevelCount},o.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(bn.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(bn.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(bn.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},o.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var m=this.device.gl;return!Lo(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),f?(m.texParameteri(this.gl_target,bn.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,bn.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,bn.TEXTURE_MIN_FILTER,bn.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,bn.TEXTURE_MAG_FILTER,bn.LINEAR)):m.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_MIN_FILTER,bn.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},o.prototype.isNPOT=function(){var f=this.device.gl;return Lo(f)?!1:!K1(this.width)||!K1(this.height)},o}($d),o3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.RenderTarget,D.gl_renderbuffer=null,D.texture=null;var B=D.device.gl,V=C.format,ie=C.width,Ee=C.height,Ce=C.sampleCount,He=Ce===void 0?1:Ce,Ot=C.texture,nn=!1;if((V===Qn.D32F||V===Qn.D24_S8)&&Ot&&!Lo(B)&&!w.WEBGL_depth_texture&&(Ot.destroy(),D.texture=null,nn=!0),!nn&&Ot)D.texture=Ot;else{D.gl_renderbuffer=D.device.ensureResourceExists(B.createRenderbuffer()),B.bindRenderbuffer(B.RENDERBUFFER,D.gl_renderbuffer);var Bn=D.device.translateTextureInternalFormat(V,!0);Lo(B)&&He>1?B.renderbufferStorageMultisample(bn.RENDERBUFFER,He,Bn,ie,Ee):B.renderbufferStorage(bn.RENDERBUFFER,Bn,ie,Ee)}return D.format=V,D.width=ie,D.height=Ee,D.sampleCount=He,D}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},o}($d),cd;(function(a){a[a.NeedsCompile=0]="NeedsCompile",a[a.Compiling=1]="Compiling",a[a.NeedsBind=2]="NeedsBind",a[a.ReadyToUse=3]="ReadyToUse"})(cd||(cd={}));var a3=function(a){(0,wo.ZT)(o,a);function o(f,m){var w=f.id,C=f.device,D=f.descriptor,B=a.call(this,{id:w,device:C})||this;B.rawVertexGLSL=m,B.type=Bs.Program,B.uniformSetters={},B.attributes=[];var V=B.device.gl;return B.descriptor=D,B.gl_program=B.device.ensureResourceExists(V.createProgram()),B.gl_shader_vert=null,B.gl_shader_frag=null,B.compileState=cd.NeedsCompile,B.tryCompileProgram(),B}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},o.prototype.tryCompileProgram=function(){Ha(this.compileState===cd.NeedsCompile);var f=this.descriptor,m=f.vertex,w=f.fragment,C=this.device.gl;m!=null&&m.glsl&&(w!=null&&w.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,C.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(w.postprocess?w.postprocess(w.glsl):w.glsl,C.FRAGMENT_SHADER),C.attachShader(this.gl_program,this.gl_shader_vert),C.attachShader(this.gl_program,this.gl_shader_frag),C.linkProgram(this.gl_program),this.compileState=cd.Compiling,Lo(C)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},o.prototype.readAttributesFromLinkedProgram=function(){for(var f,m=this.device.gl,w=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),C=e3(this.descriptor.vertex.glsl),D=t3(this.rawVertexGLSL,C),B=function(Ee){var Ce=m.getActiveAttrib(V.gl_program,Ee),He=Ce.name,Ot=Ce.type,nn=Ce.size,Bn=m.getAttribLocation(V.gl_program,He),sr=(f=D.find(function(xr){return xr.name===He}))===null||f===void 0?void 0:f.location;Bn>=0&&!(0,Pp.Z)(sr)&&(V.attributes[sr]={name:He,location:Bn,type:Ot,size:nn})},V=this,ie=0;ie<w;ie++)B(ie)},o.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,m=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),w=0;w<m;w++){var C=f.getActiveUniform(this.gl_program,w),D=QI(C.name).name,B=f.getUniformLocation(this.gl_program,D);if(this.uniformSetters[D]=rb(f,B,C),C&&C.size>1)for(var V=0;V<C.size;V++)B=f.getUniformLocation(this.gl_program,"".concat(D,"[").concat(V,"]")),this.uniformSetters["".concat(D,"[").concat(V,"]")]=rb(f,B,C)}},o.prototype.compileShader=function(f,m){var w=this.device.gl,C=this.device.ensureResourceExists(w.createShader(m));return w.shaderSource(C,f),w.compileShader(C),C},o.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var m=this.device.gl;if(!Lo(m)){var w=!1;for(var C in f){w||(m.useProgram(this.gl_program),w=!0);var D=f[C],B=this.uniformSetters[C];if(B){var V=D;V instanceof cb&&(V=V.textureIndex),B(V)}}}return this},o}($d),s3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.QueryPool;var B=D.device.gl;if(Lo(B)){var V=C.elemCount,ie=C.type;D.gl_query=tw(V,function(){return D.device.ensureResourceExists(B.createQuery())}),D.gl_query_type=vw(ie)}return D}return o.prototype.queryResultOcclusion=function(f){var m=this.device.gl;if(Lo(m)){var w=this.gl_query[f];return m.getQueryParameter(w,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(w,m.QUERY_RESULT):null}return null},o.prototype.destroy=function(){a.prototype.destroy.call(this);var f=this.device.gl;if(Lo(f))for(var m=0;m<this.gl_query.length;m++)f.deleteQuery(this.gl_query[m])},o}($d),l3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Bs.Readback,C.gl_pbo=null,C.gl_sync=null,C}return o.prototype.clientWaitAsync=function(f,m,w){m===void 0&&(m=0),w===void 0&&(w=10);var C=this.device.gl;return new Promise(function(D,B){function V(){var ie=C.clientWaitSync(f,m,0);if(ie==C.WAIT_FAILED){B();return}if(ie==C.TIMEOUT_EXPIRED){setTimeout(V,(0,n2.Z)(w,0,C.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}D()}V()})},o.prototype.getBufferSubDataAsync=function(f,m,w,C,D,B){return(0,wo.mG)(this,void 0,void 0,function(){var V;return(0,wo.Jh)(this,function(ie){switch(ie.label){case 0:return V=this.device.gl,Lo(V)?(this.gl_sync=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0),V.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return ie.sent(),V.bindBuffer(f,m),V.getBufferSubData(f,w,C,D,B),V.bindBuffer(f,null),[2,C];case 2:return[2]}})})},o.prototype.readTexture=function(f,m,w,C,D,B,V,ie){return V===void 0&&(V=0),ie===void 0&&(ie=B.byteLength||0),(0,wo.mG)(this,void 0,void 0,function(){var Ee,Ce,He,Ot,nn;return(0,wo.Jh)(this,function(Bn){return Ee=this.device.gl,Ce=f,He=this.device.translateTextureFormat(Ce.format),Ot=this.device.translateTextureType(Ce.format),nn=DO(Ce.format),Lo(Ee)?(this.gl_pbo=this.device.ensureResourceExists(Ee.createBuffer()),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,this.gl_pbo),Ee.bufferData(Ee.PIXEL_PACK_BUFFER,ie,Ee.STREAM_READ),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,null),Ee.bindFramebuffer(bn.READ_FRAMEBUFFER,this.device.readbackFramebuffer),Ee.framebufferTexture2D(bn.READ_FRAMEBUFFER,bn.COLOR_ATTACHMENT0,bn.TEXTURE_2D,Ce.gl_texture,0),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,this.gl_pbo),Ee.readPixels(m,w,C,D,He,Ot,V*nn),Ee.bindBuffer(Ee.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(Ee.PIXEL_PACK_BUFFER,this.gl_pbo,0,B,V,0)]):[2,this.readTextureSync(f,m,w,C,D,B,V,ie)]})})},o.prototype.readTextureSync=function(f,m,w,C,D,B,V,ie){ie===void 0&&(ie=B.byteLength||0);var Ee=this.device.gl,Ce=f,He=this.device.translateTextureType(Ce.format);return Ee.bindFramebuffer(bn.FRAMEBUFFER,this.device.readbackFramebuffer),Ee.framebufferTexture2D(bn.FRAMEBUFFER,bn.COLOR_ATTACHMENT0,bn.TEXTURE_2D,Ce.gl_texture,0),Ee.pixelStorei(Ee.PACK_ALIGNMENT,4),Ee.readPixels(m,w,C,D,Ee.RGBA,He,B),B},o.prototype.readBuffer=function(f,m,w,C,D){return(0,wo.mG)(this,void 0,void 0,function(){var B;return(0,wo.Jh)(this,function(V){return B=this.device.gl,Lo(B)?[2,this.getBufferSubDataAsync(B.ARRAY_BUFFER,Av(f,m),m,w,C,D)]:[2,Promise.reject()]})})},o.prototype.destroy=function(){a.prototype.destroy.call(this),Lo(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},o}($d),mw=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;return V.type=Bs.RenderPipeline,V.drawMode=i3((D=C.topology)!==null&&D!==void 0?D:bc.TRIANGLES),V.program=C.program,V.inputLayout=C.inputLayout,V.megaState=(0,wo.pi)((0,wo.pi)({},wv(V0)),C.megaStateDescriptor),V.colorAttachmentFormats=C.colorAttachmentFormats.slice(),V.depthStencilAttachmentFormat=C.depthStencilAttachmentFormat,V.sampleCount=(B=C.sampleCount)!==null&&B!==void 0?B:1,V}return o}($d),gw=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Bs.ComputePipeline,D.descriptor=C,D}return o}($d),fb=function(){function a(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return a.prototype.trackResourceCreated=function(o){this.creationStacks.set(o,new Error().stack),this.liveObjects.add(o)},a.prototype.trackResourceDestroyed=function(o){this.deletionStacks.has(o)&&console.warn("Object double freed:",o,`

Creation stack: `,this.creationStacks.get(o),`

Deletion stack: `,this.deletionStacks.get(o),`

This stack: `,new Error().stack),this.deletionStacks.set(o,new Error().stack),this.liveObjects.delete(o)},a.prototype.checkForLeaks=function(){var o,f;try{for(var m=(0,wo.XA)(this.liveObjects.values()),w=m.next();!w.done;w=m.next()){var C=w.value;console.warn("Object leaked:",C,"Creation stack:",this.creationStacks.get(C))}}catch(D){o={error:D}}finally{try{w&&!w.done&&(f=m.return)&&f.call(m)}finally{if(o)throw o.error}}},a.prototype.setResourceLeakCheck=function(o,f){f?this.liveObjects.add(o):this.liveObjects.delete(o)},a}(),u3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Bs.Sampler;var ie=V.device.gl;if(Lo(ie)){var Ee=V.device.ensureResourceExists(ie.createSampler());ie.samplerParameteri(Ee,bn.TEXTURE_WRAP_S,cm(C.addressModeU)),ie.samplerParameteri(Ee,bn.TEXTURE_WRAP_T,cm(C.addressModeV)),ie.samplerParameteri(Ee,bn.TEXTURE_WRAP_R,cm((D=C.addressModeW)!==null&&D!==void 0?D:C.addressModeU)),ie.samplerParameteri(Ee,bn.TEXTURE_MIN_FILTER,bg(C.minFilter,C.mipmapFilter)),ie.samplerParameteri(Ee,bn.TEXTURE_MAG_FILTER,bg(C.magFilter,Rc.NO_MIP)),C.lodMinClamp!==void 0&&ie.samplerParameterf(Ee,bn.TEXTURE_MIN_LOD,C.lodMinClamp),C.lodMaxClamp!==void 0&&ie.samplerParameterf(Ee,bn.TEXTURE_MAX_LOD,C.lodMaxClamp),C.compareFunction!==void 0&&(ie.samplerParameteri(Ee,ie.TEXTURE_COMPARE_MODE,ie.COMPARE_REF_TO_TEXTURE),ie.samplerParameteri(Ee,ie.TEXTURE_COMPARE_FUNC,C.compareFunction));var Ce=(B=C.maxAnisotropy)!==null&&B!==void 0?B:1;Ce>1&&V.device.EXT_texture_filter_anisotropic!==null&&(Ha(C.minFilter===ps.BILINEAR&&C.magFilter===ps.BILINEAR&&C.mipmapFilter===Rc.LINEAR),ie.samplerParameterf(Ee,V.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce)),V.gl_sampler=Ee}else V.descriptor=C;return V}return o.prototype.setTextureParameters=function(f,m,w){var C,D=this.device.gl,B=this.descriptor;this.isNPOT(m,w)?D.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_MIN_FILTER,bn.LINEAR):D.texParameteri(f,bn.TEXTURE_MIN_FILTER,bg(B.minFilter,B.mipmapFilter)),D.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_WRAP_S,cm(B.addressModeU)),D.texParameteri(bn.TEXTURE_2D,bn.TEXTURE_WRAP_T,cm(B.addressModeV)),D.texParameteri(f,bn.TEXTURE_MAG_FILTER,bg(B.magFilter,Rc.NO_MIP));var V=(C=B.maxAnisotropy)!==null&&C!==void 0?C:1;V>1&&this.device.EXT_texture_filter_anisotropic!==null&&(Ha(B.minFilter===ps.BILINEAR&&B.magFilter===ps.BILINEAR&&B.mipmapFilter===Rc.LINEAR),D.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V))},o.prototype.destroy=function(){a.prototype.destroy.call(this),Lo(this.device.gl)&&this.device.gl.deleteSampler(wy(this))},o.prototype.isNPOT=function(f,m){return!K1(f)||!K1(m)},o}($d),c3=function(){function a(){}return a.prototype.dispatchWorkgroups=function(o,f,m){},a.prototype.dispatchWorkgroupsIndirect=function(o,f){},a.prototype.setPipeline=function(o){},a.prototype.setBindings=function(o){},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a}(),f3=function(a){(0,wo.ZT)(o,a);function o(){var f=a!==null&&a.apply(this,arguments)||this;return f.type=Bs.RenderBundle,f.commands=[],f}return o.prototype.push=function(f){this.commands.push(f)},o.prototype.replay=function(){this.commands.forEach(function(f){return f()})},o}($d),hb=65536,h3=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,p3=function(){function a(o,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=wv(V0),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=U0.LOWER_LEFT,this.clipSpaceNearZ=xv.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=o,this.contextAttributes=yg(o.getContextAttributes()),Lo(o)?(this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=o.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=o.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=o.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=o.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=o.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=o.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=o.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_frag_depth"),o.getExtension("OES_element_index_uint"),o.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=o.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=o.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=o.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=o.getExtension("KHR_parallel_shader_compile"),Lo(o)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new cb({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:fs.TEXTURE_2D,mipLevelCount:1,usage:Wf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Qn.U8_RGB_RT:Qn.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Bu.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(fs.TEXTURE_2D,Bu.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(fs.TEXTURE_2D,Bu.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:Il.VERTEX,hint:i0.STATIC}),Lo(o)&&(this.fallbackTexture2DArray=this.createFallbackTexture(fs.TEXTURE_2D_ARRAY,Bu.Float),this.fallbackTexture3D=this.createFallbackTexture(fs.TEXTURE_3D,Bu.Float),this.fallbackTextureCube=this.createFallbackTexture(fs.TEXTURE_CUBE_MAP,Bu.Float)),this.currentMegaState.depthCompare=rs.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=df.ALL,o.enable(o.DEPTH_TEST),o.enable(o.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new fb)}return a.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},a.prototype.createFallbackTexture=function(o,f){var m=o===fs.TEXTURE_CUBE_MAP?6:1,w=f===Bu.Depth?Qn.D32F:Qn.U8_RGBA_NORM,C=this.createTexture({dimension:o,format:w,usage:Wf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return f===Bu.Float&&C.setImageData([new Uint8Array(4*m)]),Cv(C)},a.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},a.prototype.checkLimits=function(){var o=this.gl;if(this.maxVertexAttribs=o.getParameter(bn.MAX_VERTEX_ATTRIBS),Lo(o)){this.uniformBufferMaxPageByteSize=Math.min(o.getParameter(bn.MAX_UNIFORM_BLOCK_SIZE),hb),this.uniformBufferWordAlignment=o.getParameter(o.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=o.getInternalformatParameter(o.RENDERBUFFER,o.DEPTH32F_STENCIL8,o.SAMPLES);this.supportedSampleCounts=f?(0,wo.ev)([],(0,wo.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=hb;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,w){return m-w})},a.prototype.configureSwapChain=function(o,f,m){var w=this.scTexture;w.width=o,w.height=f,this.scPlatformFramebuffer=ew(m)},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.gl.canvas},a.prototype.getOnscreenTexture=function(){return this.scTexture},a.prototype.beginFrame=function(){},a.prototype.endFrame=function(){},a.prototype.translateTextureInternalFormat=function(o,f){switch(f===void 0&&(f=!1),o){case Qn.ALPHA:return bn.ALPHA;case Qn.U8_LUMINANCE:case Qn.F16_LUMINANCE:case Qn.F32_LUMINANCE:return bn.LUMINANCE;case Qn.F16_R:return bn.R16F;case Qn.F16_RG:return bn.RG16F;case Qn.F16_RGB:return bn.RGB16F;case Qn.F16_RGBA:return bn.RGBA16F;case Qn.F32_R:return bn.R32F;case Qn.F32_RG:return bn.RG32F;case Qn.F32_RGB:return bn.RGB32F;case Qn.F32_RGBA:return Lo(this.gl)?bn.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:bn.RGBA;case Qn.U8_R_NORM:return bn.R8;case Qn.U8_RG_NORM:return bn.RG8;case Qn.U8_RGB_NORM:case Qn.U8_RGB_RT:return bn.RGB8;case Qn.U8_RGB_SRGB:return bn.SRGB8;case Qn.U8_RGBA_NORM:case Qn.U8_RGBA_RT:return Lo(this.gl)?bn.RGBA8:f?bn.RGBA4:bn.RGBA;case Qn.U8_RGBA:return bn.RGBA;case Qn.U8_RGBA_SRGB:case Qn.U8_RGBA_RT_SRGB:return bn.SRGB8_ALPHA8;case Qn.U16_R:return bn.R16UI;case Qn.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Qn.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Qn.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Qn.U16_RGBA_5551:return bn.RGB5_A1;case Qn.U16_RGB_565:return bn.RGB565;case Qn.U32_R:return bn.R32UI;case Qn.S8_RGBA_NORM:return bn.RGBA8_SNORM;case Qn.S8_RG_NORM:return bn.RG8_SNORM;case Qn.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Qn.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Qn.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Qn.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Qn.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Qn.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Qn.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Qn.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Qn.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Qn.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Qn.D32F_S8:return Lo(this.gl)?bn.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?bn.DEPTH_STENCIL:bn.DEPTH_COMPONENT16;case Qn.D24_S8:return Lo(this.gl)?bn.DEPTH24_STENCIL8:this.WEBGL_depth_texture?bn.DEPTH_STENCIL:bn.DEPTH_COMPONENT16;case Qn.D32F:return Lo(this.gl)?bn.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?bn.DEPTH_COMPONENT:bn.DEPTH_COMPONENT16;case Qn.D24:return Lo(this.gl)?bn.DEPTH_COMPONENT24:this.WEBGL_depth_texture?bn.DEPTH_COMPONENT:bn.DEPTH_COMPONENT16;default:throw new Error("whoops")}},a.prototype.translateTextureType=function(o){var f=j0(o);switch(f){case ri.U8:return bn.UNSIGNED_BYTE;case ri.U16:return bn.UNSIGNED_SHORT;case ri.U32:return bn.UNSIGNED_INT;case ri.S8:return bn.BYTE;case ri.F16:return bn.HALF_FLOAT;case ri.F32:return bn.FLOAT;case ri.U16_PACKED_5551:return bn.UNSIGNED_SHORT_5_5_5_1;case ri.D32F:return Lo(this.gl)?bn.FLOAT:this.WEBGL_depth_texture?bn.UNSIGNED_INT:bn.UNSIGNED_BYTE;case ri.D24:return Lo(this.gl)?bn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?bn.UNSIGNED_SHORT:bn.UNSIGNED_BYTE;case ri.D24S8:return Lo(this.gl)?bn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?bn.UNSIGNED_INT_24_8_WEBGL:bn.UNSIGNED_BYTE;case ri.D32FS8:return bn.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},a.prototype.translateInternalTextureFormat=function(o){switch(o){case Qn.F32_R:return bn.R32F;case Qn.F32_RG:return bn.RG32F;case Qn.F32_RGB:return bn.RGB32F;case Qn.F32_RGBA:return bn.RGBA32F;case Qn.F16_R:return bn.R16F;case Qn.F16_RG:return bn.RG16F;case Qn.F16_RGB:return bn.RGB16F;case Qn.F16_RGBA:return bn.RGBA16F}return this.translateTextureFormat(o)},a.prototype.translateTextureFormat=function(o){if(c2(o)||o===Qn.F32_LUMINANCE||o===Qn.U8_LUMINANCE)return this.translateTextureInternalFormat(o);var f=Lo(this.gl)||!Lo(this.gl)&&!!this.WEBGL_depth_texture;switch(o){case Qn.D24_S8:case Qn.D32F_S8:return f?bn.DEPTH_STENCIL:bn.RGBA;case Qn.D24:case Qn.D32F:return f?bn.DEPTH_COMPONENT:bn.RGBA}var m=pw(o),w=$1(o);switch(w){case Ro.A:return bn.ALPHA;case Ro.R:return m?bn.RED_INTEGER:bn.RED;case Ro.RG:return m?bn.RG_INTEGER:bn.RG;case Ro.RGB:return m?bn.RGB_INTEGER:bn.RGB;case Ro.RGBA:return bn.RGBA}},a.prototype.setActiveTexture=function(o){this.currentActiveTexture!==o&&(this.gl.activeTexture(o),this.currentActiveTexture=o)},a.prototype.bindVAO=function(o){this.currentBoundVAO!==o&&(Lo(this.gl)?this.gl.bindVertexArray(o):this.OES_vertex_array_object.bindVertexArrayOES(o),this.currentBoundVAO=o)},a.prototype.programCompiled=function(o){Ha(o.compileState!==cd.NeedsCompile),o.compileState===cd.Compiling&&(o.compileState=cd.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(o))},a.prototype.useProgram=function(o){this.currentProgram!==o&&(this.programCompiled(o),this.gl.useProgram(o.gl_program),this.currentProgram=o)},a.prototype.ensureResourceExists=function(o){if(o===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return o},a.prototype.createBuffer=function(o){return new Dp({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new cb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new u3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){return new o3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,D=f.mipLevelCount;return Ha(D===1),this.createRenderTarget({format:m,width:w,height:C,sampleCount:1,texture:o})},a.prototype.createProgram=function(o){var f,m,w,C=(f=o.vertex)===null||f===void 0?void 0:f.glsl;return!((m=o.vertex)===null||m===void 0)&&m.glsl&&(o.vertex.glsl=um(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((w=o.fragment)===null||w===void 0)&&w.glsl&&(o.fragment.glsl=um(this.queryVendorInfo(),"frag",o.fragment.glsl)),this.createProgramSimple(o,C)},a.prototype.createProgramSimple=function(o,f){var m=new a3({id:this.getNextUniqueId(),device:this,descriptor:o},f);return m},a.prototype.createBindings=function(o){return new dw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new Lp({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new mw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePass=function(){return new c3},a.prototype.createComputePipeline=function(o){return new gw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createReadback=function(){return new l3({id:this.getNextUniqueId(),device:this})},a.prototype.createQueryPool=function(o,f){return new s3({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.formatRenderPassDescriptor=function(o){var f,m,w,C,D,B,V=o.colorAttachment;o.depthClearValue=(f=o.depthClearValue)!==null&&f!==void 0?f:"load",o.stencilClearValue=(m=o.stencilClearValue)!==null&&m!==void 0?m:"load";for(var ie=0;ie<V.length;ie++)o.colorAttachmentLevel||(o.colorAttachmentLevel=[]),o.colorAttachmentLevel[ie]=(w=o.colorAttachmentLevel[ie])!==null&&w!==void 0?w:0,o.colorResolveToLevel||(o.colorResolveToLevel=[]),o.colorResolveToLevel[ie]=(C=o.colorResolveToLevel[ie])!==null&&C!==void 0?C:0,o.colorClearColor||(o.colorClearColor=[]),o.colorClearColor[ie]=(D=o.colorClearColor[ie])!==null&&D!==void 0?D:"load",o.colorStore||(o.colorStore=[]),o.colorStore[ie]=(B=o.colorStore[ie])!==null&&B!==void 0?B:!1},a.prototype.createRenderBundle=function(){return new f3({id:this.getNextUniqueId(),device:this})},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle=void 0},a.prototype.executeBundles=function(o){o.forEach(function(f){f.replay()})},a.prototype.createRenderPass=function(o){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=o,this.formatRenderPassDescriptor(o);var f=o.colorAttachment,m=o.colorAttachmentLevel,w=o.colorClearColor,C=o.colorResolveTo,D=o.colorResolveToLevel,B=o.depthStencilAttachment,V=o.depthClearValue,ie=o.stencilClearValue,Ee=o.depthStencilResolveTo,Ce=C&&C.length===1&&C[0]===this.scTexture;this.setRenderPassParametersBegin(f.length,Ce);for(var He=0;He<f.length;He++)this.setRenderPassParametersColor(He,f[He],m[He],C[He],D[He],Ce);this.setRenderPassParametersDepthStencil(B,Ee,Ce),this.validateCurrentAttachments();for(var He=0;He<f.length;He++){var Ot=w[He];Ot!=="load"&&this.setRenderPassParametersClearColor(He,Ot.r,Ot.g,Ot.b,Ot.a)}return this.setRenderPassParametersClearDepthStencil(V,ie),this},a.prototype.submitPass=function(o){Ha(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},a.prototype.copySubTexture2D=function(o,f,m,w,C,D){var B=this.gl,V=o,ie=w;if(Ha(ie.mipLevelCount===1),Ha(V.mipLevelCount===1),Lo(B))V===this.scTexture?B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,V,0)),B.bindFramebuffer(B.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,ie,0),B.blitFramebuffer(C,D,C+ie.width,D+ie.height,f,m,f+ie.width,m+ie.height,B.COLOR_BUFFER_BIT,B.LINEAR),B.bindFramebuffer(B.READ_FRAMEBUFFER,null),B.bindFramebuffer(B.DRAW_FRAMEBUFFER,null);else if(V===this.scTexture){var Ee=this.createRenderTargetFromTexture(w);this.submitBlitRenderPass(Ee,V)}},a.prototype.queryLimits=function(){return this},a.prototype.queryTextureFormatSupported=function(o,f,m){switch(o){case Qn.BC1_SRGB:case Qn.BC2_SRGB:case Qn.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?ud(f,m,4,4):!1;case Qn.BC1:case Qn.BC2:case Qn.BC3:return this.WEBGL_compressed_texture_s3tc!==null?ud(f,m,4,4):!1;case Qn.BC4_UNORM:case Qn.BC4_SNORM:case Qn.BC5_UNORM:case Qn.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?ud(f,m,4,4):!1;case Qn.U16_R_NORM:case Qn.U16_RG_NORM:case Qn.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Qn.F32_R:case Qn.F32_RG:case Qn.F32_RGB:case Qn.F32_RGBA:return this.OES_texture_float_linear!==null;case Qn.F16_R:case Qn.F16_RG:case Qn.F16_RGB:case Qn.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},a.prototype.queryProgramReady=function(o){var f=this.gl;if(o.compileState===cd.NeedsCompile)throw new Error("whoops");if(o.compileState===cd.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=f.getProgramParameter(o.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(o),m}return o.compileState===cd.NeedsBind||o.compileState===cd.ReadyToUse},a.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){return this.currentRenderPassDescriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Bs.Buffer)for(var m=o.gl_buffer_pages,w=0;w<m.length;w++)fm(m[w],"".concat(f," Page ").concat(w));else if(o.type===Bs.Texture)fm(Cv(o),f);else if(o.type===Bs.Sampler)fm(wy(o),f);else if(o.type===Bs.RenderTarget){var C=o.gl_renderbuffer;C!==null&&fm(C,f)}else o.type===Bs.InputLayout&&fm(o.vao,f)},a.prototype.setResourceLeakCheck=function(o,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(o,f)},a.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a.prototype.programPatched=function(o,f){Ha(this.shaderDebug)},a.prototype.getBufferData=function(o,f,m){m===void 0&&(m=0);var w=this.gl;Lo(w)&&(w.bindBuffer(w.COPY_READ_BUFFER,Av(o,m*4)),w.getBufferSubData(w.COPY_READ_BUFFER,m*4,f))},a.prototype.debugGroupStatisticsDrawCall=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=o},a.prototype.debugGroupStatisticsBufferUpload=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=o},a.prototype.debugGroupStatisticsTextureBind=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=o},a.prototype.debugGroupStatisticsTriangles=function(o){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=o},a.prototype.reportShaderError=function(o,f){var m=this.gl,w=m.getShaderParameter(o,m.COMPILE_STATUS);if(!w){console.error(Sv(f));var C=m.getExtension("WEBGL_debug_shaders");C&&console.error(C.getTranslatedShaderSource(o)),console.error(m.getShaderInfoLog(o))}return w},a.prototype.checkProgramCompilationForErrors=function(o){var f=this.gl,m=o.gl_program;if(!f.getProgramParameter(m,f.LINK_STATUS)){var w=o.descriptor;if(!this.reportShaderError(o.gl_shader_vert,w.vertex.glsl)||!this.reportShaderError(o.gl_shader_frag,w.fragment.glsl))return;console.error(f.getProgramInfoLog(o.gl_program))}},a.prototype.bindFramebufferAttachment=function(o,f,m,w){var C=this.gl;if((0,Pp.Z)(m))C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,null);else if(m.type===Bs.RenderTarget)m.gl_renderbuffer!==null?C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&C.framebufferTexture2D(o,f,bn.TEXTURE_2D,Cv(m.texture),w);else if(m.type===Bs.Texture){var D=Cv(m);m.dimension===fs.TEXTURE_2D?C.framebufferTexture2D(o,f,bn.TEXTURE_2D,D,w):Lo(C)&&(m.dimension,fs.TEXTURE_2D_ARRAY)}},a.prototype.bindFramebufferDepthStencilAttachment=function(o,f){var m=this.gl,w=(0,Pp.Z)(f)?vo.Depth|vo.Stencil:by(f.format),C=!!(w&vo.Depth),D=!!(w&vo.Stencil);if(C&&D){var B=Lo(this.gl)||!Lo(this.gl)&&!!this.WEBGL_depth_texture;B?this.bindFramebufferAttachment(o,m.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0)}else C?(this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,null,0)):D&&(this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,null,0))},a.prototype.validateCurrentAttachments=function(){for(var o=-1,f=-1,m=-1,w=0;w<this.currentColorAttachments.length;w++){var C=this.currentColorAttachments[w];C!==null&&(o===-1?(o=C.sampleCount,f=C.width,m=C.height):(Ha(o===C.sampleCount),Ha(f===C.width),Ha(m===C.height)))}this.currentDepthStencilAttachment&&(o===-1?o=this.currentDepthStencilAttachment.sampleCount:(Ha(o===this.currentDepthStencilAttachment.sampleCount),Ha(f===this.currentDepthStencilAttachment.width),Ha(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=o},a.prototype.setRenderPassParametersBegin=function(o,f){f===void 0&&(f=!1);var m=this.gl;if(f)m.bindFramebuffer(bn.FRAMEBUFFER,null);else if(Lo(m)?m.bindFramebuffer(bn.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||m.bindFramebuffer(bn.FRAMEBUFFER,this.renderPassDrawFramebuffer),Lo(m)?m.drawBuffers([bn.COLOR_ATTACHMENT0,bn.COLOR_ATTACHMENT1,bn.COLOR_ATTACHMENT2,bn.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([bn.COLOR_ATTACHMENT0_WEBGL,bn.COLOR_ATTACHMENT1_WEBGL,bn.COLOR_ATTACHMENT2_WEBGL,bn.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var w=o;w<this.currentColorAttachments.length;w++){var C=Lo(m)?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,D=Lo(m)?bn.COLOR_ATTACHMENT0:bn.COLOR_ATTACHMENT0_WEBGL;m.framebufferRenderbuffer(C,D+w,bn.RENDERBUFFER,null),m.framebufferTexture2D(C,D+w,bn.TEXTURE_2D,null,0)}this.currentColorAttachments.length=o},a.prototype.setRenderPassParametersColor=function(o,f,m,w,C,D){D===void 0&&(D=!1);var B=this.gl,V=Lo(B);(this.currentColorAttachments[o]!==f||this.currentColorAttachmentLevels[o]!==m)&&(this.currentColorAttachments[o]=f,this.currentColorAttachmentLevels[o]=m,!D&&(V||!V&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(V?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,(V?bn.COLOR_ATTACHMENT0:bn.COLOR_ATTACHMENT0_WEBGL)+o,f,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[o]!==w||this.currentColorResolveToLevels[o]!==C)&&(this.currentColorResolveTos[o]=w,this.currentColorResolveToLevels[o]=C,w!==null&&(this.resolveColorAttachmentsChanged=!0))},a.prototype.setRenderPassParametersDepthStencil=function(o,f,m){m===void 0&&(m=!1);var w=this.gl;this.currentDepthStencilAttachment!==o&&(this.currentDepthStencilAttachment=o,!m&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(Lo(w)?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},a.prototype.setRenderPassParametersClearColor=function(o,f,m,w,C){var D=this.gl;if(this.OES_draw_buffers_indexed!==null){var B=this.currentMegaState.attachmentsState[o];B&&B.channelWriteMask!==df.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(o,!0,!0,!0,!0),B.channelWriteMask=df.ALL)}else{var B=this.currentMegaState.attachmentsState[0];B&&B.channelWriteMask!==df.ALL&&(D.colorMask(!0,!0,!0,!0),B.channelWriteMask=df.ALL)}this.setScissorRectEnabled(!1),Lo(D)?D.clearBufferfv(D.COLOR,o,[f,m,w,C]):(D.clearColor(f,m,w,C),D.clear(D.COLOR_BUFFER_BIT))},a.prototype.setRenderPassParametersClearDepthStencil=function(o,f){o===void 0&&(o="load"),f===void 0&&(f="load");var m=this.gl;o!=="load"&&(Ha(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),Lo(m)?m.clearBufferfv(m.DEPTH,0,[o]):(m.clearDepth(o),m.clear(m.DEPTH_BUFFER_BIT))),f!=="load"&&(Ha(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),Lo(m)?m.clearBufferiv(m.STENCIL,0,[f]):(m.clearStencil(f),m.clear(m.STENCIL_BUFFER_BIT)))},a.prototype.setBindings=function(o){var f=this,m;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(o)});return}var w=this.gl,C=o,D=C.uniformBufferBindings,B=C.samplerBindings,V=C.bindingLayouts;Ha(0<V.bindingLayoutTables.length);var ie=V.bindingLayoutTables[0];Ha(D.length>=ie.numUniformBuffers),Ha(B.length>=ie.numSamplers);for(var Ee=0;Ee<D.length;Ee++){var Ce=D[Ee];if(Ce.size!==0){var He=ie.firstUniformBuffer+Ee,Ot=Ce.buffer,nn=Ce.offset||0,Bn=Ce.size||Ot.byteSize;if(Ot!==this.currentUniformBuffers[He]||nn!==this.currentUniformBufferByteOffsets[He]||Bn!==this.currentUniformBufferByteSizes[He]){var sr=nn%Ot.pageByteSize,xr=Ot.gl_buffer_pages[nn/Ot.pageByteSize|0];Ha(sr+Bn<=Ot.pageByteSize),Lo(w)&&w.bindBufferRange(w.UNIFORM_BUFFER,He,xr,sr,Bn),this.currentUniformBuffers[He]=Ot,this.currentUniformBufferByteOffsets[He]=nn,this.currentUniformBufferByteSizes[He]=Bn}}}for(var Ee=0;Ee<ie.numSamplers;Ee++){var Ce=B[Ee],fr=ie.firstSampler+Ee,Yr=Ce!==null&&Ce.sampler!==null?wy(Ce.sampler):null,Pi=Ce!==null&&Ce.texture!==null?Cv(Ce.texture):null;if(this.currentSamplers[fr]!==Yr&&(Lo(w)&&w.bindSampler(fr,Yr),this.currentSamplers[fr]=Yr),this.currentTextures[fr]!==Pi){if(this.setActiveTexture(w.TEXTURE0+fr),Pi!==null){var Co=yg(Ce).texture,ao=Co.gl_target,Zr=Co.width,Qi=Co.height;Ce.texture.textureIndex=fr,w.bindTexture(ao,Pi),Lo(w)||(m=Ce.sampler)===null||m===void 0||m.setTextureParameters(ao,Zr,Qi),this.debugGroupStatisticsTextureBind()}else{var Ma=(0,wo.pi)((0,wo.pi)({},Ce),Ey),Ms=Ma.dimension,na=Ma.formatKind,ao=ub(Ms);w.bindTexture(ao,this.getFallbackTexture((0,wo.pi)({gl_target:ao,formatKind:na},Ma)))}this.currentTextures[fr]=Pi}}},a.prototype.setViewport=function(o,f,m,w){var C=this.gl;C.viewport(o,f,m,w)},a.prototype.setScissorRect=function(o,f,m,w){var C=this.gl;this.setScissorRectEnabled(!0),C.scissor(o,f,m,w)},a.prototype.applyAttachmentStateIndexed=function(o,f,m){var w=this.gl,C=this.OES_draw_buffers_indexed;f.channelWriteMask!==m.channelWriteMask&&(C.colorMaskiOES(o,!!(m.channelWriteMask&df.RED),!!(m.channelWriteMask&df.GREEN),!!(m.channelWriteMask&df.BLUE),!!(m.channelWriteMask&df.ALPHA)),f.channelWriteMask=m.channelWriteMask);var D=f.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,B=f.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(B||D)&&(W0(f.rgbBlendState)&&W0(f.alphaBlendState)?C.enableiOES(o,w.BLEND):W0(m.rgbBlendState)&&W0(m.alphaBlendState)&&C.disableiOES(o,w.BLEND)),D&&(C.blendEquationSeparateiOES(o,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),f.rgbBlendState.blendMode=m.rgbBlendState.blendMode,f.alphaBlendState.blendMode=m.alphaBlendState.blendMode),B&&(C.blendFuncSeparateiOES(o,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},a.prototype.applyAttachmentState=function(o,f){var m=this.gl;o.channelWriteMask!==f.channelWriteMask&&(m.colorMask(!!(f.channelWriteMask&df.RED),!!(f.channelWriteMask&df.GREEN),!!(f.channelWriteMask&df.BLUE),!!(f.channelWriteMask&df.ALPHA)),o.channelWriteMask=f.channelWriteMask);var w=o.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||o.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,C=o.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||o.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||o.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||o.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(C||w)&&(W0(o.rgbBlendState)&&W0(o.alphaBlendState)?m.enable(m.BLEND):W0(f.rgbBlendState)&&W0(f.alphaBlendState)&&m.disable(m.BLEND)),w&&(m.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),o.rgbBlendState.blendMode=f.rgbBlendState.blendMode,o.alphaBlendState.blendMode=f.alphaBlendState.blendMode),C&&(m.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),o.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,o.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,o.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},a.prototype.setMegaState=function(o){var f=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var w=0;w<o.attachmentsState.length;w++)this.applyAttachmentStateIndexed(w,m.attachmentsState[0],o.attachmentsState[0]);else Ha(o.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],o.attachmentsState[0]);sm(m.blendConstant,o.blendConstant)||(f.blendColor(o.blendConstant.r,o.blendConstant.g,o.blendConstant.b,o.blendConstant.a),i2(m.blendConstant,o.blendConstant)),m.depthCompare!==o.depthCompare&&(f.depthFunc(o.depthCompare),m.depthCompare=o.depthCompare),!!m.depthWrite!=!!o.depthWrite&&(f.depthMask(o.depthWrite),m.depthWrite=o.depthWrite),!!m.stencilWrite!=!!o.stencilWrite&&(f.stencilMask(o.stencilWrite?255:0),m.stencilWrite=o.stencilWrite);var C=!1;if(!eb(m.stencilFront,o.stencilFront)){C=!0;var D=o.stencilFront,B=D.passOp,V=D.failOp,ie=D.depthFailOp,Ee=D.compare;(m.stencilFront.passOp!==B||m.stencilFront.failOp!==V||m.stencilFront.depthFailOp!==ie)&&(f.stencilOpSeparate(f.FRONT,V,ie,B),m.stencilFront.passOp=B,m.stencilFront.failOp=V,m.stencilFront.depthFailOp=ie),m.stencilFront.compare!==Ee&&(this.setStencilReference(0),m.stencilFront.compare=Ee)}if(!eb(m.stencilBack,o.stencilBack)){C=!0;var Ce=o.stencilBack,B=Ce.passOp,V=Ce.failOp,ie=Ce.depthFailOp,Ee=Ce.compare;(m.stencilBack.passOp!==B||m.stencilBack.failOp!==V||m.stencilBack.depthFailOp!==ie)&&(f.stencilOpSeparate(f.BACK,V,ie,B),m.stencilBack.passOp=B,m.stencilBack.failOp=V,m.stencilBack.depthFailOp=ie),m.stencilBack.compare!==Ee&&(this.setStencilReference(0),m.stencilBack.compare=Ee)}(m.stencilFront.mask!==o.stencilFront.mask||m.stencilBack.mask!==o.stencilBack.mask)&&(C=!0,m.stencilFront.mask=o.stencilFront.mask,m.stencilBack.mask=o.stencilBack.mask),C&&this.applyStencil(),m.cullMode!==o.cullMode&&(m.cullMode===od.NONE?f.enable(f.CULL_FACE):o.cullMode===od.NONE&&f.disable(f.CULL_FACE),o.cullMode===od.BACK?f.cullFace(f.BACK):o.cullMode===od.FRONT?f.cullFace(f.FRONT):o.cullMode===od.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),m.cullMode=o.cullMode),m.frontFace!==o.frontFace&&(f.frontFace(o.frontFace),m.frontFace=o.frontFace),m.polygonOffset!==o.polygonOffset&&(o.polygonOffset?f.enable(f.POLYGON_OFFSET_FILL):f.disable(f.POLYGON_OFFSET_FILL),m.polygonOffset=o.polygonOffset),(m.polygonOffsetFactor!==o.polygonOffsetFactor||m.polygonOffsetUnits!==o.polygonOffsetUnits)&&(f.polygonOffset(o.polygonOffsetFactor,o.polygonOffsetUnits),m.polygonOffsetFactor=o.polygonOffsetFactor,m.polygonOffsetUnits=o.polygonOffsetUnits)},a.prototype.validatePipelineFormats=function(o){for(var f=0;f<this.currentColorAttachments.length;f++)var m=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&Ha(this.currentDepthStencilAttachment.format===o.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&Ha(this.currentSampleCount===o.sampleCount)},a.prototype.setPipeline=function(o){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(o)});return}this.currentPipeline=o,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===cd.NeedsBind){var w=this.gl,C=m.gl_program,D=m.descriptor,B=Ty(D.vertex.glsl,h3);if(Lo(w))for(var V=0;V<B.length;V++){var ie=(0,wo.CR)(B[V],2),Ee=ie[1],Ce=w.getUniformBlockIndex(C,Ee);Ce!==-1&&Ce!==4294967295&&w.uniformBlockBinding(C,Ce,V)}for(var He=Ty(D.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),V=0;V<He.length;V++){var Ot=(0,wo.CR)(He[V],3),nn=Ot[1],Bn=Ot[2],sr=w.getUniformLocation(C,nn);w.uniform1i(sr,parseInt(Bn))}m.compileState=cd.ReadyToUse}},a.prototype.setVertexInput=function(o,f,m){var w,C,D=this,B;if(this.renderBundle){this.renderBundle.push(function(){return D.setVertexInput(o,f,m)});return}if(o!==null){Ha(this.currentPipeline.inputLayout===o);var V=o;this.bindVAO(V.vao);for(var ie=this.gl,Ee=0;Ee<V.vertexBufferDescriptors.length;Ee++){var Ce=V.vertexBufferDescriptors[Ee],He=Ce.arrayStride,Ot=Ce.attributes;try{for(var nn=(w=void 0,(0,wo.XA)(Ot)),Bn=nn.next();!Bn.done;Bn=nn.next()){var sr=Bn.value,xr=sr.shaderLocation,fr=sr.offset,Yr=Lo(ie)?xr:(B=V.program.attributes[xr])===null||B===void 0?void 0:B.location;if(!(0,Pp.Z)(Yr)){var Pi=f[Ee];if(Pi===null)continue;var Co=sr.vertexFormat;ie.bindBuffer(ie.ARRAY_BUFFER,Av(Pi.buffer));var ao=(Pi.offset||0)+fr;ie.vertexAttribPointer(Yr,Co.size,Co.type,Co.normalized,He,ao)}}}catch(Qi){w={error:Qi}}finally{try{Bn&&!Bn.done&&(C=nn.return)&&C.call(nn)}finally{if(w)throw w.error}}}if(Ha(m!==null==(V.indexBufferFormat!==null)),m!==null){var Zr=m.buffer;Ha(Zr.usage===Il.INDEX),ie.bindBuffer(ie.ELEMENT_ARRAY_BUFFER,Av(Zr)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else Ha(this.currentPipeline.inputLayout===null),Ha(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},a.prototype.setStencilReference=function(o){this.currentStencilRef!==o&&(this.currentStencilRef=o,this.applyStencil())},a.prototype.draw=function(o,f,m,w){var C,D=this;if(this.renderBundle){this.renderBundle.push(function(){return D.draw(o,f,m,w)});return}var B=this.gl,V=this.currentPipeline;if(f){var ie=[V.drawMode,m||0,o,f];Lo(B)?B.drawArraysInstanced.apply(B,(0,wo.ev)([],(0,wo.CR)(ie),!1)):(C=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(C,(0,wo.ev)([],(0,wo.CR)(ie),!1))}else B.drawArrays(V.drawMode,m,o);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndexed=function(o,f,m,w,C){var D,B=this;if(this.renderBundle){this.renderBundle.push(function(){return B.drawIndexed(o,f,m,w,C)});return}var V=this.gl,ie=this.currentPipeline,Ee=yg(ie.inputLayout),Ce=yg(this.currentIndexBufferByteOffset)+m*Ee.indexBufferCompByteSize;if(f){var He=[ie.drawMode,o,Ee.indexBufferType,Ce,f];Lo(V)?V.drawElementsInstanced.apply(V,(0,wo.ev)([],(0,wo.CR)(He),!1)):(D=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(D,(0,wo.ev)([],(0,wo.CR)(He),!1))}else V.drawElements(ie.drawMode,o,Ee.indexBufferType,Ce);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndirect=function(o,f){},a.prototype.drawIndexedIndirect=function(o,f){},a.prototype.beginOcclusionQuery=function(o){var f=this.gl;if(Lo(f)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(m.gl_query_type,m.gl_query[o])}},a.prototype.endOcclusionQuery=function(){var o=this.gl;if(Lo(o)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;o.endQuery(f.gl_query_type)}},a.prototype.pipelineQueryReady=function(o){var f=o;return this.queryProgramReady(f.program)},a.prototype.pipelineForceReady=function(o){},a.prototype.endPass=function(){for(var o=this.gl,f=Lo(o),m=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,w=!1,C=0;C<this.currentColorAttachments.length;C++){var D=this.currentColorAttachments[C];if(D!==null){var B=this.currentColorResolveTos[C],V=!1;B!==null&&(Ha(D.width===B.width&&D.height===B.height),this.setScissorRectEnabled(!1),m||(f&&o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,D,this.currentColorAttachmentLevels[C])),V=!0,m||(B===this.scTexture?o.bindFramebuffer(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&o.framebufferTexture2D(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,B.gl_texture,this.currentColorResolveToLevels[C]))),m||(f?(o.blitFramebuffer(0,0,D.width,D.height,0,0,B.width,B.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(D,B)),w=!0),this.currentRenderPassDescriptor.colorStore[C]||!m&&!V&&(o.bindFramebuffer(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,D,this.currentColorAttachmentLevels[C])),m||o.bindFramebuffer(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var ie=this.currentDepthStencilAttachment;if(ie){var Ee=this.currentDepthStencilResolveTo,V=!1;Ee&&(Ha(ie.width===Ee.width&&ie.height===Ee.height),this.setScissorRectEnabled(!1),m||(o.bindFramebuffer(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),o.bindFramebuffer(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,ie),this.bindFramebufferDepthStencilAttachment(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,Ee))),V=!0,m||(f&&o.blitFramebuffer(0,0,ie.width,ie.height,0,0,Ee.width,Ee.height,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,null)),w=!0),!m&&!this.currentRenderPassDescriptor.depthStencilStore&&(V||(o.bindFramebuffer(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,ie),V=!0),f&&o.invalidateFramebuffer(o.READ_FRAMEBUFFER,[o.DEPTH_STENCIL_ATTACHMENT])),!m&&V&&o.bindFramebuffer(f?bn.READ_FRAMEBUFFER:bn.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!m&&!w&&o.bindFramebuffer(f?bn.DRAW_FRAMEBUFFER:bn.FRAMEBUFFER,null)},a.prototype.setScissorRectEnabled=function(o){if(this.currentScissorEnabled!==o){var f=this.gl;o?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=o}},a.prototype.applyStencil=function(){(0,Pp.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(bn.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(bn.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},a.prototype.getFallbackTexture=function(o){var f=o.gl_target,m=o.formatKind;if(f===bn.TEXTURE_2D)return m===Bu.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===bn.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===bn.TEXTURE_3D)return this.fallbackTexture3D;if(f===bn.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.submitBlitRenderPass=function(o,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:Il.VERTEX|Il.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:mg.VERTEX,attributes:[{format:Qn.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:bc.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Qn.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:wv(V0)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:o.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:o}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var w=this.createRenderPass({colorAttachment:[o],colorResolveTo:[f],colorClearColor:[LO]}),C=this.getCanvas(),D=C.width,B=C.height;w.setPipeline(this.blitRenderPipeline),w.setBindings(this.blitBindings),w.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),w.setViewport(0,0,D,B),this.gl.disable(this.gl.BLEND),w.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},a}(),yw=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,wo.mG)(this,void 0,void 0,function(){var f,m,w,C,D,B,V,ie,Ee,Ce,He,Ot,nn;return(0,wo.Jh)(this,function(Bn){return f=this.pluginOptions,m=f.targets,w=f.xrCompatible,C=f.antialias,D=C===void 0?!1:C,B=f.preserveDrawingBuffer,V=B===void 0?!1:B,ie=f.premultipliedAlpha,Ee=ie===void 0?!0:ie,Ce=f.shaderDebug,He=f.trackResources,Ot={antialias:D,preserveDrawingBuffer:V,stencil:!0,premultipliedAlpha:Ee,xrCompatible:w},this.handleContextEvents(o),m.includes("webgl2")&&(nn=o.getContext("webgl2",Ot)||o.getContext("experimental-webgl2",Ot)),!nn&&m.includes("webgl1")&&(nn=o.getContext("webgl",Ot)||o.getContext("experimental-webgl",Ot)),[2,new p3(nn,{shaderDebug:Ce,trackResources:He})]})})},a.prototype.handleContextEvents=function(o){var f=this.pluginOptions,m=f.onContextLost,w=f.onContextRestored,C=f.onContextCreationError;C&&o.addEventListener("webglcontextcreationerror",C,!1),m&&o.addEventListener("webglcontextlost",m,!1),w&&o.addEventListener("webglcontextrestored",w,!1)},a}();let xu;const B_=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&B_.decode();let Ay=null;function db(){return(Ay===null||Ay.byteLength===0)&&(Ay=new Uint8Array(xu.memory.buffer)),Ay}function pb(a,o){return a=a>>>0,B_.decode(db().subarray(a,a+o))}const Ov=new Array(128).fill(void 0);Ov.push(void 0,null,!0,!1);let k_=Ov.length;function v3(a){k_===Ov.length&&Ov.push(Ov.length+1);const o=k_;return k_=Ov[o],Ov[o]=a,o}function vb(a){return Ov[a]}function m3(a){a<132||(Ov[a]=k_,k_=a)}function g3(a){const o=vb(a);return m3(a),o}let xg=0;const mb=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},y3=typeof mb.encodeInto=="function"?function(a,o){return mb.encodeInto(a,o)}:function(a,o){const f=mb.encode(a);return o.set(f),{read:a.length,written:f.length}};function z_(a,o,f){if(f===void 0){const B=mb.encode(a),V=o(B.length,1)>>>0;return db().subarray(V,V+B.length).set(B),xg=B.length,V}let m=a.length,w=o(m,1)>>>0;const C=db();let D=0;for(;D<m;D++){const B=a.charCodeAt(D);if(B>127)break;C[w+D]=B}if(D!==m){D!==0&&(a=a.slice(D)),w=f(w,m,m=D+a.length*3,1)>>>0;const B=db().subarray(w+D,w+m),V=y3(a,B);D+=V.written}return xg=D,w}let U_=null;function j_(){return(U_===null||U_.byteLength===0)&&(U_=new Int32Array(xu.memory.buffer)),U_}function _3(a,o,f){let m,w;try{const B=xu.__wbindgen_add_to_stack_pointer(-16),V=z_(a,xu.__wbindgen_malloc,xu.__wbindgen_realloc),ie=xg,Ee=z_(o,xu.__wbindgen_malloc,xu.__wbindgen_realloc),Ce=xg;xu.glsl_compile(B,V,ie,Ee,Ce,f);var C=j_()[B/4+0],D=j_()[B/4+1];return m=C,w=D,pb(C,D)}finally{xu.__wbindgen_add_to_stack_pointer(16),xu.__wbindgen_free(m,w,1)}}class V_{static __wrap(o){o=o>>>0;const f=Object.create(V_.prototype);return f.__wbg_ptr=o,f}__destroy_into_raw(){const o=this.__wbg_ptr;return this.__wbg_ptr=0,o}free(){const o=this.__destroy_into_raw();xu.__wbg_wgslcomposer_free(o)}constructor(){const o=xu.wgslcomposer_new();return V_.__wrap(o)}load_composable(o){const f=z_(o,xu.__wbindgen_malloc,xu.__wbindgen_realloc),m=xg;xu.wgslcomposer_load_composable(this.__wbg_ptr,f,m)}wgsl_compile(o){let f,m;try{const D=xu.__wbindgen_add_to_stack_pointer(-16),B=z_(o,xu.__wbindgen_malloc,xu.__wbindgen_realloc),V=xg;xu.wgslcomposer_wgsl_compile(D,this.__wbg_ptr,B,V);var w=j_()[D/4+0],C=j_()[D/4+1];return f=w,m=C,pb(w,C)}finally{xu.__wbindgen_add_to_stack_pointer(16),xu.__wbindgen_free(f,m,1)}}}function _w(a,o){return AI(this,null,function*(){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(a,o)}catch(m){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",m);else throw m}const f=yield a.arrayBuffer();return yield WebAssembly.instantiate(f,o)}else{const f=yield WebAssembly.instantiate(a,o);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})}function b3(){const a={};return a.wbg={},a.wbg.__wbindgen_string_new=function(o,f){const m=pb(o,f);return v3(m)},a.wbg.__wbindgen_object_drop_ref=function(o){g3(o)},a.wbg.__wbg_log_1d3ae0273d8f4f8a=function(o){console.log(vb(o))},a.wbg.__wbg_log_576ca876af0d4a77=function(o,f){console.log(vb(o),vb(f))},a.wbg.__wbindgen_throw=function(o,f){throw new Error(pb(o,f))},a}function x3(a,o){return xu=a.exports,bw.__wbindgen_wasm_module=o,U_=null,Ay=null,xu}function bw(a){return AI(this,null,function*(){if(xu!==void 0)return xu;const o=b3();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:f,module:m}=yield _w(yield a,o);return x3(f,m)})}var Yc;(function(a){a[a.COPY_SRC=1]="COPY_SRC",a[a.COPY_DST=2]="COPY_DST",a[a.TEXTURE_BINDING=4]="TEXTURE_BINDING",a[a.STORAGE_BINDING=8]="STORAGE_BINDING",a[a.STORAGE=8]="STORAGE",a[a.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Yc||(Yc={}));var f2;(function(a){a[a.READ=1]="READ",a[a.WRITE=2]="WRITE"})(f2||(f2={}));function E3(a){var o=0;return a&Wf.SAMPLED&&(o|=Yc.TEXTURE_BINDING|Yc.COPY_DST|Yc.COPY_SRC),a&Wf.STORAGE&&(o|=Yc.TEXTURE_BINDING|Yc.STORAGE_BINDING|Yc.COPY_SRC|Yc.COPY_DST),a&Wf.RENDER_TARGET&&(o|=Yc.RENDER_ATTACHMENT|Yc.TEXTURE_BINDING|Yc.COPY_SRC|Yc.COPY_DST),o}function gb(a){if(a===Qn.U8_R_NORM)return"r8unorm";if(a===Qn.S8_R_NORM)return"r8snorm";if(a===Qn.U8_RG_NORM)return"rg8unorm";if(a===Qn.S8_RG_NORM)return"rg8snorm";if(a===Qn.U32_R)return"r32uint";if(a===Qn.S32_R)return"r32sint";if(a===Qn.F32_R)return"r32float";if(a===Qn.U16_RG)return"rg16uint";if(a===Qn.S16_RG)return"rg16sint";if(a===Qn.F16_RG)return"rg16float";if(a===Qn.U8_RGBA_RT)return"bgra8unorm";if(a===Qn.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(a===Qn.U8_RGBA_NORM)return"rgba8unorm";if(a===Qn.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(a===Qn.S8_RGBA_NORM)return"rgba8snorm";if(a===Qn.U32_RG)return"rg32uint";if(a===Qn.S32_RG)return"rg32sint";if(a===Qn.F32_RG)return"rg32float";if(a===Qn.U16_RGBA)return"rgba16uint";if(a===Qn.S16_RGBA)return"rgba16sint";if(a===Qn.F16_RGBA)return"rgba16float";if(a===Qn.F32_RGBA)return"rgba32float";if(a===Qn.U32_RGBA)return"rgba32uint";if(a===Qn.S32_RGBA)return"rgba32sint";if(a===Qn.D24)return"depth24plus";if(a===Qn.D24_S8)return"depth24plus-stencil8";if(a===Qn.D32F)return"depth32float";if(a===Qn.D32F_S8)return"depth32float-stencil8";if(a===Qn.BC1)return"bc1-rgba-unorm";if(a===Qn.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(a===Qn.BC2)return"bc2-rgba-unorm";if(a===Qn.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(a===Qn.BC3)return"bc3-rgba-unorm";if(a===Qn.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(a===Qn.BC4_SNORM)return"bc4-r-snorm";if(a===Qn.BC4_UNORM)return"bc4-r-unorm";if(a===Qn.BC5_SNORM)return"bc5-rg-snorm";if(a===Qn.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function S3(a){if(a===fs.TEXTURE_2D)return"2d";if(a===fs.TEXTURE_CUBE_MAP)return"2d";if(a===fs.TEXTURE_2D_ARRAY)return"2d";if(a===fs.TEXTURE_3D)return"3d";throw new Error("whoops")}function w3(a){if(a===fs.TEXTURE_2D)return"2d";if(a===fs.TEXTURE_CUBE_MAP)return"cube";if(a===fs.TEXTURE_2D_ARRAY)return"2d-array";if(a===fs.TEXTURE_3D)return"3d";throw new Error("whoops")}function T3(a){var o=0;return a&Il.INDEX&&(o|=GPUBufferUsage.INDEX),a&Il.VERTEX&&(o|=GPUBufferUsage.VERTEX),a&Il.UNIFORM&&(o|=GPUBufferUsage.UNIFORM),a&Il.STORAGE&&(o|=GPUBufferUsage.STORAGE),a&Il.COPY_SRC&&(o|=GPUBufferUsage.COPY_SRC),a&Il.INDIRECT&&(o|=GPUBufferUsage.INDIRECT),o|=GPUBufferUsage.COPY_DST,o}function h2(a){if(a===Th.CLAMP_TO_EDGE)return"clamp-to-edge";if(a===Th.REPEAT)return"repeat";if(a===Th.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function xw(a){if(a===ps.BILINEAR)return"linear";if(a===ps.POINT)return"nearest";throw new Error("whoops")}function A3(a){if(a===Rc.LINEAR)return"linear";if(a===Rc.NEAREST)return"nearest";if(a===Rc.NO_MIP)return"nearest";throw new Error("whoops")}function Cy(a){var o=a;return o.gpuBuffer}function C3(a){var o=a;return o.gpuSampler}function O3(a){var o=a;return o.querySet}function M3(a){if(a===I_.OcclusionConservative)return"occlusion";throw new Error("whoops")}function R3(a){switch(a){case bc.TRIANGLES:return"triangle-list";case bc.POINTS:return"point-list";case bc.TRIANGLE_STRIP:return"triangle-strip";case bc.LINES:return"line-list";case bc.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function P3(a){if(a===od.NONE)return"none";if(a===od.FRONT)return"front";if(a===od.BACK)return"back";throw new Error("whoops")}function I3(a){if(a===P_.CCW)return"ccw";if(a===P_.CW)return"cw";throw new Error("whoops")}function D3(a,o){return{topology:R3(a),cullMode:P3(o.cullMode),frontFace:I3(o.frontFace)}}function Ew(a){if(a===ls.ZERO)return"zero";if(a===ls.ONE)return"one";if(a===ls.SRC)return"src";if(a===ls.ONE_MINUS_SRC)return"one-minus-src";if(a===ls.DST)return"dst";if(a===ls.ONE_MINUS_DST)return"one-minus-dst";if(a===ls.SRC_ALPHA)return"src-alpha";if(a===ls.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(a===ls.DST_ALPHA)return"dst-alpha";if(a===ls.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(a===ls.CONST)return"constant";if(a===ls.ONE_MINUS_CONSTANT)return"one-minus-constant";if(a===ls.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function yb(a){if(a===ac.ADD)return"add";if(a===ac.SUBSTRACT)return"subtract";if(a===ac.REVERSE_SUBSTRACT)return"reverse-subtract";if(a===ac.MIN)return"min";if(a===ac.MAX)return"max";throw new Error("whoops")}function Sw(a){return{operation:yb(a.blendMode),srcFactor:Ew(a.blendSrcFactor),dstFactor:Ew(a.blendDstFactor)}}function hm(a){return a.blendMode===ac.ADD&&a.blendSrcFactor===ls.ONE&&a.blendDstFactor===ls.ZERO}function L3(a){if(!(hm(a.rgbBlendState)&&hm(a.alphaBlendState)))return{color:Sw(a.rgbBlendState),alpha:Sw(a.alphaBlendState)}}function _b(a,o){return{format:gb(o),blend:L3(a),writeMask:a.channelWriteMask}}function dm(a,o){return o.attachmentsState.map(function(f,m){return _b(f,a[m])})}function H_(a){if(a===rs.NEVER)return"never";if(a===rs.LESS)return"less";if(a===rs.EQUAL)return"equal";if(a===rs.LEQUAL)return"less-equal";if(a===rs.GREATER)return"greater";if(a===rs.NOTEQUAL)return"not-equal";if(a===rs.GEQUAL)return"greater-equal";if(a===rs.ALWAYS)return"always";throw new Error("whoops")}function Oy(a){if(a===Fu.KEEP)return"keep";if(a===Fu.REPLACE)return"replace";if(a===Fu.ZERO)return"zero";if(a===Fu.DECREMENT_CLAMP)return"decrement-clamp";if(a===Fu.DECREMENT_WRAP)return"decrement-wrap";if(a===Fu.INCREMENT_CLAMP)return"increment-clamp";if(a===Fu.INCREMENT_WRAP)return"increment-wrap";if(a===Fu.INVERT)return"invert";throw new Error("whoops")}function d2(a,o){if(!(0,Pp.Z)(a))return{format:gb(a),depthWriteEnabled:!!o.depthWrite,depthCompare:H_(o.depthCompare),depthBias:o.polygonOffset?o.polygonOffsetUnits:0,depthBiasSlopeScale:o.polygonOffset?o.polygonOffsetFactor:0,stencilFront:{compare:H_(o.stencilFront.compare),passOp:Oy(o.stencilFront.passOp),failOp:Oy(o.stencilFront.failOp),depthFailOp:Oy(o.stencilFront.depthFailOp)},stencilBack:{compare:H_(o.stencilBack.compare),passOp:Oy(o.stencilBack.passOp),failOp:Oy(o.stencilBack.failOp),depthFailOp:Oy(o.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function N3(a){if(a!==null){if(a===Qn.U16_R)return"uint16";if(a===Qn.U32_R)return"uint32";throw new Error("whoops")}}function ww(a){if(a===mg.VERTEX)return"vertex";if(a===mg.INSTANCE)return"instance";throw new Error("whoops")}function Tw(a){if(a===Qn.U8_R)return"uint8x2";if(a===Qn.U8_RG)return"uint8x2";if(a===Qn.U8_RGB)return"uint8x4";if(a===Qn.U8_RGBA)return"uint8x4";if(a===Qn.U8_RG_NORM)return"unorm8x2";if(a===Qn.U8_RGBA_NORM)return"unorm8x4";if(a===Qn.S8_RGB_NORM)return"snorm8x4";if(a===Qn.S8_RGBA_NORM)return"snorm8x4";if(a===Qn.U16_RG_NORM)return"unorm16x2";if(a===Qn.U16_RGBA_NORM)return"unorm16x4";if(a===Qn.S16_RG_NORM)return"snorm16x2";if(a===Qn.S16_RGBA_NORM)return"snorm16x4";if(a===Qn.S16_RG)return"uint16x2";if(a===Qn.F16_RG)return"float16x2";if(a===Qn.F16_RGBA)return"float16x4";if(a===Qn.F32_R)return"float32";if(a===Qn.F32_RG)return"float32x2";if(a===Qn.F32_RGB)return"float32x3";if(a===Qn.F32_RGBA)return"float32x4";throw"whoops"}function F3(a){var o=j0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_SNORM:case ri.BC4_UNORM:case ri.BC5_SNORM:case ri.BC5_UNORM:return!0;default:return!1}}function B3(a){var o=j0(a);switch(o){case ri.BC1:case ri.BC2:case ri.BC3:case ri.BC4_SNORM:case ri.BC4_UNORM:case ri.BC5_SNORM:case ri.BC5_UNORM:return 4;default:return 1}}function Aw(a,o,f,m){switch(f===void 0&&(f=!1),a){case Qn.S8_R:case Qn.S8_R_NORM:case Qn.S8_RG_NORM:case Qn.S8_RGB_NORM:case Qn.S8_RGBA_NORM:{var w=o instanceof ArrayBuffer?new Int8Array(o):new Int8Array(o);return m&&w.set(new Int8Array(m)),w}case Qn.U8_R:case Qn.U8_R_NORM:case Qn.U8_RG:case Qn.U8_RG_NORM:case Qn.U8_RGB:case Qn.U8_RGB_NORM:case Qn.U8_RGB_SRGB:case Qn.U8_RGBA:case Qn.U8_RGBA_NORM:case Qn.U8_RGBA_SRGB:{var C=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&C.set(new Uint8Array(m)),C}case Qn.S16_R:case Qn.S16_RG:case Qn.S16_RG_NORM:case Qn.S16_RGB_NORM:case Qn.S16_RGBA:case Qn.S16_RGBA_NORM:{var D=o instanceof ArrayBuffer?new Int16Array(o):new Int16Array(f?o/2:o);return m&&D.set(new Int16Array(m)),D}case Qn.U16_R:case Qn.U16_RGB:case Qn.U16_RGBA_5551:case Qn.U16_RGBA_NORM:case Qn.U16_RG_NORM:case Qn.U16_R_NORM:{var B=o instanceof ArrayBuffer?new Uint16Array(o):new Uint16Array(f?o/2:o);return m&&B.set(new Uint16Array(m)),B}case Qn.S32_R:{var V=o instanceof ArrayBuffer?new Int32Array(o):new Int32Array(f?o/4:o);return m&&V.set(new Int32Array(m)),V}case Qn.U32_R:case Qn.U32_RG:{var ie=o instanceof ArrayBuffer?new Uint32Array(o):new Uint32Array(f?o/4:o);return m&&ie.set(new Uint32Array(m)),ie}case Qn.F32_R:case Qn.F32_RG:case Qn.F32_RGB:case Qn.F32_RGBA:{var Ee=o instanceof ArrayBuffer?new Float32Array(o):new Float32Array(f?o/4:o);return m&&Ee.set(new Float32Array(m)),Ee}}var Ce=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&Ce.set(new Uint8Array(m)),Ce}function k3(a){var o=(a&32768)>>15,f=(a&31744)>>10,m=a&1023;return f===0?(o?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):f==31?m?NaN:(o?-1:1)*(1/0):(o?-1:1)*Math.pow(2,f-15)*(1+m/Math.pow(2,10))}function Cw(a){switch(a){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var o0=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C}return o.prototype.destroy=function(){},o}(qS),z3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Bs.Bindings;var ie=C.pipeline;Ha(!!ie);var Ee=C.uniformBufferBindings,Ce=C.storageBufferBindings,He=C.samplerBindings,Ot=C.storageTextureBindings;V.numUniformBuffers=(Ee==null?void 0:Ee.length)||0;var nn=[[],[],[],[]],Bn=0;if(Ee&&Ee.length)for(var sr=0;sr<Ee.length;sr++){var xr=C.uniformBufferBindings[sr],fr=xr.binding,Yr=xr.size,Pi=xr.offset,Co=xr.buffer,ao={buffer:Cy(Co),offset:Pi!=null?Pi:0,size:Yr};nn[0].push({binding:fr!=null?fr:Bn++,resource:ao})}if(He&&He.length){Bn=0;for(var sr=0;sr<He.length;sr++){var Zr=(0,wo.pi)((0,wo.pi)({},He[sr]),Ey),fr=C.samplerBindings[sr],Qi=fr.texture!==null?fr.texture:V.device.getFallbackTexture(Zr);Zr.dimension=Qi.dimension,Zr.formatKind=r2(Qi.format);var Ma=Qi.gpuTextureView;if(nn[1].push({binding:(D=fr.textureBinding)!==null&&D!==void 0?D:Bn++,resource:Ma}),fr.samplerBinding!==-1){var Ms=fr.sampler!==null?fr.sampler:V.device.getFallbackSampler(Zr),na=C3(Ms);nn[1].push({binding:(B=fr.samplerBinding)!==null&&B!==void 0?B:Bn++,resource:na})}}}if(Ce&&Ce.length){Bn=0;for(var sr=0;sr<Ce.length;sr++){var Qa=C.storageBufferBindings[sr],fr=Qa.binding,Yr=Qa.size,Pi=Qa.offset,Co=Qa.buffer,ao={buffer:Cy(Co),offset:Pi!=null?Pi:0,size:Yr};nn[2].push({binding:fr!=null?fr:Bn++,resource:ao})}}if(Ot&&Ot.length){Bn=0;for(var sr=0;sr<Ot.length;sr++){var Ws=C.storageTextureBindings[sr],fr=Ws.binding,Qi=Ws.texture,Ma=Qi.gpuTextureView;nn[3].push({binding:fr!=null?fr:Bn++,resource:Ma})}}var lh=nn.findLastIndex(function(ku){return!!ku.length});return V.gpuBindGroup=nn.map(function(ku,vs){return vs<=lh&&V.device.device.createBindGroup({layout:ie.getBindGroupLayout(vs),entries:ku})}),V}return o}(o0),U3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.Buffer;var B=C.usage,V=C.viewOrSize,ie=!!(B&Il.MAP_READ);D.usage=T3(B),ie&&(D.usage=Il.MAP_READ|Il.COPY_DST);var Ee=!(0,vg.Z)(V);if(D.view=(0,vg.Z)(V)?null:V,D.size=(0,vg.Z)(V)?L_(V,4):L_(V.byteLength,4),(0,vg.Z)(V))D.gpuBuffer=D.device.device.createBuffer({usage:D.usage,size:D.size,mappedAtCreation:ie?Ee:!1});else{D.gpuBuffer=D.device.device.createBuffer({usage:D.usage,size:D.size,mappedAtCreation:!0});var Ce=V&&V.constructor||Float32Array;new Ce(D.gpuBuffer.getMappedRange()).set(V),D.gpuBuffer.unmap()}return D}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=0);var D=this.gpuBuffer;C=C||m.byteLength,C=Math.min(C,this.size-f);var B=m.byteOffset+w,V=B+C,ie=C+3&-4;if(ie!==C){var Ee=new Uint8Array(m.buffer.slice(B,V));m=new Uint8Array(ie),m.set(Ee),w=0,B=0,V=ie,C=ie}for(var Ce=1024*1024*15,He=0;V-(B+He)>Ce;)this.device.device.queue.writeBuffer(D,f+He,m.buffer,B+He,Ce),He+=Ce;this.device.device.queue.writeBuffer(D,f+He,m.buffer,B+He,C-He)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuBuffer.destroy()},o}(o0),Ow=function(){function a(){this.gpuComputePassEncoder=null}return a.prototype.dispatchWorkgroups=function(o,f,m){this.gpuComputePassEncoder.dispatchWorkgroups(o,f,m)},a.prototype.dispatchWorkgroupsIndirect=function(o,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(o.gpuBuffer,f)},a.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},a.prototype.beginComputePass=function(o){Ha(this.gpuComputePassEncoder===null),this.frameCommandEncoder=o,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},a.prototype.setPipeline=function(o){var f=o,m=yg(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},a.prototype.setBindings=function(o){var f=this,m=o;m.gpuBindGroup.forEach(function(w,C){w&&f.gpuComputePassEncoder.setBindGroup(C,m.gpuBindGroup[C])})},a.prototype.pushDebugGroup=function(o){this.gpuComputePassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuComputePassEncoder.insertDebugMarker(o)},a}(),j3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.ComputePipeline,D.gpuComputePipeline=null,D.descriptor=C;var B=C.program,V=B.computeStage;if(V===null)return D;var ie={layout:"auto",compute:(0,wo.pi)({},V)};return D.gpuComputePipeline=D.device.device.createComputePipeline(ie),D.name!==void 0&&(D.gpuComputePipeline.label=D.name),D}return o.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},o}(o0),pm=function(a){(0,wo.ZT)(o,a);function o(f){var m,w,C,D,B=f.id,V=f.device,ie=f.descriptor,Ee=a.call(this,{id:B,device:V})||this;Ee.type=Bs.InputLayout;var Ce=[];try{for(var He=(0,wo.XA)(ie.vertexBufferDescriptors),Ot=He.next();!Ot.done;Ot=He.next()){var nn=Ot.value,Bn=nn.arrayStride,sr=nn.stepMode,xr=nn.attributes;Ce.push({arrayStride:Bn,stepMode:ww(sr),attributes:[]});try{for(var fr=(C=void 0,(0,wo.XA)(xr)),Yr=fr.next();!Yr.done;Yr=fr.next()){var Pi=Yr.value,Co=Pi.shaderLocation,ao=Pi.format,Zr=Pi.offset;Ce[Ce.length-1].attributes.push({shaderLocation:Co,format:Tw(ao),offset:Zr})}}catch(Qi){C={error:Qi}}finally{try{Yr&&!Yr.done&&(D=fr.return)&&D.call(fr)}finally{if(C)throw C.error}}}}catch(Qi){m={error:Qi}}finally{try{Ot&&!Ot.done&&(w=He.return)&&w.call(He)}finally{if(m)throw m.error}}return Ee.indexFormat=N3(ie.indexBufferFormat),Ee.buffers=Ce,Ee}return o}(o0),G_=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Bs.Program,D.vertexStage=null,D.fragmentStage=null,D.computeStage=null,D.descriptor=C,C.vertex&&(D.vertexStage=D.createShaderStage(C.vertex,"vertex")),C.fragment&&(D.fragmentStage=D.createShaderStage(C.fragment,"fragment")),C.compute&&(D.computeStage=D.createShaderStage(C.compute,"compute")),D}return o.prototype.setUniformsLegacy=function(f){},o.prototype.createShaderStage=function(f,m){var w,C,D=f.glsl,B=f.wgsl,V=f.entryPoint,ie=f.postprocess,Ee=!1,Ce=B;if(!Ce)try{Ce=this.device.glsl_compile(D,m,Ee)}catch(xr){throw console.error(xr,D),new Error("whoops")}var He=function(xr){if(!Ce.includes(xr))return"continue";Ce=Ce.replace("var T_".concat(xr,": texture_2d<f32>;"),"var T_".concat(xr,": texture_depth_2d;")),Ce=Ce.replace(new RegExp("textureSample\\(T_".concat(xr,"(.*)\\);$"),"gm"),function(fr,Yr){return"vec4<f32>(textureSample(T_".concat(xr).concat(Yr,"), 0.0, 0.0, 0.0);")})};try{for(var Ot=(0,wo.XA)(["u_TextureFramebufferDepth"]),nn=Ot.next();!nn.done;nn=Ot.next()){var Bn=nn.value;He(Bn)}}catch(xr){w={error:xr}}finally{try{nn&&!nn.done&&(C=Ot.return)&&C.call(Ot)}finally{if(w)throw w.error}}ie&&(Ce=ie(Ce));var sr=this.device.device.createShaderModule({code:Ce});return{module:sr,entryPoint:V||"main"}},o}(o0),Mw=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Bs.QueryPool;var B=C.elemCount,V=C.type;return D.querySet=D.device.device.createQuerySet({type:M3(V),count:B}),D.resolveBuffer=D.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),D.cpuBuffer=D.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),D.results=null,D}return o.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},o}(o0),Rw=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Bs.Readback,C}return o.prototype.readTexture=function(f,m,w,C,D,B,V,ie){return V===void 0&&(V=0),(0,wo.mG)(this,void 0,void 0,function(){var Ee,Ce,He,Ot,nn,Bn,sr,xr;return(0,wo.Jh)(this,function(fr){return Ee=f,Ce=0,He=Cw(Ee.gpuTextureformat),Ot=Math.ceil(C/He.width)*He.length,nn=Math.ceil(Ot/256)*256,Bn=nn*D,sr=this.device.createBuffer({usage:Il.STORAGE|Il.MAP_READ|Il.COPY_DST,hint:i0.STATIC,viewOrSize:Bn}),xr=this.device.device.createCommandEncoder(),xr.copyTextureToBuffer({texture:Ee.gpuTexture,mipLevel:0,origin:{x:m,y:w,z:Math.max(Ce,0)}},{buffer:sr.gpuBuffer,offset:0,bytesPerRow:nn},{width:C,height:D,depthOrArrayLayers:1}),this.device.device.queue.submit([xr.finish()]),[2,this.readBuffer(sr,0,B.byteLength===Bn?B:null,V,Bn,Ee.format,!0,!1,Ot,nn,D)]})})},o.prototype.readTextureSync=function(f,m,w,C,D,B,V,ie){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},o.prototype.readBuffer=function(f,m,w,C,D,B,V,ie,Ee,Ce,He){var Ot=this;m===void 0&&(m=0),w===void 0&&(w=null),D===void 0&&(D=0),B===void 0&&(B=Qn.U8_RGB),V===void 0&&(V=!1),Ee===void 0&&(Ee=0),Ce===void 0&&(Ce=0),He===void 0&&(He=0);var nn=f,Bn=D||nn.size,sr=w||nn.view,xr=sr&&sr.constructor&&sr.constructor.BYTES_PER_ELEMENT||QS(B),fr=nn;if(!(nn.usage&Il.MAP_READ&&nn.usage&Il.COPY_DST)){var Yr=this.device.device.createCommandEncoder();fr=this.device.createBuffer({usage:Il.STORAGE|Il.MAP_READ|Il.COPY_DST,hint:i0.STATIC,viewOrSize:Bn}),Yr.copyBufferToBuffer(nn.gpuBuffer,m,fr.gpuBuffer,0,Bn),this.device.device.queue.submit([Yr.finish()])}return new Promise(function(Pi,Co){fr.gpuBuffer.mapAsync(f2.READ,m,Bn).then(function(){var ao=fr.gpuBuffer.getMappedRange(m,Bn),Zr=sr;if(V)Zr===null?Zr=Aw(B,Bn,!0,ao):Zr=Aw(B,Zr.buffer,void 0,ao);else if(Zr===null)switch(xr){case 1:Zr=new Uint8Array(Bn),Zr.set(new Uint8Array(ao));break;case 2:Zr=Ot.getHalfFloatAsFloatRGBAArrayBuffer(Bn/2,ao);break;case 4:Zr=new Float32Array(Bn/4),Zr.set(new Float32Array(ao));break}else switch(xr){case 1:Zr=new Uint8Array(Zr.buffer),Zr.set(new Uint8Array(ao));break;case 2:Zr=Ot.getHalfFloatAsFloatRGBAArrayBuffer(Bn/2,ao,sr);break;case 4:var Qi=sr&&sr.constructor||Float32Array;Zr=new Qi(Zr.buffer),Zr.set(new Qi(ao));break}if(Ee!==Ce){xr===1&&!V&&(Ee*=2,Ce*=2);for(var Ma=new Uint8Array(Zr.buffer),Ms=Ee,na=0,Qa=1;Qa<He;++Qa){na=Qa*Ce;for(var Ws=0;Ws<Ee;++Ws)Ma[Ms++]=Ma[na++]}xr!==0&&!V?Zr=new Float32Array(Ma.buffer,0,Ms/4):Zr=new Uint8Array(Ma.buffer,0,Ms)}fr.gpuBuffer.unmap(),Pi(Zr)},function(ao){return Co(ao)})})},o.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,m,w){w||(w=new Float32Array(f));for(var C=new Uint16Array(m);f--;)w[f]=k3(C[f]);return w},o}(o0),p2=function(){function a(o){this.device=o,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return a.prototype.getEncoder=function(){var o;return((o=this.renderBundle)===null||o===void 0?void 0:o.renderBundleEncoder)||this.gpuRenderPassEncoder},a.prototype.getTextureView=function(o,f){return Ha(f<o.mipLevelCount),o.mipLevelCount===1?o.gpuTextureView:o.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},a.prototype.setRenderPassDescriptor=function(o){var f,m,w,C,D,B;this.descriptor=o,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var V=o.colorAttachment.length;this.gfxColorAttachment.length=V,this.gfxColorResolveTo.length=V;for(var ie=0;ie<o.colorAttachment.length;ie++){var Ee=o.colorAttachment[ie],Ce=o.colorResolveTo[ie];if(Ee===null&&Ce!==null&&(Ee=Ce,Ce=null),this.gfxColorAttachment[ie]=Ee,this.gfxColorResolveTo[ie]=Ce,this.gfxColorAttachmentLevel[ie]=((f=o.colorAttachmentLevel)===null||f===void 0?void 0:f[ie])||0,this.gfxColorResolveToLevel[ie]=((m=o.colorResolveToLevel)===null||m===void 0?void 0:m[ie])||0,Ee!==null){this.gpuColorAttachments[ie]===void 0&&(this.gpuColorAttachments[ie]={});var He=this.gpuColorAttachments[ie];He.view=this.getTextureView(Ee,((w=this.gfxColorAttachmentLevel)===null||w===void 0?void 0:w[ie])||0);var Ot=(D=(C=o.colorClearColor)===null||C===void 0?void 0:C[ie])!==null&&D!==void 0?D:"load";Ot==="load"?He.loadOp="load":(He.loadOp="clear",He.clearValue=Ot),He.storeOp=!((B=o.colorStore)===null||B===void 0)&&B[ie]?"store":"discard",He.resolveTarget=void 0,Ce!==null&&(Ee.sampleCount>1?He.resolveTarget=this.getTextureView(Ce,this.gfxColorResolveToLevel[ie]):He.storeOp="store")}else{this.gpuColorAttachments.length=ie,this.gfxColorAttachment.length=ie,this.gfxColorResolveTo.length=ie;break}}if(this.gfxDepthStencilAttachment=o.depthStencilAttachment,this.gfxDepthStencilResolveTo=o.depthStencilResolveTo,o.depthStencilAttachment){var nn=o.depthStencilAttachment,He=this.gpuDepthStencilAttachment;He.view=nn.gpuTextureView;var Bn=!!(by(nn.format)&vo.Depth);Bn?(o.depthClearValue==="load"?He.depthLoadOp="load":(He.depthLoadOp="clear",He.depthClearValue=o.depthClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?He.depthStoreOp="store":He.depthStoreOp="discard"):(He.depthLoadOp=void 0,He.depthStoreOp=void 0);var sr=!!(by(nn.format)&vo.Stencil);sr?(o.stencilClearValue==="load"?He.stencilLoadOp="load":(He.stencilLoadOp="clear",He.stencilClearValue=o.stencilClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?He.stencilStoreOp="store":He.stencilStoreOp="discard"):(He.stencilLoadOp=void 0,He.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,Pp.Z)(o.occlusionQueryPool)?void 0:O3(o.occlusionQueryPool)},a.prototype.beginRenderPass=function(o,f){Ha(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=o,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},a.prototype.flipY=function(o,f){var m=this.device.swapChainHeight;return m-o-f},a.prototype.setViewport=function(o,f,m,w,C,D){C===void 0&&(C=0),D===void 0&&(D=1),this.gpuRenderPassEncoder.setViewport(o,this.flipY(f,w),m,w,C,D)},a.prototype.setScissorRect=function(o,f,m,w){this.gpuRenderPassEncoder.setScissorRect(o,this.flipY(f,w),m,w)},a.prototype.setPipeline=function(o){var f=o,m=yg(f.gpuRenderPipeline);this.getEncoder().setPipeline(m)},a.prototype.setVertexInput=function(o,f,m){if(o!==null){var w=this.getEncoder(),C=o;m!==null&&w.setIndexBuffer(Cy(m.buffer),yg(C.indexFormat),m.offset);for(var D=0;D<f.length;D++){var B=f[D];B!==null&&w.setVertexBuffer(D,Cy(B.buffer),B.offset)}}},a.prototype.setBindings=function(o){var f=o,m=this.getEncoder();f.gpuBindGroup.forEach(function(w,C){w&&m.setBindGroup(C,f.gpuBindGroup[C])})},a.prototype.setStencilReference=function(o){this.gpuRenderPassEncoder.setStencilReference(o)},a.prototype.draw=function(o,f,m,w){this.getEncoder().draw(o,f,m,w)},a.prototype.drawIndexed=function(o,f,m,w,C){this.getEncoder().drawIndexed(o,f,m,w,C)},a.prototype.drawIndirect=function(o,f){this.getEncoder().drawIndirect(Cy(o),f)},a.prototype.drawIndexedIndirect=function(o,f){this.getEncoder().drawIndexedIndirect(Cy(o),f)},a.prototype.beginOcclusionQuery=function(o){this.gpuRenderPassEncoder.beginOcclusionQuery(o)},a.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},a.prototype.pushDebugGroup=function(o){this.gpuRenderPassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuRenderPassEncoder.insertDebugMarker(o)},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle.finish()},a.prototype.executeBundles=function(o){this.gpuRenderPassEncoder.executeBundles(o.map(function(f){return f.renderBundle}))},a.prototype.finish=function(){var o;(o=this.gpuRenderPassEncoder)===null||o===void 0||o.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var m=this.gfxColorAttachment[f],w=this.gfxColorResolveTo[f];m!==null&&w!==null&&m.sampleCount===1&&this.copyAttachment(w,this.gfxColorAttachmentLevel[f],m,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},a.prototype.copyAttachment=function(o,f,m,w){Ha(m.sampleCount===1);var C={texture:m.gpuTexture,mipLevel:w},D={texture:o.gpuTexture,mipLevel:f};Ha(m.width>>>w===o.width>>>f),Ha(m.height>>>w===o.height>>>f),Ha(!!(m.usage&Yc.COPY_SRC)),Ha(!!(o.usage&Yc.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(C,D,[o.width,o.height,1])},a}(),v2=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Bs.RenderPipeline,D.isCreatingAsync=!1,D.gpuRenderPipeline=null,D.descriptor=C,D.device.createRenderPipelineInternal(D,!1),D}return o.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},o}(o0),V3=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Bs.Sampler;var ie=C.lodMinClamp,Ee=C.mipmapFilter===Rc.NO_MIP?C.lodMinClamp:C.lodMaxClamp,Ce=(D=C.maxAnisotropy)!==null&&D!==void 0?D:1;return Ce>1&&Ha(C.minFilter===ps.BILINEAR&&C.magFilter===ps.BILINEAR&&C.mipmapFilter===Rc.LINEAR),V.gpuSampler=V.device.device.createSampler({addressModeU:h2(C.addressModeU),addressModeV:h2(C.addressModeV),addressModeW:h2((B=C.addressModeW)!==null&&B!==void 0?B:C.addressModeU),lodMinClamp:ie,lodMaxClamp:Ee,minFilter:xw(C.minFilter),magFilter:xw(C.magFilter),mipmapFilter:A3(C.mipmapFilter),compare:C.compareFunction!==void 0?H_(C.compareFunction):void 0,maxAnisotropy:Ce}),V}return o}(o0),bb=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=f.skipCreate,B=f.sampleCount,V=a.call(this,{id:m,device:w})||this;V.type=Bs.Texture,V.flipY=!1;var ie=C.format,Ee=C.dimension,Ce=C.width,He=C.height,Ot=C.depthOrArrayLayers,nn=C.mipLevelCount,Bn=C.usage,sr=C.pixelStore;return V.flipY=!!(sr!=null&&sr.unpackFlipY),V.device.createTextureShared({format:ie,dimension:Ee!=null?Ee:fs.TEXTURE_2D,width:Ce,height:He,depthOrArrayLayers:Ot!=null?Ot:1,mipLevelCount:nn!=null?nn:1,usage:Bn,sampleCount:B!=null?B:1},V,D),V}return o.prototype.textureFromImageBitmapOrCanvas=function(f,m,w){for(var C=m[0].width,D=m[0].height,B={size:{width:C,height:D,depthOrArrayLayers:w},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},V=f.createTexture(B),ie=0;ie<m.length;ie++)f.queue.copyExternalImageToTexture({source:m[ie],flipY:this.flipY},{texture:V,origin:[0,0,ie]},[C,D]);return[V,C,D]},o.prototype.isImageBitmapOrCanvases=function(f){var m=f[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},o.prototype.isVideo=function(f){var m=f[0];return m instanceof HTMLVideoElement},o.prototype.setImageData=function(f,m){var w,C=this,D=this.device.device,B,V,ie;if(this.isImageBitmapOrCanvases(f))w=(0,wo.CR)(this.textureFromImageBitmapOrCanvas(D,f,this.depthOrArrayLayers),3),B=w[0],V=w[1],ie=w[2];else if(this.isVideo(f))B=D.importExternalTexture({source:f[0]});else{var Ee=Cw(this.gpuTextureformat),Ce=Math.ceil(this.width/Ee.width)*Ee.length;f.forEach(function(He){D.queue.writeTexture({texture:C.gpuTexture},He,{bytesPerRow:Ce},{width:C.width,height:C.height})})}this.width=V,this.height=ie,B&&(this.gpuTexture=B),this.gpuTextureView=this.gpuTexture.createView({dimension:w3(this.dimension)})},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuTexture.destroy()},o}(o0),e4=function(a){(0,wo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Bs.RenderBundle,C.renderBundleEncoder=C.device.device.createRenderBundleEncoder({colorFormats:[C.device.swapChainFormat]}),C}return o.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},o}(o0),t4=function(){function a(o,f,m,w,C,D){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Yc.RENDER_ATTACHMENT|Yc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=U0.UPPER_LEFT,this.clipSpaceNearZ=xv.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=m,this.canvasContext=w,this.glsl_compile=C,this.WGSLComposer=D,this.fallbackTexture2D=this.createFallbackTexture(fs.TEXTURE_2D,Bu.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(fs.TEXTURE_2D,Bu.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(fs.TEXTURE_2D_ARRAY,Bu.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(fs.TEXTURE_3D,Bu.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(fs.TEXTURE_CUBE_MAP,Bu.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Th.REPEAT,addressModeV:Th.REPEAT,minFilter:ps.POINT,magFilter:ps.POINT,mipmapFilter:Rc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Th.REPEAT,addressModeV:Th.REPEAT,minFilter:ps.POINT,magFilter:ps.POINT,mipmapFilter:Rc.NEAREST,compareFunction:rs.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(B){console.error(B.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return a.prototype.destroy=function(){},a.prototype.configureSwapChain=function(o,f){this.swapChainWidth===o&&this.swapChainHeight===f||(this.swapChainWidth=o,this.swapChainHeight=f)},a.prototype.getOnscreenTexture=function(){var o=this.canvasContext.getCurrentTexture(),f=o.createView(),m=new bb({id:0,device:this,descriptor:{format:Qn.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:fs.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=o,m.gpuTextureView=f,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.canvas},a.prototype.beginFrame=function(){Ha(this.frameCommandEncoderPool.length===0)},a.prototype.endFrame=function(){Ha(this.frameCommandEncoderPool.every(function(o){return o!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(o){return o.finish()})),this.frameCommandEncoderPool=[]},a.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},a.prototype.createBuffer=function(o){return new U3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new bb({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new V3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){var f=new bb({id:this.getNextUniqueId(),device:this,descriptor:(0,wo.pi)((0,wo.pi)({},o),{dimension:fs.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Wf.RENDER_TARGET}),sampleCount:o.sampleCount});return f.depthOrArrayLayers=1,f.type=Bs.RenderTarget,f},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,D=f.depthOrArrayLayers,B=f.sampleCount,V=f.mipLevelCount,ie=f.gpuTexture,Ee=f.gpuTextureView,Ce=f.usage;Ha(!!(Ce&Yc.RENDER_ATTACHMENT));var He=new bb({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:w,height:C,depthOrArrayLayers:D,dimension:fs.TEXTURE_2D,mipLevelCount:V,usage:Ce},skipCreate:!0});return He.depthOrArrayLayers=D,He.sampleCount=B,He.gpuTexture=ie,He.gpuTextureView=Ee,He},a.prototype.createProgram=function(o){var f,m;return!((f=o.vertex)===null||f===void 0)&&f.glsl&&(o.vertex.glsl=um(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((m=o.fragment)===null||m===void 0)&&m.glsl&&(o.fragment.glsl=um(this.queryVendorInfo(),"frag",o.fragment.glsl)),new G_({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createProgramSimple=function(o){return new G_({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTextureShared=function(o,f,m){var w={width:o.width,height:o.height,depthOrArrayLayers:o.depthOrArrayLayers},C=o.mipLevelCount,D=gb(o.format),B=S3(o.dimension),V=E3(o.usage);if(f.gpuTextureformat=D,f.dimension=o.dimension,f.format=o.format,f.width=o.width,f.height=o.height,f.depthOrArrayLayers=o.depthOrArrayLayers,f.mipLevelCount=C,f.usage=V,f.sampleCount=o.sampleCount,!m){var ie=this.device.createTexture({size:w,mipLevelCount:C,format:D,dimension:B,sampleCount:o.sampleCount,usage:V}),Ee=ie.createView();f.gpuTexture=ie,f.gpuTextureView=Ee}},a.prototype.getFallbackSampler=function(o){var f=o.formatKind;return f===Bu.Depth&&o.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},a.prototype.getFallbackTexture=function(o){var f=o.dimension,m=o.formatKind;if(f===fs.TEXTURE_2D)return m===Bu.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===fs.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===fs.TEXTURE_3D)return this.fallbackTexture3D;if(f===fs.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.createFallbackTexture=function(o,f){var m=o===fs.TEXTURE_CUBE_MAP?6:1,w=f===Bu.Float?Qn.U8_RGBA_NORM:Qn.D24;return this.createTexture({dimension:o,format:w,usage:Wf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},a.prototype.createBindings=function(o){return new z3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new pm({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePipeline=function(o){return new j3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new v2({id:this.getNextUniqueId(),device:this,descriptor:(0,wo.pi)({},o)})},a.prototype.createQueryPool=function(o,f){return new Mw({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.createRenderPipelineInternal=function(o,f){var m;if(o.gpuRenderPipeline===null){var w=o.descriptor,C=w.program,D=C.vertexStage,B=C.fragmentStage;if(!(D===null||B===null)){var V=w.megaStateDescriptor||{},ie=V.stencilBack,Ee=V.stencilFront,Ce=(0,wo._T)(V,["stencilBack","stencilFront"]),He=wv(V0);w.megaStateDescriptor=(0,wo.pi)((0,wo.pi)((0,wo.pi)({},He),{stencilBack:(0,wo.pi)((0,wo.pi)({},He.stencilBack),ie),stencilFront:(0,wo.pi)((0,wo.pi)({},He.stencilFront),Ee)}),Ce);var Ot=w.megaStateDescriptor.attachmentsState[0];w.colorAttachmentFormats.forEach(function(Pi,Co){w.megaStateDescriptor.attachmentsState[Co]||(w.megaStateDescriptor.attachmentsState[Co]=o2(void 0,Ot))});var nn=D3((m=w.topology)!==null&&m!==void 0?m:bc.TRIANGLES,w.megaStateDescriptor),Bn=dm(w.colorAttachmentFormats,w.megaStateDescriptor),sr=d2(w.depthStencilAttachmentFormat,w.megaStateDescriptor),xr=void 0;w.inputLayout!==null&&(xr=w.inputLayout.buffers);var fr=w.sampleCount,Yr={layout:"auto",vertex:(0,wo.pi)((0,wo.pi)({},D),{buffers:xr}),primitive:nn,depthStencil:sr,multisample:{count:fr},fragment:(0,wo.pi)((0,wo.pi)({},B),{targets:Bn})};o.gpuRenderPipeline=this.device.createRenderPipeline(Yr)}}},a.prototype.createReadback=function(){return new Rw({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderBundle=function(){return new e4({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderPass=function(o){var f=this.renderPassPool.pop();f===void 0&&(f=new p2(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),f.beginRenderPass(m,o),f},a.prototype.createComputePass=function(){var o=this.computePassPool.pop();o===void 0&&(o=new Ow);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),o.beginComputePass(f),o},a.prototype.submitPass=function(o){var f=o;f instanceof p2?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof Ow&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},a.prototype.copySubTexture2D=function(o,f,m,w,C,D,B){var V=this.device.createCommandEncoder(),ie=o,Ee=w,Ce={texture:Ee.gpuTexture,origin:[C,D,0],mipLevel:0,aspect:"all"},He={texture:ie.gpuTexture,origin:[f,m,0],mipLevel:0,aspect:"all"};Ha(!!(Ee.usage&Yc.COPY_SRC)),Ha(!!(ie.usage&Yc.COPY_DST)),V.copyTextureToTexture(Ce,He,[Ee.width,Ee.height,B||1]),this.device.queue.submit([V.finish()])},a.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},a.prototype.queryTextureFormatSupported=function(o,f,m){if(F3(o)){if(!this.featureTextureCompressionBC)return!1;var w=B3(o);return f%w!==0||m%w!==0?!1:this.featureTextureCompressionBC}switch(o){case Qn.U16_RGBA_NORM:return!1;case Qn.F32_RGBA:return!1}return!0},a.prototype.queryPlatformAvailable=function(){return!0},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){var f=o;return f.descriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Bs.Buffer){var m=o;m.gpuBuffer.label=f}else if(o.type===Bs.Texture){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Bs.RenderTarget){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Bs.Sampler){var m=o;m.gpuSampler.label=f}else if(o.type===Bs.RenderPipeline){var m=o;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=f)}},a.prototype.setResourceLeakCheck=function(o,f){},a.prototype.checkForLeaks=function(){},a.prototype.programPatched=function(o){},a.prototype.pipelineQueryReady=function(o){var f=o;return f.gpuRenderPipeline!==null},a.prototype.pipelineForceReady=function(o){var f=o;this.createRenderPipelineInternal(f,!1)},a}(),n4=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,wo.mG)(this,void 0,void 0,function(){var f,m,w,C,D,B,V,ie;return(0,wo.Jh)(this,function(Ee){switch(Ee.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return f=Ee.sent(),[3,4];case 3:return w=Ee.sent(),console.log(w),[3,4];case 4:return f===null?[2,null]:(C=["depth32float-stencil8","texture-compression-bc","float32-filterable"],D=C.filter(function(Ce){return f.features.has(Ce)}),[4,f.requestDevice({requiredFeatures:D})]);case 5:if(B=Ee.sent(),B&&(V=this.pluginOptions.onContextLost,B.lost.then(function(){V&&V()})),B===null)return[2,null];if(ie=o.getContext("webgpu"),!ie)return[2,null];Ee.label=6;case 6:return Ee.trys.push([6,8,,9]),[4,bw(this.pluginOptions.shaderCompilerPath)];case 7:return Ee.sent(),[3,9];case 8:return Ee.sent(),[3,9];case 9:return[2,new t4(f,B,o,ie,_3,V_&&new V_)]}})})},a}(),r4=Object.defineProperty,i4=Object.defineProperties,o4=Object.getOwnPropertyDescriptors,H3=Object.getOwnPropertySymbols,G3=Object.prototype.hasOwnProperty,W3=Object.prototype.propertyIsEnumerable,Pw=(a,o,f)=>o in a?r4(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,W_=(a,o)=>{for(var f in o||(o={}))G3.call(o,f)&&Pw(a,f,o[f]);if(H3)for(var f of H3(o))W3.call(o,f)&&Pw(a,f,o[f]);return a},Z3=(a,o)=>i4(a,o4(o)),{isPlainObject:X3,isTypedArray:Y3}=Ie.lodashUtil,$3=class{constructor(a,o){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:f,fs:m,attributes:w,uniforms:C,primitive:D,count:B,elements:V,depth:ie,cull:Ee,instances:Ce}=o,He={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:U0.LOWER_LEFT,clipSpaceNearZ:xv.NEGATIVE_ONE,supportMRT:!1},Ot={};this.options=o,C&&(this.uniforms=this.extractUniforms(C),Object.keys(C).forEach(fr=>{Ot[fr]=a.prop(fr)}));const nn={};Object.keys(w).forEach(fr=>{nn[fr]=w[fr].get()});const Bn=(0,re.Vb)(um(He,"frag",m,null,!1)),sr=(0,re.Vb)(um(He,"vert",f,null,!1)),xr={attributes:nn,frag:Bn,uniforms:Ot,vert:sr,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:CO[D===void 0?re.gl.TRIANGLES:D]};Ce&&(xr.instances=Ce),B?xr.count=B:V&&(xr.elements=V.get()),this.initDepthDrawParams({depth:ie},xr),this.initCullDrawParams({cull:Ee},xr),this.drawCommand=a(xr),this.drawParams=xr}updateAttributesAndElements(a,o){const f={};Object.keys(a).forEach(m=>{f[m]=a[m].get()}),this.drawParams.attributes=f,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const o={};Object.keys(a).forEach(f=>{o[f]=a[f].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=W_(W_({},this.uniforms),this.extractUniforms(a))}draw(a,o){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const f=W_(W_({},this.uniforms),this.extractUniforms(a.uniforms||{})),m={};Object.keys(f).forEach(w=>{const C=typeof f[w];C==="boolean"||C==="number"||Array.isArray(f[w])||f[w].BYTES_PER_ELEMENT?m[w]=f[w]:m[w]=f[w].get()}),m.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),m.stencil=this.getStencilDrawParams(a),m.colorMask=this.getColorMaskDrawParams(a,o),this.drawCommand(m)}destroy(){var a,o;(o=(a=this.drawParams)==null?void 0:a.elements)==null||o.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(f=>{f==null||f.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},o){a&&(o.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:OO[a.func||re.gl.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:am[f&&f.srcRGB||re.gl.SRC_ALPHA],srcAlpha:am[f&&f.srcAlpha||re.gl.SRC_ALPHA],dstRGB:am[f&&f.dstRGB||re.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:am[f&&f.dstAlpha||re.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:XS[m&&m.rgb||re.gl.FUNC_ADD],alpha:XS[m&&m.alpha||re.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=-1,func:m={cmp:re.gl.ALWAYS,ref:0,mask:-1},opFront:w={fail:re.gl.KEEP,zfail:re.gl.KEEP,zpass:re.gl.KEEP},opBack:C={fail:re.gl.KEEP,zfail:re.gl.KEEP,zpass:re.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:Z3(W_({},m),{cmp:YS[m.cmp]}),opFront:{fail:_y[w.fail],zfail:_y[w.zfail],zpass:_y[w.zpass]},opBack:{fail:_y[C.fail],zfail:_y[C.zfail],zpass:_y[C.zpass]}}}getColorMaskDrawParams({stencil:a},o){return a!=null&&a.enable&&a.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},o){if(a){const{enable:f,face:m=re.gl.BACK}=a;o.cull={enable:!!f,face:MO[m]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||Y3(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}X3(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(D=>{this.extractUniformsRecursively(D,w[D],f,`${m&&m+"."}${a}[${C}]`)})})}},q3=class{constructor(a,o){this.isDestroy=!1;const{data:f,type:m=re.gl.UNSIGNED_BYTE,width:w,height:C,flipY:D=!1,format:B=re.gl.RGBA,mipmap:V=!1,wrapS:ie=re.gl.CLAMP_TO_EDGE,wrapT:Ee=re.gl.CLAMP_TO_EDGE,aniso:Ce=0,alignment:He=1,premultiplyAlpha:Ot=!1,mag:nn=re.gl.NEAREST,min:Bn=re.gl.NEAREST,colorSpace:sr=re.gl.BROWSER_DEFAULT_WEBGL,x:xr=0,y:fr=0,copy:Yr=!1}=o;this.width=w,this.height=C;const Pi={width:w,height:C,type:e2[m],format:t2[B],wrapS:ZS[ie],wrapT:ZS[Ee],mag:WS[nn],min:WS[Bn],alignment:He,flipY:D,colorSpace:z0[sr],premultiplyAlpha:Ot,aniso:Ce,x:xr,y:fr,copy:Yr};f&&(Pi.data=f),typeof V=="number"?Pi.mipmap=pg[V]:typeof V=="boolean"&&(Pi.mipmap=V),this.texture=a.texture(Pi)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:o}){this.texture.resize(a,o),this.width=a,this.height=o}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},m2=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),K3=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new $3(this.gl,a),this.createAttribute=a=>new AO(this.gl,a),this.createBuffer=a=>new RO(this.gl,a),this.createElements=a=>new $S(this.gl,a),this.createTexture2D=a=>new q3(this.gl,a),this.createFramebuffer=a=>new PO(this.gl,a),this.useFramebuffer=(a,o)=>{this.gl({framebuffer:a?a.get():null})(o)},this.useFramebufferAsync=(a,o)=>m2(this,null,function*(){this.gl({framebuffer:a?a.get():null})(o)}),this.clear=a=>{var o;const{color:f,depth:m,stencil:w,framebuffer:C=null}=a,D={color:f,depth:m,stencil:w};D.framebuffer=C===null?C:C.get(),(o=this.gl)==null||o.clear(D)},this.viewport=({x:a,y:o,width:f,height:m})=>{this.gl._gl.viewport(a,o,f,m),this.width=f,this.height=m,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D={x:f,y:m,width:w,height:C};return o&&(D.framebuffer=o.get()),this.gl.read(D)},this.readPixelsAsync=a=>m2(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,o,f;this.canvas=null,(f=(o=(a=this.gl)==null?void 0:a._gl)==null?void 0:o.getExtension("WEBGL_lose_context"))==null||f.loseContext(),this.gl.destroy(),this.gl=null}}init(a,o,f){return m2(this,null,function*(){this.canvas=a,f?this.gl=f:this.gl=yield new Promise((m,w)=>{HS()({canvas:this.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(C,D)=>{(C||!D)&&w(C),m(D)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},Iw=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:D,divisor:B,shaderLocation:V}=o;this.buffer=f,this.attribute={shaderLocation:V,buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},D&&(this.attribute.size=D)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},xb={[re.gl.FLOAT]:Float32Array,[re.gl.UNSIGNED_BYTE]:Uint8Array,[re.gl.SHORT]:Int16Array,[re.gl.UNSIGNED_SHORT]:Uint16Array,[re.gl.INT]:Int32Array,[re.gl.UNSIGNED_INT]:Uint32Array},Dw={[re.gl.POINTS]:bc.POINTS,[re.gl.LINES]:bc.LINES,[re.gl.LINE_LOOP]:bc.LINES,[re.gl.LINE_STRIP]:bc.LINE_STRIP,[re.gl.TRIANGLES]:bc.TRIANGLES,[re.gl.TRIANGLE_FAN]:bc.TRIANGLES,[re.gl.TRIANGLE_STRIP]:bc.TRIANGLE_STRIP},Q3={1:Qn.F32_R,2:Qn.F32_RG,3:Qn.F32_RGB,4:Qn.F32_RGBA},Lw={[re.gl.STATIC_DRAW]:i0.STATIC,[re.gl.DYNAMIC_DRAW]:i0.DYNAMIC,[re.gl.STREAM_DRAW]:i0.DYNAMIC},Nw={[re.gl.REPEAT]:Th.REPEAT,[re.gl.CLAMP_TO_EDGE]:Th.CLAMP_TO_EDGE,[re.gl.MIRRORED_REPEAT]:Th.MIRRORED_REPEAT},g2={[re.gl.NEVER]:rs.NEVER,[re.gl.ALWAYS]:rs.ALWAYS,[re.gl.LESS]:rs.LESS,[re.gl.LEQUAL]:rs.LEQUAL,[re.gl.GREATER]:rs.GREATER,[re.gl.GEQUAL]:rs.GEQUAL,[re.gl.EQUAL]:rs.EQUAL,[re.gl.NOTEQUAL]:rs.NOTEQUAL},J3={[re.gl.FRONT]:od.FRONT,[re.gl.BACK]:od.BACK},Z0={[re.gl.FUNC_ADD]:ac.ADD,[re.gl.MIN_EXT]:ac.MIN,[re.gl.MAX_EXT]:ac.MAX,[re.gl.FUNC_SUBTRACT]:ac.SUBSTRACT,[re.gl.FUNC_REVERSE_SUBTRACT]:ac.REVERSE_SUBSTRACT},Eb={[re.gl.ZERO]:ls.ZERO,[re.gl.ONE]:ls.ONE,[re.gl.SRC_COLOR]:ls.SRC,[re.gl.ONE_MINUS_SRC_COLOR]:ls.ONE_MINUS_SRC,[re.gl.SRC_ALPHA]:ls.SRC_ALPHA,[re.gl.ONE_MINUS_SRC_ALPHA]:ls.ONE_MINUS_SRC_ALPHA,[re.gl.DST_COLOR]:ls.DST,[re.gl.ONE_MINUS_DST_COLOR]:ls.ONE_MINUS_DST,[re.gl.DST_ALPHA]:ls.DST_ALPHA,[re.gl.ONE_MINUS_DST_ALPHA]:ls.ONE_MINUS_DST_ALPHA,[re.gl.CONSTANT_COLOR]:ls.CONST,[re.gl.ONE_MINUS_CONSTANT_COLOR]:ls.ONE_MINUS_CONSTANT,[re.gl.CONSTANT_ALPHA]:ls.CONST,[re.gl.ONE_MINUS_CONSTANT_ALPHA]:ls.ONE_MINUS_CONSTANT,[re.gl.SRC_ALPHA_SATURATE]:ls.SRC_ALPHA_SATURATE},My={[re.gl.REPLACE]:Fu.REPLACE,[re.gl.KEEP]:Fu.KEEP,[re.gl.ZERO]:Fu.ZERO,[re.gl.INVERT]:Fu.INVERT,[re.gl.INCR]:Fu.INCREMENT_CLAMP,[re.gl.DECR]:Fu.DECREMENT_CLAMP,[re.gl.INCR_WRAP]:Fu.INCREMENT_WRAP,[re.gl.DECR_WRAP]:Fu.DECREMENT_WRAP},Fw={[re.gl.ALWAYS]:rs.ALWAYS,[re.gl.EQUAL]:rs.EQUAL,[re.gl.GEQUAL]:rs.GEQUAL,[re.gl.GREATER]:rs.GREATER,[re.gl.LEQUAL]:rs.LEQUAL,[re.gl.LESS]:rs.LESS,[re.gl.NEVER]:rs.NEVER,[re.gl.NOTEQUAL]:rs.NOTEQUAL},eM={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Jr(a){return Object.prototype.toString.call(a)in eM}function tM(a,o){const f=a.length,m=Math.ceil(f/3),w=f+m,C=new Float32Array(w);for(let D=0;D<w;D+=4)C[D]=a[D/4*3],C[D+1]=a[D/4*3+1],C[D+2]=a[D/4*3+2],C[D+3]=o;return C}var a4=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w,isUBO:C,label:D}=o;let B;Jr(f)?B=f:B=new xb[this.type||re.gl.FLOAT](f),this.type=w,this.size=B.byteLength,this.buffer=a.createBuffer({viewOrSize:B,usage:C?Il.UNIFORM:Il.VERTEX,hint:Lw[m||re.gl.STATIC_DRAW]}),D&&a.setResourceName(this.buffer,D)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){let f;Jr(a)?f=a:f=new xb[this.type||re.gl.FLOAT](a),this.buffer.setSubData(o,new Uint8Array(f.buffer))}};function rl(a,o=0){return a+=o,a+=a<<10,a+=a>>>6,a>>>0}function y2(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function _2(){return 0}var Bw=class{constructor(){this.keys=[],this.values=[]}},vm=class{constructor(a,o){this.keyEqualFunc=a,this.keyHashFunc=o,this.buckets=new Map}findBucketIndex(a,o){for(let f=0;f<a.keys.length;f++)if(this.keyEqualFunc(o,a.keys[f]))return f;return-1}findBucket(a){const o=this.keyHashFunc(a);return this.buckets.get(o)}get(a){const o=this.findBucket(a);if(o===void 0)return null;const f=this.findBucketIndex(o,a);return f<0?null:o.values[f]}add(a,o){const f=this.keyHashFunc(a);this.buckets.get(f)===void 0&&this.buckets.set(f,new Bw);const m=this.buckets.get(f);m.keys.push(a),m.values.push(o)}delete(a){const o=this.findBucket(a);if(o===void 0)return;const f=this.findBucketIndex(o,a);f!==-1&&(o.keys.splice(f,1),o.values.splice(f,1))}clear(){this.buckets.clear()}size(){let a=0;for(const o of this.buckets.values())a+=o.values.length;return a}*values(){for(const a of this.buckets.values())for(let o=a.values.length-1;o>=0;o--)yield a.values[o]}};function Mu(a,o){return a=rl(a,o.blendMode),a=rl(a,o.blendSrcFactor),a=rl(a,o.blendDstFactor),a}function Sb(a,o){return a=Mu(a,o.rgbBlendState),a=Mu(a,o.alphaBlendState),a=rl(a,o.channelWriteMask),a}function kw(a,o){return a=rl(a,o.r<<24|o.g<<16|o.b<<8|o.a),a}function s4(a,o){var f,m,w,C,D,B,V,ie;for(let Ee=0;Ee<o.attachmentsState.length;Ee++)a=Sb(a,o.attachmentsState[Ee]);return a=kw(a,o.blendConstant||q1),a=rl(a,o.depthCompare),a=rl(a,o.depthWrite?1:0),a=rl(a,(f=o.stencilFront)==null?void 0:f.compare),a=rl(a,(m=o.stencilFront)==null?void 0:m.passOp),a=rl(a,(w=o.stencilFront)==null?void 0:w.failOp),a=rl(a,(C=o.stencilFront)==null?void 0:C.depthFailOp),a=rl(a,(D=o.stencilBack)==null?void 0:D.compare),a=rl(a,(B=o.stencilBack)==null?void 0:B.passOp),a=rl(a,(V=o.stencilBack)==null?void 0:V.failOp),a=rl(a,(ie=o.stencilBack)==null?void 0:ie.depthFailOp),a=rl(a,o.stencilWrite?1:0),a=rl(a,o.cullMode),a=rl(a,o.frontFace?1:0),a=rl(a,o.polygonOffset?1:0),a}function l4(a){let o=0;o=rl(o,a.program.id),a.inputLayout!==null&&(o=rl(o,a.inputLayout.id)),o=s4(o,a.megaStateDescriptor);for(let f=0;f<a.colorAttachmentFormats.length;f++)o=rl(o,a.colorAttachmentFormats[f]||0);return o=rl(o,a.depthStencilAttachmentFormat||0),y2(o)}function b2(a){let o=0;if(a.samplerBindings)for(let f=0;f<a.samplerBindings.length;f++){const m=a.samplerBindings[f];m!==null&&m.texture!==null&&(o=rl(o,m.texture.id))}if(a.uniformBufferBindings)for(let f=0;f<a.uniformBufferBindings.length;f++){const m=a.uniformBufferBindings[f];m!==null&&m.buffer!==null&&(o=rl(o,m.buffer.id),o=rl(o,m.binding),o=rl(o,m.offset),o=rl(o,m.size))}if(a.storageBufferBindings)for(let f=0;f<a.storageBufferBindings.length;f++){const m=a.storageBufferBindings[f];m!==null&&m.buffer!==null&&(o=rl(o,m.buffer.id),o=rl(o,m.binding),o=rl(o,m.offset),o=rl(o,m.size))}if(a.storageTextureBindings)for(let f=0;f<a.storageTextureBindings.length;f++){const m=a.storageTextureBindings[f];m!==null&&m.texture!==null&&(o=rl(o,m.texture.id),o=rl(o,m.binding))}return y2(o)}function x2(a,o){var f,m,w,C;return((f=a.vertex)==null?void 0:f.glsl)===((m=o.vertex)==null?void 0:m.glsl)&&((w=a.fragment)==null?void 0:w.glsl)===((C=o.fragment)==null?void 0:C.glsl)}function u4(a){var o,f;return{vertex:{glsl:(o=a.vertex)==null?void 0:o.glsl},fragment:{glsl:(f=a.fragment)==null?void 0:f.glsl}}}var c4=class{constructor(a){this.device=a,this.bindingsCache=new vm(zO,b2),this.renderPipelinesCache=new vm(ld,l4),this.inputLayoutsCache=new vm(HO,_2),this.programCache=new vm(x2,_2)}createBindings(a){var o;let f=this.bindingsCache.get(a);if(f===null){const m=WO(a);m.uniformBufferBindings=(o=m.uniformBufferBindings)==null?void 0:o.filter(({size:w})=>w&&w>0),f=this.device.createBindings(m),this.bindingsCache.add(m,f)}return f}createRenderPipeline(a){let o=this.renderPipelinesCache.get(a);if(o===null){const f=cw(a);f.colorAttachmentFormats=f.colorAttachmentFormats.filter(m=>m),o=this.device.createRenderPipeline(f),this.renderPipelinesCache.add(f,o)}return o}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(f=>!!f);let o=this.inputLayoutsCache.get(a);if(o===null){const f=XO(a);o=this.device.createInputLayout(f),this.inputLayoutsCache.add(f,o)}return o}createProgram(a){let o=this.programCache.get(a);if(o===null){const f=u4(a);o=this.device.createProgram(a),this.programCache.add(f,o)}return o}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},zw=class{constructor(a,o){const{data:f,type:m,count:w=0}=o;let C;Jr(f)?C=f:C=new xb[this.type||re.gl.UNSIGNED_INT](f),this.type=m,this.count=w,this.indexBuffer=a.createBuffer({viewOrSize:C,usage:Il.INDEX})}get(){return this.indexBuffer}subData({data:a}){let o;Jr(a)?o=a:o=new xb[this.type||re.gl.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(o.buffer))}destroy(){this.indexBuffer.destroy()}};function Eg(a){return!!(a&&a.texture)}var E2=class{constructor(a,o){this.device=a,this.options=o,this.isDestroy=!1;const{wrapS:f=re.gl.CLAMP_TO_EDGE,wrapT:m=re.gl.CLAMP_TO_EDGE,aniso:w,mag:C=re.gl.NEAREST,min:D=re.gl.NEAREST}=o;this.createTexture(o),this.sampler=a.createSampler({addressModeU:Nw[f],addressModeV:Nw[m],minFilter:D===re.gl.NEAREST?ps.POINT:ps.BILINEAR,magFilter:C===re.gl.NEAREST?ps.POINT:ps.BILINEAR,mipmapFilter:Rc.NO_MIP,maxAnisotropy:w})}createTexture(a){const{type:o=re.gl.UNSIGNED_BYTE,width:f,height:m,flipY:w=!1,format:C=re.gl.RGBA,alignment:D=1,usage:B=re.v2.SAMPLED,unorm:V=!1,label:ie}=a;let{data:Ee}=a;this.width=f,this.height=m;let Ce=Qn.U8_RGBA_RT;if(o===re.gl.UNSIGNED_BYTE&&C===re.gl.RGBA)Ce=V?Qn.U8_RGBA_NORM:Qn.U8_RGBA_RT;else if(o===re.gl.UNSIGNED_BYTE&&C===re.gl.LUMINANCE)Ce=Qn.U8_LUMINANCE;else if(o===re.gl.FLOAT&&C===re.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Ee&&(Ee=tM(Ee,0)),Ce=Qn.F32_RGBA):Ce=Qn.F32_RGB;else if(o===re.gl.FLOAT&&C===re.gl.RGBA)Ce=Qn.F32_RGBA;else if(o===re.gl.FLOAT&&C===re.gl.RED)Ce=Qn.F32_R;else throw new Error(`create texture error, type: ${o}, format: ${C}`);this.texture=this.device.createTexture({format:Ce,width:f,height:m,usage:B===re.v2.SAMPLED?Wf.SAMPLED:Wf.RENDER_TARGET,pixelStore:{unpackFlipY:w,packAlignment:D},mipLevelCount:1}),ie&&this.device.setResourceName(this.texture,ie),Ee&&this.texture.setImageData([Ee])}get(){return this.texture}update(a){const{data:o}=a;this.texture.setImageData([o])}bind(){}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&this.destroy(),this.options.width=a,this.options.height=o,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},Uw=class{constructor(a,o){this.device=a,this.options=o,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:o,height:f,color:m}=this.options;m&&(Eg(m)?(a&&m.resize({width:o,height:f}),this.colorTexture=m.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=m.width,this.height=m.height):o&&f&&(this.colorTexture=this.device.createTexture({format:Qn.U8_RGBA_RT,usage:Wf.RENDER_TARGET,width:o,height:f}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=f))}createDepthRenderTarget(a=!1){const{width:o,height:f,depth:m}=this.options;m&&(Eg(m)?(a&&m.resize({width:o,height:f}),this.depthTexture=m.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=m.width,this.height=m.height):o&&f&&(this.depthTexture=this.device.createTexture({format:Qn.D24_S8,usage:Wf.RENDER_TARGET,width:o,height:f}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=f))}get(){return this.colorRenderTarget}destroy(){var a,o;(a=this.colorRenderTarget)==null||a.destroy(),(o=this.depthRenderTarget)==null||o.destroy()}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=o,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},jw=Object.defineProperty,nM=Object.defineProperties,Sg=Object.getOwnPropertyDescriptors,wb=Object.getOwnPropertySymbols,rM=Object.prototype.hasOwnProperty,S2=Object.prototype.propertyIsEnumerable,wg=(a,o,f)=>o in a?jw(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Mv=(a,o)=>{for(var f in o||(o={}))rM.call(o,f)&&wg(a,f,o[f]);if(wb)for(var f of wb(o))S2.call(o,f)&&wg(a,f,o[f]);return a},su=(a,o)=>nM(a,Sg(o)),{isPlainObject:f4,isTypedArray:iM}=Ie.lodashUtil,oM=class{constructor(a,o,f){this.device=a,this.options=o,this.service=f,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:m,fs:w,attributes:C,uniforms:D,count:B,elements:V,diagnosticDerivativeUniformityEnabled:ie}=o;this.options=o;const Ee=ie?"":this.service.viewportOrigin===U0.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=f.renderCache.createProgram({vertex:{glsl:m},fragment:{glsl:w,postprocess:nn=>Ee+nn}}),D&&(this.uniforms=this.extractUniforms(D));const Ce=[];let He=0;Object.keys(C).forEach(nn=>{const Bn=C[nn],sr=Bn.get();this.vertexBuffers.push(sr.get());const{offset:xr=0,stride:fr=0,size:Yr=1,divisor:Pi=0,shaderLocation:Co=0}=Bn.attribute;Ce.push({arrayStride:fr||Yr*4,stepMode:mg.VERTEX,attributes:[{format:Q3[Yr],shaderLocation:Co,offset:xr,divisor:Pi}]}),He=sr.size/Yr}),B||(this.options.count=He),V&&(this.indexBuffer=V.get());const Ot=a.createInputLayout({vertexBufferDescriptors:Ce,indexBufferFormat:V?Qn.U32_R:null,program:this.program});this.inputLayout=Ot,this.pipeline=this.createPipeline(o)}createPipeline(a,o){const{primitive:f=re.gl.TRIANGLES,depth:m,cull:w,blend:C,stencil:D}=a,B=this.initDepthDrawParams({depth:m}),V=!!(B&&B.enable),ie=this.initCullDrawParams({cull:w}),Ee=!!(ie&&ie.enable),Ce=this.getBlendDrawParams({blend:C}),He=!!(Ce&&Ce.enable),Ot=this.getStencilDrawParams({stencil:D}),nn=!!(Ot&&Ot.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:Dw[f],colorAttachmentFormats:[Qn.U8_RGBA_RT],depthStencilAttachmentFormat:Qn.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:df.ALL,rgbBlendState:{blendMode:ac.ADD,blendSrcFactor:ls.ONE,blendDstFactor:ls.ZERO},alphaBlendState:{blendMode:ac.ADD,blendSrcFactor:ls.ONE,blendDstFactor:ls.ZERO}}:{channelWriteMask:nn&&Ot.opFront.zpass===Fu.REPLACE?df.NONE:df.ALL,rgbBlendState:{blendMode:He&&Ce.equation.rgb||ac.ADD,blendSrcFactor:He&&Ce.func.srcRGB||ls.SRC_ALPHA,blendDstFactor:He&&Ce.func.dstRGB||ls.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:He&&Ce.equation.alpha||ac.ADD,blendSrcFactor:He&&Ce.func.srcAlpha||ls.ONE,blendDstFactor:He&&Ce.func.dstAlpha||ls.ONE}}],blendConstant:He?q1:void 0,depthWrite:V,depthCompare:V&&B.func||rs.LESS,cullMode:Ee&&ie.face||od.NONE,stencilWrite:nn,stencilFront:{compare:nn?Ot.func.cmp:rs.ALWAYS,passOp:Ot.opFront.zpass,failOp:Ot.opFront.fail,depthFailOp:Ot.opFront.zfail,mask:Ot.opFront.mask},stencilBack:{compare:nn?Ot.func.cmp:rs.ALWAYS,passOp:Ot.opBack.zpass,failOp:Ot.opBack.fail,depthFailOp:Ot.opBack.zfail,mask:Ot.opBack.mask}}})}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=Mv(Mv({},this.uniforms),this.extractUniforms(a))}draw(a,o){const f=Mv(Mv({},this.options),a),{count:m=0,instances:w,elements:C,uniforms:D={},uniformBuffers:B,textures:V}=f;this.uniforms=Mv(Mv({},this.uniforms),this.extractUniforms(D));const{renderPass:ie,currentFramebuffer:Ee,width:Ce,height:He,renderCache:Ot}=this.service;this.pipeline=this.createPipeline(f,o);const nn=this.service.device,Bn=nn.swapChainHeight;if(nn.swapChainHeight=(Ee==null?void 0:Ee.height)||He,ie.setViewport(0,0,(Ee==null?void 0:Ee.width)||Ce,(Ee==null?void 0:Ee.height)||He),nn.swapChainHeight=Bn,ie.setPipeline(this.pipeline),ie.setStencilReference(1),ie.setVertexInput(this.inputLayout,this.vertexBuffers.map(sr=>({buffer:sr})),C?{buffer:this.indexBuffer,offset:0}:null),B&&(this.bindings=Ot.createBindings({pipeline:this.pipeline,uniformBufferBindings:B.map((sr,xr)=>{const fr=sr;return{binding:xr,buffer:fr.get(),size:fr.size}}),samplerBindings:V==null?void 0:V.map(sr=>({texture:sr.texture,sampler:sr.sampler}))})),this.bindings&&(ie.setBindings(this.bindings),Object.keys(this.uniforms).forEach(sr=>{const xr=this.uniforms[sr];xr instanceof E2?this.uniforms[sr]=xr.get():xr instanceof Uw&&(this.uniforms[sr]=xr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),C){const sr=C.count;sr===0?ie.draw(m,w):ie.drawIndexed(sr,w)}else ie.draw(m,w)}destroy(){var a,o,f;(a=this.vertexBuffers)==null||a.forEach(m=>m.destroy()),(o=this.indexBuffer)==null||o.destroy(),(f=this.bindings)==null||f.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:g2[a.func||re.gl.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:Eb[f&&f.srcRGB||re.gl.SRC_ALPHA],srcAlpha:Eb[f&&f.srcAlpha||re.gl.SRC_ALPHA],dstRGB:Eb[f&&f.dstRGB||re.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Eb[f&&f.dstAlpha||re.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Z0[m&&m.rgb||re.gl.FUNC_ADD],alpha:Z0[m&&m.alpha||re.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=4294967295,func:m={cmp:re.gl.ALWAYS,ref:0,mask:4294967295},opFront:w={fail:re.gl.KEEP,zfail:re.gl.KEEP,zpass:re.gl.KEEP},opBack:C={fail:re.gl.KEEP,zfail:re.gl.KEEP,zpass:re.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:su(Mv({},m),{cmp:Fw[m.cmp]}),opFront:{fail:My[w.fail],zfail:My[w.zfail],zpass:My[w.zpass],mask:m.mask},opBack:{fail:My[C.fail],zfail:My[C.zfail],zpass:My[C.zpass],mask:m.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:o,face:f=re.gl.BACK}=a;return{enable:!!o,face:J3[f]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||iM(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}f4(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(D=>{this.extractUniformsRecursively(D,w[D],f,`${m&&m+"."}${a}[${C}]`)})})}};function bo(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var Tb=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),{isUndefined:w2}=Ie.lodashUtil,aM=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new oM(this.device,a,this),this.createAttribute=a=>new Iw(this.device,a),this.createBuffer=a=>new a4(this.device,a),this.createElements=a=>new zw(this.device,a),this.createTexture2D=a=>new E2(this.device,a),this.createFramebuffer=a=>new Uw(this.device,a),this.useFramebuffer=(a,o)=>{this.currentFramebuffer=a,this.beginFrame(),o(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,o)=>Tb(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield o(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:o,depth:f,stencil:m,framebuffer:w=null}=a;if(w)w.clearOptions={color:o,depth:f,stencil:m};else{const C=this.queryVerdorInfo();if(C==="WebGL1"){const D=this.getGLContext();w2(m)?w2(f)||(D.clearDepth(f),D.clear(D.DEPTH_BUFFER_BIT)):(D.clearStencil(m),D.clear(D.STENCIL_BUFFER_BIT))}else if(C==="WebGL2"){const D=this.getGLContext();w2(m)?w2(f)||D.clearBufferfv(D.DEPTH,0,[f]):D.clearBufferiv(D.STENCIL,0,[m])}}},this.viewport=({width:a,height:o})=>{this.swapChain.configureSwapChain(a,o),this.createMainColorDepthRT(a,o),this.width=a,this.height=o},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D=this.device.createReadback(),B=o.colorTexture,V=D.readTextureSync(B,f,this.viewportOrigin===U0.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));return D.destroy(),V},this.readPixelsAsync=a=>Tb(this,null,function*(){const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D=this.device.createReadback(),B=o.colorTexture,V=yield D.readTexture(B,f,this.viewportOrigin===U0.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));if(this.viewportOrigin!==U0.LOWER_LEFT)for(let ie=0;ie<V.length;ie+=4){const Ee=V[ie];V[ie]=V[ie+2],V[ie+2]=Ee}return D.destroy(),V}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(o=>{o.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,o){return Tb(this,null,function*(){const{enableWebGPU:f,shaderCompilerPath:m,antialias:w}=o;this.canvas=a;const D=yield(f?new n4({shaderCompilerPath:m}):new yw({targets:["webgl2","webgl1"],antialias:w,onContextLost(V){console.warn("context lost",V)},onContextCreationError(V){console.warn("context creation error",V)},onContextRestored(V){console.warn("context restored",V)}})).createSwapChain(a);D.configureSwapChain(a.width,a.height),this.device=D.getDevice(),this.swapChain=D,this.renderCache=new c4(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const B=this.device.gl;this.extensionObject={OES_texture_float:!bo(B)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Qn.U8_RGBA_RT,width:a,height:o,usage:Wf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Qn.D24_S8,width:a,height:o,usage:Wf.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:o,mainColorRT:f,mainDepthRT:m}=this,w=a?a.colorRenderTarget:f,C=a?null:o.getOnscreenTexture(),D=a?a.depthRenderTarget:m,{color:B=[0,0,0,0],depth:V=1,stencil:ie=0}=(a==null?void 0:a.clearOptions)||{},Ee=w?D_(B[0]*255,B[1]*255,B[2]*255,B[3]):q1,Ce=D?V:void 0,He=D?ie:void 0,Ot=this.device.createRenderPass({colorAttachment:[w],colorResolveTo:[C],colorClearColor:[Ee],colorStore:[!0],depthStencilAttachment:D,depthClearValue:Ce,stencilClearValue:He});this.renderPass=Ot}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},Z_=["selectstart","selecting","selectend"],Vw=class extends Vu.EventEmitter{constructor(a,o={}){super(),this.isEnable=!1,this.onDragStart=f=>{this.box.style.display="block",this.startEvent=this.endEvent=f,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=f=>{this.endEvent=f,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=f=>{this.endEvent=f,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=o}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const o=Ie.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),a&&o.classList.add(a),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:o}=this.startEvent,{x:f,y:m}=this.endEvent,w=Math.min(a,f),C=Math.min(o,m),D=Math.abs(a-f),B=Math.abs(o-m);this.box.style.top=`${C}px`,this.box.style.left=`${w}px`,this.box.style.width=`${D}px`,this.box.style.height=`${B}px`}getLngLatBox(){const{lngLat:{lng:a,lat:o}}=this.startEvent,{lngLat:{lng:f,lat:m}}=this.endEvent;return(0,Ie.Ol)([[a,o],[f,m]])}},Ry=Object.defineProperty,Rv=Object.defineProperties,Hw=Object.getOwnPropertyDescriptors,Ta=Object.getOwnPropertySymbols,Pc=Object.prototype.hasOwnProperty,Dl=Object.prototype.propertyIsEnumerable,Gw=(a,o,f)=>o in a?Ry(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,mm=(a,o)=>{for(var f in o||(o={}))Pc.call(o,f)&&Gw(a,f,o[f]);if(Ta)for(var f of Ta(o))Dl.call(o,f)&&Gw(a,f,o[f]);return a},sM=(a,o)=>Rv(a,Hw(o)),gm=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(ie){w(ie)}},D=V=>{try{B(f.throw(V))}catch(ie){w(ie)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),lM=class{constructor(a){const{id:o,map:f,canvas:m,renderer:w="regl"}=a,C=(0,re.Hp)();this.container=C,f.setContainer(C,o,m),w==="regl"?C.rendererService=new K3:C.rendererService=new aM,this.sceneService=C.sceneService,this.mapService=C.mapService,this.iconService=C.iconService,this.fontService=C.fontService,this.controlService=C.controlService,this.layerService=C.layerService,this.debugService=C.debugService,this.debugService.setEnable(a.debug),this.markerService=C.markerService,this.interactionService=C.interactionService,this.popupService=C.popupService,this.boxSelect=new Vw(this,{}),this.initComponent(o),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return gm(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return gm(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const o=(0,re.e7)(this.container);if(a.setContainer(o),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)})}initMask(a){const{mask:o,maskfence:f,maskColor:m="#000",maskOpacity:w=0}=a.getLayerConfig();return!o||!f?void 0:new kS().source(f).shape("fill").style({color:m,opacity:w})}addMask(a,o){if(!a)return;const f=this.getLayer(o);if(f){const m=(0,re.e7)(this.container);a.setContainer(m),f.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,o){return gm(this,null,function*(){yield this.layerService.remove(a,o)})}removeAllLayer(){return gm(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,o){this.fontService.addIconFont(a,o)}addIconFonts(a){a.forEach(([o,f])=>{this.fontService.addIconFont(o,f)})}addFontFace(a,o){this.fontService.once("fontloaded",f=>{this.emit("fontloaded",f)}),this.fontService.addFontFace(a,o)}addImage(a,o){return gm(this,null,function*(){yield this.iconService.addImage(a,o)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,o){this.fontService.addIconGlyphs(o)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,o){var f;Z_.includes(a)?(f=this.boxSelect)==null||f.on(a,o):re.P7.includes(a)?this.sceneService.on(a,o):this.mapService.on(a,o)}once(a,o){var f;Z_.includes(a)?(f=this.boxSelect)==null||f.once(a,o):re.P7.includes(a)?this.sceneService.once(a,o):this.mapService.once(a,o)}emit(a,o){re.P7.indexOf(a)===-1?this.mapService.on(a,o):this.sceneService.emit(a,o)}off(a,o){var f;Z_.includes(a)?(f=this.boxSelect)==null||f.off(a,o):re.P7.includes(a)?this.sceneService.off(a,o):this.mapService.off(a,o)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,o){return this.mapService.setCenter(a,o)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,o){this.mapService.panBy(a,o)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,o){const{fitBoundsOptions:f,animate:m}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,o||sM(mm({},f),{animate:m}))}setZoomAndCenter(a,o){this.mapService.setZoomAndCenter(a,o)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,o){Ie.SA.REGISTERED_PROTOCOLS[a]=o}static removeProtocol(a){delete Ie.SA.REGISTERED_PROTOCOLS[a]}getProtocol(a){return Ie.SA.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:Ie.SO.getContainer(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:o}=this.sceneService.getSceneConfig();a&&this.addControl(new up({position:o}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new EO(a))}},h4="2.21.10"},81957:function(gt,G){"use strict";var L=function(q,W,E){return q<W?W:q>E?E:q};G.Z=L},95147:function(gt,G){"use strict";var L=function(q){return q==null};G.Z=L},25897:function(gt,G,L){"use strict";var q=L(95456),W=function(E){return(0,q.Z)(E,"Number")};G.Z=W},95456:function(gt,G){"use strict";var L={}.toString,q=function(W,E){return L.call(W)==="[object "+E+"]"};G.Z=q},131:function(gt,G,L){"use strict";L.r(G),L.d(G,{TinyColor:function(){return q.C},bounds:function(){return pt},convertDecimalToHex:function(){return ue.Wl},convertHexToDecimal:function(){return ue.T6},default:function(){return _t},fromRatio:function(){return ae},hslToRgb:function(){return ue.ve},hsvToRgb:function(){return ue.WE},inputToRGB:function(){return te.uA},isReadable:function(){return de},isValidCSSUnit:function(){return te.ky},legacyRandom:function(){return We},mostReadable:function(){return ee},names:function(){return W.R},numberInputToObject:function(){return ue.Yt},parseIntFromHex:function(){return ue.VD},random:function(){return me},readability:function(){return E},rgbToHex:function(){return ue.vq},rgbToHsl:function(){return ue.lC},rgbToHsv:function(){return ue.py},rgbToRgb:function(){return ue.rW},rgbaToArgbHex:function(){return ue.GC},rgbaToHex:function(){return ue.s},stringInputToObject:function(){return te.uz},tinycolor:function(){return q.H},toMsFilter:function(){return ce}});var q=L(10274),W=L(48701);function E(Me,Ae){var je=new q.C(Me),Ze=new q.C(Ae);return(Math.max(je.getLuminance(),Ze.getLuminance())+.05)/(Math.min(je.getLuminance(),Ze.getLuminance())+.05)}function de(Me,Ae,je){var Ze,lt;je===void 0&&(je={level:"AA",size:"small"});var en=E(Me,Ae);switch(((Ze=je.level)!==null&&Ze!==void 0?Ze:"AA")+((lt=je.size)!==null&&lt!==void 0?lt:"small")){case"AAsmall":case"AAAlarge":return en>=4.5;case"AAlarge":return en>=3;case"AAAsmall":return en>=7;default:return!1}}function ee(Me,Ae,je){je===void 0&&(je={includeFallbackColors:!1,level:"AA",size:"small"});for(var Ze=null,lt=0,en=je.includeFallbackColors,Le=je.level,St=je.size,Oe=0,nt=Ae;Oe<nt.length;Oe++){var Ke=nt[Oe],Xe=E(Me,Ke);Xe>lt&&(lt=Xe,Ze=new q.C(Ke))}return de(Me,Ze,{level:Le,size:St})||!en?Ze:(je.includeFallbackColors=!1,ee(Me,["#fff","#000"],je))}var ue=L(86500);function ce(Me,Ae){var je=new q.C(Me),Ze="#"+(0,ue.GC)(je.r,je.g,je.b,je.a),lt=Ze,en=je.gradientType?"GradientType = 1, ":"";if(Ae){var Le=new q.C(Ae);lt="#"+(0,ue.GC)(Le.r,Le.g,Le.b,Le.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(en,"startColorstr=").concat(Ze,",endColorstr=").concat(lt,")")}var xe=L(90279);function ae(Me,Ae){var je={r:(0,xe.JX)(Me.r),g:(0,xe.JX)(Me.g),b:(0,xe.JX)(Me.b)};return Me.a!==void 0&&(je.a=Number(Me.a)),new q.C(je,Ae)}function We(){return new q.C({r:Math.random(),g:Math.random(),b:Math.random()})}var te=L(1350);function me(Me){if(Me===void 0&&(Me={}),Me.count!==void 0&&Me.count!==null){var Ae=Me.count,je=[];for(Me.count=void 0;Ae>je.length;)Me.count=null,Me.seed&&(Me.seed+=1),je.push(me(Me));return Me.count=Ae,je}var Ze=Re(Me.hue,Me.seed),lt=$(Ze,Me),en=le(Ze,lt,Me),Le={h:Ze,s:lt,v:en};return Me.alpha!==void 0&&(Le.a=Me.alpha),new q.C(Le)}function Re(Me,Ae){var je=we(Me),Ze=Je(je,Ae);return Ze<0&&(Ze=360+Ze),Ze}function $(Me,Ae){if(Ae.hue==="monochrome")return 0;if(Ae.luminosity==="random")return Je([0,100],Ae.seed);var je=et(Me).saturationRange,Ze=je[0],lt=je[1];switch(Ae.luminosity){case"bright":Ze=55;break;case"dark":Ze=lt-10;break;case"light":lt=55;break;default:break}return Je([Ze,lt],Ae.seed)}function le(Me,Ae,je){var Ze=K(Me,Ae),lt=100;switch(je.luminosity){case"dark":lt=Ze+20;break;case"light":Ze=(lt+Ze)/2;break;case"random":Ze=0,lt=100;break;default:break}return Je([Ze,lt],je.seed)}function K(Me,Ae){for(var je=et(Me).lowerBounds,Ze=0;Ze<je.length-1;Ze++){var lt=je[Ze][0],en=je[Ze][1],Le=je[Ze+1][0],St=je[Ze+1][1];if(Ae>=lt&&Ae<=Le){var Oe=(St-en)/(Le-lt),nt=en-Oe*lt;return Oe*Ae+nt}}return 0}function we(Me){var Ae=parseInt(Me,10);if(!Number.isNaN(Ae)&&Ae<360&&Ae>0)return[Ae,Ae];if(typeof Me=="string"){var je=pt.find(function(Le){return Le.name===Me});if(je){var Ze=wt(je);if(Ze.hueRange)return Ze.hueRange}var lt=new q.C(Me);if(lt.isValid){var en=lt.toHsv().h;return[en,en]}}return[0,360]}function et(Me){Me>=334&&Me<=360&&(Me-=360);for(var Ae=0,je=pt;Ae<je.length;Ae++){var Ze=je[Ae],lt=wt(Ze);if(lt.hueRange&&Me>=lt.hueRange[0]&&Me<=lt.hueRange[1])return lt}throw Error("Color not found")}function Je(Me,Ae){if(Ae===void 0)return Math.floor(Me[0]+Math.random()*(Me[1]+1-Me[0]));var je=Me[1]||1,Ze=Me[0]||0;Ae=(Ae*9301+49297)%233280;var lt=Ae/233280;return Math.floor(Ze+lt*(je-Ze))}function wt(Me){var Ae=Me.lowerBounds[0][0],je=Me.lowerBounds[Me.lowerBounds.length-1][0],Ze=Me.lowerBounds[Me.lowerBounds.length-1][1],lt=Me.lowerBounds[0][1];return{name:Me.name,hueRange:Me.hueRange,lowerBounds:Me.lowerBounds,saturationRange:[Ae,je],brightnessRange:[Ze,lt]}}var pt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],_t=q.H},38163:function(gt){gt.exports=G;function G(W,E){var de=W&&W.type,ee;if(de==="FeatureCollection")for(ee=0;ee<W.features.length;ee++)G(W.features[ee],E);else if(de==="GeometryCollection")for(ee=0;ee<W.geometries.length;ee++)G(W.geometries[ee],E);else if(de==="Feature")G(W.geometry,E);else if(de==="Polygon")L(W.coordinates,E);else if(de==="MultiPolygon")for(ee=0;ee<W.coordinates.length;ee++)L(W.coordinates[ee],E);return W}function L(W,E){if(W.length!==0){q(W[0],E);for(var de=1;de<W.length;de++)q(W[de],!E)}}function q(W,E){for(var de=0,ee=0,ue=0,ce=W.length,xe=ce-1;ue<ce;xe=ue++){var ae=(W[ue][0]-W[xe][0])*(W[xe][1]+W[ue][1]),We=de+ae;ee+=Math.abs(de)>=Math.abs(ae)?de-We+ae:ae-We+de,de=We}de+ee>=0!=!!E&&W.reverse()}},75550:function(gt){"use strict";gt.exports=G;function G(L,q){this.x=L,this.y=q}G.prototype={clone:function(){return new G(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,q){return this.clone()._rotateAround(L,q)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var q=L.x-this.x,W=L.y-this.y;return q*q+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,q){return Math.atan2(this.x*q-this.y*L,this.x*L+this.y*q)},_matMult:function(L){var q=L[0]*this.x+L[1]*this.y,W=L[2]*this.x+L[3]*this.y;return this.x=q,this.y=W,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var q=Math.cos(L),W=Math.sin(L),E=q*this.x-W*this.y,de=W*this.x+q*this.y;return this.x=E,this.y=de,this},_rotateAround:function(L,q){var W=Math.cos(L),E=Math.sin(L),de=q.x+W*(this.x-q.x)-E*(this.y-q.y),ee=q.y+E*(this.x-q.x)+W*(this.y-q.y);return this.x=de,this.y=ee,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},G.convert=function(L){return L instanceof G?L:Array.isArray(L)?new G(L[0],L[1]):L}},49296:function(gt){"use strict";gt.exports=L,gt.exports.default=L;var G=1e20;function L(ee,ue,ce,xe,ae,We){this.fontSize=ee||24,this.buffer=ue===void 0?3:ue,this.cutoff=xe||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=We||"normal",this.radius=ce||8;var te=this.size=this.fontSize+this.buffer*2,me=te+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=te,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Uint16Array(me),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(te/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(ee,ue,ce,xe,ae,We,te){We.fill(G,0,ue*ce),te.fill(0,0,ue*ce);for(var me=(ue-xe)/2,Re=0;Re<ae;Re++)for(var $=0;$<xe;$++){var le=(Re+me)*ue+$+me,K=ee.data[4*(Re*xe+$)+3]/255;if(K===1)We[le]=0,te[le]=G;else if(K===0)We[le]=G,te[le]=0;else{var we=Math.max(0,.5-K),et=Math.max(0,K-.5);We[le]=we*we,te[le]=et*et}}}function W(ee,ue,ce,xe,ae,We,te){for(var me=0;me<ue*ce;me++){var Re=Math.sqrt(xe[me])-Math.sqrt(ae[me]);ee[me]=Math.round(255-255*(Re/We+te))}}L.prototype._draw=function(ee,ue){var ce=this.ctx.measureText(ee),xe=ce.width,ae=2*this.buffer,We,te,me,Re,$,le,K,we;ue&&this.useMetrics?($=Math.floor(ce.actualBoundingBoxAscent),we=this.buffer+Math.ceil(ce.actualBoundingBoxAscent),le=this.buffer,K=this.buffer,te=Math.min(this.size,Math.ceil(ce.actualBoundingBoxRight-ce.actualBoundingBoxLeft)),Re=Math.min(this.size-le,Math.ceil(ce.actualBoundingBoxAscent+ce.actualBoundingBoxDescent)),We=te+ae,me=Re+ae,this.ctx.textBaseline="alphabetic"):(We=te=this.size,me=Re=this.size,$=19*this.fontSize/24,le=K=0,we=this.middle,this.ctx.textBaseline="middle");var et;te&&Re&&(this.ctx.clearRect(K,le,te,Re),this.ctx.fillText(ee,this.buffer,we),et=this.ctx.getImageData(K,le,te,Re));var Je=new Uint8ClampedArray(We*me);return q(et,We,me,te,Re,this.gridOuter,this.gridInner),E(this.gridOuter,We,me,this.f,this.v,this.z),E(this.gridInner,We,me,this.f,this.v,this.z),W(Je,We,me,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Je,metrics:{width:te,height:Re,sdfWidth:We,sdfHeight:me,top:$,left:0,advance:xe}}},L.prototype.draw=function(ee){return this._draw(ee,!1).data},L.prototype.drawWithMetrics=function(ee){return this._draw(ee,!0)};function E(ee,ue,ce,xe,ae,We){for(var te=0;te<ue;te++)de(ee,te,ue,ce,xe,ae,We);for(var me=0;me<ce;me++)de(ee,me*ue,1,ue,xe,ae,We)}function de(ee,ue,ce,xe,ae,We,te){var me,Re,$,le;for(We[0]=0,te[0]=-G,te[1]=G,me=0;me<xe;me++)ae[me]=ee[ue+me*ce];for(me=1,Re=0,$=0;me<xe;me++){do le=We[Re],$=(ae[me]-ae[le]+me*me-le*le)/(me-le)/2;while($<=te[Re]&&--Re>-1);Re++,We[Re]=me,te[Re]=$,te[Re+1]=G}for(me=0,Re=0;me<xe;me++){for(;te[Re+1]<me;)Re++;le=We[Re],ee[ue+me*ce]=ae[le]+(me-le)*(me-le)}}},38929:function(gt,G,L){gt.exports.VectorTile=L(22779),L(66024),L(59701)},22779:function(gt,G,L){"use strict";var q=L(59701);gt.exports=W;function W(de,ee){this.layers=de.readFields(E,{},ee)}function E(de,ee,ue){if(de===3){var ce=new q(ue,ue.readVarint()+ue.pos);ce.length&&(ee[ce.name]=ce)}}},66024:function(gt,G,L){"use strict";var q=L(75550);gt.exports=W;function W(ce,xe,ae,We,te){this.properties={},this.extent=ae,this.type=0,this._pbf=ce,this._geometry=-1,this._keys=We,this._values=te,ce.readFields(E,this,xe)}function E(ce,xe,ae){ce==1?xe.id=ae.readVarint():ce==2?de(ae,xe):ce==3?xe.type=ae.readVarint():ce==4&&(xe._geometry=ae.pos)}function de(ce,xe){for(var ae=ce.readVarint()+ce.pos;ce.pos<ae;){var We=xe._keys[ce.readVarint()],te=xe._values[ce.readVarint()];xe.properties[We]=te}}W.types=["Unknown","Point","LineString","Polygon"],W.prototype.loadGeometry=function(){var ce=this._pbf;ce.pos=this._geometry;for(var xe=ce.readVarint()+ce.pos,ae=1,We=0,te=0,me=0,Re=[],$;ce.pos<xe;){if(We<=0){var le=ce.readVarint();ae=le&7,We=le>>3}if(We--,ae===1||ae===2)te+=ce.readSVarint(),me+=ce.readSVarint(),ae===1&&($&&Re.push($),$=[]),$.push(new q(te,me));else if(ae===7)$&&$.push($[0].clone());else throw new Error("unknown command "+ae)}return $&&Re.push($),Re},W.prototype.bbox=function(){var ce=this._pbf;ce.pos=this._geometry;for(var xe=ce.readVarint()+ce.pos,ae=1,We=0,te=0,me=0,Re=1/0,$=-1/0,le=1/0,K=-1/0;ce.pos<xe;){if(We<=0){var we=ce.readVarint();ae=we&7,We=we>>3}if(We--,ae===1||ae===2)te+=ce.readSVarint(),me+=ce.readSVarint(),te<Re&&(Re=te),te>$&&($=te),me<le&&(le=me),me>K&&(K=me);else if(ae!==7)throw new Error("unknown command "+ae)}return[Re,le,$,K]},W.prototype.toGeoJSON=function(ce,xe,ae){var We=this.extent*Math.pow(2,ae),te=this.extent*ce,me=this.extent*xe,Re=this.loadGeometry(),$=W.types[this.type],le,K;function we(wt){for(var pt=0;pt<wt.length;pt++){var _t=wt[pt],Me=180-(_t.y+me)*360/We;wt[pt]=[(_t.x+te)*360/We-180,360/Math.PI*Math.atan(Math.exp(Me*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(le=0;le<Re.length;le++)et[le]=Re[le][0];Re=et,we(Re);break;case 2:for(le=0;le<Re.length;le++)we(Re[le]);break;case 3:for(Re=ee(Re),le=0;le<Re.length;le++)for(K=0;K<Re[le].length;K++)we(Re[le][K]);break}Re.length===1?Re=Re[0]:$="Multi"+$;var Je={type:"Feature",geometry:{type:$,coordinates:Re},properties:this.properties};return"id"in this&&(Je.id=this.id),Je};function ee(ce){var xe=ce.length;if(xe<=1)return[ce];for(var ae=[],We,te,me=0;me<xe;me++){var Re=ue(ce[me]);Re!==0&&(te===void 0&&(te=Re<0),te===Re<0?(We&&ae.push(We),We=[ce[me]]):We.push(ce[me]))}return We&&ae.push(We),ae}function ue(ce){for(var xe=0,ae=0,We=ce.length,te=We-1,me,Re;ae<We;te=ae++)me=ce[ae],Re=ce[te],xe+=(Re.x-me.x)*(me.y+Re.y);return xe}},59701:function(gt,G,L){"use strict";var q=L(66024);gt.exports=W;function W(ee,ue){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=ee,this._keys=[],this._values=[],this._features=[],ee.readFields(E,this,ue),this.length=this._features.length}function E(ee,ue,ce){ee===15?ue.version=ce.readVarint():ee===1?ue.name=ce.readString():ee===5?ue.extent=ce.readVarint():ee===2?ue._features.push(ce.pos):ee===3?ue._keys.push(ce.readString()):ee===4&&ue._values.push(de(ce))}function de(ee){for(var ue=null,ce=ee.readVarint()+ee.pos;ee.pos<ce;){var xe=ee.readVarint()>>3;ue=xe===1?ee.readString():xe===2?ee.readFloat():xe===3?ee.readDouble():xe===4?ee.readVarint64():xe===5?ee.readVarint():xe===6?ee.readSVarint():xe===7?ee.readBoolean():null}return ue}W.prototype.feature=function(ee){if(ee<0||ee>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[ee];var ue=this._pbf.readVarint()+this._pbf.pos;return new q(this._pbf,ue,this.extent,this._keys,this._values)}},45471:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.PresetStatusColorTypes=void 0,G.isPresetColor=ue,G.isPresetStatusColor=ce;var W=q(L(861)),E=L(36496);const de=E.PresetColors.map(xe=>`${xe}-inverse`),ee=G.PresetStatusColorTypes=["success","processing","error","default","warning"];function ue(xe){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,W.default)(de),(0,W.default)(E.PresetColors)).includes(xe):E.PresetColors.includes(xe)}function ce(xe){return ee.includes(xe)}},49314:function(gt,G,L){"use strict";"use client";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294)),E=q(L(43273));const de=ue=>{let ce;return typeof ue=="object"&&(ue!=null&&ue.clearIcon)?ce=ue:ue&&(ce={clearIcon:W.default.createElement(E.default,null)}),ce};var ee=G.default=de},56333:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.containerBaseZIndexOffset=G.consumerBaseZIndexOffset=G.CONTAINER_MAX_OFFSET=void 0,G.useZIndex=te;var W=q(L(67294)),E=q(L(41401)),de=q(L(96877));const ee=100,ue=10,ce=G.CONTAINER_MAX_OFFSET=ee*ue,xe=G.containerBaseZIndexOffset={Modal:ee,Drawer:ee,Popover:ee,Popconfirm:ee,Tooltip:ee,Tour:ee},ae=G.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function We(me){return me in xe}function te(me,Re){const[,$]=(0,E.default)(),le=W.default.useContext(de.default),K=We(me);if(Re!==void 0)return[Re,Re];let we=le!=null?le:0;return K?(we+=(le?0:$.zIndexPopupBase)+xe[me],we=Math.min(we,$.zIndexPopupBase+ce)):we+=ae[me],[le===void 0?Re:we,we]}},53683:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTransitionName=G.default=void 0;const L=()=>({height:0,opacity:0}),q=xe=>{const{scrollHeight:ae}=xe;return{height:ae,opacity:1}},W=xe=>({height:xe?xe.offsetHeight:0}),E=(xe,ae)=>(ae==null?void 0:ae.deadline)===!0||ae.propertyName==="height",de=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:L,onEnterStart:L,onAppearActive:q,onEnterActive:q,onLeaveStart:W,onLeaveActive:L,onAppearEnd:E,onEnterEnd:E,onLeaveEnd:E,motionDeadline:500}},ee=null,ue=(xe,ae,We)=>We!==void 0?We:`${xe}-${ae}`;G.getTransitionName=ue;var ce=G.default=de},74132:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=ue,G.getOverflowOptions=W;var q=L(9064);function W(ce,xe,ae,We){if(We===!1)return{adjustX:!1,adjustY:!1};const te=We&&typeof We=="object"?We:{},me={};switch(ce){case"top":case"bottom":me.shiftX=xe.arrowOffsetHorizontal*2+ae,me.shiftY=!0,me.adjustY=!0;break;case"left":case"right":me.shiftY=xe.arrowOffsetVertical*2+ae,me.shiftX=!0,me.adjustX=!0;break}const Re=Object.assign(Object.assign({},me),te);return Re.shiftX||(Re.adjustX=!0),Re.shiftY||(Re.adjustY=!0),Re}const E={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},de={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},ee=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function ue(ce){const{arrowWidth:xe,autoAdjustOverflow:ae,arrowPointAtCenter:We,offset:te,borderRadius:me,visibleFirst:Re}=ce,$=xe/2,le={};return Object.keys(E).forEach(K=>{const we=We&&de[K]||E[K],et=Object.assign(Object.assign({},we),{offset:[0,0],dynamicInset:!0});switch(le[K]=et,ee.has(K)&&(et.autoArrow=!1),K){case"top":case"topLeft":case"topRight":et.offset[1]=-$-te;break;case"bottom":case"bottomLeft":case"bottomRight":et.offset[1]=$+te;break;case"left":case"leftTop":case"leftBottom":et.offset[0]=-$-te;break;case"right":case"rightTop":case"rightBottom":et.offset[0]=$+te;break}const Je=(0,q.getArrowOffsetToken)({contentRadius:me,limitVerticalRadius:!0});if(We)switch(K){case"topLeft":case"bottomLeft":et.offset[0]=-Je.arrowOffsetHorizontal-$;break;case"topRight":case"bottomRight":et.offset[0]=Je.arrowOffsetHorizontal+$;break;case"leftTop":case"rightTop":et.offset[1]=-Je.arrowOffsetHorizontal-$;break;case"leftBottom":case"rightBottom":et.offset[1]=Je.arrowOffsetHorizontal+$;break}et.overflow=W(K,Je,xe,ae),Re&&(et.htmlRegion="visibleFirst")}),le}},47419:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.cloneElement=ee,G.isFragment=E,G.replaceElement=void 0;var W=q(L(67294));function E(ue){return ue&&W.default.isValidElement(ue)&&ue.type===W.default.Fragment}const de=(ue,ce,xe)=>W.default.isValidElement(ue)?W.default.cloneElement(ue,typeof xe=="function"?xe(ue.props||{}):xe):ce;G.replaceElement=de;function ee(ue,ce){return de(ue,ue,ce)}},71434:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getMergedStatus=void 0,G.getStatusClassNames=de;var W=q(L(93967));const E=null;function de(ue,ce,xe){return(0,W.default)({[`${ue}-status-success`]:ce==="success",[`${ue}-status-warning`]:ce==="warning",[`${ue}-status-error`]:ce==="error",[`${ue}-status-validating`]:ce==="validating",[`${ue}-has-feedback`]:xe})}const ee=(ue,ce)=>ce||ue;G.getMergedStatus=ee},38882:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.canUseDocElement=void 0,Object.defineProperty(G,"isStyleSupport",{enumerable:!0,get:function(){return E.isStyleSupport}});var W=q(L(19158)),E=L(3481);const de=()=>(0,W.default)()&&window.document.documentElement;G.canUseDocElement=de},60938:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(27712)),ee=function(ae,We){var te={};for(var me in ae)Object.prototype.hasOwnProperty.call(ae,me)&&We.indexOf(me)<0&&(te[me]=ae[me]);if(ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Re=0,me=Object.getOwnPropertySymbols(ae);Re<me.length;Re++)We.indexOf(me[Re])<0&&Object.prototype.propertyIsEnumerable.call(ae,me[Re])&&(te[me[Re]]=ae[me[Re]]);return te};const ue={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},ce=E.forwardRef((ae,We)=>{const te=Je=>{const{keyCode:wt}=Je;wt===de.default.ENTER&&Je.preventDefault()},me=Je=>{const{keyCode:wt}=Je,{onClick:pt}=ae;wt===de.default.ENTER&&pt&&pt()},{style:Re,noStyle:$,disabled:le,tabIndex:K=0}=ae,we=ee(ae,["style","noStyle","disabled","tabIndex"]);let et={};return $||(et=Object.assign({},ue)),le&&(et.pointerEvents="none"),et=Object.assign(Object.assign({},et),Re),E.createElement("div",Object.assign({role:"button",tabIndex:K,ref:We},we,{onKeyDown:te,onKeyUp:me,style:et}))});var xe=G.default=ce},13594:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.devUseWarning=G.default=G.WarningContext=void 0,G.noop=de,G.resetWarned=ue;var W=q(L(67294)),E=q(L(45520));function de(){}let ee=null;function ue(){ee=null,(0,E.resetWarned)()}let ce=de;const xe=G.WarningContext=W.createContext({}),ae=G.devUseWarning=()=>{const te=()=>{};return te.deprecated=de,te};var We=G.default=ce},96877:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294));const E=W.default.createContext(void 0);var de=G.default=E},93319:function(gt,G,L){"use strict";"use client";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.DisabledContextProvider=void 0;var W=q(L(67294));const E=W.createContext(!1),de=ue=>{let{children:ce,disabled:xe}=ue;const ae=W.useContext(E);return W.createElement(E.Provider,{value:xe!=null?xe:ae},ce)};G.DisabledContextProvider=de;var ee=G.default=E},16722:function(gt,G,L){"use strict";"use client";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ee;var W=q(L(67294)),E=L(82225),de=L(3184);function ee(ue){const{children:ce}=ue,[,xe]=(0,de.useToken)(),{motion:ae}=xe,We=W.useRef(!1);return We.current=We.current||ae===!1,We.current?W.createElement(E.Provider,{motion:ae},ce):ce}},11380:function(gt,G,L){"use strict";"use client";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294)),E=L(13594);const de=null;var ee=G.default=()=>null},3236:function(gt,G,L){"use strict";"use client";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.SizeContextProvider=void 0;var W=q(L(67294));const E=W.createContext(void 0),de=ue=>{let{children:ce,size:xe}=ue;const ae=W.useContext(E);return W.createElement(E.Provider,{value:xe||ae},ce)};G.SizeContextProvider=de;var ee=G.default=E},7177:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultIconPrefixCls=G.ConfigContext=G.ConfigConsumer=void 0;var W=q(L(67294));const E=G.defaultIconPrefixCls="anticon",de=(ce,xe)=>xe||(ce?`ant-${ce}`:"ant"),ee=G.ConfigContext=W.createContext({getPrefixCls:de,iconPrefixCls:E}),{Consumer:ue}=ee;G.ConfigConsumer=ue},56301:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getStyle=xe,G.registerTheme=ae;var W=L(78589),E=L(131),de=q(L(19158)),ee=L(93399),ue=q(L(13594));const ce=`-ant-${Date.now()}-${Math.random()}`;function xe(We,te){const me={},Re=(K,we)=>{let et=K.clone();return et=(we==null?void 0:we(et))||et,et.toRgbString()},$=(K,we)=>{const et=new E.TinyColor(K),Je=(0,W.generate)(et.toRgbString());me[`${we}-color`]=Re(et),me[`${we}-color-disabled`]=Je[1],me[`${we}-color-hover`]=Je[4],me[`${we}-color-active`]=Je[6],me[`${we}-color-outline`]=et.clone().setAlpha(.2).toRgbString(),me[`${we}-color-deprecated-bg`]=Je[0],me[`${we}-color-deprecated-border`]=Je[2]};if(te.primaryColor){$(te.primaryColor,"primary");const K=new E.TinyColor(te.primaryColor),we=(0,W.generate)(K.toRgbString());we.forEach((Je,wt)=>{me[`primary-${wt+1}`]=Je}),me["primary-color-deprecated-l-35"]=Re(K,Je=>Je.lighten(35)),me["primary-color-deprecated-l-20"]=Re(K,Je=>Je.lighten(20)),me["primary-color-deprecated-t-20"]=Re(K,Je=>Je.tint(20)),me["primary-color-deprecated-t-50"]=Re(K,Je=>Je.tint(50)),me["primary-color-deprecated-f-12"]=Re(K,Je=>Je.setAlpha(Je.getAlpha()*.12));const et=new E.TinyColor(we[0]);me["primary-color-active-deprecated-f-30"]=Re(et,Je=>Je.setAlpha(Je.getAlpha()*.3)),me["primary-color-active-deprecated-d-02"]=Re(et,Je=>Je.darken(2))}return te.successColor&&$(te.successColor,"success"),te.warningColor&&$(te.warningColor,"warning"),te.errorColor&&$(te.errorColor,"error"),te.infoColor&&$(te.infoColor,"info"),`
  :root {
    ${Object.keys(me).map(K=>`--${We}-${K}: ${me[K]};`).join(`
`)}
  }
  `.trim()}function ae(We,te){const me=xe(We,te);(0,de.default)()&&(0,ee.updateCSS)(me,`${ce}-dynamic-theme`)}},14893:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var q=L(3184);const W=de=>{const[,,,,ee]=(0,q.useToken)();return ee?`${de}-css-var`:""};var E=G.default=W},5819:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=L(67294),E=q(L(93319)),de=q(L(3236));function ee(){const ce=(0,W.useContext)(E.default),xe=(0,W.useContext)(de.default);return{componentDisabled:ce,componentSize:xe}}var ue=G.default=ee},65693:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294)),E=q(L(3236));const de=ue=>{const ce=W.default.useContext(E.default);return W.default.useMemo(()=>ue?typeof ue=="string"?ue!=null?ue:ce:ue instanceof Function?ue(ce):ce:ce,[ue,ce])};var ee=G.default=de},25494:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ce;var W=q(L(67265)),E=q(L(11102)),de=L(13594),ee=L(3184),ue=q(L(78459));function ce(xe,ae,We){var te,me;const Re=(0,de.devUseWarning)("ConfigProvider"),$=xe||{},le=$.inherit===!1||!ae?Object.assign(Object.assign({},ee.defaultConfig),{hashed:(te=ae==null?void 0:ae.hashed)!==null&&te!==void 0?te:ee.defaultConfig.hashed,cssVar:ae==null?void 0:ae.cssVar}):ae,K=(0,ue.default)();return(0,W.default)(()=>{var we,et;if(!xe)return ae;const Je=Object.assign({},le.components);Object.keys(xe.components||{}).forEach(_t=>{Je[_t]=Object.assign(Object.assign({},Je[_t]),xe.components[_t])});const wt=`css-var-${K.replace(/:/g,"")}`,pt=((we=$.cssVar)!==null&&we!==void 0?we:le.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:We==null?void 0:We.prefixCls},typeof le.cssVar=="object"?le.cssVar:{}),typeof $.cssVar=="object"?$.cssVar:{}),{key:typeof $.cssVar=="object"&&((et=$.cssVar)===null||et===void 0?void 0:et.key)||wt});return Object.assign(Object.assign(Object.assign({},le),$),{token:Object.assign(Object.assign({},le.token),$.token),components:Je,cssVar:pt})},[$,le],(we,et)=>we.some((Je,wt)=>{const pt=et[wt];return!(0,E.default)(Je,pt,!0)}))}},78459:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294));const E=Object.assign({},W),{useId:de}=E,ue=typeof de=="undefined"?()=>"":de;var ce=G.default=ue},31929:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"ConfigConsumer",{enumerable:!0,get:function(){return le.ConfigConsumer}}),Object.defineProperty(G,"ConfigContext",{enumerable:!0,get:function(){return le.ConfigContext}}),G.default=G.configConsumerProps=void 0,Object.defineProperty(G,"defaultIconPrefixCls",{enumerable:!0,get:function(){return le.defaultIconPrefixCls}}),G.warnContext=G.globalConfig=G.defaultPrefixCls=void 0;var E=W(L(67294)),de=L(6731),ee=q(L(13357)),ue=q(L(67265)),ce=L(20059),xe=W(L(13594)),ae=q(L(2197)),We=W(L(24522)),te=q(L(44805)),me=q(L(18253)),Re=L(89329),$=q(L(98411)),le=L(7177),K=L(56301),we=L(93319),et=q(L(5819)),Je=q(L(25494)),wt=q(L(16722)),pt=q(L(11380)),_t=W(L(3236)),Me=q(L(82932)),Ae=function(rr,Ft){var Jt={};for(var un in rr)Object.prototype.hasOwnProperty.call(rr,un)&&Ft.indexOf(un)<0&&(Jt[un]=rr[un]);if(rr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Vn=0,un=Object.getOwnPropertySymbols(rr);Vn<un.length;Vn++)Ft.indexOf(un[Vn])<0&&Object.prototype.propertyIsEnumerable.call(rr,un[Vn])&&(Jt[un[Vn]]=rr[un[Vn]]);return Jt};let je=!1;const Ze=G.warnContext=null,lt=G.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],en=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],Le=G.defaultPrefixCls="ant";let St,Oe,nt,Ke;function Xe(){return St||Le}function Rt(){return Oe||le.defaultIconPrefixCls}function bt(rr){return Object.keys(rr).some(Ft=>Ft.endsWith("Color"))}const Ie=rr=>{const{prefixCls:Ft,iconPrefixCls:Jt,theme:un,holderRender:Vn}=rr;Ft!==void 0&&(St=Ft),Jt!==void 0&&(Oe=Jt),"holderRender"in rr&&(Ke=Vn),un&&(bt(un)?(0,K.registerTheme)(Xe(),un):nt=un)},Gt=()=>({getPrefixCls:(rr,Ft)=>Ft||(rr?`${Xe()}-${rr}`:Xe()),getIconPrefixCls:Rt,getRootPrefixCls:()=>St||Xe(),getTheme:()=>nt,holderRender:Ke});G.globalConfig=Gt;const mn=rr=>{const{children:Ft,csp:Jt,autoInsertSpaceInButton:un,alert:Vn,anchor:on,form:Dt,locale:Vt,componentSize:ze,direction:rt,space:jt,virtual:U,dropdownMatchSelectWidth:pe,popupMatchSelectWidth:ct,popupOverflow:he,legacyLocale:$t,parentContext:sn,iconPrefixCls:pn,theme:Dn,componentDisabled:Wn,segmented:Yn,statistic:fn,spin:vt,calendar:Pt,carousel:An,cascader:Pn,collapse:Xn,typography:dt,checkbox:Se,descriptions:Be,divider:st,drawer:Lt,skeleton:It,steps:wn,image:Kn,layout:_r,list:Jn,mentions:Pe,modal:Te,progress:ke,result:it,slider:At,breadcrumb:Yt,menu:hn,pagination:Et,input:Kt,textArea:er,empty:br,badge:Vr,radio:vr,rate:Ur,switch:_i,transfer:Ai,avatar:wr,message:Ei,tag:hi,table:ai,card:Io,tabs:xi,timeline:Qo,timePicker:ga,upload:Po,notification:$o,tree:Fe,colorPicker:ot,datePicker:Ut,rangePicker:ln,flex:Nn,wave:Fn,dropdown:gn,warning:Cn,tour:pr,floatButtonGroup:hr}=rr,ei=E.useCallback((io,Ao)=>{const{prefixCls:xs}=rr;if(Ao)return Ao;const ya=xs||sn.getPrefixCls("");return io?`${ya}-${io}`:ya},[sn.getPrefixCls,rr.prefixCls]),ji=pn||sn.iconPrefixCls||le.defaultIconPrefixCls,Ji=Jt||sn.csp;(0,Me.default)(ji,Ji);const ti=(0,Je.default)(Dn,sn.theme,{prefixCls:ei("")}),Gi={csp:Ji,autoInsertSpaceInButton:un,alert:Vn,anchor:on,locale:Vt||$t,direction:rt,space:jt,virtual:U,popupMatchSelectWidth:ct!=null?ct:pe,popupOverflow:he,getPrefixCls:ei,iconPrefixCls:ji,theme:ti,segmented:Yn,statistic:fn,spin:vt,calendar:Pt,carousel:An,cascader:Pn,collapse:Xn,typography:dt,checkbox:Se,descriptions:Be,divider:st,drawer:Lt,skeleton:It,steps:wn,image:Kn,input:Kt,textArea:er,layout:_r,list:Jn,mentions:Pe,modal:Te,progress:ke,result:it,slider:At,breadcrumb:Yt,menu:hn,pagination:Et,empty:br,badge:Vr,radio:vr,rate:Ur,switch:_i,transfer:Ai,avatar:wr,message:Ei,tag:hi,table:ai,card:Io,tabs:xi,timeline:Qo,timePicker:ga,upload:Po,notification:$o,tree:Fe,colorPicker:ot,datePicker:Ut,rangePicker:ln,flex:Nn,wave:Fn,dropdown:gn,warning:Cn,tour:pr,floatButtonGroup:hr},Ni=Object.assign({},sn);Object.keys(Gi).forEach(io=>{Gi[io]!==void 0&&(Ni[io]=Gi[io])}),en.forEach(io=>{const Ao=rr[io];Ao&&(Ni[io]=Ao)}),typeof un!="undefined"&&(Ni.button=Object.assign({autoInsertSpace:un},Ni.button));const Gr=(0,ue.default)(()=>Ni,Ni,(io,Ao)=>{const xs=Object.keys(io),ya=Object.keys(Ao);return xs.length!==ya.length||xs.some(ra=>io[ra]!==Ao[ra])}),So=E.useMemo(()=>({prefixCls:ji,csp:Ji}),[ji,Ji]);let fi=E.createElement(E.Fragment,null,E.createElement(pt.default,{dropdownMatchSelectWidth:pe}),Ft);const Eo=E.useMemo(()=>{var io,Ao,xs,ya;return(0,ce.merge)(((io=me.default.Form)===null||io===void 0?void 0:io.defaultValidateMessages)||{},((xs=(Ao=Gr.locale)===null||Ao===void 0?void 0:Ao.Form)===null||xs===void 0?void 0:xs.defaultValidateMessages)||{},((ya=Gr.form)===null||ya===void 0?void 0:ya.validateMessages)||{},(Dt==null?void 0:Dt.validateMessages)||{})},[Gr,Dt==null?void 0:Dt.validateMessages]);Object.keys(Eo).length>0&&(fi=E.createElement(ae.default.Provider,{value:Eo},fi)),Vt&&(fi=E.createElement(We.default,{locale:Vt,_ANT_MARK__:We.ANT_MARK},fi)),(ji||Ji)&&(fi=E.createElement(ee.default.Provider,{value:So},fi)),ze&&(fi=E.createElement(_t.SizeContextProvider,{size:ze},fi)),fi=E.createElement(wt.default,null,fi);const Wi=E.useMemo(()=>{const io=ti||{},{algorithm:Ao,token:xs,components:ya,cssVar:ra}=io,gs=Ae(io,["algorithm","token","components","cssVar"]),as=Ao&&(!Array.isArray(Ao)||Ao.length>0)?(0,de.createTheme)(Ao):Re.defaultTheme,Ct={};Object.entries(ya||{}).forEach(jn=>{let[Lr,Si]=jn;const Zi=Object.assign({},Si);"algorithm"in Zi&&(Zi.algorithm===!0?Zi.theme=as:(Array.isArray(Zi.algorithm)||typeof Zi.algorithm=="function")&&(Zi.theme=(0,de.createTheme)(Zi.algorithm)),delete Zi.algorithm),Ct[Lr]=Zi});const Wt=Object.assign(Object.assign({},$.default),xs);return Object.assign(Object.assign({},gs),{theme:as,token:Wt,components:Ct,override:Object.assign({override:Wt},Ct),cssVar:ra})},[ti]);return Dn&&(fi=E.createElement(Re.DesignTokenContext.Provider,{value:Wi},fi)),Gr.warning&&(fi=E.createElement(xe.WarningContext.Provider,{value:Gr.warning},fi)),Wn!==void 0&&(fi=E.createElement(we.DisabledContextProvider,{disabled:Wn},fi)),E.createElement(le.ConfigContext.Provider,{value:Gr},fi)},Ln=rr=>{const Ft=E.useContext(le.ConfigContext),Jt=E.useContext(te.default);return E.createElement(mn,Object.assign({parentContext:Ft,legacyLocale:Jt},rr))};Ln.ConfigContext=le.ConfigContext,Ln.SizeContext=_t.default,Ln.config=Ie,Ln.useConfig=et.default,Object.defineProperty(Ln,"SizeContext",{get:()=>_t.default});var qn=G.default=Ln},82932:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return q.useResetIconStyle}});var q=L(3184)},51130:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.VariantContext=G.NoStyleItemContext=G.NoFormStyle=G.FormProvider=G.FormItemPrefixContext=G.FormItemInputContext=G.FormContext=void 0;var E=W(L(67294)),de=E,ee=L(88692),ue=q(L(18475));const ce=G.FormContext=de.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),xe=G.NoStyleItemContext=de.createContext(null),ae=$=>{const le=(0,ue.default)($,["prefixCls"]);return de.createElement(ee.FormProvider,Object.assign({},le))};G.FormProvider=ae;const We=G.FormItemPrefixContext=de.createContext({prefixCls:""}),te=G.FormItemInputContext=de.createContext({}),me=$=>{let{children:le,status:K,override:we}=$;const et=(0,E.useContext)(te),Je=(0,E.useMemo)(()=>{const wt=Object.assign({},et);return we&&delete wt.isFormItemInput,K&&(delete wt.status,delete wt.hasFeedback,delete wt.feedbackIcon),wt},[K,we,et]);return de.createElement(te.Provider,{value:Je},le)};G.NoFormStyle=me;const Re=G.VariantContext=(0,E.createContext)(void 0)},96424:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.Variants=void 0;var q=L(67294),W=L(51130);const E=G.Variants=["outlined","borderless","filled"],de=function(ue){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const xe=(0,q.useContext)(W.VariantContext);let ae;typeof ue!="undefined"?ae=ue:ce===!1?ae="borderless":ae=xe!=null?xe:"outlined";const We=E.includes(ae);return[ae,We]};var ee=G.default=de},2197:function(gt,G,L){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var q=L(67294),W=G.default=(0,q.createContext)(void 0)},10815:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0,G.triggerFocus=pt;var E=W(L(67294)),de=q(L(93967)),ee=q(L(67656)),ue=L(75531),ce=q(L(49314)),xe=L(71434),ae=L(13594),We=L(31929),te=q(L(93319)),me=q(L(14893)),Re=q(L(65693)),$=L(51130),le=q(L(96424)),K=L(46549),we=q(L(81722)),et=q(L(89858)),Je=L(36714),wt=function(Ae,je){var Ze={};for(var lt in Ae)Object.prototype.hasOwnProperty.call(Ae,lt)&&je.indexOf(lt)<0&&(Ze[lt]=Ae[lt]);if(Ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var en=0,lt=Object.getOwnPropertySymbols(Ae);en<lt.length;en++)je.indexOf(lt[en])<0&&Object.prototype.propertyIsEnumerable.call(Ae,lt[en])&&(Ze[lt[en]]=Ae[lt[en]]);return Ze};function pt(Ae,je){if(!Ae)return;Ae.focus(je);const{cursor:Ze}=je||{};if(Ze){const lt=Ae.value.length;switch(Ze){case"start":Ae.setSelectionRange(0,0);break;case"end":Ae.setSelectionRange(lt,lt);break;default:Ae.setSelectionRange(0,lt)}}}const _t=(0,E.forwardRef)((Ae,je)=>{var Ze;const{prefixCls:lt,bordered:en=!0,status:Le,size:St,disabled:Oe,onBlur:nt,onFocus:Ke,suffix:Xe,allowClear:Rt,addonAfter:bt,addonBefore:Ie,className:Gt,style:mn,styles:Ln,rootClassName:qn,onChange:rr,classNames:Ft,variant:Jt}=Ae,un=wt(Ae,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Vn,direction:on,input:Dt}=E.default.useContext(We.ConfigContext),Vt=Vn("input",lt),ze=(0,E.useRef)(null),rt=(0,me.default)(Vt),[jt,U,pe]=(0,et.default)(Vt,rt),{compactSize:ct,compactItemClassnames:he}=(0,K.useCompactItemContext)(Vt,on),$t=(0,Re.default)(wn=>{var Kn;return(Kn=St!=null?St:ct)!==null&&Kn!==void 0?Kn:wn}),sn=E.default.useContext(te.default),pn=Oe!=null?Oe:sn,{status:Dn,hasFeedback:Wn,feedbackIcon:Yn}=(0,E.useContext)($.FormItemInputContext),fn=(0,xe.getMergedStatus)(Dn,Le),vt=(0,Je.hasPrefixSuffix)(Ae)||!!Wn,Pt=(0,E.useRef)(vt),An=(0,we.default)(ze,!0),Pn=wn=>{An(),nt==null||nt(wn)},Xn=wn=>{An(),Ke==null||Ke(wn)},dt=wn=>{An(),rr==null||rr(wn)},Se=(Wn||Xe)&&E.default.createElement(E.default.Fragment,null,Xe,Wn&&Yn),Be=wn=>wn&&E.default.createElement(K.NoCompactStyle,null,E.default.createElement($.NoFormStyle,{override:!0,status:!0},wn)),st=(0,ce.default)(Rt!=null?Rt:Dt==null?void 0:Dt.allowClear),[Lt,It]=(0,le.default)(Jt,en);return jt(E.default.createElement(ee.default,Object.assign({ref:(0,ue.composeRef)(je,ze),prefixCls:Vt,autoComplete:Dt==null?void 0:Dt.autoComplete},un,{disabled:pn,onBlur:Pn,onFocus:Xn,style:Object.assign(Object.assign({},Dt==null?void 0:Dt.style),mn),styles:Object.assign(Object.assign({},Dt==null?void 0:Dt.styles),Ln),suffix:Se,allowClear:st,className:(0,de.default)(Gt,qn,pe,rt,he,Dt==null?void 0:Dt.className),onChange:dt,addonBefore:Be(Ie),addonAfter:Be(bt),classNames:Object.assign(Object.assign(Object.assign({},Ft),Dt==null?void 0:Dt.classNames),{input:(0,de.default)({[`${Vt}-sm`]:$t==="small",[`${Vt}-lg`]:$t==="large",[`${Vt}-rtl`]:on==="rtl"},Ft==null?void 0:Ft.input,(Ze=Dt==null?void 0:Dt.classNames)===null||Ze===void 0?void 0:Ze.input,U),variant:(0,de.default)({[`${Vt}-${Lt}`]:It},(0,xe.getStatusClassNames)(Vt,fn)),affixWrapper:(0,de.default)({[`${Vt}-affix-wrapper-sm`]:$t==="small",[`${Vt}-affix-wrapper-lg`]:$t==="large",[`${Vt}-affix-wrapper-rtl`]:on==="rtl"},U),wrapper:(0,de.default)({[`${Vt}-group-rtl`]:on==="rtl"},U),groupWrapper:(0,de.default)({[`${Vt}-group-wrapper-sm`]:$t==="small",[`${Vt}-group-wrapper-lg`]:$t==="large",[`${Vt}-group-wrapper-rtl`]:on==="rtl",[`${Vt}-group-wrapper-${Lt}`]:It},(0,xe.getStatusClassNames)(`${Vt}-group-wrapper`,fn,Wn),U)})})))});var Me=G.default=_t},14104:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=E,ee=q(L(93967)),ue=q(L(43961)),ce=q(L(49314)),xe=L(71434),ae=L(13594),We=L(31929),te=q(L(93319)),me=q(L(14893)),Re=q(L(65693)),$=L(51130),le=q(L(96424)),K=L(10815),we=q(L(89858)),et=function(pt,_t){var Me={};for(var Ae in pt)Object.prototype.hasOwnProperty.call(pt,Ae)&&_t.indexOf(Ae)<0&&(Me[Ae]=pt[Ae]);if(pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Ae=Object.getOwnPropertySymbols(pt);je<Ae.length;je++)_t.indexOf(Ae[je])<0&&Object.prototype.propertyIsEnumerable.call(pt,Ae[je])&&(Me[Ae[je]]=pt[Ae[je]]);return Me};const Je=(0,E.forwardRef)((pt,_t)=>{var Me,Ae;const{prefixCls:je,bordered:Ze=!0,size:lt,disabled:en,status:Le,allowClear:St,classNames:Oe,rootClassName:nt,className:Ke,style:Xe,styles:Rt,variant:bt}=pt,Ie=et(pt,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Gt,direction:mn,textArea:Ln}=de.useContext(We.ConfigContext),qn=(0,Re.default)(lt),rr=de.useContext(te.default),Ft=en!=null?en:rr,{status:Jt,hasFeedback:un,feedbackIcon:Vn}=de.useContext($.FormItemInputContext),on=(0,xe.getMergedStatus)(Jt,Le),Dt=de.useRef(null);de.useImperativeHandle(_t,()=>{var $t;return{resizableTextArea:($t=Dt.current)===null||$t===void 0?void 0:$t.resizableTextArea,focus:sn=>{var pn,Dn;(0,K.triggerFocus)((Dn=(pn=Dt.current)===null||pn===void 0?void 0:pn.resizableTextArea)===null||Dn===void 0?void 0:Dn.textArea,sn)},blur:()=>{var sn;return(sn=Dt.current)===null||sn===void 0?void 0:sn.blur()}}});const Vt=Gt("input",je),ze=(0,me.default)(Vt),[rt,jt,U]=(0,we.default)(Vt,ze),[pe,ct]=(0,le.default)(bt,Ze),he=(0,ce.default)(St!=null?St:Ln==null?void 0:Ln.allowClear);return rt(de.createElement(ue.default,Object.assign({autoComplete:Ln==null?void 0:Ln.autoComplete},Ie,{style:Object.assign(Object.assign({},Ln==null?void 0:Ln.style),Xe),styles:Object.assign(Object.assign({},Ln==null?void 0:Ln.styles),Rt),disabled:Ft,allowClear:he,className:(0,ee.default)(U,ze,Ke,nt,Ln==null?void 0:Ln.className),classNames:Object.assign(Object.assign(Object.assign({},Oe),Ln==null?void 0:Ln.classNames),{textarea:(0,ee.default)({[`${Vt}-sm`]:qn==="small",[`${Vt}-lg`]:qn==="large"},jt,Oe==null?void 0:Oe.textarea,(Me=Ln==null?void 0:Ln.classNames)===null||Me===void 0?void 0:Me.textarea),variant:(0,ee.default)({[`${Vt}-${pe}`]:ct},(0,xe.getStatusClassNames)(Vt,on)),affixWrapper:(0,ee.default)(`${Vt}-textarea-affix-wrapper`,{[`${Vt}-affix-wrapper-rtl`]:mn==="rtl",[`${Vt}-affix-wrapper-sm`]:qn==="small",[`${Vt}-affix-wrapper-lg`]:qn==="large",[`${Vt}-textarea-show-count`]:pt.showCount||((Ae=pt.count)===null||Ae===void 0?void 0:Ae.show)},jt)}),prefixCls:Vt,suffix:un&&de.createElement("span",{className:`${Vt}-textarea-suffix`},Vn),ref:Dt})))});var wt=G.default=Je},81722:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var q=L(67294);function W(E,de){const ee=(0,q.useRef)([]),ue=()=>{ee.current.push(setTimeout(()=>{var ce,xe,ae,We;!((ce=E.current)===null||ce===void 0)&&ce.input&&((xe=E.current)===null||xe===void 0?void 0:xe.input.getAttribute("type"))==="password"&&(!((ae=E.current)===null||ae===void 0)&&ae.input.hasAttribute("value"))&&((We=E.current)===null||We===void 0||We.input.removeAttribute("value"))}))};return(0,q.useEffect)(()=>(de&&ue(),()=>ee.current.forEach(ce=>{ce&&clearTimeout(ce)})),[]),ue}},89858:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genPlaceholderStyle=G.genInputSmallStyle=G.genInputGroupStyle=G.genBasicInputStyle=G.genActiveStyle=G.default=void 0,Object.defineProperty(G,"initComponentToken",{enumerable:!0,get:function(){return ee.initComponentToken}}),Object.defineProperty(G,"initInputToken",{enumerable:!0,get:function(){return ee.initInputToken}});var q=L(6731),W=L(98078),E=L(78793),de=L(3184),ee=L(25735),ue=L(58594);const ce=pt=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:pt,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});G.genPlaceholderStyle=ce;const xe=pt=>({borderColor:pt.activeBorderColor,boxShadow:pt.activeShadow,outline:0,backgroundColor:pt.activeBg});G.genActiveStyle=xe;const ae=pt=>{const{paddingBlockLG:_t,lineHeightLG:Me,borderRadiusLG:Ae,paddingInlineLG:je}=pt;return{padding:`${(0,q.unit)(_t)} ${(0,q.unit)(je)}`,fontSize:pt.inputFontSizeLG,lineHeight:Me,borderRadius:Ae}},We=pt=>({padding:`${(0,q.unit)(pt.paddingBlockSM)} ${(0,q.unit)(pt.paddingInlineSM)}`,fontSize:pt.inputFontSizeSM,borderRadius:pt.borderRadiusSM});G.genInputSmallStyle=We;const te=pt=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,q.unit)(pt.paddingBlock)} ${(0,q.unit)(pt.paddingInline)}`,color:pt.colorText,fontSize:pt.inputFontSize,lineHeight:pt.lineHeight,borderRadius:pt.borderRadius,transition:`all ${pt.motionDurationMid}`},ce(pt.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:pt.controlHeight,lineHeight:pt.lineHeight,verticalAlign:"bottom",transition:`all ${pt.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},ae(pt)),"&-sm":Object.assign({},We(pt)),"&-rtl, &-textarea-rtl":{direction:"rtl"}});G.genBasicInputStyle=te;const me=pt=>{const{componentCls:_t,antCls:Me}=pt;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:pt.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${_t}, &-lg > ${_t}-group-addon`]:Object.assign({},ae(pt)),[`&-sm ${_t}, &-sm > ${_t}-group-addon`]:Object.assign({},We(pt)),[`&-lg ${Me}-select-single ${Me}-select-selector`]:{height:pt.controlHeightLG},[`&-sm ${Me}-select-single ${Me}-select-selector`]:{height:pt.controlHeightSM},[`> ${_t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${_t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,q.unit)(pt.paddingInline)}`,color:pt.colorText,fontWeight:"normal",fontSize:pt.inputFontSize,textAlign:"center",borderRadius:pt.borderRadius,transition:`all ${pt.motionDurationSlow}`,lineHeight:1,[`${Me}-select`]:{margin:`${(0,q.unit)(pt.calc(pt.paddingBlock).add(1).mul(-1).equal())} ${(0,q.unit)(pt.calc(pt.paddingInline).mul(-1).equal())}`,[`&${Me}-select-single:not(${Me}-select-customize-input):not(${Me}-pagination-size-changer)`]:{[`${Me}-select-selector`]:{backgroundColor:"inherit",border:`${(0,q.unit)(pt.lineWidth)} ${pt.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Me}-select-selector`]:{color:pt.colorPrimary}}},[`${Me}-cascader-picker`]:{margin:`-9px ${(0,q.unit)(pt.calc(pt.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Me}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${_t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${_t}-search-with-button &`]:{zIndex:0}}},[`> ${_t}:first-child, ${_t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Me}-select ${Me}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${_t}-affix-wrapper`]:{[`&:not(:first-child) ${_t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${_t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${_t}:last-child, ${_t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Me}-select ${Me}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${_t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${_t}-search &`]:{borderStartStartRadius:pt.borderRadius,borderEndStartRadius:pt.borderRadius}},[`&:not(:first-child), ${_t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${_t}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,W.clearFix)()),{[`${_t}-group-addon, ${_t}-group-wrap, > ${_t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:pt.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${_t}-affix-wrapper,
        & > ${_t}-number-affix-wrapper,
        & > ${Me}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:pt.calc(pt.lineWidth).mul(-1).equal(),borderInlineEndWidth:pt.lineWidth},[`${_t}`]:{float:"none"},[`& > ${Me}-select > ${Me}-select-selector,
      & > ${Me}-select-auto-complete ${_t},
      & > ${Me}-cascader-picker ${_t},
      & > ${_t}-group-wrapper ${_t}`]:{borderInlineEndWidth:pt.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${Me}-select-focused`]:{zIndex:1},[`& > ${Me}-select > ${Me}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Me}-select:first-child > ${Me}-select-selector,
      & > ${Me}-select-auto-complete:first-child ${_t},
      & > ${Me}-cascader-picker:first-child ${_t}`]:{borderStartStartRadius:pt.borderRadius,borderEndStartRadius:pt.borderRadius},[`& > *:last-child,
      & > ${Me}-select:last-child > ${Me}-select-selector,
      & > ${Me}-cascader-picker:last-child ${_t},
      & > ${Me}-cascader-picker-focused:last-child ${_t}`]:{borderInlineEndWidth:pt.lineWidth,borderStartEndRadius:pt.borderRadius,borderEndEndRadius:pt.borderRadius},[`& > ${Me}-select-auto-complete ${_t}`]:{verticalAlign:"top"},[`${_t}-group-wrapper + ${_t}-group-wrapper`]:{marginInlineStart:pt.calc(pt.lineWidth).mul(-1).equal(),[`${_t}-affix-wrapper`]:{borderRadius:0}},[`${_t}-group-wrapper:not(:last-child)`]:{[`&${_t}-search > ${_t}-group`]:{[`& > ${_t}-group-addon > ${_t}-search-button`]:{borderRadius:0},[`& > ${_t}`]:{borderStartStartRadius:pt.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:pt.borderRadius}}}})}};G.genInputGroupStyle=me;const Re=pt=>{const{componentCls:_t,controlHeightSM:Me,lineWidth:Ae,calc:je}=pt,lt=je(Me).sub(je(Ae).mul(2)).sub(16).div(2).equal();return{[_t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(pt)),te(pt)),(0,ue.genOutlinedStyle)(pt)),(0,ue.genFilledStyle)(pt)),(0,ue.genBorderlessStyle)(pt)),{'&[type="color"]':{height:pt.controlHeight,[`&${_t}-lg`]:{height:pt.controlHeightLG},[`&${_t}-sm`]:{height:Me,paddingTop:lt,paddingBottom:lt}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},$=pt=>{const{componentCls:_t}=pt;return{[`${_t}-clear-icon`]:{margin:0,color:pt.colorTextQuaternary,fontSize:pt.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${pt.motionDurationSlow}`,"&:hover":{color:pt.colorTextTertiary},"&:active":{color:pt.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,q.unit)(pt.inputAffixPadding)}`}}}},le=pt=>{const{componentCls:_t,inputAffixPadding:Me,colorTextDescription:Ae,motionDurationSlow:je,colorIcon:Ze,colorIconHover:lt,iconCls:en}=pt;return{[`${_t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},te(pt)),{display:"inline-flex",[`&:not(${_t}-disabled):hover`]:{zIndex:1,[`${_t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${_t}`]:{padding:0},[`> input${_t}, > textarea${_t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${_t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:pt.paddingXS}},"&-show-count-suffix":{color:Ae},"&-show-count-has-suffix":{marginInlineEnd:pt.paddingXXS},"&-prefix":{marginInlineEnd:Me},"&-suffix":{marginInlineStart:Me}}}),$(pt)),{[`${en}${_t}-password-icon`]:{color:Ze,cursor:"pointer",transition:`all ${je}`,"&:hover":{color:lt}}})}},K=pt=>{const{componentCls:_t,borderRadiusLG:Me,borderRadiusSM:Ae}=pt;return{[`${_t}-group`]:Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(pt)),me(pt)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${_t}-group-addon`]:{borderRadius:Me,fontSize:pt.inputFontSizeLG}},"&-sm":{[`${_t}-group-addon`]:{borderRadius:Ae}}},(0,ue.genOutlinedGroupStyle)(pt)),(0,ue.genFilledGroupStyle)(pt)),{[`&:not(${_t}-compact-first-item):not(${_t}-compact-last-item)${_t}-compact-item`]:{[`${_t}, ${_t}-group-addon`]:{borderRadius:0}},[`&:not(${_t}-compact-last-item)${_t}-compact-first-item`]:{[`${_t}, ${_t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${_t}-compact-first-item)${_t}-compact-last-item`]:{[`${_t}, ${_t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${_t}-compact-last-item)${_t}-compact-item`]:{[`${_t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},we=pt=>{const{componentCls:_t,antCls:Me}=pt,Ae=`${_t}-search`;return{[Ae]:{[`${_t}`]:{"&:hover, &:focus":{borderColor:pt.colorPrimaryHover,[`+ ${_t}-group-addon ${Ae}-button:not(${Me}-btn-primary)`]:{borderInlineStartColor:pt.colorPrimaryHover}}},[`${_t}-affix-wrapper`]:{borderRadius:0},[`${_t}-lg`]:{lineHeight:pt.calc(pt.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${_t}-group`]:{[`> ${_t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ae}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:pt.borderRadius,borderEndEndRadius:pt.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ae}-button:not(${Me}-btn-primary)`]:{color:pt.colorTextDescription,"&:hover":{color:pt.colorPrimaryHover},"&:active":{color:pt.colorPrimaryActive},[`&${Me}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ae}-button`]:{height:pt.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ae}-button`]:{height:pt.controlHeightLG},[`&-small ${Ae}-button`]:{height:pt.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${_t}-compact-item`]:{[`&:not(${_t}-compact-last-item)`]:{[`${_t}-group-addon`]:{[`${_t}-search-button`]:{marginInlineEnd:pt.calc(pt.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${_t}-compact-first-item)`]:{[`${_t},${_t}-affix-wrapper`]:{borderRadius:0}},[`> ${_t}-group-addon ${_t}-search-button,
        > ${_t},
        ${_t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${_t}-affix-wrapper-focused`]:{zIndex:2}}}}},et=pt=>{const{componentCls:_t,paddingLG:Me}=pt,Ae=`${_t}-textarea`;return{[Ae]:{position:"relative","&-show-count":{[`> ${_t}`]:{height:"100%"},[`${_t}-data-count`]:{position:"absolute",bottom:pt.calc(pt.fontSize).mul(pt.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:pt.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${_t},
        &-affix-wrapper${Ae}-has-feedback ${_t}
      `]:{paddingInlineEnd:Me},[`&-affix-wrapper${_t}-affix-wrapper`]:{padding:0,[`> textarea${_t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${_t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${_t}-clear-icon`]:{position:"absolute",insetInlineEnd:pt.paddingXS,insetBlockStart:pt.paddingXS},[`${Ae}-suffix`]:{position:"absolute",top:0,insetInlineEnd:pt.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Je=pt=>{const{componentCls:_t}=pt;return{[`${_t}-out-of-range`]:{[`&, & input, & textarea, ${_t}-show-count-suffix, ${_t}-data-count`]:{color:pt.colorError}}}};var wt=G.default=(0,de.genStyleHooks)("Input",pt=>{const _t=(0,de.mergeToken)(pt,(0,ee.initInputToken)(pt));return[Re(_t),et(_t),le(_t),K(_t),we(_t),Je(_t),(0,E.genCompactItemStyle)(_t)]},ee.initComponentToken,{resetFont:!1})},25735:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initComponentToken=void 0,G.initInputToken=W;var q=L(3184);function W(de){return(0,q.mergeToken)(de,{inputAffixPadding:de.paddingXXS})}const E=de=>{const{controlHeight:ee,fontSize:ue,lineHeight:ce,lineWidth:xe,controlHeightSM:ae,controlHeightLG:We,fontSizeLG:te,lineHeightLG:me,paddingSM:Re,controlPaddingHorizontalSM:$,controlPaddingHorizontal:le,colorFillAlter:K,colorPrimaryHover:we,colorPrimary:et,controlOutlineWidth:Je,controlOutline:wt,colorErrorOutline:pt,colorWarningOutline:_t,colorBgContainer:Me}=de;return{paddingBlock:Math.max(Math.round((ee-ue*ce)/2*10)/10-xe,0),paddingBlockSM:Math.max(Math.round((ae-ue*ce)/2*10)/10-xe,0),paddingBlockLG:Math.ceil((We-te*me)/2*10)/10-xe,paddingInline:Re-xe,paddingInlineSM:$-xe,paddingInlineLG:le-xe,addonBg:K,activeBorderColor:et,hoverBorderColor:we,activeShadow:`0 0 0 ${Je}px ${wt}`,errorActiveShadow:`0 0 0 ${Je}px ${pt}`,warningActiveShadow:`0 0 0 ${Je}px ${_t}`,hoverBg:Me,activeBg:Me,inputFontSize:ue,inputFontSizeLG:te,inputFontSizeSM:ue}};G.initComponentToken=E},58594:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genOutlinedStyle=G.genOutlinedGroupStyle=G.genHoverStyle=G.genFilledStyle=G.genFilledGroupStyle=G.genDisabledStyle=G.genBorderlessStyle=G.genBaseOutlinedStyle=void 0;var q=L(6731),W=L(3184);const E=K=>({borderColor:K.hoverBorderColor,backgroundColor:K.hoverBg});G.genHoverStyle=E;const de=K=>({color:K.colorTextDisabled,backgroundColor:K.colorBgContainerDisabled,borderColor:K.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},E((0,W.mergeToken)(K,{hoverBorderColor:K.colorBorder,hoverBg:K.colorBgContainerDisabled})))});G.genDisabledStyle=de;const ee=(K,we)=>({background:K.colorBgContainer,borderWidth:K.lineWidth,borderStyle:K.lineType,borderColor:we.borderColor,"&:hover":{borderColor:we.hoverBorderColor,backgroundColor:K.hoverBg},"&:focus, &:focus-within":{borderColor:we.activeBorderColor,boxShadow:we.activeShadow,outline:0,backgroundColor:K.activeBg}});G.genBaseOutlinedStyle=ee;const ue=(K,we)=>({[`&${K.componentCls}-status-${we.status}:not(${K.componentCls}-disabled)`]:Object.assign(Object.assign({},ee(K,we)),{[`${K.componentCls}-prefix, ${K.componentCls}-suffix`]:{color:we.affixColor}}),[`&${K.componentCls}-status-${we.status}${K.componentCls}-disabled`]:{borderColor:we.borderColor}}),ce=(K,we)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ee(K,{borderColor:K.colorBorder,hoverBorderColor:K.hoverBorderColor,activeBorderColor:K.activeBorderColor,activeShadow:K.activeShadow})),{[`&${K.componentCls}-disabled, &[disabled]`]:Object.assign({},de(K))}),ue(K,{status:"error",borderColor:K.colorError,hoverBorderColor:K.colorErrorBorderHover,activeBorderColor:K.colorError,activeShadow:K.errorActiveShadow,affixColor:K.colorError})),ue(K,{status:"warning",borderColor:K.colorWarning,hoverBorderColor:K.colorWarningBorderHover,activeBorderColor:K.colorWarning,activeShadow:K.warningActiveShadow,affixColor:K.colorWarning})),we)});G.genOutlinedStyle=ce;const xe=(K,we)=>({[`&${K.componentCls}-group-wrapper-status-${we.status}`]:{[`${K.componentCls}-group-addon`]:{borderColor:we.addonBorderColor,color:we.addonColor}}}),ae=K=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${K.componentCls}-group`]:{"&-addon":{background:K.addonBg,border:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},xe(K,{status:"error",addonBorderColor:K.colorError,addonColor:K.colorErrorText})),xe(K,{status:"warning",addonBorderColor:K.colorWarning,addonColor:K.colorWarningText})),{[`&${K.componentCls}-group-wrapper-disabled`]:{[`${K.componentCls}-group-addon`]:Object.assign({},de(K))}})});G.genOutlinedGroupStyle=ae;const We=(K,we)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${K.componentCls}-disabled, &[disabled]`]:{color:K.colorTextDisabled}},we)});G.genBorderlessStyle=We;const te=(K,we)=>({background:we.bg,borderWidth:K.lineWidth,borderStyle:K.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:we==null?void 0:we.inputColor},"&:hover":{background:we.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:we.activeBorderColor,backgroundColor:K.activeBg}}),me=(K,we)=>({[`&${K.componentCls}-status-${we.status}:not(${K.componentCls}-disabled)`]:Object.assign(Object.assign({},te(K,we)),{[`${K.componentCls}-prefix, ${K.componentCls}-suffix`]:{color:we.affixColor}})}),Re=(K,we)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te(K,{bg:K.colorFillTertiary,hoverBg:K.colorFillSecondary,activeBorderColor:K.colorPrimary})),{[`&${K.componentCls}-disabled, &[disabled]`]:Object.assign({},de(K))}),me(K,{status:"error",bg:K.colorErrorBg,hoverBg:K.colorErrorBgHover,activeBorderColor:K.colorError,inputColor:K.colorErrorText,affixColor:K.colorError})),me(K,{status:"warning",bg:K.colorWarningBg,hoverBg:K.colorWarningBgHover,activeBorderColor:K.colorWarning,inputColor:K.colorWarningText,affixColor:K.colorWarning})),we)});G.genFilledStyle=Re;const $=(K,we)=>({[`&${K.componentCls}-group-wrapper-status-${we.status}`]:{[`${K.componentCls}-group-addon`]:{background:we.addonBg,color:we.addonColor}}}),le=K=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${K.componentCls}-group`]:{"&-addon":{background:K.colorFillTertiary},[`${K.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorSplit}`}}}},$(K,{status:"error",addonBg:K.colorErrorBg,addonColor:K.colorErrorText})),$(K,{status:"warning",addonBg:K.colorWarningBg,addonColor:K.colorWarningText})),{[`&${K.componentCls}-group-wrapper-disabled`]:{[`${K.componentCls}-group`]:{"&-addon":{background:K.colorFillTertiary,color:K.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderTop:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderBottom:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderTop:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderBottom:`${(0,q.unit)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`}}}})});G.genFilledGroupStyle=le},36714:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.hasPrefixSuffix=L;function L(q){return!!(q.prefix||q.suffix||q.allowClear||q.showCount)}},44805:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var q=L(67294);const W=(0,q.createContext)(void 0);var E=G.default=W},24522:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.ANT_MARK=void 0,Object.defineProperty(G,"useLocale",{enumerable:!0,get:function(){return ce.default}});var E=W(L(67294)),de=L(13594),ee=L(10625),ue=q(L(44805)),ce=q(L(76647));const xe=G.ANT_MARK="internalMark",ae=te=>{const{locale:me={},children:Re,_ANT_MARK__:$}=te;E.useEffect(()=>(0,ee.changeConfirmLocale)(me&&me.Modal),[me]);const le=E.useMemo(()=>Object.assign(Object.assign({},me),{exist:!0}),[me]);return E.createElement(ue.default.Provider,{value:le},Re)};var We=G.default=ae},76647:function(gt,G,L){"use strict";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(44805)),ee=q(L(18253));const ue=(xe,ae)=>{const We=E.useContext(de.default),te=E.useMemo(()=>{var Re;const $=ae||ee.default[xe],le=(Re=We==null?void 0:We[xe])!==null&&Re!==void 0?Re:{};return Object.assign(Object.assign({},typeof $=="function"?$():$),le||{})},[xe,ae,We]),me=E.useMemo(()=>{const Re=We==null?void 0:We.locale;return We!=null&&We.exist&&!Re?ee.default.locale:Re},[We]);return[te,me]};var ce=G.default=ue},10625:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.changeConfirmLocale=ue,G.getConfirmLocale=ce;var W=q(L(18253));let E=Object.assign({},W.default.Modal),de=[];const ee=()=>de.reduce((xe,ae)=>Object.assign(Object.assign({},xe),ae),W.default.Modal);function ue(xe){if(xe){const ae=Object.assign({},xe);return de.push(ae),E=ee(),()=>{de=de.filter(We=>We!==ae),E=ee()}}E=Object.assign({},W.default.Modal)}function ce(){return E}},46549:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useCompactItemContext=G.default=G.SpaceCompactItemContext=G.NoCompactStyle=void 0;var E=W(L(67294)),de=q(L(93967)),ee=q(L(45598)),ue=L(31929),ce=q(L(65693)),xe=q(L(54277)),ae=function(K,we){var et={};for(var Je in K)Object.prototype.hasOwnProperty.call(K,Je)&&we.indexOf(Je)<0&&(et[Je]=K[Je]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Je=Object.getOwnPropertySymbols(K);wt<Je.length;wt++)we.indexOf(Je[wt])<0&&Object.prototype.propertyIsEnumerable.call(K,Je[wt])&&(et[Je[wt]]=K[Je[wt]]);return et};const We=G.SpaceCompactItemContext=E.createContext(null),te=(K,we)=>{const et=E.useContext(We),Je=E.useMemo(()=>{if(!et)return"";const{compactDirection:wt,isFirstItem:pt,isLastItem:_t}=et,Me=wt==="vertical"?"-vertical-":"-";return(0,de.default)(`${K}-compact${Me}item`,{[`${K}-compact${Me}first-item`]:pt,[`${K}-compact${Me}last-item`]:_t,[`${K}-compact${Me}item-rtl`]:we==="rtl"})},[K,we,et]);return{compactSize:et==null?void 0:et.compactSize,compactDirection:et==null?void 0:et.compactDirection,compactItemClassnames:Je}};G.useCompactItemContext=te;const me=K=>{let{children:we}=K;return E.createElement(We.Provider,{value:null},we)};G.NoCompactStyle=me;const Re=K=>{var{children:we}=K,et=ae(K,["children"]);return E.createElement(We.Provider,{value:et},we)},$=K=>{const{getPrefixCls:we,direction:et}=E.useContext(ue.ConfigContext),{size:Je,direction:wt,block:pt,prefixCls:_t,className:Me,rootClassName:Ae,children:je}=K,Ze=ae(K,["size","direction","block","prefixCls","className","rootClassName","children"]),lt=(0,ce.default)(Rt=>Je!=null?Je:Rt),en=we("space-compact",_t),[Le,St]=(0,xe.default)(en),Oe=(0,de.default)(en,St,{[`${en}-rtl`]:et==="rtl",[`${en}-block`]:pt,[`${en}-vertical`]:wt==="vertical"},Me,Ae),nt=E.useContext(We),Ke=(0,ee.default)(je),Xe=E.useMemo(()=>Ke.map((Rt,bt)=>{const Ie=Rt&&Rt.key||`${en}-item-${bt}`;return E.createElement(Re,{key:Ie,compactSize:lt,compactDirection:wt,isFirstItem:bt===0&&(!nt||(nt==null?void 0:nt.isFirstItem)),isLastItem:bt===Ke.length-1&&(!nt||(nt==null?void 0:nt.isLastItem))},Rt)}),[Je,Ke,nt]);return Ke.length===0?null:Le(E.createElement("div",Object.assign({className:Oe},Ze),Xe))};var le=G.default=$},35969:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{const{componentCls:E}=W;return{[E]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var q=G.default=L},54277:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var W=L(3184),E=q(L(35969));const de=xe=>{const{componentCls:ae,antCls:We}=xe;return{[ae]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${ae}-item:empty`]:{display:"none"},[`${ae}-item > ${We}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},ee=xe=>{const{componentCls:ae}=xe;return{[ae]:{"&-gap-row-small":{rowGap:xe.spaceGapSmallSize},"&-gap-row-middle":{rowGap:xe.spaceGapMiddleSize},"&-gap-row-large":{rowGap:xe.spaceGapLargeSize},"&-gap-col-small":{columnGap:xe.spaceGapSmallSize},"&-gap-col-middle":{columnGap:xe.spaceGapMiddleSize},"&-gap-col-large":{columnGap:xe.spaceGapLargeSize}}}},ue=()=>({});G.prepareComponentToken=ue;var ce=G.default=(0,W.genStyleHooks)("Space",xe=>{const ae=(0,W.mergeToken)(xe,{spaceGapSmallSize:xe.paddingXS,spaceGapMiddleSize:xe.padding,spaceGapLargeSize:xe.paddingLG});return[de(ae),ee(ae),(0,E.default)(ae)]},()=>({}),{resetStyle:!1})},78793:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genCompactItemStyle=W;function L(E,de,ee){const{focusElCls:ue,focus:ce,borderElCls:xe}=ee,ae=xe?"> *":"",We=["hover",ce?"focus":null,"active"].filter(Boolean).map(te=>`&:${te} ${ae}`).join(",");return{[`&-item:not(${de}-last-item)`]:{marginInlineEnd:E.calc(E.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[We]:{zIndex:2}},ue?{[`&${ue}`]:{zIndex:2}}:{}),{[`&[disabled] ${ae}`]:{zIndex:0}})}}function q(E,de,ee){const{borderElCls:ue}=ee,ce=ue?`> ${ue}`:"";return{[`&-item:not(${de}-first-item):not(${de}-last-item) ${ce}`]:{borderRadius:0},[`&-item:not(${de}-last-item)${de}-first-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${de}-first-item)${de}-last-item`]:{[`& ${ce}, &${E}-sm ${ce}, &${E}-lg ${ce}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function W(E){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:ee}=E,ue=`${ee}-compact`;return{[ue]:Object.assign(Object.assign({},L(E,ue,de)),q(ee,ue,de))}}},98078:function(gt,G,L){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.genLinkStyle=G.genFocusStyle=G.genFocusOutline=G.genCommonStyle=G.clearFix=void 0,Object.defineProperty(G,"operationUnit",{enumerable:!0,get:function(){return W.operationUnit}}),G.textEllipsis=G.resetIcon=G.resetComponent=void 0;var q=L(6731),W=L(22548);const E=G.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},de=function(te){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:te.colorText,fontSize:te.fontSize,lineHeight:te.lineHeight,listStyle:"none",fontFamily:me?"inherit":te.fontFamily}};G.resetComponent=de;const ee=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});G.resetIcon=ee;const ue=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});G.clearFix=ue;const ce=te=>({a:{color:te.colorLink,textDecoration:te.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${te.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:te.colorLinkHover},"&:active":{color:te.colorLinkActive},"&:active,\n  &:hover":{textDecoration:te.linkHoverDecoration,outline:0},"&:focus":{textDecoration:te.linkFocusDecoration,outline:0},"&[disabled]":{color:te.colorTextDisabled,cursor:"not-allowed"}}});G.genLinkStyle=ce;const xe=(te,me,Re,$)=>{const le=`[class^="${me}"], [class*=" ${me}"]`,K=Re?`.${Re}`:le,we={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let et={};return $!==!1&&(et={fontFamily:te.fontFamily,fontSize:te.fontSize}),{[K]:Object.assign(Object.assign(Object.assign({},et),we),{[le]:we})}};G.genCommonStyle=xe;const ae=te=>({outline:`${(0,q.unit)(te.lineWidthFocus)} solid ${te.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});G.genFocusOutline=ae;const We=te=>({"&:focus-visible":Object.assign({},ae(te))});G.genFocusStyle=We},57253:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>({[W.componentCls]:{[`${W.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}},[`${W.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}}});var q=G.default=L},84460:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initFadeMotion=G.fadeOut=G.fadeIn=void 0;var q=L(6731),W=L(94631);const E=G.fadeIn=new q.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),de=G.fadeOut=new q.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),ee=function(ue){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:xe}=ue,ae=`${xe}-fade`,We=ce?"&":"";return[(0,W.initMotion)(ae,E,de,ue.motionDurationMid,ce),{[`
        ${We}${ae}-enter,
        ${We}${ae}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${We}${ae}-leave`]:{animationTimingFunction:"linear"}}]};G.initFadeMotion=ee},42836:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"fadeIn",{enumerable:!0,get:function(){return E.fadeIn}}),Object.defineProperty(G,"fadeOut",{enumerable:!0,get:function(){return E.fadeOut}}),Object.defineProperty(G,"genCollapseMotion",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(G,"initFadeMotion",{enumerable:!0,get:function(){return E.initFadeMotion}}),Object.defineProperty(G,"initMoveMotion",{enumerable:!0,get:function(){return de.initMoveMotion}}),Object.defineProperty(G,"initSlideMotion",{enumerable:!0,get:function(){return ee.initSlideMotion}}),Object.defineProperty(G,"initZoomMotion",{enumerable:!0,get:function(){return ue.initZoomMotion}}),Object.defineProperty(G,"moveDownIn",{enumerable:!0,get:function(){return de.moveDownIn}}),Object.defineProperty(G,"moveDownOut",{enumerable:!0,get:function(){return de.moveDownOut}}),Object.defineProperty(G,"moveLeftIn",{enumerable:!0,get:function(){return de.moveLeftIn}}),Object.defineProperty(G,"moveLeftOut",{enumerable:!0,get:function(){return de.moveLeftOut}}),Object.defineProperty(G,"moveRightIn",{enumerable:!0,get:function(){return de.moveRightIn}}),Object.defineProperty(G,"moveRightOut",{enumerable:!0,get:function(){return de.moveRightOut}}),Object.defineProperty(G,"moveUpIn",{enumerable:!0,get:function(){return de.moveUpIn}}),Object.defineProperty(G,"moveUpOut",{enumerable:!0,get:function(){return de.moveUpOut}}),Object.defineProperty(G,"slideDownIn",{enumerable:!0,get:function(){return ee.slideDownIn}}),Object.defineProperty(G,"slideDownOut",{enumerable:!0,get:function(){return ee.slideDownOut}}),Object.defineProperty(G,"slideLeftIn",{enumerable:!0,get:function(){return ee.slideLeftIn}}),Object.defineProperty(G,"slideLeftOut",{enumerable:!0,get:function(){return ee.slideLeftOut}}),Object.defineProperty(G,"slideRightIn",{enumerable:!0,get:function(){return ee.slideRightIn}}),Object.defineProperty(G,"slideRightOut",{enumerable:!0,get:function(){return ee.slideRightOut}}),Object.defineProperty(G,"slideUpIn",{enumerable:!0,get:function(){return ee.slideUpIn}}),Object.defineProperty(G,"slideUpOut",{enumerable:!0,get:function(){return ee.slideUpOut}}),Object.defineProperty(G,"zoomBigIn",{enumerable:!0,get:function(){return ue.zoomBigIn}}),Object.defineProperty(G,"zoomBigOut",{enumerable:!0,get:function(){return ue.zoomBigOut}}),Object.defineProperty(G,"zoomDownIn",{enumerable:!0,get:function(){return ue.zoomDownIn}}),Object.defineProperty(G,"zoomDownOut",{enumerable:!0,get:function(){return ue.zoomDownOut}}),Object.defineProperty(G,"zoomIn",{enumerable:!0,get:function(){return ue.zoomIn}}),Object.defineProperty(G,"zoomLeftIn",{enumerable:!0,get:function(){return ue.zoomLeftIn}}),Object.defineProperty(G,"zoomLeftOut",{enumerable:!0,get:function(){return ue.zoomLeftOut}}),Object.defineProperty(G,"zoomOut",{enumerable:!0,get:function(){return ue.zoomOut}}),Object.defineProperty(G,"zoomRightIn",{enumerable:!0,get:function(){return ue.zoomRightIn}}),Object.defineProperty(G,"zoomRightOut",{enumerable:!0,get:function(){return ue.zoomRightOut}}),Object.defineProperty(G,"zoomUpIn",{enumerable:!0,get:function(){return ue.zoomUpIn}}),Object.defineProperty(G,"zoomUpOut",{enumerable:!0,get:function(){return ue.zoomUpOut}});var W=q(L(57253)),E=L(84460),de=L(17060),ee=L(17581),ue=L(99269)},94631:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initMotion=void 0;const L=E=>({animationDuration:E,animationFillMode:"both"}),q=E=>({animationDuration:E,animationFillMode:"both"}),W=function(E,de,ee,ue){const xe=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${xe}${E}-enter,
      ${xe}${E}-appear
    `]:Object.assign(Object.assign({},L(ue)),{animationPlayState:"paused"}),[`${xe}${E}-leave`]:Object.assign(Object.assign({},q(ue)),{animationPlayState:"paused"}),[`
      ${xe}${E}-enter${E}-enter-active,
      ${xe}${E}-appear${E}-appear-active
    `]:{animationName:de,animationPlayState:"running"},[`${xe}${E}-leave${E}-leave-active`]:{animationName:ee,animationPlayState:"running",pointerEvents:"none"}}};G.initMotion=W},17060:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.moveUpOut=G.moveUpIn=G.moveRightOut=G.moveRightIn=G.moveLeftOut=G.moveLeftIn=G.moveDownOut=G.moveDownIn=G.initMoveMotion=void 0;var q=L(6731),W=L(94631);const E=G.moveDownIn=new q.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),de=G.moveDownOut=new q.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),ee=G.moveLeftIn=new q.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ue=G.moveLeftOut=new q.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ce=G.moveRightIn=new q.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),xe=G.moveRightOut=new q.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ae=G.moveUpIn=new q.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),We=G.moveUpOut=new q.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),te={"move-up":{inKeyframes:ae,outKeyframes:We},"move-down":{inKeyframes:E,outKeyframes:de},"move-left":{inKeyframes:ee,outKeyframes:ue},"move-right":{inKeyframes:ce,outKeyframes:xe}},me=(Re,$)=>{const{antCls:le}=Re,K=`${le}-${$}`,{inKeyframes:we,outKeyframes:et}=te[$];return[(0,W.initMotion)(K,we,et,Re.motionDurationMid),{[`
        ${K}-enter,
        ${K}-appear
      `]:{opacity:0,animationTimingFunction:Re.motionEaseOutCirc},[`${K}-leave`]:{animationTimingFunction:Re.motionEaseInOutCirc}}]};G.initMoveMotion=me},17581:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slideUpOut=G.slideUpIn=G.slideRightOut=G.slideRightIn=G.slideLeftOut=G.slideLeftIn=G.slideDownOut=G.slideDownIn=G.initSlideMotion=void 0;var q=L(6731),W=L(94631);const E=G.slideUpIn=new q.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),de=G.slideUpOut=new q.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),ee=G.slideDownIn=new q.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),ue=G.slideDownOut=new q.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ce=G.slideLeftIn=new q.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),xe=G.slideLeftOut=new q.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),ae=G.slideRightIn=new q.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),We=G.slideRightOut=new q.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),te={"slide-up":{inKeyframes:E,outKeyframes:de},"slide-down":{inKeyframes:ee,outKeyframes:ue},"slide-left":{inKeyframes:ce,outKeyframes:xe},"slide-right":{inKeyframes:ae,outKeyframes:We}},me=(Re,$)=>{const{antCls:le}=Re,K=`${le}-${$}`,{inKeyframes:we,outKeyframes:et}=te[$];return[(0,W.initMotion)(K,we,et,Re.motionDurationMid),{[`
      ${K}-enter,
      ${K}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:Re.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${K}-leave`]:{animationTimingFunction:Re.motionEaseInQuint}}]};G.initSlideMotion=me},99269:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.zoomUpOut=G.zoomUpIn=G.zoomRightOut=G.zoomRightIn=G.zoomOut=G.zoomLeftOut=G.zoomLeftIn=G.zoomIn=G.zoomDownOut=G.zoomDownIn=G.zoomBigOut=G.zoomBigIn=G.initZoomMotion=void 0;var q=L(6731),W=L(94631);const E=G.zoomIn=new q.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),de=G.zoomOut=new q.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),ee=G.zoomBigIn=new q.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ue=G.zoomBigOut=new q.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),ce=G.zoomUpIn=new q.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),xe=G.zoomUpOut=new q.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),ae=G.zoomLeftIn=new q.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),We=G.zoomLeftOut=new q.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),te=G.zoomRightIn=new q.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),me=G.zoomRightOut=new q.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Re=G.zoomDownIn=new q.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),$=G.zoomDownOut=new q.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),le={zoom:{inKeyframes:E,outKeyframes:de},"zoom-big":{inKeyframes:ee,outKeyframes:ue},"zoom-big-fast":{inKeyframes:ee,outKeyframes:ue},"zoom-left":{inKeyframes:ae,outKeyframes:We},"zoom-right":{inKeyframes:te,outKeyframes:me},"zoom-up":{inKeyframes:ce,outKeyframes:xe},"zoom-down":{inKeyframes:Re,outKeyframes:$}},K=(we,et)=>{const{antCls:Je}=we,wt=`${Je}-${et}`,{inKeyframes:pt,outKeyframes:_t}=le[et];return[(0,W.initMotion)(wt,pt,_t,et==="zoom-big-fast"?we.motionDurationFast:we.motionDurationMid),{[`
        ${wt}-enter,
        ${wt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:we.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${wt}-leave`]:{animationTimingFunction:we.motionEaseInOutCirc}}]};G.initZoomMotion=K},22548:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.operationUnit=void 0;const L=q=>({color:q.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${q.motionDurationSlow}`,"&:focus, &:hover":{color:q.colorLinkHover},"&:active":{color:q.colorLinkActive}});G.operationUnit=L},9064:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MAX_VERTICAL_CONTENT_RADIUS=void 0,G.default=ee,G.getArrowOffsetToken=E;var q=L(51337);const W=G.MAX_VERTICAL_CONTENT_RADIUS=8;function E(ue){const{contentRadius:ce,limitVerticalRadius:xe}=ue,ae=ce>12?ce+2:12;return{arrowOffsetHorizontal:ae,arrowOffsetVertical:xe?W:ae}}function de(ue,ce){return ue?ce:{}}function ee(ue,ce,xe){const{componentCls:ae,boxShadowPopoverArrow:We,arrowOffsetVertical:te,arrowOffsetHorizontal:me}=ue,{arrowDistance:Re=0,arrowPlacement:$={left:!0,right:!0,top:!0,bottom:!0}}=xe||{};return{[ae]:Object.assign(Object.assign(Object.assign(Object.assign({[`${ae}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,q.genRoundedArrow)(ue,ce,We)),{"&:before":{background:ce}})]},de(!!$.top,{[[`&-placement-top > ${ae}-arrow`,`&-placement-topLeft > ${ae}-arrow`,`&-placement-topRight > ${ae}-arrow`].join(",")]:{bottom:Re,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${ae}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${ae}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-topRight > ${ae}-arrow`]:{right:{_skip_check_:!0,value:me}}})),de(!!$.bottom,{[[`&-placement-bottom > ${ae}-arrow`,`&-placement-bottomLeft > ${ae}-arrow`,`&-placement-bottomRight > ${ae}-arrow`].join(",")]:{top:Re,transform:"translateY(-100%)"},[`&-placement-bottom > ${ae}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${ae}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-bottomRight > ${ae}-arrow`]:{right:{_skip_check_:!0,value:me}}})),de(!!$.left,{[[`&-placement-left > ${ae}-arrow`,`&-placement-leftTop > ${ae}-arrow`,`&-placement-leftBottom > ${ae}-arrow`].join(",")]:{right:{_skip_check_:!0,value:Re},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${ae}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${ae}-arrow`]:{top:te},[`&-placement-leftBottom > ${ae}-arrow`]:{bottom:te}})),de(!!$.right,{[[`&-placement-right > ${ae}-arrow`,`&-placement-rightTop > ${ae}-arrow`,`&-placement-rightBottom > ${ae}-arrow`].join(",")]:{left:{_skip_check_:!0,value:Re},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${ae}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${ae}-arrow`]:{top:te},[`&-placement-rightBottom > ${ae}-arrow`]:{bottom:te}}))}}},51337:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genRoundedArrow=void 0,G.getArrowToken=W;var q=L(6731);function W(de){const{sizePopupArrow:ee,borderRadiusXS:ue,borderRadiusOuter:ce}=de,xe=ee/2,ae=0,We=xe,te=ce*1/Math.sqrt(2),me=xe-ce*(1-1/Math.sqrt(2)),Re=xe-ue*(1/Math.sqrt(2)),$=ce*(Math.sqrt(2)-1)+ue*(1/Math.sqrt(2)),le=2*xe-Re,K=$,we=2*xe-te,et=me,Je=2*xe-ae,wt=We,pt=xe*Math.sqrt(2)+ce*(Math.sqrt(2)-2),_t=ce*(Math.sqrt(2)-1),Me=`polygon(${_t}px 100%, 50% ${_t}px, ${2*xe-_t}px 100%, ${_t}px 100%)`,Ae=`path('M ${ae} ${We} A ${ce} ${ce} 0 0 0 ${te} ${me} L ${Re} ${$} A ${ue} ${ue} 0 0 1 ${le} ${K} L ${we} ${et} A ${ce} ${ce} 0 0 0 ${Je} ${wt} Z')`;return{arrowShadowWidth:pt,arrowPath:Ae,arrowPolygon:Me}}const E=(de,ee,ue)=>{const{sizePopupArrow:ce,arrowPolygon:xe,arrowPath:ae,arrowShadowWidth:We,borderRadiusXS:te,calc:me}=de;return{pointerEvents:"none",width:ce,height:ce,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:ce,height:me(ce).div(2).equal(),background:ee,clipPath:{_multi_value_:!0,value:[xe,ae]},content:'""'},"&::after":{content:'""',position:"absolute",width:We,height:We,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,q.unit)(te)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:ue,zIndex:0,background:"transparent"}}};G.genRoundedArrow=E},89329:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultTheme=G.defaultConfig=G.DesignTokenContext=void 0;var W=q(L(67294)),E=L(6731),de=q(L(9924)),ee=q(L(98411));const ue=G.defaultTheme=(0,E.createTheme)(de.default),ce=G.defaultConfig={token:ee.default,override:{override:ee.default},hashed:!0},xe=G.DesignTokenContext=W.default.createContext(ce)},36496:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return q.PresetColors}});var q=L(81342)},81342:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.PresetColors=void 0;const L=G.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(gt,G,L){"use strict";var q=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"DesignTokenContext",{enumerable:!0,get:function(){return me.DesignTokenContext}}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return de.PresetColors}}),Object.defineProperty(G,"calc",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(G,"defaultConfig",{enumerable:!0,get:function(){return me.defaultConfig}}),Object.defineProperty(G,"genComponentStyleHook",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(G,"genPresetColor",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(G,"genStyleHooks",{enumerable:!0,get:function(){return xe.genStyleHooks}}),Object.defineProperty(G,"genSubStyleComponent",{enumerable:!0,get:function(){return xe.genSubStyleComponent}}),Object.defineProperty(G,"getLineHeight",{enumerable:!0,get:function(){return ee.getLineHeight}}),Object.defineProperty(G,"mergeToken",{enumerable:!0,get:function(){return We.merge}}),Object.defineProperty(G,"statisticToken",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(G,"useResetIconStyle",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(G,"useStyleRegister",{enumerable:!0,get:function(){return E.useStyleRegister}}),Object.defineProperty(G,"useToken",{enumerable:!0,get:function(){return ue.default}});var E=L(6731),de=L(36496),ee=L(62231),ue=W(L(41401)),ce=W(L(22996)),xe=q(L(3737)),ae=W(L(36219)),We=q(L(99636)),te=W(L(54894)),me=L(89329)},26162:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getSolidColor=G.getAlphaColor=void 0;var q=L(131);const W=(de,ee)=>new q.TinyColor(de).setAlpha(ee).toRgbString();G.getAlphaColor=W;const E=(de,ee)=>new q.TinyColor(de).darken(ee).toHexString();G.getSolidColor=E},80373:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.generateNeutralColorPalettes=G.generateColorPalettes=void 0;var q=L(78589),W=L(26162);const E=ee=>{const ue=(0,q.generate)(ee);return{1:ue[0],2:ue[1],3:ue[2],4:ue[3],5:ue[4],6:ue[5],7:ue[6],8:ue[4],9:ue[5],10:ue[6]}};G.generateColorPalettes=E;const de=(ee,ue)=>{const ce=ee||"#fff",xe=ue||"#000";return{colorBgBase:ce,colorTextBase:xe,colorText:(0,W.getAlphaColor)(xe,.88),colorTextSecondary:(0,W.getAlphaColor)(xe,.65),colorTextTertiary:(0,W.getAlphaColor)(xe,.45),colorTextQuaternary:(0,W.getAlphaColor)(xe,.25),colorFill:(0,W.getAlphaColor)(xe,.15),colorFillSecondary:(0,W.getAlphaColor)(xe,.06),colorFillTertiary:(0,W.getAlphaColor)(xe,.04),colorFillQuaternary:(0,W.getAlphaColor)(xe,.02),colorBgLayout:(0,W.getSolidColor)(ce,4),colorBgContainer:(0,W.getSolidColor)(ce,0),colorBgElevated:(0,W.getSolidColor)(ce,0),colorBgSpotlight:(0,W.getAlphaColor)(xe,.85),colorBgBlur:"transparent",colorBorder:(0,W.getSolidColor)(ce,15),colorBorderSecondary:(0,W.getSolidColor)(ce,6)}};G.generateNeutralColorPalettes=de},9924:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=We;var W=L(78589),E=L(98411),de=q(L(10805)),ee=q(L(81594)),ue=q(L(54730)),ce=q(L(69853)),xe=q(L(19216)),ae=L(80373);function We(te){const me=Object.keys(E.defaultPresetColors).map(Re=>{const $=(0,W.generate)(te[Re]);return new Array(10).fill(1).reduce((le,K,we)=>(le[`${Re}-${we+1}`]=$[we],le[`${Re}${we+1}`]=$[we],le),{})}).reduce((Re,$)=>(Re=Object.assign(Object.assign({},Re),$),Re),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te),me),(0,de.default)(te,{generateColorPalettes:ae.generateColorPalettes,generateNeutralColorPalettes:ae.generateNeutralColorPalettes})),(0,ce.default)(te.fontSize)),(0,xe.default)(te)),(0,ue.default)(te)),(0,ee.default)(te))}},98411:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.defaultPresetColors=G.default=void 0;const L=G.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},q=Object.assign(Object.assign({},L),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var W=G.default=q},10805:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var q=L(131);function W(E,de){let{generateColorPalettes:ee,generateNeutralColorPalettes:ue}=de;const{colorSuccess:ce,colorWarning:xe,colorError:ae,colorInfo:We,colorPrimary:te,colorBgBase:me,colorTextBase:Re}=E,$=ee(te),le=ee(ce),K=ee(xe),we=ee(ae),et=ee(We),Je=ue(me,Re),wt=E.colorLink||E.colorInfo,pt=ee(wt);return Object.assign(Object.assign({},Je),{colorPrimaryBg:$[1],colorPrimaryBgHover:$[2],colorPrimaryBorder:$[3],colorPrimaryBorderHover:$[4],colorPrimaryHover:$[5],colorPrimary:$[6],colorPrimaryActive:$[7],colorPrimaryTextHover:$[8],colorPrimaryText:$[9],colorPrimaryTextActive:$[10],colorSuccessBg:le[1],colorSuccessBgHover:le[2],colorSuccessBorder:le[3],colorSuccessBorderHover:le[4],colorSuccessHover:le[4],colorSuccess:le[6],colorSuccessActive:le[7],colorSuccessTextHover:le[8],colorSuccessText:le[9],colorSuccessTextActive:le[10],colorErrorBg:we[1],colorErrorBgHover:we[2],colorErrorBgActive:we[3],colorErrorBorder:we[3],colorErrorBorderHover:we[4],colorErrorHover:we[5],colorError:we[6],colorErrorActive:we[7],colorErrorTextHover:we[8],colorErrorText:we[9],colorErrorTextActive:we[10],colorWarningBg:K[1],colorWarningBgHover:K[2],colorWarningBorder:K[3],colorWarningBorderHover:K[4],colorWarningHover:K[4],colorWarning:K[6],colorWarningActive:K[7],colorWarningTextHover:K[8],colorWarningText:K[9],colorWarningTextActive:K[10],colorInfoBg:et[1],colorInfoBgHover:et[2],colorInfoBorder:et[3],colorInfoBorderHover:et[4],colorInfoHover:et[4],colorInfo:et[6],colorInfoActive:et[7],colorInfoTextHover:et[8],colorInfoText:et[9],colorInfoTextActive:et[10],colorLinkHover:pt[4],colorLink:pt[6],colorLinkActive:pt[7],colorBgMask:new q.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=q(L(78117));function E(de){const{motionUnit:ee,motionBase:ue,borderRadius:ce,lineWidth:xe}=de;return Object.assign({motionDurationFast:`${(ue+ee).toFixed(1)}s`,motionDurationMid:`${(ue+ee*2).toFixed(1)}s`,motionDurationSlow:`${(ue+ee*3).toFixed(1)}s`,lineWidthBold:xe+1},(0,W.default)(ce))}},54730:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{const{controlHeight:E}=W;return{controlHeightSM:E*.75,controlHeightXS:E*.5,controlHeightLG:E*1.25}};var q=G.default=L},69853:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(62231));const E=ee=>{const ue=(0,W.default)(ee),ce=ue.map(le=>le.size),xe=ue.map(le=>le.lineHeight),ae=ce[1],We=ce[0],te=ce[2],me=xe[1],Re=xe[0],$=xe[2];return{fontSizeSM:We,fontSize:ae,fontSizeLG:te,fontSizeXL:ce[3],fontSizeHeading1:ce[6],fontSizeHeading2:ce[5],fontSizeHeading3:ce[4],fontSizeHeading4:ce[3],fontSizeHeading5:ce[2],lineHeight:me,lineHeightLG:$,lineHeightSM:Re,fontHeight:Math.round(me*ae),fontHeightLG:Math.round($*te),fontHeightSM:Math.round(Re*We),lineHeightHeading1:xe[6],lineHeightHeading2:xe[5],lineHeightHeading3:xe[4],lineHeightHeading4:xe[3],lineHeightHeading5:xe[2]}};var de=G.default=E},62231:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=q,G.getLineHeight=L;function L(W){return(W+8)/W}function q(W){const E=new Array(10).fill(null).map((de,ee)=>{const ue=ee-1,ce=W*Math.pow(2.71828,ue/5),xe=ee>1?Math.floor(ce):Math.ceil(ce);return Math.floor(xe/2)*2});return E[1]=W,E.map(de=>({size:de,lineHeight:L(de)}))}},78117:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{let E=W,de=W,ee=W,ue=W;return W<6&&W>=5?E=W+1:W<16&&W>=6?E=W+2:W>=16&&(E=16),W<7&&W>=5?de=4:W<8&&W>=7?de=5:W<14&&W>=8?de=6:W<16&&W>=14?de=7:W>=16&&(de=8),W<6&&W>=2?ee=1:W>=6&&(ee=2),W>4&&W<8?ue=4:W>=8&&(ue=6),{borderRadius:W,borderRadiusXS:ee,borderRadiusSM:de,borderRadiusLG:E,borderRadiusOuter:ue}};var q=G.default=L},19216:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=L;function L(q){const{sizeUnit:W,sizeStep:E}=q;return{sizeXXL:W*(E+8),sizeXL:W*(E+4),sizeLG:W*(E+2),sizeMD:W*(E+1),sizeMS:W*E,size:W*E,sizeSM:W*(E-1),sizeXS:W*(E-2),sizeXXS:W*(E-3)}}},41401:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Re,G.unitless=G.ignore=G.getComputedToken=void 0;var W=q(L(67294)),E=L(6731),de=q(L(87629)),ee=L(89329),ue=q(L(98411)),ce=q(L(27722)),xe=function($,le){var K={};for(var we in $)Object.prototype.hasOwnProperty.call($,we)&&le.indexOf(we)<0&&(K[we]=$[we]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,we=Object.getOwnPropertySymbols($);et<we.length;et++)le.indexOf(we[et])<0&&Object.prototype.propertyIsEnumerable.call($,we[et])&&(K[we[et]]=$[we[et]]);return K};const ae=G.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},We=G.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},te={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},me=($,le,K)=>{const we=K.getDerivativeToken($),{override:et}=le,Je=xe(le,["override"]);let wt=Object.assign(Object.assign({},we),{override:et});return wt=(0,ce.default)(wt),Je&&Object.entries(Je).forEach(pt=>{let[_t,Me]=pt;const{theme:Ae}=Me,je=xe(Me,["theme"]);let Ze=je;Ae&&(Ze=me(Object.assign(Object.assign({},wt),je),{override:je},Ae)),wt[_t]=Ze}),wt};G.getComputedToken=me;function Re(){const{token:$,hashed:le,theme:K,override:we,cssVar:et}=W.default.useContext(ee.DesignTokenContext),Je=`${de.default}-${le||""}`,wt=K||ee.defaultTheme,[pt,_t,Me]=(0,E.useCacheToken)(wt,[ue.default,$],{salt:Je,override:we,getComputedToken:me,formatToken:ce.default,cssVar:et&&{prefix:et.prefix,key:et.key,unitless:ae,ignore:We,preserve:te}});return[wt,Me,le?_t:"",pt,et]}},27722:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ue;var W=L(131),E=q(L(98411)),de=q(L(83609)),ee=function(ce,xe){var ae={};for(var We in ce)Object.prototype.hasOwnProperty.call(ce,We)&&xe.indexOf(We)<0&&(ae[We]=ce[We]);if(ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,We=Object.getOwnPropertySymbols(ce);te<We.length;te++)xe.indexOf(We[te])<0&&Object.prototype.propertyIsEnumerable.call(ce,We[te])&&(ae[We[te]]=ce[We[te]]);return ae};function ue(ce){const{override:xe}=ce,ae=ee(ce,["override"]),We=Object.assign({},xe);Object.keys(E.default).forEach(Je=>{delete We[Je]});const te=Object.assign(Object.assign({},ae),We),me=480,Re=576,$=768,le=992,K=1200,we=1600;if(te.motion===!1){const Je="0s";te.motionDurationFast=Je,te.motionDurationMid=Je,te.motionDurationSlow=Je}return Object.assign(Object.assign(Object.assign({},te),{colorFillContent:te.colorFillSecondary,colorFillContentHover:te.colorFill,colorFillAlter:te.colorFillQuaternary,colorBgContainerDisabled:te.colorFillTertiary,colorBorderBg:te.colorBgContainer,colorSplit:(0,de.default)(te.colorBorderSecondary,te.colorBgContainer),colorTextPlaceholder:te.colorTextQuaternary,colorTextDisabled:te.colorTextQuaternary,colorTextHeading:te.colorText,colorTextLabel:te.colorTextSecondary,colorTextDescription:te.colorTextTertiary,colorTextLightSolid:te.colorWhite,colorHighlight:te.colorError,colorBgTextHover:te.colorFillSecondary,colorBgTextActive:te.colorFill,colorIcon:te.colorTextTertiary,colorIconHover:te.colorText,colorErrorOutline:(0,de.default)(te.colorErrorBg,te.colorBgContainer),colorWarningOutline:(0,de.default)(te.colorWarningBg,te.colorBgContainer),fontSizeIcon:te.fontSizeSM,lineWidthFocus:te.lineWidth*4,lineWidth:te.lineWidth,controlOutlineWidth:te.lineWidth*2,controlInteractiveSize:te.controlHeight/2,controlItemBgHover:te.colorFillTertiary,controlItemBgActive:te.colorPrimaryBg,controlItemBgActiveHover:te.colorPrimaryBgHover,controlItemBgActiveDisabled:te.colorFill,controlTmpOutline:te.colorFillQuaternary,controlOutline:(0,de.default)(te.colorPrimaryBg,te.colorBgContainer),lineType:te.lineType,borderRadius:te.borderRadius,borderRadiusXS:te.borderRadiusXS,borderRadiusSM:te.borderRadiusSM,borderRadiusLG:te.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:te.sizeXXS,paddingXS:te.sizeXS,paddingSM:te.sizeSM,padding:te.size,paddingMD:te.sizeMD,paddingLG:te.sizeLG,paddingXL:te.sizeXL,paddingContentHorizontalLG:te.sizeLG,paddingContentVerticalLG:te.sizeMS,paddingContentHorizontal:te.sizeMS,paddingContentVertical:te.sizeSM,paddingContentHorizontalSM:te.size,paddingContentVerticalSM:te.sizeXS,marginXXS:te.sizeXXS,marginXS:te.sizeXS,marginSM:te.sizeSM,margin:te.size,marginMD:te.sizeMD,marginLG:te.sizeLG,marginXL:te.sizeXL,marginXXL:te.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:me,screenXSMin:me,screenXSMax:Re-1,screenSM:Re,screenSMMin:Re,screenSMMax:$-1,screenMD:$,screenMDMin:$,screenMDMax:le-1,screenLG:le,screenLGMin:le,screenLGMax:K-1,screenXL:K,screenXLMin:K,screenXLMax:we-1,screenXXL:we,screenXXLMin:we,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new W.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new W.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new W.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),We)}},24312:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(56690)),E=q(L(89728)),de=q(L(76976)),ee=q(L(61655)),ue=q(L(38194));const ce="CALC_UNIT",xe=new RegExp(ce,"g");function ae(te){return typeof te=="number"?`${te}${ce}`:te}let We=G.default=function(te){function me(Re){var $;return(0,W.default)(this,me),$=(0,de.default)(this,me),$.result="",Re instanceof me?$.result=`(${Re.result})`:typeof Re=="number"?$.result=ae(Re):typeof Re=="string"&&($.result=Re),$}return(0,ee.default)(me,te),(0,E.default)(me,[{key:"add",value:function($){return $ instanceof me?this.result=`${this.result} + ${$.getResult()}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} + ${ae($)}`),this.lowPriority=!0,this}},{key:"sub",value:function($){return $ instanceof me?this.result=`${this.result} - ${$.getResult()}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} - ${ae($)}`),this.lowPriority=!0,this}},{key:"mul",value:function($){return this.lowPriority&&(this.result=`(${this.result})`),$ instanceof me?this.result=`${this.result} * ${$.getResult(!0)}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} * ${$}`),this.lowPriority=!1,this}},{key:"div",value:function($){return this.lowPriority&&(this.result=`(${this.result})`),$ instanceof me?this.result=`${this.result} / ${$.getResult(!0)}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} / ${$}`),this.lowPriority=!1,this}},{key:"getResult",value:function($){return this.lowPriority||$?`(${this.result})`:this.result}},{key:"equal",value:function($){const{unit:le=!0}=$||{};return this.result=this.result.replace(xe,le?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}])}(ue.default)},14774:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(56690)),E=q(L(89728)),de=q(L(76976)),ee=q(L(61655)),ue=q(L(38194));let ce=G.default=function(xe){function ae(We){var te;return(0,W.default)(this,ae),te=(0,de.default)(this,ae),te.result=0,We instanceof ae?te.result=We.result:typeof We=="number"&&(te.result=We),te}return(0,ee.default)(ae,xe),(0,E.default)(ae,[{key:"add",value:function(te){return te instanceof ae?this.result+=te.result:typeof te=="number"&&(this.result+=te),this}},{key:"sub",value:function(te){return te instanceof ae?this.result-=te.result:typeof te=="number"&&(this.result-=te),this}},{key:"mul",value:function(te){return te instanceof ae?this.result*=te.result:typeof te=="number"&&(this.result*=te),this}},{key:"div",value:function(te){return te instanceof ae?this.result/=te.result:typeof te=="number"&&(this.result/=te),this}},{key:"equal",value:function(){return this.result}}])}(ue.default)},38194:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(89728)),E=q(L(56690));let de=(0,W.default)(function ue(){(0,E.default)(this,ue)});var ee=G.default=de},22996:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(24312)),E=q(L(14774));const de=ue=>{const ce=ue==="css"?W.default:E.default;return xe=>new ce(xe)};var ee=G.default=de},3737:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=K,G.genSubStyleComponent=G.genStyleHooks=void 0;var E=W(L(67294)),de=L(6731),ee=L(56790),ue=L(7177),ce=L(98078),xe=W(L(41401)),ae=q(L(22996)),We=q(L(1657)),te=W(L(99636)),me=q(L(54894));const Re=(wt,pt,_t)=>{var Me;return typeof _t=="function"?_t((0,te.merge)(pt,(Me=pt[wt])!==null&&Me!==void 0?Me:{})):_t!=null?_t:{}},$=(wt,pt,_t,Me)=>{const Ae=Object.assign({},pt[wt]);if(Me!=null&&Me.deprecatedTokens){const{deprecatedTokens:Ze}=Me;Ze.forEach(lt=>{let[en,Le]=lt;var St;(Ae!=null&&Ae[en]||Ae!=null&&Ae[Le])&&((St=Ae[Le])!==null&&St!==void 0||(Ae[Le]=Ae==null?void 0:Ae[en]))})}const je=Object.assign(Object.assign({},_t),Ae);return Object.keys(je).forEach(Ze=>{je[Ze]===pt[Ze]&&delete je[Ze]}),je},le=(wt,pt)=>`${[pt,wt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function K(wt,pt,_t){let Me=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Ae=Array.isArray(wt)?wt:[wt,wt],[je]=Ae,Ze=Ae.join("-");return function(lt){let en=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lt;const[Le,St,Oe,nt,Ke]=(0,xe.default)(),{getPrefixCls:Xe,iconPrefixCls:Rt,csp:bt}=(0,E.useContext)(ue.ConfigContext),Ie=Xe(),Gt=Ke?"css":"js",mn=(0,ae.default)(Gt),{max:Ln,min:qn}=(0,We.default)(Gt),rr={theme:Le,token:nt,hashId:Oe,nonce:()=>bt==null?void 0:bt.nonce,clientOnly:Me.clientOnly,layer:{name:"antd"},order:Me.order||-999};return(0,de.useStyleRegister)(Object.assign(Object.assign({},rr),{clientOnly:!1,path:["Shared",Ie]}),()=>[{"&":(0,ce.genLinkStyle)(nt)}]),(0,me.default)(Rt,bt),[(0,de.useStyleRegister)(Object.assign(Object.assign({},rr),{path:[Ze,lt,Rt]}),()=>{if(Me.injectStyle===!1)return[];const{token:Jt,flush:un}=(0,te.default)(nt),Vn=Re(je,St,_t),on=`.${lt}`,Dt=$(je,St,Vn,{deprecatedTokens:Me.deprecatedTokens});Ke&&Object.keys(Vn).forEach(rt=>{Vn[rt]=`var(${(0,de.token2CSSVar)(rt,le(je,Ke.prefix))})`});const Vt=(0,te.merge)(Jt,{componentCls:on,prefixCls:lt,iconCls:`.${Rt}`,antCls:`.${Ie}`,calc:mn,max:Ln,min:qn},Ke?Vn:Dt),ze=pt(Vt,{hashId:Oe,prefixCls:lt,rootPrefixCls:Ie,iconPrefixCls:Rt});return un(je,Dt),[Me.resetStyle===!1?null:(0,ce.genCommonStyle)(Vt,lt,en,Me.resetFont),ze]}),Oe]}}const we=(wt,pt,_t,Me)=>{const Ae=K(wt,pt,_t,Object.assign({resetStyle:!1,order:-998},Me));return Ze=>{let{prefixCls:lt,rootCls:en=lt}=Ze;return Ae(lt,en),null}};G.genSubStyleComponent=we;const et=(wt,pt,_t)=>{function Me(Le){return`${wt}${Le.slice(0,1).toUpperCase()}${Le.slice(1)}`}const{unitless:Ae={},injectStyle:je=!0}=_t!=null?_t:{},Ze={[Me("zIndexPopup")]:!0};Object.keys(Ae).forEach(Le=>{Ze[Me(Le)]=Ae[Le]});const lt=Le=>{let{rootCls:St,cssVar:Oe}=Le;const[,nt]=(0,xe.default)();return(0,de.useCSSVarRegister)({path:[wt],prefix:Oe.prefix,key:Oe==null?void 0:Oe.key,unitless:Object.assign(Object.assign({},xe.unitless),Ze),ignore:xe.ignore,token:nt,scope:St},()=>{const Ke=Re(wt,nt,pt),Xe=$(wt,nt,Ke,{deprecatedTokens:_t==null?void 0:_t.deprecatedTokens});return Object.keys(Ke).forEach(Rt=>{Xe[Me(Rt)]=Xe[Rt],delete Xe[Rt]}),Xe}),null};return Le=>{const[,,,,St]=(0,xe.default)();return[Oe=>je&&St?E.default.createElement(E.default.Fragment,null,E.default.createElement(lt,{rootCls:Le,cssVar:St,component:wt}),Oe):Oe,St==null?void 0:St.key]}},Je=(wt,pt,_t,Me)=>{const Ae=K(wt,pt,_t,Me),je=et(Array.isArray(wt)?wt[0]:wt,_t,Me);return function(Ze){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze;const[,en]=Ae(Ze,lt),[Le,St]=je(lt);return[Le,en,St]}};G.genStyleHooks=Je},36219:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var q=L(36496);function W(E,de){return q.PresetColors.reduce((ee,ue)=>{const ce=E[`${ue}1`],xe=E[`${ue}3`],ae=E[`${ue}6`],We=E[`${ue}7`];return Object.assign(Object.assign({},ee),de(ue,{lightColor:ce,lightBorderColor:xe,darkColor:ae,textColor:We}))},{})}},83609:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var q=L(131);function W(ee){return ee>=0&&ee<=255}function E(ee,ue){const{r:ce,g:xe,b:ae,a:We}=new q.TinyColor(ee).toRgb();if(We<1)return ee;const{r:te,g:me,b:Re}=new q.TinyColor(ue).toRgb();for(let $=.01;$<=1;$+=.01){const le=Math.round((ce-te*(1-$))/$),K=Math.round((xe-me*(1-$))/$),we=Math.round((ae-Re*(1-$))/$);if(W(le)&&W(K)&&W(we))return new q.TinyColor({r:le,g:K,b:we,a:Math.round($*100)/100}).toRgbString()}return new q.TinyColor({r:ce,g:xe,b:ae,a:1}).toRgbString()}var de=G.default=E},1657:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var q=L(6731);function W(E){return E==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var de=arguments.length,ee=new Array(de),ue=0;ue<de;ue++)ee[ue]=arguments[ue];return`max(${ee.map(ce=>(0,q.unit)(ce)).join(",")})`},min:function(){for(var de=arguments.length,ee=new Array(de),ue=0;ue<de;ue++)ee[ue]=arguments[ue];return`min(${ee.map(ce=>(0,q.unit)(ce)).join(",")})`}}}},99636:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G._statistic_build_=void 0,G.merge=W,G.statistic=void 0;const L=typeof CSSINJS_STATISTIC!="undefined";let q=!0;function W(){for(var xe=arguments.length,ae=new Array(xe),We=0;We<xe;We++)ae[We]=arguments[We];if(!L)return Object.assign.apply(Object,[{}].concat(ae));q=!1;const te={};return ae.forEach(me=>{Object.keys(me).forEach($=>{Object.defineProperty(te,$,{configurable:!0,enumerable:!0,get:()=>me[$]})})}),q=!0,te}const E=G.statistic={},de=G._statistic_build_={};function ee(){}const ue=xe=>{let ae,We=xe,te=ee;return L&&typeof Proxy!="undefined"&&(ae=new Set,We=new Proxy(xe,{get(me,Re){return q&&ae.add(Re),me[Re]}}),te=(me,Re)=>{var $;E[me]={global:Array.from(ae),component:Object.assign(Object.assign({},($=E[me])===null||$===void 0?void 0:$.component),Re)}}),{token:We,keys:ae,flush:te}};var ce=G.default=ue},54894:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=L(6731),E=L(98078),de=q(L(41401));const ee=(ce,xe)=>{const[ae,We]=(0,de.default)();return(0,W.useStyleRegister)({theme:ae,token:We,hashId:"",path:["ant-design-icons",ce],nonce:()=>xe==null?void 0:xe.nonce,layer:{name:"antd"}},()=>[{[`.${ce}`]:Object.assign(Object.assign({},(0,E.resetIcon)()),{[`.${ce} .${ce}-icon`]:{display:"block"}})}])};var ue=G.default=ee},92125:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(93967)),ee=L(92419),ue=L(31929),ce=q(L(15086)),xe=L(48125);const ae=te=>{const{prefixCls:me,className:Re,placement:$="top",title:le,color:K,overlayInnerStyle:we}=te,{getPrefixCls:et}=E.useContext(ue.ConfigContext),Je=et("tooltip",me),[wt,pt,_t]=(0,ce.default)(Je),Me=(0,xe.parseColor)(Je,K),Ae=Me.arrowStyle,je=Object.assign(Object.assign({},we),Me.overlayStyle),Ze=(0,de.default)(pt,_t,Je,`${Je}-pure`,`${Je}-placement-${$}`,Re,Me.className);return wt(E.createElement("div",{className:Ze,style:Ae},E.createElement("div",{className:`${Je}-arrow`}),E.createElement(ee.Popup,Object.assign({},te,{className:pt,prefixCls:Je,overlayInnerStyle:je}),le)))};var We=G.default=ae},94055:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(93967)),ee=q(L(92419)),ue=q(L(60869)),ce=L(56333),xe=L(53683),ae=q(L(74132)),We=L(47419),te=L(13594),me=q(L(96877)),Re=L(31929),$=L(46549),le=L(3184),K=q(L(92125)),we=q(L(15086)),et=L(48125),Je=function(Me,Ae){var je={};for(var Ze in Me)Object.prototype.hasOwnProperty.call(Me,Ze)&&Ae.indexOf(Ze)<0&&(je[Ze]=Me[Ze]);if(Me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,Ze=Object.getOwnPropertySymbols(Me);lt<Ze.length;lt++)Ae.indexOf(Ze[lt])<0&&Object.prototype.propertyIsEnumerable.call(Me,Ze[lt])&&(je[Ze[lt]]=Me[Ze[lt]]);return je};const pt=E.forwardRef((Me,Ae)=>{var je,Ze;const{prefixCls:lt,openClassName:en,getTooltipContainer:Le,overlayClassName:St,color:Oe,overlayInnerStyle:nt,children:Ke,afterOpenChange:Xe,afterVisibleChange:Rt,destroyTooltipOnHide:bt,arrow:Ie=!0,title:Gt,overlay:mn,builtinPlacements:Ln,arrowPointAtCenter:qn=!1,autoAdjustOverflow:rr=!0}=Me,Ft=!!Ie,[,Jt]=(0,le.useToken)(),{getPopupContainer:un,getPrefixCls:Vn,direction:on}=E.useContext(Re.ConfigContext),Dt=(0,te.devUseWarning)("Tooltip"),Vt=E.useRef(null),ze=()=>{var it;(it=Vt.current)===null||it===void 0||it.forceAlign()};E.useImperativeHandle(Ae,()=>{var it;return{forceAlign:ze,forcePopupAlign:()=>{Dt.deprecated(!1,"forcePopupAlign","forceAlign"),ze()},nativeElement:(it=Vt.current)===null||it===void 0?void 0:it.nativeElement}});const[rt,jt]=(0,ue.default)(!1,{value:(je=Me.open)!==null&&je!==void 0?je:Me.visible,defaultValue:(Ze=Me.defaultOpen)!==null&&Ze!==void 0?Ze:Me.defaultVisible}),U=!Gt&&!mn&&Gt!==0,pe=it=>{var At,Yt;jt(U?!1:it),U||((At=Me.onOpenChange)===null||At===void 0||At.call(Me,it),(Yt=Me.onVisibleChange)===null||Yt===void 0||Yt.call(Me,it))},ct=E.useMemo(()=>{var it,At;let Yt=qn;return typeof Ie=="object"&&(Yt=(At=(it=Ie.pointAtCenter)!==null&&it!==void 0?it:Ie.arrowPointAtCenter)!==null&&At!==void 0?At:qn),Ln||(0,ae.default)({arrowPointAtCenter:Yt,autoAdjustOverflow:rr,arrowWidth:Ft?Jt.sizePopupArrow:0,borderRadius:Jt.borderRadius,offset:Jt.marginXXS,visibleFirst:!0})},[qn,Ie,Ln,Jt]),he=E.useMemo(()=>Gt===0?Gt:mn||Gt||"",[mn,Gt]),$t=E.createElement($.NoCompactStyle,null,typeof he=="function"?he():he),{getPopupContainer:sn,placement:pn="top",mouseEnterDelay:Dn=.1,mouseLeaveDelay:Wn=.1,overlayStyle:Yn,rootClassName:fn}=Me,vt=Je(Me,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Pt=Vn("tooltip",lt),An=Vn(),Pn=Me["data-popover-inject"];let Xn=rt;!("open"in Me)&&!("visible"in Me)&&U&&(Xn=!1);const dt=E.isValidElement(Ke)&&!(0,We.isFragment)(Ke)?Ke:E.createElement("span",null,Ke),Se=dt.props,Be=!Se.className||typeof Se.className=="string"?(0,de.default)(Se.className,en||`${Pt}-open`):Se.className,[st,Lt,It]=(0,we.default)(Pt,!Pn),wn=(0,et.parseColor)(Pt,Oe),Kn=wn.arrowStyle,_r=Object.assign(Object.assign({},nt),wn.overlayStyle),Jn=(0,de.default)(St,{[`${Pt}-rtl`]:on==="rtl"},wn.className,fn,Lt,It),[Pe,Te]=(0,ce.useZIndex)("Tooltip",vt.zIndex),ke=E.createElement(ee.default,Object.assign({},vt,{zIndex:Pe,showArrow:Ft,placement:pn,mouseEnterDelay:Dn,mouseLeaveDelay:Wn,prefixCls:Pt,overlayClassName:Jn,overlayStyle:Object.assign(Object.assign({},Kn),Yn),getTooltipContainer:sn||Le||un,ref:Vt,builtinPlacements:ct,overlay:$t,visible:Xn,onVisibleChange:pe,afterVisibleChange:Xe!=null?Xe:Rt,overlayInnerStyle:_r,arrowContent:E.createElement("span",{className:`${Pt}-arrow-content`}),motion:{motionName:(0,xe.getTransitionName)(An,"zoom-big-fast",Me.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!bt}),Xn?(0,We.cloneElement)(dt,{className:Be}):dt);return st(E.createElement(me.default.Provider,{value:Te},ke))});pt._InternalPanelDoNotUseOrYouWillBeFired=K.default;var _t=G.default=pt},15086:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var W=L(6731),E=L(98078),de=L(42836),ee=q(L(9064)),ue=L(51337),ce=L(3184);const xe=te=>{const{componentCls:me,tooltipMaxWidth:Re,tooltipColor:$,tooltipBg:le,tooltipBorderRadius:K,zIndexPopup:we,controlHeight:et,boxShadowSecondary:Je,paddingSM:wt,paddingXS:pt}=te;return[{[me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,E.resetComponent)(te)),{position:"absolute",zIndex:we,display:"block",width:"max-content",maxWidth:Re,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":le,[`${me}-inner`]:{minWidth:"1em",minHeight:et,padding:`${(0,W.unit)(te.calc(wt).div(2).equal())} ${(0,W.unit)(pt)}`,color:$,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:le,borderRadius:K,boxShadow:Je,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${me}-inner`]:{borderRadius:te.min(K,ee.MAX_VERTICAL_CONTENT_RADIUS)}},[`${me}-content`]:{position:"relative"}}),(0,ce.genPresetColor)(te,(_t,Me)=>{let{darkColor:Ae}=Me;return{[`&${me}-${_t}`]:{[`${me}-inner`]:{backgroundColor:Ae},[`${me}-arrow`]:{"--antd-arrow-background-color":Ae}}}})),{"&-rtl":{direction:"rtl"}})},(0,ee.default)(te,"var(--antd-arrow-background-color)"),{[`${me}-pure`]:{position:"relative",maxWidth:"none",margin:te.sizePopupArrow}}]},ae=te=>Object.assign(Object.assign({zIndexPopup:te.zIndexPopupBase+70},(0,ee.getArrowOffsetToken)({contentRadius:te.borderRadius,limitVerticalRadius:!0})),(0,ue.getArrowToken)((0,ce.mergeToken)(te,{borderRadiusOuter:Math.min(te.borderRadiusOuter,4)})));G.prepareComponentToken=ae;var We=G.default=function(me){let Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,ce.genStyleHooks)("Tooltip",le=>{const{borderRadius:K,colorTextLightSolid:we,colorBgSpotlight:et}=le,Je=(0,ce.mergeToken)(le,{tooltipMaxWidth:250,tooltipColor:we,tooltipBorderRadius:K,tooltipBg:et});return[xe(Je),(0,de.initZoomMotion)(le,"zoom-big-fast")]},ae,{resetStyle:!1,injectStyle:Re})(me)}},48125:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.parseColor=de;var W=q(L(93967)),E=L(45471);function de(ee,ue){const ce=(0,E.isPresetColor)(ue),xe=(0,W.default)({[`${ee}-${ue}`]:ue&&ce}),ae={},We={};return ue&&!ce&&(ae.background=ue,We["--antd-arrow-background-color"]=ue),{className:xe,overlayStyle:ae,arrowStyle:We}}},6847:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(83874)),ee=q(L(90091)),ue=q(L(4121)),ce=q(L(93967)),xe=q(L(60938)),ae=q(L(94055)),We=L(81410);const te=Re=>{const{prefixCls:$,copied:le,locale:K,iconOnly:we,tooltips:et,icon:Je,loading:wt,tabIndex:pt,onCopy:_t}=Re,Me=(0,We.toList)(et),Ae=(0,We.toList)(Je),{copied:je,copy:Ze}=K!=null?K:{},lt=le?(0,We.getNode)(Me[1],je):(0,We.getNode)(Me[0],Ze),Le=typeof lt=="string"?lt:le?je:Ze;return E.createElement(ae.default,{key:"copy",title:lt},E.createElement(xe.default,{className:(0,ce.default)(`${$}-copy`,{[`${$}-copy-success`]:le,[`${$}-copy-icon-only`]:we}),onClick:_t,"aria-label":Le,tabIndex:pt},le?(0,We.getNode)(Ae[1],E.createElement(de.default,null),!0):(0,We.getNode)(Ae[0],wt?E.createElement(ue.default,null):E.createElement(ee.default,null),!0)))};var me=G.default=te},12385:function(gt,G,L){"use strict";"use client";var q=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=K;var E=W(L(861)),de=q(L(67294)),ee=W(L(45598)),ue=W(L(82546));const ce=de.forwardRef((we,et)=>{let{style:Je,children:wt}=we;const pt=de.useRef(null);return de.useImperativeHandle(et,()=>({isExceed:()=>{const _t=pt.current;return _t.scrollHeight>_t.clientHeight},getHeight:()=>pt.current.clientHeight})),de.createElement("span",{"aria-hidden":!0,ref:pt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},Je)},wt)});function xe(we){const et=typeof we;return et==="string"||et==="number"}function ae(we){let et=0;return we.forEach(Je=>{xe(Je)?et+=String(Je).length:et+=1}),et}function We(we,et){let Je=0;const wt=[];for(let pt=0;pt<we.length;pt+=1){if(Je===et)return wt;const _t=we[pt],Ae=xe(_t)?String(_t).length:1,je=Je+Ae;if(je>et){const Ze=et-Je;return wt.push(String(_t).slice(0,Ze)),wt}wt.push(_t),Je=je}return we}const te=0,me=1,Re=2,$=3,le={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function K(we){const{enableMeasure:et,width:Je,text:wt,children:pt,rows:_t,expanded:Me,miscDeps:Ae,onEllipsis:je}=we,Ze=de.useMemo(()=>(0,ee.default)(wt),[wt]),lt=de.useMemo(()=>ae(Ze),[wt]),en=de.useMemo(()=>pt(Ze,!1),[wt]),[Le,St]=de.useState(null),Oe=de.useRef(null),nt=de.useRef(null),Ke=de.useRef(null),Xe=de.useRef(null),[Rt,bt]=de.useState(!1),[Ie,Gt]=de.useState(te),[mn,Ln]=de.useState(0);(0,ue.default)(()=>{Gt(et&&Je&&lt?me:te)},[Je,wt,_t,et,Ze]),(0,ue.default)(()=>{var Jt,un,Vn,on;if(Ie===me){const Dt=!!(!((Jt=nt.current)===null||Jt===void 0)&&Jt.isExceed());Gt(Dt?Re:$),St(Dt?[0,lt]:null),bt(Dt);const Vt=((un=nt.current)===null||un===void 0?void 0:un.getHeight())||0,ze=_t===1?0:((Vn=Ke.current)===null||Vn===void 0?void 0:Vn.getHeight())||0,rt=((on=Xe.current)===null||on===void 0?void 0:on.getHeight())||0,jt=ze+rt,U=Math.max(Vt,jt);Ln(U+1),je(Dt)}},[Ie]);const qn=Le?Math.ceil((Le[0]+Le[1])/2):0;(0,ue.default)(()=>{var Jt;const[un,Vn]=Le||[0,0];if(un!==Vn){const Dt=(((Jt=Oe.current)===null||Jt===void 0?void 0:Jt.getHeight())||0)>mn;let Vt=qn;Vn-un===1&&(Vt=Dt?un:Vn),St(Dt?[un,Vt]:[Vt,Vn])}},[Le,qn]);const rr=de.useMemo(()=>{if(Ie!==Re||!Le||Le[0]!==Le[1]){const Jt=pt(Ze,!1);return Ie!==$&&Ie!==te?de.createElement("span",{style:Object.assign(Object.assign({},le),{WebkitLineClamp:_t})},Jt):Jt}return pt(Me?Ze:We(Ze,Le[0]),Rt)},[Me,Ie,Le,Ze].concat((0,E.default)(Ae))),Ft={width:Je,whiteSpace:"normal",margin:0,padding:0};return de.createElement(de.Fragment,null,rr,Ie===me&&de.createElement(de.Fragment,null,de.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:_t}),ref:nt},en),de.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:_t-1}),ref:Ke},en),de.createElement(ce,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:1}),ref:Xe},pt([],!0))),Ie===Re&&Le&&Le[0]!==Le[1]&&de.createElement(ce,{style:Object.assign(Object.assign({},Ft),{top:400}),ref:Oe},pt(We(Ze,qn),!0)))}},69274:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(94055));const ee=ce=>{let{enableEllipsis:xe,isEllipsis:ae,children:We,tooltipProps:te}=ce;return!(te!=null&&te.title)||!xe?We:E.createElement(de.default,Object.assign({open:ae?void 0:!1},te),We)};var ue=G.default=ee},28460:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(10875)),ee=q(L(93967)),ue=q(L(9220)),ce=q(L(45598)),xe=q(L(82546)),ae=q(L(60869)),We=q(L(18475)),te=L(75531),me=L(38882),Re=q(L(60938)),$=L(31929),le=q(L(76647)),K=q(L(94055)),we=q(L(69425)),et=q(L(63985)),Je=q(L(92759)),wt=q(L(67312)),pt=q(L(28991)),_t=q(L(89652)),Me=q(L(6847)),Ae=q(L(12385)),je=q(L(69274)),Ze=function(Oe,nt){var Ke={};for(var Xe in Oe)Object.prototype.hasOwnProperty.call(Oe,Xe)&&nt.indexOf(Xe)<0&&(Ke[Xe]=Oe[Xe]);if(Oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Rt=0,Xe=Object.getOwnPropertySymbols(Oe);Rt<Xe.length;Rt++)nt.indexOf(Xe[Rt])<0&&Object.prototype.propertyIsEnumerable.call(Oe,Xe[Rt])&&(Ke[Xe[Rt]]=Oe[Xe[Rt]]);return Ke};function lt(Oe,nt){let{mark:Ke,code:Xe,underline:Rt,delete:bt,strong:Ie,keyboard:Gt,italic:mn}=Oe,Ln=nt;function qn(rr,Ft){Ft&&(Ln=E.createElement(rr,{},Ln))}return qn("strong",Ie),qn("u",Rt),qn("del",bt),qn("code",Xe),qn("mark",Ke),qn("kbd",Gt),qn("i",mn),Ln}const en="...",Le=E.forwardRef((Oe,nt)=>{var Ke,Xe,Rt;const{prefixCls:bt,className:Ie,style:Gt,type:mn,disabled:Ln,children:qn,ellipsis:rr,editable:Ft,copyable:Jt,component:un,title:Vn}=Oe,on=Ze(Oe,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:Dt,direction:Vt}=E.useContext($.ConfigContext),[ze]=(0,le.default)("Text"),rt=E.useRef(null),jt=E.useRef(null),U=Dt("typography",bt),pe=(0,We.default)(on,["mark","code","delete","underline","strong","keyboard","italic"]),[ct,he]=(0,Je.default)(Ft),[$t,sn]=(0,ae.default)(!1,{value:he.editing}),{triggerType:pn=["icon"]}=he,Dn=Fe=>{var ot;Fe&&((ot=he.onStart)===null||ot===void 0||ot.call(he)),sn(Fe)},Wn=(0,pt.default)($t);(0,wt.default)(()=>{var Fe;!$t&&Wn&&((Fe=jt.current)===null||Fe===void 0||Fe.focus())},[$t]);const Yn=Fe=>{Fe==null||Fe.preventDefault(),Dn(!0)},fn=Fe=>{var ot;(ot=he.onChange)===null||ot===void 0||ot.call(he,Fe),Dn(!1)},vt=()=>{var Fe;(Fe=he.onCancel)===null||Fe===void 0||Fe.call(he),Dn(!1)},[Pt,An]=(0,Je.default)(Jt),{copied:Pn,copyLoading:Xn,onClick:dt}=(0,et.default)({copyConfig:An,children:qn}),[Se,Be]=E.useState(!1),[st,Lt]=E.useState(!1),[It,wn]=E.useState(!1),[Kn,_r]=E.useState(!1),[Jn,Pe]=E.useState(!0),[Te,ke]=(0,Je.default)(rr,{expandable:!1,symbol:Fe=>Fe?ze==null?void 0:ze.collapse:ze==null?void 0:ze.expand}),[it,At]=(0,ae.default)(ke.defaultExpanded||!1,{value:ke.expanded}),Yt=Te&&(!it||ke.expandable==="collapsible"),{rows:hn=1}=ke,Et=E.useMemo(()=>Yt&&(ke.suffix!==void 0||ke.onEllipsis||ke.expandable||ct||Pt),[Yt,ke,ct,Pt]);(0,xe.default)(()=>{Te&&!Et&&(Be((0,me.isStyleSupport)("webkitLineClamp")),Lt((0,me.isStyleSupport)("textOverflow")))},[Et,Te]);const[Kt,er]=E.useState(Yt),br=E.useMemo(()=>Et?!1:hn===1?st:Se,[Et,st,Se]);(0,xe.default)(()=>{er(br&&Yt)},[br,Yt]);const Vr=Yt&&(Kt?Kn:It),vr=Yt&&hn===1&&Kt,Ur=Yt&&hn>1&&Kt,_i=(Fe,ot)=>{var Ut;At(ot.expanded),(Ut=ke.onExpand)===null||Ut===void 0||Ut.call(ke,Fe,ot)},[Ai,wr]=E.useState(0),Ei=Fe=>{let{offsetWidth:ot}=Fe;wr(ot)},hi=Fe=>{var ot;wn(Fe),It!==Fe&&((ot=ke.onEllipsis)===null||ot===void 0||ot.call(ke,Fe))};E.useEffect(()=>{const Fe=rt.current;if(Te&&Kt&&Fe){const ot=Ur?Fe.offsetHeight<Fe.scrollHeight:Fe.offsetWidth<Fe.scrollWidth;Kn!==ot&&_r(ot)}},[Te,Kt,qn,Ur,Jn,Ai]),E.useEffect(()=>{const Fe=rt.current;if(typeof IntersectionObserver=="undefined"||!Fe||!Kt||!Yt)return;const ot=new IntersectionObserver(()=>{Pe(!!Fe.offsetParent)});return ot.observe(Fe),()=>{ot.disconnect()}},[Kt,Yt]);let ai={};ke.tooltip===!0?ai={title:(Ke=he.text)!==null&&Ke!==void 0?Ke:qn}:E.isValidElement(ke.tooltip)?ai={title:ke.tooltip}:typeof ke.tooltip=="object"?ai=Object.assign({title:(Xe=he.text)!==null&&Xe!==void 0?Xe:qn},ke.tooltip):ai={title:ke.tooltip};const Io=E.useMemo(()=>{const Fe=ot=>["string","number"].includes(typeof ot);if(!(!Te||Kt)){if(Fe(he.text))return he.text;if(Fe(qn))return qn;if(Fe(Vn))return Vn;if(Fe(ai.title))return ai.title}},[Te,Kt,Vn,ai.title,Vr]);if($t)return E.createElement(we.default,{value:(Rt=he.text)!==null&&Rt!==void 0?Rt:typeof qn=="string"?qn:"",onSave:fn,onCancel:vt,onEnd:he.onEnd,prefixCls:U,className:Ie,style:Gt,direction:Vt,component:un,maxLength:he.maxLength,autoSize:he.autoSize,enterIcon:he.enterIcon});const xi=()=>{const{expandable:Fe,symbol:ot}=ke;return!Fe||it&&Fe!=="collapsible"?null:E.createElement("a",{key:"expand",className:`${U}-${it?"collapse":"expand"}`,onClick:Ut=>_i(Ut,{expanded:!it}),"aria-label":it?ze.collapse:ze==null?void 0:ze.expand},typeof ot=="function"?ot(it):ot)},Qo=()=>{if(!ct)return;const{icon:Fe,tooltip:ot,tabIndex:Ut}=he,ln=(0,ce.default)(ot)[0]||(ze==null?void 0:ze.edit),Nn=typeof ln=="string"?ln:"";return pn.includes("icon")?E.createElement(K.default,{key:"edit",title:ot===!1?"":ln},E.createElement(Re.default,{ref:jt,className:`${U}-edit`,onClick:Yn,"aria-label":Nn,tabIndex:Ut},Fe||E.createElement(de.default,{role:"button"}))):null},ga=()=>Pt?E.createElement(Me.default,Object.assign({key:"copy"},An,{prefixCls:U,copied:Pn,locale:ze,onCopy:dt,loading:Xn,iconOnly:qn==null})):null,Po=Fe=>[Fe&&xi(),Qo(),ga()],$o=Fe=>[Fe&&!it&&E.createElement("span",{"aria-hidden":!0,key:"ellipsis"},en),ke.suffix,Po(Fe)];return E.createElement(ue.default,{onResize:Ei,disabled:!Yt},Fe=>E.createElement(je.default,{tooltipProps:ai,enableEllipsis:Yt,isEllipsis:Vr},E.createElement(_t.default,Object.assign({className:(0,ee.default)({[`${U}-${mn}`]:mn,[`${U}-disabled`]:Ln,[`${U}-ellipsis`]:Te,[`${U}-single-line`]:Yt&&hn===1&&!it,[`${U}-ellipsis-single-line`]:vr,[`${U}-ellipsis-multiple-line`]:Ur},Ie),prefixCls:bt,style:Object.assign(Object.assign({},Gt),{WebkitLineClamp:Ur?hn:void 0}),component:un,ref:(0,te.composeRef)(Fe,rt,nt),direction:Vt,onClick:pn.includes("text")?Yn:void 0,"aria-label":Io==null?void 0:Io.toString(),title:Vn},pe),E.createElement(Ae.default,{enableMeasure:Yt&&!Kt,text:qn,rows:hn,width:Ai,onEllipsis:hi,expanded:it,miscDeps:[Pn,it,Xn,ct,Pt]},(ot,Ut)=>lt(Oe,E.createElement(E.Fragment,null,ot.length>0&&Ut&&!it&&Io?E.createElement("span",{key:"show-content","aria-hidden":!0},ot):ot,$o(Ut)))))))});var St=G.default=Le},81410:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getNode=q,G.toList=L;function L(W){return W===!1?[!1,!1]:Array.isArray(W)?W:[W]}function q(W,E,de){return W===!0||W===void 0?E:W||de&&E}},69425:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(7224)),ee=q(L(93967)),ue=q(L(27712)),ce=L(47419),xe=q(L(14104)),ae=q(L(23461));const We=me=>{const{prefixCls:Re,"aria-label":$,className:le,style:K,direction:we,maxLength:et,autoSize:Je=!0,value:wt,onSave:pt,onCancel:_t,onEnd:Me,component:Ae,enterIcon:je=E.createElement(de.default,null)}=me,Ze=E.useRef(null),lt=E.useRef(!1),en=E.useRef(),[Le,St]=E.useState(wt);E.useEffect(()=>{St(wt)},[wt]),E.useEffect(()=>{if(Ze.current&&Ze.current.resizableTextArea){const{textArea:Ft}=Ze.current.resizableTextArea;Ft.focus();const{length:Jt}=Ft.value;Ft.setSelectionRange(Jt,Jt)}},[]);const Oe=Ft=>{let{target:Jt}=Ft;St(Jt.value.replace(/[\n\r]/g,""))},nt=()=>{lt.current=!0},Ke=()=>{lt.current=!1},Xe=Ft=>{let{keyCode:Jt}=Ft;lt.current||(en.current=Jt)},Rt=()=>{pt(Le.trim())},bt=Ft=>{let{keyCode:Jt,ctrlKey:un,altKey:Vn,metaKey:on,shiftKey:Dt}=Ft;en.current===Jt&&!lt.current&&!un&&!Vn&&!on&&!Dt&&(Jt===ue.default.ENTER?(Rt(),Me==null||Me()):Jt===ue.default.ESC&&_t())},Ie=()=>{Rt()},Gt=Ae?`${Re}-${Ae}`:"",[mn,Ln,qn]=(0,ae.default)(Re),rr=(0,ee.default)(Re,`${Re}-edit-content`,{[`${Re}-rtl`]:we==="rtl"},le,Gt,Ln,qn);return mn(E.createElement("div",{className:rr,style:K},E.createElement(xe.default,{ref:Ze,maxLength:et,value:Le,onChange:Oe,onKeyDown:Xe,onKeyUp:bt,onCompositionStart:nt,onCompositionEnd:Ke,onBlur:Ie,"aria-label":$,rows:1,autoSize:Je}),je!==null?(0,ce.cloneElement)(je,{className:`${Re}-edit-content-confirm`}):null))};var te=G.default=We},34528:function(gt,G,L){"use strict";var q,W=L(64836).default,E=L(75263).default;q={value:!0},G.Z=void 0;var de=E(L(67294)),ee=L(13594),ue=W(L(28460)),ce=function(te,me){var Re={};for(var $ in te)Object.prototype.hasOwnProperty.call(te,$)&&me.indexOf($)<0&&(Re[$]=te[$]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,$=Object.getOwnPropertySymbols(te);le<$.length;le++)me.indexOf($[le])<0&&Object.prototype.propertyIsEnumerable.call(te,$[le])&&(Re[$[le]]=te[$[le]]);return Re};const xe=[1,2,3,4,5],ae=de.forwardRef((te,me)=>{const{level:Re=1}=te,$=ce(te,["level"]);let le;return xe.includes(Re)?le=`h${Re}`:le="h1",de.createElement(ue.default,Object.assign({ref:me},$,{component:le}))});var We=G.Z=ae},89652:function(gt,G,L){"use strict";"use client";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(93967)),ee=L(75531),ue=L(13594),ce=L(31929),xe=q(L(23461)),ae=function(me,Re){var $={};for(var le in me)Object.prototype.hasOwnProperty.call(me,le)&&Re.indexOf(le)<0&&($[le]=me[le]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,le=Object.getOwnPropertySymbols(me);K<le.length;K++)Re.indexOf(le[K])<0&&Object.prototype.propertyIsEnumerable.call(me,le[K])&&($[le[K]]=me[le[K]]);return $};const We=E.forwardRef((me,Re)=>{const{prefixCls:$,component:le="article",className:K,rootClassName:we,setContentRef:et,children:Je,direction:wt,style:pt}=me,_t=ae(me,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Me,direction:Ae,typography:je}=E.useContext(ce.ConfigContext),Ze=wt!=null?wt:Ae;let lt=Re;et&&(lt=(0,ee.composeRef)(Re,et));const en=Me("typography",$),[Le,St,Oe]=(0,xe.default)(en),nt=(0,de.default)(en,je==null?void 0:je.className,{[`${en}-rtl`]:Ze==="rtl"},K,we,St,Oe),Ke=Object.assign(Object.assign({},je==null?void 0:je.style),pt);return Le(E.createElement(le,Object.assign({className:nt,style:Ke,ref:lt},_t),Je))});var te=G.default=We},63985:function(gt,G,L){"use strict";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),de=q(L(20640)),ee=L(56790),ue=function(ae,We,te,me){function Re($){return $ instanceof te?$:new te(function(le){le($)})}return new(te||(te=Promise))(function($,le){function K(Je){try{et(me.next(Je))}catch(wt){le(wt)}}function we(Je){try{et(me.throw(Je))}catch(wt){le(wt)}}function et(Je){Je.done?$(Je.value):Re(Je.value).then(K,we)}et((me=me.apply(ae,We||[])).next())})};const ce=ae=>{let{copyConfig:We,children:te}=ae;const[me,Re]=E.useState(!1),[$,le]=E.useState(!1),K=E.useRef(null),we=()=>{K.current&&clearTimeout(K.current)},et={};We.format&&(et.format=We.format),E.useEffect(()=>we,[]);const Je=(0,ee.useEvent)(wt=>ue(void 0,void 0,void 0,function*(){var pt;wt==null||wt.preventDefault(),wt==null||wt.stopPropagation(),le(!0);try{const _t=typeof We.text=="function"?yield We.text():We.text;(0,de.default)(_t||String(te)||"",et),le(!1),Re(!0),we(),K.current=setTimeout(()=>{Re(!1)},3e3),(pt=We.onCopy)===null||pt===void 0||pt.call(We,wt)}catch(_t){throw le(!1),_t}}));return{copied:me,copyLoading:$,onClick:Je}};var xe=G.default=ce},92759:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=q(L(67294));function E(de,ee){return W.useMemo(()=>{const ue=!!de;return[ue,Object.assign(Object.assign({},ee),ue&&typeof de=="object"?de:null)]},[de])}},28991:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var q=L(67294);const W=de=>{const ee=(0,q.useRef)();return(0,q.useEffect)(()=>{ee.current=de}),ee.current};var E=G.default=W},67312:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(67294));const E=(ee,ue)=>{const ce=W.useRef(!1);W.useEffect(()=>{ce.current?ee():ce.current=!0},ue)};var de=G.default=E},23461:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var q=L(98078),W=L(3184),E=L(48385);const de=ce=>{const{componentCls:xe,titleMarginTop:ae}=ce;return{[xe]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:ce.colorText,wordBreak:"break-word",lineHeight:ce.lineHeight,[`&${xe}-secondary`]:{color:ce.colorTextDescription},[`&${xe}-success`]:{color:ce.colorSuccess},[`&${xe}-warning`]:{color:ce.colorWarning},[`&${xe}-danger`]:{color:ce.colorError,"a&:active, a&:focus":{color:ce.colorErrorActive},"a&:hover":{color:ce.colorErrorHover}},[`&${xe}-disabled`]:{color:ce.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},(0,E.getTitleStyles)(ce)),{[`
      & + h1${xe},
      & + h2${xe},
      & + h3${xe},
      & + h4${xe},
      & + h5${xe}
      `]:{marginTop:ae},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:ae}}}),(0,E.getResetStyles)(ce)),(0,E.getLinkStyles)(ce)),{[`
        ${xe}-expand,
        ${xe}-collapse,
        ${xe}-edit,
        ${xe}-copy
      `]:Object.assign(Object.assign({},(0,q.operationUnit)(ce)),{marginInlineStart:ce.marginXXS})}),(0,E.getEditableStyles)(ce)),(0,E.getCopyableStyles)(ce)),(0,E.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},ee=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});G.prepareComponentToken=ee;var ue=G.default=(0,W.genStyleHooks)("Typography",ce=>[de(ce)],ee)},48385:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTitleStyles=G.getResetStyles=G.getLinkStyles=G.getEllipsisStyles=G.getEditableStyles=G.getCopyableStyles=void 0;var q=L(78589),W=L(6731),E=L(98078);const de=(te,me,Re,$)=>{const{titleMarginBottom:le,fontWeightStrong:K}=$;return{marginBottom:le,color:Re,fontWeight:K,fontSize:te,lineHeight:me}},ee=te=>{const me=[1,2,3,4,5],Re={};return me.forEach($=>{Re[`
      h${$}&,
      div&-h${$},
      div&-h${$} > textarea,
      h${$}
    `]=de(te[`fontSizeHeading${$}`],te[`lineHeightHeading${$}`],te.colorTextHeading,te)}),Re};G.getTitleStyles=ee;const ue=te=>{const{componentCls:me}=te;return{"a&, a":Object.assign(Object.assign({},(0,E.operationUnit)(te)),{textDecoration:te.linkDecoration,"&:active, &:hover":{textDecoration:te.linkHoverDecoration},[`&[disabled], &${me}-disabled`]:{color:te.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:te.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};G.getLinkStyles=ue;const ce=te=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:te.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:te.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:q.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:te.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});G.getResetStyles=ce;const xe=te=>{const{componentCls:me,paddingSM:Re}=te,$=Re;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:te.calc(te.paddingSM).mul(-1).equal(),marginTop:te.calc($).mul(-1).equal(),marginBottom:`calc(1em - ${(0,W.unit)($)})`},[`${me}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:te.calc(te.marginXS).add(2).equal(),insetBlockEnd:te.marginXS,color:te.colorTextDescription,fontWeight:"normal",fontSize:te.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};G.getEditableStyles=xe;const ae=te=>({[`${te.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:te.colorSuccess}},[`${te.componentCls}-copy-icon-only`]:{marginInlineStart:0}});G.getCopyableStyles=ae;const We=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});G.getEllipsisStyles=We},87629:function(gt,G,L){"use strict";"use client";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(36245)),E=G.default=W.default},36245:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=G.default="5.17.4"},83874:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(71079));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},43273:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(72225));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},90091:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(29539));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},10875:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(54825));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},7224:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(43552));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},4121:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const q=W(L(61929));function W(de){return de&&de.__esModule?de:{default:de}}const E=q;G.default=E,gt.exports=E},26545:function(gt,G,L){"use client";"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Ae}});var q=Re(L(67294)),W=te(L(93967)),E=L(78589),de=te(L(13357)),ee=te(L(46648)),ue=L(46338),ce=L(49458);function xe(je,Ze){(Ze==null||Ze>je.length)&&(Ze=je.length);for(var lt=0,en=new Array(Ze);lt<Ze;lt++)en[lt]=je[lt];return en}function ae(je){if(Array.isArray(je))return je}function We(je,Ze,lt){return Ze in je?Object.defineProperty(je,Ze,{value:lt,enumerable:!0,configurable:!0,writable:!0}):je[Ze]=lt,je}function te(je){return je&&je.__esModule?je:{default:je}}function me(je){if(typeof WeakMap!="function")return null;var Ze=new WeakMap,lt=new WeakMap;return(me=function(en){return en?lt:Ze})(je)}function Re(je,Ze){if(!Ze&&je&&je.__esModule)return je;if(je===null||typeof je!="object"&&typeof je!="function")return{default:je};var lt=me(Ze);if(lt&&lt.has(je))return lt.get(je);var en={__proto__:null},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var St in je)if(St!=="default"&&Object.prototype.hasOwnProperty.call(je,St)){var Oe=Le?Object.getOwnPropertyDescriptor(je,St):null;Oe&&(Oe.get||Oe.set)?Object.defineProperty(en,St,Oe):en[St]=je[St]}return en.default=je,lt&&lt.set(je,en),en}function $(je,Ze){var lt=je==null?null:typeof Symbol!="undefined"&&je[Symbol.iterator]||je["@@iterator"];if(lt!=null){var en=[],Le=!0,St=!1,Oe,nt;try{for(lt=lt.call(je);!(Le=(Oe=lt.next()).done)&&(en.push(Oe.value),!(Ze&&en.length===Ze));Le=!0);}catch(Ke){St=!0,nt=Ke}finally{try{!Le&&lt.return!=null&&lt.return()}finally{if(St)throw nt}}return en}}function le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(je){for(var Ze=1;Ze<arguments.length;Ze++){var lt=arguments[Ze]!=null?arguments[Ze]:{},en=Object.keys(lt);typeof Object.getOwnPropertySymbols=="function"&&(en=en.concat(Object.getOwnPropertySymbols(lt).filter(function(Le){return Object.getOwnPropertyDescriptor(lt,Le).enumerable}))),en.forEach(function(Le){We(je,Le,lt[Le])})}return je}function we(je,Ze){var lt=Object.keys(je);if(Object.getOwnPropertySymbols){var en=Object.getOwnPropertySymbols(je);Ze&&(en=en.filter(function(Le){return Object.getOwnPropertyDescriptor(je,Le).enumerable})),lt.push.apply(lt,en)}return lt}function et(je,Ze){return Ze=Ze!=null?Ze:{},Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Ze)):we(Object(Ze)).forEach(function(lt){Object.defineProperty(je,lt,Object.getOwnPropertyDescriptor(Ze,lt))}),je}function Je(je,Ze){if(je==null)return{};var lt=wt(je,Ze),en,Le;if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(je);for(Le=0;Le<St.length;Le++)en=St[Le],!(Ze.indexOf(en)>=0)&&Object.prototype.propertyIsEnumerable.call(je,en)&&(lt[en]=je[en])}return lt}function wt(je,Ze){if(je==null)return{};var lt={},en=Object.keys(je),Le,St;for(St=0;St<en.length;St++)Le=en[St],!(Ze.indexOf(Le)>=0)&&(lt[Le]=je[Le]);return lt}function pt(je,Ze){return ae(je)||$(je,Ze)||_t(je,Ze)||le()}function _t(je,Ze){if(je){if(typeof je=="string")return xe(je,Ze);var lt=Object.prototype.toString.call(je).slice(8,-1);if(lt==="Object"&&je.constructor&&(lt=je.constructor.name),lt==="Map"||lt==="Set")return Array.from(lt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return xe(je,Ze)}}(0,ue.setTwoToneColor)(E.blue.primary);var Me=q.forwardRef(function(je,Ze){var lt=je.className,en=je.icon,Le=je.spin,St=je.rotate,Oe=je.tabIndex,nt=je.onClick,Ke=je.twoToneColor,Xe=Je(je,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Rt=q.useContext(de.default),bt=Rt.prefixCls,Ie=bt===void 0?"anticon":bt,Gt=Rt.rootClassName,mn,Ln=(0,W.default)(Gt,Ie,(mn={},We(mn,"".concat(Ie,"-").concat(en.name),!!en.name),We(mn,"".concat(Ie,"-spin"),!!Le||en.name==="loading"),mn),lt),qn=Oe;qn===void 0&&nt&&(qn=-1);var rr=St?{msTransform:"rotate(".concat(St,"deg)"),transform:"rotate(".concat(St,"deg)")}:void 0,Ft=pt((0,ce.normalizeTwoToneColors)(Ke),2),Jt=Ft[0],un=Ft[1];return q.createElement("span",et(K({role:"img","aria-label":en.name},Xe),{ref:Ze,tabIndex:qn,onClick:nt,className:Ln}),q.createElement(ee.default,{icon:en,primaryColor:Jt,secondaryColor:un,style:rr}))});Me.displayName="AntdIcon",Me.getTwoToneColor=ue.getTwoToneColor,Me.setTwoToneColor=ue.setTwoToneColor;var Ae=Me},13357:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return E}});var q=L(67294),W=(0,q.createContext)({}),E=W},46648:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return le}});var q=ee(L(67294)),W=L(49458);function E(K,we,et){return we in K?Object.defineProperty(K,we,{value:et,enumerable:!0,configurable:!0,writable:!0}):K[we]=et,K}function de(K){if(typeof WeakMap!="function")return null;var we=new WeakMap,et=new WeakMap;return(de=function(Je){return Je?et:we})(K)}function ee(K,we){if(!we&&K&&K.__esModule)return K;if(K===null||typeof K!="object"&&typeof K!="function")return{default:K};var et=de(we);if(et&&et.has(K))return et.get(K);var Je={__proto__:null},wt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pt in K)if(pt!=="default"&&Object.prototype.hasOwnProperty.call(K,pt)){var _t=wt?Object.getOwnPropertyDescriptor(K,pt):null;_t&&(_t.get||_t.set)?Object.defineProperty(Je,pt,_t):Je[pt]=K[pt]}return Je.default=K,et&&et.set(K,Je),Je}function ue(K){for(var we=1;we<arguments.length;we++){var et=arguments[we]!=null?arguments[we]:{},Je=Object.keys(et);typeof Object.getOwnPropertySymbols=="function"&&(Je=Je.concat(Object.getOwnPropertySymbols(et).filter(function(wt){return Object.getOwnPropertyDescriptor(et,wt).enumerable}))),Je.forEach(function(wt){E(K,wt,et[wt])})}return K}function ce(K,we){var et=Object.keys(K);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(K);we&&(Je=Je.filter(function(wt){return Object.getOwnPropertyDescriptor(K,wt).enumerable})),et.push.apply(et,Je)}return et}function xe(K,we){return we=we!=null?we:{},Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(we)):ce(Object(we)).forEach(function(et){Object.defineProperty(K,et,Object.getOwnPropertyDescriptor(we,et))}),K}function ae(K,we){if(K==null)return{};var et=We(K,we),Je,wt;if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(K);for(wt=0;wt<pt.length;wt++)Je=pt[wt],!(we.indexOf(Je)>=0)&&Object.prototype.propertyIsEnumerable.call(K,Je)&&(et[Je]=K[Je])}return et}function We(K,we){if(K==null)return{};var et={},Je=Object.keys(K),wt,pt;for(pt=0;pt<Je.length;pt++)wt=Je[pt],!(we.indexOf(wt)>=0)&&(et[wt]=K[wt]);return et}var te={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function me(K){var we=K.primaryColor,et=K.secondaryColor;te.primaryColor=we,te.secondaryColor=et||(0,W.getSecondaryColor)(we),te.calculated=!!et}function Re(){return ue({},te)}var $=function(K){var we=K.icon,et=K.className,Je=K.onClick,wt=K.style,pt=K.primaryColor,_t=K.secondaryColor,Me=ae(K,["icon","className","onClick","style","primaryColor","secondaryColor"]),Ae=q.useRef(),je=te;if(pt&&(je={primaryColor:pt,secondaryColor:_t||(0,W.getSecondaryColor)(pt)}),(0,W.useInsertStyles)(Ae),(0,W.warning)((0,W.isIconDefinition)(we),"icon should be icon definiton, but got ".concat(we)),!(0,W.isIconDefinition)(we))return null;var Ze=we;return Ze&&typeof Ze.icon=="function"&&(Ze=xe(ue({},Ze),{icon:Ze.icon(je.primaryColor,je.secondaryColor)})),(0,W.generate)(Ze.icon,"svg-".concat(Ze.name),xe(ue({className:et,onClick:Je,style:wt,"data-icon":Ze.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Me),{ref:Ae}))};$.displayName="IconReact",$.getTwoToneColors=Re,$.setTwoToneColors=me;var le=$},46338:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function q(Re,$){for(var le in $)Object.defineProperty(Re,le,{enumerable:!0,get:$[le]})}q(G,{getTwoToneColor:function(){return me},setTwoToneColor:function(){return te}});var W=ue(L(46648)),E=L(49458);function de(Re,$){($==null||$>Re.length)&&($=Re.length);for(var le=0,K=new Array($);le<$;le++)K[le]=Re[le];return K}function ee(Re){if(Array.isArray(Re))return Re}function ue(Re){return Re&&Re.__esModule?Re:{default:Re}}function ce(Re,$){var le=Re==null?null:typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(le!=null){var K=[],we=!0,et=!1,Je,wt;try{for(le=le.call(Re);!(we=(Je=le.next()).done)&&(K.push(Je.value),!($&&K.length===$));we=!0);}catch(pt){et=!0,wt=pt}finally{try{!we&&le.return!=null&&le.return()}finally{if(et)throw wt}}return K}}function xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ae(Re,$){return ee(Re)||ce(Re,$)||We(Re,$)||xe()}function We(Re,$){if(Re){if(typeof Re=="string")return de(Re,$);var le=Object.prototype.toString.call(Re).slice(8,-1);if(le==="Object"&&Re.constructor&&(le=Re.constructor.name),le==="Map"||le==="Set")return Array.from(le);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return de(Re,$)}}function te(Re){var $=ae((0,E.normalizeTwoToneColors)(Re),2),le=$[0],K=$[1];return W.default.setTwoToneColors({primaryColor:le,secondaryColor:K})}function me(){var Re=W.default.getTwoToneColors();return Re.calculated?[Re.primaryColor,Re.secondaryColor]:Re.primaryColor}},71079:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(25330)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},72225:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(67303)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},29539:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(83647)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},54825:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(57583)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},43552:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(29260)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},61929:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Re}});var q=ce(L(67294)),W=ee(L(25828)),E=ee(L(26545));function de($,le,K){return le in $?Object.defineProperty($,le,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[le]=K,$}function ee($){return $&&$.__esModule?$:{default:$}}function ue($){if(typeof WeakMap!="function")return null;var le=new WeakMap,K=new WeakMap;return(ue=function(we){return we?K:le})($)}function ce($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var K=ue(le);if(K&&K.has($))return K.get($);var we={__proto__:null},et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=et?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(we,Je,wt):we[Je]=$[Je]}return we.default=$,K&&K.set($,we),we}function xe($){for(var le=1;le<arguments.length;le++){var K=arguments[le]!=null?arguments[le]:{},we=Object.keys(K);typeof Object.getOwnPropertySymbols=="function"&&(we=we.concat(Object.getOwnPropertySymbols(K).filter(function(et){return Object.getOwnPropertyDescriptor(K,et).enumerable}))),we.forEach(function(et){de($,et,K[et])})}return $}function ae($,le){var K=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);le&&(we=we.filter(function(et){return Object.getOwnPropertyDescriptor($,et).enumerable})),K.push.apply(K,we)}return K}function We($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):ae(Object(le)).forEach(function(K){Object.defineProperty($,K,Object.getOwnPropertyDescriptor(le,K))}),$}var te=function($,le){return q.createElement(E.default,We(xe({},$),{ref:le,icon:W.default}))},me=q.forwardRef(te),Re=me},49458:function(gt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function q(Me,Ae){for(var je in Ae)Object.defineProperty(Me,je,{enumerable:!0,get:Ae[je]})}q(G,{generate:function(){return we},getSecondaryColor:function(){return et},iconStyles:function(){return pt},isIconDefinition:function(){return le},normalizeAttrs:function(){return K},normalizeTwoToneColors:function(){return Je},svgBaseProps:function(){return wt},useInsertStyles:function(){return _t},warning:function(){return $}});var W=L(78589),E=L(93399),de=L(63298),ee=ae(L(45520)),ue=te(L(67294)),ce=ae(L(13357));function xe(Me,Ae,je){return Ae in Me?Object.defineProperty(Me,Ae,{value:je,enumerable:!0,configurable:!0,writable:!0}):Me[Ae]=je,Me}function ae(Me){return Me&&Me.__esModule?Me:{default:Me}}function We(Me){if(typeof WeakMap!="function")return null;var Ae=new WeakMap,je=new WeakMap;return(We=function(Ze){return Ze?je:Ae})(Me)}function te(Me,Ae){if(!Ae&&Me&&Me.__esModule)return Me;if(Me===null||typeof Me!="object"&&typeof Me!="function")return{default:Me};var je=We(Ae);if(je&&je.has(Me))return je.get(Me);var Ze={__proto__:null},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var en in Me)if(en!=="default"&&Object.prototype.hasOwnProperty.call(Me,en)){var Le=lt?Object.getOwnPropertyDescriptor(Me,en):null;Le&&(Le.get||Le.set)?Object.defineProperty(Ze,en,Le):Ze[en]=Me[en]}return Ze.default=Me,je&&je.set(Me,Ze),Ze}function me(Me){for(var Ae=1;Ae<arguments.length;Ae++){var je=arguments[Ae]!=null?arguments[Ae]:{},Ze=Object.keys(je);typeof Object.getOwnPropertySymbols=="function"&&(Ze=Ze.concat(Object.getOwnPropertySymbols(je).filter(function(lt){return Object.getOwnPropertyDescriptor(je,lt).enumerable}))),Ze.forEach(function(lt){xe(Me,lt,je[lt])})}return Me}function Re(Me){return Me.replace(/-(.)/g,function(Ae,je){return je.toUpperCase()})}function $(Me,Ae){(0,ee.default)(Me,"[@ant-design/icons] ".concat(Ae))}function le(Me){return typeof Me=="object"&&typeof Me.name=="string"&&typeof Me.theme=="string"&&(typeof Me.icon=="object"||typeof Me.icon=="function")}function K(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Me).reduce(function(Ae,je){var Ze=Me[je];switch(je){case"class":Ae.className=Ze,delete Ae.class;break;default:delete Ae[je],Ae[Re(je)]=Ze}return Ae},{})}function we(Me,Ae,je){return je?ue.default.createElement(Me.tag,me({key:Ae},K(Me.attrs),je),(Me.children||[]).map(function(Ze,lt){return we(Ze,"".concat(Ae,"-").concat(Me.tag,"-").concat(lt))})):ue.default.createElement(Me.tag,me({key:Ae},K(Me.attrs)),(Me.children||[]).map(function(Ze,lt){return we(Ze,"".concat(Ae,"-").concat(Me.tag,"-").concat(lt))}))}function et(Me){return(0,W.generate)(Me)[0]}function Je(Me){return Me?Array.isArray(Me)?Me:[Me]:[]}var wt={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},pt=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,_t=function(Me){var Ae=(0,ue.useContext)(ce.default),je=Ae.csp,Ze=Ae.prefixCls,lt=pt;Ze&&(lt=lt.replace(/anticon/g,Ze)),(0,ue.useEffect)(function(){var en=Me.current,Le=(0,de.getShadowRoot)(en);(0,E.updateCSS)(lt,"@ant-design-icons",{prepend:!0,csp:je,attachTo:Le})},[])}},98129:function(gt,G,L){"use strict";var q=L(60690);gt.exports=function(de){de=de||{};var ee=de.reporter,ue=q.getOption(de,"async",!0),ce=q.getOption(de,"auto",!0);ce&&!ue&&(ee&&ee.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),ue=!0);var xe=W(),ae,We=!1;function te(et,Je){!We&&ce&&ue&&xe.size()===0&&$(),xe.add(et,Je)}function me(){for(We=!0;xe.size();){var et=xe;xe=W(),et.process()}We=!1}function Re(et){We||(et===void 0&&(et=ue),ae&&(K(ae),ae=null),et?$():me())}function $(){ae=we(me)}function le(){xe={},batchSize=0,topLevel=0,bottomLevel=0}function K(et){var Je=clearTimeout;return Je(et)}function we(et){var Je=function(wt){return setTimeout(wt,0)};return Je(et)}return{add:te,force:Re}};function W(){var E={},de=0,ee=0,ue=0;function ce(We,te){te||(te=We,We=0),We>ee?ee=We:We<ue&&(ue=We),E[We]||(E[We]=[]),E[We].push(te),de++}function xe(){for(var We=ue;We<=ee;We++)for(var te=E[We],me=0;me<te.length;me++){var Re=te[me];Re()}}function ae(){return de}return{add:ce,process:xe,size:ae}}},60690:function(gt){"use strict";var G=gt.exports={};G.getOption=L;function L(q,W,E){var de=q[W];return de==null&&E!==void 0?E:de}},8874:function(gt){"use strict";gt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(gt,G,L){var q=L(8874),W=L(86851),E=Object.hasOwnProperty,de=Object.create(null);for(var ee in q)E.call(q,ee)&&(de[q[ee]]=ee);var ue=gt.exports={to:{},get:{}};ue.get=function(ae){var We=ae.substring(0,3).toLowerCase(),te,me;switch(We){case"hsl":te=ue.get.hsl(ae),me="hsl";break;case"hwb":te=ue.get.hwb(ae),me="hwb";break;default:te=ue.get.rgb(ae),me="rgb";break}return te?{model:me,value:te}:null},ue.get.rgb=function(ae){if(!ae)return null;var We=/^#([a-f0-9]{3,4})$/i,te=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,me=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Re=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,$=/^(\w+)$/,le=[0,0,0,1],K,we,et;if(K=ae.match(te)){for(et=K[2],K=K[1],we=0;we<3;we++){var Je=we*2;le[we]=parseInt(K.slice(Je,Je+2),16)}et&&(le[3]=parseInt(et,16)/255)}else if(K=ae.match(We)){for(K=K[1],et=K[3],we=0;we<3;we++)le[we]=parseInt(K[we]+K[we],16);et&&(le[3]=parseInt(et+et,16)/255)}else if(K=ae.match(me)){for(we=0;we<3;we++)le[we]=parseInt(K[we+1],0);K[4]&&(K[5]?le[3]=parseFloat(K[4])*.01:le[3]=parseFloat(K[4]))}else if(K=ae.match(Re)){for(we=0;we<3;we++)le[we]=Math.round(parseFloat(K[we+1])*2.55);K[4]&&(K[5]?le[3]=parseFloat(K[4])*.01:le[3]=parseFloat(K[4]))}else return(K=ae.match($))?K[1]==="transparent"?[0,0,0,0]:E.call(q,K[1])?(le=q[K[1]],le[3]=1,le):null:null;for(we=0;we<3;we++)le[we]=ce(le[we],0,255);return le[3]=ce(le[3],0,1),le},ue.get.hsl=function(ae){if(!ae)return null;var We=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,te=ae.match(We);if(te){var me=parseFloat(te[4]),Re=(parseFloat(te[1])%360+360)%360,$=ce(parseFloat(te[2]),0,100),le=ce(parseFloat(te[3]),0,100),K=ce(isNaN(me)?1:me,0,1);return[Re,$,le,K]}return null},ue.get.hwb=function(ae){if(!ae)return null;var We=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,te=ae.match(We);if(te){var me=parseFloat(te[4]),Re=(parseFloat(te[1])%360+360)%360,$=ce(parseFloat(te[2]),0,100),le=ce(parseFloat(te[3]),0,100),K=ce(isNaN(me)?1:me,0,1);return[Re,$,le,K]}return null},ue.to.hex=function(){var ae=W(arguments);return"#"+xe(ae[0])+xe(ae[1])+xe(ae[2])+(ae[3]<1?xe(Math.round(ae[3]*255)):"")},ue.to.rgb=function(){var ae=W(arguments);return ae.length<4||ae[3]===1?"rgb("+Math.round(ae[0])+", "+Math.round(ae[1])+", "+Math.round(ae[2])+")":"rgba("+Math.round(ae[0])+", "+Math.round(ae[1])+", "+Math.round(ae[2])+", "+ae[3]+")"},ue.to.rgb.percent=function(){var ae=W(arguments),We=Math.round(ae[0]/255*100),te=Math.round(ae[1]/255*100),me=Math.round(ae[2]/255*100);return ae.length<4||ae[3]===1?"rgb("+We+"%, "+te+"%, "+me+"%)":"rgba("+We+"%, "+te+"%, "+me+"%, "+ae[3]+")"},ue.to.hsl=function(){var ae=W(arguments);return ae.length<4||ae[3]===1?"hsl("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%)":"hsla("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%, "+ae[3]+")"},ue.to.hwb=function(){var ae=W(arguments),We="";return ae.length>=4&&ae[3]!==1&&(We=", "+ae[3]),"hwb("+ae[0]+", "+ae[1]+"%, "+ae[2]+"%"+We+")"},ue.to.keyword=function(ae){return de[ae.slice(0,3)]};function ce(ae,We,te){return Math.min(Math.max(We,ae),te)}function xe(ae){var We=Math.round(ae).toString(16).toUpperCase();return We.length<2?"0"+We:We}},37620:function(gt,G,L){"use strict";L.d(G,{ZP:function(){return wt},B8:function(){return Ae}});function q(Xe,Rt,bt){Xe.prototype=Rt.prototype=bt,bt.constructor=Xe}function W(Xe,Rt){var bt=Object.create(Xe.prototype);for(var Ie in Rt)bt[Ie]=Rt[Ie];return bt}function E(){}var de=.7,ee=1/de,ue="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ae=/^#([0-9a-f]{3,8})$/,We=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),te=new RegExp("^rgb\\("+[xe,xe,xe]+"\\)$"),me=new RegExp("^rgba\\("+[ue,ue,ue,ce]+"\\)$"),Re=new RegExp("^rgba\\("+[xe,xe,xe,ce]+"\\)$"),$=new RegExp("^hsl\\("+[ce,xe,xe]+"\\)$"),le=new RegExp("^hsla\\("+[ce,xe,xe,ce]+"\\)$"),K={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q(E,wt,{copy:function(Xe){return Object.assign(new this.constructor,this,Xe)},displayable:function(){return this.rgb().displayable()},hex:we,formatHex:we,formatHsl:et,formatRgb:Je,toString:Je});function we(){return this.rgb().formatHex()}function et(){return St(this).formatHsl()}function Je(){return this.rgb().formatRgb()}function wt(Xe){var Rt,bt;return Xe=(Xe+"").trim().toLowerCase(),(Rt=ae.exec(Xe))?(bt=Rt[1].length,Rt=parseInt(Rt[1],16),bt===6?pt(Rt):bt===3?new je(Rt>>8&15|Rt>>4&240,Rt>>4&15|Rt&240,(Rt&15)<<4|Rt&15,1):bt===8?_t(Rt>>24&255,Rt>>16&255,Rt>>8&255,(Rt&255)/255):bt===4?_t(Rt>>12&15|Rt>>8&240,Rt>>8&15|Rt>>4&240,Rt>>4&15|Rt&240,((Rt&15)<<4|Rt&15)/255):null):(Rt=We.exec(Xe))?new je(Rt[1],Rt[2],Rt[3],1):(Rt=te.exec(Xe))?new je(Rt[1]*255/100,Rt[2]*255/100,Rt[3]*255/100,1):(Rt=me.exec(Xe))?_t(Rt[1],Rt[2],Rt[3],Rt[4]):(Rt=Re.exec(Xe))?_t(Rt[1]*255/100,Rt[2]*255/100,Rt[3]*255/100,Rt[4]):(Rt=$.exec(Xe))?Le(Rt[1],Rt[2]/100,Rt[3]/100,1):(Rt=le.exec(Xe))?Le(Rt[1],Rt[2]/100,Rt[3]/100,Rt[4]):K.hasOwnProperty(Xe)?pt(K[Xe]):Xe==="transparent"?new je(NaN,NaN,NaN,0):null}function pt(Xe){return new je(Xe>>16&255,Xe>>8&255,Xe&255,1)}function _t(Xe,Rt,bt,Ie){return Ie<=0&&(Xe=Rt=bt=NaN),new je(Xe,Rt,bt,Ie)}function Me(Xe){return Xe instanceof E||(Xe=wt(Xe)),Xe?(Xe=Xe.rgb(),new je(Xe.r,Xe.g,Xe.b,Xe.opacity)):new je}function Ae(Xe,Rt,bt,Ie){return arguments.length===1?Me(Xe):new je(Xe,Rt,bt,Ie==null?1:Ie)}function je(Xe,Rt,bt,Ie){this.r=+Xe,this.g=+Rt,this.b=+bt,this.opacity=+Ie}q(je,Ae,W(E,{brighter:function(Xe){return Xe=Xe==null?ee:Math.pow(ee,Xe),new je(this.r*Xe,this.g*Xe,this.b*Xe,this.opacity)},darker:function(Xe){return Xe=Xe==null?de:Math.pow(de,Xe),new je(this.r*Xe,this.g*Xe,this.b*Xe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ze,formatHex:Ze,formatRgb:lt,toString:lt}));function Ze(){return"#"+en(this.r)+en(this.g)+en(this.b)}function lt(){var Xe=this.opacity;return Xe=isNaN(Xe)?1:Math.max(0,Math.min(1,Xe)),(Xe===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Xe===1?")":", "+Xe+")")}function en(Xe){return Xe=Math.max(0,Math.min(255,Math.round(Xe)||0)),(Xe<16?"0":"")+Xe.toString(16)}function Le(Xe,Rt,bt,Ie){return Ie<=0?Xe=Rt=bt=NaN:bt<=0||bt>=1?Xe=Rt=NaN:Rt<=0&&(Xe=NaN),new nt(Xe,Rt,bt,Ie)}function St(Xe){if(Xe instanceof nt)return new nt(Xe.h,Xe.s,Xe.l,Xe.opacity);if(Xe instanceof E||(Xe=wt(Xe)),!Xe)return new nt;if(Xe instanceof nt)return Xe;Xe=Xe.rgb();var Rt=Xe.r/255,bt=Xe.g/255,Ie=Xe.b/255,Gt=Math.min(Rt,bt,Ie),mn=Math.max(Rt,bt,Ie),Ln=NaN,qn=mn-Gt,rr=(mn+Gt)/2;return qn?(Rt===mn?Ln=(bt-Ie)/qn+(bt<Ie)*6:bt===mn?Ln=(Ie-Rt)/qn+2:Ln=(Rt-bt)/qn+4,qn/=rr<.5?mn+Gt:2-mn-Gt,Ln*=60):qn=rr>0&&rr<1?0:Ln,new nt(Ln,qn,rr,Xe.opacity)}function Oe(Xe,Rt,bt,Ie){return arguments.length===1?St(Xe):new nt(Xe,Rt,bt,Ie==null?1:Ie)}function nt(Xe,Rt,bt,Ie){this.h=+Xe,this.s=+Rt,this.l=+bt,this.opacity=+Ie}q(nt,Oe,W(E,{brighter:function(Xe){return Xe=Xe==null?ee:Math.pow(ee,Xe),new nt(this.h,this.s,this.l*Xe,this.opacity)},darker:function(Xe){return Xe=Xe==null?de:Math.pow(de,Xe),new nt(this.h,this.s,this.l*Xe,this.opacity)},rgb:function(){var Xe=this.h%360+(this.h<0)*360,Rt=isNaN(Xe)||isNaN(this.s)?0:this.s,bt=this.l,Ie=bt+(bt<.5?bt:1-bt)*Rt,Gt=2*bt-Ie;return new je(Ke(Xe>=240?Xe-240:Xe+120,Gt,Ie),Ke(Xe,Gt,Ie),Ke(Xe<120?Xe+240:Xe-120,Gt,Ie),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Xe=this.opacity;return Xe=isNaN(Xe)?1:Math.max(0,Math.min(1,Xe)),(Xe===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Xe===1?")":", "+Xe+")")}}));function Ke(Xe,Rt,bt){return(Xe<60?Rt+(bt-Rt)*Xe/60:Xe<180?bt:Xe<240?Rt+(bt-Rt)*(240-Xe)/60:Rt)*255}},9187:function(gt){"use strict";gt.exports=G,gt.exports.default=G;function G(Oe,nt,Ke){Ke=Ke||2;var Xe=nt&&nt.length,Rt=Xe?nt[0]*Ke:Oe.length,bt=L(Oe,0,Rt,Ke,!0),Ie=[];if(!bt||bt.next===bt.prev)return Ie;var Gt,mn,Ln,qn,rr,Ft,Jt;if(Xe&&(bt=ce(Oe,nt,bt,Ke)),Oe.length>80*Ke){Gt=Ln=Oe[0],mn=qn=Oe[1];for(var un=Ke;un<Rt;un+=Ke)rr=Oe[un],Ft=Oe[un+1],rr<Gt&&(Gt=rr),Ft<mn&&(mn=Ft),rr>Ln&&(Ln=rr),Ft>qn&&(qn=Ft);Jt=Math.max(Ln-Gt,qn-mn),Jt=Jt!==0?32767/Jt:0}return W(bt,Ie,Ke,Gt,mn,Jt,0),Ie}function L(Oe,nt,Ke,Xe,Rt){var bt,Ie;if(Rt===St(Oe,nt,Ke,Xe)>0)for(bt=nt;bt<Ke;bt+=Xe)Ie=lt(bt,Oe[bt],Oe[bt+1],Ie);else for(bt=Ke-Xe;bt>=nt;bt-=Xe)Ie=lt(bt,Oe[bt],Oe[bt+1],Ie);return Ie&&Je(Ie,Ie.next)&&(en(Ie),Ie=Ie.next),Ie}function q(Oe,nt){if(!Oe)return Oe;nt||(nt=Oe);var Ke=Oe,Xe;do if(Xe=!1,!Ke.steiner&&(Je(Ke,Ke.next)||et(Ke.prev,Ke,Ke.next)===0)){if(en(Ke),Ke=nt=Ke.prev,Ke===Ke.next)break;Xe=!0}else Ke=Ke.next;while(Xe||Ke!==nt);return nt}function W(Oe,nt,Ke,Xe,Rt,bt,Ie){if(Oe){!Ie&&bt&&me(Oe,Xe,Rt,bt);for(var Gt=Oe,mn,Ln;Oe.prev!==Oe.next;){if(mn=Oe.prev,Ln=Oe.next,bt?de(Oe,Xe,Rt,bt):E(Oe)){nt.push(mn.i/Ke|0),nt.push(Oe.i/Ke|0),nt.push(Ln.i/Ke|0),en(Oe),Oe=Ln.next,Gt=Ln.next;continue}if(Oe=Ln,Oe===Gt){Ie?Ie===1?(Oe=ee(q(Oe),nt,Ke),W(Oe,nt,Ke,Xe,Rt,bt,2)):Ie===2&&ue(Oe,nt,Ke,Xe,Rt,bt):W(q(Oe),nt,Ke,Xe,Rt,bt,1);break}}}}function E(Oe){var nt=Oe.prev,Ke=Oe,Xe=Oe.next;if(et(nt,Ke,Xe)>=0)return!1;for(var Rt=nt.x,bt=Ke.x,Ie=Xe.x,Gt=nt.y,mn=Ke.y,Ln=Xe.y,qn=Rt<bt?Rt<Ie?Rt:Ie:bt<Ie?bt:Ie,rr=Gt<mn?Gt<Ln?Gt:Ln:mn<Ln?mn:Ln,Ft=Rt>bt?Rt>Ie?Rt:Ie:bt>Ie?bt:Ie,Jt=Gt>mn?Gt>Ln?Gt:Ln:mn>Ln?mn:Ln,un=Xe.next;un!==nt;){if(un.x>=qn&&un.x<=Ft&&un.y>=rr&&un.y<=Jt&&K(Rt,Gt,bt,mn,Ie,Ln,un.x,un.y)&&et(un.prev,un,un.next)>=0)return!1;un=un.next}return!0}function de(Oe,nt,Ke,Xe){var Rt=Oe.prev,bt=Oe,Ie=Oe.next;if(et(Rt,bt,Ie)>=0)return!1;for(var Gt=Rt.x,mn=bt.x,Ln=Ie.x,qn=Rt.y,rr=bt.y,Ft=Ie.y,Jt=Gt<mn?Gt<Ln?Gt:Ln:mn<Ln?mn:Ln,un=qn<rr?qn<Ft?qn:Ft:rr<Ft?rr:Ft,Vn=Gt>mn?Gt>Ln?Gt:Ln:mn>Ln?mn:Ln,on=qn>rr?qn>Ft?qn:Ft:rr>Ft?rr:Ft,Dt=$(Jt,un,nt,Ke,Xe),Vt=$(Vn,on,nt,Ke,Xe),ze=Oe.prevZ,rt=Oe.nextZ;ze&&ze.z>=Dt&&rt&&rt.z<=Vt;){if(ze.x>=Jt&&ze.x<=Vn&&ze.y>=un&&ze.y<=on&&ze!==Rt&&ze!==Ie&&K(Gt,qn,mn,rr,Ln,Ft,ze.x,ze.y)&&et(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,rt.x>=Jt&&rt.x<=Vn&&rt.y>=un&&rt.y<=on&&rt!==Rt&&rt!==Ie&&K(Gt,qn,mn,rr,Ln,Ft,rt.x,rt.y)&&et(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;ze&&ze.z>=Dt;){if(ze.x>=Jt&&ze.x<=Vn&&ze.y>=un&&ze.y<=on&&ze!==Rt&&ze!==Ie&&K(Gt,qn,mn,rr,Ln,Ft,ze.x,ze.y)&&et(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;rt&&rt.z<=Vt;){if(rt.x>=Jt&&rt.x<=Vn&&rt.y>=un&&rt.y<=on&&rt!==Rt&&rt!==Ie&&K(Gt,qn,mn,rr,Ln,Ft,rt.x,rt.y)&&et(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function ee(Oe,nt,Ke){var Xe=Oe;do{var Rt=Xe.prev,bt=Xe.next.next;!Je(Rt,bt)&&wt(Rt,Xe,Xe.next,bt)&&Ae(Rt,bt)&&Ae(bt,Rt)&&(nt.push(Rt.i/Ke|0),nt.push(Xe.i/Ke|0),nt.push(bt.i/Ke|0),en(Xe),en(Xe.next),Xe=Oe=bt),Xe=Xe.next}while(Xe!==Oe);return q(Xe)}function ue(Oe,nt,Ke,Xe,Rt,bt){var Ie=Oe;do{for(var Gt=Ie.next.next;Gt!==Ie.prev;){if(Ie.i!==Gt.i&&we(Ie,Gt)){var mn=Ze(Ie,Gt);Ie=q(Ie,Ie.next),mn=q(mn,mn.next),W(Ie,nt,Ke,Xe,Rt,bt,0),W(mn,nt,Ke,Xe,Rt,bt,0);return}Gt=Gt.next}Ie=Ie.next}while(Ie!==Oe)}function ce(Oe,nt,Ke,Xe){var Rt=[],bt,Ie,Gt,mn,Ln;for(bt=0,Ie=nt.length;bt<Ie;bt++)Gt=nt[bt]*Xe,mn=bt<Ie-1?nt[bt+1]*Xe:Oe.length,Ln=L(Oe,Gt,mn,Xe,!1),Ln===Ln.next&&(Ln.steiner=!0),Rt.push(le(Ln));for(Rt.sort(xe),bt=0;bt<Rt.length;bt++)Ke=ae(Rt[bt],Ke);return Ke}function xe(Oe,nt){return Oe.x-nt.x}function ae(Oe,nt){var Ke=We(Oe,nt);if(!Ke)return nt;var Xe=Ze(Ke,Oe);return q(Xe,Xe.next),q(Ke,Ke.next)}function We(Oe,nt){var Ke=nt,Xe=Oe.x,Rt=Oe.y,bt=-1/0,Ie;do{if(Rt<=Ke.y&&Rt>=Ke.next.y&&Ke.next.y!==Ke.y){var Gt=Ke.x+(Rt-Ke.y)*(Ke.next.x-Ke.x)/(Ke.next.y-Ke.y);if(Gt<=Xe&&Gt>bt&&(bt=Gt,Ie=Ke.x<Ke.next.x?Ke:Ke.next,Gt===Xe))return Ie}Ke=Ke.next}while(Ke!==nt);if(!Ie)return null;var mn=Ie,Ln=Ie.x,qn=Ie.y,rr=1/0,Ft;Ke=Ie;do Xe>=Ke.x&&Ke.x>=Ln&&Xe!==Ke.x&&K(Rt<qn?Xe:bt,Rt,Ln,qn,Rt<qn?bt:Xe,Rt,Ke.x,Ke.y)&&(Ft=Math.abs(Rt-Ke.y)/(Xe-Ke.x),Ae(Ke,Oe)&&(Ft<rr||Ft===rr&&(Ke.x>Ie.x||Ke.x===Ie.x&&te(Ie,Ke)))&&(Ie=Ke,rr=Ft)),Ke=Ke.next;while(Ke!==mn);return Ie}function te(Oe,nt){return et(Oe.prev,Oe,nt.prev)<0&&et(nt.next,Oe,Oe.next)<0}function me(Oe,nt,Ke,Xe){var Rt=Oe;do Rt.z===0&&(Rt.z=$(Rt.x,Rt.y,nt,Ke,Xe)),Rt.prevZ=Rt.prev,Rt.nextZ=Rt.next,Rt=Rt.next;while(Rt!==Oe);Rt.prevZ.nextZ=null,Rt.prevZ=null,Re(Rt)}function Re(Oe){var nt,Ke,Xe,Rt,bt,Ie,Gt,mn,Ln=1;do{for(Ke=Oe,Oe=null,bt=null,Ie=0;Ke;){for(Ie++,Xe=Ke,Gt=0,nt=0;nt<Ln&&(Gt++,Xe=Xe.nextZ,!!Xe);nt++);for(mn=Ln;Gt>0||mn>0&&Xe;)Gt!==0&&(mn===0||!Xe||Ke.z<=Xe.z)?(Rt=Ke,Ke=Ke.nextZ,Gt--):(Rt=Xe,Xe=Xe.nextZ,mn--),bt?bt.nextZ=Rt:Oe=Rt,Rt.prevZ=bt,bt=Rt;Ke=Xe}bt.nextZ=null,Ln*=2}while(Ie>1);return Oe}function $(Oe,nt,Ke,Xe,Rt){return Oe=(Oe-Ke)*Rt|0,nt=(nt-Xe)*Rt|0,Oe=(Oe|Oe<<8)&16711935,Oe=(Oe|Oe<<4)&252645135,Oe=(Oe|Oe<<2)&858993459,Oe=(Oe|Oe<<1)&1431655765,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,Oe|nt<<1}function le(Oe){var nt=Oe,Ke=Oe;do(nt.x<Ke.x||nt.x===Ke.x&&nt.y<Ke.y)&&(Ke=nt),nt=nt.next;while(nt!==Oe);return Ke}function K(Oe,nt,Ke,Xe,Rt,bt,Ie,Gt){return(Rt-Ie)*(nt-Gt)>=(Oe-Ie)*(bt-Gt)&&(Oe-Ie)*(Xe-Gt)>=(Ke-Ie)*(nt-Gt)&&(Ke-Ie)*(bt-Gt)>=(Rt-Ie)*(Xe-Gt)}function we(Oe,nt){return Oe.next.i!==nt.i&&Oe.prev.i!==nt.i&&!Me(Oe,nt)&&(Ae(Oe,nt)&&Ae(nt,Oe)&&je(Oe,nt)&&(et(Oe.prev,Oe,nt.prev)||et(Oe,nt.prev,nt))||Je(Oe,nt)&&et(Oe.prev,Oe,Oe.next)>0&&et(nt.prev,nt,nt.next)>0)}function et(Oe,nt,Ke){return(nt.y-Oe.y)*(Ke.x-nt.x)-(nt.x-Oe.x)*(Ke.y-nt.y)}function Je(Oe,nt){return Oe.x===nt.x&&Oe.y===nt.y}function wt(Oe,nt,Ke,Xe){var Rt=_t(et(Oe,nt,Ke)),bt=_t(et(Oe,nt,Xe)),Ie=_t(et(Ke,Xe,Oe)),Gt=_t(et(Ke,Xe,nt));return!!(Rt!==bt&&Ie!==Gt||Rt===0&&pt(Oe,Ke,nt)||bt===0&&pt(Oe,Xe,nt)||Ie===0&&pt(Ke,Oe,Xe)||Gt===0&&pt(Ke,nt,Xe))}function pt(Oe,nt,Ke){return nt.x<=Math.max(Oe.x,Ke.x)&&nt.x>=Math.min(Oe.x,Ke.x)&&nt.y<=Math.max(Oe.y,Ke.y)&&nt.y>=Math.min(Oe.y,Ke.y)}function _t(Oe){return Oe>0?1:Oe<0?-1:0}function Me(Oe,nt){var Ke=Oe;do{if(Ke.i!==Oe.i&&Ke.next.i!==Oe.i&&Ke.i!==nt.i&&Ke.next.i!==nt.i&&wt(Ke,Ke.next,Oe,nt))return!0;Ke=Ke.next}while(Ke!==Oe);return!1}function Ae(Oe,nt){return et(Oe.prev,Oe,Oe.next)<0?et(Oe,nt,Oe.next)>=0&&et(Oe,Oe.prev,nt)>=0:et(Oe,nt,Oe.prev)<0||et(Oe,Oe.next,nt)<0}function je(Oe,nt){var Ke=Oe,Xe=!1,Rt=(Oe.x+nt.x)/2,bt=(Oe.y+nt.y)/2;do Ke.y>bt!=Ke.next.y>bt&&Ke.next.y!==Ke.y&&Rt<(Ke.next.x-Ke.x)*(bt-Ke.y)/(Ke.next.y-Ke.y)+Ke.x&&(Xe=!Xe),Ke=Ke.next;while(Ke!==Oe);return Xe}function Ze(Oe,nt){var Ke=new Le(Oe.i,Oe.x,Oe.y),Xe=new Le(nt.i,nt.x,nt.y),Rt=Oe.next,bt=nt.prev;return Oe.next=nt,nt.prev=Oe,Ke.next=Rt,Rt.prev=Ke,Xe.next=Ke,Ke.prev=Xe,bt.next=Xe,Xe.prev=bt,Xe}function lt(Oe,nt,Ke,Xe){var Rt=new Le(Oe,nt,Ke);return Xe?(Rt.next=Xe.next,Rt.prev=Xe,Xe.next.prev=Rt,Xe.next=Rt):(Rt.prev=Rt,Rt.next=Rt),Rt}function en(Oe){Oe.next.prev=Oe.prev,Oe.prev.next=Oe.next,Oe.prevZ&&(Oe.prevZ.nextZ=Oe.nextZ),Oe.nextZ&&(Oe.nextZ.prevZ=Oe.prevZ)}function Le(Oe,nt,Ke){this.i=Oe,this.x=nt,this.y=Ke,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}G.deviation=function(Oe,nt,Ke,Xe){var Rt=nt&&nt.length,bt=Rt?nt[0]*Ke:Oe.length,Ie=Math.abs(St(Oe,0,bt,Ke));if(Rt)for(var Gt=0,mn=nt.length;Gt<mn;Gt++){var Ln=nt[Gt]*Ke,qn=Gt<mn-1?nt[Gt+1]*Ke:Oe.length;Ie-=Math.abs(St(Oe,Ln,qn,Ke))}var rr=0;for(Gt=0;Gt<Xe.length;Gt+=3){var Ft=Xe[Gt]*Ke,Jt=Xe[Gt+1]*Ke,un=Xe[Gt+2]*Ke;rr+=Math.abs((Oe[Ft]-Oe[un])*(Oe[Jt+1]-Oe[Ft+1])-(Oe[Ft]-Oe[Jt])*(Oe[un+1]-Oe[Ft+1]))}return Ie===0&&rr===0?0:Math.abs((rr-Ie)/Ie)};function St(Oe,nt,Ke,Xe){for(var Rt=0,bt=nt,Ie=Ke-Xe;bt<Ke;bt+=Xe)Rt+=(Oe[Ie]-Oe[bt])*(Oe[bt+1]+Oe[Ie+1]),Ie=bt;return Rt}G.flatten=function(Oe){for(var nt=Oe[0][0].length,Ke={vertices:[],holes:[],dimensions:nt},Xe=0,Rt=0;Rt<Oe.length;Rt++){for(var bt=0;bt<Oe[Rt].length;bt++)for(var Ie=0;Ie<nt;Ie++)Ke.vertices.push(Oe[Rt][bt][Ie]);Rt>0&&(Xe+=Oe[Rt-1].length,Ke.holes.push(Xe))}return Ke}},2268:function(gt){"use strict";var G=gt.exports={};G.isIE=function(L){function q(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!q())return!1;if(!L)return!0;var W=function(){var E,de=3,ee=document.createElement("div"),ue=ee.getElementsByTagName("i");do ee.innerHTML="<!--[if gt IE "+ ++de+"]><i></i><![endif]-->";while(ue[0]);return de>4?de:E}();return L===W},G.isLegacyOpera=function(){return!!window.opera}},17900:function(gt){"use strict";var G=gt.exports={};G.forEach=function(L,q){for(var W=0;W<L.length;W++){var E=q(L[W]);if(E)return E}}},58229:function(gt,G,L){"use strict";var q=L(2268);gt.exports=function(W){W=W||{};var E=W.reporter,de=W.batchProcessor,ee=W.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function ue(te,me){function Re(){me(te)}if(q.isIE(8))ee(te).object={proxy:Re},te.attachEvent("onresize",Re);else{var $=ae(te);if(!$)throw new Error("Element is not detectable by this strategy.");$.contentDocument.defaultView.addEventListener("resize",Re)}}function ce(te){var me=W.important?" !important; ":"; ";return(te.join(me)+me).trim()}function xe(te,me,Re){Re||(Re=me,me=te,te=null),te=te||{};var $=te.debug;function le(K,we){var et=ce(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Je=!1,wt=window.getComputedStyle(K),pt=K.offsetWidth,_t=K.offsetHeight;ee(K).startSize={width:pt,height:_t};function Me(){function Ae(){if(wt.position==="static"){K.style.setProperty("position","relative",te.important?"important":"");var lt=function(en,Le,St,Oe){function nt(Xe){return Xe.replace(/[^-\d\.]/g,"")}var Ke=St[Oe];Ke!=="auto"&&nt(Ke)!=="0"&&(en.warn("An element that is positioned static has style."+Oe+"="+Ke+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Oe+" will be set to 0. Element: ",Le),Le.style.setProperty(Oe,"0",te.important?"important":""))};lt(E,K,wt,"top"),lt(E,K,wt,"right"),lt(E,K,wt,"bottom"),lt(E,K,wt,"left")}}function je(){Je||Ae();function lt(Le,St){if(!Le.contentDocument){var Oe=ee(Le);Oe.checkForObjectDocumentTimeoutId&&window.clearTimeout(Oe.checkForObjectDocumentTimeoutId),Oe.checkForObjectDocumentTimeoutId=setTimeout(function(){Oe.checkForObjectDocumentTimeoutId=0,lt(Le,St)},100);return}St(Le.contentDocument)}var en=this;lt(en,function(St){we(K)})}wt.position!==""&&(Ae(wt),Je=!0);var Ze=document.createElement("object");Ze.style.cssText=et,Ze.tabIndex=-1,Ze.type="text/html",Ze.setAttribute("aria-hidden","true"),Ze.onload=je,q.isIE()||(Ze.data="about:blank"),ee(K)&&(K.appendChild(Ze),ee(K).object=Ze,q.isIE()&&(Ze.data="about:blank"))}de?de.add(Me):Me()}q.isIE(8)?Re(me):le(me,Re)}function ae(te){return ee(te).object}function We(te){if(ee(te)){var me=ae(te);me&&(q.isIE(8)?te.detachEvent("onresize",me.proxy):te.removeChild(me),ee(te).checkForObjectDocumentTimeoutId&&window.clearTimeout(ee(te).checkForObjectDocumentTimeoutId),delete ee(te).object)}}return{makeDetectable:xe,addListener:ue,uninstall:We}}},60787:function(gt,G,L){"use strict";var q=L(17900).forEach;gt.exports=function(W){W=W||{};var E=W.reporter,de=W.batchProcessor,ee=W.stateHandler.getState,ue=W.stateHandler.hasState,ce=W.idHandler;if(!de)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var xe=Re(),ae="erd_scroll_detection_scrollbar_style",We="erd_scroll_detection_container";function te(Me){$(Me,ae,We)}te(window.document);function me(Me){var Ae=W.important?" !important; ":"; ";return(Me.join(Ae)+Ae).trim()}function Re(){var Me=500,Ae=500,je=document.createElement("div");je.style.cssText=me(["position: absolute","width: "+Me*2+"px","height: "+Ae*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ze=document.createElement("div");Ze.style.cssText=me(["position: absolute","width: "+Me+"px","height: "+Ae+"px","overflow: scroll","visibility: none","top: "+-Me*3+"px","left: "+-Ae*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ze.appendChild(je),document.body.insertBefore(Ze,document.body.firstChild);var lt=Me-Ze.clientWidth,en=Ae-Ze.clientHeight;return document.body.removeChild(Ze),{width:lt,height:en}}function $(Me,Ae,je){function Ze(St,Oe){Oe=Oe||function(Ke){Me.head.appendChild(Ke)};var nt=Me.createElement("style");return nt.innerHTML=St,nt.id=Ae,Oe(nt),nt}if(!Me.getElementById(Ae)){var lt=je+"_animation",en=je+"_animation_active",Le=`/* Created by the element-resize-detector library. */
`;Le+="."+je+" > div::-webkit-scrollbar { "+me(["display: none"])+` }

`,Le+="."+en+" { "+me(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+lt,"animation-name: "+lt])+` }
`,Le+="@-webkit-keyframes "+lt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Le+="@keyframes "+lt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ze(Le)}}function le(Me){Me.className+=" "+We+"_animation_active"}function K(Me,Ae,je){if(Me.addEventListener)Me.addEventListener(Ae,je);else if(Me.attachEvent)Me.attachEvent("on"+Ae,je);else return E.error("[scroll] Don't know how to add event listeners.")}function we(Me,Ae,je){if(Me.removeEventListener)Me.removeEventListener(Ae,je);else if(Me.detachEvent)Me.detachEvent("on"+Ae,je);else return E.error("[scroll] Don't know how to remove event listeners.")}function et(Me){return ee(Me).container.childNodes[0].childNodes[0].childNodes[0]}function Je(Me){return ee(Me).container.childNodes[0].childNodes[0].childNodes[1]}function wt(Me,Ae){var je=ee(Me).listeners;if(!je.push)throw new Error("Cannot add listener to an element that is not detectable.");ee(Me).listeners.push(Ae)}function pt(Me,Ae,je){je||(je=Ae,Ae=Me,Me=null),Me=Me||{};function Ze(){if(Me.debug){var Dt=Array.prototype.slice.call(arguments);if(Dt.unshift(ce.get(Ae),"Scroll: "),E.log.apply)E.log.apply(null,Dt);else for(var Vt=0;Vt<Dt.length;Vt++)E.log(Dt[Vt])}}function lt(Dt){function Vt(ze){var rt=ze.getRootNode&&ze.getRootNode().contains(ze);return ze===ze.ownerDocument.body||ze.ownerDocument.body.contains(ze)||rt}return!Vt(Dt)||window.getComputedStyle(Dt)===null}function en(Dt){var Vt=ee(Dt).container.childNodes[0],ze=window.getComputedStyle(Vt);return!ze.width||ze.width.indexOf("px")===-1}function Le(){var Dt=window.getComputedStyle(Ae),Vt={};return Vt.position=Dt.position,Vt.width=Ae.offsetWidth,Vt.height=Ae.offsetHeight,Vt.top=Dt.top,Vt.right=Dt.right,Vt.bottom=Dt.bottom,Vt.left=Dt.left,Vt.widthCSS=Dt.width,Vt.heightCSS=Dt.height,Vt}function St(){var Dt=Le();ee(Ae).startSize={width:Dt.width,height:Dt.height},Ze("Element start size",ee(Ae).startSize)}function Oe(){ee(Ae).listeners=[]}function nt(){if(Ze("storeStyle invoked."),!ee(Ae)){Ze("Aborting because element has been uninstalled");return}var Dt=Le();ee(Ae).style=Dt}function Ke(Dt,Vt,ze){ee(Dt).lastWidth=Vt,ee(Dt).lastHeight=ze}function Xe(Dt){return et(Dt).childNodes[0]}function Rt(){return 2*xe.width+1}function bt(){return 2*xe.height+1}function Ie(Dt){return Dt+10+Rt()}function Gt(Dt){return Dt+10+bt()}function mn(Dt){return Dt*2+Rt()}function Ln(Dt){return Dt*2+bt()}function qn(Dt,Vt,ze){var rt=et(Dt),jt=Je(Dt),U=Ie(Vt),pe=Gt(ze),ct=mn(Vt),he=Ln(ze);rt.scrollLeft=U,rt.scrollTop=pe,jt.scrollLeft=ct,jt.scrollTop=he}function rr(){var Dt=ee(Ae).container;if(!Dt){Dt=document.createElement("div"),Dt.className=We,Dt.style.cssText=me(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),ee(Ae).container=Dt,le(Dt),Ae.appendChild(Dt);var Vt=function(){ee(Ae).onRendered&&ee(Ae).onRendered()};K(Dt,"animationstart",Vt),ee(Ae).onAnimationStart=Vt}return Dt}function Ft(){function Dt(){var Pn=ee(Ae).style;if(Pn.position==="static"){Ae.style.setProperty("position","relative",Me.important?"important":"");var Xn=function(dt,Se,Be,st){function Lt(wn){return wn.replace(/[^-\d\.]/g,"")}var It=Be[st];It!=="auto"&&Lt(It)!=="0"&&(dt.warn("An element that is positioned static has style."+st+"="+It+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+st+" will be set to 0. Element: ",Se),Se.style[st]=0)};Xn(E,Ae,Pn,"top"),Xn(E,Ae,Pn,"right"),Xn(E,Ae,Pn,"bottom"),Xn(E,Ae,Pn,"left")}}function Vt(Pn,Xn,dt,Se){return Pn=Pn?Pn+"px":"0",Xn=Xn?Xn+"px":"0",dt=dt?dt+"px":"0",Se=Se?Se+"px":"0",["left: "+Pn,"top: "+Xn,"right: "+Se,"bottom: "+dt]}if(Ze("Injecting elements"),!ee(Ae)){Ze("Aborting because element has been uninstalled");return}Dt();var ze=ee(Ae).container;ze||(ze=rr());var rt=xe.width,jt=xe.height,U=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),pe=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Vt(-(1+rt),-(1+jt),-jt,-rt))),ct=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),he=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),$t=me(["position: absolute","left: 0","top: 0"]),sn=me(["position: absolute","width: 200%","height: 200%"]),pn=document.createElement("div"),Dn=document.createElement("div"),Wn=document.createElement("div"),Yn=document.createElement("div"),fn=document.createElement("div"),vt=document.createElement("div");pn.dir="ltr",pn.style.cssText=U,pn.className=We,Dn.className=We,Dn.style.cssText=pe,Wn.style.cssText=ct,Yn.style.cssText=$t,fn.style.cssText=he,vt.style.cssText=sn,Wn.appendChild(Yn),fn.appendChild(vt),Dn.appendChild(Wn),Dn.appendChild(fn),pn.appendChild(Dn),ze.appendChild(pn);function Pt(){var Pn=ee(Ae);Pn&&Pn.onExpand?Pn.onExpand():Ze("Aborting expand scroll handler: element has been uninstalled")}function An(){var Pn=ee(Ae);Pn&&Pn.onShrink?Pn.onShrink():Ze("Aborting shrink scroll handler: element has been uninstalled")}K(Wn,"scroll",Pt),K(fn,"scroll",An),ee(Ae).onExpandScroll=Pt,ee(Ae).onShrinkScroll=An}function Jt(){function Dt(ct,he,$t){var sn=Xe(ct),pn=Ie(he),Dn=Gt($t);sn.style.setProperty("width",pn+"px",Me.important?"important":""),sn.style.setProperty("height",Dn+"px",Me.important?"important":"")}function Vt(ct){var he=Ae.offsetWidth,$t=Ae.offsetHeight,sn=he!==ee(Ae).lastWidth||$t!==ee(Ae).lastHeight;Ze("Storing current size",he,$t),Ke(Ae,he,$t),de.add(0,function(){if(sn){if(!ee(Ae)){Ze("Aborting because element has been uninstalled");return}if(!ze()){Ze("Aborting because element container has not been initialized");return}if(Me.debug){var Dn=Ae.offsetWidth,Wn=Ae.offsetHeight;(Dn!==he||Wn!==$t)&&E.warn(ce.get(Ae),"Scroll: Size changed before updating detector elements.")}Dt(Ae,he,$t)}}),de.add(1,function(){if(!ee(Ae)){Ze("Aborting because element has been uninstalled");return}if(!ze()){Ze("Aborting because element container has not been initialized");return}qn(Ae,he,$t)}),sn&&ct&&de.add(2,function(){if(!ee(Ae)){Ze("Aborting because element has been uninstalled");return}if(!ze()){Ze("Aborting because element container has not been initialized");return}ct()})}function ze(){return!!ee(Ae).container}function rt(){function ct(){return ee(Ae).lastNotifiedWidth===void 0}Ze("notifyListenersIfNeeded invoked");var he=ee(Ae);if(ct()&&he.lastWidth===he.startSize.width&&he.lastHeight===he.startSize.height)return Ze("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(he.lastWidth===he.lastNotifiedWidth&&he.lastHeight===he.lastNotifiedHeight)return Ze("Not notifying: Size already notified");Ze("Current size not notified, notifying..."),he.lastNotifiedWidth=he.lastWidth,he.lastNotifiedHeight=he.lastHeight,q(ee(Ae).listeners,function($t){$t(Ae)})}function jt(){if(Ze("startanimation triggered."),en(Ae)){Ze("Ignoring since element is still unrendered...");return}Ze("Element rendered.");var ct=et(Ae),he=Je(Ae);(ct.scrollLeft===0||ct.scrollTop===0||he.scrollLeft===0||he.scrollTop===0)&&(Ze("Scrollbars out of sync. Updating detector elements..."),Vt(rt))}function U(){if(Ze("Scroll detected."),en(Ae)){Ze("Scroll event fired while unrendered. Ignoring...");return}Vt(rt)}if(Ze("registerListenersAndPositionElements invoked."),!ee(Ae)){Ze("Aborting because element has been uninstalled");return}ee(Ae).onRendered=jt,ee(Ae).onExpand=U,ee(Ae).onShrink=U;var pe=ee(Ae).style;Dt(Ae,pe.width,pe.height)}function un(){if(Ze("finalizeDomMutation invoked."),!ee(Ae)){Ze("Aborting because element has been uninstalled");return}var Dt=ee(Ae).style;Ke(Ae,Dt.width,Dt.height),qn(Ae,Dt.width,Dt.height)}function Vn(){je(Ae)}function on(){Ze("Installing..."),Oe(),St(),de.add(0,nt),de.add(1,Ft),de.add(2,Jt),de.add(3,un),de.add(4,Vn)}Ze("Making detectable..."),lt(Ae)?(Ze("Element is detached"),rr(),Ze("Waiting until element is attached..."),ee(Ae).onRendered=function(){Ze("Element is now attached"),on()}):on()}function _t(Me){var Ae=ee(Me);Ae&&(Ae.onExpandScroll&&we(et(Me),"scroll",Ae.onExpandScroll),Ae.onShrinkScroll&&we(Je(Me),"scroll",Ae.onShrinkScroll),Ae.onAnimationStart&&we(Ae.container,"animationstart",Ae.onAnimationStart),Ae.container&&Me.removeChild(Ae.container))}return{makeDetectable:pt,addListener:wt,uninstall:_t,initDocument:te}}},63844:function(gt,G,L){"use strict";var q=L(17900).forEach,W=L(68452),E=L(96199),de=L(75805),ee=L(79799),ue=L(71724),ce=L(2268),xe=L(98129),ae=L(21931),We=L(58229),te=L(60787);function me(K){return Array.isArray(K)||K.length!==void 0}function Re(K){if(Array.isArray(K))return K;var we=[];return q(K,function(et){we.push(et)}),we}function $(K){return K&&K.nodeType===1}gt.exports=function(K){K=K||{};var we;if(K.idHandler)we={get:function(Xe){return K.idHandler.get(Xe,!0)},set:K.idHandler.set};else{var et=de(),Je=ee({idGenerator:et,stateHandler:ae});we=Je}var wt=K.reporter;if(!wt){var pt=wt===!1;wt=ue(pt)}var _t=le(K,"batchProcessor",xe({reporter:wt})),Me={};Me.callOnAdd=!!le(K,"callOnAdd",!0),Me.debug=!!le(K,"debug",!1);var Ae=E(we),je=W({stateHandler:ae}),Ze,lt=le(K,"strategy","object"),en=le(K,"important",!1),Le={reporter:wt,batchProcessor:_t,stateHandler:ae,idHandler:we,important:en};if(lt==="scroll"&&(ce.isLegacyOpera()?(wt.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),lt="object"):ce.isIE(9)&&(wt.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),lt="object")),lt==="scroll")Ze=te(Le);else if(lt==="object")Ze=We(Le);else throw new Error("Invalid strategy name: "+lt);var St={};function Oe(Xe,Rt,bt){function Ie(Ft){var Jt=Ae.get(Ft);q(Jt,function(Vn){Vn(Ft)})}function Gt(Ft,Jt,un){Ae.add(Jt,un),Ft&&un(Jt)}if(bt||(bt=Rt,Rt=Xe,Xe={}),!Rt)throw new Error("At least one element required.");if(!bt)throw new Error("Listener required.");if($(Rt))Rt=[Rt];else if(me(Rt))Rt=Re(Rt);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var mn=0,Ln=le(Xe,"callOnAdd",Me.callOnAdd),qn=le(Xe,"onReady",function(){}),rr=le(Xe,"debug",Me.debug);q(Rt,function(Jt){ae.getState(Jt)||(ae.initState(Jt),we.set(Jt));var un=we.get(Jt);if(rr&&wt.log("Attaching listener to element",un,Jt),!je.isDetectable(Jt)){if(rr&&wt.log(un,"Not detectable."),je.isBusy(Jt)){rr&&wt.log(un,"System busy making it detectable"),Gt(Ln,Jt,bt),St[un]=St[un]||[],St[un].push(function(){mn++,mn===Rt.length&&qn()});return}return rr&&wt.log(un,"Making detectable..."),je.markBusy(Jt,!0),Ze.makeDetectable({debug:rr,important:en},Jt,function(on){if(rr&&wt.log(un,"onElementDetectable"),ae.getState(on)){je.markAsDetectable(on),je.markBusy(on,!1),Ze.addListener(on,Ie),Gt(Ln,on,bt);var Dt=ae.getState(on);if(Dt&&Dt.startSize){var Vt=on.offsetWidth,ze=on.offsetHeight;(Dt.startSize.width!==Vt||Dt.startSize.height!==ze)&&Ie(on)}St[un]&&q(St[un],function(rt){rt()})}else rr&&wt.log(un,"Element uninstalled before being detectable.");delete St[un],mn++,mn===Rt.length&&qn()})}rr&&wt.log(un,"Already detecable, adding listener."),Gt(Ln,Jt,bt),mn++}),mn===Rt.length&&qn()}function nt(Xe){if(!Xe)return wt.error("At least one element is required.");if($(Xe))Xe=[Xe];else if(me(Xe))Xe=Re(Xe);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");q(Xe,function(Rt){Ae.removeAllListeners(Rt),Ze.uninstall(Rt),ae.cleanState(Rt)})}function Ke(Xe){Ze.initDocument&&Ze.initDocument(Xe)}return{listenTo:Oe,removeListener:Ae.removeListener,removeAllListeners:Ae.removeAllListeners,uninstall:nt,initDocument:Ke}};function le(K,we,et){var Je=K[we];return Je==null&&et!==void 0?et:Je}},68452:function(gt){"use strict";gt.exports=function(G){var L=G.stateHandler.getState;function q(ee){var ue=L(ee);return ue&&!!ue.isDetectable}function W(ee){L(ee).isDetectable=!0}function E(ee){return!!L(ee).busy}function de(ee,ue){L(ee).busy=!!ue}return{isDetectable:q,markAsDetectable:W,isBusy:E,markBusy:de}}},75805:function(gt){"use strict";gt.exports=function(){var G=1;function L(){return G++}return{generate:L}}},79799:function(gt){"use strict";gt.exports=function(G){var L=G.idGenerator,q=G.stateHandler.getState;function W(de){var ee=q(de);return ee&&ee.id!==void 0?ee.id:null}function E(de){var ee=q(de);if(!ee)throw new Error("setId required the element to have a resize detection state.");var ue=L.generate();return ee.id=ue,ue}return{get:W,set:E}}},96199:function(gt){"use strict";gt.exports=function(G){var L={};function q(ee){var ue=G.get(ee);return ue===void 0?[]:L[ue]||[]}function W(ee,ue){var ce=G.get(ee);L[ce]||(L[ce]=[]),L[ce].push(ue)}function E(ee,ue){for(var ce=q(ee),xe=0,ae=ce.length;xe<ae;++xe)if(ce[xe]===ue){ce.splice(xe,1);break}}function de(ee){var ue=q(ee);ue&&(ue.length=0)}return{get:q,add:W,removeListener:E,removeAllListeners:de}}},71724:function(gt){"use strict";gt.exports=function(G){function L(){}var q={log:L,warn:L,error:L};if(!G&&window.console){var W=function(E,de){E[de]=function(){var ue=console[de];if(ue.apply)ue.apply(console,arguments);else for(var ce=0;ce<arguments.length;ce++)ue(arguments[ce])}};W(q,"log"),W(q,"warn"),W(q,"error")}return q}},21931:function(gt){"use strict";var G="_erd";function L(E){return E[G]={},q(E)}function q(E){return E[G]}function W(E){delete E[G]}gt.exports={initState:L,getState:q,cleanState:W}},26729:function(gt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function q(){}Object.create&&(q.prototype=Object.create(null),new q().__proto__||(L=!1));function W(ue,ce,xe){this.fn=ue,this.context=ce,this.once=xe||!1}function E(ue,ce,xe,ae,We){if(typeof xe!="function")throw new TypeError("The listener must be a function");var te=new W(xe,ae||ue,We),me=L?L+ce:ce;return ue._events[me]?ue._events[me].fn?ue._events[me]=[ue._events[me],te]:ue._events[me].push(te):(ue._events[me]=te,ue._eventsCount++),ue}function de(ue,ce){--ue._eventsCount===0?ue._events=new q:delete ue._events[ce]}function ee(){this._events=new q,this._eventsCount=0}ee.prototype.eventNames=function(){var ce=[],xe,ae;if(this._eventsCount===0)return ce;for(ae in xe=this._events)G.call(xe,ae)&&ce.push(L?ae.slice(1):ae);return Object.getOwnPropertySymbols?ce.concat(Object.getOwnPropertySymbols(xe)):ce},ee.prototype.listeners=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];if(!ae)return[];if(ae.fn)return[ae.fn];for(var We=0,te=ae.length,me=new Array(te);We<te;We++)me[We]=ae[We].fn;return me},ee.prototype.listenerCount=function(ce){var xe=L?L+ce:ce,ae=this._events[xe];return ae?ae.fn?1:ae.length:0},ee.prototype.emit=function(ce,xe,ae,We,te,me){var Re=L?L+ce:ce;if(!this._events[Re])return!1;var $=this._events[Re],le=arguments.length,K,we;if($.fn){switch($.once&&this.removeListener(ce,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,xe),!0;case 3:return $.fn.call($.context,xe,ae),!0;case 4:return $.fn.call($.context,xe,ae,We),!0;case 5:return $.fn.call($.context,xe,ae,We,te),!0;case 6:return $.fn.call($.context,xe,ae,We,te,me),!0}for(we=1,K=new Array(le-1);we<le;we++)K[we-1]=arguments[we];$.fn.apply($.context,K)}else{var et=$.length,Je;for(we=0;we<et;we++)switch($[we].once&&this.removeListener(ce,$[we].fn,void 0,!0),le){case 1:$[we].fn.call($[we].context);break;case 2:$[we].fn.call($[we].context,xe);break;case 3:$[we].fn.call($[we].context,xe,ae);break;case 4:$[we].fn.call($[we].context,xe,ae,We);break;default:if(!K)for(Je=1,K=new Array(le-1);Je<le;Je++)K[Je-1]=arguments[Je];$[we].fn.apply($[we].context,K)}}return!0},ee.prototype.on=function(ce,xe,ae){return E(this,ce,xe,ae,!1)},ee.prototype.once=function(ce,xe,ae){return E(this,ce,xe,ae,!0)},ee.prototype.removeListener=function(ce,xe,ae,We){var te=L?L+ce:ce;if(!this._events[te])return this;if(!xe)return de(this,te),this;var me=this._events[te];if(me.fn)me.fn===xe&&(!We||me.once)&&(!ae||me.context===ae)&&de(this,te);else{for(var Re=0,$=[],le=me.length;Re<le;Re++)(me[Re].fn!==xe||We&&!me[Re].once||ae&&me[Re].context!==ae)&&$.push(me[Re]);$.length?this._events[te]=$.length===1?$[0]:$:de(this,te)}return this},ee.prototype.removeAllListeners=function(ce){var xe;return ce?(xe=L?L+ce:ce,this._events[xe]&&de(this,xe)):(this._events=new q,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,gt.exports=ee},69916:function(gt,G){(function(L,q){q(G)})(this,function(L){"use strict";function q(Re,$,le,K){K=K||{};var we=K.maxIterations||100,et=K.tolerance||1e-10,Je=Re($),wt=Re(le),pt=le-$;if(Je*wt>0)throw"Initial bisect points must have opposite signs";if(Je===0)return $;if(wt===0)return le;for(var _t=0;_t<we;++_t){pt/=2;var Me=$+pt,Ae=Re(Me);if(Ae*Je>=0&&($=Me),Math.abs(pt)<et||Ae===0)return Me}return $+pt}function W(Re){for(var $=new Array(Re),le=0;le<Re;++le)$[le]=0;return $}function E(Re,$){return W(Re).map(function(){return W($)})}function de(Re,$){for(var le=0,K=0;K<Re.length;++K)le+=Re[K]*$[K];return le}function ee(Re){return Math.sqrt(de(Re,Re))}function ue(Re,$,le){for(var K=0;K<$.length;++K)Re[K]=$[K]*le}function ce(Re,$,le,K,we){for(var et=0;et<Re.length;++et)Re[et]=$*le[et]+K*we[et]}function xe(Re,$,le){le=le||{};var K=le.maxIterations||$.length*200,we=le.nonZeroDelta||1.05,et=le.zeroDelta||.001,Je=le.minErrorDelta||1e-6,wt=le.minErrorDelta||1e-5,pt=le.rho!==void 0?le.rho:1,_t=le.chi!==void 0?le.chi:2,Me=le.psi!==void 0?le.psi:-.5,Ae=le.sigma!==void 0?le.sigma:.5,je,Ze=$.length,lt=new Array(Ze+1);lt[0]=$,lt[0].fx=Re($),lt[0].id=0;for(var en=0;en<Ze;++en){var Le=$.slice();Le[en]=Le[en]?Le[en]*we:et,lt[en+1]=Le,lt[en+1].fx=Re(Le),lt[en+1].id=en+1}function St(qn){for(var rr=0;rr<qn.length;rr++)lt[Ze][rr]=qn[rr];lt[Ze].fx=qn.fx}for(var Oe=function(qn,rr){return qn.fx-rr.fx},nt=$.slice(),Ke=$.slice(),Xe=$.slice(),Rt=$.slice(),bt=0;bt<K;++bt){if(lt.sort(Oe),le.history){var Ie=lt.map(function(qn){var rr=qn.slice();return rr.fx=qn.fx,rr.id=qn.id,rr});Ie.sort(function(qn,rr){return qn.id-rr.id}),le.history.push({x:lt[0].slice(),fx:lt[0].fx,simplex:Ie})}for(je=0,en=0;en<Ze;++en)je=Math.max(je,Math.abs(lt[0][en]-lt[1][en]));if(Math.abs(lt[0].fx-lt[Ze].fx)<Je&&je<wt)break;for(en=0;en<Ze;++en){nt[en]=0;for(var Gt=0;Gt<Ze;++Gt)nt[en]+=lt[Gt][en];nt[en]/=Ze}var mn=lt[Ze];if(ce(Ke,1+pt,nt,-pt,mn),Ke.fx=Re(Ke),Ke.fx<lt[0].fx)ce(Rt,1+_t,nt,-_t,mn),Rt.fx=Re(Rt),Rt.fx<Ke.fx?St(Rt):St(Ke);else if(Ke.fx>=lt[Ze-1].fx){var Ln=!1;if(Ke.fx>mn.fx?(ce(Xe,1+Me,nt,-Me,mn),Xe.fx=Re(Xe),Xe.fx<mn.fx?St(Xe):Ln=!0):(ce(Xe,1-Me*pt,nt,Me*pt,mn),Xe.fx=Re(Xe),Xe.fx<Ke.fx?St(Xe):Ln=!0),Ln){if(Ae>=1)break;for(en=1;en<lt.length;++en)ce(lt[en],1-Ae,lt[0],Ae,lt[en]),lt[en].fx=Re(lt[en])}}else St(Ke)}return lt.sort(Oe),{fx:lt[0].fx,x:lt[0]}}function ae(Re,$,le,K,we,et,Je){var wt=le.fx,pt=de(le.fxprime,$),_t=wt,Me=wt,Ae=pt,je=0;we=we||1,et=et||1e-6,Je=Je||.1;function Ze(en,Le,St){for(var Oe=0;Oe<16;++Oe)if(we=(en+Le)/2,ce(K.x,1,le.x,we,$),_t=K.fx=Re(K.x,K.fxprime),Ae=de(K.fxprime,$),_t>wt+et*we*pt||_t>=St)Le=we;else{if(Math.abs(Ae)<=-Je*pt)return we;Ae*(Le-en)>=0&&(Le=en),en=we,St=_t}return 0}for(var lt=0;lt<10;++lt){if(ce(K.x,1,le.x,we,$),_t=K.fx=Re(K.x,K.fxprime),Ae=de(K.fxprime,$),_t>wt+et*we*pt||lt&&_t>=Me)return Ze(je,we,Me);if(Math.abs(Ae)<=-Je*pt)return we;if(Ae>=0)return Ze(we,je,_t);Me=_t,je=we,we*=2}return we}function We(Re,$,le){var K={x:$.slice(),fx:0,fxprime:$.slice()},we={x:$.slice(),fx:0,fxprime:$.slice()},et=$.slice(),Je,wt,pt=1,_t;le=le||{},_t=le.maxIterations||$.length*20,K.fx=Re(K.x,K.fxprime),Je=K.fxprime.slice(),ue(Je,K.fxprime,-1);for(var Me=0;Me<_t;++Me){if(pt=ae(Re,Je,K,we,pt),le.history&&le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),alpha:pt}),!pt)ue(Je,K.fxprime,-1);else{ce(et,1,we.fxprime,-1,K.fxprime);var Ae=de(K.fxprime,K.fxprime),je=Math.max(0,de(et,we.fxprime)/Ae);ce(Je,je,Je,-1,we.fxprime),wt=K,K=we,we=wt}if(ee(K.fxprime)<=1e-5)break}return le.history&&le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),alpha:pt}),K}function te(Re,$,le){le=le||{};for(var K=le.maxIterations||$.length*100,we=le.learnRate||.001,et={x:$.slice(),fx:0,fxprime:$.slice()},Je=0;Je<K&&(et.fx=Re(et.x,et.fxprime),le.history&&le.history.push({x:et.x.slice(),fx:et.fx,fxprime:et.fxprime.slice()}),ce(et.x,1,et.x,-we,et.fxprime),!(ee(et.fxprime)<=1e-5));++Je);return et}function me(Re,$,le){le=le||{};var K={x:$.slice(),fx:0,fxprime:$.slice()},we={x:$.slice(),fx:0,fxprime:$.slice()},et=le.maxIterations||$.length*100,Je=le.learnRate||1,wt=$.slice(),pt=le.c1||.001,_t=le.c2||.1,Me,Ae=[];if(le.history){var je=Re;Re=function(lt,en){return Ae.push(lt.slice()),je(lt,en)}}K.fx=Re(K.x,K.fxprime);for(var Ze=0;Ze<et&&(ue(wt,K.fxprime,-1),Je=ae(Re,wt,K,we,Je,pt,_t),le.history&&(le.history.push({x:K.x.slice(),fx:K.fx,fxprime:K.fxprime.slice(),functionCalls:Ae,learnRate:Je,alpha:Je}),Ae=[]),Me=K,K=we,we=Me,!(Je===0||ee(K.fxprime)<1e-5));++Ze);return K}L.bisect=q,L.nelderMead=xe,L.conjugateGradient=We,L.gradientDescent=te,L.gradientDescentLineSearch=me,L.zeros=W,L.zerosM=E,L.norm2=ee,L.weightedSum=ce,L.scale=ue})},49685:function(gt,G,L){"use strict";L.d(G,{Ib:function(){return q},WT:function(){return W}});var q=1e-6,W=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function de(xe){W=xe}var ee=Math.PI/180;function ue(xe){return xe*ee}function ce(xe,ae){return Math.abs(xe-ae)<=q*Math.max(1,Math.abs(xe),Math.abs(ae))}Math.hypot||(Math.hypot=function(){for(var xe=0,ae=arguments.length;ae--;)xe+=arguments[ae]*arguments[ae];return Math.sqrt(xe)})},85975:function(gt,G,L){"use strict";L.r(G),L.d(G,{add:function(){return un},adjoint:function(){return We},clone:function(){return E},copy:function(){return de},create:function(){return W},determinant:function(){return te},equals:function(){return ze},exactEquals:function(){return Vt},frob:function(){return Jt},fromQuat:function(){return nt},fromQuat2:function(){return Ze},fromRotation:function(){return pt},fromRotationTranslation:function(){return je},fromRotationTranslationScale:function(){return St},fromRotationTranslationScaleOrigin:function(){return Oe},fromScaling:function(){return wt},fromTranslation:function(){return Je},fromValues:function(){return ee},fromXRotation:function(){return _t},fromYRotation:function(){return Me},fromZRotation:function(){return Ae},frustum:function(){return Ke},getRotation:function(){return Le},getScaling:function(){return en},getTranslation:function(){return lt},identity:function(){return ce},invert:function(){return ae},lookAt:function(){return qn},mul:function(){return rt},multiply:function(){return me},multiplyScalar:function(){return on},multiplyScalarAndAdd:function(){return Dt},ortho:function(){return mn},orthoNO:function(){return Gt},orthoZO:function(){return Ln},perspective:function(){return Rt},perspectiveFromFieldOfView:function(){return Ie},perspectiveNO:function(){return Xe},perspectiveZO:function(){return bt},rotate:function(){return le},rotateX:function(){return K},rotateY:function(){return we},rotateZ:function(){return et},scale:function(){return $},set:function(){return ue},str:function(){return Ft},sub:function(){return jt},subtract:function(){return Vn},targetTo:function(){return rr},translate:function(){return Re},transpose:function(){return xe}});var q=L(49685);function W(){var U=new q.WT(16);return q.WT!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=0,U[12]=0,U[13]=0,U[14]=0),U[0]=1,U[5]=1,U[10]=1,U[15]=1,U}function E(U){var pe=new q.WT(16);return pe[0]=U[0],pe[1]=U[1],pe[2]=U[2],pe[3]=U[3],pe[4]=U[4],pe[5]=U[5],pe[6]=U[6],pe[7]=U[7],pe[8]=U[8],pe[9]=U[9],pe[10]=U[10],pe[11]=U[11],pe[12]=U[12],pe[13]=U[13],pe[14]=U[14],pe[15]=U[15],pe}function de(U,pe){return U[0]=pe[0],U[1]=pe[1],U[2]=pe[2],U[3]=pe[3],U[4]=pe[4],U[5]=pe[5],U[6]=pe[6],U[7]=pe[7],U[8]=pe[8],U[9]=pe[9],U[10]=pe[10],U[11]=pe[11],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15],U}function ee(U,pe,ct,he,$t,sn,pn,Dn,Wn,Yn,fn,vt,Pt,An,Pn,Xn){var dt=new q.WT(16);return dt[0]=U,dt[1]=pe,dt[2]=ct,dt[3]=he,dt[4]=$t,dt[5]=sn,dt[6]=pn,dt[7]=Dn,dt[8]=Wn,dt[9]=Yn,dt[10]=fn,dt[11]=vt,dt[12]=Pt,dt[13]=An,dt[14]=Pn,dt[15]=Xn,dt}function ue(U,pe,ct,he,$t,sn,pn,Dn,Wn,Yn,fn,vt,Pt,An,Pn,Xn,dt){return U[0]=pe,U[1]=ct,U[2]=he,U[3]=$t,U[4]=sn,U[5]=pn,U[6]=Dn,U[7]=Wn,U[8]=Yn,U[9]=fn,U[10]=vt,U[11]=Pt,U[12]=An,U[13]=Pn,U[14]=Xn,U[15]=dt,U}function ce(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function xe(U,pe){if(U===pe){var ct=pe[1],he=pe[2],$t=pe[3],sn=pe[6],pn=pe[7],Dn=pe[11];U[1]=pe[4],U[2]=pe[8],U[3]=pe[12],U[4]=ct,U[6]=pe[9],U[7]=pe[13],U[8]=he,U[9]=sn,U[11]=pe[14],U[12]=$t,U[13]=pn,U[14]=Dn}else U[0]=pe[0],U[1]=pe[4],U[2]=pe[8],U[3]=pe[12],U[4]=pe[1],U[5]=pe[5],U[6]=pe[9],U[7]=pe[13],U[8]=pe[2],U[9]=pe[6],U[10]=pe[10],U[11]=pe[14],U[12]=pe[3],U[13]=pe[7],U[14]=pe[11],U[15]=pe[15];return U}function ae(U,pe){var ct=pe[0],he=pe[1],$t=pe[2],sn=pe[3],pn=pe[4],Dn=pe[5],Wn=pe[6],Yn=pe[7],fn=pe[8],vt=pe[9],Pt=pe[10],An=pe[11],Pn=pe[12],Xn=pe[13],dt=pe[14],Se=pe[15],Be=ct*Dn-he*pn,st=ct*Wn-$t*pn,Lt=ct*Yn-sn*pn,It=he*Wn-$t*Dn,wn=he*Yn-sn*Dn,Kn=$t*Yn-sn*Wn,_r=fn*Xn-vt*Pn,Jn=fn*dt-Pt*Pn,Pe=fn*Se-An*Pn,Te=vt*dt-Pt*Xn,ke=vt*Se-An*Xn,it=Pt*Se-An*dt,At=Be*it-st*ke+Lt*Te+It*Pe-wn*Jn+Kn*_r;return At?(At=1/At,U[0]=(Dn*it-Wn*ke+Yn*Te)*At,U[1]=($t*ke-he*it-sn*Te)*At,U[2]=(Xn*Kn-dt*wn+Se*It)*At,U[3]=(Pt*wn-vt*Kn-An*It)*At,U[4]=(Wn*Pe-pn*it-Yn*Jn)*At,U[5]=(ct*it-$t*Pe+sn*Jn)*At,U[6]=(dt*Lt-Pn*Kn-Se*st)*At,U[7]=(fn*Kn-Pt*Lt+An*st)*At,U[8]=(pn*ke-Dn*Pe+Yn*_r)*At,U[9]=(he*Pe-ct*ke-sn*_r)*At,U[10]=(Pn*wn-Xn*Lt+Se*Be)*At,U[11]=(vt*Lt-fn*wn-An*Be)*At,U[12]=(Dn*Jn-pn*Te-Wn*_r)*At,U[13]=(ct*Te-he*Jn+$t*_r)*At,U[14]=(Xn*st-Pn*It-dt*Be)*At,U[15]=(fn*It-vt*st+Pt*Be)*At,U):null}function We(U,pe){var ct=pe[0],he=pe[1],$t=pe[2],sn=pe[3],pn=pe[4],Dn=pe[5],Wn=pe[6],Yn=pe[7],fn=pe[8],vt=pe[9],Pt=pe[10],An=pe[11],Pn=pe[12],Xn=pe[13],dt=pe[14],Se=pe[15];return U[0]=Dn*(Pt*Se-An*dt)-vt*(Wn*Se-Yn*dt)+Xn*(Wn*An-Yn*Pt),U[1]=-(he*(Pt*Se-An*dt)-vt*($t*Se-sn*dt)+Xn*($t*An-sn*Pt)),U[2]=he*(Wn*Se-Yn*dt)-Dn*($t*Se-sn*dt)+Xn*($t*Yn-sn*Wn),U[3]=-(he*(Wn*An-Yn*Pt)-Dn*($t*An-sn*Pt)+vt*($t*Yn-sn*Wn)),U[4]=-(pn*(Pt*Se-An*dt)-fn*(Wn*Se-Yn*dt)+Pn*(Wn*An-Yn*Pt)),U[5]=ct*(Pt*Se-An*dt)-fn*($t*Se-sn*dt)+Pn*($t*An-sn*Pt),U[6]=-(ct*(Wn*Se-Yn*dt)-pn*($t*Se-sn*dt)+Pn*($t*Yn-sn*Wn)),U[7]=ct*(Wn*An-Yn*Pt)-pn*($t*An-sn*Pt)+fn*($t*Yn-sn*Wn),U[8]=pn*(vt*Se-An*Xn)-fn*(Dn*Se-Yn*Xn)+Pn*(Dn*An-Yn*vt),U[9]=-(ct*(vt*Se-An*Xn)-fn*(he*Se-sn*Xn)+Pn*(he*An-sn*vt)),U[10]=ct*(Dn*Se-Yn*Xn)-pn*(he*Se-sn*Xn)+Pn*(he*Yn-sn*Dn),U[11]=-(ct*(Dn*An-Yn*vt)-pn*(he*An-sn*vt)+fn*(he*Yn-sn*Dn)),U[12]=-(pn*(vt*dt-Pt*Xn)-fn*(Dn*dt-Wn*Xn)+Pn*(Dn*Pt-Wn*vt)),U[13]=ct*(vt*dt-Pt*Xn)-fn*(he*dt-$t*Xn)+Pn*(he*Pt-$t*vt),U[14]=-(ct*(Dn*dt-Wn*Xn)-pn*(he*dt-$t*Xn)+Pn*(he*Wn-$t*Dn)),U[15]=ct*(Dn*Pt-Wn*vt)-pn*(he*Pt-$t*vt)+fn*(he*Wn-$t*Dn),U}function te(U){var pe=U[0],ct=U[1],he=U[2],$t=U[3],sn=U[4],pn=U[5],Dn=U[6],Wn=U[7],Yn=U[8],fn=U[9],vt=U[10],Pt=U[11],An=U[12],Pn=U[13],Xn=U[14],dt=U[15],Se=pe*pn-ct*sn,Be=pe*Dn-he*sn,st=pe*Wn-$t*sn,Lt=ct*Dn-he*pn,It=ct*Wn-$t*pn,wn=he*Wn-$t*Dn,Kn=Yn*Pn-fn*An,_r=Yn*Xn-vt*An,Jn=Yn*dt-Pt*An,Pe=fn*Xn-vt*Pn,Te=fn*dt-Pt*Pn,ke=vt*dt-Pt*Xn;return Se*ke-Be*Te+st*Pe+Lt*Jn-It*_r+wn*Kn}function me(U,pe,ct){var he=pe[0],$t=pe[1],sn=pe[2],pn=pe[3],Dn=pe[4],Wn=pe[5],Yn=pe[6],fn=pe[7],vt=pe[8],Pt=pe[9],An=pe[10],Pn=pe[11],Xn=pe[12],dt=pe[13],Se=pe[14],Be=pe[15],st=ct[0],Lt=ct[1],It=ct[2],wn=ct[3];return U[0]=st*he+Lt*Dn+It*vt+wn*Xn,U[1]=st*$t+Lt*Wn+It*Pt+wn*dt,U[2]=st*sn+Lt*Yn+It*An+wn*Se,U[3]=st*pn+Lt*fn+It*Pn+wn*Be,st=ct[4],Lt=ct[5],It=ct[6],wn=ct[7],U[4]=st*he+Lt*Dn+It*vt+wn*Xn,U[5]=st*$t+Lt*Wn+It*Pt+wn*dt,U[6]=st*sn+Lt*Yn+It*An+wn*Se,U[7]=st*pn+Lt*fn+It*Pn+wn*Be,st=ct[8],Lt=ct[9],It=ct[10],wn=ct[11],U[8]=st*he+Lt*Dn+It*vt+wn*Xn,U[9]=st*$t+Lt*Wn+It*Pt+wn*dt,U[10]=st*sn+Lt*Yn+It*An+wn*Se,U[11]=st*pn+Lt*fn+It*Pn+wn*Be,st=ct[12],Lt=ct[13],It=ct[14],wn=ct[15],U[12]=st*he+Lt*Dn+It*vt+wn*Xn,U[13]=st*$t+Lt*Wn+It*Pt+wn*dt,U[14]=st*sn+Lt*Yn+It*An+wn*Se,U[15]=st*pn+Lt*fn+It*Pn+wn*Be,U}function Re(U,pe,ct){var he=ct[0],$t=ct[1],sn=ct[2],pn,Dn,Wn,Yn,fn,vt,Pt,An,Pn,Xn,dt,Se;return pe===U?(U[12]=pe[0]*he+pe[4]*$t+pe[8]*sn+pe[12],U[13]=pe[1]*he+pe[5]*$t+pe[9]*sn+pe[13],U[14]=pe[2]*he+pe[6]*$t+pe[10]*sn+pe[14],U[15]=pe[3]*he+pe[7]*$t+pe[11]*sn+pe[15]):(pn=pe[0],Dn=pe[1],Wn=pe[2],Yn=pe[3],fn=pe[4],vt=pe[5],Pt=pe[6],An=pe[7],Pn=pe[8],Xn=pe[9],dt=pe[10],Se=pe[11],U[0]=pn,U[1]=Dn,U[2]=Wn,U[3]=Yn,U[4]=fn,U[5]=vt,U[6]=Pt,U[7]=An,U[8]=Pn,U[9]=Xn,U[10]=dt,U[11]=Se,U[12]=pn*he+fn*$t+Pn*sn+pe[12],U[13]=Dn*he+vt*$t+Xn*sn+pe[13],U[14]=Wn*he+Pt*$t+dt*sn+pe[14],U[15]=Yn*he+An*$t+Se*sn+pe[15]),U}function $(U,pe,ct){var he=ct[0],$t=ct[1],sn=ct[2];return U[0]=pe[0]*he,U[1]=pe[1]*he,U[2]=pe[2]*he,U[3]=pe[3]*he,U[4]=pe[4]*$t,U[5]=pe[5]*$t,U[6]=pe[6]*$t,U[7]=pe[7]*$t,U[8]=pe[8]*sn,U[9]=pe[9]*sn,U[10]=pe[10]*sn,U[11]=pe[11]*sn,U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15],U}function le(U,pe,ct,he){var $t=he[0],sn=he[1],pn=he[2],Dn=Math.hypot($t,sn,pn),Wn,Yn,fn,vt,Pt,An,Pn,Xn,dt,Se,Be,st,Lt,It,wn,Kn,_r,Jn,Pe,Te,ke,it,At,Yt;return Dn<q.Ib?null:(Dn=1/Dn,$t*=Dn,sn*=Dn,pn*=Dn,Wn=Math.sin(ct),Yn=Math.cos(ct),fn=1-Yn,vt=pe[0],Pt=pe[1],An=pe[2],Pn=pe[3],Xn=pe[4],dt=pe[5],Se=pe[6],Be=pe[7],st=pe[8],Lt=pe[9],It=pe[10],wn=pe[11],Kn=$t*$t*fn+Yn,_r=sn*$t*fn+pn*Wn,Jn=pn*$t*fn-sn*Wn,Pe=$t*sn*fn-pn*Wn,Te=sn*sn*fn+Yn,ke=pn*sn*fn+$t*Wn,it=$t*pn*fn+sn*Wn,At=sn*pn*fn-$t*Wn,Yt=pn*pn*fn+Yn,U[0]=vt*Kn+Xn*_r+st*Jn,U[1]=Pt*Kn+dt*_r+Lt*Jn,U[2]=An*Kn+Se*_r+It*Jn,U[3]=Pn*Kn+Be*_r+wn*Jn,U[4]=vt*Pe+Xn*Te+st*ke,U[5]=Pt*Pe+dt*Te+Lt*ke,U[6]=An*Pe+Se*Te+It*ke,U[7]=Pn*Pe+Be*Te+wn*ke,U[8]=vt*it+Xn*At+st*Yt,U[9]=Pt*it+dt*At+Lt*Yt,U[10]=An*it+Se*At+It*Yt,U[11]=Pn*it+Be*At+wn*Yt,pe!==U&&(U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U)}function K(U,pe,ct){var he=Math.sin(ct),$t=Math.cos(ct),sn=pe[4],pn=pe[5],Dn=pe[6],Wn=pe[7],Yn=pe[8],fn=pe[9],vt=pe[10],Pt=pe[11];return pe!==U&&(U[0]=pe[0],U[1]=pe[1],U[2]=pe[2],U[3]=pe[3],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[4]=sn*$t+Yn*he,U[5]=pn*$t+fn*he,U[6]=Dn*$t+vt*he,U[7]=Wn*$t+Pt*he,U[8]=Yn*$t-sn*he,U[9]=fn*$t-pn*he,U[10]=vt*$t-Dn*he,U[11]=Pt*$t-Wn*he,U}function we(U,pe,ct){var he=Math.sin(ct),$t=Math.cos(ct),sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Yn=pe[8],fn=pe[9],vt=pe[10],Pt=pe[11];return pe!==U&&(U[4]=pe[4],U[5]=pe[5],U[6]=pe[6],U[7]=pe[7],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[0]=sn*$t-Yn*he,U[1]=pn*$t-fn*he,U[2]=Dn*$t-vt*he,U[3]=Wn*$t-Pt*he,U[8]=sn*he+Yn*$t,U[9]=pn*he+fn*$t,U[10]=Dn*he+vt*$t,U[11]=Wn*he+Pt*$t,U}function et(U,pe,ct){var he=Math.sin(ct),$t=Math.cos(ct),sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Yn=pe[4],fn=pe[5],vt=pe[6],Pt=pe[7];return pe!==U&&(U[8]=pe[8],U[9]=pe[9],U[10]=pe[10],U[11]=pe[11],U[12]=pe[12],U[13]=pe[13],U[14]=pe[14],U[15]=pe[15]),U[0]=sn*$t+Yn*he,U[1]=pn*$t+fn*he,U[2]=Dn*$t+vt*he,U[3]=Wn*$t+Pt*he,U[4]=Yn*$t-sn*he,U[5]=fn*$t-pn*he,U[6]=vt*$t-Dn*he,U[7]=Pt*$t-Wn*he,U}function Je(U,pe){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=pe[0],U[13]=pe[1],U[14]=pe[2],U[15]=1,U}function wt(U,pe){return U[0]=pe[0],U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=pe[1],U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=pe[2],U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function pt(U,pe,ct){var he=ct[0],$t=ct[1],sn=ct[2],pn=Math.hypot(he,$t,sn),Dn,Wn,Yn;return pn<q.Ib?null:(pn=1/pn,he*=pn,$t*=pn,sn*=pn,Dn=Math.sin(pe),Wn=Math.cos(pe),Yn=1-Wn,U[0]=he*he*Yn+Wn,U[1]=$t*he*Yn+sn*Dn,U[2]=sn*he*Yn-$t*Dn,U[3]=0,U[4]=he*$t*Yn-sn*Dn,U[5]=$t*$t*Yn+Wn,U[6]=sn*$t*Yn+he*Dn,U[7]=0,U[8]=he*sn*Yn+$t*Dn,U[9]=$t*sn*Yn-he*Dn,U[10]=sn*sn*Yn+Wn,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U)}function _t(U,pe){var ct=Math.sin(pe),he=Math.cos(pe);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=he,U[6]=ct,U[7]=0,U[8]=0,U[9]=-ct,U[10]=he,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Me(U,pe){var ct=Math.sin(pe),he=Math.cos(pe);return U[0]=he,U[1]=0,U[2]=-ct,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=ct,U[9]=0,U[10]=he,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ae(U,pe){var ct=Math.sin(pe),he=Math.cos(pe);return U[0]=he,U[1]=ct,U[2]=0,U[3]=0,U[4]=-ct,U[5]=he,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function je(U,pe,ct){var he=pe[0],$t=pe[1],sn=pe[2],pn=pe[3],Dn=he+he,Wn=$t+$t,Yn=sn+sn,fn=he*Dn,vt=he*Wn,Pt=he*Yn,An=$t*Wn,Pn=$t*Yn,Xn=sn*Yn,dt=pn*Dn,Se=pn*Wn,Be=pn*Yn;return U[0]=1-(An+Xn),U[1]=vt+Be,U[2]=Pt-Se,U[3]=0,U[4]=vt-Be,U[5]=1-(fn+Xn),U[6]=Pn+dt,U[7]=0,U[8]=Pt+Se,U[9]=Pn-dt,U[10]=1-(fn+An),U[11]=0,U[12]=ct[0],U[13]=ct[1],U[14]=ct[2],U[15]=1,U}function Ze(U,pe){var ct=new q.WT(3),he=-pe[0],$t=-pe[1],sn=-pe[2],pn=pe[3],Dn=pe[4],Wn=pe[5],Yn=pe[6],fn=pe[7],vt=he*he+$t*$t+sn*sn+pn*pn;return vt>0?(ct[0]=(Dn*pn+fn*he+Wn*sn-Yn*$t)*2/vt,ct[1]=(Wn*pn+fn*$t+Yn*he-Dn*sn)*2/vt,ct[2]=(Yn*pn+fn*sn+Dn*$t-Wn*he)*2/vt):(ct[0]=(Dn*pn+fn*he+Wn*sn-Yn*$t)*2,ct[1]=(Wn*pn+fn*$t+Yn*he-Dn*sn)*2,ct[2]=(Yn*pn+fn*sn+Dn*$t-Wn*he)*2),je(U,pe,ct),U}function lt(U,pe){return U[0]=pe[12],U[1]=pe[13],U[2]=pe[14],U}function en(U,pe){var ct=pe[0],he=pe[1],$t=pe[2],sn=pe[4],pn=pe[5],Dn=pe[6],Wn=pe[8],Yn=pe[9],fn=pe[10];return U[0]=Math.hypot(ct,he,$t),U[1]=Math.hypot(sn,pn,Dn),U[2]=Math.hypot(Wn,Yn,fn),U}function Le(U,pe){var ct=new q.WT(3);en(ct,pe);var he=1/ct[0],$t=1/ct[1],sn=1/ct[2],pn=pe[0]*he,Dn=pe[1]*$t,Wn=pe[2]*sn,Yn=pe[4]*he,fn=pe[5]*$t,vt=pe[6]*sn,Pt=pe[8]*he,An=pe[9]*$t,Pn=pe[10]*sn,Xn=pn+fn+Pn,dt=0;return Xn>0?(dt=Math.sqrt(Xn+1)*2,U[3]=.25*dt,U[0]=(vt-An)/dt,U[1]=(Pt-Wn)/dt,U[2]=(Dn-Yn)/dt):pn>fn&&pn>Pn?(dt=Math.sqrt(1+pn-fn-Pn)*2,U[3]=(vt-An)/dt,U[0]=.25*dt,U[1]=(Dn+Yn)/dt,U[2]=(Pt+Wn)/dt):fn>Pn?(dt=Math.sqrt(1+fn-pn-Pn)*2,U[3]=(Pt-Wn)/dt,U[0]=(Dn+Yn)/dt,U[1]=.25*dt,U[2]=(vt+An)/dt):(dt=Math.sqrt(1+Pn-pn-fn)*2,U[3]=(Dn-Yn)/dt,U[0]=(Pt+Wn)/dt,U[1]=(vt+An)/dt,U[2]=.25*dt),U}function St(U,pe,ct,he){var $t=pe[0],sn=pe[1],pn=pe[2],Dn=pe[3],Wn=$t+$t,Yn=sn+sn,fn=pn+pn,vt=$t*Wn,Pt=$t*Yn,An=$t*fn,Pn=sn*Yn,Xn=sn*fn,dt=pn*fn,Se=Dn*Wn,Be=Dn*Yn,st=Dn*fn,Lt=he[0],It=he[1],wn=he[2];return U[0]=(1-(Pn+dt))*Lt,U[1]=(Pt+st)*Lt,U[2]=(An-Be)*Lt,U[3]=0,U[4]=(Pt-st)*It,U[5]=(1-(vt+dt))*It,U[6]=(Xn+Se)*It,U[7]=0,U[8]=(An+Be)*wn,U[9]=(Xn-Se)*wn,U[10]=(1-(vt+Pn))*wn,U[11]=0,U[12]=ct[0],U[13]=ct[1],U[14]=ct[2],U[15]=1,U}function Oe(U,pe,ct,he,$t){var sn=pe[0],pn=pe[1],Dn=pe[2],Wn=pe[3],Yn=sn+sn,fn=pn+pn,vt=Dn+Dn,Pt=sn*Yn,An=sn*fn,Pn=sn*vt,Xn=pn*fn,dt=pn*vt,Se=Dn*vt,Be=Wn*Yn,st=Wn*fn,Lt=Wn*vt,It=he[0],wn=he[1],Kn=he[2],_r=$t[0],Jn=$t[1],Pe=$t[2],Te=(1-(Xn+Se))*It,ke=(An+Lt)*It,it=(Pn-st)*It,At=(An-Lt)*wn,Yt=(1-(Pt+Se))*wn,hn=(dt+Be)*wn,Et=(Pn+st)*Kn,Kt=(dt-Be)*Kn,er=(1-(Pt+Xn))*Kn;return U[0]=Te,U[1]=ke,U[2]=it,U[3]=0,U[4]=At,U[5]=Yt,U[6]=hn,U[7]=0,U[8]=Et,U[9]=Kt,U[10]=er,U[11]=0,U[12]=ct[0]+_r-(Te*_r+At*Jn+Et*Pe),U[13]=ct[1]+Jn-(ke*_r+Yt*Jn+Kt*Pe),U[14]=ct[2]+Pe-(it*_r+hn*Jn+er*Pe),U[15]=1,U}function nt(U,pe){var ct=pe[0],he=pe[1],$t=pe[2],sn=pe[3],pn=ct+ct,Dn=he+he,Wn=$t+$t,Yn=ct*pn,fn=he*pn,vt=he*Dn,Pt=$t*pn,An=$t*Dn,Pn=$t*Wn,Xn=sn*pn,dt=sn*Dn,Se=sn*Wn;return U[0]=1-vt-Pn,U[1]=fn+Se,U[2]=Pt-dt,U[3]=0,U[4]=fn-Se,U[5]=1-Yn-Pn,U[6]=An+Xn,U[7]=0,U[8]=Pt+dt,U[9]=An-Xn,U[10]=1-Yn-vt,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ke(U,pe,ct,he,$t,sn,pn){var Dn=1/(ct-pe),Wn=1/($t-he),Yn=1/(sn-pn);return U[0]=sn*2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn*2*Wn,U[6]=0,U[7]=0,U[8]=(ct+pe)*Dn,U[9]=($t+he)*Wn,U[10]=(pn+sn)*Yn,U[11]=-1,U[12]=0,U[13]=0,U[14]=pn*sn*2*Yn,U[15]=0,U}function Xe(U,pe,ct,he,$t){var sn=1/Math.tan(pe/2),pn;return U[0]=sn/ct,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,$t!=null&&$t!==1/0?(pn=1/(he-$t),U[10]=($t+he)*pn,U[14]=2*$t*he*pn):(U[10]=-1,U[14]=-2*he),U}var Rt=Xe;function bt(U,pe,ct,he,$t){var sn=1/Math.tan(pe/2),pn;return U[0]=sn/ct,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,$t!=null&&$t!==1/0?(pn=1/(he-$t),U[10]=$t*pn,U[14]=$t*he*pn):(U[10]=-1,U[14]=-he),U}function Ie(U,pe,ct,he){var $t=Math.tan(pe.upDegrees*Math.PI/180),sn=Math.tan(pe.downDegrees*Math.PI/180),pn=Math.tan(pe.leftDegrees*Math.PI/180),Dn=Math.tan(pe.rightDegrees*Math.PI/180),Wn=2/(pn+Dn),Yn=2/($t+sn);return U[0]=Wn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=Yn,U[6]=0,U[7]=0,U[8]=-((pn-Dn)*Wn*.5),U[9]=($t-sn)*Yn*.5,U[10]=he/(ct-he),U[11]=-1,U[12]=0,U[13]=0,U[14]=he*ct/(ct-he),U[15]=0,U}function Gt(U,pe,ct,he,$t,sn,pn){var Dn=1/(pe-ct),Wn=1/(he-$t),Yn=1/(sn-pn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=2*Yn,U[11]=0,U[12]=(pe+ct)*Dn,U[13]=($t+he)*Wn,U[14]=(pn+sn)*Yn,U[15]=1,U}var mn=Gt;function Ln(U,pe,ct,he,$t,sn,pn){var Dn=1/(pe-ct),Wn=1/(he-$t),Yn=1/(sn-pn);return U[0]=-2*Dn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=Yn,U[11]=0,U[12]=(pe+ct)*Dn,U[13]=($t+he)*Wn,U[14]=sn*Yn,U[15]=1,U}function qn(U,pe,ct,he){var $t,sn,pn,Dn,Wn,Yn,fn,vt,Pt,An,Pn=pe[0],Xn=pe[1],dt=pe[2],Se=he[0],Be=he[1],st=he[2],Lt=ct[0],It=ct[1],wn=ct[2];return Math.abs(Pn-Lt)<q.Ib&&Math.abs(Xn-It)<q.Ib&&Math.abs(dt-wn)<q.Ib?ce(U):(fn=Pn-Lt,vt=Xn-It,Pt=dt-wn,An=1/Math.hypot(fn,vt,Pt),fn*=An,vt*=An,Pt*=An,$t=Be*Pt-st*vt,sn=st*fn-Se*Pt,pn=Se*vt-Be*fn,An=Math.hypot($t,sn,pn),An?(An=1/An,$t*=An,sn*=An,pn*=An):($t=0,sn=0,pn=0),Dn=vt*pn-Pt*sn,Wn=Pt*$t-fn*pn,Yn=fn*sn-vt*$t,An=Math.hypot(Dn,Wn,Yn),An?(An=1/An,Dn*=An,Wn*=An,Yn*=An):(Dn=0,Wn=0,Yn=0),U[0]=$t,U[1]=Dn,U[2]=fn,U[3]=0,U[4]=sn,U[5]=Wn,U[6]=vt,U[7]=0,U[8]=pn,U[9]=Yn,U[10]=Pt,U[11]=0,U[12]=-($t*Pn+sn*Xn+pn*dt),U[13]=-(Dn*Pn+Wn*Xn+Yn*dt),U[14]=-(fn*Pn+vt*Xn+Pt*dt),U[15]=1,U)}function rr(U,pe,ct,he){var $t=pe[0],sn=pe[1],pn=pe[2],Dn=he[0],Wn=he[1],Yn=he[2],fn=$t-ct[0],vt=sn-ct[1],Pt=pn-ct[2],An=fn*fn+vt*vt+Pt*Pt;An>0&&(An=1/Math.sqrt(An),fn*=An,vt*=An,Pt*=An);var Pn=Wn*Pt-Yn*vt,Xn=Yn*fn-Dn*Pt,dt=Dn*vt-Wn*fn;return An=Pn*Pn+Xn*Xn+dt*dt,An>0&&(An=1/Math.sqrt(An),Pn*=An,Xn*=An,dt*=An),U[0]=Pn,U[1]=Xn,U[2]=dt,U[3]=0,U[4]=vt*dt-Pt*Xn,U[5]=Pt*Pn-fn*dt,U[6]=fn*Xn-vt*Pn,U[7]=0,U[8]=fn,U[9]=vt,U[10]=Pt,U[11]=0,U[12]=$t,U[13]=sn,U[14]=pn,U[15]=1,U}function Ft(U){return"mat4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+", "+U[9]+", "+U[10]+", "+U[11]+", "+U[12]+", "+U[13]+", "+U[14]+", "+U[15]+")"}function Jt(U){return Math.hypot(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function un(U,pe,ct){return U[0]=pe[0]+ct[0],U[1]=pe[1]+ct[1],U[2]=pe[2]+ct[2],U[3]=pe[3]+ct[3],U[4]=pe[4]+ct[4],U[5]=pe[5]+ct[5],U[6]=pe[6]+ct[6],U[7]=pe[7]+ct[7],U[8]=pe[8]+ct[8],U[9]=pe[9]+ct[9],U[10]=pe[10]+ct[10],U[11]=pe[11]+ct[11],U[12]=pe[12]+ct[12],U[13]=pe[13]+ct[13],U[14]=pe[14]+ct[14],U[15]=pe[15]+ct[15],U}function Vn(U,pe,ct){return U[0]=pe[0]-ct[0],U[1]=pe[1]-ct[1],U[2]=pe[2]-ct[2],U[3]=pe[3]-ct[3],U[4]=pe[4]-ct[4],U[5]=pe[5]-ct[5],U[6]=pe[6]-ct[6],U[7]=pe[7]-ct[7],U[8]=pe[8]-ct[8],U[9]=pe[9]-ct[9],U[10]=pe[10]-ct[10],U[11]=pe[11]-ct[11],U[12]=pe[12]-ct[12],U[13]=pe[13]-ct[13],U[14]=pe[14]-ct[14],U[15]=pe[15]-ct[15],U}function on(U,pe,ct){return U[0]=pe[0]*ct,U[1]=pe[1]*ct,U[2]=pe[2]*ct,U[3]=pe[3]*ct,U[4]=pe[4]*ct,U[5]=pe[5]*ct,U[6]=pe[6]*ct,U[7]=pe[7]*ct,U[8]=pe[8]*ct,U[9]=pe[9]*ct,U[10]=pe[10]*ct,U[11]=pe[11]*ct,U[12]=pe[12]*ct,U[13]=pe[13]*ct,U[14]=pe[14]*ct,U[15]=pe[15]*ct,U}function Dt(U,pe,ct,he){return U[0]=pe[0]+ct[0]*he,U[1]=pe[1]+ct[1]*he,U[2]=pe[2]+ct[2]*he,U[3]=pe[3]+ct[3]*he,U[4]=pe[4]+ct[4]*he,U[5]=pe[5]+ct[5]*he,U[6]=pe[6]+ct[6]*he,U[7]=pe[7]+ct[7]*he,U[8]=pe[8]+ct[8]*he,U[9]=pe[9]+ct[9]*he,U[10]=pe[10]+ct[10]*he,U[11]=pe[11]+ct[11]*he,U[12]=pe[12]+ct[12]*he,U[13]=pe[13]+ct[13]*he,U[14]=pe[14]+ct[14]*he,U[15]=pe[15]+ct[15]*he,U}function Vt(U,pe){return U[0]===pe[0]&&U[1]===pe[1]&&U[2]===pe[2]&&U[3]===pe[3]&&U[4]===pe[4]&&U[5]===pe[5]&&U[6]===pe[6]&&U[7]===pe[7]&&U[8]===pe[8]&&U[9]===pe[9]&&U[10]===pe[10]&&U[11]===pe[11]&&U[12]===pe[12]&&U[13]===pe[13]&&U[14]===pe[14]&&U[15]===pe[15]}function ze(U,pe){var ct=U[0],he=U[1],$t=U[2],sn=U[3],pn=U[4],Dn=U[5],Wn=U[6],Yn=U[7],fn=U[8],vt=U[9],Pt=U[10],An=U[11],Pn=U[12],Xn=U[13],dt=U[14],Se=U[15],Be=pe[0],st=pe[1],Lt=pe[2],It=pe[3],wn=pe[4],Kn=pe[5],_r=pe[6],Jn=pe[7],Pe=pe[8],Te=pe[9],ke=pe[10],it=pe[11],At=pe[12],Yt=pe[13],hn=pe[14],Et=pe[15];return Math.abs(ct-Be)<=q.Ib*Math.max(1,Math.abs(ct),Math.abs(Be))&&Math.abs(he-st)<=q.Ib*Math.max(1,Math.abs(he),Math.abs(st))&&Math.abs($t-Lt)<=q.Ib*Math.max(1,Math.abs($t),Math.abs(Lt))&&Math.abs(sn-It)<=q.Ib*Math.max(1,Math.abs(sn),Math.abs(It))&&Math.abs(pn-wn)<=q.Ib*Math.max(1,Math.abs(pn),Math.abs(wn))&&Math.abs(Dn-Kn)<=q.Ib*Math.max(1,Math.abs(Dn),Math.abs(Kn))&&Math.abs(Wn-_r)<=q.Ib*Math.max(1,Math.abs(Wn),Math.abs(_r))&&Math.abs(Yn-Jn)<=q.Ib*Math.max(1,Math.abs(Yn),Math.abs(Jn))&&Math.abs(fn-Pe)<=q.Ib*Math.max(1,Math.abs(fn),Math.abs(Pe))&&Math.abs(vt-Te)<=q.Ib*Math.max(1,Math.abs(vt),Math.abs(Te))&&Math.abs(Pt-ke)<=q.Ib*Math.max(1,Math.abs(Pt),Math.abs(ke))&&Math.abs(An-it)<=q.Ib*Math.max(1,Math.abs(An),Math.abs(it))&&Math.abs(Pn-At)<=q.Ib*Math.max(1,Math.abs(Pn),Math.abs(At))&&Math.abs(Xn-Yt)<=q.Ib*Math.max(1,Math.abs(Xn),Math.abs(Yt))&&Math.abs(dt-hn)<=q.Ib*Math.max(1,Math.abs(dt),Math.abs(hn))&&Math.abs(Se-Et)<=q.Ib*Math.max(1,Math.abs(Se),Math.abs(Et))}var rt=me,jt=Vn},31437:function(gt,G,L){"use strict";L.d(G,{$X:function(){return xe},AK:function(){return je},Fv:function(){return Ae},I6:function(){return Ie},IH:function(){return ce},JG:function(){return ee},Ue:function(){return W},al:function(){return de},lu:function(){return Ln},t7:function(){return lt},t8:function(){return ue},tk:function(){return _t}});var q=L(49685);function W(){var on=new q.WT(2);return q.WT!=Float32Array&&(on[0]=0,on[1]=0),on}function E(on){var Dt=new glMatrix.ARRAY_TYPE(2);return Dt[0]=on[0],Dt[1]=on[1],Dt}function de(on,Dt){var Vt=new q.WT(2);return Vt[0]=on,Vt[1]=Dt,Vt}function ee(on,Dt){return on[0]=Dt[0],on[1]=Dt[1],on}function ue(on,Dt,Vt){return on[0]=Dt,on[1]=Vt,on}function ce(on,Dt,Vt){return on[0]=Dt[0]+Vt[0],on[1]=Dt[1]+Vt[1],on}function xe(on,Dt,Vt){return on[0]=Dt[0]-Vt[0],on[1]=Dt[1]-Vt[1],on}function ae(on,Dt,Vt){return on[0]=Dt[0]*Vt[0],on[1]=Dt[1]*Vt[1],on}function We(on,Dt,Vt){return on[0]=Dt[0]/Vt[0],on[1]=Dt[1]/Vt[1],on}function te(on,Dt){return on[0]=Math.ceil(Dt[0]),on[1]=Math.ceil(Dt[1]),on}function me(on,Dt){return on[0]=Math.floor(Dt[0]),on[1]=Math.floor(Dt[1]),on}function Re(on,Dt,Vt){return on[0]=Math.min(Dt[0],Vt[0]),on[1]=Math.min(Dt[1],Vt[1]),on}function $(on,Dt,Vt){return on[0]=Math.max(Dt[0],Vt[0]),on[1]=Math.max(Dt[1],Vt[1]),on}function le(on,Dt){return on[0]=Math.round(Dt[0]),on[1]=Math.round(Dt[1]),on}function K(on,Dt,Vt){return on[0]=Dt[0]*Vt,on[1]=Dt[1]*Vt,on}function we(on,Dt,Vt,ze){return on[0]=Dt[0]+Vt[0]*ze,on[1]=Dt[1]+Vt[1]*ze,on}function et(on,Dt){var Vt=Dt[0]-on[0],ze=Dt[1]-on[1];return Math.hypot(Vt,ze)}function Je(on,Dt){var Vt=Dt[0]-on[0],ze=Dt[1]-on[1];return Vt*Vt+ze*ze}function wt(on){var Dt=on[0],Vt=on[1];return Math.hypot(Dt,Vt)}function pt(on){var Dt=on[0],Vt=on[1];return Dt*Dt+Vt*Vt}function _t(on,Dt){return on[0]=-Dt[0],on[1]=-Dt[1],on}function Me(on,Dt){return on[0]=1/Dt[0],on[1]=1/Dt[1],on}function Ae(on,Dt){var Vt=Dt[0],ze=Dt[1],rt=Vt*Vt+ze*ze;return rt>0&&(rt=1/Math.sqrt(rt)),on[0]=Dt[0]*rt,on[1]=Dt[1]*rt,on}function je(on,Dt){return on[0]*Dt[0]+on[1]*Dt[1]}function Ze(on,Dt,Vt){var ze=Dt[0]*Vt[1]-Dt[1]*Vt[0];return on[0]=on[1]=0,on[2]=ze,on}function lt(on,Dt,Vt,ze){var rt=Dt[0],jt=Dt[1];return on[0]=rt+ze*(Vt[0]-rt),on[1]=jt+ze*(Vt[1]-jt),on}function en(on,Dt){Dt=Dt||1;var Vt=glMatrix.RANDOM()*2*Math.PI;return on[0]=Math.cos(Vt)*Dt,on[1]=Math.sin(Vt)*Dt,on}function Le(on,Dt,Vt){var ze=Dt[0],rt=Dt[1];return on[0]=Vt[0]*ze+Vt[2]*rt,on[1]=Vt[1]*ze+Vt[3]*rt,on}function St(on,Dt,Vt){var ze=Dt[0],rt=Dt[1];return on[0]=Vt[0]*ze+Vt[2]*rt+Vt[4],on[1]=Vt[1]*ze+Vt[3]*rt+Vt[5],on}function Oe(on,Dt,Vt){var ze=Dt[0],rt=Dt[1];return on[0]=Vt[0]*ze+Vt[3]*rt+Vt[6],on[1]=Vt[1]*ze+Vt[4]*rt+Vt[7],on}function nt(on,Dt,Vt){var ze=Dt[0],rt=Dt[1];return on[0]=Vt[0]*ze+Vt[4]*rt+Vt[12],on[1]=Vt[1]*ze+Vt[5]*rt+Vt[13],on}function Ke(on,Dt,Vt,ze){var rt=Dt[0]-Vt[0],jt=Dt[1]-Vt[1],U=Math.sin(ze),pe=Math.cos(ze);return on[0]=rt*pe-jt*U+Vt[0],on[1]=rt*U+jt*pe+Vt[1],on}function Xe(on,Dt){var Vt=on[0],ze=on[1],rt=Dt[0],jt=Dt[1],U=Math.sqrt(Vt*Vt+ze*ze)*Math.sqrt(rt*rt+jt*jt),pe=U&&(Vt*rt+ze*jt)/U;return Math.acos(Math.min(Math.max(pe,-1),1))}function Rt(on){return on[0]=0,on[1]=0,on}function bt(on){return"vec2("+on[0]+", "+on[1]+")"}function Ie(on,Dt){return on[0]===Dt[0]&&on[1]===Dt[1]}function Gt(on,Dt){var Vt=on[0],ze=on[1],rt=Dt[0],jt=Dt[1];return Math.abs(Vt-rt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(rt))&&Math.abs(ze-jt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ze),Math.abs(jt))}var mn=null,Ln=xe,qn=null,rr=null,Ft=null,Jt=null,un=null,Vn=function(){var on=W();return function(Dt,Vt,ze,rt,jt,U){var pe,ct;for(Vt||(Vt=2),ze||(ze=0),rt?ct=Math.min(rt*Vt+ze,Dt.length):ct=Dt.length,pe=ze;pe<ct;pe+=Vt)on[0]=Dt[pe],on[1]=Dt[pe+1],jt(on,on,U),Dt[pe]=on[0],Dt[pe+1]=on[1];return Dt}}()},77160:function(gt,G,L){"use strict";L.d(G,{$X:function(){return ae},AK:function(){return je},EU:function(){return Ie},Fv:function(){return Ae},IH:function(){return xe},JG:function(){return ue},Jp:function(){return We},TK:function(){return un},Ue:function(){return W},VC:function(){return Ke},Zh:function(){return on},al:function(){return ee},bA:function(){return we},d9:function(){return E},fF:function(){return Oe},fS:function(){return qn},kC:function(){return Ze},kE:function(){return de},kK:function(){return nt},lu:function(){return rr},t7:function(){return lt},t8:function(){return ce},tk:function(){return _t}});var q=L(49685);function W(){var ze=new q.WT(3);return q.WT!=Float32Array&&(ze[0]=0,ze[1]=0,ze[2]=0),ze}function E(ze){var rt=new q.WT(3);return rt[0]=ze[0],rt[1]=ze[1],rt[2]=ze[2],rt}function de(ze){var rt=ze[0],jt=ze[1],U=ze[2];return Math.hypot(rt,jt,U)}function ee(ze,rt,jt){var U=new q.WT(3);return U[0]=ze,U[1]=rt,U[2]=jt,U}function ue(ze,rt){return ze[0]=rt[0],ze[1]=rt[1],ze[2]=rt[2],ze}function ce(ze,rt,jt,U){return ze[0]=rt,ze[1]=jt,ze[2]=U,ze}function xe(ze,rt,jt){return ze[0]=rt[0]+jt[0],ze[1]=rt[1]+jt[1],ze[2]=rt[2]+jt[2],ze}function ae(ze,rt,jt){return ze[0]=rt[0]-jt[0],ze[1]=rt[1]-jt[1],ze[2]=rt[2]-jt[2],ze}function We(ze,rt,jt){return ze[0]=rt[0]*jt[0],ze[1]=rt[1]*jt[1],ze[2]=rt[2]*jt[2],ze}function te(ze,rt,jt){return ze[0]=rt[0]/jt[0],ze[1]=rt[1]/jt[1],ze[2]=rt[2]/jt[2],ze}function me(ze,rt){return ze[0]=Math.ceil(rt[0]),ze[1]=Math.ceil(rt[1]),ze[2]=Math.ceil(rt[2]),ze}function Re(ze,rt){return ze[0]=Math.floor(rt[0]),ze[1]=Math.floor(rt[1]),ze[2]=Math.floor(rt[2]),ze}function $(ze,rt,jt){return ze[0]=Math.min(rt[0],jt[0]),ze[1]=Math.min(rt[1],jt[1]),ze[2]=Math.min(rt[2],jt[2]),ze}function le(ze,rt,jt){return ze[0]=Math.max(rt[0],jt[0]),ze[1]=Math.max(rt[1],jt[1]),ze[2]=Math.max(rt[2],jt[2]),ze}function K(ze,rt){return ze[0]=Math.round(rt[0]),ze[1]=Math.round(rt[1]),ze[2]=Math.round(rt[2]),ze}function we(ze,rt,jt){return ze[0]=rt[0]*jt,ze[1]=rt[1]*jt,ze[2]=rt[2]*jt,ze}function et(ze,rt,jt,U){return ze[0]=rt[0]+jt[0]*U,ze[1]=rt[1]+jt[1]*U,ze[2]=rt[2]+jt[2]*U,ze}function Je(ze,rt){var jt=rt[0]-ze[0],U=rt[1]-ze[1],pe=rt[2]-ze[2];return Math.hypot(jt,U,pe)}function wt(ze,rt){var jt=rt[0]-ze[0],U=rt[1]-ze[1],pe=rt[2]-ze[2];return jt*jt+U*U+pe*pe}function pt(ze){var rt=ze[0],jt=ze[1],U=ze[2];return rt*rt+jt*jt+U*U}function _t(ze,rt){return ze[0]=-rt[0],ze[1]=-rt[1],ze[2]=-rt[2],ze}function Me(ze,rt){return ze[0]=1/rt[0],ze[1]=1/rt[1],ze[2]=1/rt[2],ze}function Ae(ze,rt){var jt=rt[0],U=rt[1],pe=rt[2],ct=jt*jt+U*U+pe*pe;return ct>0&&(ct=1/Math.sqrt(ct)),ze[0]=rt[0]*ct,ze[1]=rt[1]*ct,ze[2]=rt[2]*ct,ze}function je(ze,rt){return ze[0]*rt[0]+ze[1]*rt[1]+ze[2]*rt[2]}function Ze(ze,rt,jt){var U=rt[0],pe=rt[1],ct=rt[2],he=jt[0],$t=jt[1],sn=jt[2];return ze[0]=pe*sn-ct*$t,ze[1]=ct*he-U*sn,ze[2]=U*$t-pe*he,ze}function lt(ze,rt,jt,U){var pe=rt[0],ct=rt[1],he=rt[2];return ze[0]=pe+U*(jt[0]-pe),ze[1]=ct+U*(jt[1]-ct),ze[2]=he+U*(jt[2]-he),ze}function en(ze,rt,jt,U,pe,ct){var he=ct*ct,$t=he*(2*ct-3)+1,sn=he*(ct-2)+ct,pn=he*(ct-1),Dn=he*(3-2*ct);return ze[0]=rt[0]*$t+jt[0]*sn+U[0]*pn+pe[0]*Dn,ze[1]=rt[1]*$t+jt[1]*sn+U[1]*pn+pe[1]*Dn,ze[2]=rt[2]*$t+jt[2]*sn+U[2]*pn+pe[2]*Dn,ze}function Le(ze,rt,jt,U,pe,ct){var he=1-ct,$t=he*he,sn=ct*ct,pn=$t*he,Dn=3*ct*$t,Wn=3*sn*he,Yn=sn*ct;return ze[0]=rt[0]*pn+jt[0]*Dn+U[0]*Wn+pe[0]*Yn,ze[1]=rt[1]*pn+jt[1]*Dn+U[1]*Wn+pe[1]*Yn,ze[2]=rt[2]*pn+jt[2]*Dn+U[2]*Wn+pe[2]*Yn,ze}function St(ze,rt){rt=rt||1;var jt=glMatrix.RANDOM()*2*Math.PI,U=glMatrix.RANDOM()*2-1,pe=Math.sqrt(1-U*U)*rt;return ze[0]=Math.cos(jt)*pe,ze[1]=Math.sin(jt)*pe,ze[2]=U*rt,ze}function Oe(ze,rt,jt){var U=rt[0],pe=rt[1],ct=rt[2],he=jt[3]*U+jt[7]*pe+jt[11]*ct+jt[15];return he=he||1,ze[0]=(jt[0]*U+jt[4]*pe+jt[8]*ct+jt[12])/he,ze[1]=(jt[1]*U+jt[5]*pe+jt[9]*ct+jt[13])/he,ze[2]=(jt[2]*U+jt[6]*pe+jt[10]*ct+jt[14])/he,ze}function nt(ze,rt,jt){var U=rt[0],pe=rt[1],ct=rt[2];return ze[0]=U*jt[0]+pe*jt[3]+ct*jt[6],ze[1]=U*jt[1]+pe*jt[4]+ct*jt[7],ze[2]=U*jt[2]+pe*jt[5]+ct*jt[8],ze}function Ke(ze,rt,jt){var U=jt[0],pe=jt[1],ct=jt[2],he=jt[3],$t=rt[0],sn=rt[1],pn=rt[2],Dn=pe*pn-ct*sn,Wn=ct*$t-U*pn,Yn=U*sn-pe*$t,fn=pe*Yn-ct*Wn,vt=ct*Dn-U*Yn,Pt=U*Wn-pe*Dn,An=he*2;return Dn*=An,Wn*=An,Yn*=An,fn*=2,vt*=2,Pt*=2,ze[0]=$t+Dn+fn,ze[1]=sn+Wn+vt,ze[2]=pn+Yn+Pt,ze}function Xe(ze,rt,jt,U){var pe=[],ct=[];return pe[0]=rt[0]-jt[0],pe[1]=rt[1]-jt[1],pe[2]=rt[2]-jt[2],ct[0]=pe[0],ct[1]=pe[1]*Math.cos(U)-pe[2]*Math.sin(U),ct[2]=pe[1]*Math.sin(U)+pe[2]*Math.cos(U),ze[0]=ct[0]+jt[0],ze[1]=ct[1]+jt[1],ze[2]=ct[2]+jt[2],ze}function Rt(ze,rt,jt,U){var pe=[],ct=[];return pe[0]=rt[0]-jt[0],pe[1]=rt[1]-jt[1],pe[2]=rt[2]-jt[2],ct[0]=pe[2]*Math.sin(U)+pe[0]*Math.cos(U),ct[1]=pe[1],ct[2]=pe[2]*Math.cos(U)-pe[0]*Math.sin(U),ze[0]=ct[0]+jt[0],ze[1]=ct[1]+jt[1],ze[2]=ct[2]+jt[2],ze}function bt(ze,rt,jt,U){var pe=[],ct=[];return pe[0]=rt[0]-jt[0],pe[1]=rt[1]-jt[1],pe[2]=rt[2]-jt[2],ct[0]=pe[0]*Math.cos(U)-pe[1]*Math.sin(U),ct[1]=pe[0]*Math.sin(U)+pe[1]*Math.cos(U),ct[2]=pe[2],ze[0]=ct[0]+jt[0],ze[1]=ct[1]+jt[1],ze[2]=ct[2]+jt[2],ze}function Ie(ze,rt){var jt=ze[0],U=ze[1],pe=ze[2],ct=rt[0],he=rt[1],$t=rt[2],sn=Math.sqrt(jt*jt+U*U+pe*pe),pn=Math.sqrt(ct*ct+he*he+$t*$t),Dn=sn*pn,Wn=Dn&&je(ze,rt)/Dn;return Math.acos(Math.min(Math.max(Wn,-1),1))}function Gt(ze){return ze[0]=0,ze[1]=0,ze[2]=0,ze}function mn(ze){return"vec3("+ze[0]+", "+ze[1]+", "+ze[2]+")"}function Ln(ze,rt){return ze[0]===rt[0]&&ze[1]===rt[1]&&ze[2]===rt[2]}function qn(ze,rt){var jt=ze[0],U=ze[1],pe=ze[2],ct=rt[0],he=rt[1],$t=rt[2];return Math.abs(jt-ct)<=q.Ib*Math.max(1,Math.abs(jt),Math.abs(ct))&&Math.abs(U-he)<=q.Ib*Math.max(1,Math.abs(U),Math.abs(he))&&Math.abs(pe-$t)<=q.Ib*Math.max(1,Math.abs(pe),Math.abs($t))}var rr=ae,Ft=null,Jt=null,un=Je,Vn=null,on=de,Dt=null,Vt=function(){var ze=W();return function(rt,jt,U,pe,ct,he){var $t,sn;for(jt||(jt=3),U||(U=0),pe?sn=Math.min(pe*jt+U,rt.length):sn=rt.length,$t=U;$t<sn;$t+=jt)ze[0]=rt[$t],ze[1]=rt[$t+1],ze[2]=rt[$t+2],ct(ze,ze,he),rt[$t]=ze[0],rt[$t+1]=ze[1],rt[$t+2]=ze[2];return rt}}()},98333:function(gt,G,L){"use strict";L.d(G,{AK:function(){return je},Fv:function(){return Ae},I6:function(){return Ke},IH:function(){return ce},JG:function(){return ee},Ue:function(){return W},al:function(){return de},bA:function(){return K},d9:function(){return E},fF:function(){return Le},fS:function(){return Xe},kE:function(){return wt},t7:function(){return lt},t8:function(){return ue},we:function(){return pt}});var q=L(49685);function W(){var Ft=new q.WT(4);return q.WT!=Float32Array&&(Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0),Ft}function E(Ft){var Jt=new q.WT(4);return Jt[0]=Ft[0],Jt[1]=Ft[1],Jt[2]=Ft[2],Jt[3]=Ft[3],Jt}function de(Ft,Jt,un,Vn){var on=new q.WT(4);return on[0]=Ft,on[1]=Jt,on[2]=un,on[3]=Vn,on}function ee(Ft,Jt){return Ft[0]=Jt[0],Ft[1]=Jt[1],Ft[2]=Jt[2],Ft[3]=Jt[3],Ft}function ue(Ft,Jt,un,Vn,on){return Ft[0]=Jt,Ft[1]=un,Ft[2]=Vn,Ft[3]=on,Ft}function ce(Ft,Jt,un){return Ft[0]=Jt[0]+un[0],Ft[1]=Jt[1]+un[1],Ft[2]=Jt[2]+un[2],Ft[3]=Jt[3]+un[3],Ft}function xe(Ft,Jt,un){return Ft[0]=Jt[0]-un[0],Ft[1]=Jt[1]-un[1],Ft[2]=Jt[2]-un[2],Ft[3]=Jt[3]-un[3],Ft}function ae(Ft,Jt,un){return Ft[0]=Jt[0]*un[0],Ft[1]=Jt[1]*un[1],Ft[2]=Jt[2]*un[2],Ft[3]=Jt[3]*un[3],Ft}function We(Ft,Jt,un){return Ft[0]=Jt[0]/un[0],Ft[1]=Jt[1]/un[1],Ft[2]=Jt[2]/un[2],Ft[3]=Jt[3]/un[3],Ft}function te(Ft,Jt){return Ft[0]=Math.ceil(Jt[0]),Ft[1]=Math.ceil(Jt[1]),Ft[2]=Math.ceil(Jt[2]),Ft[3]=Math.ceil(Jt[3]),Ft}function me(Ft,Jt){return Ft[0]=Math.floor(Jt[0]),Ft[1]=Math.floor(Jt[1]),Ft[2]=Math.floor(Jt[2]),Ft[3]=Math.floor(Jt[3]),Ft}function Re(Ft,Jt,un){return Ft[0]=Math.min(Jt[0],un[0]),Ft[1]=Math.min(Jt[1],un[1]),Ft[2]=Math.min(Jt[2],un[2]),Ft[3]=Math.min(Jt[3],un[3]),Ft}function $(Ft,Jt,un){return Ft[0]=Math.max(Jt[0],un[0]),Ft[1]=Math.max(Jt[1],un[1]),Ft[2]=Math.max(Jt[2],un[2]),Ft[3]=Math.max(Jt[3],un[3]),Ft}function le(Ft,Jt){return Ft[0]=Math.round(Jt[0]),Ft[1]=Math.round(Jt[1]),Ft[2]=Math.round(Jt[2]),Ft[3]=Math.round(Jt[3]),Ft}function K(Ft,Jt,un){return Ft[0]=Jt[0]*un,Ft[1]=Jt[1]*un,Ft[2]=Jt[2]*un,Ft[3]=Jt[3]*un,Ft}function we(Ft,Jt,un,Vn){return Ft[0]=Jt[0]+un[0]*Vn,Ft[1]=Jt[1]+un[1]*Vn,Ft[2]=Jt[2]+un[2]*Vn,Ft[3]=Jt[3]+un[3]*Vn,Ft}function et(Ft,Jt){var un=Jt[0]-Ft[0],Vn=Jt[1]-Ft[1],on=Jt[2]-Ft[2],Dt=Jt[3]-Ft[3];return Math.hypot(un,Vn,on,Dt)}function Je(Ft,Jt){var un=Jt[0]-Ft[0],Vn=Jt[1]-Ft[1],on=Jt[2]-Ft[2],Dt=Jt[3]-Ft[3];return un*un+Vn*Vn+on*on+Dt*Dt}function wt(Ft){var Jt=Ft[0],un=Ft[1],Vn=Ft[2],on=Ft[3];return Math.hypot(Jt,un,Vn,on)}function pt(Ft){var Jt=Ft[0],un=Ft[1],Vn=Ft[2],on=Ft[3];return Jt*Jt+un*un+Vn*Vn+on*on}function _t(Ft,Jt){return Ft[0]=-Jt[0],Ft[1]=-Jt[1],Ft[2]=-Jt[2],Ft[3]=-Jt[3],Ft}function Me(Ft,Jt){return Ft[0]=1/Jt[0],Ft[1]=1/Jt[1],Ft[2]=1/Jt[2],Ft[3]=1/Jt[3],Ft}function Ae(Ft,Jt){var un=Jt[0],Vn=Jt[1],on=Jt[2],Dt=Jt[3],Vt=un*un+Vn*Vn+on*on+Dt*Dt;return Vt>0&&(Vt=1/Math.sqrt(Vt)),Ft[0]=un*Vt,Ft[1]=Vn*Vt,Ft[2]=on*Vt,Ft[3]=Dt*Vt,Ft}function je(Ft,Jt){return Ft[0]*Jt[0]+Ft[1]*Jt[1]+Ft[2]*Jt[2]+Ft[3]*Jt[3]}function Ze(Ft,Jt,un,Vn){var on=un[0]*Vn[1]-un[1]*Vn[0],Dt=un[0]*Vn[2]-un[2]*Vn[0],Vt=un[0]*Vn[3]-un[3]*Vn[0],ze=un[1]*Vn[2]-un[2]*Vn[1],rt=un[1]*Vn[3]-un[3]*Vn[1],jt=un[2]*Vn[3]-un[3]*Vn[2],U=Jt[0],pe=Jt[1],ct=Jt[2],he=Jt[3];return Ft[0]=pe*jt-ct*rt+he*ze,Ft[1]=-(U*jt)+ct*Vt-he*Dt,Ft[2]=U*rt-pe*Vt+he*on,Ft[3]=-(U*ze)+pe*Dt-ct*on,Ft}function lt(Ft,Jt,un,Vn){var on=Jt[0],Dt=Jt[1],Vt=Jt[2],ze=Jt[3];return Ft[0]=on+Vn*(un[0]-on),Ft[1]=Dt+Vn*(un[1]-Dt),Ft[2]=Vt+Vn*(un[2]-Vt),Ft[3]=ze+Vn*(un[3]-ze),Ft}function en(Ft,Jt){Jt=Jt||1;var un,Vn,on,Dt,Vt,ze;do un=glMatrix.RANDOM()*2-1,Vn=glMatrix.RANDOM()*2-1,Vt=un*un+Vn*Vn;while(Vt>=1);do on=glMatrix.RANDOM()*2-1,Dt=glMatrix.RANDOM()*2-1,ze=on*on+Dt*Dt;while(ze>=1);var rt=Math.sqrt((1-Vt)/ze);return Ft[0]=Jt*un,Ft[1]=Jt*Vn,Ft[2]=Jt*on*rt,Ft[3]=Jt*Dt*rt,Ft}function Le(Ft,Jt,un){var Vn=Jt[0],on=Jt[1],Dt=Jt[2],Vt=Jt[3];return Ft[0]=un[0]*Vn+un[4]*on+un[8]*Dt+un[12]*Vt,Ft[1]=un[1]*Vn+un[5]*on+un[9]*Dt+un[13]*Vt,Ft[2]=un[2]*Vn+un[6]*on+un[10]*Dt+un[14]*Vt,Ft[3]=un[3]*Vn+un[7]*on+un[11]*Dt+un[15]*Vt,Ft}function St(Ft,Jt,un){var Vn=Jt[0],on=Jt[1],Dt=Jt[2],Vt=un[0],ze=un[1],rt=un[2],jt=un[3],U=jt*Vn+ze*Dt-rt*on,pe=jt*on+rt*Vn-Vt*Dt,ct=jt*Dt+Vt*on-ze*Vn,he=-Vt*Vn-ze*on-rt*Dt;return Ft[0]=U*jt+he*-Vt+pe*-rt-ct*-ze,Ft[1]=pe*jt+he*-ze+ct*-Vt-U*-rt,Ft[2]=ct*jt+he*-rt+U*-ze-pe*-Vt,Ft[3]=Jt[3],Ft}function Oe(Ft){return Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0,Ft}function nt(Ft){return"vec4("+Ft[0]+", "+Ft[1]+", "+Ft[2]+", "+Ft[3]+")"}function Ke(Ft,Jt){return Ft[0]===Jt[0]&&Ft[1]===Jt[1]&&Ft[2]===Jt[2]&&Ft[3]===Jt[3]}function Xe(Ft,Jt){var un=Ft[0],Vn=Ft[1],on=Ft[2],Dt=Ft[3],Vt=Jt[0],ze=Jt[1],rt=Jt[2],jt=Jt[3];return Math.abs(un-Vt)<=q.Ib*Math.max(1,Math.abs(un),Math.abs(Vt))&&Math.abs(Vn-ze)<=q.Ib*Math.max(1,Math.abs(Vn),Math.abs(ze))&&Math.abs(on-rt)<=q.Ib*Math.max(1,Math.abs(on),Math.abs(rt))&&Math.abs(Dt-jt)<=q.Ib*Math.max(1,Math.abs(Dt),Math.abs(jt))}var Rt=null,bt=null,Ie=null,Gt=null,mn=null,Ln=null,qn=null,rr=function(){var Ft=W();return function(Jt,un,Vn,on,Dt,Vt){var ze,rt;for(un||(un=4),Vn||(Vn=0),on?rt=Math.min(on*un+Vn,Jt.length):rt=Jt.length,ze=Vn;ze<rt;ze+=un)Ft[0]=Jt[ze],Ft[1]=Jt[ze+1],Ft[2]=Jt[ze+2],Ft[3]=Jt[ze+3],Dt(Ft,Ft,Vt),Jt[ze]=Ft[0],Jt[ze+1]=Ft[1],Jt[ze+2]=Ft[2],Jt[ze+3]=Ft[3];return Jt}}()},50840:function(gt,G,L){var q;(function(W,E,de,ee){"use strict";var ue=["","webkit","Moz","MS","ms","o"],ce=E.createElement("div"),xe="function",ae=Math.round,We=Math.abs,te=Date.now;function me(Ct,Wt,jn){return setTimeout(wt(Ct,jn),Wt)}function Re(Ct,Wt,jn){return Array.isArray(Ct)?($(Ct,jn[Wt],jn),!0):!1}function $(Ct,Wt,jn){var Lr;if(Ct)if(Ct.forEach)Ct.forEach(Wt,jn);else if(Ct.length!==ee)for(Lr=0;Lr<Ct.length;)Wt.call(jn,Ct[Lr],Lr,Ct),Lr++;else for(Lr in Ct)Ct.hasOwnProperty(Lr)&&Wt.call(jn,Ct[Lr],Lr,Ct)}function le(Ct,Wt,jn){var Lr="DEPRECATED METHOD: "+Wt+`
`+jn+` AT 
`;return function(){var Si=new Error("get-stack-trace"),Zi=Si&&Si.stack?Si.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Jo=W.console&&(W.console.warn||W.console.log);return Jo&&Jo.call(W.console,Lr,Zi),Ct.apply(this,arguments)}}var K;typeof Object.assign!="function"?K=function(Wt){if(Wt===ee||Wt===null)throw new TypeError("Cannot convert undefined or null to object");for(var jn=Object(Wt),Lr=1;Lr<arguments.length;Lr++){var Si=arguments[Lr];if(Si!==ee&&Si!==null)for(var Zi in Si)Si.hasOwnProperty(Zi)&&(jn[Zi]=Si[Zi])}return jn}:K=Object.assign;var we=le(function(Wt,jn,Lr){for(var Si=Object.keys(jn),Zi=0;Zi<Si.length;)(!Lr||Lr&&Wt[Si[Zi]]===ee)&&(Wt[Si[Zi]]=jn[Si[Zi]]),Zi++;return Wt},"extend","Use `assign`."),et=le(function(Wt,jn){return we(Wt,jn,!0)},"merge","Use `assign`.");function Je(Ct,Wt,jn){var Lr=Wt.prototype,Si;Si=Ct.prototype=Object.create(Lr),Si.constructor=Ct,Si._super=Lr,jn&&K(Si,jn)}function wt(Ct,Wt){return function(){return Ct.apply(Wt,arguments)}}function pt(Ct,Wt){return typeof Ct==xe?Ct.apply(Wt&&Wt[0]||ee,Wt):Ct}function _t(Ct,Wt){return Ct===ee?Wt:Ct}function Me(Ct,Wt,jn){$(lt(Wt),function(Lr){Ct.addEventListener(Lr,jn,!1)})}function Ae(Ct,Wt,jn){$(lt(Wt),function(Lr){Ct.removeEventListener(Lr,jn,!1)})}function je(Ct,Wt){for(;Ct;){if(Ct==Wt)return!0;Ct=Ct.parentNode}return!1}function Ze(Ct,Wt){return Ct.indexOf(Wt)>-1}function lt(Ct){return Ct.trim().split(/\s+/g)}function en(Ct,Wt,jn){if(Ct.indexOf&&!jn)return Ct.indexOf(Wt);for(var Lr=0;Lr<Ct.length;){if(jn&&Ct[Lr][jn]==Wt||!jn&&Ct[Lr]===Wt)return Lr;Lr++}return-1}function Le(Ct){return Array.prototype.slice.call(Ct,0)}function St(Ct,Wt,jn){for(var Lr=[],Si=[],Zi=0;Zi<Ct.length;){var Jo=Wt?Ct[Zi][Wt]:Ct[Zi];en(Si,Jo)<0&&Lr.push(Ct[Zi]),Si[Zi]=Jo,Zi++}return jn&&(Wt?Lr=Lr.sort(function(Is,Us){return Is[Wt]>Us[Wt]}):Lr=Lr.sort()),Lr}function Oe(Ct,Wt){for(var jn,Lr,Si=Wt[0].toUpperCase()+Wt.slice(1),Zi=0;Zi<ue.length;){if(jn=ue[Zi],Lr=jn?jn+Si:Wt,Lr in Ct)return Lr;Zi++}return ee}var nt=1;function Ke(){return nt++}function Xe(Ct){var Wt=Ct.ownerDocument||Ct;return Wt.defaultView||Wt.parentWindow||W}var Rt=/mobile|tablet|ip(ad|hone|od)|android/i,bt="ontouchstart"in W,Ie=Oe(W,"PointerEvent")!==ee,Gt=bt&&Rt.test(navigator.userAgent),mn="touch",Ln="pen",qn="mouse",rr="kinect",Ft=25,Jt=1,un=2,Vn=4,on=8,Dt=1,Vt=2,ze=4,rt=8,jt=16,U=Vt|ze,pe=rt|jt,ct=U|pe,he=["x","y"],$t=["clientX","clientY"];function sn(Ct,Wt){var jn=this;this.manager=Ct,this.callback=Wt,this.element=Ct.element,this.target=Ct.options.inputTarget,this.domHandler=function(Lr){pt(Ct.options.enable,[Ct])&&jn.handler(Lr)},this.init()}sn.prototype={handler:function(){},init:function(){this.evEl&&Me(this.element,this.evEl,this.domHandler),this.evTarget&&Me(this.target,this.evTarget,this.domHandler),this.evWin&&Me(Xe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ae(this.element,this.evEl,this.domHandler),this.evTarget&&Ae(this.target,this.evTarget,this.domHandler),this.evWin&&Ae(Xe(this.element),this.evWin,this.domHandler)}};function pn(Ct){var Wt,jn=Ct.options.inputClass;return jn?Wt=jn:Ie?Wt=Te:Gt?Wt=er:bt?Wt=Ur:Wt=wn,new Wt(Ct,Dn)}function Dn(Ct,Wt,jn){var Lr=jn.pointers.length,Si=jn.changedPointers.length,Zi=Wt&Jt&&Lr-Si===0,Jo=Wt&(Vn|on)&&Lr-Si===0;jn.isFirst=!!Zi,jn.isFinal=!!Jo,Zi&&(Ct.session={}),jn.eventType=Wt,Wn(Ct,jn),Ct.emit("hammer.input",jn),Ct.recognize(jn),Ct.session.prevInput=jn}function Wn(Ct,Wt){var jn=Ct.session,Lr=Wt.pointers,Si=Lr.length;jn.firstInput||(jn.firstInput=vt(Wt)),Si>1&&!jn.firstMultiple?jn.firstMultiple=vt(Wt):Si===1&&(jn.firstMultiple=!1);var Zi=jn.firstInput,Jo=jn.firstMultiple,Hs=Jo?Jo.center:Zi.center,Is=Wt.center=Pt(Lr);Wt.timeStamp=te(),Wt.deltaTime=Wt.timeStamp-Zi.timeStamp,Wt.angle=dt(Hs,Is),Wt.distance=Xn(Hs,Is),Yn(jn,Wt),Wt.offsetDirection=Pn(Wt.deltaX,Wt.deltaY);var Us=An(Wt.deltaTime,Wt.deltaX,Wt.deltaY);Wt.overallVelocityX=Us.x,Wt.overallVelocityY=Us.y,Wt.overallVelocity=We(Us.x)>We(Us.y)?Us.x:Us.y,Wt.scale=Jo?Be(Jo.pointers,Lr):1,Wt.rotation=Jo?Se(Jo.pointers,Lr):0,Wt.maxPointers=jn.prevInput?Wt.pointers.length>jn.prevInput.maxPointers?Wt.pointers.length:jn.prevInput.maxPointers:Wt.pointers.length,fn(jn,Wt);var dl=Ct.element;je(Wt.srcEvent.target,dl)&&(dl=Wt.srcEvent.target),Wt.target=dl}function Yn(Ct,Wt){var jn=Wt.center,Lr=Ct.offsetDelta||{},Si=Ct.prevDelta||{},Zi=Ct.prevInput||{};(Wt.eventType===Jt||Zi.eventType===Vn)&&(Si=Ct.prevDelta={x:Zi.deltaX||0,y:Zi.deltaY||0},Lr=Ct.offsetDelta={x:jn.x,y:jn.y}),Wt.deltaX=Si.x+(jn.x-Lr.x),Wt.deltaY=Si.y+(jn.y-Lr.y)}function fn(Ct,Wt){var jn=Ct.lastInterval||Wt,Lr=Wt.timeStamp-jn.timeStamp,Si,Zi,Jo,Hs;if(Wt.eventType!=on&&(Lr>Ft||jn.velocity===ee)){var Is=Wt.deltaX-jn.deltaX,Us=Wt.deltaY-jn.deltaY,dl=An(Lr,Is,Us);Zi=dl.x,Jo=dl.y,Si=We(dl.x)>We(dl.y)?dl.x:dl.y,Hs=Pn(Is,Us),Ct.lastInterval=Wt}else Si=jn.velocity,Zi=jn.velocityX,Jo=jn.velocityY,Hs=jn.direction;Wt.velocity=Si,Wt.velocityX=Zi,Wt.velocityY=Jo,Wt.direction=Hs}function vt(Ct){for(var Wt=[],jn=0;jn<Ct.pointers.length;)Wt[jn]={clientX:ae(Ct.pointers[jn].clientX),clientY:ae(Ct.pointers[jn].clientY)},jn++;return{timeStamp:te(),pointers:Wt,center:Pt(Wt),deltaX:Ct.deltaX,deltaY:Ct.deltaY}}function Pt(Ct){var Wt=Ct.length;if(Wt===1)return{x:ae(Ct[0].clientX),y:ae(Ct[0].clientY)};for(var jn=0,Lr=0,Si=0;Si<Wt;)jn+=Ct[Si].clientX,Lr+=Ct[Si].clientY,Si++;return{x:ae(jn/Wt),y:ae(Lr/Wt)}}function An(Ct,Wt,jn){return{x:Wt/Ct||0,y:jn/Ct||0}}function Pn(Ct,Wt){return Ct===Wt?Dt:We(Ct)>=We(Wt)?Ct<0?Vt:ze:Wt<0?rt:jt}function Xn(Ct,Wt,jn){jn||(jn=he);var Lr=Wt[jn[0]]-Ct[jn[0]],Si=Wt[jn[1]]-Ct[jn[1]];return Math.sqrt(Lr*Lr+Si*Si)}function dt(Ct,Wt,jn){jn||(jn=he);var Lr=Wt[jn[0]]-Ct[jn[0]],Si=Wt[jn[1]]-Ct[jn[1]];return Math.atan2(Si,Lr)*180/Math.PI}function Se(Ct,Wt){return dt(Wt[1],Wt[0],$t)+dt(Ct[1],Ct[0],$t)}function Be(Ct,Wt){return Xn(Wt[0],Wt[1],$t)/Xn(Ct[0],Ct[1],$t)}var st={mousedown:Jt,mousemove:un,mouseup:Vn},Lt="mousedown",It="mousemove mouseup";function wn(){this.evEl=Lt,this.evWin=It,this.pressed=!1,sn.apply(this,arguments)}Je(wn,sn,{handler:function(Wt){var jn=st[Wt.type];jn&Jt&&Wt.button===0&&(this.pressed=!0),jn&un&&Wt.which!==1&&(jn=Vn),this.pressed&&(jn&Vn&&(this.pressed=!1),this.callback(this.manager,jn,{pointers:[Wt],changedPointers:[Wt],pointerType:qn,srcEvent:Wt}))}});var Kn={pointerdown:Jt,pointermove:un,pointerup:Vn,pointercancel:on,pointerout:on},_r={2:mn,3:Ln,4:qn,5:rr},Jn="pointerdown",Pe="pointermove pointerup pointercancel";W.MSPointerEvent&&!W.PointerEvent&&(Jn="MSPointerDown",Pe="MSPointerMove MSPointerUp MSPointerCancel");function Te(){this.evEl=Jn,this.evWin=Pe,sn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Je(Te,sn,{handler:function(Wt){var jn=this.store,Lr=!1,Si=Wt.type.toLowerCase().replace("ms",""),Zi=Kn[Si],Jo=_r[Wt.pointerType]||Wt.pointerType,Hs=Jo==mn,Is=en(jn,Wt.pointerId,"pointerId");Zi&Jt&&(Wt.button===0||Hs)?Is<0&&(jn.push(Wt),Is=jn.length-1):Zi&(Vn|on)&&(Lr=!0),!(Is<0)&&(jn[Is]=Wt,this.callback(this.manager,Zi,{pointers:jn,changedPointers:[Wt],pointerType:Jo,srcEvent:Wt}),Lr&&jn.splice(Is,1))}});var ke={touchstart:Jt,touchmove:un,touchend:Vn,touchcancel:on},it="touchstart",At="touchstart touchmove touchend touchcancel";function Yt(){this.evTarget=it,this.evWin=At,this.started=!1,sn.apply(this,arguments)}Je(Yt,sn,{handler:function(Wt){var jn=ke[Wt.type];if(jn===Jt&&(this.started=!0),!!this.started){var Lr=hn.call(this,Wt,jn);jn&(Vn|on)&&Lr[0].length-Lr[1].length===0&&(this.started=!1),this.callback(this.manager,jn,{pointers:Lr[0],changedPointers:Lr[1],pointerType:mn,srcEvent:Wt})}}});function hn(Ct,Wt){var jn=Le(Ct.touches),Lr=Le(Ct.changedTouches);return Wt&(Vn|on)&&(jn=St(jn.concat(Lr),"identifier",!0)),[jn,Lr]}var Et={touchstart:Jt,touchmove:un,touchend:Vn,touchcancel:on},Kt="touchstart touchmove touchend touchcancel";function er(){this.evTarget=Kt,this.targetIds={},sn.apply(this,arguments)}Je(er,sn,{handler:function(Wt){var jn=Et[Wt.type],Lr=br.call(this,Wt,jn);Lr&&this.callback(this.manager,jn,{pointers:Lr[0],changedPointers:Lr[1],pointerType:mn,srcEvent:Wt})}});function br(Ct,Wt){var jn=Le(Ct.touches),Lr=this.targetIds;if(Wt&(Jt|un)&&jn.length===1)return Lr[jn[0].identifier]=!0,[jn,jn];var Si,Zi,Jo=Le(Ct.changedTouches),Hs=[],Is=this.target;if(Zi=jn.filter(function(Us){return je(Us.target,Is)}),Wt===Jt)for(Si=0;Si<Zi.length;)Lr[Zi[Si].identifier]=!0,Si++;for(Si=0;Si<Jo.length;)Lr[Jo[Si].identifier]&&Hs.push(Jo[Si]),Wt&(Vn|on)&&delete Lr[Jo[Si].identifier],Si++;if(Hs.length)return[St(Zi.concat(Hs),"identifier",!0),Hs]}var Vr=2500,vr=25;function Ur(){sn.apply(this,arguments);var Ct=wt(this.handler,this);this.touch=new er(this.manager,Ct),this.mouse=new wn(this.manager,Ct),this.primaryTouch=null,this.lastTouches=[]}Je(Ur,sn,{handler:function(Wt,jn,Lr){var Si=Lr.pointerType==mn,Zi=Lr.pointerType==qn;if(!(Zi&&Lr.sourceCapabilities&&Lr.sourceCapabilities.firesTouchEvents)){if(Si)_i.call(this,jn,Lr);else if(Zi&&wr.call(this,Lr))return;this.callback(Wt,jn,Lr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _i(Ct,Wt){Ct&Jt?(this.primaryTouch=Wt.changedPointers[0].identifier,Ai.call(this,Wt)):Ct&(Vn|on)&&Ai.call(this,Wt)}function Ai(Ct){var Wt=Ct.changedPointers[0];if(Wt.identifier===this.primaryTouch){var jn={x:Wt.clientX,y:Wt.clientY};this.lastTouches.push(jn);var Lr=this.lastTouches,Si=function(){var Zi=Lr.indexOf(jn);Zi>-1&&Lr.splice(Zi,1)};setTimeout(Si,Vr)}}function wr(Ct){for(var Wt=Ct.srcEvent.clientX,jn=Ct.srcEvent.clientY,Lr=0;Lr<this.lastTouches.length;Lr++){var Si=this.lastTouches[Lr],Zi=Math.abs(Wt-Si.x),Jo=Math.abs(jn-Si.y);if(Zi<=vr&&Jo<=vr)return!0}return!1}var Ei=Oe(ce.style,"touchAction"),hi=Ei!==ee,ai="compute",Io="auto",xi="manipulation",Qo="none",ga="pan-x",Po="pan-y",$o=Ut();function Fe(Ct,Wt){this.manager=Ct,this.set(Wt)}Fe.prototype={set:function(Ct){Ct==ai&&(Ct=this.compute()),hi&&this.manager.element.style&&$o[Ct]&&(this.manager.element.style[Ei]=Ct),this.actions=Ct.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ct=[];return $(this.manager.recognizers,function(Wt){pt(Wt.options.enable,[Wt])&&(Ct=Ct.concat(Wt.getTouchAction()))}),ot(Ct.join(" "))},preventDefaults:function(Ct){var Wt=Ct.srcEvent,jn=Ct.offsetDirection;if(this.manager.session.prevented){Wt.preventDefault();return}var Lr=this.actions,Si=Ze(Lr,Qo)&&!$o[Qo],Zi=Ze(Lr,Po)&&!$o[Po],Jo=Ze(Lr,ga)&&!$o[ga];if(Si){var Hs=Ct.pointers.length===1,Is=Ct.distance<2,Us=Ct.deltaTime<250;if(Hs&&Is&&Us)return}if(!(Jo&&Zi)&&(Si||Zi&&jn&U||Jo&&jn&pe))return this.preventSrc(Wt)},preventSrc:function(Ct){this.manager.session.prevented=!0,Ct.preventDefault()}};function ot(Ct){if(Ze(Ct,Qo))return Qo;var Wt=Ze(Ct,ga),jn=Ze(Ct,Po);return Wt&&jn?Qo:Wt||jn?Wt?ga:Po:Ze(Ct,xi)?xi:Io}function Ut(){if(!hi)return!1;var Ct={},Wt=W.CSS&&W.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(jn){Ct[jn]=Wt?W.CSS.supports("touch-action",jn):!0}),Ct}var ln=1,Nn=2,Fn=4,gn=8,Cn=gn,pr=16,hr=32;function ei(Ct){this.options=K({},this.defaults,Ct||{}),this.id=Ke(),this.manager=null,this.options.enable=_t(this.options.enable,!0),this.state=ln,this.simultaneous={},this.requireFail=[]}ei.prototype={defaults:{},set:function(Ct){return K(this.options,Ct),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ct){if(Re(Ct,"recognizeWith",this))return this;var Wt=this.simultaneous;return Ct=ti(Ct,this),Wt[Ct.id]||(Wt[Ct.id]=Ct,Ct.recognizeWith(this)),this},dropRecognizeWith:function(Ct){return Re(Ct,"dropRecognizeWith",this)?this:(Ct=ti(Ct,this),delete this.simultaneous[Ct.id],this)},requireFailure:function(Ct){if(Re(Ct,"requireFailure",this))return this;var Wt=this.requireFail;return Ct=ti(Ct,this),en(Wt,Ct)===-1&&(Wt.push(Ct),Ct.requireFailure(this)),this},dropRequireFailure:function(Ct){if(Re(Ct,"dropRequireFailure",this))return this;Ct=ti(Ct,this);var Wt=en(this.requireFail,Ct);return Wt>-1&&this.requireFail.splice(Wt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ct){return!!this.simultaneous[Ct.id]},emit:function(Ct){var Wt=this,jn=this.state;function Lr(Si){Wt.manager.emit(Si,Ct)}jn<gn&&Lr(Wt.options.event+ji(jn)),Lr(Wt.options.event),Ct.additionalEvent&&Lr(Ct.additionalEvent),jn>=gn&&Lr(Wt.options.event+ji(jn))},tryEmit:function(Ct){if(this.canEmit())return this.emit(Ct);this.state=hr},canEmit:function(){for(var Ct=0;Ct<this.requireFail.length;){if(!(this.requireFail[Ct].state&(hr|ln)))return!1;Ct++}return!0},recognize:function(Ct){var Wt=K({},Ct);if(!pt(this.options.enable,[this,Wt])){this.reset(),this.state=hr;return}this.state&(Cn|pr|hr)&&(this.state=ln),this.state=this.process(Wt),this.state&(Nn|Fn|gn|pr)&&this.tryEmit(Wt)},process:function(Ct){},getTouchAction:function(){},reset:function(){}};function ji(Ct){return Ct&pr?"cancel":Ct&gn?"end":Ct&Fn?"move":Ct&Nn?"start":""}function Ji(Ct){return Ct==jt?"down":Ct==rt?"up":Ct==Vt?"left":Ct==ze?"right":""}function ti(Ct,Wt){var jn=Wt.manager;return jn?jn.get(Ct):Ct}function Gi(){ei.apply(this,arguments)}Je(Gi,ei,{defaults:{pointers:1},attrTest:function(Ct){var Wt=this.options.pointers;return Wt===0||Ct.pointers.length===Wt},process:function(Ct){var Wt=this.state,jn=Ct.eventType,Lr=Wt&(Nn|Fn),Si=this.attrTest(Ct);return Lr&&(jn&on||!Si)?Wt|pr:Lr||Si?jn&Vn?Wt|gn:Wt&Nn?Wt|Fn:Nn:hr}});function Ni(){Gi.apply(this,arguments),this.pX=null,this.pY=null}Je(Ni,Gi,{defaults:{event:"pan",threshold:10,pointers:1,direction:ct},getTouchAction:function(){var Ct=this.options.direction,Wt=[];return Ct&U&&Wt.push(Po),Ct&pe&&Wt.push(ga),Wt},directionTest:function(Ct){var Wt=this.options,jn=!0,Lr=Ct.distance,Si=Ct.direction,Zi=Ct.deltaX,Jo=Ct.deltaY;return Si&Wt.direction||(Wt.direction&U?(Si=Zi===0?Dt:Zi<0?Vt:ze,jn=Zi!=this.pX,Lr=Math.abs(Ct.deltaX)):(Si=Jo===0?Dt:Jo<0?rt:jt,jn=Jo!=this.pY,Lr=Math.abs(Ct.deltaY))),Ct.direction=Si,jn&&Lr>Wt.threshold&&Si&Wt.direction},attrTest:function(Ct){return Gi.prototype.attrTest.call(this,Ct)&&(this.state&Nn||!(this.state&Nn)&&this.directionTest(Ct))},emit:function(Ct){this.pX=Ct.deltaX,this.pY=Ct.deltaY;var Wt=Ji(Ct.direction);Wt&&(Ct.additionalEvent=this.options.event+Wt),this._super.emit.call(this,Ct)}});function Gr(){Gi.apply(this,arguments)}Je(Gr,Gi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Qo]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.scale-1)>this.options.threshold||this.state&Nn)},emit:function(Ct){if(Ct.scale!==1){var Wt=Ct.scale<1?"in":"out";Ct.additionalEvent=this.options.event+Wt}this._super.emit.call(this,Ct)}});function So(){ei.apply(this,arguments),this._timer=null,this._input=null}Je(So,ei,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Io]},process:function(Ct){var Wt=this.options,jn=Ct.pointers.length===Wt.pointers,Lr=Ct.distance<Wt.threshold,Si=Ct.deltaTime>Wt.time;if(this._input=Ct,!Lr||!jn||Ct.eventType&(Vn|on)&&!Si)this.reset();else if(Ct.eventType&Jt)this.reset(),this._timer=me(function(){this.state=Cn,this.tryEmit()},Wt.time,this);else if(Ct.eventType&Vn)return Cn;return hr},reset:function(){clearTimeout(this._timer)},emit:function(Ct){this.state===Cn&&(Ct&&Ct.eventType&Vn?this.manager.emit(this.options.event+"up",Ct):(this._input.timeStamp=te(),this.manager.emit(this.options.event,this._input)))}});function fi(){Gi.apply(this,arguments)}Je(fi,Gi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Qo]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.rotation)>this.options.threshold||this.state&Nn)}});function Eo(){Gi.apply(this,arguments)}Je(Eo,Gi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|pe,pointers:1},getTouchAction:function(){return Ni.prototype.getTouchAction.call(this)},attrTest:function(Ct){var Wt=this.options.direction,jn;return Wt&(U|pe)?jn=Ct.overallVelocity:Wt&U?jn=Ct.overallVelocityX:Wt&pe&&(jn=Ct.overallVelocityY),this._super.attrTest.call(this,Ct)&&Wt&Ct.offsetDirection&&Ct.distance>this.options.threshold&&Ct.maxPointers==this.options.pointers&&We(jn)>this.options.velocity&&Ct.eventType&Vn},emit:function(Ct){var Wt=Ji(Ct.offsetDirection);Wt&&this.manager.emit(this.options.event+Wt,Ct),this.manager.emit(this.options.event,Ct)}});function Wi(){ei.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Je(Wi,ei,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xi]},process:function(Ct){var Wt=this.options,jn=Ct.pointers.length===Wt.pointers,Lr=Ct.distance<Wt.threshold,Si=Ct.deltaTime<Wt.time;if(this.reset(),Ct.eventType&Jt&&this.count===0)return this.failTimeout();if(Lr&&Si&&jn){if(Ct.eventType!=Vn)return this.failTimeout();var Zi=this.pTime?Ct.timeStamp-this.pTime<Wt.interval:!0,Jo=!this.pCenter||Xn(this.pCenter,Ct.center)<Wt.posThreshold;this.pTime=Ct.timeStamp,this.pCenter=Ct.center,!Jo||!Zi?this.count=1:this.count+=1,this._input=Ct;var Hs=this.count%Wt.taps;if(Hs===0)return this.hasRequireFailures()?(this._timer=me(function(){this.state=Cn,this.tryEmit()},Wt.interval,this),Nn):Cn}return hr},failTimeout:function(){return this._timer=me(function(){this.state=hr},this.options.interval,this),hr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function io(Ct,Wt){return Wt=Wt||{},Wt.recognizers=_t(Wt.recognizers,io.defaults.preset),new ya(Ct,Wt)}io.VERSION="2.0.7",io.defaults={domEvents:!1,touchAction:ai,enable:!0,inputTarget:null,inputClass:null,preset:[[fi,{enable:!1}],[Gr,{enable:!1},["rotate"]],[Eo,{direction:U}],[Ni,{direction:U},["swipe"]],[Wi],[Wi,{event:"doubletap",taps:2},["tap"]],[So]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ao=1,xs=2;function ya(Ct,Wt){this.options=K({},io.defaults,Wt||{}),this.options.inputTarget=this.options.inputTarget||Ct,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ct,this.input=pn(this),this.touchAction=new Fe(this,this.options.touchAction),ra(this,!0),$(this.options.recognizers,function(jn){var Lr=this.add(new jn[0](jn[1]));jn[2]&&Lr.recognizeWith(jn[2]),jn[3]&&Lr.requireFailure(jn[3])},this)}ya.prototype={set:function(Ct){return K(this.options,Ct),Ct.touchAction&&this.touchAction.update(),Ct.inputTarget&&(this.input.destroy(),this.input.target=Ct.inputTarget,this.input.init()),this},stop:function(Ct){this.session.stopped=Ct?xs:Ao},recognize:function(Ct){var Wt=this.session;if(!Wt.stopped){this.touchAction.preventDefaults(Ct);var jn,Lr=this.recognizers,Si=Wt.curRecognizer;(!Si||Si&&Si.state&Cn)&&(Si=Wt.curRecognizer=null);for(var Zi=0;Zi<Lr.length;)jn=Lr[Zi],Wt.stopped!==xs&&(!Si||jn==Si||jn.canRecognizeWith(Si))?jn.recognize(Ct):jn.reset(),!Si&&jn.state&(Nn|Fn|gn)&&(Si=Wt.curRecognizer=jn),Zi++}},get:function(Ct){if(Ct instanceof ei)return Ct;for(var Wt=this.recognizers,jn=0;jn<Wt.length;jn++)if(Wt[jn].options.event==Ct)return Wt[jn];return null},add:function(Ct){if(Re(Ct,"add",this))return this;var Wt=this.get(Ct.options.event);return Wt&&this.remove(Wt),this.recognizers.push(Ct),Ct.manager=this,this.touchAction.update(),Ct},remove:function(Ct){if(Re(Ct,"remove",this))return this;if(Ct=this.get(Ct),Ct){var Wt=this.recognizers,jn=en(Wt,Ct);jn!==-1&&(Wt.splice(jn,1),this.touchAction.update())}return this},on:function(Ct,Wt){if(Ct!==ee&&Wt!==ee){var jn=this.handlers;return $(lt(Ct),function(Lr){jn[Lr]=jn[Lr]||[],jn[Lr].push(Wt)}),this}},off:function(Ct,Wt){if(Ct!==ee){var jn=this.handlers;return $(lt(Ct),function(Lr){Wt?jn[Lr]&&jn[Lr].splice(en(jn[Lr],Wt),1):delete jn[Lr]}),this}},emit:function(Ct,Wt){this.options.domEvents&&gs(Ct,Wt);var jn=this.handlers[Ct]&&this.handlers[Ct].slice();if(!(!jn||!jn.length)){Wt.type=Ct,Wt.preventDefault=function(){Wt.srcEvent.preventDefault()};for(var Lr=0;Lr<jn.length;)jn[Lr](Wt),Lr++}},destroy:function(){this.element&&ra(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ra(Ct,Wt){var jn=Ct.element;if(jn.style){var Lr;$(Ct.options.cssProps,function(Si,Zi){Lr=Oe(jn.style,Zi),Wt?(Ct.oldCssProps[Lr]=jn.style[Lr],jn.style[Lr]=Si):jn.style[Lr]=Ct.oldCssProps[Lr]||""}),Wt||(Ct.oldCssProps={})}}function gs(Ct,Wt){var jn=E.createEvent("Event");jn.initEvent(Ct,!0,!0),jn.gesture=Wt,Wt.target.dispatchEvent(jn)}K(io,{INPUT_START:Jt,INPUT_MOVE:un,INPUT_END:Vn,INPUT_CANCEL:on,STATE_POSSIBLE:ln,STATE_BEGAN:Nn,STATE_CHANGED:Fn,STATE_ENDED:gn,STATE_RECOGNIZED:Cn,STATE_CANCELLED:pr,STATE_FAILED:hr,DIRECTION_NONE:Dt,DIRECTION_LEFT:Vt,DIRECTION_RIGHT:ze,DIRECTION_UP:rt,DIRECTION_DOWN:jt,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:pe,DIRECTION_ALL:ct,Manager:ya,Input:sn,TouchAction:Fe,TouchInput:er,MouseInput:wn,PointerEventInput:Te,TouchMouseInput:Ur,SingleTouchInput:Yt,Recognizer:ei,AttrRecognizer:Gi,Tap:Wi,Pan:Ni,Swipe:Eo,Pinch:Gr,Rotate:fi,Press:So,on:Me,off:Ae,each:$,merge:et,extend:we,assign:K,inherit:Je,bindFn:wt,prefixed:Oe});var as=typeof W!="undefined"?W:typeof self!="undefined"?self:{};as.Hammer=io,q=function(){return io}.call(G,L,G,gt),q!==ee&&(gt.exports=q)})(window,document,"Hammer")},47443:function(gt,G,L){var q=L(42118);function W(E,de){var ee=E==null?0:E.length;return!!ee&&q(E,de,0)>-1}gt.exports=W},1196:function(gt){function G(L,q,W){for(var E=-1,de=L==null?0:L.length;++E<de;)if(W(q,L[E]))return!0;return!1}gt.exports=G},29750:function(gt){function G(L,q,W){return L===L&&(W!==void 0&&(L=L<=W?L:W),q!==void 0&&(L=L>=q?L:q)),L}gt.exports=G},41848:function(gt){function G(L,q,W,E){for(var de=L.length,ee=W+(E?1:-1);E?ee--:++ee<de;)if(q(L[ee],ee,L))return ee;return-1}gt.exports=G},42118:function(gt,G,L){var q=L(41848),W=L(62722),E=L(39375);function de(ee,ue,ce){return ue===ue?E(ee,ue,ce):q(ee,W,ce)}gt.exports=de},74221:function(gt){function G(L,q,W,E){for(var de=W-1,ee=L.length;++de<ee;)if(E(L[de],q))return de;return-1}gt.exports=G},62722:function(gt){function G(L){return L!==L}gt.exports=G},65464:function(gt,G,L){var q=L(29932),W=L(42118),E=L(74221),de=L(51717),ee=L(6450),ue=Array.prototype,ce=ue.splice;function xe(ae,We,te,me){var Re=me?E:W,$=-1,le=We.length,K=ae;for(ae===We&&(We=ee(We)),te&&(K=q(ae,de(te)));++$<le;)for(var we=0,et=We[$],Je=te?te(et):et;(we=Re(K,Je,we,me))>-1;)K!==ae&&ce.call(K,we,1),ce.call(ae,we,1);return ae}gt.exports=xe},45652:function(gt,G,L){var q=L(88668),W=L(47443),E=L(1196),de=L(74757),ee=L(23593),ue=L(21814),ce=200;function xe(ae,We,te){var me=-1,Re=W,$=ae.length,le=!0,K=[],we=K;if(te)le=!1,Re=E;else if($>=ce){var et=We?null:ee(ae);if(et)return ue(et);le=!1,Re=de,we=new q}else we=We?[]:K;e:for(;++me<$;){var Je=ae[me],wt=We?We(Je):Je;if(Je=te||Je!==0?Je:0,le&&wt===wt){for(var pt=we.length;pt--;)if(we[pt]===wt)continue e;We&&we.push(wt),K.push(Je)}else Re(we,wt,te)||(we!==K&&we.push(wt),K.push(Je))}return K}gt.exports=xe},23593:function(gt,G,L){var q=L(58525),W=L(28117),E=L(21814),de=1/0,ee=q&&1/E(new q([,-0]))[1]==de?function(ue){return new q(ue)}:W;gt.exports=ee},39375:function(gt){function G(L,q,W){for(var E=W-1,de=L.length;++E<de;)if(L[E]===q)return E;return-1}gt.exports=G},74691:function(gt,G,L){var q=L(29750),W=L(14841);function E(de,ee,ue){return ue===void 0&&(ue=ee,ee=void 0),ue!==void 0&&(ue=W(ue),ue=ue===ue?ue:0),ee!==void 0&&(ee=W(ee),ee=ee===ee?ee:0),q(W(de),ee,ue)}gt.exports=E},51584:function(gt,G,L){var q=L(44239),W=L(37005),E="[object Boolean]";function de(ee){return ee===!0||ee===!1||W(ee)&&q(ee)==E}gt.exports=de},18446:function(gt,G,L){var q=L(90939);function W(E,de){return q(E,de)}gt.exports=W},14293:function(gt){function G(L){return L==null}gt.exports=G},81763:function(gt,G,L){var q=L(44239),W=L(37005),E="[object Number]";function de(ee){return typeof ee=="number"||W(ee)&&q(ee)==E}gt.exports=de},52353:function(gt){function G(L){return L===void 0}gt.exports=G},30236:function(gt,G,L){var q=L(42980),W=L(21463),E=W(function(de,ee,ue,ce){q(de,ee,ue,ce)});gt.exports=E},28117:function(gt){function G(){}gt.exports=G},97019:function(gt,G,L){var q=L(5976),W=L(45604),E=q(W);gt.exports=E},45604:function(gt,G,L){var q=L(65464);function W(E,de){return E&&E.length&&de&&de.length?q(E,de):E}gt.exports=W},44908:function(gt,G,L){var q=L(45652);function W(E){return E&&E.length?q(E):[]}gt.exports=W},6158:function(gt){(function(G,L){gt.exports=L()})(this,function(){"use strict";var G,L,q;function W(E,de){if(!G)G=de;else if(!L)L=de;else{var ee="var sharedChunk = {}; ("+G+")(sharedChunk); ("+L+")(sharedChunk);",ue={};G(ue),q=de(ue),typeof window!="undefined"&&(q.workerUrl=window.URL.createObjectURL(new Blob([ee],{type:"text/javascript"})))}}return W(["exports"],function(E){"use strict";function de(u,d){return u(d={exports:{}},d.exports),d.exports}var ee=ue;function ue(u,d,g,A){this.cx=3*u,this.bx=3*(g-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(A-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=A,this.p2x=g,this.p2y=A}ue.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},ue.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},ue.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},ue.prototype.solveCurveX=function(u,d){var g,A,P,F,j;for(d===void 0&&(d=1e-6),P=u,j=0;j<8;j++){if(F=this.sampleCurveX(P)-u,Math.abs(F)<d)return P;var J=this.sampleCurveDerivativeX(P);if(Math.abs(J)<1e-6)break;P-=F/J}if((P=u)<(g=0))return g;if(P>(A=1))return A;for(;g<A;){if(F=this.sampleCurveX(P),Math.abs(F-u)<d)return P;u>F?g=P:A=P,P=.5*(A-g)+g}return P},ue.prototype.solve=function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))};var ce=xe;function xe(u,d){this.x=u,this.y=d}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,d){return this.clone()._rotateAround(u,d)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var d=u.x-this.x,g=u.y-this.y;return d*d+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,d){return Math.atan2(this.x*d-this.y*u,this.x*u+this.y*d)},_matMult:function(u){var d=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=d,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var d=Math.cos(u),g=Math.sin(u),A=g*this.x+d*this.y;return this.x=d*this.x-g*this.y,this.y=A,this},_rotateAround:function(u,d){var g=Math.cos(u),A=Math.sin(u),P=d.y+A*(this.x-d.x)+g*(this.y-d.y);return this.x=d.x+g*(this.x-d.x)-A*(this.y-d.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},xe.convert=function(u){return u instanceof xe?u:Array.isArray(u)?new xe(u[0],u[1]):u};var ae=typeof self!="undefined"?self:{},We=Math.pow(2,53)-1;function te(u,d,g,A){var P=new ee(u,d,g,A);return function(F){return P.solve(F)}}var me=te(.25,.1,.25,1);function Re(u,d,g){return Math.min(g,Math.max(d,u))}function $(u,d,g){var A=g-d,P=((u-d)%A+A)%A+d;return P===d?g:P}function le(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}var K=1;function we(){return K++}function et(){return function u(d){return d?(d^16*Math.random()>>d/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function Je(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function wt(u,d){u.forEach(function(g){d[g]&&(d[g]=d[g].bind(d))})}function pt(u,d){return u.indexOf(d,u.length-d.length)!==-1}function _t(u,d,g){var A={};for(var P in u)A[P]=d.call(g||this,u[P],P,u);return A}function Me(u,d,g){var A={};for(var P in u)d.call(g||this,u[P],P,u)&&(A[P]=u[P]);return A}function Ae(u){return Array.isArray(u)?u.map(Ae):typeof u=="object"&&u?_t(u,Ae):u}var je={};function Ze(u){je[u]||(typeof console!="undefined"&&console.warn(u),je[u]=!0)}function lt(u,d,g){return(g.y-u.y)*(d.x-u.x)>(d.y-u.y)*(g.x-u.x)}function en(u){for(var d=0,g=0,A=u.length,P=A-1,F=void 0,j=void 0;g<A;P=g++)d+=((j=u[P]).x-(F=u[g]).x)*(F.y+j.y);return d}function Le(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function St(u){var d={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,P,F,j){var J=F||j;return d[P]=!J||J.toLowerCase(),""}),d["max-age"]){var g=parseInt(d["max-age"],10);isNaN(g)?delete d["max-age"]:d["max-age"]=g}return d}var Oe=null;function nt(u){if(Oe==null){var d=u.navigator?u.navigator.userAgent:null;Oe=!!u.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Oe}function Ke(u){try{var d=ae[u];return d.setItem("_mapbox_test_",1),d.removeItem("_mapbox_test_"),!0}catch(g){return!1}}var Xe,Rt,bt,Ie,Gt=ae.performance&&ae.performance.now?ae.performance.now.bind(ae.performance):Date.now.bind(Date),mn=ae.requestAnimationFrame||ae.mozRequestAnimationFrame||ae.webkitRequestAnimationFrame||ae.msRequestAnimationFrame,Ln=ae.cancelAnimationFrame||ae.mozCancelAnimationFrame||ae.webkitCancelAnimationFrame||ae.msCancelAnimationFrame,qn={now:Gt,frame:function(u){var d=mn(u);return{cancel:function(){return Ln(d)}}},getImageData:function(u,d){d===void 0&&(d=0);var g=ae.document.createElement("canvas"),A=g.getContext("2d");if(!A)throw new Error("failed to create canvas 2d context");return g.width=u.width,g.height=u.height,A.drawImage(u,0,0,u.width,u.height),A.getImageData(-d,-d,u.width+2*d,u.height+2*d)},resolveURL:function(u){return Xe||(Xe=ae.document.createElement("a")),Xe.href=u,Xe.href},hardwareConcurrency:ae.navigator&&ae.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ae.devicePixelRatio},get prefersReducedMotion(){return!!ae.matchMedia&&(Rt==null&&(Rt=ae.matchMedia("(prefers-reduced-motion: reduce)")),Rt.matches)}},rr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ft={supported:!1,testSupport:function(u){!Jt&&Ie&&(un?Vn(u):bt=u)}},Jt=!1,un=!1;function Vn(u){var d=u.createTexture();u.bindTexture(u.TEXTURE_2D,d);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ie),u.isContextLost())return;Ft.supported=!0}catch(g){}u.deleteTexture(d),Jt=!0}ae.document&&((Ie=ae.document.createElement("img")).onload=function(){bt&&Vn(bt),bt=null,un=!0},Ie.onerror=function(){Jt=!0,bt=null},Ie.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var on="01",Dt=function(u,d){this._transformRequestFn=u,this._customAccessToken=d,this._createSkuToken()};function Vt(u){return u.indexOf("mapbox:")===0}Dt.prototype._createSkuToken=function(){var u=function(){for(var d="",g=0;g<10;g++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",on,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},Dt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Dt.prototype.transformRequest=function(u,d){return this._transformRequestFn&&this._transformRequestFn(u,d)||{url:u}},Dt.prototype.normalizeStyleURL=function(u,d){if(!Vt(u))return u;var g=U(u);return g.path="/styles/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Dt.prototype.normalizeGlyphsURL=function(u,d){if(!Vt(u))return u;var g=U(u);return g.path="/fonts/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Dt.prototype.normalizeSourceURL=function(u,d){if(!Vt(u))return u;var g=U(u);return g.path="/v4/"+g.authority+".json",g.params.push("secure"),this._makeAPIURL(g,this._customAccessToken||d)},Dt.prototype.normalizeSpriteURL=function(u,d,g,A){var P=U(u);return Vt(u)?(P.path="/styles/v1"+P.path+"/sprite"+d+g,this._makeAPIURL(P,this._customAccessToken||A)):(P.path+=""+d+g,pe(P))},Dt.prototype.normalizeTileURL=function(u,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!Vt(u))return u;var g=U(u);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,(qn.devicePixelRatio>=2||d===512?"@2x":"")+(Ft.supported?".webp":"$1")),g.path=g.path.replace(/^.+\/v4\//,"/"),g.path="/v4"+g.path;var A=this._customAccessToken||function(P){for(var F=0,j=P;F<j.length;F+=1){var J=j[F].match(/^access_token=(.*)$/);if(J)return J[1]}return null}(g.params)||rr.ACCESS_TOKEN;return rr.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&g.params.push("sku="+this._skuToken),this._makeAPIURL(g,A)},Dt.prototype.canonicalizeTileURL=function(u,d){var g=U(u);if(!g.path.match(/(^\/v4\/)/)||!g.path.match(/\.[\w]+$/))return u;var A="mapbox://tiles/";A+=g.path.replace("/v4/","");var P=g.params;return d&&(P=P.filter(function(F){return!F.match(/^access_token=/)})),P.length&&(A+="?"+P.join("&")),A},Dt.prototype.canonicalizeTileset=function(u,d){for(var g=!!d&&Vt(d),A=[],P=0,F=u.tiles||[];P<F.length;P+=1){var j=F[P];rt(j)?A.push(this.canonicalizeTileURL(j,g)):A.push(j)}return A},Dt.prototype._makeAPIURL=function(u,d){var g="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",A=U(rr.API_URL);if(u.protocol=A.protocol,u.authority=A.authority,u.protocol==="http"){var P=u.params.indexOf("secure");P>=0&&u.params.splice(P,1)}if(A.path!=="/"&&(u.path=""+A.path+u.path),!rr.REQUIRE_ACCESS_TOKEN)return pe(u);if(!(d=d||rr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if(d[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return u.params=u.params.filter(function(F){return F.indexOf("access_token")===-1}),u.params.push("access_token="+d),pe(u)};var ze=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function rt(u){return ze.test(u)}var jt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function U(u){var d=u.match(jt);if(!d)throw new Error("Unable to parse URL object");return{protocol:d[1],authority:d[2],path:d[3]||"/",params:d[4]?d[4].split("&"):[]}}function pe(u){var d=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+d}function ct(u){if(!u)return null;var d=u.split(".");if(!d||d.length!==3)return null;try{return JSON.parse(decodeURIComponent(ae.atob(d[1]).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(g){return null}}var he=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};he.prototype.getStorageKey=function(u){var d,g=ct(rr.ACCESS_TOKEN);return d=g&&g.u?ae.btoa(encodeURIComponent(g.u).replace(/%([0-9A-F]{2})/g,function(A,P){return String.fromCharCode(+("0x"+P))})):rr.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+d:"mapbox.eventData:"+d},he.prototype.fetchEventData=function(){var u=Ke("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{var A=ae.localStorage.getItem(d);A&&(this.eventData=JSON.parse(A));var P=ae.localStorage.getItem(g);P&&(this.anonId=P)}catch(F){Ze("Unable to read from LocalStorage")}},he.prototype.saveEventData=function(){var u=Ke("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{ae.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&ae.localStorage.setItem(d,JSON.stringify(this.eventData))}catch(A){Ze("Unable to write to LocalStorage")}},he.prototype.processRequests=function(u){},he.prototype.postEvent=function(u,d,g,A){var P=this;if(rr.EVENTS_URL){var F=U(rr.EVENTS_URL);F.params.push("access_token="+(A||rr.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:on,userId:this.anonId},J=d?le(j,d):j,be={url:pe(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([J])};this.pendingRequest=Jn(be,function(Ne){P.pendingRequest=null,g(Ne),P.saveEventData(),P.processRequests(A)})}},he.prototype.queueRequest=function(u,d){this.queue.push(u),this.processRequests(d)};var $t,sn,pn=function(u){function d(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postMapLoadEvent=function(g,A,P,F){this.skuToken=P;var j=!(!F&&!rr.ACCESS_TOKEN),J=Array.isArray(g)&&g.some(function(be){return Vt(be)||rt(be)});rr.EVENTS_URL&&j&&J&&this.queueRequest({id:A,timestamp:Date.now()},F)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),F=P.id,j=P.timestamp;F&&this.success[F]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=et()),this.postEvent(j,{skuToken:this.skuToken},function(J){J||F&&(A.success[F]=!0)},g))}},d}(he),Dn=new(function(u){function d(g){u.call(this,"appUserTurnstile"),this._customAccessToken=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postTurnstileEvent=function(g,A){rr.EVENTS_URL&&rr.ACCESS_TOKEN&&Array.isArray(g)&&g.some(function(P){return Vt(P)||rt(P)})&&this.queueRequest(Date.now(),A)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=ct(rr.ACCESS_TOKEN),F=P?P.u:rr.ACCESS_TOKEN,j=F!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=et(),j=!0);var J=this.queue.shift();if(this.eventData.lastSuccess){var be=new Date(this.eventData.lastSuccess),Ne=new Date(J),$e=(J-this.eventData.lastSuccess)/864e5;j=j||$e>=1||$e<-1||be.getDate()!==Ne.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(J,{"enabled.telemetry":!1},function(at){at||(A.eventData.lastSuccess=J,A.eventData.tokenU=F)},g)}},d}(he)),Wn=Dn.postTurnstileEvent.bind(Dn),Yn=new pn,fn=Yn.postMapLoadEvent.bind(Yn),vt=500,Pt=50;function An(){ae.caches&&!$t&&($t=ae.caches.open("mapbox-tiles"))}function Pn(u){var d=u.indexOf("?");return d<0?u:u.slice(0,d)}var Xn,dt=1/0;function Se(){return Xn==null&&(Xn=ae.OffscreenCanvas&&new ae.OffscreenCanvas(1,1).getContext("2d")&&typeof ae.createImageBitmap=="function"),Xn}var Be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Be);var st=function(u){function d(g,A,P){A===401&&rt(P)&&(g+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,g),this.status=A,this.url=P,this.name=this.constructor.name,this.message=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},d}(Error),Lt=Le()?function(){return self.worker&&self.worker.referrer}:function(){return(ae.location.protocol==="blob:"?ae.parent:ae).location.href},It,wn,Kn=function(u,d){if(!(/^file:/.test(g=u.url)||/^file:/.test(Lt())&&!/^\w+:/.test(g))){if(ae.fetch&&ae.Request&&ae.AbortController&&ae.Request.prototype.hasOwnProperty("signal"))return function(A,P){var F,j=new ae.AbortController,J=new ae.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Lt(),signal:j.signal}),be=!1,Ne=!1,$e=(F=J.url).indexOf("sku=")>0&&rt(F);A.type==="json"&&J.headers.set("Accept","application/json");var at=function(Bt,dn,yn){if(!Ne){if(Bt&&Bt.message!=="SecurityError"&&Ze(Bt),dn&&yn)return Tt(dn);var Gn=Date.now();ae.fetch(J).then(function(In){if(In.ok){var cr=$e?In.clone():null;return Tt(In,cr,Gn)}return P(new st(In.statusText,In.status,A.url))}).catch(function(In){In.code!==20&&P(new Error(In.message))})}},Tt=function(Bt,dn,yn){(A.type==="arrayBuffer"?Bt.arrayBuffer():A.type==="json"?Bt.json():Bt.text()).then(function(Gn){Ne||(dn&&yn&&function(In,cr,gr){if(An(),$t){var Ir={status:cr.status,statusText:cr.statusText,headers:new ae.Headers};cr.headers.forEach(function(Wr,Ii){return Ir.headers.set(Ii,Wr)});var Dr=St(cr.headers.get("Cache-Control")||"");Dr["no-store"]||(Dr["max-age"]&&Ir.headers.set("Expires",new Date(gr+1e3*Dr["max-age"]).toUTCString()),new Date(Ir.headers.get("Expires")).getTime()-gr<42e4||function(Wr,Ii){if(sn===void 0)try{new Response(new ReadableStream),sn=!0}catch($i){sn=!1}sn?Ii(Wr.body):Wr.blob().then(Ii)}(cr,function(Wr){var Ii=new ae.Response(Wr,Ir);An(),$t&&$t.then(function($i){return $i.put(Pn(In.url),Ii)}).catch(function($i){return Ze($i.message)})}))}}(J,dn,yn),be=!0,P(null,Gn,Bt.headers.get("Cache-Control"),Bt.headers.get("Expires")))}).catch(function(Gn){Ne||P(new Error(Gn.message))})};return $e?function(Bt,dn){if(An(),!$t)return dn(null);var yn=Pn(Bt.url);$t.then(function(Gn){Gn.match(yn).then(function(In){var cr=function(gr){if(!gr)return!1;var Ir=new Date(gr.headers.get("Expires")||0),Dr=St(gr.headers.get("Cache-Control")||"");return Ir>Date.now()&&!Dr["no-cache"]}(In);Gn.delete(yn),cr&&Gn.put(yn,In.clone()),dn(null,In,cr)}).catch(dn)}).catch(dn)}(J,at):at(null,null),{cancel:function(){Ne=!0,be||j.abort()}}}(u,d);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,d,void 0,!0)}var g;return function(A,P){var F=new ae.XMLHttpRequest;for(var j in F.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(F.responseType="arraybuffer"),A.headers)F.setRequestHeader(j,A.headers[j]);return A.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=function(){P(new Error(F.statusText))},F.onload=function(){if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){var J=F.response;if(A.type==="json")try{J=JSON.parse(F.response)}catch(be){return P(be)}P(null,J,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else P(new st(F.statusText,F.status,A.url))},F.send(A.body),{cancel:function(){return F.abort()}}}(u,d)},_r=function(u,d){return Kn(le(u,{type:"arrayBuffer"}),d)},Jn=function(u,d){return Kn(le(u,{method:"POST"}),d)},Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";It=[],wn=0;var Te=function(u,d){if(Ft.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),wn>=rr.MAX_PARALLEL_IMAGE_REQUESTS){var g={requestParameters:u,callback:d,cancelled:!1,cancel:function(){this.cancelled=!0}};return It.push(g),g}wn++;var A=!1,P=function(){if(!A)for(A=!0,wn--;It.length&&wn<rr.MAX_PARALLEL_IMAGE_REQUESTS;){var j=It.shift();j.cancelled||(j.cancel=Te(j.requestParameters,j.callback).cancel)}},F=_r(u,function(j,J,be,Ne){P(),j?d(j):J&&(Se()?function($e,at){var Tt=new ae.Blob([new Uint8Array($e)],{type:"image/png"});ae.createImageBitmap(Tt).then(function(Bt){at(null,Bt)}).catch(function(Bt){at(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(J,d):function($e,at,Tt,Bt){var dn=new ae.Image,yn=ae.URL;dn.onload=function(){at(null,dn),yn.revokeObjectURL(dn.src),dn.onload=null,ae.requestAnimationFrame(function(){dn.src=Pe})},dn.onerror=function(){return at(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Gn=new ae.Blob([new Uint8Array($e)],{type:"image/png"});dn.cacheControl=Tt,dn.expires=Bt,dn.src=$e.byteLength?yn.createObjectURL(Gn):Pe}(J,d,be,Ne))});return{cancel:function(){F.cancel(),P()}}};function ke(u,d,g){g[u]&&g[u].indexOf(d)!==-1||(g[u]=g[u]||[],g[u].push(d))}function it(u,d,g){if(g&&g[u]){var A=g[u].indexOf(d);A!==-1&&g[u].splice(A,1)}}var At=function(u,d){d===void 0&&(d={}),le(this,d),this.type=u},Yt=function(u){function d(g,A){A===void 0&&(A={}),u.call(this,"error",le({error:g},A))}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(At),hn=function(){};hn.prototype.on=function(u,d){return this._listeners=this._listeners||{},ke(u,d,this._listeners),this},hn.prototype.off=function(u,d){return it(u,d,this._listeners),it(u,d,this._oneTimeListeners),this},hn.prototype.once=function(u,d){return this._oneTimeListeners=this._oneTimeListeners||{},ke(u,d,this._oneTimeListeners),this},hn.prototype.fire=function(u,d){typeof u=="string"&&(u=new At(u,d||{}));var g=u.type;if(this.listens(g)){u.target=this;for(var A=0,P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];A<P.length;A+=1)P[A].call(this,u);for(var F=0,j=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];F<j.length;F+=1){var J=j[F];it(g,J,this._oneTimeListeners),J.call(this,u)}var be=this._eventedParent;be&&(le(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),be.fire(u))}else u instanceof Yt&&console.error(u.error);return this},hn.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},hn.prototype.setEventedParent=function(u,d){return this._eventedParent=u,this._eventedParentData=d,this};var Et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Kt=function(u,d,g,A){this.message=(u?u+": ":"")+g,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)};function er(u){var d=u.value;return d?[new Kt(u.key,d,"constants have been deprecated as of v8")]:[]}function br(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}function Vr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function vr(u){if(Array.isArray(u))return u.map(vr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var d={};for(var g in u)d[g]=vr(u[g]);return d}return Vr(u)}var Ur=function(u){function d(g,A){u.call(this,A),this.message=A,this.key=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Error),_i=function(u,d){d===void 0&&(d=[]),this.parent=u,this.bindings={};for(var g=0,A=d;g<A.length;g+=1){var P=A[g];this.bindings[P[0]]=P[1]}};_i.prototype.concat=function(u){return new _i(this,u)},_i.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},_i.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var Ai={kind:"null"},wr={kind:"number"},Ei={kind:"string"},hi={kind:"boolean"},ai={kind:"color"},Io={kind:"object"},xi={kind:"value"},Qo={kind:"collator"},ga={kind:"formatted"},Po={kind:"resolvedImage"};function $o(u,d){return{kind:"array",itemType:u,N:d}}function Fe(u){if(u.kind==="array"){var d=Fe(u.itemType);return typeof u.N=="number"?"array<"+d+", "+u.N+">":u.itemType.kind==="value"?"array":"array<"+d+">"}return u.kind}var ot=[Ai,wr,Ei,hi,ai,ga,Io,$o(xi),Po];function Ut(u,d){if(d.kind==="error")return null;if(u.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!Ut(u.itemType,d.itemType))&&(typeof u.N!="number"||u.N===d.N))return null}else{if(u.kind===d.kind)return null;if(u.kind==="value"){for(var g=0,A=ot;g<A.length;g+=1)if(!Ut(A[g],d))return null}}return"Expected "+Fe(u)+" but found "+Fe(d)+" instead."}function ln(u,d){return d.some(function(g){return g.kind===u.kind})}function Nn(u,d){return d.some(function(g){return g==="null"?u===null:g==="array"?Array.isArray(u):g==="object"?u&&!Array.isArray(u)&&typeof u=="object":g===typeof u})}var Fn=de(function(u,d){var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function A(J){return(J=Math.round(J))<0?0:J>255?255:J}function P(J){return A(J[J.length-1]==="%"?parseFloat(J)/100*255:parseInt(J))}function F(J){return(be=J[J.length-1]==="%"?parseFloat(J)/100:parseFloat(J))<0?0:be>1?1:be;var be}function j(J,be,Ne){return Ne<0?Ne+=1:Ne>1&&(Ne-=1),6*Ne<1?J+(be-J)*Ne*6:2*Ne<1?be:3*Ne<2?J+(be-J)*(2/3-Ne)*6:J}try{d.parseCSSColor=function(J){var be,Ne=J.replace(/ /g,"").toLowerCase();if(Ne in g)return g[Ne].slice();if(Ne[0]==="#")return Ne.length===4?(be=parseInt(Ne.substr(1),16))>=0&&be<=4095?[(3840&be)>>4|(3840&be)>>8,240&be|(240&be)>>4,15&be|(15&be)<<4,1]:null:Ne.length===7&&(be=parseInt(Ne.substr(1),16))>=0&&be<=16777215?[(16711680&be)>>16,(65280&be)>>8,255&be,1]:null;var $e=Ne.indexOf("("),at=Ne.indexOf(")");if($e!==-1&&at+1===Ne.length){var Tt=Ne.substr(0,$e),Bt=Ne.substr($e+1,at-($e+1)).split(","),dn=1;switch(Tt){case"rgba":if(Bt.length!==4)return null;dn=F(Bt.pop());case"rgb":return Bt.length!==3?null:[P(Bt[0]),P(Bt[1]),P(Bt[2]),dn];case"hsla":if(Bt.length!==4)return null;dn=F(Bt.pop());case"hsl":if(Bt.length!==3)return null;var yn=(parseFloat(Bt[0])%360+360)%360/360,Gn=F(Bt[1]),In=F(Bt[2]),cr=In<=.5?In*(Gn+1):In+Gn-In*Gn,gr=2*In-cr;return[A(255*j(gr,cr,yn+1/3)),A(255*j(gr,cr,yn)),A(255*j(gr,cr,yn-1/3)),dn];default:return null}}return null}}catch(J){}}).parseCSSColor,gn=function(u,d,g,A){A===void 0&&(A=1),this.r=u,this.g=d,this.b=g,this.a=A};gn.parse=function(u){if(u){if(u instanceof gn)return u;if(typeof u=="string"){var d=Fn(u);if(d)return new gn(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3])}}},gn.prototype.toString=function(){var u=this.toArray(),d=u[1],g=u[2],A=u[3];return"rgba("+Math.round(u[0])+","+Math.round(d)+","+Math.round(g)+","+A+")"},gn.prototype.toArray=function(){var u=this.a;return u===0?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);var Cn=function(u,d,g){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cn.prototype.compare=function(u,d){return this.collator.compare(u,d)},Cn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pr=function(u,d,g,A,P){this.text=u,this.image=d,this.scale=g,this.fontStack=A,this.textColor=P},hr=function(u){this.sections=u};hr.fromString=function(u){return new hr([new pr(u,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(u){return u.text.length!==0||u.image&&u.image.name.length!==0})},hr.factory=function(u){return u instanceof hr?u:hr.fromString(u)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(u){return u.text}).join("")},hr.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];if(A.image)u.push(["image",A.image.name]);else{u.push(A.text);var P={};A.fontStack&&(P["text-font"]=["literal",A.fontStack.split(",")]),A.scale&&(P["font-scale"]=A.scale),A.textColor&&(P["text-color"]=["rgba"].concat(A.textColor.toArray())),u.push(P)}}return u};var ei=function(u){this.name=u.name,this.available=u.available};function ji(u,d,g,A){return typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof g=="number"&&g>=0&&g<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:"Invalid rgba value ["+[u,d,g,A].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof A=="number"?[u,d,g,A]:[u,d,g]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ji(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof gn||u instanceof Cn||u instanceof hr||u instanceof ei)return!0;if(Array.isArray(u)){for(var d=0,g=u;d<g.length;d+=1)if(!Ji(g[d]))return!1;return!0}if(typeof u=="object"){for(var A in u)if(!Ji(u[A]))return!1;return!0}return!1}function ti(u){if(u===null)return Ai;if(typeof u=="string")return Ei;if(typeof u=="boolean")return hi;if(typeof u=="number")return wr;if(u instanceof gn)return ai;if(u instanceof Cn)return Qo;if(u instanceof hr)return ga;if(u instanceof ei)return Po;if(Array.isArray(u)){for(var d,g=u.length,A=0,P=u;A<P.length;A+=1){var F=ti(P[A]);if(d){if(d===F)continue;d=xi;break}d=F}return $o(d||xi,g)}return Io}function Gi(u){var d=typeof u;return u===null?"":d==="string"||d==="number"||d==="boolean"?String(u):u instanceof gn||u instanceof hr||u instanceof ei?u.toString():JSON.stringify(u)}ei.prototype.toString=function(){return this.name},ei.fromString=function(u){return u?new ei({name:u,available:!1}):null},ei.prototype.serialize=function(){return["image",this.name]};var Ni=function(u,d){this.type=u,this.value=d};Ni.parse=function(u,d){if(u.length!==2)return d.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!Ji(u[1]))return d.error("invalid value");var g=u[1],A=ti(g),P=d.expectedType;return A.kind!=="array"||A.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(A=P),new Ni(A,g)},Ni.prototype.evaluate=function(){return this.value},Ni.prototype.eachChild=function(){},Ni.prototype.outputDefined=function(){return!0},Ni.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof gn?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var Gr=function(u){this.name="ExpressionEvaluationError",this.message=u};Gr.prototype.toJSON=function(){return this.message};var So={string:Ei,number:wr,boolean:hi,object:Io},fi=function(u,d){this.type=u,this.args=d};fi.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g,A=1,P=u[0];if(P==="array"){var F,j;if(u.length>2){var J=u[1];if(typeof J!="string"||!(J in So)||J==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);F=So[J],A++}else F=xi;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);j=u[2],A++}g=$o(F,j)}else g=So[P];for(var be=[];A<u.length;A++){var Ne=d.parse(u[A],A,xi);if(!Ne)return null;be.push(Ne)}return new fi(g,be)},fi.prototype.evaluate=function(u){for(var d=0;d<this.args.length;d++){var g=this.args[d].evaluate(u);if(!Ut(this.type,ti(g)))return g;if(d===this.args.length-1)throw new Gr("Expected value to be of type "+Fe(this.type)+", but found "+Fe(ti(g))+" instead.")}return null},fi.prototype.eachChild=function(u){this.args.forEach(u)},fi.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},fi.prototype.serialize=function(){var u=this.type,d=[u.kind];if(u.kind==="array"){var g=u.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){d.push(g.kind);var A=u.N;(typeof A=="number"||this.args.length>1)&&d.push(A)}}return d.concat(this.args.map(function(P){return P.serialize()}))};var Eo=function(u){this.type=ga,this.sections=u};Eo.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");for(var A=[],P=!1,F=1;F<=u.length-1;++F){var j=u[F];if(P&&typeof j=="object"&&!Array.isArray(j)){P=!1;var J=null;if(j["font-scale"]&&!(J=d.parse(j["font-scale"],1,wr)))return null;var be=null;if(j["text-font"]&&!(be=d.parse(j["text-font"],1,$o(Ei))))return null;var Ne=null;if(j["text-color"]&&!(Ne=d.parse(j["text-color"],1,ai)))return null;var $e=A[A.length-1];$e.scale=J,$e.font=be,$e.textColor=Ne}else{var at=d.parse(u[F],1,xi);if(!at)return null;var Tt=at.type.kind;if(Tt!=="string"&&Tt!=="value"&&Tt!=="null"&&Tt!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,A.push({content:at,scale:null,font:null,textColor:null})}}return new Eo(A)},Eo.prototype.evaluate=function(u){return new hr(this.sections.map(function(d){var g=d.content.evaluate(u);return ti(g)===Po?new pr("",g,null,null,null):new pr(Gi(g),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null)}))},Eo.prototype.eachChild=function(u){for(var d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u(A.content),A.scale&&u(A.scale),A.font&&u(A.font),A.textColor&&u(A.textColor)}},Eo.prototype.outputDefined=function(){return!1},Eo.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u.push(A.content.serialize());var P={};A.scale&&(P["font-scale"]=A.scale.serialize()),A.font&&(P["text-font"]=A.font.serialize()),A.textColor&&(P["text-color"]=A.textColor.serialize()),u.push(P)}return u};var Wi=function(u){this.type=Po,this.input=u};Wi.parse=function(u,d){if(u.length!==2)return d.error("Expected two arguments.");var g=d.parse(u[1],1,Ei);return g?new Wi(g):d.error("No image name provided.")},Wi.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=ei.fromString(d);return g&&u.availableImages&&(g.available=u.availableImages.indexOf(d)>-1),g},Wi.prototype.eachChild=function(u){u(this.input)},Wi.prototype.outputDefined=function(){return!1},Wi.prototype.serialize=function(){return["image",this.input.serialize()]};var io={"to-boolean":hi,"to-color":ai,"to-number":wr,"to-string":Ei},Ao=function(u,d){this.type=u,this.args=d};Ao.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[0];if((g==="to-boolean"||g==="to-string")&&u.length!==2)return d.error("Expected one argument.");for(var A=io[g],P=[],F=1;F<u.length;F++){var j=d.parse(u[F],F,xi);if(!j)return null;P.push(j)}return new Ao(A,P)},Ao.prototype.evaluate=function(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){for(var d,g,A=0,P=this.args;A<P.length;A+=1){if(g=null,(d=P[A].evaluate(u))instanceof gn)return d;if(typeof d=="string"){var F=u.parseColor(d);if(F)return F}else if(Array.isArray(d)&&!(g=d.length<3||d.length>4?"Invalid rbga value "+JSON.stringify(d)+": expected an array containing either three or four numeric values.":ji(d[0],d[1],d[2],d[3])))return new gn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Gr(g||"Could not parse color from value '"+(typeof d=="string"?d:String(JSON.stringify(d)))+"'")}if(this.type.kind==="number"){for(var j=null,J=0,be=this.args;J<be.length;J+=1){if((j=be[J].evaluate(u))===null)return 0;var Ne=Number(j);if(!isNaN(Ne))return Ne}throw new Gr("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?hr.fromString(Gi(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?ei.fromString(Gi(this.args[0].evaluate(u))):Gi(this.args[0].evaluate(u))},Ao.prototype.eachChild=function(u){this.args.forEach(u)},Ao.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new Eo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Wi(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(d){u.push(d.serialize())}),u};var xs=["Unknown","Point","LineString","Polygon"],ya=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ya.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ya.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?xs[this.feature.type]:this.feature.type:null},ya.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ya.prototype.canonicalID=function(){return this.canonical},ya.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ya.prototype.parseColor=function(u){var d=this._parseColorCache[u];return d||(d=this._parseColorCache[u]=gn.parse(u)),d};var ra=function(u,d,g,A){this.name=u,this.type=d,this._evaluate=g,this.args=A};ra.prototype.evaluate=function(u){return this._evaluate(u,this.args)},ra.prototype.eachChild=function(u){this.args.forEach(u)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},ra.parse=function(u,d){var g,A=u[0],P=ra.definitions[A];if(!P)return d.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0);for(var F=Array.isArray(P)?P[0]:P.type,j=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,J=j.filter(function(Yo){var po=Yo[0];return!Array.isArray(po)||po.length===u.length-1}),be=null,Ne=0,$e=J;Ne<$e.length;Ne+=1){var at=$e[Ne],Tt=at[0],Bt=at[1];be=new ef(d.registry,d.path,null,d.scope);for(var dn=[],yn=!1,Gn=1;Gn<u.length;Gn++){var In=u[Gn],cr=Array.isArray(Tt)?Tt[Gn-1]:Tt.type,gr=be.parse(In,1+dn.length,cr);if(!gr){yn=!0;break}dn.push(gr)}if(!yn)if(Array.isArray(Tt)&&Tt.length!==dn.length)be.error("Expected "+Tt.length+" arguments, but found "+dn.length+" instead.");else{for(var Ir=0;Ir<dn.length;Ir++){var Dr=Array.isArray(Tt)?Tt[Ir]:Tt.type,Wr=dn[Ir];be.concat(Ir+1).checkSubtype(Dr,Wr.type)}if(be.errors.length===0)return new ra(A,F,Bt,dn)}}if(J.length===1)(g=d.errors).push.apply(g,be.errors);else{for(var Ii=(J.length?J:j).map(function(Yo){var po;return po=Yo[0],Array.isArray(po)?"("+po.map(Fe).join(", ")+")":"("+Fe(po.type)+"...)"}).join(" | "),$i=[],ko=1;ko<u.length;ko++){var fo=d.parse(u[ko],1+$i.length);if(!fo)return null;$i.push(Fe(fo.type))}d.error("Expected arguments of type "+Ii+", but found ("+$i.join(", ")+") instead.")}return null},ra.register=function(u,d){for(var g in ra.definitions=d,d)u[g]=ra};var gs=function(u,d,g){this.type=Qo,this.locale=g,this.caseSensitive=u,this.diacriticSensitive=d};function as(u,d){u[0]=Math.min(u[0],d[0]),u[1]=Math.min(u[1],d[1]),u[2]=Math.max(u[2],d[0]),u[3]=Math.max(u[3],d[1])}function Ct(u,d){return!(u[0]<=d[0]||u[2]>=d[2]||u[1]<=d[1]||u[3]>=d[3])}function Wt(u,d){var g=(180+u[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,d.z);return[Math.round(g*P*8192),Math.round(A*P*8192)]}function jn(u,d,g){return d[1]>u[1]!=g[1]>u[1]&&u[0]<(g[0]-d[0])*(u[1]-d[1])/(g[1]-d[1])+d[0]}function Lr(u,d){for(var g,A,P,F,j,J,be,Ne=!1,$e=0,at=d.length;$e<at;$e++)for(var Tt=d[$e],Bt=0,dn=Tt.length;Bt<dn-1;Bt++){if((F=(g=u)[0]-(A=Tt[Bt])[0])*(be=g[1]-(P=Tt[Bt+1])[1])-(J=g[0]-P[0])*(j=g[1]-A[1])==0&&F*J<=0&&j*be<=0)return!1;jn(u,Tt[Bt],Tt[Bt+1])&&(Ne=!Ne)}return Ne}function Si(u,d){for(var g=0;g<d.length;g++)if(Lr(u,d[g]))return!0;return!1}function Zi(u,d,g,A){var P=A[0]-g[0],F=A[1]-g[1],j=(u[0]-g[0])*F-P*(u[1]-g[1]),J=(d[0]-g[0])*F-P*(d[1]-g[1]);return j>0&&J<0||j<0&&J>0}function Jo(u,d,g){for(var A=0,P=g;A<P.length;A+=1)for(var F=P[A],j=0;j<F.length-1;++j)if((at=[($e=F[j+1])[0]-(Ne=F[j])[0],$e[1]-Ne[1]])[0]*(Tt=[(be=d)[0]-(J=u)[0],be[1]-J[1]])[1]-at[1]*Tt[0]!=0&&Zi(J,be,Ne,$e)&&Zi(Ne,$e,J,be))return!0;var J,be,Ne,$e,at,Tt;return!1}function Hs(u,d){for(var g=0;g<u.length;++g)if(!Lr(u[g],d))return!1;for(var A=0;A<u.length-1;++A)if(Jo(u[A],u[A+1],d))return!1;return!0}function Is(u,d){for(var g=0;g<d.length;g++)if(Hs(u,d[g]))return!0;return!1}function Us(u,d,g){for(var A=[],P=0;P<u.length;P++){for(var F=[],j=0;j<u[P].length;j++){var J=Wt(u[P][j],g);as(d,J),F.push(J)}A.push(F)}return A}function dl(u,d,g){for(var A=[],P=0;P<u.length;P++){var F=Us(u[P],d,g);A.push(F)}return A}function Ph(u,d,g,A){if(u[0]<g[0]||u[0]>g[2]){var P=.5*A,F=u[0]-g[0]>P?-A:g[0]-u[0]>P?A:0;F===0&&(F=u[0]-g[2]>P?-A:g[2]-u[0]>P?A:0),u[0]+=F}as(d,u)}function Up(u,d,g,A){for(var P=8192*Math.pow(2,A.z),F=[8192*A.x,8192*A.y],j=[],J=0,be=u;J<be.length;J+=1)for(var Ne=0,$e=be[J];Ne<$e.length;Ne+=1){var at=$e[Ne],Tt=[at.x+F[0],at.y+F[1]];Ph(Tt,d,g,P),j.push(Tt)}return j}function hh(u,d,g,A){for(var P,F=8192*Math.pow(2,A.z),j=[8192*A.x,8192*A.y],J=[],be=0,Ne=u;be<Ne.length;be+=1){for(var $e=[],at=0,Tt=Ne[be];at<Tt.length;at+=1){var Bt=Tt[at],dn=[Bt.x+j[0],Bt.y+j[1]];as(d,dn),$e.push(dn)}J.push($e)}if(d[2]-d[0]<=F/2){(P=d)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var yn=0,Gn=J;yn<Gn.length;yn+=1)for(var In=0,cr=Gn[yn];In<cr.length;In+=1)Ph(cr[In],d,g,F)}return J}gs.parse=function(u,d){if(u.length!==2)return d.error("Expected one argument.");var g=u[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");var A=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,hi);if(!A)return null;var P=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,hi);if(!P)return null;var F=null;return g.locale&&!(F=d.parse(g.locale,1,Ei))?null:new gs(A,P,F)},gs.prototype.evaluate=function(u){return new Cn(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},gs.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},gs.prototype.outputDefined=function(){return!1},gs.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var uu=function(u,d){this.type=hi,this.geojson=u,this.geometries=d};function Df(u){if(u instanceof ra&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof uu)return!1;var d=!0;return u.eachChild(function(g){d&&!Df(g)&&(d=!1)}),d}function Jc(u){if(u instanceof ra&&u.name==="feature-state")return!1;var d=!0;return u.eachChild(function(g){d&&!Jc(g)&&(d=!1)}),d}function cu(u,d){if(u instanceof ra&&d.indexOf(u.name)>=0)return!1;var g=!0;return u.eachChild(function(A){g&&!cu(A,d)&&(g=!1)}),g}uu.parse=function(u,d){if(u.length!==2)return d.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(Ji(u[1])){var g=u[1];if(g.type==="FeatureCollection")for(var A=0;A<g.features.length;++A){var P=g.features[A].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new uu(g,g.features[A].geometry)}else if(g.type==="Feature"){var F=g.geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new uu(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new uu(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")},uu.prototype.evaluate=function(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=Us(g.coordinates,P,F),J=Up(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var be=0,Ne=J;be<Ne.length;be+=1)if(!Lr(Ne[be],j))return!1}if(g.type==="MultiPolygon"){var $e=dl(g.coordinates,P,F),at=Up(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=at;Tt<Bt.length;Tt+=1)if(!Si(Bt[Tt],$e))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=Us(g.coordinates,P,F),J=hh(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var be=0,Ne=J;be<Ne.length;be+=1)if(!Hs(Ne[be],j))return!1}if(g.type==="MultiPolygon"){var $e=dl(g.coordinates,P,F),at=hh(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=at;Tt<Bt.length;Tt+=1)if(!Is(Bt[Tt],$e))return!1}return!0}(u,this.geometries)}return!1},uu.prototype.eachChild=function(){},uu.prototype.outputDefined=function(){return!0},uu.prototype.serialize=function(){return["within",this.geojson]};var Eu=function(u,d){this.type=d.type,this.name=u,this.boundExpression=d};Eu.parse=function(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");var g=u[1];return d.scope.has(g)?new Eu(g,d.scope.get(g)):d.error('Unknown variable "'+g+'". Make sure "'+g+'" has been bound in an enclosing "let" expression before using it.',1)},Eu.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},Eu.prototype.eachChild=function(){},Eu.prototype.outputDefined=function(){return!1},Eu.prototype.serialize=function(){return["var",this.name]};var ef=function(u,d,g,A,P){d===void 0&&(d=[]),A===void 0&&(A=new _i),P===void 0&&(P=[]),this.registry=u,this.path=d,this.key=d.map(function(F){return"["+F+"]"}).join(""),this.scope=A,this.errors=P,this.expectedType=g};function Lf(u,d){for(var g,A=u.length-1,P=0,F=A,j=0;P<=F;)if((g=u[j=Math.floor((P+F)/2)])<=d){if(j===A||d<u[j+1])return j;P=j+1}else{if(!(g>d))throw new Gr("Input is not a number.");F=j-1}return 0}ef.prototype.parse=function(u,d,g,A,P){return P===void 0&&(P={}),d?this.concat(d,g,A)._parse(u,P):this._parse(u,P)},ef.prototype._parse=function(u,d){function g(Ne,$e,at){return at==="assert"?new fi($e,[Ne]):at==="coerce"?new Ao($e,[Ne]):Ne}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var A=u[0];if(typeof A!="string")return this.error("Expression name must be a string, but found "+typeof A+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[A];if(P){var F=P.parse(u,this);if(!F)return null;if(this.expectedType){var j=this.expectedType,J=F.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||J.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||J.kind!=="value"&&J.kind!=="string"){if(this.checkSubtype(j,J))return null}else F=g(F,j,d.typeAnnotation||"coerce");else F=g(F,j,d.typeAnnotation||"assert")}if(!(F instanceof Ni)&&F.type.kind!=="resolvedImage"&&function Ne($e){if($e instanceof Eu)return Ne($e.boundExpression);if($e instanceof ra&&$e.name==="error"||$e instanceof gs||$e instanceof uu)return!1;var at=$e instanceof Ao||$e instanceof fi,Tt=!0;return $e.eachChild(function(Bt){Tt=at?Tt&&Ne(Bt):Tt&&Bt instanceof Ni}),!!Tt&&Df($e)&&cu($e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(F)){var be=new ya;try{F=new Ni(F.type,F.evaluate(be))}catch(Ne){return this.error(Ne.message),null}}return F}return this.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},ef.prototype.concat=function(u,d,g){var A=typeof u=="number"?this.path.concat(u):this.path,P=g?this.scope.concat(g):this.scope;return new ef(this.registry,A,d||null,P,this.errors)},ef.prototype.error=function(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];var A=""+this.key+d.map(function(P){return"["+P+"]"}).join("");this.errors.push(new Ur(A,u))},ef.prototype.checkSubtype=function(u,d){var g=Ut(u,d);return g&&this.error(g),g};var fu=function(u,d,g){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(var A=0,P=g;A<P.length;A+=1){var F=P[A],j=F[1];this.labels.push(F[0]),this.outputs.push(j)}};function Ds(u,d,g){return u*(1-g)+d*g}fu.parse=function(u,d){if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=[],P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(var F=1;F<u.length;F+=2){var j=F===1?-1/0:u[F],J=u[F+1],be=F,Ne=F+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(A.length&&A[A.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',be);var $e=d.parse(J,Ne,P);if(!$e)return null;P=P||$e.type,A.push([j,$e])}return new fu(P,g,A)},fu.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;return A>=d[P-1]?g[P-1].evaluate(u):g[Lf(d,A)].evaluate(u)},fu.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},fu.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},fu.prototype.serialize=function(){for(var u=["step",this.input.serialize()],d=0;d<this.labels.length;d++)d>0&&u.push(this.labels[d]),u.push(this.outputs[d].serialize());return u};var $u=Object.freeze({__proto__:null,number:Ds,color:function(u,d,g){return new gn(Ds(u.r,d.r,g),Ds(u.g,d.g,g),Ds(u.b,d.b,g),Ds(u.a,d.a,g))},array:function(u,d,g){return u.map(function(A,P){return Ds(A,d[P],g)})}}),tf=6/29*3*(6/29),_d=Math.PI/180,tp=180/Math.PI;function dh(u){return u>.008856451679035631?Math.pow(u,1/3):u/tf+4/29}function bd(u){return u>6/29?u*u*u:tf*(u-4/29)}function ph(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Ih(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Dh(u){var d=Ih(u.r),g=Ih(u.g),A=Ih(u.b),P=dh((.4124564*d+.3575761*g+.1804375*A)/.95047),F=dh((.2126729*d+.7151522*g+.072175*A)/1);return{l:116*F-16,a:500*(P-F),b:200*(F-dh((.0193339*d+.119192*g+.9503041*A)/1.08883)),alpha:u.a}}function xd(u){var d=(u.l+16)/116,g=isNaN(u.a)?d:d+u.a/500,A=isNaN(u.b)?d:d-u.b/200;return d=1*bd(d),g=.95047*bd(g),A=1.08883*bd(A),new gn(ph(3.2404542*g-1.5371385*d-.4985314*A),ph(-.969266*g+1.8760108*d+.041556*A),ph(.0556434*g-.2040259*d+1.0572252*A),u.alpha)}function c0(u,d,g){var A=d-u;return u+g*(A>180||A<-180?A-360*Math.round(A/360):A)}var nf={forward:Dh,reverse:xd,interpolate:function(u,d,g){return{l:Ds(u.l,d.l,g),a:Ds(u.a,d.a,g),b:Ds(u.b,d.b,g),alpha:Ds(u.alpha,d.alpha,g)}}},Fc={forward:function(u){var d=Dh(u),g=d.l,A=d.a,P=d.b,F=Math.atan2(P,A)*tp;return{h:F<0?F+360:F,c:Math.sqrt(A*A+P*P),l:g,alpha:u.a}},reverse:function(u){var d=u.h*_d,g=u.c;return xd({l:u.l,a:Math.cos(d)*g,b:Math.sin(d)*g,alpha:u.alpha})},interpolate:function(u,d,g){return{h:c0(u.h,d.h,g),c:Ds(u.c,d.c,g),l:Ds(u.l,d.l,g),alpha:Ds(u.alpha,d.alpha,g)}}},Ed=Object.freeze({__proto__:null,lab:nf,hcl:Fc}),Gl=function(u,d,g,A,P){this.type=u,this.operator=d,this.interpolation=g,this.input=A,this.labels=[],this.outputs=[];for(var F=0,j=P;F<j.length;F+=1){var J=j[F],be=J[1];this.labels.push(J[0]),this.outputs.push(be)}};function xc(u,d,g,A){var P=A-g,F=u-g;return P===0?0:d===1?F/P:(Math.pow(d,F)-1)/(Math.pow(d,P)-1)}Gl.interpolationFactor=function(u,d,g,A){var P=0;if(u.name==="exponential")P=xc(d,u.base,g,A);else if(u.name==="linear")P=xc(d,1,g,A);else if(u.name==="cubic-bezier"){var F=u.controlPoints;P=new ee(F[0],F[1],F[2],F[3]).solve(xc(d,1,g,A))}return P},Gl.parse=function(u,d){var g=u[0],A=u[1],P=u[2],F=u.slice(3);if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){var j=A[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:j}}else{if(A[0]!=="cubic-bezier")return d.error("Unknown interpolation type "+String(A[0]),1,0);var J=A.slice(1);if(J.length!==4||J.some(function(Gn){return typeof Gn!="number"||Gn<0||Gn>1}))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:J}}if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(!(P=d.parse(P,2,wr)))return null;var be=[],Ne=null;g==="interpolate-hcl"||g==="interpolate-lab"?Ne=ai:d.expectedType&&d.expectedType.kind!=="value"&&(Ne=d.expectedType);for(var $e=0;$e<F.length;$e+=2){var at=F[$e],Tt=F[$e+1],Bt=$e+3,dn=$e+4;if(typeof at!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(be.length&&be[be.length-1][0]>=at)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var yn=d.parse(Tt,dn,Ne);if(!yn)return null;Ne=Ne||yn.type,be.push([at,yn])}return Ne.kind==="number"||Ne.kind==="color"||Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number"?new Gl(Ne,g,A,P,be):d.error("Type "+Fe(Ne)+" is not interpolatable.")},Gl.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;if(A>=d[P-1])return g[P-1].evaluate(u);var F=Lf(d,A),j=Gl.interpolationFactor(this.interpolation,A,d[F],d[F+1]),J=g[F].evaluate(u),be=g[F+1].evaluate(u);return this.operator==="interpolate"?$u[this.type.kind.toLowerCase()](J,be,j):this.operator==="interpolate-hcl"?Fc.reverse(Fc.interpolate(Fc.forward(J),Fc.forward(be),j)):nf.reverse(nf.interpolate(nf.forward(J),nf.forward(be),j))},Gl.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},Gl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Gl.prototype.serialize=function(){var u;u=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var d=[this.operator,u,this.input.serialize()],g=0;g<this.labels.length;g++)d.push(this.labels[g],this.outputs[g].serialize());return d};var rf=function(u,d){this.type=u,this.args=d};rf.parse=function(u,d){if(u.length<2)return d.error("Expectected at least one argument.");var g=null,A=d.expectedType;A&&A.kind!=="value"&&(g=A);for(var P=[],F=0,j=u.slice(1);F<j.length;F+=1){var J=d.parse(j[F],1+P.length,g,void 0,{typeAnnotation:"omit"});if(!J)return null;g=g||J.type,P.push(J)}var be=A&&P.some(function(Ne){return Ut(A,Ne.type)});return new rf(be?xi:g,P)},rf.prototype.evaluate=function(u){for(var d,g=null,A=0,P=0,F=this.args;P<F.length&&(A++,(g=F[P].evaluate(u))&&g instanceof ei&&!g.available&&(d||(d=g.name),g=null,A===this.args.length&&(g=d)),g===null);P+=1);return g},rf.prototype.eachChild=function(u){this.args.forEach(u)},rf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},rf.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(d){u.push(d.serialize())}),u};var hu=function(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d};hu.prototype.evaluate=function(u){return this.result.evaluate(u)},hu.prototype.eachChild=function(u){for(var d=0,g=this.bindings;d<g.length;d+=1)u(g[d][1]);u(this.result)},hu.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var g=[],A=1;A<u.length-1;A+=2){var P=u[A];if(typeof P!="string")return d.error("Expected string, but found "+typeof P+" instead.",A);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);var F=d.parse(u[A+1],A+1);if(!F)return null;g.push([P,F])}var j=d.parse(u[u.length-1],u.length-1,d.expectedType,g);return j?new hu(g,j):null},hu.prototype.outputDefined=function(){return this.result.outputDefined()},hu.prototype.serialize=function(){for(var u=["let"],d=0,g=this.bindings;d<g.length;d+=1){var A=g[d];u.push(A[0],A[1].serialize())}return u.push(this.result.serialize()),u};var Bc=function(u,d,g){this.type=u,this.index=d,this.input=g};Bc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,wr),A=d.parse(u[2],2,$o(d.expectedType||xi));return g&&A?new Bc(A.type.itemType,g,A):null},Bc.prototype.evaluate=function(u){var d=this.index.evaluate(u),g=this.input.evaluate(u);if(d<0)throw new Gr("Array index out of bounds: "+d+" < 0.");if(d>=g.length)throw new Gr("Array index out of bounds: "+d+" > "+(g.length-1)+".");if(d!==Math.floor(d))throw new Gr("Array index must be an integer, but found "+d+" instead.");return g[d]},Bc.prototype.eachChild=function(u){u(this.index),u(this.input)},Bc.prototype.outputDefined=function(){return!1},Bc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var uc=function(u,d){this.type=hi,this.needle=u,this.haystack=d};uc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,xi);return g&&A?ln(g.type,[hi,Ei,wr,Ai,xi])?new uc(g,A):d.error("Expected first argument to be of type boolean, string, number or null, but found "+Fe(g.type)+" instead"):null},uc.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!g)return!1;if(!Nn(d,["boolean","string","number","null"]))throw new Gr("Expected first argument to be of type boolean, string, number or null, but found "+Fe(ti(d))+" instead.");if(!Nn(g,["string","array"]))throw new Gr("Expected second argument to be of type array or string, but found "+Fe(ti(g))+" instead.");return g.indexOf(d)>=0},uc.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},uc.prototype.outputDefined=function(){return!0},uc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var mf=function(u,d,g){this.type=wr,this.needle=u,this.haystack=d,this.fromIndex=g};mf.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,xi);if(!g||!A)return null;if(!ln(g.type,[hi,Ei,wr,Ai,xi]))return d.error("Expected first argument to be of type boolean, string, number or null, but found "+Fe(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new mf(g,A,P):null}return new mf(g,A)},mf.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!Nn(d,["boolean","string","number","null"]))throw new Gr("Expected first argument to be of type boolean, string, number or null, but found "+Fe(ti(d))+" instead.");if(!Nn(g,["string","array"]))throw new Gr("Expected second argument to be of type array or string, but found "+Fe(ti(g))+" instead.");if(this.fromIndex){var A=this.fromIndex.evaluate(u);return g.indexOf(d,A)}return g.indexOf(d)},mf.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},mf.prototype.outputDefined=function(){return!1},mf.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Fl=function(u,d,g,A,P,F){this.inputType=u,this.type=d,this.input=g,this.cases=A,this.outputs=P,this.otherwise=F};Fl.parse=function(u,d){if(u.length<5)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return d.error("Expected an even number of arguments.");var g,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(var P={},F=[],j=2;j<u.length-1;j+=2){var J=u[j],be=u[j+1];Array.isArray(J)||(J=[J]);var Ne=d.concat(j);if(J.length===0)return Ne.error("Expected at least one branch label.");for(var $e=0,at=J;$e<at.length;$e+=1){var Tt=at[$e];if(typeof Tt!="number"&&typeof Tt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof Tt=="number"&&Math.abs(Tt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Tt=="number"&&Math.floor(Tt)!==Tt)return Ne.error("Numeric branch labels must be integer values.");if(g){if(Ne.checkSubtype(g,ti(Tt)))return null}else g=ti(Tt);if(P[String(Tt)]!==void 0)return Ne.error("Branch labels must be unique.");P[String(Tt)]=F.length}var Bt=d.parse(be,j,A);if(!Bt)return null;A=A||Bt.type,F.push(Bt)}var dn=d.parse(u[1],1,xi);if(!dn)return null;var yn=d.parse(u[u.length-1],u.length-1,A);return yn?dn.type.kind!=="value"&&d.concat(1).checkSubtype(g,dn.type)?null:new Fl(g,A,dn,P,F,yn):null},Fl.prototype.evaluate=function(u){var d=this.input.evaluate(u);return(ti(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)},Fl.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},Fl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},Fl.prototype.serialize=function(){for(var u=this,d=["match",this.input.serialize()],g=[],A={},P=0,F=Object.keys(this.cases).sort();P<F.length;P+=1){var j=F[P];(at=A[this.cases[j]])===void 0?(A[this.cases[j]]=g.length,g.push([this.cases[j],[j]])):g[at][1].push(j)}for(var J=function(Bt){return u.inputType.kind==="number"?Number(Bt):Bt},be=0,Ne=g;be<Ne.length;be+=1){var $e=Ne[be],at=$e[0],Tt=$e[1];d.push(Tt.length===1?J(Tt[0]):Tt.map(J)),d.push(this.outputs[outputIndex$1].serialize())}return d.push(this.otherwise.serialize()),d};var of=function(u,d,g){this.type=u,this.branches=d,this.otherwise=g};of.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return d.error("Expected an odd number of arguments.");var g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);for(var A=[],P=1;P<u.length-1;P+=2){var F=d.parse(u[P],P,hi);if(!F)return null;var j=d.parse(u[P+1],P+1,g);if(!j)return null;A.push([F,j]),g=g||j.type}var J=d.parse(u[u.length-1],u.length-1,g);return J?new of(g,A,J):null},of.prototype.evaluate=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];if(A[0].evaluate(u))return P.evaluate(u)}return this.otherwise.evaluate(u)},of.prototype.eachChild=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];u(A[0]),u(P)}u(this.otherwise)},of.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},of.prototype.serialize=function(){var u=["case"];return this.eachChild(function(d){u.push(d.serialize())}),u};var gf=function(u,d,g,A){this.type=u,this.input=d,this.beginIndex=g,this.endIndex=A};function Sd(u,d){return u==="=="||u==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function wd(u,d,g,A){return A.compare(d,g)===0}function ys(u,d,g){var A=u!=="=="&&u!=="!=";return function(){function P(F,j,J){this.type=hi,this.lhs=F,this.rhs=j,this.collator=J,this.hasUntypedArgument=F.type.kind==="value"||j.type.kind==="value"}return P.parse=function(F,j){if(F.length!==3&&F.length!==4)return j.error("Expected two or three arguments.");var J=F[0],be=j.parse(F[1],1,xi);if(!be)return null;if(!Sd(J,be.type))return j.concat(1).error('"'+J+`" comparisons are not supported for type '`+Fe(be.type)+"'.");var Ne=j.parse(F[2],2,xi);if(!Ne)return null;if(!Sd(J,Ne.type))return j.concat(2).error('"'+J+`" comparisons are not supported for type '`+Fe(Ne.type)+"'.");if(be.type.kind!==Ne.type.kind&&be.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot compare types '"+Fe(be.type)+"' and '"+Fe(Ne.type)+"'.");A&&(be.type.kind==="value"&&Ne.type.kind!=="value"?be=new fi(Ne.type,[be]):be.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new fi(be.type,[Ne])));var $e=null;if(F.length===4){if(be.type.kind!=="string"&&Ne.type.kind!=="string"&&be.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!($e=j.parse(F[3],3,Qo)))return null}return new P(be,Ne,$e)},P.prototype.evaluate=function(F){var j=this.lhs.evaluate(F),J=this.rhs.evaluate(F);if(A&&this.hasUntypedArgument){var be=ti(j),Ne=ti(J);if(be.kind!==Ne.kind||be.kind!=="string"&&be.kind!=="number")throw new Gr('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+be.kind+", "+Ne.kind+") instead.")}if(this.collator&&!A&&this.hasUntypedArgument){var $e=ti(j),at=ti(J);if($e.kind!=="string"||at.kind!=="string")return d(F,j,J)}return this.collator?g(F,j,J,this.collator.evaluate(F)):d(F,j,J)},P.prototype.eachChild=function(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var F=[u];return this.eachChild(function(j){F.push(j.serialize())}),F},P}()}gf.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,xi),A=d.parse(u[2],2,wr);if(!g||!A)return null;if(!ln(g.type,[$o(xi),Ei,xi]))return d.error("Expected first argument to be of type array or string, but found "+Fe(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new gf(g.type,g,A,P):null}return new gf(g.type,g,A)},gf.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=this.beginIndex.evaluate(u);if(!Nn(d,["string","array"]))throw new Gr("Expected first argument to be of type array or string, but found "+Fe(ti(d))+" instead.");if(this.endIndex){var A=this.endIndex.evaluate(u);return d.slice(g,A)}return d.slice(g)},gf.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},gf.prototype.outputDefined=function(){return!1},gf.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var np=ys("==",function(u,d,g){return d===g},wd),Xf=ys("!=",function(u,d,g){return d!==g},function(u,d,g,A){return!wd(0,d,g,A)}),Lh=ys("<",function(u,d,g){return d<g},function(u,d,g,A){return A.compare(d,g)<0}),pl=ys(">",function(u,d,g){return d>g},function(u,d,g,A){return A.compare(d,g)>0}),Nh=ys("<=",function(u,d,g){return d<=g},function(u,d,g,A){return A.compare(d,g)<=0}),oe=ys(">=",function(u,d,g){return d>=g},function(u,d,g,A){return A.compare(d,g)>=0}),_e=function(u,d,g,A,P){this.type=Ei,this.number=u,this.locale=d,this.currency=g,this.minFractionDigits=A,this.maxFractionDigits=P};_e.parse=function(u,d){if(u.length!==3)return d.error("Expected two arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=u[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");var P=null;if(A.locale&&!(P=d.parse(A.locale,1,Ei)))return null;var F=null;if(A.currency&&!(F=d.parse(A.currency,1,Ei)))return null;var j=null;if(A["min-fraction-digits"]&&!(j=d.parse(A["min-fraction-digits"],1,wr)))return null;var J=null;return A["max-fraction-digits"]&&!(J=d.parse(A["max-fraction-digits"],1,wr))?null:new _e(g,P,F,j,J)},_e.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},_e.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var tt=function(u){this.type=wr,this.input=u};tt.parse=function(u,d){if(u.length!==2)return d.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error("Expected argument of type string or array, but found "+Fe(g.type)+" instead."):new tt(g):null},tt.prototype.evaluate=function(u){var d=this.input.evaluate(u);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Gr("Expected value to be of type string or array, but found "+Fe(ti(d))+" instead.")},tt.prototype.eachChild=function(u){u(this.input)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){var u=["length"];return this.eachChild(function(d){u.push(d.serialize())}),u};var cn={"==":np,"!=":Xf,">":pl,"<":Lh,">=":oe,"<=":Nh,array:fi,at:Bc,boolean:fi,case:of,coalesce:rf,collator:gs,format:Eo,image:Wi,in:uc,"index-of":mf,interpolate:Gl,"interpolate-hcl":Gl,"interpolate-lab":Gl,length:tt,let:hu,literal:Ni,match:Fl,number:fi,"number-format":_e,object:fi,slice:gf,step:fu,string:fi,"to-boolean":Ao,"to-color":Ao,"to-number":Ao,"to-string":Ao,var:Eu,within:uu};function En(u,d){var g=d[0],A=d[1],P=d[2],F=d[3];g=g.evaluate(u),A=A.evaluate(u),P=P.evaluate(u);var j=F?F.evaluate(u):1,J=ji(g,A,P,j);if(J)throw new Gr(J);return new gn(g/255*j,A/255*j,P/255*j,j)}function re(u,d){return u in d}function Nr(u,d){var g=d[u];return g===void 0?null:g}function Di(u){return{type:u}}function Vi(u){return{result:"success",value:u}}function xo(u){return{result:"error",value:u}}function yo(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function za(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function ba(u){return!!u.expression&&u.expression.interpolated}function go(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Ua(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function ja(u){return u}function xa(u,d,g){return u!==void 0?u:d!==void 0?d:g!==void 0?g:void 0}function Es(u,d,g,A,P){return xa(typeof g===P?A[g]:void 0,u.default,d.default)}function $a(u,d,g){if(go(g)!=="number")return xa(u.default,d.default);var A=u.stops.length;if(A===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[A-1][0])return u.stops[A-1][1];var P=Lf(u.stops.map(function(F){return F[0]}),g);return u.stops[P][1]}function Ea(u,d,g){var A=u.base!==void 0?u.base:1;if(go(g)!=="number")return xa(u.default,d.default);var P=u.stops.length;if(P===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[P-1][0])return u.stops[P-1][1];var F=Lf(u.stops.map(function(at){return at[0]}),g),j=function(at,Tt,Bt,dn){var yn=dn-Bt,Gn=at-Bt;return yn===0?0:Tt===1?Gn/yn:(Math.pow(Tt,Gn)-1)/(Math.pow(Tt,yn)-1)}(g,A,u.stops[F][0],u.stops[F+1][0]),J=u.stops[F][1],be=u.stops[F+1][1],Ne=$u[d.type]||ja;if(u.colorSpace&&u.colorSpace!=="rgb"){var $e=Ed[u.colorSpace];Ne=function(at,Tt){return $e.reverse($e.interpolate($e.forward(at),$e.forward(Tt),j))}}return typeof J.evaluate=="function"?{evaluate:function(){for(var at=[],Tt=arguments.length;Tt--;)at[Tt]=arguments[Tt];var Bt=J.evaluate.apply(void 0,at),dn=be.evaluate.apply(void 0,at);if(Bt!==void 0&&dn!==void 0)return Ne(Bt,dn,j)}}:Ne(J,be,j)}function Va(u,d,g){return d.type==="color"?g=gn.parse(g):d.type==="formatted"?g=hr.fromString(g.toString()):d.type==="resolvedImage"?g=ei.fromString(g.toString()):go(g)===d.type||d.type==="enum"&&d.values[g]||(g=void 0),xa(g,u.default,d.default)}ra.register(cn,{error:[{kind:"error"},[Ei],function(u,d){throw new Gr(d[0].evaluate(u))}],typeof:[Ei,[xi],function(u,d){return Fe(ti(d[0].evaluate(u)))}],"to-rgba":[$o(wr,4),[ai],function(u,d){return d[0].evaluate(u).toArray()}],rgb:[ai,[wr,wr,wr],En],rgba:[ai,[wr,wr,wr,wr],En],has:{type:hi,overloads:[[[Ei],function(u,d){return re(d[0].evaluate(u),u.properties())}],[[Ei,Io],function(u,d){var g=d[1];return re(d[0].evaluate(u),g.evaluate(u))}]]},get:{type:xi,overloads:[[[Ei],function(u,d){return Nr(d[0].evaluate(u),u.properties())}],[[Ei,Io],function(u,d){var g=d[1];return Nr(d[0].evaluate(u),g.evaluate(u))}]]},"feature-state":[xi,[Ei],function(u,d){return Nr(d[0].evaluate(u),u.featureState||{})}],properties:[Io,[],function(u){return u.properties()}],"geometry-type":[Ei,[],function(u){return u.geometryType()}],id:[xi,[],function(u){return u.id()}],zoom:[wr,[],function(u){return u.globals.zoom}],"heatmap-density":[wr,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[wr,[],function(u){return u.globals.lineProgress||0}],accumulated:[xi,[],function(u){return u.globals.accumulated===void 0?null:u.globals.accumulated}],"+":[wr,Di(wr),function(u,d){for(var g=0,A=0,P=d;A<P.length;A+=1)g+=P[A].evaluate(u);return g}],"*":[wr,Di(wr),function(u,d){for(var g=1,A=0,P=d;A<P.length;A+=1)g*=P[A].evaluate(u);return g}],"-":{type:wr,overloads:[[[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)-g.evaluate(u)}],[[wr],function(u,d){return-d[0].evaluate(u)}]]},"/":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)/g.evaluate(u)}],"%":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)%g.evaluate(u)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(u,d){var g=d[1];return Math.pow(d[0].evaluate(u),g.evaluate(u))}],sqrt:[wr,[wr],function(u,d){return Math.sqrt(d[0].evaluate(u))}],log10:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN10}],ln:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))}],log2:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN2}],sin:[wr,[wr],function(u,d){return Math.sin(d[0].evaluate(u))}],cos:[wr,[wr],function(u,d){return Math.cos(d[0].evaluate(u))}],tan:[wr,[wr],function(u,d){return Math.tan(d[0].evaluate(u))}],asin:[wr,[wr],function(u,d){return Math.asin(d[0].evaluate(u))}],acos:[wr,[wr],function(u,d){return Math.acos(d[0].evaluate(u))}],atan:[wr,[wr],function(u,d){return Math.atan(d[0].evaluate(u))}],min:[wr,Di(wr),function(u,d){return Math.min.apply(Math,d.map(function(g){return g.evaluate(u)}))}],max:[wr,Di(wr),function(u,d){return Math.max.apply(Math,d.map(function(g){return g.evaluate(u)}))}],abs:[wr,[wr],function(u,d){return Math.abs(d[0].evaluate(u))}],round:[wr,[wr],function(u,d){var g=d[0].evaluate(u);return g<0?-Math.round(-g):Math.round(g)}],floor:[wr,[wr],function(u,d){return Math.floor(d[0].evaluate(u))}],ceil:[wr,[wr],function(u,d){return Math.ceil(d[0].evaluate(u))}],"filter-==":[hi,[Ei,xi],function(u,d){var g=d[0],A=d[1];return u.properties()[g.value]===A.value}],"filter-id-==":[hi,[xi],function(u,d){var g=d[0];return u.id()===g.value}],"filter-type-==":[hi,[Ei],function(u,d){var g=d[0];return u.geometryType()===g.value}],"filter-<":[hi,[Ei,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<F}],"filter-id-<":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<P}],"filter->":[hi,[Ei,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>F}],"filter-id->":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>P}],"filter-<=":[hi,[Ei,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<=F}],"filter-id-<=":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<=P}],"filter->=":[hi,[Ei,xi],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>=F}],"filter-id->=":[hi,[xi],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>=P}],"filter-has":[hi,[xi],function(u,d){return d[0].value in u.properties()}],"filter-has-id":[hi,[],function(u){return u.id()!==null&&u.id()!==void 0}],"filter-type-in":[hi,[$o(Ei)],function(u,d){return d[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[hi,[$o(xi)],function(u,d){return d[0].value.indexOf(u.id())>=0}],"filter-in-small":[hi,[Ei,$o(xi)],function(u,d){var g=d[0];return d[1].value.indexOf(u.properties()[g.value])>=0}],"filter-in-large":[hi,[Ei,$o(xi)],function(u,d){var g=d[0],A=d[1];return function(P,F,j,J){for(;j<=J;){var be=j+J>>1;if(F[be]===P)return!0;F[be]>P?J=be-1:j=be+1}return!1}(u.properties()[g.value],A.value,0,A.value.length-1)}],all:{type:hi,overloads:[[[hi,hi],function(u,d){var g=d[1];return d[0].evaluate(u)&&g.evaluate(u)}],[Di(hi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(!A[g].evaluate(u))return!1;return!0}]]},any:{type:hi,overloads:[[[hi,hi],function(u,d){var g=d[1];return d[0].evaluate(u)||g.evaluate(u)}],[Di(hi),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(A[g].evaluate(u))return!0;return!1}]]},"!":[hi,[hi],function(u,d){return!d[0].evaluate(u)}],"is-supported-script":[hi,[Ei],function(u,d){var g=u.globals&&u.globals.isSupportedScript;return!g||g(d[0].evaluate(u))}],upcase:[Ei,[Ei],function(u,d){return d[0].evaluate(u).toUpperCase()}],downcase:[Ei,[Ei],function(u,d){return d[0].evaluate(u).toLowerCase()}],concat:[Ei,Di(xi),function(u,d){return d.map(function(g){return Gi(g.evaluate(u))}).join("")}],"resolved-locale":[Ei,[Qo],function(u,d){return d[0].evaluate(u).resolvedLocale()}]});var js=function(u,d){this.expression=u,this._warningHistory={},this._evaluator=new ya,this._defaultValue=d?function(g){return g.type==="color"&&Ua(g.default)?new gn(0,0,0,0):g.type==="color"?gn.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null};function Ql(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in cn}function Xs(u,d){var g=new ef(cn,[],d?function(P){var F={color:ai,string:Ei,number:wr,enum:Ei,boolean:hi,formatted:ga,resolvedImage:Po};return P.type==="array"?$o(F[P.value]||xi,P.length):F[P.type]}(d):void 0),A=g.parse(u,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?Vi(new js(A,d)):xo(g.errors)}js.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)},js.prototype.evaluate=function(u,d,g,A,P,F){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Gr("Expected value to be one of "+Object.keys(this._enumValues).map(function(J){return JSON.stringify(J)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(J){return this._warningHistory[J.message]||(this._warningHistory[J.message]=!0,typeof console!="undefined"&&console.warn(J.message)),this._defaultValue}};var cl=function(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!Jc(d.expression)};cl.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},cl.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)};var af=function(u,d,g,A){this.kind=u,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!Jc(d.expression),this.interpolationType=A};function Fh(u,d){if((u=Xs(u,d)).result==="error")return u;var g=u.value.expression,A=Df(g);if(!A&&!yo(d))return xo([new Ur("","data expressions not supported")]);var P=cu(g,["zoom"]);if(!P&&!za(d))return xo([new Ur("","zoom expressions not supported")]);var F=function j(J){var be=null;if(J instanceof hu)be=j(J.result);else if(J instanceof rf)for(var Ne=0,$e=J.args;Ne<$e.length&&!(be=j($e[Ne]));Ne+=1);else(J instanceof fu||J instanceof Gl)&&J.input instanceof ra&&J.input.name==="zoom"&&(be=J);return be instanceof Ur||J.eachChild(function(at){var Tt=j(at);Tt instanceof Ur?be=Tt:!be&&Tt?be=new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):be&&Tt&&be!==Tt&&(be=new Ur("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),be}(g);return F||P?F instanceof Ur?xo([F]):F instanceof Gl&&!ba(d)?xo([new Ur("",'"interpolate" expressions cannot be used with this property')]):Vi(F?new af(A?"camera":"composite",u.value,F.labels,F instanceof Gl?F.interpolation:void 0):new cl(A?"constant":"source",u.value)):xo([new Ur("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}af.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},af.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)},af.prototype.interpolationFactor=function(u,d,g){return this.interpolationType?Gl.interpolationFactor(this.interpolationType,u,d,g):0};var kc=function(u,d){this._parameters=u,this._specification=d,br(this,function g(A,P){var F,j,J,be=P.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",$e=Ne||!(Ne||A.property!==void 0),at=A.type||(ba(P)?"exponential":"interval");if(be&&((A=br({},A)).stops&&(A.stops=A.stops.map(function(fo){return[fo[0],gn.parse(fo[1])]})),A.default=gn.parse(A.default?A.default:P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Ed[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(at==="exponential")F=Ea;else if(at==="interval")F=$a;else if(at==="categorical"){F=Es,j=Object.create(null);for(var Tt=0,Bt=A.stops;Tt<Bt.length;Tt+=1){var dn=Bt[Tt];j[dn[0]]=dn[1]}J=typeof A.stops[0][0]}else{if(at!=="identity")throw new Error('Unknown function type "'+at+'"');F=Va}if(Ne){for(var yn={},Gn=[],In=0;In<A.stops.length;In++){var cr=A.stops[In],gr=cr[0].zoom;yn[gr]===void 0&&(yn[gr]={zoom:gr,type:A.type,property:A.property,default:A.default,stops:[]},Gn.push(gr)),yn[gr].stops.push([cr[0].value,cr[1]])}for(var Ir=[],Dr=0,Wr=Gn;Dr<Wr.length;Dr+=1){var Ii=Wr[Dr];Ir.push([yn[Ii].zoom,g(yn[Ii],P)])}var $i={name:"linear"};return{kind:"composite",interpolationType:$i,interpolationFactor:Gl.interpolationFactor.bind(void 0,$i),zoomStops:Ir.map(function(fo){return fo[0]}),evaluate:function(fo,Yo){var po=fo.zoom;return Ea({stops:Ir,base:A.base},P,po).evaluate(po,Yo)}}}if($e){var ko=at==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:ko,interpolationFactor:Gl.interpolationFactor.bind(void 0,ko),zoomStops:A.stops.map(function(fo){return fo[0]}),evaluate:function(fo){return F(A,P,fo.zoom,j,J)}}}return{kind:"source",evaluate:function(fo,Yo){var po=Yo&&Yo.properties?Yo.properties[A.property]:void 0;return po===void 0?xa(A.default,P.default):F(A,P,po,j,J)}}}(this._parameters,this._specification))};function du(u){var d=u.key,g=u.value,A=u.valueSpec||{},P=u.objectElementValidators||{},F=u.style,j=u.styleSpec,J=[],be=go(g);if(be!=="object")return[new Kt(d,g,"object expected, "+be+" found")];for(var Ne in g){var $e=Ne.split(".")[0],at=A[$e]||A["*"],Tt=void 0;if(P[$e])Tt=P[$e];else if(A[$e])Tt=La;else if(P["*"])Tt=P["*"];else{if(!A["*"]){J.push(new Kt(d,g[Ne],'unknown property "'+Ne+'"'));continue}Tt=La}J=J.concat(Tt({key:(d&&d+".")+Ne,value:g[Ne],valueSpec:at,style:F,styleSpec:j,object:g,objectKey:Ne},g))}for(var Bt in A)P[Bt]||A[Bt].required&&A[Bt].default===void 0&&g[Bt]===void 0&&J.push(new Kt(d,g,'missing required property "'+Bt+'"'));return J}function Td(u){var d=u.value,g=u.valueSpec,A=u.style,P=u.styleSpec,F=u.key,j=u.arrayElementValidator||La;if(go(d)!=="array")return[new Kt(F,d,"array expected, "+go(d)+" found")];if(g.length&&d.length!==g.length)return[new Kt(F,d,"array length "+g.length+" expected, length "+d.length+" found")];if(g["min-length"]&&d.length<g["min-length"])return[new Kt(F,d,"array length at least "+g["min-length"]+" expected, length "+d.length+" found")];var J={type:g.value,values:g.values};P.$version<7&&(J.function=g.function),go(g.value)==="object"&&(J=g.value);for(var be=[],Ne=0;Ne<d.length;Ne++)be=be.concat(j({array:d,arrayIndex:Ne,value:d[Ne],valueSpec:J,style:A,styleSpec:P,key:F+"["+Ne+"]"}));return be}function Ad(u){var d=u.key,g=u.value,A=u.valueSpec,P=go(g);return P==="number"&&g!=g&&(P="NaN"),P!=="number"?[new Kt(d,g,"number expected, "+P+" found")]:"minimum"in A&&g<A.minimum?[new Kt(d,g,g+" is less than the minimum value "+A.minimum)]:"maximum"in A&&g>A.maximum?[new Kt(d,g,g+" is greater than the maximum value "+A.maximum)]:[]}function yf(u){var d,g,A,P=u.valueSpec,F=Vr(u.value.type),j={},J=F!=="categorical"&&u.value.property===void 0,be=!J,Ne=go(u.value.stops)==="array"&&go(u.value.stops[0])==="array"&&go(u.value.stops[0][0])==="object",$e=du({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Bt){if(F==="identity")return[new Kt(Bt.key,Bt.value,'identity function may not have a "stops" property')];var dn=[],yn=Bt.value;return dn=dn.concat(Td({key:Bt.key,value:yn,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:at})),go(yn)==="array"&&yn.length===0&&dn.push(new Kt(Bt.key,yn,"array must have at least one stop")),dn},default:function(Bt){return La({key:Bt.key,value:Bt.value,valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec})}}});return F==="identity"&&J&&$e.push(new Kt(u.key,u.value,'missing required property "property"')),F==="identity"||u.value.stops||$e.push(new Kt(u.key,u.value,'missing required property "stops"')),F==="exponential"&&u.valueSpec.expression&&!ba(u.valueSpec)&&$e.push(new Kt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(be&&!yo(u.valueSpec)?$e.push(new Kt(u.key,u.value,"property functions not supported")):J&&!za(u.valueSpec)&&$e.push(new Kt(u.key,u.value,"zoom functions not supported"))),F!=="categorical"&&!Ne||u.value.property!==void 0||$e.push(new Kt(u.key,u.value,'"property" property is required')),$e;function at(Bt){var dn=[],yn=Bt.value,Gn=Bt.key;if(go(yn)!=="array")return[new Kt(Gn,yn,"array expected, "+go(yn)+" found")];if(yn.length!==2)return[new Kt(Gn,yn,"array length 2 expected, length "+yn.length+" found")];if(Ne){if(go(yn[0])!=="object")return[new Kt(Gn,yn,"object expected, "+go(yn[0])+" found")];if(yn[0].zoom===void 0)return[new Kt(Gn,yn,"object stop key must have zoom")];if(yn[0].value===void 0)return[new Kt(Gn,yn,"object stop key must have value")];if(A&&A>Vr(yn[0].zoom))return[new Kt(Gn,yn[0].zoom,"stop zoom values must appear in ascending order")];Vr(yn[0].zoom)!==A&&(A=Vr(yn[0].zoom),g=void 0,j={}),dn=dn.concat(du({key:Gn+"[0]",value:yn[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:Ad,value:Tt}}))}else dn=dn.concat(Tt({key:Gn+"[0]",value:yn[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},yn));return Ql(vr(yn[1]))?dn.concat([new Kt(Gn+"[1]",yn[1],"expressions are not allowed in function stops.")]):dn.concat(La({key:Gn+"[1]",value:yn[1],valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec}))}function Tt(Bt,dn){var yn=go(Bt.value),Gn=Vr(Bt.value),In=Bt.value!==null?Bt.value:dn;if(d){if(yn!==d)return[new Kt(Bt.key,In,yn+" stop domain type must match previous stop domain type "+d)]}else d=yn;if(yn!=="number"&&yn!=="string"&&yn!=="boolean")return[new Kt(Bt.key,In,"stop domain value must be a number, string, or boolean")];if(yn!=="number"&&F!=="categorical"){var cr="number expected, "+yn+" found";return yo(P)&&F===void 0&&(cr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Kt(Bt.key,In,cr)]}return F!=="categorical"||yn!=="number"||isFinite(Gn)&&Math.floor(Gn)===Gn?F!=="categorical"&&yn==="number"&&g!==void 0&&Gn<g?[new Kt(Bt.key,In,"stop domain values must appear in ascending order")]:(g=Gn,F==="categorical"&&Gn in j?[new Kt(Bt.key,In,"stop domain values must be unique")]:(j[Gn]=!0,[])):[new Kt(Bt.key,In,"integer expected, found "+Gn)]}}function Nf(u){var d=(u.expressionContext==="property"?Fh:Xs)(vr(u.value),u.valueSpec);if(d.result==="error")return d.value.map(function(A){return new Kt(""+u.key+A.key,u.value,A.message)});var g=d.value.expression||d.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!g.outputDefined())return[new Kt(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Jc(g))return[new Kt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Jc(g))return[new Kt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!cu(g,["zoom","feature-state"]))return[new Kt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Df(g))return[new Kt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sf(u){var d=u.key,g=u.value,A=u.valueSpec,P=[];return Array.isArray(A.values)?A.values.indexOf(Vr(g))===-1&&P.push(new Kt(d,g,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(g)+" found")):Object.keys(A.values).indexOf(Vr(g))===-1&&P.push(new Kt(d,g,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(g)+" found")),P}function vh(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var d=0,g=u.slice(1);d<g.length;d+=1){var A=g[d];if(!vh(A)&&typeof A!="boolean")return!1}return!0;default:return!0}}kc.deserialize=function(u){return new kc(u._parameters,u._specification)},kc.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var mh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ff(u){if(u==null)return{filter:function(){return!0},needGeometry:!1};vh(u)||(u=rp(u));var d=Xs(u,mh);if(d.result==="error")throw new Error(d.value.map(function(g){return g.key+": "+g.message}).join(", "));return{filter:function(g,A,P){return d.value.evaluate(g,A,{},P)},needGeometry:function g(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(g(A[P]))return!0;return!1}(u)}}function f0(u,d){return u<d?-1:u>d?1:0}function rp(u){if(!u)return!0;var d,g=u[0];return u.length<=1?g!=="any":g==="=="?jp(u[1],u[2],"=="):g==="!="?ip(jp(u[1],u[2],"==")):g==="<"||g===">"||g==="<="||g===">="?jp(u[1],u[2],g):g==="any"?(d=u.slice(1),["any"].concat(d.map(rp))):g==="all"?["all"].concat(u.slice(1).map(rp)):g==="none"?["all"].concat(u.slice(1).map(rp).map(ip)):g==="in"?_f(u[1],u.slice(2)):g==="!in"?ip(_f(u[1],u.slice(2))):g==="has"?h0(u[1]):g==="!has"?ip(h0(u[1])):g!=="within"||u}function jp(u,d,g){switch(u){case"$type":return["filter-type-"+g,d];case"$id":return["filter-id-"+g,d];default:return["filter-"+g,u,d]}}function _f(u,d){if(d.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(function(g){return typeof g!=typeof d[0]})?["filter-in-large",u,["literal",d.sort(f0)]]:["filter-in-small",u,["literal",d]]}}function h0(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function ip(u){return["!",u]}function Cd(u){return vh(vr(u.value))?Nf(br({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function d(g){var A=g.value,P=g.key;if(go(A)!=="array")return[new Kt(P,A,"array expected, "+go(A)+" found")];var F,j=g.styleSpec,J=[];if(A.length<1)return[new Kt(P,A,"filter array must have at least 1 element")];switch(J=J.concat(sf({key:P+"[0]",value:A[0],valueSpec:j.filter_operator,style:g.style,styleSpec:g.styleSpec})),Vr(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&Vr(A[1])==="$type"&&J.push(new Kt(P,A,'"$type" cannot be use with operator "'+A[0]+'"'));case"==":case"!=":A.length!==3&&J.push(new Kt(P,A,'filter array for operator "'+A[0]+'" must have 3 elements'));case"in":case"!in":A.length>=2&&(F=go(A[1]))!=="string"&&J.push(new Kt(P+"[1]",A[1],"string expected, "+F+" found"));for(var be=2;be<A.length;be++)F=go(A[be]),Vr(A[1])==="$type"?J=J.concat(sf({key:P+"["+be+"]",value:A[be],valueSpec:j.geometry_type,style:g.style,styleSpec:g.styleSpec})):F!=="string"&&F!=="number"&&F!=="boolean"&&J.push(new Kt(P+"["+be+"]",A[be],"string, number, or boolean expected, "+F+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<A.length;Ne++)J=J.concat(d({key:P+"["+Ne+"]",value:A[Ne],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":F=go(A[1]),A.length!==2?J.push(new Kt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="string"&&J.push(new Kt(P+"[1]",A[1],"string expected, "+F+" found"));break;case"within":F=go(A[1]),A.length!==2?J.push(new Kt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="object"&&J.push(new Kt(P+"[1]",A[1],"object expected, "+F+" found"))}return J}(u)}function bf(u,d){var g=u.key,A=u.style,P=u.styleSpec,F=u.value,j=u.objectKey,J=P[d+"_"+u.layerType];if(!J)return[];var be=j.match(/^(.*)-transition$/);if(d==="paint"&&be&&J[be[1]]&&J[be[1]].transition)return La({key:g,value:F,valueSpec:P.transition,style:A,styleSpec:P});var Ne,$e=u.valueSpec||J[j];if(!$e)return[new Kt(g,F,'unknown property "'+j+'"')];if(go(F)==="string"&&yo($e)&&!$e.tokens&&(Ne=/^{([^}]+)}$/.exec(F)))return[new Kt(g,F,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var at=[];return u.layerType==="symbol"&&(j==="text-field"&&A&&!A.glyphs&&at.push(new Kt(g,F,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Ua(vr(F))&&Vr(F.type)==="identity"&&at.push(new Kt(g,F,'"text-font" does not support identity functions'))),at.concat(La({key:u.key,value:F,valueSpec:$e,style:A,styleSpec:P,expressionContext:"property",propertyType:d,propertyKey:j}))}function Vp(u){return bf(u,"paint")}function gh(u){return bf(u,"layout")}function op(u){var d=[],g=u.value,A=u.key,P=u.style,F=u.styleSpec;g.type||g.ref||d.push(new Kt(A,g,'either "type" or "ref" is required'));var j,J=Vr(g.type),be=Vr(g.ref);if(g.id)for(var Ne=Vr(g.id),$e=0;$e<u.arrayIndex;$e++){var at=P.layers[$e];Vr(at.id)===Ne&&d.push(new Kt(A,g.id,'duplicate layer id "'+g.id+'", previously used at line '+at.id.__line__))}if("ref"in g)["type","source","source-layer","filter","layout"].forEach(function(dn){dn in g&&d.push(new Kt(A,g[dn],'"'+dn+'" is prohibited for ref layers'))}),P.layers.forEach(function(dn){Vr(dn.id)===be&&(j=dn)}),j?j.ref?d.push(new Kt(A,g.ref,"ref cannot reference another ref layer")):J=Vr(j.type):d.push(new Kt(A,g.ref,'ref layer "'+be+'" not found'));else if(J!=="background")if(g.source){var Tt=P.sources&&P.sources[g.source],Bt=Tt&&Vr(Tt.type);Tt?Bt==="vector"&&J==="raster"?d.push(new Kt(A,g.source,'layer "'+g.id+'" requires a raster source')):Bt==="raster"&&J!=="raster"?d.push(new Kt(A,g.source,'layer "'+g.id+'" requires a vector source')):Bt!=="vector"||g["source-layer"]?Bt==="raster-dem"&&J!=="hillshade"?d.push(new Kt(A,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):J!=="line"||!g.paint||!g.paint["line-gradient"]||Bt==="geojson"&&Tt.lineMetrics||d.push(new Kt(A,g,'layer "'+g.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):d.push(new Kt(A,g,'layer "'+g.id+'" must specify a "source-layer"')):d.push(new Kt(A,g.source,'source "'+g.source+'" not found'))}else d.push(new Kt(A,g,'missing required property "source"'));return d=d.concat(du({key:A,value:g,valueSpec:F.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return La({key:A+".type",value:g.type,valueSpec:F.layer.type,style:u.style,styleSpec:u.styleSpec,object:g,objectKey:"type"})},filter:Cd,layout:function(dn){return du({layer:g,key:dn.key,value:dn.value,style:dn.style,styleSpec:dn.styleSpec,objectElementValidators:{"*":function(yn){return gh(br({layerType:J},yn))}}})},paint:function(dn){return du({layer:g,key:dn.key,value:dn.value,style:dn.style,styleSpec:dn.styleSpec,objectElementValidators:{"*":function(yn){return Vp(br({layerType:J},yn))}}})}}}))}function Yf(u){var d=u.value,g=u.key,A=go(d);return A!=="string"?[new Kt(g,d,"string expected, "+A+" found")]:[]}var Ks={promoteId:function(u){var d=u.key,g=u.value;if(go(g)==="string")return Yf({key:d,value:g});var A=[];for(var P in g)A.push.apply(A,Yf({key:d+"."+P,value:g[P]}));return A}};function Od(u){var d=u.value,g=u.key,A=u.styleSpec,P=u.style;if(!d.type)return[new Kt(g,d,'"type" is required')];var F,j=Vr(d.type);switch(j){case"vector":case"raster":case"raster-dem":return du({key:g,value:d,valueSpec:A["source_"+j.replace("-","_")],style:u.style,styleSpec:A,objectElementValidators:Ks});case"geojson":if(F=du({key:g,value:d,valueSpec:A.source_geojson,style:P,styleSpec:A,objectElementValidators:Ks}),d.cluster)for(var J in d.clusterProperties){var be=d.clusterProperties[J],Ne=be[0],$e=typeof Ne=="string"?[Ne,["accumulated"],["get",J]]:Ne;F.push.apply(F,Nf({key:g+"."+J+".map",value:be[1],expressionContext:"cluster-map"})),F.push.apply(F,Nf({key:g+"."+J+".reduce",value:$e,expressionContext:"cluster-reduce"}))}return F;case"video":return du({key:g,value:d,valueSpec:A.source_video,style:P,styleSpec:A});case"image":return du({key:g,value:d,valueSpec:A.source_image,style:P,styleSpec:A});case"canvas":return[new Kt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sf({key:g+".type",value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:A})}}function xf(u){var d=u.value,g=u.styleSpec,A=g.light,P=u.style,F=[],j=go(d);if(d===void 0)return F;if(j!=="object")return F.concat([new Kt("light",d,"object expected, "+j+" found")]);for(var J in d){var be=J.match(/^(.*)-transition$/);F=F.concat(be&&A[be[1]]&&A[be[1]].transition?La({key:J,value:d[J],valueSpec:g.transition,style:P,styleSpec:g}):A[J]?La({key:J,value:d[J],valueSpec:A[J],style:P,styleSpec:g}):[new Kt(J,d[J],'unknown property "'+J+'"')])}return F}var $f={"*":function(){return[]},array:Td,boolean:function(u){var d=u.value,g=u.key,A=go(d);return A!=="boolean"?[new Kt(g,d,"boolean expected, "+A+" found")]:[]},number:Ad,color:function(u){var d=u.key,g=u.value,A=go(g);return A!=="string"?[new Kt(d,g,"color expected, "+A+" found")]:Fn(g)===null?[new Kt(d,g,'color expected, "'+g+'" found')]:[]},constants:er,enum:sf,filter:Cd,function:yf,layer:op,object:du,source:Od,light:xf,string:Yf,formatted:function(u){return Yf(u).length===0?[]:Nf(u)},resolvedImage:function(u){return Yf(u).length===0?[]:Nf(u)}};function La(u){var d=u.value,g=u.valueSpec,A=u.styleSpec;return g.expression&&Ua(Vr(d))?yf(u):g.expression&&Ql(vr(d))?Nf(u):g.type&&$f[g.type]?$f[g.type](u):du(br({},u,{valueSpec:g.type?A[g.type]:g}))}function fe(u){var d=u.value,g=u.key,A=Yf(u);return A.length||(d.indexOf("{fontstack}")===-1&&A.push(new Kt(g,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&A.push(new Kt(g,d,'"glyphs" url must include a "{range}" token'))),A}function Ge(u,d){d===void 0&&(d=Et);var g=[];return g=g.concat(La({key:"",value:u,valueSpec:d.$root,styleSpec:d,style:u,objectElementValidators:{glyphs:fe,"*":function(){return[]}}})),u.constants&&(g=g.concat(er({key:"constants",value:u.constants,style:u,styleSpec:d}))),xt(g)}function xt(u){return[].concat(u).sort(function(d,g){return d.line-g.line})}function Rn(u){return function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];return xt(u.apply(this,d))}}Ge.source=Rn(Od),Ge.light=Rn(xf),Ge.layer=Rn(op),Ge.filter=Rn(Cd),Ge.paintProperty=Rn(Vp),Ge.layoutProperty=Rn(gh);var ur=Ge,Fr=ur.light,ci=ur.paintProperty,Ri=ur.layoutProperty;function Wo(u,d){var g=!1;if(d&&d.length)for(var A=0,P=d;A<P.length;A+=1)u.fire(new Yt(new Error(P[A].message))),g=!0;return g}var Go=la;function la(u,d,g){var A=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(d=P[1])+2*(g=P[2]);for(var F=0;F<this.d*this.d;F++){var j=P[3+F],J=P[3+F+1];A.push(j===J?null:P.subarray(j,J))}var be=P[3+A.length+1];this.keys=P.subarray(P[3+A.length],be),this.bboxes=P.subarray(be),this.insert=this._insertReadonly}else{this.d=d+2*g;for(var Ne=0;Ne<this.d*this.d;Ne++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=g,this.scale=d/u,this.uid=0;var $e=g/d*u;this.min=-$e,this.max=u+$e}la.prototype.insert=function(u,d,g,A,P){this._forEachCell(d,g,A,P,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(A),this.bboxes.push(P)},la.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},la.prototype._insertCell=function(u,d,g,A,P,F){this.cells[P].push(F)},la.prototype.query=function(u,d,g,A,P){var F=this.min,j=this.max;if(u<=F&&d<=F&&j<=g&&j<=A&&!P)return Array.prototype.slice.call(this.keys);var J=[];return this._forEachCell(u,d,g,A,this._queryCell,J,{},P),J},la.prototype._queryCell=function(u,d,g,A,P,F,j,J){var be=this.cells[P];if(be!==null)for(var Ne=this.keys,$e=this.bboxes,at=0;at<be.length;at++){var Tt=be[at];if(j[Tt]===void 0){var Bt=4*Tt;(J?J($e[Bt+0],$e[Bt+1],$e[Bt+2],$e[Bt+3]):u<=$e[Bt+2]&&d<=$e[Bt+3]&&g>=$e[Bt+0]&&A>=$e[Bt+1])?(j[Tt]=!0,F.push(Ne[Tt])):j[Tt]=!1}}},la.prototype._forEachCell=function(u,d,g,A,P,F,j,J){for(var be=this._convertToCellCoord(u),Ne=this._convertToCellCoord(d),$e=this._convertToCellCoord(g),at=this._convertToCellCoord(A),Tt=be;Tt<=$e;Tt++)for(var Bt=Ne;Bt<=at;Bt++){var dn=this.d*Bt+Tt;if((!J||J(this._convertFromCellCoord(Tt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Tt+1),this._convertFromCellCoord(Bt+1)))&&P.call(this,u,d,g,A,dn,F,j,J))return}},la.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},la.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},la.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,d=3+this.cells.length+1+1,g=0,A=0;A<this.cells.length;A++)g+=this.cells[A].length;var P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var F=d,j=0;j<u.length;j++){var J=u[j];P[3+j]=F,P.set(J,F),F+=J.length}return P[3+u.length]=F,P.set(this.keys,F),P[3+u.length+1]=F+=this.keys.length,P.set(this.bboxes,F),F+=this.bboxes.length,P.buffer};var ol=ae.ImageData,Al=ae.ImageBitmap,Ss={};function eo(u,d,g){g===void 0&&(g={}),Object.defineProperty(d,"_classRegistryKey",{value:u,writeable:!1}),Ss[u]={klass:d,omit:g.omit||[],shallow:g.shallow||[]}}for(var Bl in eo("Object",Object),Go.serialize=function(u,d){var g=u.toArrayBuffer();return d&&d.push(g),{buffer:g}},Go.deserialize=function(u){return new Go(u.buffer)},eo("Grid",Go),eo("Color",gn),eo("Error",Error),eo("ResolvedImage",ei),eo("StylePropertyFunction",kc),eo("StyleExpression",js,{omit:["_evaluator"]}),eo("ZoomDependentExpression",af),eo("ZoomConstantExpression",cl),eo("CompoundExpression",ra,{omit:["_evaluate"]}),cn)cn[Bl]._classRegistryKey||eo("Expression_"+Bl,cn[Bl]);function yh(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Bh(u){return Al&&u instanceof Al}function qa(u,d){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(yh(u)||Bh(u))return d&&d.push(u),u;if(ArrayBuffer.isView(u)){var g=u;return d&&d.push(g.buffer),g}if(u instanceof ol)return d&&d.push(u.data.buffer),u;if(Array.isArray(u)){for(var A=[],P=0,F=u;P<F.length;P+=1)A.push(qa(F[P],d));return A}if(typeof u=="object"){var j=u.constructor,J=j._classRegistryKey;if(!J)throw new Error("can't serialize object of unregistered class");var be=j.serialize?j.serialize(u,d):{};if(!j.serialize){for(var Ne in u)if(u.hasOwnProperty(Ne)&&!(Ss[J].omit.indexOf(Ne)>=0)){var $e=u[Ne];be[Ne]=Ss[J].shallow.indexOf(Ne)>=0?$e:qa($e,d)}u instanceof Error&&(be.message=u.message)}if(be.$name)throw new Error("$name property is reserved for worker serialization logic.");return J!=="Object"&&(be.$name=J),be}throw new Error("can't serialize object of type "+typeof u)}function Ls(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||yh(u)||Bh(u)||ArrayBuffer.isView(u)||u instanceof ol)return u;if(Array.isArray(u))return u.map(Ls);if(typeof u=="object"){var d=u.$name||"Object",g=Ss[d].klass;if(!g)throw new Error("can't deserialize unregistered class "+d);if(g.deserialize)return g.deserialize(u);for(var A=Object.create(g.prototype),P=0,F=Object.keys(u);P<F.length;P+=1){var j=F[P];if(j!=="$name"){var J=u[j];A[j]=Ss[d].shallow.indexOf(j)>=0?J:Ls(J)}}return A}throw new Error("can't deserialize object of type "+typeof u)}var lf=function(){this.first=!0};lf.prototype.update=function(u,d){var g=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=g,!0))};var Fi={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function Ef(u){for(var d=0,g=u;d<g.length;d+=1)if(Md(g[d].charCodeAt(0)))return!0;return!1}function Md(u){return!(u!==746&&u!==747&&(u<4352||!(Fi["Bopomofo Extended"](u)||Fi.Bopomofo(u)||Fi["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Fi["CJK Compatibility Ideographs"](u)||Fi["CJK Compatibility"](u)||Fi["CJK Radicals Supplement"](u)||Fi["CJK Strokes"](u)||!(!Fi["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Fi["CJK Unified Ideographs Extension A"](u)||Fi["CJK Unified Ideographs"](u)||Fi["Enclosed CJK Letters and Months"](u)||Fi["Hangul Compatibility Jamo"](u)||Fi["Hangul Jamo Extended-A"](u)||Fi["Hangul Jamo Extended-B"](u)||Fi["Hangul Jamo"](u)||Fi["Hangul Syllables"](u)||Fi.Hiragana(u)||Fi["Ideographic Description Characters"](u)||Fi.Kanbun(u)||Fi["Kangxi Radicals"](u)||Fi["Katakana Phonetic Extensions"](u)||Fi.Katakana(u)&&u!==12540||!(!Fi["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Fi["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Fi["Unified Canadian Aboriginal Syllabics"](u)||Fi["Unified Canadian Aboriginal Syllabics Extended"](u)||Fi["Vertical Forms"](u)||Fi["Yijing Hexagram Symbols"](u)||Fi["Yi Syllables"](u)||Fi["Yi Radicals"](u))))}function _h(u){return!(Md(u)||function(d){return!!(Fi["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||Fi["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||Fi["Letterlike Symbols"](d)||Fi["Number Forms"](d)||Fi["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||Fi["Control Pictures"](d)&&d!==9251||Fi["Optical Character Recognition"](d)||Fi["Enclosed Alphanumerics"](d)||Fi["Geometric Shapes"](d)||Fi["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||Fi["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||Fi["CJK Symbols and Punctuation"](d)||Fi.Katakana(d)||Fi["Private Use Area"](d)||Fi["CJK Compatibility Forms"](d)||Fi["Small Form Variants"](d)||Fi["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(u))}function Sf(u){return u>=1424&&u<=2303||Fi["Arabic Presentation Forms-A"](u)||Fi["Arabic Presentation Forms-B"](u)}function cc(u,d){return!(!d&&Sf(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Fi.Khmer(u))}function d0(u){for(var d=0,g=u;d<g.length;d+=1)if(Sf(g[d].charCodeAt(0)))return!0;return!1}var bh=null,qu="unavailable",qf=null,p0=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(qu="error"),bh&&bh(u)};function Rd(){v0.fire(new At("pluginStateChange",{pluginStatus:qu,pluginURL:qf}))}var v0=new hn,rv=function(){return qu},fc=function(){if(qu!=="deferred"||!qf)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qu="loading",Rd(),qf&&_r({url:qf},function(u){u?p0(u):(qu="loaded",Rd())})},zc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qu==="loaded"||zc.applyArabicShaping!=null},isLoading:function(){return qu==="loading"},setState:function(u){qu=u.pluginStatus,qf=u.pluginURL},isParsed:function(){return zc.applyArabicShaping!=null&&zc.processBidirectionalText!=null&&zc.processStyledBidirectionalText!=null},getPluginURL:function(){return qf}},wa=function(u,d){this.zoom=u,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new lf,this.transition={})};wa.prototype.isSupportedScript=function(u){return function(d,g){for(var A=0,P=d;A<P.length;A+=1)if(!cc(P[A].charCodeAt(0),g))return!1;return!0}(u,zc.isLoaded())},wa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},wa.prototype.getCrossfadeParameters=function(){var u=this.zoom,d=u-Math.floor(u),g=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}};var hc=function(u,d){this.property=u,this.value=d,this.expression=function(g,A){if(Ua(g))return new kc(g,A);if(Ql(g)){var P=Fh(g,A);if(P.result==="error")throw new Error(P.value.map(function(j){return j.key+": "+j.message}).join(", "));return P.value}var F=g;return typeof g=="string"&&A.type==="color"&&(F=gn.parse(g)),{kind:"constant",evaluate:function(){return F}}}(d===void 0?u.specification.default:d,u.specification)};hc.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},hc.prototype.possiblyEvaluate=function(u,d,g){return this.property.possiblyEvaluate(this,u,d,g)};var uf=function(u){this.property=u,this.value=new hc(u,void 0)};uf.prototype.transitioned=function(u,d){return new kh(this.property,this.value,d,le({},u.transition,this.transition),u.now)},uf.prototype.untransitioned=function(){return new kh(this.property,this.value,null,{},0)};var Su=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};Su.prototype.getValue=function(u){return Ae(this._values[u].value.value)},Su.prototype.setValue=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new uf(this._values[u].property)),this._values[u].value=new hc(this._values[u].property,d===null?void 0:Ae(d))},Su.prototype.getTransition=function(u){return Ae(this._values[u].transition)},Su.prototype.setTransition=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new uf(this._values[u].property)),this._values[u].transition=Ae(d)||void 0},Su.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P);var F=this.getTransition(A);F!==void 0&&(u[A+"-transition"]=F)}return u},Su.prototype.transitioned=function(u,d){for(var g=new Jl(this._properties),A=0,P=Object.keys(this._values);A<P.length;A+=1){var F=P[A];g._values[F]=this._values[F].transitioned(u,d._values[F])}return g},Su.prototype.untransitioned=function(){for(var u=new Jl(this._properties),d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d];u._values[A]=this._values[A].untransitioned()}return u};var kh=function(u,d,g,A,P){this.property=u,this.value=d,this.begin=P+A.delay||0,this.end=this.begin+A.duration||0,u.specification.transition&&(A.delay||A.duration)&&(this.prior=g)};kh.prototype.possiblyEvaluate=function(u,d,g){var A=u.now||0,P=this.value.possiblyEvaluate(u,d,g),F=this.prior;if(F){if(A>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(A<this.begin)return F.possiblyEvaluate(u,d,g);var j=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,d,g),P,function(J){if(J<=0)return 0;if(J>=1)return 1;var be=J*J,Ne=be*J;return 4*(J<.5?Ne:3*(J-be)+Ne-.75)}(j))}return P};var Jl=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};Jl.prototype.possiblyEvaluate=function(u,d,g){for(var A=new ap(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A},Jl.prototype.hasTransition=function(){for(var u=0,d=Object.keys(this._values);u<d.length;u+=1)if(this._values[d[u]].prior)return!0;return!1};var Vu=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};Vu.prototype.getValue=function(u){return Ae(this._values[u].value)},Vu.prototype.setValue=function(u,d){this._values[u]=new hc(this._values[u].property,d===null?void 0:Ae(d))},Vu.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P)}return u},Vu.prototype.possiblyEvaluate=function(u,d,g){for(var A=new ap(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A};var Ku=function(u,d,g){this.property=u,this.value=d,this.parameters=g};Ku.prototype.isConstant=function(){return this.value.kind==="constant"},Ku.prototype.constantOr=function(u){return this.value.kind==="constant"?this.value.value:u},Ku.prototype.evaluate=function(u,d,g,A){return this.property.evaluate(this.value,this.parameters,u,d,g,A)};var ap=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};ap.prototype.get=function(u){return this._values[u]};var No=function(u){this.specification=u};No.prototype.possiblyEvaluate=function(u,d){return u.expression.evaluate(d)},No.prototype.interpolate=function(u,d,g){var A=$u[this.specification.type];return A?A(u,d,g):u};var To=function(u,d){this.specification=u,this.overrides=d};To.prototype.possiblyEvaluate=function(u,d,g,A){return new Ku(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},g,A)}:u.expression,d)},To.prototype.interpolate=function(u,d,g){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new Ku(this,{kind:"constant",value:void 0},u.parameters);var A=$u[this.specification.type];return A?new Ku(this,{kind:"constant",value:A(u.value.value,d.value.value,g)},u.parameters):u},To.prototype.evaluate=function(u,d,g,A,P,F){return u.kind==="constant"?u.value:u.evaluate(d,g,A,P,F)};var eu=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A,P,F){if(g.value===void 0)return new Ku(this,{kind:"constant",value:void 0},A);if(g.expression.kind==="constant"){var j=g.expression.evaluate(A,null,{},P,F),J=g.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,be=this._calculate(J,J,J,A);return new Ku(this,{kind:"constant",value:be},A)}if(g.expression.kind==="camera"){var Ne=this._calculate(g.expression.evaluate({zoom:A.zoom-1}),g.expression.evaluate({zoom:A.zoom}),g.expression.evaluate({zoom:A.zoom+1}),A);return new Ku(this,{kind:"constant",value:Ne},A)}return new Ku(this,g.expression,A)},d.prototype.evaluate=function(g,A,P,F,j,J){if(g.kind==="source"){var be=g.evaluate(A,P,F,j,J);return this._calculate(be,be,be,A)}return g.kind==="composite"?this._calculate(g.evaluate({zoom:Math.floor(A.zoom)-1},P,F),g.evaluate({zoom:Math.floor(A.zoom)},P,F),g.evaluate({zoom:Math.floor(A.zoom)+1},P,F),A):g.value},d.prototype._calculate=function(g,A,P,F){return F.zoom>F.zoomHistory.lastIntegerZoom?{from:g,to:A}:{from:P,to:A}},d.prototype.interpolate=function(g){return g},d}(To),Qu=function(u){this.specification=u};Qu.prototype.possiblyEvaluate=function(u,d,g,A){if(u.value!==void 0){if(u.expression.kind==="constant"){var P=u.expression.evaluate(d,null,{},g,A);return this._calculate(P,P,P,d)}return this._calculate(u.expression.evaluate(new wa(Math.floor(d.zoom-1),d)),u.expression.evaluate(new wa(Math.floor(d.zoom),d)),u.expression.evaluate(new wa(Math.floor(d.zoom+1),d)),d)}},Qu.prototype._calculate=function(u,d,g,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:g,to:d}},Qu.prototype.interpolate=function(u){return u};var Ju=function(u){this.specification=u};Ju.prototype.possiblyEvaluate=function(u,d,g,A){return!!u.expression.evaluate(d,null,{},g,A)},Ju.prototype.interpolate=function(){return!1};var vl=function(u){for(var d in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var g=u[d];g.specification.overridable&&this.overridableProperties.push(d);var A=this.defaultPropertyValues[d]=new hc(g,void 0),P=this.defaultTransitionablePropertyValues[d]=new uf(g);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}};eo("DataDrivenProperty",To),eo("DataConstantProperty",No),eo("CrossFadedDataDrivenProperty",eu),eo("CrossFadedProperty",Qu),eo("ColorRampProperty",Ju);var Ec=function(u){function d(g,A){if(u.call(this),this.id=g.id,this.type=g.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},g.type!=="custom"&&(this.metadata=(g=g).metadata,this.minzoom=g.minzoom,this.maxzoom=g.maxzoom,g.type!=="background"&&(this.source=g.source,this.sourceLayer=g["source-layer"],this.filter=g.filter),A.layout&&(this._unevaluatedLayout=new Vu(A.layout)),A.paint)){for(var P in this._transitionablePaint=new Su(A.paint),g.paint)this.setPaintProperty(P,g.paint[P],{validate:!1});for(var F in g.layout)this.setLayoutProperty(F,g.layout[F],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ap(A.paint)}}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},d.prototype.getLayoutProperty=function(g){return g==="visibility"?this.visibility:this._unevaluatedLayout.getValue(g)},d.prototype.setLayoutProperty=function(g,A,P){P===void 0&&(P={}),A!=null&&this._validate(Ri,"layers."+this.id+".layout."+g,g,A,P)||(g!=="visibility"?this._unevaluatedLayout.setValue(g,A):this.visibility=A)},d.prototype.getPaintProperty=function(g){return pt(g,"-transition")?this._transitionablePaint.getTransition(g.slice(0,-11)):this._transitionablePaint.getValue(g)},d.prototype.setPaintProperty=function(g,A,P){if(P===void 0&&(P={}),A!=null&&this._validate(ci,"layers."+this.id+".paint."+g,g,A,P))return!1;if(pt(g,"-transition"))return this._transitionablePaint.setTransition(g.slice(0,-11),A||void 0),!1;var F=this._transitionablePaint._values[g],j=F.property.specification["property-type"]==="cross-faded-data-driven",J=F.value.isDataDriven(),be=F.value;this._transitionablePaint.setValue(g,A),this._handleSpecialPaintPropertyUpdate(g);var Ne=this._transitionablePaint._values[g].value;return Ne.isDataDriven()||J||j||this._handleOverridablePaintPropertyUpdate(g,be,Ne)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!1},d.prototype.isHidden=function(g){return!!(this.minzoom&&g<this.minzoom)||!!(this.maxzoom&&g>=this.maxzoom)||this.visibility==="none"},d.prototype.updateTransitions=function(g){this._transitioningPaint=this._transitionablePaint.transitioned(g,this._transitioningPaint)},d.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},d.prototype.recalculate=function(g,A){g.getCrossfadeParameters&&(this._crossfadeParameters=g.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(g,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(g,void 0,A)},d.prototype.serialize=function(){var g={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(g.layout=g.layout||{},g.layout.visibility=this.visibility),Me(g,function(A,P){return!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length)})},d.prototype._validate=function(g,A,P,F,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Wo(this,g.call(ur,{key:A,layerType:this.type,objectKey:P,value:F,styleSpec:Et,style:{glyphs:!0,sprite:!0}}))},d.prototype.is3D=function(){return!1},d.prototype.isTileClipped=function(){return!1},d.prototype.hasOffscreenPass=function(){return!1},d.prototype.resize=function(){},d.prototype.isStateDependent=function(){for(var g in this.paint._values){var A=this.paint.get(g);if(A instanceof Ku&&yo(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1},d}(hn),Kf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Pd=function(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Cs=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wu(u,d){d===void 0&&(d=1);var g=0,A=0;return{members:u.map(function(P){var F=Kf[P.type].BYTES_PER_ELEMENT,j=g=m0(g,Math.max(d,F)),J=P.components||1;return A=Math.max(A,F),g+=F*J,{name:P.name,type:P.type,components:J,offset:j}}),size:m0(g,Math.max(A,d)),alignment:d}}function m0(u,d){return Math.ceil(u/d)*d}Cs.serialize=function(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},Cs.deserialize=function(u){var d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d},Cs.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Cs.prototype.clear=function(){this.length=0},Cs.prototype.resize=function(u){this.reserve(u),this.length=u},Cs.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}},Cs.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.int16[F+0]=A,this.int16[F+1]=P,g},d}(Cs);zh.prototype.bytesPerElement=4,eo("StructArrayLayout2i4",zh);var sp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var J=4*g;return this.int16[J+0]=A,this.int16[J+1]=P,this.int16[J+2]=F,this.int16[J+3]=j,g},d}(Cs);sp.prototype.bytesPerElement=8,eo("StructArrayLayout4i8",sp);var xh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,F,j,J)},d.prototype.emplace=function(g,A,P,F,j,J,be){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=J,this.int16[Ne+5]=be,g},d}(Cs);xh.prototype.bytesPerElement=12,eo("StructArrayLayout2i4i12",xh);var ec=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,F,j,J)},d.prototype.emplace=function(g,A,P,F,j,J,be){var Ne=4*g,$e=8*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.uint8[$e+4]=F,this.uint8[$e+5]=j,this.uint8[$e+6]=J,this.uint8[$e+7]=be,g},d}(Cs);ec.prototype.bytesPerElement=8,eo("StructArrayLayout2i4ub8",ec);var lp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.float32[F+0]=A,this.float32[F+1]=P,g},d}(Cs);lp.prototype.bytesPerElement=8,eo("StructArrayLayout2f8",lp);var Sc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J,be,Ne,$e,at){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,g,A,P,F,j,J,be,Ne,$e,at)},d.prototype.emplace=function(g,A,P,F,j,J,be,Ne,$e,at,Tt){var Bt=10*g;return this.uint16[Bt+0]=A,this.uint16[Bt+1]=P,this.uint16[Bt+2]=F,this.uint16[Bt+3]=j,this.uint16[Bt+4]=J,this.uint16[Bt+5]=be,this.uint16[Bt+6]=Ne,this.uint16[Bt+7]=$e,this.uint16[Bt+8]=at,this.uint16[Bt+9]=Tt,g},d}(Cs);Sc.prototype.bytesPerElement=20,eo("StructArrayLayout10ui20",Sc);var Hp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt){var dn=this.length;return this.resize(dn+1),this.emplace(dn,g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt)},d.prototype.emplace=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn){var yn=12*g;return this.int16[yn+0]=A,this.int16[yn+1]=P,this.int16[yn+2]=F,this.int16[yn+3]=j,this.uint16[yn+4]=J,this.uint16[yn+5]=be,this.uint16[yn+6]=Ne,this.uint16[yn+7]=$e,this.int16[yn+8]=at,this.int16[yn+9]=Tt,this.int16[yn+10]=Bt,this.int16[yn+11]=dn,g},d}(Cs);Hp.prototype.bytesPerElement=24,eo("StructArrayLayout4i4ui4i24",Hp);var Uc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.float32[j+0]=A,this.float32[j+1]=P,this.float32[j+2]=F,g},d}(Cs);Uc.prototype.bytesPerElement=12,eo("StructArrayLayout3f12",Uc);var Id=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint32[1*g+0]=A,g},d}(Cs);Id.prototype.bytesPerElement=4,eo("StructArrayLayout1ul4",Id);var g0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J,be,Ne,$e){var at=this.length;return this.resize(at+1),this.emplace(at,g,A,P,F,j,J,be,Ne,$e)},d.prototype.emplace=function(g,A,P,F,j,J,be,Ne,$e,at){var Tt=10*g,Bt=5*g;return this.int16[Tt+0]=A,this.int16[Tt+1]=P,this.int16[Tt+2]=F,this.int16[Tt+3]=j,this.int16[Tt+4]=J,this.int16[Tt+5]=be,this.uint32[Bt+3]=Ne,this.uint16[Tt+8]=$e,this.uint16[Tt+9]=at,g},d}(Cs);g0.prototype.bytesPerElement=20,eo("StructArrayLayout6i1ul2ui20",g0);var Eh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J){var be=this.length;return this.resize(be+1),this.emplace(be,g,A,P,F,j,J)},d.prototype.emplace=function(g,A,P,F,j,J,be){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=J,this.int16[Ne+5]=be,g},d}(Cs);Eh.prototype.bytesPerElement=12,eo("StructArrayLayout2i2i2i12",Eh);var Uh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j){var J=this.length;return this.resize(J+1),this.emplace(J,g,A,P,F,j)},d.prototype.emplace=function(g,A,P,F,j,J){var be=4*g,Ne=8*g;return this.float32[be+0]=A,this.float32[be+1]=P,this.float32[be+2]=F,this.int16[Ne+6]=j,this.int16[Ne+7]=J,g},d}(Cs);Uh.prototype.bytesPerElement=16,eo("StructArrayLayout2f1f2i16",Uh);var y0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var J=12*g,be=3*g;return this.uint8[J+0]=A,this.uint8[J+1]=P,this.float32[be+1]=F,this.float32[be+2]=j,g},d}(Cs);y0.prototype.bytesPerElement=12,eo("StructArrayLayout2ub2f12",y0);var Bf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.uint16[j+0]=A,this.uint16[j+1]=P,this.uint16[j+2]=F,g},d}(Cs);Bf.prototype.bytesPerElement=6,eo("StructArrayLayout3ui6",Bf);var kf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr){var gr=this.length;return this.resize(gr+1),this.emplace(gr,g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr)},d.prototype.emplace=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr,gr){var Ir=24*g,Dr=12*g,Wr=48*g;return this.int16[Ir+0]=A,this.int16[Ir+1]=P,this.uint16[Ir+2]=F,this.uint16[Ir+3]=j,this.uint32[Dr+2]=J,this.uint32[Dr+3]=be,this.uint32[Dr+4]=Ne,this.uint16[Ir+10]=$e,this.uint16[Ir+11]=at,this.uint16[Ir+12]=Tt,this.float32[Dr+7]=Bt,this.float32[Dr+8]=dn,this.uint8[Wr+36]=yn,this.uint8[Wr+37]=Gn,this.uint8[Wr+38]=In,this.uint32[Dr+10]=cr,this.int16[Ir+22]=gr,g},d}(Cs);kf.prototype.bytesPerElement=48,eo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kf);var _0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr,gr,Ir,Dr,Wr,Ii,$i,ko,fo,Yo,po,Fa){var ca=this.length;return this.resize(ca+1),this.emplace(ca,g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr,gr,Ir,Dr,Wr,Ii,$i,ko,fo,Yo,po,Fa)},d.prototype.emplace=function(g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn,Gn,In,cr,gr,Ir,Dr,Wr,Ii,$i,ko,fo,Yo,po,Fa,ca){var Oo=34*g,Xa=17*g;return this.int16[Oo+0]=A,this.int16[Oo+1]=P,this.int16[Oo+2]=F,this.int16[Oo+3]=j,this.int16[Oo+4]=J,this.int16[Oo+5]=be,this.int16[Oo+6]=Ne,this.int16[Oo+7]=$e,this.uint16[Oo+8]=at,this.uint16[Oo+9]=Tt,this.uint16[Oo+10]=Bt,this.uint16[Oo+11]=dn,this.uint16[Oo+12]=yn,this.uint16[Oo+13]=Gn,this.uint16[Oo+14]=In,this.uint16[Oo+15]=cr,this.uint16[Oo+16]=gr,this.uint16[Oo+17]=Ir,this.uint16[Oo+18]=Dr,this.uint16[Oo+19]=Wr,this.uint16[Oo+20]=Ii,this.uint16[Oo+21]=$i,this.uint16[Oo+22]=ko,this.uint32[Xa+12]=fo,this.float32[Xa+13]=Yo,this.float32[Xa+14]=po,this.float32[Xa+15]=Fa,this.float32[Xa+16]=ca,g},d}(Cs);_0.prototype.bytesPerElement=68,eo("StructArrayLayout8i15ui1ul4f68",_0);var Qf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.float32[1*g+0]=A,g},d}(Cs);Qf.prototype.bytesPerElement=4,eo("StructArrayLayout1f4",Qf);var wf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.int16[j+0]=A,this.int16[j+1]=P,this.int16[j+2]=F,g},d}(Cs);wf.prototype.bytesPerElement=6,eo("StructArrayLayout3i6",wf);var iv=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=4*g;return this.uint32[2*g+0]=A,this.uint16[j+2]=P,this.uint16[j+3]=F,g},d}(Cs);iv.prototype.bytesPerElement=8,eo("StructArrayLayout1ul2ui8",iv);var zf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.uint16[F+0]=A,this.uint16[F+1]=P,g},d}(Cs);zf.prototype.bytesPerElement=4,eo("StructArrayLayout2ui4",zf);var jh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint16[1*g+0]=A,g},d}(Cs);jh.prototype.bytesPerElement=2,eo("StructArrayLayout1ui2",jh);var b0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var J=4*g;return this.float32[J+0]=A,this.float32[J+1]=P,this.float32[J+2]=F,this.float32[J+3]=j,g},d}(Cs);b0.prototype.bytesPerElement=16,eo("StructArrayLayout4f16",b0);var _=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return g.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},g.x1.get=function(){return this._structArray.int16[this._pos2+2]},g.y1.get=function(){return this._structArray.int16[this._pos2+3]},g.x2.get=function(){return this._structArray.int16[this._pos2+4]},g.y2.get=function(){return this._structArray.int16[this._pos2+5]},g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.anchorPoint.get=function(){return new ce(this.anchorPointX,this.anchorPointY)},Object.defineProperties(d.prototype,g),d}(Pd);_.prototype.size=20;var S=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new _(this,g)},d}(g0);eo("CollisionBoxArray",S);var x=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},g.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},g.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},g.segment.get=function(){return this._structArray.uint16[this._pos2+10]},g.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},g.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},g.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},g.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},g.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},g.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},g.placedOrientation.set=function(A){this._structArray.uint8[this._pos1+37]=A},g.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},g.hidden.set=function(A){this._structArray.uint8[this._pos1+38]=A},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+10]=A},g.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(d.prototype,g),d}(Pd);x.prototype.size=48;var O=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new x(this,g)},d}(kf);eo("PlacedSymbolArray",O);var k=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},g.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},g.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},g.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},g.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},g.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},g.key.get=function(){return this._structArray.uint16[this._pos2+8]},g.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},g.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},g.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},g.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},g.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},g.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},g.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},g.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},g.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},g.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},g.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},g.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},g.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+12]=A},g.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},g.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},g.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},g.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(d.prototype,g),d}(Pd);k.prototype.size=68;var Z=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new k(this,g)},d}(_0);eo("SymbolInstanceArray",Z);var Q=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getoffsetX=function(g){return this.float32[1*g+0]},d}(Qf);eo("GlyphOffsetArray",Q);var ge=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getx=function(g){return this.int16[3*g+0]},d.prototype.gety=function(g){return this.int16[3*g+1]},d.prototype.gettileUnitDistanceFromAnchor=function(g){return this.int16[3*g+2]},d}(wf);eo("SymbolLineVertexArray",ge);var Ve=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(d.prototype,g),d}(Pd);Ve.prototype.size=8;var ht=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new Ve(this,g)},d}(iv);eo("FeatureIndexArray",ht);var zt=wu([{name:"a_pos",components:2,type:"Int16"}],4).members,Ht=function(u){u===void 0&&(u=[]),this.segments=u};function Zt(u,d){return 256*(u=Re(Math.floor(u),0,255))+Re(Math.floor(d),0,255)}Ht.prototype.prepareSegment=function(u,d,g,A){var P=this.segments[this.segments.length-1];return u>Ht.MAX_VERTEX_ARRAY_LENGTH&&Ze("Max vertices per segment is "+Ht.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!P||P.vertexLength+u>Ht.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==A)&&(P={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},A!==void 0&&(P.sortKey=A),this.segments.push(P)),P},Ht.prototype.get=function(){return this.segments},Ht.prototype.destroy=function(){for(var u=0,d=this.segments;u<d.length;u+=1){var g=d[u];for(var A in g.vaos)g.vaos[A].destroy()}},Ht.simpleSegment=function(u,d,g,A){return new Ht([{vertexOffset:u,primitiveOffset:d,vertexLength:g,primitiveLength:A,vaos:{},sortKey:0}])},Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,eo("SegmentVector",Ht);var xn=wu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),vn=de(function(u){u.exports=function(d,g){var A,P,F,j,J,be,Ne,$e;for(P=d.length-(A=3&d.length),F=g,J=3432918353,be=461845907,$e=0;$e<P;)Ne=255&d.charCodeAt($e)|(255&d.charCodeAt(++$e))<<8|(255&d.charCodeAt(++$e))<<16|(255&d.charCodeAt(++$e))<<24,++$e,F=27492+(65535&(j=5*(65535&(F=(F^=Ne=(65535&(Ne=(Ne=(65535&Ne)*J+(((Ne>>>16)*J&65535)<<16)&4294967295)<<15|Ne>>>17))*be+(((Ne>>>16)*be&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(Ne=0,A){case 3:Ne^=(255&d.charCodeAt($e+2))<<16;case 2:Ne^=(255&d.charCodeAt($e+1))<<8;case 1:F^=Ne=(65535&(Ne=(Ne=(65535&(Ne^=255&d.charCodeAt($e)))*J+(((Ne>>>16)*J&65535)<<16)&4294967295)<<15|Ne>>>17))*be+(((Ne>>>16)*be&65535)<<16)&4294967295}return F^=d.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}}),Un=de(function(u){u.exports=function(d,g){for(var A,P=d.length,F=g^P,j=0;P>=4;)A=1540483477*(65535&(A=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(A>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++j;switch(P){case 3:F^=(255&d.charCodeAt(j+2))<<16;case 2:F^=(255&d.charCodeAt(j+1))<<8;case 1:F=1540483477*(65535&(F^=255&d.charCodeAt(j)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}}),an=vn,kn=Un;an.murmur3=vn,an.murmur2=kn;var nr=function(){this.ids=[],this.positions=[],this.indexed=!1};nr.prototype.add=function(u,d,g,A){this.ids.push(Rr(u)),this.positions.push(d,g,A)},nr.prototype.getPositions=function(u){for(var d=Rr(u),g=0,A=this.ids.length-1;g<A;){var P=g+A>>1;this.ids[P]>=d?A=P:g=P+1}for(var F=[];this.ids[g]===d;)F.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return F},nr.serialize=function(u,d){var g=new Float64Array(u.ids),A=new Uint32Array(u.positions);return function P(F,j,J,be){for(;J<be;){for(var Ne=F[J+be>>1],$e=J-1,at=be+1;;){do $e++;while(F[$e]<Ne);do at--;while(F[at]>Ne);if($e>=at)break;Ar(F,$e,at),Ar(j,3*$e,3*at),Ar(j,3*$e+1,3*at+1),Ar(j,3*$e+2,3*at+2)}at-J<be-at?(P(F,j,J,at),J=at+1):(P(F,j,at+1,be),be=at)}}(g,A,0,g.length-1),d&&d.push(g.buffer,A.buffer),{ids:g,positions:A}},nr.deserialize=function(u){var d=new nr;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d};var mr=Math.pow(2,53)-1;function Rr(u){var d=+u;return!isNaN(d)&&d<=mr?d:an(String(u))}function Ar(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}eo("FeaturePositionMap",nr);var zr=function(u,d){this.gl=u.gl,this.location=d},ni=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))},d}(zr),zi=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))},d}(zr),Li=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))},d}(zr),co=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))},d}(zr),Uo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3]))},d}(zr),Zo=function(u){function d(g,A){u.call(this,g,A),this.current=gn.transparent}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a))},d}(zr),Xo=new Float32Array(16),cs=function(u){function d(g,A){u.call(this,g,A),this.current=Xo}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(var A=1;A<16;A++)if(g[A]!==this.current[A]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}},d}(zr);function Pr(u){return[Zt(255*u.r,255*u.g),Zt(255*u.b,255*u.a)]}var Qt=function(u,d,g){this.value=u,this.uniformNames=d.map(function(A){return"u_"+A}),this.type=g};Qt.prototype.setUniform=function(u,d,g){u.set(g.constantOr(this.value))},Qt.prototype.getBinding=function(u,d,g){return this.type==="color"?new Zo(u,d):new zi(u,d)};var da=function(u,d){this.uniformNames=d.map(function(g){return"u_"+g}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};da.prototype.setConstantPatternPositions=function(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr},da.prototype.setUniform=function(u,d,g,A){var P=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&u.set(P)},da.prototype.getBinding=function(u,d,g){return g.substr(0,9)==="u_pattern"?new Uo(u,d):new zi(u,d)};var ha=function(u,d,g,A){this.expression=u,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(function(P){return{name:"a_"+P,type:"Float32",components:g==="color"?2:1,offset:0}}),this.paintVertexArray=new A};ha.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.paintVertexArray.length,j=this.expression.evaluate(new wa(0),d,{},A,[],P);this.paintVertexArray.resize(u),this._setPaintValue(F,u,j)},ha.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:0},g,A);this._setPaintValue(u,d,P)},ha.prototype._setPaintValue=function(u,d,g){if(this.type==="color")for(var A=Pr(g),P=u;P<d;P++)this.paintVertexArray.emplace(P,A[0],A[1]);else{for(var F=u;F<d;F++)this.paintVertexArray.emplace(F,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}},ha.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ha.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qo=function(u,d,g,A,P,F){this.expression=u,this.uniformNames=d.map(function(j){return"u_"+j+"_t"}),this.type=g,this.useIntegerZoom=A,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map(function(j){return{name:"a_"+j,type:"Float32",components:g==="color"?4:2,offset:0}}),this.paintVertexArray=new F};qo.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.expression.evaluate(new wa(this.zoom),d,{},A,[],P),j=this.expression.evaluate(new wa(this.zoom+1),d,{},A,[],P),J=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(J,u,F,j)},qo.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:this.zoom},g,A),F=this.expression.evaluate({zoom:this.zoom+1},g,A);this._setPaintValue(u,d,P,F)},qo.prototype._setPaintValue=function(u,d,g,A){if(this.type==="color")for(var P=Pr(g),F=Pr(A),j=u;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1],F[0],F[1]);else{for(var J=u;J<d;J++)this.paintVertexArray.emplace(J,g,A);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(A))}},qo.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qo.prototype.setUniform=function(u,d){var g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=Re(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);u.set(A)},qo.prototype.getBinding=function(u,d,g){return new zi(u,d)};var _a=function(u,d,g,A,P,F){this.expression=u,this.type=d,this.useIntegerZoom=g,this.zoom=A,this.layerId=F,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};_a.prototype.populatePaintArray=function(u,d,g){var A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(A,u,d.patterns&&d.patterns[this.layerId],g)},_a.prototype.updatePaintArray=function(u,d,g,A,P){this._setPaintValues(u,d,g.patterns&&g.patterns[this.layerId],P)},_a.prototype._setPaintValues=function(u,d,g,A){if(A&&g){var P=A[g.min],F=A[g.mid],j=A[g.max];if(P&&F&&j)for(var J=u;J<d;J++)this.zoomInPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,F.tl[0],F.tl[1],F.br[0],F.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],F.pixelRatio,j.pixelRatio)}},_a.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,xn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,xn.members,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var aa=function(u,d,g){this.binders={},this._buffers=[];var A=[];for(var P in u.paint._values)if(g(P)){var F=u.paint.get(P);if(F instanceof Ku&&yo(F.property.specification)){var j=pu(P,u.type),J=F.value,be=F.property.specification.type,Ne=F.property.useIntegerZoom,$e=F.property.specification["property-type"],at=$e==="cross-faded"||$e==="cross-faded-data-driven";if(J.kind==="constant")this.binders[P]=at?new da(J.value,j):new Qt(J.value,j,be),A.push("/u_"+P);else if(J.kind==="source"||at){var Tt=Cl(P,be,"source");this.binders[P]=at?new _a(J,be,Ne,d,Tt,u.id):new ha(J,j,be,Tt),A.push("/a_"+P)}else{var Bt=Cl(P,be,"composite");this.binders[P]=new qo(J,j,be,Ne,d,Bt),A.push("/z_"+P)}}}this.cacheKey=A.sort().join("")};aa.prototype.getMaxValue=function(u){var d=this.binders[u];return d instanceof ha||d instanceof qo?d.maxValue:0},aa.prototype.populatePaintArrays=function(u,d,g,A,P){for(var F in this.binders){var j=this.binders[F];(j instanceof ha||j instanceof qo||j instanceof _a)&&j.populatePaintArray(u,d,g,A,P)}},aa.prototype.setConstantPatternPositions=function(u,d){for(var g in this.binders){var A=this.binders[g];A instanceof da&&A.setConstantPatternPositions(u,d)}},aa.prototype.updatePaintArrays=function(u,d,g,A,P){var F=!1;for(var j in u)for(var J=0,be=d.getPositions(j);J<be.length;J+=1){var Ne=be[J],$e=g.feature(Ne.index);for(var at in this.binders){var Tt=this.binders[at];if((Tt instanceof ha||Tt instanceof qo||Tt instanceof _a)&&Tt.expression.isStateDependent===!0){var Bt=A.paint.get(at);Tt.expression=Bt.value,Tt.updatePaintArray(Ne.start,Ne.end,$e,u[j],P),F=!0}}}return F},aa.prototype.defines=function(){var u=[];for(var d in this.binders){var g=this.binders[d];(g instanceof Qt||g instanceof da)&&u.push.apply(u,g.uniformNames.map(function(A){return"#define HAS_UNIFORM_"+A}))}return u},aa.prototype.getBinderAttributes=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof ha||g instanceof qo)for(var A=0;A<g.paintVertexAttributes.length;A++)u.push(g.paintVertexAttributes[A].name);else if(g instanceof _a)for(var P=0;P<xn.members.length;P++)u.push(xn.members[P].name)}return u},aa.prototype.getBinderUniforms=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof Qt||g instanceof da||g instanceof qo)for(var A=0,P=g.uniformNames;A<P.length;A+=1)u.push(P[A])}return u},aa.prototype.getPaintVertexBuffers=function(){return this._buffers},aa.prototype.getUniforms=function(u,d){var g=[];for(var A in this.binders){var P=this.binders[A];if(P instanceof Qt||P instanceof da||P instanceof qo)for(var F=0,j=P.uniformNames;F<j.length;F+=1){var J=j[F];if(d[J]){var be=P.getBinding(u,d[J],J);g.push({name:J,property:A,binding:be})}}}return g},aa.prototype.setUniforms=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1){var j=F[P],J=j.name,be=j.property;this.binders[be].setUniform(j.binding,A,g.get(be),J)}},aa.prototype.updatePaintBuffers=function(u){for(var d in this._buffers=[],this.binders){var g=this.binders[d];if(u&&g instanceof _a){var A=u.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(g instanceof ha||g instanceof qo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}},aa.prototype.upload=function(u){for(var d in this.binders){var g=this.binders[d];(g instanceof ha||g instanceof qo||g instanceof _a)&&g.upload(u)}this.updatePaintBuffers()},aa.prototype.destroy=function(){for(var u in this.binders){var d=this.binders[u];(d instanceof ha||d instanceof qo||d instanceof _a)&&d.destroy()}};var Fo=function(u,d,g){g===void 0&&(g=function(){return!0}),this.programConfigurations={};for(var A=0,P=u;A<P.length;A+=1){var F=P[A];this.programConfigurations[F.id]=new aa(F,d,g)}this.needsUpload=!1,this._featureMap=new nr,this._bufferOffset=0};function pu(u,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(d+"-","").replace(/-/g,"_")]}function Cl(u,d,g){var A={color:{source:lp,composite:b0},number:{source:Qf,composite:lp}},P=function(F){return{"line-pattern":{source:Sc,composite:Sc},"fill-pattern":{source:Sc,composite:Sc},"fill-extrusion-pattern":{source:Sc,composite:Sc}}[F]}(u);return P&&P[g]||A[d][g]}Fo.prototype.populatePaintArrays=function(u,d,g,A,P,F){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(u,d,A,P,F);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},Fo.prototype.updatePaintArrays=function(u,d,g,A){for(var P=0,F=g;P<F.length;P+=1){var j=F[P];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(u,this._featureMap,d,j,A)||this.needsUpload}},Fo.prototype.get=function(u){return this.programConfigurations[u]},Fo.prototype.upload=function(u){if(this.needsUpload){for(var d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}},Fo.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},eo("ConstantBinder",Qt),eo("CrossFadedConstantBinder",da),eo("SourceExpressionBinder",ha),eo("CrossFadedCompositeBinder",_a),eo("CompositeExpressionBinder",qo),eo("ProgramConfiguration",aa,{omit:["_buffers"]}),eo("ProgramConfigurationSet",Fo);var Du=Math.pow(2,14)-1,vu=-Du-1;function ws(u){for(var d=8192/u.extent,g=u.loadGeometry(),A=0;A<g.length;A++)for(var P=g[A],F=0;F<P.length;F++){var j=P[F],J=Math.round(j.x*d),be=Math.round(j.y*d);j.x=Re(J,vu,Du),j.y=Re(be,vu,Du),(J<j.x||J>j.x+1||be<j.y||be>j.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return g}function wl(u,d){return{type:u.type,id:u.id,properties:u.properties,geometry:d?ws(u):[]}}function ml(u,d,g,A,P){u.emplaceBack(2*d+(A+1)/2,2*g+(P+1)/2)}var dc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new zh,this.indexArray=new Bf,this.segments=new Ht,this.programConfigurations=new Fo(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Uf(u,d){for(var g=0;g<u.length;g++)if(Jf(d,u[g]))return!0;for(var A=0;A<d.length;A++)if(Jf(u,d[A]))return!0;return!!up(u,d)}function wc(u,d,g){return!!Jf(u,d)||!!Sh(d,u,g)}function cf(u,d){if(u.length===1)return Hh(d,u[0]);for(var g=0;g<d.length;g++)for(var A=d[g],P=0;P<A.length;P++)if(Jf(u,A[P]))return!0;for(var F=0;F<u.length;F++)if(Hh(d,u[F]))return!0;for(var j=0;j<d.length;j++)if(up(u,d[j]))return!0;return!1}function jc(u,d,g){if(u.length>1){if(up(u,d))return!0;for(var A=0;A<d.length;A++)if(Sh(d[A],u,g))return!0}for(var P=0;P<u.length;P++)if(Sh(u[P],d,g))return!0;return!1}function up(u,d){if(u.length===0||d.length===0)return!1;for(var g=0;g<u.length-1;g++)for(var A=u[g],P=u[g+1],F=0;F<d.length-1;F++)if(cp(A,P,d[F],d[F+1]))return!0;return!1}function cp(u,d,g,A){return lt(u,g,A)!==lt(d,g,A)&&lt(u,d,g)!==lt(u,d,A)}function Sh(u,d,g){var A=g*g;if(d.length===1)return u.distSqr(d[0])<A;for(var P=1;P<d.length;P++)if(Vh(u,d[P-1],d[P])<A)return!0;return!1}function Vh(u,d,g){var A=d.distSqr(g);if(A===0)return u.distSqr(d);var P=((u.x-d.x)*(g.x-d.x)+(u.y-d.y)*(g.y-d.y))/A;return u.distSqr(P<0?d:P>1?g:g.sub(d)._mult(P)._add(d))}function Hh(u,d){for(var g,A,P,F=!1,j=0;j<u.length;j++)for(var J=0,be=(g=u[j]).length-1;J<g.length;be=J++)(A=g[J]).y>d.y!=(P=g[be]).y>d.y&&d.x<(P.x-A.x)*(d.y-A.y)/(P.y-A.y)+A.x&&(F=!F);return F}function Jf(u,d){for(var g=!1,A=0,P=u.length-1;A<u.length;P=A++){var F=u[A],j=u[P];F.y>d.y!=j.y>d.y&&d.x<(j.x-F.x)*(d.y-F.y)/(j.y-F.y)+F.x&&(g=!g)}return g}function Ci(u,d,g){var A=g[0],P=g[2];if(u.x<A.x&&d.x<A.x||u.x>P.x&&d.x>P.x||u.y<A.y&&d.y<A.y||u.y>P.y&&d.y>P.y)return!1;var F=lt(u,d,g[0]);return F!==lt(u,d,g[1])||F!==lt(u,d,g[2])||F!==lt(u,d,g[3])}function kl(u,d,g){var A=d.paint.get(u).value;return A.kind==="constant"?A.value:g.programConfigurations.get(d.id).getMaxValue(u)}function zl(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function tc(u,d,g,A,P){if(!d[0]&&!d[1])return u;var F=ce.convert(d)._mult(P);g==="viewport"&&F._rotate(-A);for(var j=[],J=0;J<u.length;J++)j.push(u[J].sub(F));return j}dc.prototype.populate=function(u,d,g){var A=this.layers[0],P=[],F=null;A.type==="circle"&&(F=A.layout.get("circle-sort-key"));for(var j=0,J=u;j<J.length;j+=1){var be=J[j],Ne=be.feature,$e=be.id,at=be.index,Tt=be.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,dn=wl(Ne,Bt);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),dn,g)){var yn=F?F.evaluate(dn,{},g):void 0,Gn={id:$e,properties:Ne.properties,type:Ne.type,sourceLayerIndex:Tt,index:at,geometry:Bt?dn.geometry:ws(Ne),patterns:{},sortKey:yn};P.push(Gn)}}F&&P.sort(function($i,ko){return $i.sortKey-ko.sortKey});for(var In=0,cr=P;In<cr.length;In+=1){var gr=cr[In],Ir=gr.geometry,Dr=gr.index,Wr=gr.sourceLayerIndex,Ii=u[Dr].feature;this.addFeature(gr,Ir,Dr,g),d.featureIndex.insert(Ii,Ir,Dr,Wr,this.index)}},dc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},dc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},dc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},dc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,zt),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},dc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},dc.prototype.addFeature=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1)for(var j=0,J=F[P];j<J.length;j+=1){var be=J[j],Ne=be.x,$e=be.y;if(!(Ne<0||Ne>=8192||$e<0||$e>=8192)){var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Tt=at.vertexLength;ml(this.layoutVertexArray,Ne,$e,-1,-1),ml(this.layoutVertexArray,Ne,$e,1,-1),ml(this.layoutVertexArray,Ne,$e,1,1),ml(this.layoutVertexArray,Ne,$e,-1,1),this.indexArray.emplaceBack(Tt,Tt+1,Tt+2),this.indexArray.emplaceBack(Tt,Tt+3,Tt+2),at.vertexLength+=4,at.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,{},A)},eo("CircleBucket",dc,{omit:["layers"]});var Tf=new vl({"circle-sort-key":new To(Et.layout_circle["circle-sort-key"])}),jf={paint:new vl({"circle-radius":new To(Et.paint_circle["circle-radius"]),"circle-color":new To(Et.paint_circle["circle-color"]),"circle-blur":new To(Et.paint_circle["circle-blur"]),"circle-opacity":new To(Et.paint_circle["circle-opacity"]),"circle-translate":new No(Et.paint_circle["circle-translate"]),"circle-translate-anchor":new No(Et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new No(Et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new No(Et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new To(Et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new To(Et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new To(Et.paint_circle["circle-stroke-opacity"])}),layout:Tf},Wa=typeof Float32Array!="undefined"?Float32Array:Array;function Tu(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Ol(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],J=d[4],be=d[5],Ne=d[6],$e=d[7],at=d[8],Tt=d[9],Bt=d[10],dn=d[11],yn=d[12],Gn=d[13],In=d[14],cr=d[15],gr=g[0],Ir=g[1],Dr=g[2],Wr=g[3];return u[0]=gr*A+Ir*J+Dr*at+Wr*yn,u[1]=gr*P+Ir*be+Dr*Tt+Wr*Gn,u[2]=gr*F+Ir*Ne+Dr*Bt+Wr*In,u[3]=gr*j+Ir*$e+Dr*dn+Wr*cr,u[4]=(gr=g[4])*A+(Ir=g[5])*J+(Dr=g[6])*at+(Wr=g[7])*yn,u[5]=gr*P+Ir*be+Dr*Tt+Wr*Gn,u[6]=gr*F+Ir*Ne+Dr*Bt+Wr*In,u[7]=gr*j+Ir*$e+Dr*dn+Wr*cr,u[8]=(gr=g[8])*A+(Ir=g[9])*J+(Dr=g[10])*at+(Wr=g[11])*yn,u[9]=gr*P+Ir*be+Dr*Tt+Wr*Gn,u[10]=gr*F+Ir*Ne+Dr*Bt+Wr*In,u[11]=gr*j+Ir*$e+Dr*dn+Wr*cr,u[12]=(gr=g[12])*A+(Ir=g[13])*J+(Dr=g[14])*at+(Wr=g[15])*yn,u[13]=gr*P+Ir*be+Dr*Tt+Wr*Gn,u[14]=gr*F+Ir*Ne+Dr*Bt+Wr*In,u[15]=gr*j+Ir*$e+Dr*dn+Wr*cr,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,d=0,g=arguments.length;g--;)d+=u[g]*u[g];return Math.sqrt(d)});var Af,Gp=Ol;function Gh(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3];return u[0]=g[0]*A+g[4]*P+g[8]*F+g[12]*j,u[1]=g[1]*A+g[5]*P+g[9]*F+g[13]*j,u[2]=g[2]*A+g[6]*P+g[10]*F+g[14]*j,u[3]=g[3]*A+g[7]*P+g[11]*F+g[15]*j,u}Af=new Wa(3),Wa!=Float32Array&&(Af[0]=0,Af[1]=0,Af[2]=0),function(){var u=new Wa(4);Wa!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0)}();var Wp=(function(){var u=new Wa(2);Wa!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function d(g){u.call(this,g,jf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new dc(g)},d.prototype.queryRadius=function(g){var A=g;return kl("circle-radius",this,A)+kl("circle-stroke-width",this,A)+zl(this.paint.get("circle-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,J,be,Ne){for(var $e=tc(g,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),J.angle,be),at=this.paint.get("circle-radius").evaluate(A,P)+this.paint.get("circle-stroke-width").evaluate(A,P),Tt=this.paint.get("circle-pitch-alignment")==="map",Bt=Tt?$e:function(Ii,$i){return Ii.map(function(ko){return Wh(ko,$i)})}($e,Ne),dn=Tt?at*be:at,yn=0,Gn=F;yn<Gn.length;yn+=1)for(var In=0,cr=Gn[yn];In<cr.length;In+=1){var gr=cr[In],Ir=Tt?gr:Wh(gr,Ne),Dr=dn,Wr=Gh([],[gr.x,gr.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Dr*=Wr[3]/J.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Dr*=J.cameraToCenterDistance/Wr[3]),wc(Bt,Ir,Dr))return!0}return!1},d}(Ec));function Wh(u,d){var g=Gh([],[u.x,u.y,0,1],d);return new ce(g[0]/g[3],g[1]/g[3])}var Zh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(dc);function eh(u,d,g,A){var P=d.width,F=d.height;if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==P*F*g)throw new RangeError("mismatched image size")}else A=new Uint8Array(P*F*g);return u.width=P,u.height=F,u.data=A,u}function x0(u,d,g){var A=d.width,P=d.height;if(A!==u.width||P!==u.height){var F=eh({},{width:A,height:P},g);Bv(u,F,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,A),height:Math.min(u.height,P)},g),u.width=A,u.height=P,u.data=F.data}}function Bv(u,d,g,A,P,F){if(P.width===0||P.height===0)return d;if(P.width>u.width||P.height>u.height||g.x>u.width-P.width||g.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>d.width||P.height>d.height||A.x>d.width-P.width||A.y>d.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=u.data,J=d.data,be=0;be<P.height;be++)for(var Ne=((g.y+be)*u.width+g.x)*F,$e=((A.y+be)*d.width+A.x)*F,at=0;at<P.width*F;at++)J[$e+at]=j[Ne+at];return d}eo("HeatmapBucket",Zh,{omit:["layers"]});var Dd=function(u,d){eh(this,u,1,d)};Dd.prototype.resize=function(u){x0(this,u,1)},Dd.prototype.clone=function(){return new Dd({width:this.width,height:this.height},new Uint8Array(this.data))},Dd.copy=function(u,d,g,A,P){Bv(u,d,g,A,P,1)};var pc=function(u,d){eh(this,u,4,d)};pc.prototype.resize=function(u){x0(this,u,4)},pc.prototype.replace=function(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},pc.prototype.clone=function(){return new pc({width:this.width,height:this.height},new Uint8Array(this.data))},pc.copy=function(u,d,g,A,P){Bv(u,d,g,A,P,4)},eo("AlphaImage",Dd),eo("RGBAImage",pc);var jg={paint:new vl({"heatmap-radius":new To(Et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new To(Et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new No(Et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ju(Et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new No(Et.paint_heatmap["heatmap-opacity"])})};function t_(u){var d={},g=u.resolution||256,A=u.clips?u.clips.length:1,P=u.image||new pc({width:g,height:A}),F=function(dn,yn,Gn){d[u.evaluationKey]=Gn;var In=u.expression.evaluate(d);P.data[dn+yn+0]=Math.floor(255*In.r/In.a),P.data[dn+yn+1]=Math.floor(255*In.g/In.a),P.data[dn+yn+2]=Math.floor(255*In.b/In.a),P.data[dn+yn+3]=Math.floor(255*In.a)};if(u.clips)for(var j=0,J=0;j<A;++j,J+=4*g)for(var be=0,Ne=0;be<g;be++,Ne+=4){var $e=be/(g-1),at=u.clips[j];F(J,Ne,at.start*(1-$e)+at.end*$e)}else for(var Tt=0,Bt=0;Tt<g;Tt++,Bt+=4)F(0,Bt,Tt/(g-1));return P}var fp=function(u){function d(g){u.call(this,g,jg),this._updateColorRamp()}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new Zh(g)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="heatmap-color"&&this._updateColorRamp()},d.prototype._updateColorRamp=function(){this.colorRamp=t_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},d.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},d}(Ec),Vg={paint:new vl({"hillshade-illumination-direction":new No(Et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new No(Et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new No(Et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new No(Et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new No(Et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new No(Et.paint_hillshade["hillshade-accent-color"])})},n_=function(u){function d(g){u.call(this,g,Vg)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},d}(Ec),Hg=wu([{name:"a_pos",components:2,type:"Int16"}],4).members,kv=Zp,w1=Zp;function Zp(u,d,g){g=g||2;var A,P,F,j,J,be,Ne,$e=d&&d.length,at=$e?d[0]*g:u.length,Tt=Dm(u,0,at,g,!0),Bt=[];if(!Tt||Tt.next===Tt.prev)return Bt;if($e&&(Tt=function(yn,Gn,In,cr){var gr,Ir,Dr,Wr=[];for(gr=0,Ir=Gn.length;gr<Ir;gr++)(Dr=Dm(yn,Gn[gr]*cr,gr<Ir-1?Gn[gr+1]*cr:yn.length,cr,!1))===Dr.next&&(Dr.steiner=!0),Wr.push(uv(Dr));for(Wr.sort(ov),gr=0;gr<Wr.length;gr++)av(Wr[gr],In),In=Xp(In,In.next);return In}(u,d,Tt,g)),u.length>80*g){A=F=u[0],P=j=u[1];for(var dn=g;dn<at;dn+=g)(J=u[dn])<A&&(A=J),(be=u[dn+1])<P&&(P=be),J>F&&(F=J),be>j&&(j=be);Ne=(Ne=Math.max(F-A,j-P))!==0?1/Ne:0}return zv(Tt,Bt,g,A,P,Ne),Bt}function Dm(u,d,g,A,P){var F,j;if(P===qp(u,d,g,A)>0)for(F=d;F<g;F+=A)j=pp(F,u[F],u[F+1],j);else for(F=g-A;F>=d;F-=A)j=pp(F,u[F],u[F+1],j);return j&&Ld(j,j.next)&&(th(j),j=j.next),j}function Xp(u,d){if(!u)return u;d||(d=u);var g,A=u;do if(g=!1,A.steiner||!Ld(A,A.next)&&gl(A.prev,A,A.next)!==0)A=A.next;else{if(th(A),(A=d=A.prev)===A.next)break;g=!0}while(g||A!==d);return d}function zv(u,d,g,A,P,F,j){if(u){!j&&F&&function($e,at,Tt,Bt){var dn=$e;do dn.z===null&&(dn.z=lv(dn.x,dn.y,at,Tt,Bt)),dn.prevZ=dn.prev,dn.nextZ=dn.next,dn=dn.next;while(dn!==$e);dn.prevZ.nextZ=null,dn.prevZ=null,function(yn){var Gn,In,cr,gr,Ir,Dr,Wr,Ii,$i=1;do{for(In=yn,yn=null,Ir=null,Dr=0;In;){for(Dr++,cr=In,Wr=0,Gn=0;Gn<$i&&(Wr++,cr=cr.nextZ);Gn++);for(Ii=$i;Wr>0||Ii>0&&cr;)Wr!==0&&(Ii===0||!cr||In.z<=cr.z)?(gr=In,In=In.nextZ,Wr--):(gr=cr,cr=cr.nextZ,Ii--),Ir?Ir.nextZ=gr:yn=gr,gr.prevZ=Ir,Ir=gr;In=cr}Ir.nextZ=null,$i*=2}while(Dr>1)}(dn)}(u,A,P,F);for(var J,be,Ne=u;u.prev!==u.next;)if(J=u.prev,be=u.next,F?Nm(u,A,P,F):Lm(u))d.push(J.i/g),d.push(u.i/g),d.push(be.i/g),th(u),u=be.next,Ne=be.next;else if((u=be)===Ne){j?j===1?zv(u=Fm(Xp(u),d,g),d,g,A,P,F,2):j===2&&Gg(u,d,g,A,P,F):zv(Xp(u),d,g,A,P,F,1);break}}}function Lm(u){var d=u.prev,g=u,A=u.next;if(gl(d,g,A)>=0)return!1;for(var P=u.next.next;P!==u.prev;){if(hp(d.x,d.y,g.x,g.y,A.x,A.y,P.x,P.y)&&gl(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function Nm(u,d,g,A){var P=u.prev,F=u,j=u.next;if(gl(P,F,j)>=0)return!1;for(var J=P.x>F.x?P.x>j.x?P.x:j.x:F.x>j.x?F.x:j.x,be=P.y>F.y?P.y>j.y?P.y:j.y:F.y>j.y?F.y:j.y,Ne=lv(P.x<F.x?P.x<j.x?P.x:j.x:F.x<j.x?F.x:j.x,P.y<F.y?P.y<j.y?P.y:j.y:F.y<j.y?F.y:j.y,d,g,A),$e=lv(J,be,d,g,A),at=u.prevZ,Tt=u.nextZ;at&&at.z>=Ne&&Tt&&Tt.z<=$e;){if(at!==u.prev&&at!==u.next&&hp(P.x,P.y,F.x,F.y,j.x,j.y,at.x,at.y)&&gl(at.prev,at,at.next)>=0||(at=at.prevZ,Tt!==u.prev&&Tt!==u.next&&hp(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&gl(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;at&&at.z>=Ne;){if(at!==u.prev&&at!==u.next&&hp(P.x,P.y,F.x,F.y,j.x,j.y,at.x,at.y)&&gl(at.prev,at,at.next)>=0)return!1;at=at.prevZ}for(;Tt&&Tt.z<=$e;){if(Tt!==u.prev&&Tt!==u.next&&hp(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&gl(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function Fm(u,d,g){var A=u;do{var P=A.prev,F=A.next.next;!Ld(P,F)&&E0(P,A,A.next,F)&&dp(P,F)&&dp(F,P)&&(d.push(P.i/g),d.push(A.i/g),d.push(F.i/g),th(A),th(A.next),A=u=F),A=A.next}while(A!==u);return Xp(A)}function Gg(u,d,g,A,P,F){var j=u;do{for(var J=j.next.next;J!==j.prev;){if(j.i!==J.i&&ff(j,J)){var be=$p(j,J);return j=Xp(j,j.next),be=Xp(be,be.next),zv(j,d,g,A,P,F),void zv(be,d,g,A,P,F)}J=J.next}j=j.next}while(j!==u)}function ov(u,d){return u.x-d.x}function av(u,d){if(d=function(A,P){var F,j=P,J=A.x,be=A.y,Ne=-1/0;do{if(be<=j.y&&be>=j.next.y&&j.next.y!==j.y){var $e=j.x+(be-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if($e<=J&&$e>Ne){if(Ne=$e,$e===J){if(be===j.y)return j;if(be===j.next.y)return j.next}F=j.x<j.next.x?j:j.next}}j=j.next}while(j!==P);if(!F)return null;if(J===Ne)return F;var at,Tt=F,Bt=F.x,dn=F.y,yn=1/0;j=F;do J>=j.x&&j.x>=Bt&&J!==j.x&&hp(be<dn?J:Ne,be,Bt,dn,be<dn?Ne:J,be,j.x,j.y)&&(at=Math.abs(be-j.y)/(J-j.x),dp(j,A)&&(at<yn||at===yn&&(j.x>F.x||j.x===F.x&&sv(F,j)))&&(F=j,yn=at)),j=j.next;while(j!==Tt);return F}(u,d)){var g=$p(d,u);Xp(d,d.next),Xp(g,g.next)}}function sv(u,d){return gl(u.prev,u,d.prev)<0&&gl(d.next,u,u.next)<0}function lv(u,d,g,A,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-g)*P)|u<<8))|u<<4))|u<<2))|u<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-A)*P)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function uv(u){var d=u,g=u;do(d.x<g.x||d.x===g.x&&d.y<g.y)&&(g=d),d=d.next;while(d!==u);return g}function hp(u,d,g,A,P,F,j,J){return(P-j)*(d-J)-(u-j)*(F-J)>=0&&(u-j)*(A-J)-(g-j)*(d-J)>=0&&(g-j)*(F-J)-(P-j)*(A-J)>=0}function ff(u,d){return u.next.i!==d.i&&u.prev.i!==d.i&&!function(g,A){var P=g;do{if(P.i!==g.i&&P.next.i!==g.i&&P.i!==A.i&&P.next.i!==A.i&&E0(P,P.next,g,A))return!0;P=P.next}while(P!==g);return!1}(u,d)&&(dp(u,d)&&dp(d,u)&&function(g,A){var P=g,F=!1,j=(g.x+A.x)/2,J=(g.y+A.y)/2;do P.y>J!=P.next.y>J&&P.next.y!==P.y&&j<(P.next.x-P.x)*(J-P.y)/(P.next.y-P.y)+P.x&&(F=!F),P=P.next;while(P!==g);return F}(u,d)&&(gl(u.prev,u,d.prev)||gl(u,d.prev,d))||Ld(u,d)&&gl(u.prev,u,u.next)>0&&gl(d.prev,d,d.next)>0)}function gl(u,d,g){return(d.y-u.y)*(g.x-d.x)-(d.x-u.x)*(g.y-d.y)}function Ld(u,d){return u.x===d.x&&u.y===d.y}function E0(u,d,g,A){var P=Yp(gl(u,d,g)),F=Yp(gl(u,d,A)),j=Yp(gl(g,A,u)),J=Yp(gl(g,A,d));return P!==F&&j!==J||!(P!==0||!S0(u,g,d))||!(F!==0||!S0(u,A,d))||!(j!==0||!S0(g,u,A))||!(J!==0||!S0(g,d,A))}function S0(u,d,g){return d.x<=Math.max(u.x,g.x)&&d.x>=Math.min(u.x,g.x)&&d.y<=Math.max(u.y,g.y)&&d.y>=Math.min(u.y,g.y)}function Yp(u){return u>0?1:u<0?-1:0}function dp(u,d){return gl(u.prev,u,u.next)<0?gl(u,d,u.next)>=0&&gl(u,u.prev,d)>=0:gl(u,d,u.prev)<0||gl(u,u.next,d)<0}function $p(u,d){var g=new Vf(u.i,u.x,u.y),A=new Vf(d.i,d.x,d.y),P=u.next,F=d.prev;return u.next=d,d.prev=u,g.next=P,P.prev=g,A.next=g,g.prev=A,F.next=A,A.prev=F,A}function pp(u,d,g,A){var P=new Vf(u,d,g);return A?(P.next=A.next,P.prev=A,A.next.prev=P,A.next=P):(P.prev=P,P.next=P),P}function th(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Vf(u,d,g){this.i=u,this.x=d,this.y=g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qp(u,d,g,A){for(var P=0,F=d,j=g-A;F<g;F+=A)P+=(u[j]-u[F])*(u[F+1]+u[j+1]),j=F;return P}function r_(u,d,g,A,P){(function F(j,J,be,Ne,$e){for(;Ne>be;){if(Ne-be>600){var at=Ne-be+1,Tt=J-be+1,Bt=Math.log(at),dn=.5*Math.exp(2*Bt/3),yn=.5*Math.sqrt(Bt*dn*(at-dn)/at)*(Tt-at/2<0?-1:1);F(j,J,Math.max(be,Math.floor(J-Tt*dn/at+yn)),Math.min(Ne,Math.floor(J+(at-Tt)*dn/at+yn)),$e)}var Gn=j[J],In=be,cr=Ne;for(Xh(j,be,J),$e(j[Ne],Gn)>0&&Xh(j,be,Ne);In<cr;){for(Xh(j,In,cr),In++,cr--;$e(j[In],Gn)<0;)In++;for(;$e(j[cr],Gn)>0;)cr--}$e(j[be],Gn)===0?Xh(j,be,cr):Xh(j,++cr,Ne),cr<=J&&(be=cr+1),J<=cr&&(Ne=cr-1)}})(u,d,g||0,A||u.length-1,P||Nd)}function Xh(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}function Nd(u,d){return u<d?-1:u>d?1:0}function Yh(u,d){var g=u.length;if(g<=1)return[u];for(var A,P,F=[],j=0;j<g;j++){var J=en(u[j]);J!==0&&(u[j].area=Math.abs(J),P===void 0&&(P=J<0),P===J<0?(A&&F.push(A),A=[u[j]]):A.push(u[j]))}if(A&&F.push(A),d>1)for(var be=0;be<F.length;be++)F[be].length<=d||(r_(F[be],d,1,F[be].length-1,$h),F[be]=F[be].slice(0,d));return F}function $h(u,d){return d.area-u.area}function Uv(u,d,g){for(var A=g.patternDependencies,P=!1,F=0,j=d;F<j.length;F+=1){var J=j[F].paint.get(u+"-pattern");J.isConstant()||(P=!0);var be=J.constantOr(null);be&&(P=!0,A[be.to]=!0,A[be.from]=!0)}return P}function jv(u,d,g,A,P){for(var F=P.patternDependencies,j=0,J=d;j<J.length;j+=1){var be=J[j],Ne=be.paint.get(u+"-pattern").value;if(Ne.kind!=="constant"){var $e=Ne.evaluate({zoom:A-1},g,{},P.availableImages),at=Ne.evaluate({zoom:A},g,{},P.availableImages),Tt=Ne.evaluate({zoom:A+1},g,{},P.availableImages);at=at&&at.name?at.name:at,Tt=Tt&&Tt.name?Tt.name:Tt,F[$e=$e&&$e.name?$e.name:$e]=!0,F[at]=!0,F[Tt]=!0,g.patterns[be.id]={min:$e,mid:at,max:Tt}}}return g}Zp.deviation=function(u,d,g,A){var P=d&&d.length,F=Math.abs(qp(u,0,P?d[0]*g:u.length,g));if(P)for(var j=0,J=d.length;j<J;j++)F-=Math.abs(qp(u,d[j]*g,j<J-1?d[j+1]*g:u.length,g));var be=0;for(j=0;j<A.length;j+=3){var Ne=A[j]*g,$e=A[j+1]*g,at=A[j+2]*g;be+=Math.abs((u[Ne]-u[at])*(u[$e+1]-u[Ne+1])-(u[Ne]-u[$e])*(u[at+1]-u[Ne+1]))}return F===0&&be===0?0:Math.abs((be-F)/F)},Zp.flatten=function(u){for(var d=u[0][0].length,g={vertices:[],holes:[],dimensions:d},A=0,P=0;P<u.length;P++){for(var F=0;F<u[P].length;F++)for(var j=0;j<d;j++)g.vertices.push(u[P][F][j]);P>0&&g.holes.push(A+=u[P-1].length)}return g},kv.default=w1;var hf=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zh,this.indexArray=new Bf,this.indexArray2=new zf,this.programConfigurations=new Fo(u.layers,u.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};hf.prototype.populate=function(u,d,g){this.hasPattern=Uv("fill",this.layers,d);for(var A=this.layers[0].layout.get("fill-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var J=j[F],be=J.feature,Ne=J.id,$e=J.index,at=J.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=wl(be,Tt);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),Bt,g)){var dn=A?A.evaluate(Bt,{},g,d.availableImages):void 0,yn={id:Ne,properties:be.properties,type:be.type,sourceLayerIndex:at,index:$e,geometry:Tt?Bt.geometry:ws(be),patterns:{},sortKey:dn};P.push(yn)}}A&&P.sort(function(Ii,$i){return Ii.sortKey-$i.sortKey});for(var Gn=0,In=P;Gn<In.length;Gn+=1){var cr=In[Gn],gr=cr.geometry,Ir=cr.index,Dr=cr.sourceLayerIndex;if(this.hasPattern){var Wr=jv("fill",this.layers,cr,this.zoom,d);this.patternFeatures.push(Wr)}else this.addFeature(cr,gr,Ir,g,{});d.featureIndex.insert(u[Ir].feature,gr,Ir,Dr,this.index)}},hf.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},hf.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},hf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hf.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Hg),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},hf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},hf.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=Yh(d,500);F<j.length;F+=1){for(var J=j[F],be=0,Ne=0,$e=J;Ne<$e.length;Ne+=1)be+=$e[Ne].length;for(var at=this.segments.prepareSegment(be,this.layoutVertexArray,this.indexArray),Tt=at.vertexLength,Bt=[],dn=[],yn=0,Gn=J;yn<Gn.length;yn+=1){var In=Gn[yn];if(In.length!==0){In!==J[0]&&dn.push(Bt.length/2);var cr=this.segments2.prepareSegment(In.length,this.layoutVertexArray,this.indexArray2),gr=cr.vertexLength;this.layoutVertexArray.emplaceBack(In[0].x,In[0].y),this.indexArray2.emplaceBack(gr+In.length-1,gr),Bt.push(In[0].x),Bt.push(In[0].y);for(var Ir=1;Ir<In.length;Ir++)this.layoutVertexArray.emplaceBack(In[Ir].x,In[Ir].y),this.indexArray2.emplaceBack(gr+Ir-1,gr+Ir),Bt.push(In[Ir].x),Bt.push(In[Ir].y);cr.vertexLength+=In.length,cr.primitiveLength+=In.length}}for(var Dr=kv(Bt,dn),Wr=0;Wr<Dr.length;Wr+=3)this.indexArray.emplaceBack(Tt+Dr[Wr],Tt+Dr[Wr+1],Tt+Dr[Wr+2]);at.vertexLength+=be,at.primitiveLength+=Dr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},eo("FillBucket",hf,{omit:["layers","patternFeatures"]});var Fd=new vl({"fill-sort-key":new To(Et.layout_fill["fill-sort-key"])}),Bm={paint:new vl({"fill-antialias":new No(Et.paint_fill["fill-antialias"]),"fill-opacity":new To(Et.paint_fill["fill-opacity"]),"fill-color":new To(Et.paint_fill["fill-color"]),"fill-outline-color":new To(Et.paint_fill["fill-outline-color"]),"fill-translate":new No(Et.paint_fill["fill-translate"]),"fill-translate-anchor":new No(Et.paint_fill["fill-translate-anchor"]),"fill-pattern":new eu(Et.paint_fill["fill-pattern"])}),layout:Fd},i_=function(u){function d(g){u.call(this,g,Bm)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},d.prototype.createBucket=function(g){return new hf(g)},d.prototype.queryRadius=function(){return zl(this.paint.get("fill-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,J,be){return cf(tc(g,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),J.angle,be),F)},d.prototype.isTileClipped=function(){return!0},d}(Ec),Wg=wu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,km=Kp;function Kp(u,d,g,A,P){this.properties={},this.extent=g,this.type=0,this._pbf=u,this._geometry=-1,this._keys=A,this._values=P,u.readFields(Vv,this,d)}function Vv(u,d,g){u==1?d.id=g.readVarint():u==2?function(A,P){for(var F=A.readVarint()+A.pos;A.pos<F;){var j=P._keys[A.readVarint()],J=P._values[A.readVarint()];P.properties[j]=J}}(g,d):u==3?d.type=g.readVarint():u==4&&(d._geometry=g.pos)}function qh(u){for(var d,g,A=0,P=0,F=u.length,j=F-1;P<F;j=P++)A+=((g=u[j]).x-(d=u[P]).x)*(d.y+g.y);return A}Kp.types=["Unknown","Point","LineString","Polygon"],Kp.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var d,g=u.readVarint()+u.pos,A=1,P=0,F=0,j=0,J=[];u.pos<g;){if(P<=0){var be=u.readVarint();A=7&be,P=be>>3}if(P--,A===1||A===2)F+=u.readSVarint(),j+=u.readSVarint(),A===1&&(d&&J.push(d),d=[]),d.push(new ce(F,j));else{if(A!==7)throw new Error("unknown command "+A);d&&d.push(d[0].clone())}}return d&&J.push(d),J},Kp.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var d=u.readVarint()+u.pos,g=1,A=0,P=0,F=0,j=1/0,J=-1/0,be=1/0,Ne=-1/0;u.pos<d;){if(A<=0){var $e=u.readVarint();g=7&$e,A=$e>>3}if(A--,g===1||g===2)(P+=u.readSVarint())<j&&(j=P),P>J&&(J=P),(F+=u.readSVarint())<be&&(be=F),F>Ne&&(Ne=F);else if(g!==7)throw new Error("unknown command "+g)}return[j,be,J,Ne]},Kp.prototype.toGeoJSON=function(u,d,g){var A,P,F=this.extent*Math.pow(2,g),j=this.extent*u,J=this.extent*d,be=this.loadGeometry(),Ne=Kp.types[this.type];function $e(Bt){for(var dn=0;dn<Bt.length;dn++){var yn=Bt[dn];Bt[dn]=[360*(yn.x+j)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(yn.y+J)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var at=[];for(A=0;A<be.length;A++)at[A]=be[A][0];$e(be=at);break;case 2:for(A=0;A<be.length;A++)$e(be[A]);break;case 3:for(be=function(Bt){var dn=Bt.length;if(dn<=1)return[Bt];for(var yn,Gn,In=[],cr=0;cr<dn;cr++){var gr=qh(Bt[cr]);gr!==0&&(Gn===void 0&&(Gn=gr<0),Gn===gr<0?(yn&&In.push(yn),yn=[Bt[cr]]):yn.push(Bt[cr]))}return yn&&In.push(yn),In}(be),A=0;A<be.length;A++)for(P=0;P<be[A].length;P++)$e(be[A][P])}be.length===1?be=be[0]:Ne="Multi"+Ne;var Tt={type:"Feature",geometry:{type:Ne,coordinates:be},properties:this.properties};return"id"in this&&(Tt.id=this.id),Tt};var cv=Bd;function Bd(u,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(vp,this,d),this.length=this._features.length}function vp(u,d,g){u===15?d.version=g.readVarint():u===1?d.name=g.readString():u===5?d.extent=g.readVarint():u===2?d._features.push(g.pos):u===3?d._keys.push(g.readString()):u===4&&d._values.push(function(A){for(var P=null,F=A.readVarint()+A.pos;A.pos<F;){var j=A.readVarint()>>3;P=j===1?A.readString():j===2?A.readFloat():j===3?A.readDouble():j===4?A.readVarint64():j===5?A.readVarint():j===6?A.readSVarint():j===7?A.readBoolean():null}return P}(g))}function Zg(u,d,g){if(u===3){var A=new cv(g,g.readVarint()+g.pos);A.length&&(d[A.name]=A)}}Bd.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var d=this._pbf.readVarint()+this._pbf.pos;return new km(this._pbf,d,this.extent,this._keys,this._values)};var mp={VectorTile:function(u,d){this.layers=u.readFields(Zg,{},d)},VectorTileFeature:km,VectorTileLayer:cv},Hv=mp.VectorTileFeature.types,Gv=Math.pow(2,13);function nc(u,d,g,A,P,F,j,J){u.emplaceBack(d,g,2*Math.floor(A*Gv)+j,P*Gv*2,F*Gv*2,Math.round(J))}var vc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new xh,this.indexArray=new Bf,this.programConfigurations=new Fo(u.layers,u.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Au(u,d){return u.x===d.x&&(u.x<0||u.x>8192)||u.y===d.y&&(u.y<0||u.y>8192)}vc.prototype.populate=function(u,d,g){this.features=[],this.hasPattern=Uv("fill-extrusion",this.layers,d);for(var A=0,P=u;A<P.length;A+=1){var F=P[A],j=F.feature,J=F.id,be=F.index,Ne=F.sourceLayerIndex,$e=this.layers[0]._featureFilter.needGeometry,at=wl(j,$e);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),at,g)){var Tt={id:J,sourceLayerIndex:Ne,index:be,geometry:$e?at.geometry:ws(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(jv("fill-extrusion",this.layers,Tt,this.zoom,d)):this.addFeature(Tt,Tt.geometry,be,g,{}),d.featureIndex.insert(j,Tt.geometry,be,Ne,this.index,!0)}}},vc.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.features;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},vc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},vc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Wg),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vc.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=Yh(d,500);F<j.length;F+=1){for(var J=j[F],be=0,Ne=0,$e=J;Ne<$e.length;Ne+=1)be+=$e[Ne].length;for(var at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Tt=0,Bt=J;Tt<Bt.length;Tt+=1){var dn=Bt[Tt];if(dn.length!==0&&!((Xa=dn).every(function(Vo){return Vo.x<0})||Xa.every(function(Vo){return Vo.x>8192})||Xa.every(function(Vo){return Vo.y<0})||Xa.every(function(Vo){return Vo.y>8192})))for(var yn=0,Gn=0;Gn<dn.length;Gn++){var In=dn[Gn];if(Gn>=1){var cr=dn[Gn-1];if(!Au(In,cr)){at.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gr=In.sub(cr)._perp()._unit(),Ir=cr.dist(In);yn+Ir>32768&&(yn=0),nc(this.layoutVertexArray,In.x,In.y,gr.x,gr.y,0,0,yn),nc(this.layoutVertexArray,In.x,In.y,gr.x,gr.y,0,1,yn),nc(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,0,yn+=Ir),nc(this.layoutVertexArray,cr.x,cr.y,gr.x,gr.y,0,1,yn);var Dr=at.vertexLength;this.indexArray.emplaceBack(Dr,Dr+2,Dr+1),this.indexArray.emplaceBack(Dr+1,Dr+2,Dr+3),at.vertexLength+=4,at.primitiveLength+=2}}}}if(at.vertexLength+be>Ht.MAX_VERTEX_ARRAY_LENGTH&&(at=this.segments.prepareSegment(be,this.layoutVertexArray,this.indexArray)),Hv[u.type]==="Polygon"){for(var Wr=[],Ii=[],$i=at.vertexLength,ko=0,fo=J;ko<fo.length;ko+=1){var Yo=fo[ko];if(Yo.length!==0){Yo!==J[0]&&Ii.push(Wr.length/2);for(var po=0;po<Yo.length;po++){var Fa=Yo[po];nc(this.layoutVertexArray,Fa.x,Fa.y,0,0,1,1,0),Wr.push(Fa.x),Wr.push(Fa.y)}}}for(var ca=kv(Wr,Ii),Oo=0;Oo<ca.length;Oo+=3)this.indexArray.emplaceBack($i+ca[Oo],$i+ca[Oo+2],$i+ca[Oo+1]);at.primitiveLength+=ca.length/3,at.vertexLength+=be}}var Xa;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},eo("FillExtrusionBucket",vc,{omit:["layers","features"]});var Cf={paint:new vl({"fill-extrusion-opacity":new No(Et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new To(Et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new No(Et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new No(Et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eu(Et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new To(Et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new To(Et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new No(Et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},zm=function(u){function d(g){u.call(this,g,Cf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new vc(g)},d.prototype.queryRadius=function(){return zl(this.paint.get("fill-extrusion-translate"))},d.prototype.is3D=function(){return!0},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,J,be,Ne){var $e=tc(g,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),J.angle,be),at=this.paint.get("fill-extrusion-height").evaluate(A,P),Tt=this.paint.get("fill-extrusion-base").evaluate(A,P),Bt=function(yn,Gn,In,cr){for(var gr=[],Ir=0,Dr=yn;Ir<Dr.length;Ir+=1){var Wr=Dr[Ir],Ii=[Wr.x,Wr.y,0,1];Gh(Ii,Ii,Gn),gr.push(new ce(Ii[0]/Ii[3],Ii[1]/Ii[3]))}return gr}($e,Ne),dn=function(yn,Gn,In,cr){for(var gr=[],Ir=[],Dr=cr[8]*Gn,Wr=cr[9]*Gn,Ii=cr[10]*Gn,$i=cr[11]*Gn,ko=cr[8]*In,fo=cr[9]*In,Yo=cr[10]*In,po=cr[11]*In,Fa=0,ca=yn;Fa<ca.length;Fa+=1){for(var Oo=[],Xa=[],Vo=0,ns=ca[Fa];Vo<ns.length;Vo+=1){var zo=ns[Vo],Os=zo.x,sl=zo.y,nu=cr[0]*Os+cr[4]*sl+cr[12],Ml=cr[1]*Os+cr[5]*sl+cr[13],Rl=cr[2]*Os+cr[6]*sl+cr[14],ru=cr[3]*Os+cr[7]*sl+cr[15],_u=Rl+Ii,Cu=ru+$i,Vc=nu+ko,Wu=Ml+fo,Ac=Rl+Yo,$l=ru+po,ic=new ce((nu+Dr)/Cu,(Ml+Wr)/Cu);ic.z=_u/Cu,Oo.push(ic);var Ka=new ce(Vc/$l,Wu/$l);Ka.z=Ac/$l,Xa.push(Ka)}gr.push(Oo),Ir.push(Xa)}return[gr,Ir]}(F,Tt,at,Ne);return function(yn,Gn,In){var cr=1/0;cf(In,Gn)&&(cr=Qp(In,Gn[0]));for(var gr=0;gr<Gn.length;gr++)for(var Ir=Gn[gr],Dr=yn[gr],Wr=0;Wr<Ir.length-1;Wr++){var Ii=Ir[Wr],$i=[Ii,Ir[Wr+1],Dr[Wr+1],Dr[Wr],Ii];Uf(In,$i)&&(cr=Math.min(cr,Qp(In,$i)))}return cr!==1/0&&cr}(dn[0],dn[1],Bt)},d}(Ec);function Za(u,d){return u.x*d.x+u.y*d.y}function Qp(u,d){if(u.length===1){for(var g,A=0,P=d[A++];!g||P.equals(g);)if(!(g=d[A++]))return 1/0;for(;A<d.length;A++){var F=d[A],j=u[0],J=g.sub(P),be=F.sub(P),Ne=j.sub(P),$e=Za(J,J),at=Za(J,be),Tt=Za(be,be),Bt=Za(Ne,J),dn=Za(Ne,be),yn=$e*Tt-at*at,Gn=(Tt*Bt-at*dn)/yn,In=($e*dn-at*Bt)/yn,cr=P.z*(1-Gn-In)+g.z*Gn+F.z*In;if(isFinite(cr))return cr}return 1/0}for(var gr=1/0,Ir=0,Dr=d;Ir<Dr.length;Ir+=1)gr=Math.min(gr,Dr[Ir].z);return gr}var Um=wu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,o_=wu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Xg=mp.VectorTileFeature.types,Wv=Math.cos(Math.PI/180*37.5),fv=Math.pow(2,14)/.5,mc=function(u){var d=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(g){return g.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(g){d.gradients[g.id]={}}),this.layoutVertexArray=new ec,this.layoutVertexArray2=new lp,this.indexArray=new Bf,this.programConfigurations=new Fo(u.layers,u.zoom),this.segments=new Ht,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(g){return g.isStateDependent()}).map(function(g){return g.id})};mc.prototype.populate=function(u,d,g){this.hasPattern=Uv("line",this.layers,d);for(var A=this.layers[0].layout.get("line-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var J=j[F],be=J.feature,Ne=J.id,$e=J.index,at=J.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=wl(be,Tt);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),Bt,g)){var dn=A?A.evaluate(Bt,{},g):void 0,yn={id:Ne,properties:be.properties,type:be.type,sourceLayerIndex:at,index:$e,geometry:Tt?Bt.geometry:ws(be),patterns:{},sortKey:dn};P.push(yn)}}A&&P.sort(function(Ii,$i){return Ii.sortKey-$i.sortKey});for(var Gn=0,In=P;Gn<In.length;Gn+=1){var cr=In[Gn],gr=cr.geometry,Ir=cr.index,Dr=cr.sourceLayerIndex;if(this.hasPattern){var Wr=jv("line",this.layers,cr,this.zoom,d);this.patternFeatures.push(Wr)}else this.addFeature(cr,gr,Ir,g,{});d.featureIndex.insert(u[Ir].feature,gr,Ir,Dr,this.index)}},mc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},mc.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},mc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mc.prototype.upload=function(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,o_)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Um),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mc.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},mc.prototype.addFeature=function(u,d,g,A,P){var F=this.layers[0].layout,j=F.get("line-join").evaluate(u,{}),J=F.get("line-cap"),be=F.get("line-miter-limit"),Ne=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var $e=0,at=d;$e<at.length;$e+=1)this.addLine(at[$e],u,j,J,be,Ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},mc.prototype.addLine=function(u,d,g,A,P,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<u.length-1;j++)this.totalDistance+=u[j].dist(u[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var J=Xg[d.type]==="Polygon",be=u.length;be>=2&&u[be-1].equals(u[be-2]);)be--;for(var Ne=0;Ne<be-1&&u[Ne].equals(u[Ne+1]);)Ne++;if(!(be<(J?3:2))){g==="bevel"&&(P=1.05);var $e,at=this.overscaling<=16?122880/(512*this.overscaling):0,Tt=this.segments.prepareSegment(10*be,this.layoutVertexArray,this.indexArray),Bt=void 0,dn=void 0,yn=void 0,Gn=void 0;this.e1=this.e2=-1,J&&(Gn=u[Ne].sub($e=u[be-2])._unit()._perp());for(var In=Ne;In<be;In++)if(!(dn=In===be-1?J?u[Ne+1]:void 0:u[In+1])||!u[In].equals(dn)){Gn&&(yn=Gn),$e&&(Bt=$e),$e=u[In],Gn=dn?dn.sub($e)._unit()._perp():yn;var cr=(yn=yn||Gn).add(Gn);cr.x===0&&cr.y===0||cr._unit();var gr=yn.x*Gn.x+yn.y*Gn.y,Ir=cr.x*Gn.x+cr.y*Gn.y,Dr=Ir!==0?1/Ir:1/0,Wr=2*Math.sqrt(2-2*Ir),Ii=Ir<Wv&&Bt&&dn,$i=yn.x*Gn.y-yn.y*Gn.x>0;if(Ii&&In>Ne){var ko=$e.dist(Bt);if(ko>2*at){var fo=$e.sub($e.sub(Bt)._mult(at/ko)._round());this.updateDistance(Bt,fo),this.addCurrentVertex(fo,yn,0,0,Tt),Bt=fo}}var Yo=Bt&&dn,po=Yo?g:J?"butt":A;if(Yo&&po==="round"&&(Dr<F?po="miter":Dr<=2&&(po="fakeround")),po==="miter"&&Dr>P&&(po="bevel"),po==="bevel"&&(Dr>2&&(po="flipbevel"),Dr<P&&(po="miter")),Bt&&this.updateDistance(Bt,$e),po==="miter")cr._mult(Dr),this.addCurrentVertex($e,cr,0,0,Tt);else if(po==="flipbevel"){if(Dr>100)cr=Gn.mult(-1);else{var Fa=Dr*yn.add(Gn).mag()/yn.sub(Gn).mag();cr._perp()._mult(Fa*($i?-1:1))}this.addCurrentVertex($e,cr,0,0,Tt),this.addCurrentVertex($e,cr.mult(-1),0,0,Tt)}else if(po==="bevel"||po==="fakeround"){var ca=-Math.sqrt(Dr*Dr-1),Oo=$i?ca:0,Xa=$i?0:ca;if(Bt&&this.addCurrentVertex($e,yn,Oo,Xa,Tt),po==="fakeround")for(var Vo=Math.round(180*Wr/Math.PI/20),ns=1;ns<Vo;ns++){var zo=ns/Vo;if(zo!==.5){var Os=zo-.5;zo+=zo*Os*(zo-1)*((1.0904+gr*(gr*(3.55645-1.43519*gr)-3.2452))*Os*Os+(.848013+gr*(.215638*gr-1.06021)))}var sl=Gn.sub(yn)._mult(zo)._add(yn)._unit()._mult($i?-1:1);this.addHalfVertex($e,sl.x,sl.y,!1,$i,0,Tt)}dn&&this.addCurrentVertex($e,Gn,-Oo,-Xa,Tt)}else if(po==="butt")this.addCurrentVertex($e,cr,0,0,Tt);else if(po==="square"){var nu=Bt?1:-1;this.addCurrentVertex($e,cr,nu,nu,Tt)}else po==="round"&&(Bt&&(this.addCurrentVertex($e,yn,0,0,Tt),this.addCurrentVertex($e,yn,1,1,Tt,!0)),dn&&(this.addCurrentVertex($e,Gn,-1,-1,Tt,!0),this.addCurrentVertex($e,Gn,0,0,Tt)));if(Ii&&In<be-1){var Ml=$e.dist(dn);if(Ml>2*at){var Rl=$e.add(dn.sub($e)._mult(at/Ml)._round());this.updateDistance($e,Rl),this.addCurrentVertex(Rl,Gn,0,0,Tt),$e=Rl}}}}},mc.prototype.addCurrentVertex=function(u,d,g,A,P,F){F===void 0&&(F=!1);var j=d.y*A-d.x,J=-d.y-d.x*A;this.addHalfVertex(u,d.x+d.y*g,d.y-d.x*g,F,!1,g,P),this.addHalfVertex(u,j,J,F,!0,-A,P),this.distance>fv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,d,g,A,P,F))},mc.prototype.addHalfVertex=function(u,d,g,A,P,F,j){var J=.5*(this.lineClips?this.scaledDistance*(fv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(A?1:0),(u.y<<1)+(P?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(F===0?0:F<0?-1:1)|(63&J)<<2,J>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var be=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,be),j.primitiveLength++),P?this.e2=be:this.e1=be},mc.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},mc.prototype.updateDistance=function(u,d){this.distance+=u.dist(d),this.updateScaledDistance()},eo("LineBucket",mc,{omit:["layers","patternFeatures"]});var a_=new vl({"line-cap":new No(Et.layout_line["line-cap"]),"line-join":new To(Et.layout_line["line-join"]),"line-miter-limit":new No(Et.layout_line["line-miter-limit"]),"line-round-limit":new No(Et.layout_line["line-round-limit"]),"line-sort-key":new To(Et.layout_line["line-sort-key"])}),kd={paint:new vl({"line-opacity":new To(Et.paint_line["line-opacity"]),"line-color":new To(Et.paint_line["line-color"]),"line-translate":new No(Et.paint_line["line-translate"]),"line-translate-anchor":new No(Et.paint_line["line-translate-anchor"]),"line-width":new To(Et.paint_line["line-width"]),"line-gap-width":new To(Et.paint_line["line-gap-width"]),"line-offset":new To(Et.paint_line["line-offset"]),"line-blur":new To(Et.paint_line["line-blur"]),"line-dasharray":new Qu(Et.paint_line["line-dasharray"]),"line-pattern":new eu(Et.paint_line["line-pattern"]),"line-gradient":new Ju(Et.paint_line["line-gradient"])}),layout:a_},hv=new(function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A){return A=new wa(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),u.prototype.possiblyEvaluate.call(this,g,A)},d.prototype.evaluate=function(g,A,P,F){return A=le({},A,{zoom:Math.floor(A.zoom)}),u.prototype.evaluate.call(this,g,A,P,F)},d}(To))(kd.paint.properties["line-width"].specification);hv.useIntegerZoom=!0;var Yg=function(u){function d(g){u.call(this,g,kd),this.gradientVersion=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fu,this.gradientVersion=(this.gradientVersion+1)%We)},d.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A),this.paint._values["line-floorwidth"]=hv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)},d.prototype.createBucket=function(g){return new mc(g)},d.prototype.queryRadius=function(g){var A=g,P=w0(kl("line-width",this,A),kl("line-gap-width",this,A)),F=kl("line-offset",this,A);return P/2+Math.abs(F)+zl(this.paint.get("line-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,J,be){var Ne=tc(g,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),J.angle,be),$e=be/2*w0(this.paint.get("line-width").evaluate(A,P),this.paint.get("line-gap-width").evaluate(A,P)),at=this.paint.get("line-offset").evaluate(A,P);return at&&(F=function(Tt,Bt){for(var dn=[],yn=new ce(0,0),Gn=0;Gn<Tt.length;Gn++){for(var In=Tt[Gn],cr=[],gr=0;gr<In.length;gr++){var Ir=In[gr],Dr=In[gr+1],Wr=gr===0?yn:Ir.sub(In[gr-1])._unit()._perp(),Ii=gr===In.length-1?yn:Dr.sub(Ir)._unit()._perp(),$i=Wr._add(Ii)._unit();$i._mult(1/($i.x*Ii.x+$i.y*Ii.y)),cr.push($i._mult(Bt)._add(Ir))}dn.push(cr)}return dn}(F,at*be)),function(Tt,Bt,dn){for(var yn=0;yn<Bt.length;yn++){var Gn=Bt[yn];if(Tt.length>=3){for(var In=0;In<Gn.length;In++)if(Jf(Tt,Gn[In]))return!0}if(jc(Tt,Gn,dn))return!0}return!1}(Ne,F,$e)},d.prototype.isTileClipped=function(){return!0},d}(Ec);function w0(u,d){return d>0?d+2*u:u}var gp=wu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s_=wu([{name:"a_projected_pos",components:3,type:"Float32"}],4),Zv=(wu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$g=(wu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ue=wu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qt(u,d,g){return u.sections.forEach(function(A){A.text=function(P,F,j){var J=F.layout.get("text-transform").evaluate(j,{});return J==="uppercase"?P=P.toLocaleUpperCase():J==="lowercase"&&(P=P.toLocaleLowerCase()),zc.applyArabicShaping&&(P=zc.applyArabicShaping(P)),P}(A.text,d,g)}),u}wu([{name:"triangle",components:3,type:"Uint16"}]),wu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wu([{type:"Float32",name:"offsetX"}]),wu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var On={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Cr=function(u,d,g,A,P){var F,j,J=8*P-A-1,be=(1<<J)-1,Ne=be>>1,$e=-7,at=g?P-1:0,Tt=g?-1:1,Bt=u[d+at];for(at+=Tt,F=Bt&(1<<-$e)-1,Bt>>=-$e,$e+=J;$e>0;F=256*F+u[d+at],at+=Tt,$e-=8);for(j=F&(1<<-$e)-1,F>>=-$e,$e+=A;$e>0;j=256*j+u[d+at],at+=Tt,$e-=8);if(F===0)F=1-Ne;else{if(F===be)return j?NaN:1/0*(Bt?-1:1);j+=Math.pow(2,A),F-=Ne}return(Bt?-1:1)*j*Math.pow(2,F-A)},$r=function(u,d,g,A,P,F){var j,J,be,Ne=8*F-P-1,$e=(1<<Ne)-1,at=$e>>1,Tt=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=A?0:F-1,dn=A?1:-1,yn=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(J=isNaN(d)?1:0,j=$e):(j=Math.floor(Math.log(d)/Math.LN2),d*(be=Math.pow(2,-j))<1&&(j--,be*=2),(d+=j+at>=1?Tt/be:Tt*Math.pow(2,1-at))*be>=2&&(j++,be/=2),j+at>=$e?(J=0,j=$e):j+at>=1?(J=(d*be-1)*Math.pow(2,P),j+=at):(J=d*Math.pow(2,at-1)*Math.pow(2,P),j=0));P>=8;u[g+Bt]=255&J,Bt+=dn,J/=256,P-=8);for(j=j<<P|J,Ne+=P;Ne>0;u[g+Bt]=255&j,Bt+=dn,j/=256,Ne-=8);u[g+Bt-dn]|=128*yn},Mr=yr;function yr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}yr.Varint=0,yr.Fixed64=1,yr.Bytes=2,yr.Fixed32=5;var Oi=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function di(u){return u.type===yr.Bytes?u.readVarint()+u.pos:u.pos+1}function ki(u,d,g){return g?4294967296*d+(u>>>0):4294967296*(d>>>0)+(u>>>0)}function Mi(u,d,g){var A=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));g.realloc(A);for(var P=g.pos-1;P>=u;P--)g.buf[P+A]=g.buf[P]}function Bi(u,d){for(var g=0;g<u.length;g++)d.writeVarint(u[g])}function Xi(u,d){for(var g=0;g<u.length;g++)d.writeSVarint(u[g])}function mi(u,d){for(var g=0;g<u.length;g++)d.writeFloat(u[g])}function Ui(u,d){for(var g=0;g<u.length;g++)d.writeDouble(u[g])}function dr(u,d){for(var g=0;g<u.length;g++)d.writeBoolean(u[g])}function Br(u,d){for(var g=0;g<u.length;g++)d.writeFixed32(u[g])}function gi(u,d){for(var g=0;g<u.length;g++)d.writeSFixed32(u[g])}function oo(u,d){for(var g=0;g<u.length;g++)d.writeFixed64(u[g])}function ii(u,d){for(var g=0;g<u.length;g++)d.writeSFixed64(u[g])}function to(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+16777216*u[d+3]}function bi(u,d,g){u[g]=d,u[g+1]=d>>>8,u[g+2]=d>>>16,u[g+3]=d>>>24}function no(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+(u[d+3]<<24)}function li(u,d,g){u===1&&g.readMessage(pi,d)}function pi(u,d,g){if(u===3){var A=g.readMessage(jo,{}),P=A.width,F=A.height,j=A.left,J=A.top,be=A.advance;d.push({id:A.id,bitmap:new Dd({width:P+6,height:F+6},A.bitmap),metrics:{width:P,height:F,left:j,top:J,advance:be}})}}function jo(u,d,g){u===1?d.id=g.readVarint():u===2?d.bitmap=g.readBytes():u===3?d.width=g.readVarint():u===4?d.height=g.readVarint():u===5?d.left=g.readSVarint():u===6?d.top=g.readSVarint():u===7&&(d.advance=g.readVarint())}function pa(u){for(var d=0,g=0,A=0,P=u;A<P.length;A+=1){var F=P[A];d+=F.w*F.h,g=Math.max(g,F.w)}u.sort(function(yn,Gn){return Gn.h-yn.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),g),h:1/0}],J=0,be=0,Ne=0,$e=u;Ne<$e.length;Ne+=1)for(var at=$e[Ne],Tt=j.length-1;Tt>=0;Tt--){var Bt=j[Tt];if(!(at.w>Bt.w||at.h>Bt.h)){if(at.x=Bt.x,at.y=Bt.y,be=Math.max(be,at.y+at.h),J=Math.max(J,at.x+at.w),at.w===Bt.w&&at.h===Bt.h){var dn=j.pop();Tt<j.length&&(j[Tt]=dn)}else at.h===Bt.h?(Bt.x+=at.w,Bt.w-=at.w):at.w===Bt.w?(Bt.y+=at.h,Bt.h-=at.h):(j.push({x:Bt.x+at.w,y:Bt.y,w:Bt.w-at.w,h:at.h}),Bt.y+=at.h,Bt.h-=at.h);break}}return{w:J,h:be,fill:d/(J*be)||0}}yr.prototype={destroy:function(){this.buf=null},readFields:function(u,d,g){for(g=g||this.length;this.pos<g;){var A=this.readVarint(),P=A>>3,F=this.pos;this.type=7&A,u(P,d,this),this.pos===F&&this.skip(A)}return d},readMessage:function(u,d){return this.readFields(u,d,this.readVarint()+this.pos)},readFixed32:function(){var u=to(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=no(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=to(this.buf,this.pos)+4294967296*to(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=to(this.buf,this.pos)+4294967296*no(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=Cr(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=Cr(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var d,g,A=this.buf;return d=127&(g=A[this.pos++]),g<128?d:(d|=(127&(g=A[this.pos++]))<<7,g<128?d:(d|=(127&(g=A[this.pos++]))<<14,g<128?d:(d|=(127&(g=A[this.pos++]))<<21,g<128?d:function(P,F,j){var J,be,Ne=j.buf;if(J=(112&(be=Ne[j.pos++]))>>4,be<128||(J|=(127&(be=Ne[j.pos++]))<<3,be<128)||(J|=(127&(be=Ne[j.pos++]))<<10,be<128)||(J|=(127&(be=Ne[j.pos++]))<<17,be<128)||(J|=(127&(be=Ne[j.pos++]))<<24,be<128)||(J|=(1&(be=Ne[j.pos++]))<<31,be<128))return ki(P,J,F);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(g=A[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&Oi?function(g,A,P){return Oi.decode(g.subarray(A,P))}(this.buf,d,u):function(g,A,P){for(var F="",j=A;j<P;){var J,be,Ne,$e=g[j],at=null,Tt=$e>239?4:$e>223?3:$e>191?2:1;if(j+Tt>P)break;Tt===1?$e<128&&(at=$e):Tt===2?(192&(J=g[j+1]))==128&&(at=(31&$e)<<6|63&J)<=127&&(at=null):Tt===3?(be=g[j+2],(192&(J=g[j+1]))==128&&(192&be)==128&&((at=(15&$e)<<12|(63&J)<<6|63&be)<=2047||at>=55296&&at<=57343)&&(at=null)):Tt===4&&(be=g[j+2],Ne=g[j+3],(192&(J=g[j+1]))==128&&(192&be)==128&&(192&Ne)==128&&((at=(15&$e)<<18|(63&J)<<12|(63&be)<<6|63&Ne)<=65535||at>=1114112)&&(at=null)),at===null?(at=65533,Tt=1):at>65535&&(at-=65536,F+=String.fromCharCode(at>>>10&1023|55296),at=56320|1023&at),F+=String.fromCharCode(at),j+=Tt}return F}(this.buf,d,u)},readBytes:function(){var u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d},readPackedVarint:function(u,d){if(this.type!==yr.Bytes)return u.push(this.readVarint(d));var g=di(this);for(u=u||[];this.pos<g;)u.push(this.readVarint(d));return u},readPackedSVarint:function(u){if(this.type!==yr.Bytes)return u.push(this.readSVarint());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==yr.Bytes)return u.push(this.readBoolean());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==yr.Bytes)return u.push(this.readFloat());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==yr.Bytes)return u.push(this.readDouble());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==yr.Bytes)return u.push(this.readFixed32());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==yr.Bytes)return u.push(this.readSFixed32());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==yr.Bytes)return u.push(this.readFixed64());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==yr.Bytes)return u.push(this.readSFixed64());var d=di(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed64());return u},skip:function(u){var d=7&u;if(d===yr.Varint)for(;this.buf[this.pos++]>127;);else if(d===yr.Bytes)this.pos=this.readVarint()+this.pos;else if(d===yr.Fixed32)this.pos+=4;else{if(d!==yr.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(u,d){this.writeVarint(u<<3|d)},realloc:function(u){for(var d=this.length||16;d<this.pos+u;)d*=2;if(d!==this.length){var g=new Uint8Array(d);g.set(this.buf),this.buf=g,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),bi(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),bi(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),bi(this.buf,-1&u,this.pos),bi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),bi(this.buf,-1&u,this.pos),bi(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(d,g){var A,P;if(d>=0?(A=d%4294967296|0,P=d/4294967296|0):(P=~(-d/4294967296),4294967295^(A=~(-d%4294967296))?A=A+1|0:(A=0,P=P+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(F,j,J){J.buf[J.pos++]=127&F|128,F>>>=7,J.buf[J.pos++]=127&F|128,F>>>=7,J.buf[J.pos++]=127&F|128,F>>>=7,J.buf[J.pos++]=127&F|128,J.buf[J.pos]=127&(F>>>=7)}(A,0,g),function(F,j){var J=(7&F)<<4;j.buf[j.pos++]|=J|((F>>>=3)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F)))))}(P,g)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var d=this.pos;this.pos=function(A,P,F){for(var j,J,be=0;be<P.length;be++){if((j=P.charCodeAt(be))>55295&&j<57344){if(!J){j>56319||be+1===P.length?(A[F++]=239,A[F++]=191,A[F++]=189):J=j;continue}if(j<56320){A[F++]=239,A[F++]=191,A[F++]=189,J=j;continue}j=J-55296<<10|j-56320|65536,J=null}else J&&(A[F++]=239,A[F++]=191,A[F++]=189,J=null);j<128?A[F++]=j:(j<2048?A[F++]=j>>6|192:(j<65536?A[F++]=j>>12|224:(A[F++]=j>>18|240,A[F++]=j>>12&63|128),A[F++]=j>>6&63|128),A[F++]=63&j|128)}return F}(this.buf,u,this.pos);var g=this.pos-d;g>=128&&Mi(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeFloat:function(u){this.realloc(4),$r(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),$r(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var d=u.length;this.writeVarint(d),this.realloc(d);for(var g=0;g<d;g++)this.buf[this.pos++]=u[g]},writeRawMessage:function(u,d){this.pos++;var g=this.pos;u(d,this);var A=this.pos-g;A>=128&&Mi(g,A,this),this.pos=g-1,this.writeVarint(A),this.pos+=A},writeMessage:function(u,d,g){this.writeTag(u,yr.Bytes),this.writeRawMessage(d,g)},writePackedVarint:function(u,d){d.length&&this.writeMessage(u,Bi,d)},writePackedSVarint:function(u,d){d.length&&this.writeMessage(u,Xi,d)},writePackedBoolean:function(u,d){d.length&&this.writeMessage(u,dr,d)},writePackedFloat:function(u,d){d.length&&this.writeMessage(u,mi,d)},writePackedDouble:function(u,d){d.length&&this.writeMessage(u,Ui,d)},writePackedFixed32:function(u,d){d.length&&this.writeMessage(u,Br,d)},writePackedSFixed32:function(u,d){d.length&&this.writeMessage(u,gi,d)},writePackedFixed64:function(u,d){d.length&&this.writeMessage(u,oo,d)},writePackedSFixed64:function(u,d){d.length&&this.writeMessage(u,ii,d)},writeBytesField:function(u,d){this.writeTag(u,yr.Bytes),this.writeBytes(d)},writeFixed32Field:function(u,d){this.writeTag(u,yr.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(u,d){this.writeTag(u,yr.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(u,d){this.writeTag(u,yr.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(u,d){this.writeTag(u,yr.Fixed64),this.writeSFixed64(d)},writeVarintField:function(u,d){this.writeTag(u,yr.Varint),this.writeVarint(d)},writeSVarintField:function(u,d){this.writeTag(u,yr.Varint),this.writeSVarint(d)},writeStringField:function(u,d){this.writeTag(u,yr.Bytes),this.writeString(d)},writeFloatField:function(u,d){this.writeTag(u,yr.Fixed32),this.writeFloat(d)},writeDoubleField:function(u,d){this.writeTag(u,yr.Fixed64),this.writeDouble(d)},writeBooleanField:function(u,d){this.writeVarintField(u,!!d)}};var Ki=function(u,d){var g=d.pixelRatio,A=d.version,P=d.stretchX,F=d.stretchY,j=d.content;this.paddedRect=u,this.pixelRatio=g,this.stretchX=P,this.stretchY=F,this.content=j,this.version=A},wi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},wi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},wi.tlbr.get=function(){return this.tl.concat(this.br)},wi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ki.prototype,wi);var qr=function(u,d){var g={},A={};this.haveRenderCallbacks=[];var P=[];this.addImages(u,g,P),this.addImages(d,A,P);var F=pa(P),j=new pc({width:F.w||1,height:F.h||1});for(var J in u){var be=u[J],Ne=g[J].paddedRect;pc.copy(be.data,j,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},be.data)}for(var $e in d){var at=d[$e],Tt=A[$e].paddedRect,Bt=Tt.x+1,dn=Tt.y+1,yn=at.data.width,Gn=at.data.height;pc.copy(at.data,j,{x:0,y:0},{x:Bt,y:dn},at.data),pc.copy(at.data,j,{x:0,y:Gn-1},{x:Bt,y:dn-1},{width:yn,height:1}),pc.copy(at.data,j,{x:0,y:0},{x:Bt,y:dn+Gn},{width:yn,height:1}),pc.copy(at.data,j,{x:yn-1,y:0},{x:Bt-1,y:dn},{width:1,height:Gn}),pc.copy(at.data,j,{x:0,y:0},{x:Bt+yn,y:dn},{width:1,height:Gn})}this.image=j,this.iconPositions=g,this.patternPositions=A};qr.prototype.addImages=function(u,d,g){for(var A in u){var P=u[A],F={x:0,y:0,w:P.data.width+2,h:P.data.height+2};g.push(F),d[A]=new Ki(F,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(A)}},qr.prototype.patchUpdatedImages=function(u,d){for(var g in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[g],u.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],u.getImage(g),d)},qr.prototype.patchUpdatedImage=function(u,d,g){if(u&&d&&u.version!==d.version){u.version=d.version;var A=u.tl;g.update(d.data,void 0,{x:A[0],y:A[1]})}},eo("ImagePosition",Ki),eo("ImageAtlas",qr);var Bo={horizontal:1,vertical:2,horizontalOnly:3},Ca=function(){this.scale=1,this.fontStack="",this.imageName=null};Ca.forText=function(u,d){var g=new Ca;return g.scale=u||1,g.fontStack=d,g},Ca.forImage=function(u){var d=new Ca;return d.imageName=u,d};var so=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function va(u,d,g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn){var Gn,In=so.fromFeature(u,P);at===Bo.vertical&&In.verticalizePunctuation();var cr=zc.processBidirectionalText,gr=zc.processStyledBidirectionalText;if(cr&&In.sections.length===1){Gn=[];for(var Ir=0,Dr=cr(In.toString(),Zl(In,Ne,F,d,A,Bt,dn));Ir<Dr.length;Ir+=1){var Wr=Dr[Ir],Ii=new so;Ii.text=Wr,Ii.sections=In.sections;for(var $i=0;$i<Wr.length;$i++)Ii.sectionIndex.push(0);Gn.push(Ii)}}else if(gr){Gn=[];for(var ko=0,fo=gr(In.text,In.sectionIndex,Zl(In,Ne,F,d,A,Bt,dn));ko<fo.length;ko+=1){var Yo=fo[ko],po=new so;po.text=Yo[0],po.sectionIndex=Yo[1],po.sections=In.sections,Gn.push(po)}}else Gn=function(Oo,Xa){for(var Vo=[],ns=Oo.text,zo=0,Os=0,sl=Xa;Os<sl.length;Os+=1){var nu=sl[Os];Vo.push(Oo.substring(zo,nu)),zo=nu}return zo<ns.length&&Vo.push(Oo.substring(zo,ns.length)),Vo}(In,Zl(In,Ne,F,d,A,Bt,dn));var Fa=[],ca={positionedLines:Fa,text:In.toString(),top:$e[1],bottom:$e[1],left:$e[0],right:$e[0],writingMode:at,iconsInText:!1,verticalizable:!1};return function(Oo,Xa,Vo,ns,zo,Os,sl,nu,Ml,Rl,ru,_u){for(var Cu=0,Vc=-17,Wu=0,Ac=0,$l=nu==="right"?1:nu==="left"?0:.5,ic=0,Ka=0,nl=zo;Ka<nl.length;Ka+=1){var Ys=nl[Ka];Ys.trim();var bs=Ys.getMaxScale(),Hc=24*(bs-1),Cc={positionedGlyphs:[],lineOffset:0};Oo.positionedLines[ic]=Cc;var yl=Cc.positionedGlyphs,bu=0;if(Ys.length()){for(var gc=0;gc<Ys.length();gc++){var ss=Ys.getSection(gc),Fs=Ys.getSectionIndex(gc),rh=Ys.getCharCode(gc),zd=0,_l=null,bp=null,Gc=null,Ud=24,Hf=!(Ml===Bo.horizontal||!ru&&!Md(rh)||ru&&(ua[rh]||(C0=rh,Fi.Arabic(C0)||Fi["Arabic Supplement"](C0)||Fi["Arabic Extended-A"](C0)||Fi["Arabic Presentation Forms-A"](C0)||Fi["Arabic Presentation Forms-B"](C0))));if(ss.imageName){var ih=ns[ss.imageName];if(!ih)continue;Gc=ss.imageName,Oo.iconsInText=Oo.iconsInText||!0,bp=ih.paddedRect;var Qh=ih.displaySize;ss.scale=24*ss.scale/_u,zd=Hc+(24-Qh[1]*ss.scale),Ud=(_l={width:Qh[0],height:Qh[1],left:1,top:-3,advance:Hf?Qh[1]:Qh[0]}).advance;var Jh=Hf?Qh[0]*ss.scale-24*bs:Qh[1]*ss.scale-24*bs;Jh>0&&Jh>bu&&(bu=Jh)}else{var xp=Vo[ss.fontStack],Gf=xp&&xp[rh];if(Gf&&Gf.rect)bp=Gf.rect,_l=Gf.metrics;else{var $m=Xa[ss.fontStack],qm=$m&&$m[rh];if(!qm)continue;_l=qm.metrics}zd=24*(bs-ss.scale)}Hf?(Oo.verticalizable=!0,yl.push({glyph:rh,imageName:Gc,x:Cu,y:Vc+zd,vertical:Hf,scale:ss.scale,fontStack:ss.fontStack,sectionIndex:Fs,metrics:_l,rect:bp}),Cu+=Ud*ss.scale+Rl):(yl.push({glyph:rh,imageName:Gc,x:Cu,y:Vc+zd,vertical:Hf,scale:ss.scale,fontStack:ss.fontStack,sectionIndex:Fs,metrics:_l,rect:bp}),Cu+=_l.advance*ss.scale+Rl)}yl.length!==0&&(Wu=Math.max(Cu-Rl,Wu),se(yl,0,yl.length-1,$l,bu)),Cu=0;var Qg=Os*bs+bu;Cc.lineOffset=Math.max(bu,Hc),Vc+=Qg,Ac=Math.max(Qg,Ac),++ic}else Vc+=Os,++ic}var C0,O0=Vc- -17,Ep=Qs(sl),e0=Ep.horizontalAlign,mv=Ep.verticalAlign;(function(Km,Qm,Jg,qv,Sp,gv,M0,Jm,eg){var Wc,Kv=(Qm-Jg)*Sp;Wc=gv!==M0?-Jm*qv- -17:(-qv*eg+.5)*M0;for(var R0=0,Qv=Km;R0<Qv.length;R0+=1)for(var wp=0,jd=Qv[R0].positionedGlyphs;wp<jd.length;wp+=1){var ed=jd[wp];ed.x+=Kv,ed.y+=Wc}})(Oo.positionedLines,$l,e0,mv,Wu,Ac,Os,O0,zo.length),Oo.top+=-mv*O0,Oo.bottom=Oo.top+O0,Oo.left+=-e0*Wu,Oo.right=Oo.left+Wu}(ca,d,g,A,Gn,j,J,be,at,Ne,Tt,yn),!function(Oo){for(var Xa=0,Vo=Oo;Xa<Vo.length;Xa+=1)if(Vo[Xa].positionedGlyphs.length!==0)return!1;return!0}(Fa)&&ca}so.fromFeature=function(u,d){for(var g=new so,A=0;A<u.sections.length;A++){var P=u.sections[A];P.image?g.addImageSection(P):g.addTextSection(P,d)}return g},so.prototype.length=function(){return this.text.length},so.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},so.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},so.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},so.prototype.verticalizePunctuation=function(){this.text=function(u){for(var d="",g=0;g<u.length;g++){var A=u.charCodeAt(g+1)||null,P=u.charCodeAt(g-1)||null;d+=A&&_h(A)&&!On[u[g+1]]||P&&_h(P)&&!On[u[g-1]]||!On[u[g]]?u[g]:On[u[g]]}return d}(this.text)},so.prototype.trim=function(){for(var u=0,d=0;d<this.text.length&&ua[this.text.charCodeAt(d)];d++)u++;for(var g=this.text.length,A=this.text.length-1;A>=0&&A>=u&&ua[this.text.charCodeAt(A)];A--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)},so.prototype.substring=function(u,d){var g=new so;return g.text=this.text.substring(u,d),g.sectionIndex=this.sectionIndex.slice(u,d),g.sections=this.sections,g},so.prototype.toString=function(){return this.text},so.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(d,g){return Math.max(d,u.sections[g].scale)},0)},so.prototype.addTextSection=function(u,d){this.text+=u.text,this.sections.push(Ca.forText(u.scale,u.fontStack||d));for(var g=this.sections.length-1,A=0;A<u.text.length;++A)this.sectionIndex.push(g)},so.prototype.addImageSection=function(u){var d=u.image?u.image.name:"";if(d.length!==0){var g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Ca.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}else Ze("Can't add FormattedSection with an empty image.")},so.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ua={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ko={};function ds(u,d,g,A,P,F){if(d.imageName){var j=A[d.imageName];return j?j.displaySize[0]*d.scale*24/F+P:0}var J=g[d.fontStack],be=J&&J[u];return be?be.metrics.advance*d.scale+P:0}function Wl(u,d,g,A){var P=Math.pow(u-d,2);return A?u<d?P/2:2*P:P+Math.abs(g)*g}function mu(u,d,g){var A=0;return u===10&&(A-=1e4),g&&(A+=150),u!==40&&u!==65288||(A+=50),d!==41&&d!==65289||(A+=50),A}function es(u,d,g,A,P,F){for(var j=null,J=Wl(d,g,P,F),be=0,Ne=A;be<Ne.length;be+=1){var $e=Ne[be],at=Wl(d-$e.x,g,P,F)+$e.badness;at<=J&&(j=$e,J=at)}return{index:u,x:d,priorBreak:j,badness:J}}function Zl(u,d,g,A,P,F,j){if(F!=="point")return[];if(!u)return[];for(var J,be=[],Ne=function(Gn,In,cr,gr,Ir,Dr){for(var Wr=0,Ii=0;Ii<Gn.length();Ii++){var $i=Gn.getSection(Ii);Wr+=ds(Gn.getCharCode(Ii),$i,gr,Ir,In,Dr)}return Wr/Math.max(1,Math.ceil(Wr/cr))}(u,d,g,A,P,j),$e=u.text.indexOf("\u200B")>=0,at=0,Tt=0;Tt<u.length();Tt++){var Bt=u.getSection(Tt),dn=u.getCharCode(Tt);if(ua[dn]||(at+=ds(dn,Bt,A,P,d,j)),Tt<u.length()-1){var yn=!((J=dn)<11904||!(Fi["Bopomofo Extended"](J)||Fi.Bopomofo(J)||Fi["CJK Compatibility Forms"](J)||Fi["CJK Compatibility Ideographs"](J)||Fi["CJK Compatibility"](J)||Fi["CJK Radicals Supplement"](J)||Fi["CJK Strokes"](J)||Fi["CJK Symbols and Punctuation"](J)||Fi["CJK Unified Ideographs Extension A"](J)||Fi["CJK Unified Ideographs"](J)||Fi["Enclosed CJK Letters and Months"](J)||Fi["Halfwidth and Fullwidth Forms"](J)||Fi.Hiragana(J)||Fi["Ideographic Description Characters"](J)||Fi["Kangxi Radicals"](J)||Fi["Katakana Phonetic Extensions"](J)||Fi.Katakana(J)||Fi["Vertical Forms"](J)||Fi["Yi Radicals"](J)||Fi["Yi Syllables"](J)));(Ko[dn]||yn||Bt.imageName)&&be.push(es(Tt+1,at,Ne,be,mu(dn,u.getCharCode(Tt+1),yn&&$e),!1))}}return function Gn(In){return In?Gn(In.priorBreak).concat(In.index):[]}(es(u.length(),at,Ne,be,0,!0))}function Qs(u){var d=.5,g=.5;switch(u){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:d,verticalAlign:g}}function se(u,d,g,A,P){if(A||P)for(var F=u[g],j=(u[g].x+F.metrics.advance*F.scale)*A,J=d;J<=g;J++)u[J].x-=j,u[J].y+=P}function tu(u,d,g,A,P,F){var j,J=u.image;if(J.content){var be=J.content,Ne=J.pixelRatio||1;j=[be[0]/Ne,be[1]/Ne,J.displaySize[0]-be[2]/Ne,J.displaySize[1]-be[3]/Ne]}var $e,at,Tt,Bt,dn=d.left*F,yn=d.right*F;g==="width"||g==="both"?(Bt=P[0]+dn-A[3],at=P[0]+yn+A[1]):at=(Bt=P[0]+(dn+yn-J.displaySize[0])/2)+J.displaySize[0];var Gn=d.top*F,In=d.bottom*F;return g==="height"||g==="both"?($e=P[1]+Gn-A[0],Tt=P[1]+In+A[2]):Tt=($e=P[1]+(Gn+In-J.displaySize[1])/2)+J.displaySize[1],{image:J,top:$e,right:at,bottom:Tt,left:Bt,collisionPadding:j}}Ko[10]=!0,Ko[32]=!0,Ko[38]=!0,Ko[40]=!0,Ko[41]=!0,Ko[43]=!0,Ko[45]=!0,Ko[47]=!0,Ko[173]=!0,Ko[183]=!0,Ko[8203]=!0,Ko[8208]=!0,Ko[8211]=!0,Ko[8231]=!0;var fl=function(u){function d(g,A,P,F){u.call(this,g,A),this.angle=P,F!==void 0&&(this.segment=F)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(ce);function or(u,d){var g=d.expression;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new wa(u+1))};if(g.kind==="source")return{kind:"source"};for(var A=g.zoomStops,P=g.interpolationType,F=0;F<A.length&&A[F]<=u;)F++;for(var j=F=Math.max(0,F-1);j<A.length&&A[j]<u+1;)j++;j=Math.min(A.length-1,j);var J=A[F],be=A[j];return g.kind==="composite"?{kind:"composite",minZoom:J,maxZoom:be,interpolationType:P}:{kind:"camera",minZoom:J,maxZoom:be,minSize:g.evaluate(new wa(J)),maxSize:g.evaluate(new wa(be)),interpolationType:P}}function Qr(u,d,g){var A=d.uSize,P=g.lowerSize;return u.kind==="source"?P/128:u.kind==="composite"?Ds(P/128,g.upperSize/128,d.uSizeT):A}function Js(u,d){var g=0,A=0;if(u.kind==="constant")A=u.layoutSize;else if(u.kind!=="source"){var P=u.interpolationType,F=P?Re(Gl.interpolationFactor(P,d,u.minZoom,u.maxZoom),0,1):0;u.kind==="camera"?A=Ds(u.minSize,u.maxSize,F):g=F}return{uSizeT:g,uSize:A}}eo("Anchor",fl);var Oa=Object.freeze({__proto__:null,getSizeData:or,evaluateSizeForFeature:Qr,evaluateSizeForZoom:Js,SIZE_PACK_FACTOR:128});function Hu(u,d,g,A,P){if(d.segment===void 0)return!0;for(var F=d,j=d.segment+1,J=0;J>-g/2;){if(--j<0)return!1;J-=u[j].dist(F),F=u[j]}J+=u[j].dist(u[j+1]),j++;for(var be=[],Ne=0;J<g/2;){var $e=u[j],at=u[j+1];if(!at)return!1;var Tt=u[j-1].angleTo($e)-$e.angleTo(at);for(Tt=Math.abs((Tt+3*Math.PI)%(2*Math.PI)-Math.PI),be.push({distance:J,angleDelta:Tt}),Ne+=Tt;J-be[0].distance>A;)Ne-=be.shift().angleDelta;if(Ne>P)return!1;j++,J+=$e.dist(at)}return!0}function Ns(u){for(var d=0,g=0;g<u.length-1;g++)d+=u[g].dist(u[g+1]);return d}function oa(u,d,g){return u?.6*d*g:0}function Pa(u,d){return Math.max(u?u.right-u.left:0,d?d.right-d.left:0)}function ts(u,d,g,A,P,F){for(var j=oa(g,P,F),J=Pa(g,A)*F,be=0,Ne=Ns(u)/2,$e=0;$e<u.length-1;$e++){var at=u[$e],Tt=u[$e+1],Bt=at.dist(Tt);if(be+Bt>Ne){var dn=(Ne-be)/Bt,yn=Ds(at.x,Tt.x,dn),Gn=Ds(at.y,Tt.y,dn),In=new fl(yn,Gn,Tt.angleTo(at),$e);return In._round(),!j||Hu(u,In,J,j,d)?In:void 0}be+=Bt}}function gu(u,d,g,A,P,F,j,J,be){var Ne=oa(A,F,j),$e=Pa(A,P),at=$e*j,Tt=u[0].x===0||u[0].x===be||u[0].y===0||u[0].y===be;return d-at<d/4&&(d=at+d/4),function Bt(dn,yn,Gn,In,cr,gr,Ir,Dr,Wr){for(var Ii=gr/2,$i=Ns(dn),ko=0,fo=yn-Gn,Yo=[],po=0;po<dn.length-1;po++){for(var Fa=dn[po],ca=dn[po+1],Oo=Fa.dist(ca),Xa=ca.angleTo(Fa);fo+Gn<ko+Oo;){var Vo=((fo+=Gn)-ko)/Oo,ns=Ds(Fa.x,ca.x,Vo),zo=Ds(Fa.y,ca.y,Vo);if(ns>=0&&ns<Wr&&zo>=0&&zo<Wr&&fo-Ii>=0&&fo+Ii<=$i){var Os=new fl(ns,zo,Xa,po);Os._round(),In&&!Hu(dn,Os,gr,In,cr)||Yo.push(Os)}}ko+=Oo}return Dr||Yo.length||Ir||(Yo=Bt(dn,ko/2,Gn,In,cr,gr,Ir,!0,Wr)),Yo}(u,Tt?d/2*J%d:($e/2+2*F)*j*J%d,d,Ne,g,at,Tt,!1,be)}function wh(u,d,g,A,P){for(var F=[],j=0;j<u.length;j++)for(var J=u[j],be=void 0,Ne=0;Ne<J.length-1;Ne++){var $e=J[Ne],at=J[Ne+1];$e.x<d&&at.x<d||($e.x<d?$e=new ce(d,$e.y+(d-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round():at.x<d&&(at=new ce(d,$e.y+(d-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round()),$e.y<g&&at.y<g||($e.y<g?$e=new ce($e.x+(g-$e.y)/(at.y-$e.y)*(at.x-$e.x),g)._round():at.y<g&&(at=new ce($e.x+(g-$e.y)/(at.y-$e.y)*(at.x-$e.x),g)._round()),$e.x>=A&&at.x>=A||($e.x>=A?$e=new ce(A,$e.y+(A-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round():at.x>=A&&(at=new ce(A,$e.y+(A-$e.x)/(at.x-$e.x)*(at.y-$e.y))._round()),$e.y>=P&&at.y>=P||($e.y>=P?$e=new ce($e.x+(P-$e.y)/(at.y-$e.y)*(at.x-$e.x),P)._round():at.y>=P&&(at=new ce($e.x+(P-$e.y)/(at.y-$e.y)*(at.x-$e.x),P)._round()),be&&$e.equals(be[be.length-1])||F.push(be=[$e]),be.push(at)))))}return F}function _n(u,d,g,A){var P=[],F=u.image,j=F.pixelRatio,J=F.paddedRect.w-2,be=F.paddedRect.h-2,Ne=u.right-u.left,$e=u.bottom-u.top,at=F.stretchX||[[0,J]],Tt=F.stretchY||[[0,be]],Bt=function(ns,zo){return ns+zo[1]-zo[0]},dn=at.reduce(Bt,0),yn=Tt.reduce(Bt,0),Gn=J-dn,In=be-yn,cr=0,gr=dn,Ir=0,Dr=yn,Wr=0,Ii=Gn,$i=0,ko=In;if(F.content&&A){var fo=F.content;cr=Or(at,0,fo[0]),Ir=Or(Tt,0,fo[1]),gr=Or(at,fo[0],fo[2]),Dr=Or(Tt,fo[1],fo[3]),Wr=fo[0]-cr,$i=fo[1]-Ir,Ii=fo[2]-fo[0]-gr,ko=fo[3]-fo[1]-Dr}var Yo=function(ns,zo,Os,sl){var nu=lo(ns.stretch-cr,gr,Ne,u.left),Ml=Na(ns.fixed-Wr,Ii,ns.stretch,dn),Rl=lo(zo.stretch-Ir,Dr,$e,u.top),ru=Na(zo.fixed-$i,ko,zo.stretch,yn),_u=lo(Os.stretch-cr,gr,Ne,u.left),Cu=Na(Os.fixed-Wr,Ii,Os.stretch,dn),Vc=lo(sl.stretch-Ir,Dr,$e,u.top),Wu=Na(sl.fixed-$i,ko,sl.stretch,yn),Ac=new ce(nu,Rl),$l=new ce(_u,Rl),ic=new ce(_u,Vc),Ka=new ce(nu,Vc),nl=new ce(Ml/j,ru/j),Ys=new ce(Cu/j,Wu/j),bs=d*Math.PI/180;if(bs){var Hc=Math.sin(bs),Cc=Math.cos(bs),yl=[Cc,-Hc,Hc,Cc];Ac._matMult(yl),$l._matMult(yl),Ka._matMult(yl),ic._matMult(yl)}var bu=ns.stretch+ns.fixed,gc=zo.stretch+zo.fixed;return{tl:Ac,tr:$l,bl:Ka,br:ic,tex:{x:F.paddedRect.x+1+bu,y:F.paddedRect.y+1+gc,w:Os.stretch+Os.fixed-bu,h:sl.stretch+sl.fixed-gc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:nl,pixelOffsetBR:Ys,minFontScaleX:Ii/j/Ne,minFontScaleY:ko/j/$e,isSDF:g}};if(A&&(F.stretchX||F.stretchY))for(var po=Sr(at,Gn,dn),Fa=Sr(Tt,In,yn),ca=0;ca<po.length-1;ca++)for(var Oo=po[ca],Xa=po[ca+1],Vo=0;Vo<Fa.length-1;Vo++)P.push(Yo(Oo,Fa[Vo],Xa,Fa[Vo+1]));else P.push(Yo({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:J+1},{fixed:0,stretch:be+1}));return P}function Or(u,d,g){for(var A=0,P=0,F=u;P<F.length;P+=1){var j=F[P];A+=Math.max(d,Math.min(g,j[1]))-Math.max(d,Math.min(g,j[0]))}return A}function Sr(u,d,g){for(var A=[{fixed:-1,stretch:0}],P=0,F=u;P<F.length;P+=1){var j=F[P],J=j[0],be=j[1],Ne=A[A.length-1];A.push({fixed:J-Ne.stretch,stretch:Ne.stretch}),A.push({fixed:J-Ne.stretch,stretch:Ne.stretch+(be-J)})}return A.push({fixed:d+1,stretch:g}),A}function lo(u,d,g,A){return u/d*g+A}function Na(u,d,g,A){return u-d*g/A}var el=function(u,d,g,A,P,F,j,J,be,Ne){if(this.boxStartIndex=u.length,be){var $e=F.top,at=F.bottom,Tt=F.collisionPadding;Tt&&($e-=Tt[1],at+=Tt[3]);var Bt=at-$e;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var dn=F.top*j-J,yn=F.bottom*j+J,Gn=F.left*j-J,In=F.right*j+J,cr=F.collisionPadding;if(cr&&(Gn-=cr[0]*j,dn-=cr[1]*j,In+=cr[2]*j,yn+=cr[3]*j),Ne){var gr=new ce(Gn,dn),Ir=new ce(In,dn),Dr=new ce(Gn,yn),Wr=new ce(In,yn),Ii=Ne*Math.PI/180;gr._rotate(Ii),Ir._rotate(Ii),Dr._rotate(Ii),Wr._rotate(Ii),Gn=Math.min(gr.x,Ir.x,Dr.x,Wr.x),In=Math.max(gr.x,Ir.x,Dr.x,Wr.x),dn=Math.min(gr.y,Ir.y,Dr.y,Wr.y),yn=Math.max(gr.y,Ir.y,Dr.y,Wr.y)}u.emplaceBack(d.x,d.y,Gn,dn,In,yn,g,A,P)}this.boxEndIndex=u.length},Nt=function(u,d){if(u===void 0&&(u=[]),d===void 0&&(d=rn),this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function rn(u,d){return u<d?-1:u>d?1:0}function Mn(u,d,g){d===void 0&&(d=1),g===void 0&&(g=!1);for(var A=1/0,P=1/0,F=-1/0,j=-1/0,J=u[0],be=0;be<J.length;be++){var Ne=J[be];(!be||Ne.x<A)&&(A=Ne.x),(!be||Ne.y<P)&&(P=Ne.y),(!be||Ne.x>F)&&(F=Ne.x),(!be||Ne.y>j)&&(j=Ne.y)}var $e=Math.min(F-A,j-P),at=$e/2,Tt=new Nt([],Tr);if($e===0)return new ce(A,P);for(var Bt=A;Bt<F;Bt+=$e)for(var dn=P;dn<j;dn+=$e)Tt.push(new Er(Bt+at,dn+at,at,u));for(var yn=function(cr){for(var gr=0,Ir=0,Dr=0,Wr=cr[0],Ii=0,$i=Wr.length,ko=$i-1;Ii<$i;ko=Ii++){var fo=Wr[Ii],Yo=Wr[ko],po=fo.x*Yo.y-Yo.x*fo.y;Ir+=(fo.x+Yo.x)*po,Dr+=(fo.y+Yo.y)*po,gr+=3*po}return new Er(Ir/gr,Dr/gr,0,cr)}(u),Gn=Tt.length;Tt.length;){var In=Tt.pop();(In.d>yn.d||!yn.d)&&(yn=In,g&&console.log("found best %d after %d probes",Math.round(1e4*In.d)/1e4,Gn)),In.max-yn.d<=d||(Tt.push(new Er(In.p.x-(at=In.h/2),In.p.y-at,at,u)),Tt.push(new Er(In.p.x+at,In.p.y-at,at,u)),Tt.push(new Er(In.p.x-at,In.p.y+at,at,u)),Tt.push(new Er(In.p.x+at,In.p.y+at,at,u)),Gn+=4)}return g&&(console.log("num probes: "+Gn),console.log("best distance: "+yn.d)),yn.p}function Tr(u,d){return d.max-u.max}function Er(u,d,g,A){this.p=new ce(u,d),this.h=g,this.d=function(P,F){for(var j=!1,J=1/0,be=0;be<F.length;be++)for(var Ne=F[be],$e=0,at=Ne.length,Tt=at-1;$e<at;Tt=$e++){var Bt=Ne[$e],dn=Ne[Tt];Bt.y>P.y!=dn.y>P.y&&P.x<(dn.x-Bt.x)*(P.y-Bt.y)/(dn.y-Bt.y)+Bt.x&&(j=!j),J=Math.min(J,Vh(P,Bt,dn))}return(j?1:-1)*Math.sqrt(J)}(this.p,A),this.max=this.d+this.h*Math.SQRT2}Nt.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Nt.prototype.pop=function(){if(this.length!==0){var u=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),u}},Nt.prototype.peek=function(){return this.data[0]},Nt.prototype._up=function(u){for(var d=this.data,g=this.compare,A=d[u];u>0;){var P=u-1>>1,F=d[P];if(g(A,F)>=0)break;d[u]=F,u=P}d[u]=A},Nt.prototype._down=function(u){for(var d=this.data,g=this.compare,A=this.length>>1,P=d[u];u<A;){var F=1+(u<<1),j=d[F],J=F+1;if(J<this.length&&g(d[J],j)<0&&(F=J,j=d[J]),g(j,P)>=0)break;d[u]=j,u=F}d[u]=P};var Hn=Number.POSITIVE_INFINITY;function tr(u,d){return d[1]!==Hn?function(g,A,P){var F=0,j=0;switch(A=Math.abs(A),P=Math.abs(P),g){case"top-right":case"top-left":case"top":j=P-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-P}switch(g){case"top-right":case"bottom-right":case"right":F=-A;break;case"top-left":case"bottom-left":case"left":F=A}return[F,j]}(u,d[0],d[1]):function(g,A){var P=0,F=0;A<0&&(A=0);var j=A/Math.sqrt(2);switch(g){case"top-right":case"top-left":F=j-7;break;case"bottom-right":case"bottom-left":F=7-j;break;case"bottom":F=7-A;break;case"top":F=A-7}switch(g){case"top-right":case"bottom-right":P=-j;break;case"top-left":case"bottom-left":P=j;break;case"left":P=A;break;case"right":P=-A}return[P,F]}(u,d[0])}function ar(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Sn(u,d,g,A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn){var yn=function(Ir,Dr,Wr,Ii,$i,ko,fo,Yo){for(var po=Ii.layout.get("text-rotate").evaluate(ko,{})*Math.PI/180,Fa=[],ca=0,Oo=Dr.positionedLines;ca<Oo.length;ca+=1)for(var Xa=Oo[ca],Vo=0,ns=Xa.positionedGlyphs;Vo<ns.length;Vo+=1){var zo=ns[Vo];if(zo.rect){var Os=zo.rect||{},sl=4,nu=!0,Ml=1,Rl=0,ru=($i||Yo)&&zo.vertical,_u=zo.metrics.advance*zo.scale/2;if(Yo&&Dr.verticalizable&&(Rl=Xa.lineOffset/2-(zo.imageName?-(24-zo.metrics.width*zo.scale)/2:24*(zo.scale-1))),zo.imageName){var Cu=fo[zo.imageName];nu=Cu.sdf,sl=1/(Ml=Cu.pixelRatio)}var Vc=$i?[zo.x+_u,zo.y]:[0,0],Wu=$i?[0,0]:[zo.x+_u+Wr[0],zo.y+Wr[1]-Rl],Ac=[0,0];ru&&(Ac=Wu,Wu=[0,0]);var $l=(zo.metrics.left-sl)*zo.scale-_u+Wu[0],ic=(-zo.metrics.top-sl)*zo.scale+Wu[1],Ka=$l+Os.w*zo.scale/Ml,nl=ic+Os.h*zo.scale/Ml,Ys=new ce($l,ic),bs=new ce(Ka,ic),Hc=new ce($l,nl),Cc=new ce(Ka,nl);if(ru){var yl=new ce(-_u,_u- -17),bu=-Math.PI/2,gc=12-_u,ss=new ce(22-gc,-(zo.imageName?gc:0)),Fs=new(Function.prototype.bind.apply(ce,[null].concat(Ac)));Ys._rotateAround(bu,yl)._add(ss)._add(Fs),bs._rotateAround(bu,yl)._add(ss)._add(Fs),Hc._rotateAround(bu,yl)._add(ss)._add(Fs),Cc._rotateAround(bu,yl)._add(ss)._add(Fs)}if(po){var rh=Math.sin(po),zd=Math.cos(po),_l=[zd,-rh,rh,zd];Ys._matMult(_l),bs._matMult(_l),Hc._matMult(_l),Cc._matMult(_l)}var bp=new ce(0,0),Gc=new ce(0,0);Fa.push({tl:Ys,tr:bs,bl:Hc,br:Cc,tex:Os,writingMode:Dr.writingMode,glyphOffset:Vc,sectionIndex:zo.sectionIndex,isSDF:nu,pixelOffsetTL:bp,pixelOffsetBR:Gc,minFontScaleX:0,minFontScaleY:0})}}return Fa}(0,g,J,P,F,j,A,u.allowVerticalPlacement),Gn=u.textSizeData,In=null;Gn.kind==="source"?(In=[128*P.layout.get("text-size").evaluate(j,{})])[0]>32640&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Gn.kind==="composite"&&((In=[128*Bt.compositeTextSizes[0].evaluate(j,{},dn),128*Bt.compositeTextSizes[1].evaluate(j,{},dn)])[0]>32640||In[1]>32640)&&Ze(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,yn,In,J,F,j,Ne,d,be.lineStartIndex,be.lineLength,Tt,dn);for(var cr=0,gr=$e;cr<gr.length;cr+=1)at[gr[cr]]=u.text.placedSymbolArray.length-1;return 4*yn.length}function Zn(u){for(var d in u)return u[d];return null}function tn(u,d,g,A){var P=u.compareText;if(d in P){for(var F=P[d],j=F.length-1;j>=0;j--)if(A.dist(F[j])<g)return!0}else P[d]=[];return P[d].push(A),!1}var $n=mp.VectorTileFeature.types,kr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jr(u,d,g,A,P,F,j,J,be,Ne,$e,at,Tt){var Bt=J?Math.min(32640,Math.round(J[0])):0,dn=J?Math.min(32640,Math.round(J[1])):0;u.emplaceBack(d,g,Math.round(32*A),Math.round(32*P),F,j,(Bt<<1)+(be?1:0),dn,16*Ne,16*$e,256*at,256*Tt)}function vi(u,d,g){u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g)}function oi(u){for(var d=0,g=u.sections;d<g.length;d+=1)if(d0(g[d].text))return!0;return!1}var yi=function(u){this.layoutVertexArray=new Hp,this.indexArray=new Bf,this.programConfigurations=u,this.segments=new Ht,this.dynamicLayoutVertexArray=new Uc,this.opacityVertexArray=new Id,this.placedSymbolArray=new O};yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yi.prototype.upload=function(u,d,g,A){this.isEmpty()||(g&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,gp.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,s_.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,kr,!0),this.opacityVertexBuffer.itemSize=1),(g||A)&&this.programConfigurations.upload(u))},yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},eo("SymbolBuffers",yi);var Do=function(u,d,g){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Ht,this.collisionVertexArray=new y0};Do.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Zv.members,!0)},Do.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},eo("CollisionBuffers",Do);var Hi=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tu([]),this.placementViewportMatrix=Tu([]);var d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=or(this.zoom,d["text-size"]),this.iconSizeData=or(this.zoom,d["icon-size"]);var g=this.layers[0].layout,A=g.get("symbol-sort-key"),P=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&A.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(function(F){return Bo[F]})),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id}),this.sourceID=u.sourceID};Hi.prototype.createArrays=function(){this.text=new yi(new Fo(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new yi(new Fo(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new Q,this.lineVertexArray=new ge,this.symbolInstances=new Z},Hi.prototype.calculateGlyphDependencies=function(u,d,g,A,P){for(var F=0;F<u.length;F++)if(d[u.charCodeAt(F)]=!0,(g||A)&&P){var j=On[u.charAt(F)];j&&(d[j.charCodeAt(0)]=!0)}},Hi.prototype.populate=function(u,d,g){var A=this.layers[0],P=A.layout,F=P.get("text-font"),j=P.get("text-field"),J=P.get("icon-image"),be=(j.value.kind!=="constant"||j.value.value instanceof hr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Ne=J.value.kind!=="constant"||!!J.value.value||Object.keys(J.parameters).length>0,$e=P.get("symbol-sort-key");if(this.features=[],be||Ne){for(var at=d.iconDependencies,Tt=d.glyphDependencies,Bt=d.availableImages,dn=new wa(this.zoom),yn=0,Gn=u;yn<Gn.length;yn+=1){var In=Gn[yn],cr=In.feature,gr=In.id,Ir=In.index,Dr=In.sourceLayerIndex,Wr=A._featureFilter.needGeometry,Ii=wl(cr,Wr);if(A._featureFilter.filter(dn,Ii,g)){Wr||(Ii.geometry=ws(cr));var $i=void 0;if(be){var ko=A.getValueAndResolveTokens("text-field",Ii,g,Bt),fo=hr.factory(ko);oi(fo)&&(this.hasRTLText=!0),(!this.hasRTLText||rv()==="unavailable"||this.hasRTLText&&zc.isParsed())&&($i=qt(fo,A,Ii))}var Yo=void 0;if(Ne){var po=A.getValueAndResolveTokens("icon-image",Ii,g,Bt);Yo=po instanceof ei?po:ei.fromString(po)}if($i||Yo){var Fa=this.sortFeaturesByKey?$e.evaluate(Ii,{},g):void 0;if(this.features.push({id:gr,text:$i,icon:Yo,index:Ir,sourceLayerIndex:Dr,geometry:Ii.geometry,properties:cr.properties,type:$n[cr.type],sortKey:Fa}),Yo&&(at[Yo.name]=!0),$i){var ca=F.evaluate(Ii,{},g).join(","),Oo=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Bo.vertical)>=0;for(var Xa=0,Vo=$i.sections;Xa<Vo.length;Xa+=1){var ns=Vo[Xa];if(ns.image)at[ns.image.name]=!0;else{var zo=Ef($i.toString()),Os=ns.fontStack||ca,sl=Tt[Os]=Tt[Os]||{};this.calculateGlyphDependencies(ns.text,sl,Oo,this.allowVerticalPlacement,zo)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(nu){var Ml={},Rl={},ru=[],_u=0;function Cu(yl){ru.push(nu[yl]),_u++}function Vc(yl,bu,gc){var ss=Rl[yl];return delete Rl[yl],Rl[bu]=ss,ru[ss].geometry[0].pop(),ru[ss].geometry[0]=ru[ss].geometry[0].concat(gc[0]),ss}function Wu(yl,bu,gc){var ss=Ml[bu];return delete Ml[bu],Ml[yl]=ss,ru[ss].geometry[0].shift(),ru[ss].geometry[0]=gc[0].concat(ru[ss].geometry[0]),ss}function Ac(yl,bu,gc){var ss=gc?bu[0][bu[0].length-1]:bu[0][0];return yl+":"+ss.x+":"+ss.y}for(var $l=0;$l<nu.length;$l++){var ic=nu[$l],Ka=ic.geometry,nl=ic.text?ic.text.toString():null;if(nl){var Ys=Ac(nl,Ka),bs=Ac(nl,Ka,!0);if(Ys in Rl&&bs in Ml&&Rl[Ys]!==Ml[bs]){var Hc=Wu(Ys,bs,Ka),Cc=Vc(Ys,bs,ru[Hc].geometry);delete Ml[Ys],delete Rl[bs],Rl[Ac(nl,ru[Cc].geometry,!0)]=Cc,ru[Hc].geometry=null}else Ys in Rl?Vc(Ys,bs,Ka):bs in Ml?Wu(Ys,bs,Ka):(Cu($l),Ml[Ys]=_u-1,Rl[bs]=_u-1)}else Cu($l)}return ru.filter(function(yl){return yl.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(nu,Ml){return nu.sortKey-Ml.sortKey})}},Hi.prototype.update=function(u,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,g))},Hi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Hi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Hi.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Hi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Hi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Hi.prototype.addToLineVertexArray=function(u,d){var g=this.lineVertexArray.length;if(u.segment!==void 0){for(var A=u.dist(d[u.segment+1]),P=u.dist(d[u.segment]),F={},j=u.segment+1;j<d.length;j++)F[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:A},j<d.length-1&&(A+=d[j+1].dist(d[j]));for(var J=u.segment||0;J>=0;J--)F[J]={x:d[J].x,y:d[J].y,tileUnitDistanceFromAnchor:P},J>0&&(P+=d[J-1].dist(d[J]));for(var be=0;be<d.length;be++){var Ne=F[be];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}},Hi.prototype.addSymbols=function(u,d,g,A,P,F,j,J,be,Ne,$e,at){for(var Tt=u.indexArray,Bt=u.layoutVertexArray,dn=u.segments.prepareSegment(4*d.length,Bt,Tt,this.canOverlap?F.sortKey:void 0),yn=this.glyphOffsetArray.length,Gn=dn.vertexLength,In=this.allowVerticalPlacement&&j===Bo.vertical?Math.PI/2:0,cr=F.text&&F.text.sections,gr=0;gr<d.length;gr++){var Ir=d[gr],Dr=Ir.tl,Wr=Ir.tr,Ii=Ir.bl,$i=Ir.br,ko=Ir.tex,fo=Ir.pixelOffsetTL,Yo=Ir.pixelOffsetBR,po=Ir.minFontScaleX,Fa=Ir.minFontScaleY,ca=Ir.glyphOffset,Oo=Ir.isSDF,Xa=Ir.sectionIndex,Vo=dn.vertexLength,ns=ca[1];jr(Bt,J.x,J.y,Dr.x,ns+Dr.y,ko.x,ko.y,g,Oo,fo.x,fo.y,po,Fa),jr(Bt,J.x,J.y,Wr.x,ns+Wr.y,ko.x+ko.w,ko.y,g,Oo,Yo.x,fo.y,po,Fa),jr(Bt,J.x,J.y,Ii.x,ns+Ii.y,ko.x,ko.y+ko.h,g,Oo,fo.x,Yo.y,po,Fa),jr(Bt,J.x,J.y,$i.x,ns+$i.y,ko.x+ko.w,ko.y+ko.h,g,Oo,Yo.x,Yo.y,po,Fa),vi(u.dynamicLayoutVertexArray,J,In),Tt.emplaceBack(Vo,Vo+1,Vo+2),Tt.emplaceBack(Vo+1,Vo+2,Vo+3),dn.vertexLength+=4,dn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ca[0]),gr!==d.length-1&&Xa===d[gr+1].sectionIndex||u.programConfigurations.populatePaintArrays(Bt.length,F,F.index,{},at,cr&&cr[Xa])}u.placedSymbolArray.emplaceBack(J.x,J.y,yn,this.glyphOffsetArray.length-yn,Gn,be,Ne,J.segment,g?g[0]:0,g?g[1]:0,A[0],A[1],j,0,!1,0,$e)},Hi.prototype._addCollisionDebugVertex=function(u,d,g,A,P,F){return d.emplaceBack(0,0),u.emplaceBack(g.x,g.y,A,P,Math.round(F.x),Math.round(F.y))},Hi.prototype.addCollisionDebugVertices=function(u,d,g,A,P,F,j){var J=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),be=J.vertexLength,Ne=P.layoutVertexArray,$e=P.collisionVertexArray,at=j.anchorX,Tt=j.anchorY;this._addCollisionDebugVertex(Ne,$e,F,at,Tt,new ce(u,d)),this._addCollisionDebugVertex(Ne,$e,F,at,Tt,new ce(g,d)),this._addCollisionDebugVertex(Ne,$e,F,at,Tt,new ce(g,A)),this._addCollisionDebugVertex(Ne,$e,F,at,Tt,new ce(u,A)),J.vertexLength+=4;var Bt=P.indexArray;Bt.emplaceBack(be,be+1),Bt.emplaceBack(be+1,be+2),Bt.emplaceBack(be+2,be+3),Bt.emplaceBack(be+3,be),J.primitiveLength+=4},Hi.prototype.addDebugCollisionBoxes=function(u,d,g,A){for(var P=u;P<d;P++){var F=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,A?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,g)}},Hi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Do(Eh,$g.members,zf),this.iconCollisionBox=new Do(Eh,$g.members,zf);for(var u=0;u<this.symbolInstances.length;u++){var d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}},Hi.prototype._deserializeCollisionBoxesForSymbol=function(u,d,g,A,P,F,j,J,be){for(var Ne={},$e=d;$e<g;$e++){var at=u.get($e);Ne.textBox={x1:at.x1,y1:at.y1,x2:at.x2,y2:at.y2,anchorPointX:at.anchorPointX,anchorPointY:at.anchorPointY},Ne.textFeatureIndex=at.featureIndex;break}for(var Tt=A;Tt<P;Tt++){var Bt=u.get(Tt);Ne.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},Ne.verticalTextFeatureIndex=Bt.featureIndex;break}for(var dn=F;dn<j;dn++){var yn=u.get(dn);Ne.iconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},Ne.iconFeatureIndex=yn.featureIndex;break}for(var Gn=J;Gn<be;Gn++){var In=u.get(Gn);Ne.verticalIconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},Ne.verticalIconFeatureIndex=In.featureIndex;break}return Ne},Hi.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var d=0;d<this.symbolInstances.length;d++){var g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}},Hi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Hi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Hi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Hi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Hi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Hi.prototype.addIndicesForPlacedSymbol=function(u,d){for(var g=u.placedSymbolArray.get(d),A=g.vertexStartIndex+4*g.numGlyphs,P=g.vertexStartIndex;P<A;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),u.indexArray.emplaceBack(P+1,P+2,P+3)},Hi.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var d=Math.sin(u),g=Math.cos(u),A=[],P=[],F=[],j=0;j<this.symbolInstances.length;++j){F.push(j);var J=this.symbolInstances.get(j);A.push(0|Math.round(d*J.anchorX+g*J.anchorY)),P.push(J.featureIndex)}return F.sort(function(be,Ne){return A[be]-A[Ne]||P[Ne]-P[be]}),F},Hi.prototype.addToSortKeyRanges=function(u,d){var g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})},Hi.prototype.sortFeatures=function(u){var d=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var g=0,A=this.symbolInstanceIndexes;g<A.length;g+=1){var P=this.symbolInstances.get(A[g]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(F,j,J){F>=0&&J.indexOf(F)===j&&d.addIndicesForPlacedSymbol(d.text,F)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},eo("SymbolBucket",Hi,{omit:["layers","collisionBoxArray","features","compareText"]}),Hi.MAX_GLYPHS=65535,Hi.addDynamicAttributes=vi;var Yi=new vl({"symbol-placement":new No(Et.layout_symbol["symbol-placement"]),"symbol-spacing":new No(Et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new No(Et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new To(Et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new No(Et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new No(Et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new No(Et.layout_symbol["icon-ignore-placement"]),"icon-optional":new No(Et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new No(Et.layout_symbol["icon-rotation-alignment"]),"icon-size":new To(Et.layout_symbol["icon-size"]),"icon-text-fit":new No(Et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new No(Et.layout_symbol["icon-text-fit-padding"]),"icon-image":new To(Et.layout_symbol["icon-image"]),"icon-rotate":new To(Et.layout_symbol["icon-rotate"]),"icon-padding":new No(Et.layout_symbol["icon-padding"]),"icon-keep-upright":new No(Et.layout_symbol["icon-keep-upright"]),"icon-offset":new To(Et.layout_symbol["icon-offset"]),"icon-anchor":new To(Et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new No(Et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new No(Et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new No(Et.layout_symbol["text-rotation-alignment"]),"text-field":new To(Et.layout_symbol["text-field"]),"text-font":new To(Et.layout_symbol["text-font"]),"text-size":new To(Et.layout_symbol["text-size"]),"text-max-width":new To(Et.layout_symbol["text-max-width"]),"text-line-height":new No(Et.layout_symbol["text-line-height"]),"text-letter-spacing":new To(Et.layout_symbol["text-letter-spacing"]),"text-justify":new To(Et.layout_symbol["text-justify"]),"text-radial-offset":new To(Et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new No(Et.layout_symbol["text-variable-anchor"]),"text-anchor":new To(Et.layout_symbol["text-anchor"]),"text-max-angle":new No(Et.layout_symbol["text-max-angle"]),"text-writing-mode":new No(Et.layout_symbol["text-writing-mode"]),"text-rotate":new To(Et.layout_symbol["text-rotate"]),"text-padding":new No(Et.layout_symbol["text-padding"]),"text-keep-upright":new No(Et.layout_symbol["text-keep-upright"]),"text-transform":new To(Et.layout_symbol["text-transform"]),"text-offset":new To(Et.layout_symbol["text-offset"]),"text-allow-overlap":new No(Et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new No(Et.layout_symbol["text-ignore-placement"]),"text-optional":new No(Et.layout_symbol["text-optional"])}),ia={paint:new vl({"icon-opacity":new To(Et.paint_symbol["icon-opacity"]),"icon-color":new To(Et.paint_symbol["icon-color"]),"icon-halo-color":new To(Et.paint_symbol["icon-halo-color"]),"icon-halo-width":new To(Et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new To(Et.paint_symbol["icon-halo-blur"]),"icon-translate":new No(Et.paint_symbol["icon-translate"]),"icon-translate-anchor":new No(Et.paint_symbol["icon-translate-anchor"]),"text-opacity":new To(Et.paint_symbol["text-opacity"]),"text-color":new To(Et.paint_symbol["text-color"],{runtimeType:ai,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new To(Et.paint_symbol["text-halo-color"]),"text-halo-width":new To(Et.paint_symbol["text-halo-width"]),"text-halo-blur":new To(Et.paint_symbol["text-halo-blur"]),"text-translate":new No(Et.paint_symbol["text-translate"]),"text-translate-anchor":new No(Et.paint_symbol["text-translate-anchor"])}),layout:Yi},ea=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:Ai,this.defaultValue=u};ea.prototype.evaluate=function(u){if(u.formattedSection){var d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},ea.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},ea.prototype.outputDefined=function(){return!1},ea.prototype.serialize=function(){return null},eo("FormatSectionOverride",ea,{omit:["defaultValue"]});var _s=function(u){function d(g){u.call(this,g,ia)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){if(u.prototype.recalculate.call(this,g,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var F=[],j=0,J=P;j<J.length;j+=1){var be=J[j];F.indexOf(be)<0&&F.push(be)}this.layout._values["text-writing-mode"]=F}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},d.prototype.getValueAndResolveTokens=function(g,A,P,F){var j=this.layout.get(g).evaluate(A,{},P,F),J=this._unevaluatedLayout._values[g];return J.isDataDriven()||Ql(J.value)||!j?j:function(be,Ne){return Ne.replace(/{([^{}]+)}/g,function($e,at){return at in be?String(be[at]):""})}(A.properties,j)},d.prototype.createBucket=function(g){return new Hi(g)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype._setPaintOverrides=function(){for(var g=0,A=ia.paint.overridableProperties;g<A.length;g+=1){var P=A[g];if(d.hasPaintOverride(this.layout,P)){var F,j=this.paint.get(P),J=new ea(j),be=new js(J,j.property.specification);F=j.value.kind==="constant"||j.value.kind==="source"?new cl("source",be):new af("composite",be,j.value.zoomStops,j.value._interpolationType),this.paint._values[P]=new Ku(j.property,F,j.parameters)}}},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&d.hasPaintOverride(this.layout,g)},d.hasPaintOverride=function(g,A){var P=g.get("text-field"),F=ia.paint.properties[A],j=!1,J=function($e){for(var at=0,Tt=$e;at<Tt.length;at+=1)if(F.overrides&&F.overrides.hasOverride(Tt[at]))return void(j=!0)};if(P.value.kind==="constant"&&P.value.value instanceof hr)J(P.value.value.sections);else if(P.value.kind==="source"){var be=function($e){j||($e instanceof Ni&&ti($e.value)===ga?J($e.value.sections):$e instanceof Eo?J($e.sections):$e.eachChild(be))},Ne=P.value;Ne._styleExpression&&be(Ne._styleExpression.expression)}return j},d}(Ec),Lu={paint:new vl({"background-color":new No(Et.paint_background["background-color"]),"background-pattern":new Qu(Et.paint_background["background-pattern"]),"background-opacity":new No(Et.paint_background["background-opacity"])})},Tc=function(u){function d(g){u.call(this,g,Lu)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Ec),yp={paint:new vl({"raster-opacity":new No(Et.paint_raster["raster-opacity"]),"raster-hue-rotate":new No(Et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new No(Et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new No(Et.paint_raster["raster-brightness-max"]),"raster-saturation":new No(Et.paint_raster["raster-saturation"]),"raster-contrast":new No(Et.paint_raster["raster-contrast"]),"raster-resampling":new No(Et.paint_raster["raster-resampling"]),"raster-fade-duration":new No(Et.paint_raster["raster-fade-duration"])})},nh=function(u){function d(g){u.call(this,g,yp)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Ec),Xv=function(u){function d(g){u.call(this,g,{}),this.implementation=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},d.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},d.prototype.recalculate=function(){},d.prototype.updateTransitions=function(){},d.prototype.hasTransition=function(){},d.prototype.serialize=function(){},d.prototype.onAdd=function(g){this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},d.prototype.onRemove=function(g){this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},d}(Ec),_p={circle:Wp,heatmap:fp,hillshade:n_,fill:i_,"fill-extrusion":zm,line:Yg,symbol:_s,background:Tc,raster:nh},jm=ae.HTMLImageElement,dv=ae.HTMLCanvasElement,_x=ae.HTMLVideoElement,qg=ae.ImageData,T1=ae.ImageBitmap,T0=function(u,d,g,A){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(d,A)};T0.prototype.update=function(u,d,g){var A=u.width,P=u.height,F=!(this.size&&this.size[0]===A&&this.size[1]===P||g),j=this.context,J=j.gl;if(this.useMipmap=!!(d&&d.useMipmap),J.bindTexture(J.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===J.RGBA&&(!d||d.premultiply!==!1)),F)this.size=[A,P],u instanceof jm||u instanceof dv||u instanceof _x||u instanceof qg||T1&&u instanceof T1?J.texImage2D(J.TEXTURE_2D,0,this.format,this.format,J.UNSIGNED_BYTE,u):J.texImage2D(J.TEXTURE_2D,0,this.format,A,P,0,this.format,J.UNSIGNED_BYTE,u.data);else{var be=g||{x:0,y:0},Ne=be.x,$e=be.y;u instanceof jm||u instanceof dv||u instanceof _x||u instanceof qg||T1&&u instanceof T1?J.texSubImage2D(J.TEXTURE_2D,0,Ne,$e,J.RGBA,J.UNSIGNED_BYTE,u):J.texSubImage2D(J.TEXTURE_2D,0,Ne,$e,A,P,J.RGBA,J.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&J.generateMipmap(J.TEXTURE_2D)},T0.prototype.bind=function(u,d,g){var A=this.context.gl;A.bindTexture(A.TEXTURE_2D,this.texture),g!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=A.LINEAR),u!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g||u),this.filter=u),d!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,d),this.wrap=d)},T0.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},T0.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var bx=function(u){var d=this;this._callback=u,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){d._triggered=!1,d._callback()})};bx.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},bx.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vm=function(u,d,g){this.target=u,this.parent=d,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wt(["receive","process"],this),this.invoker=new bx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?u:ae};function Kg(u,d,g){var A=2*Math.PI*6378137/256/Math.pow(2,g);return[u*A-2*Math.PI*6378137/2,d*A-2*Math.PI*6378137/2]}Vm.prototype.send=function(u,d,g,A,P){var F=this;P===void 0&&(P=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[j]=g);var J=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:u,hasCallback:!!g,targetMapId:A,mustQueue:P,sourceMapId:this.mapId,data:qa(d,J)},J),{cancel:function(){g&&delete F.callbacks[j],F.target.postMessage({id:j,type:"<cancel>",targetMapId:A,sourceMapId:F.mapId})}}},Vm.prototype.receive=function(u){var d=u.data,g=d.id;if(g&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){delete this.tasks[g];var A=this.cancelCallbacks[g];delete this.cancelCallbacks[g],A&&A()}else Le()||d.mustQueue?(this.tasks[g]=d,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,d)},Vm.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),d=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),d&&this.processTask(u,d)}},Vm.prototype.processTask=function(u,d){var g=this;if(d.type==="<response>"){var A=this.callbacks[u];delete this.callbacks[u],A&&(d.error?A(Ls(d.error)):A(null,Ls(d.data)))}else{var P=!1,F=nt(this.globalScope)?void 0:[],j=d.hasCallback?function($e,at){P=!0,delete g.cancelCallbacks[u],g.target.postMessage({id:u,type:"<response>",sourceMapId:g.mapId,error:$e?qa($e):null,data:qa(at,F)},F)}:function($e){P=!0},J=null,be=Ls(d.data);if(this.parent[d.type])J=this.parent[d.type](d.sourceMapId,be,j);else if(this.parent.getWorkerSource){var Ne=d.type.split(".");J=this.parent.getWorkerSource(d.sourceMapId,Ne[0],be.source)[Ne[1]](be,j)}else j(new Error("Could not find function "+d.type));!P&&J&&J.cancel&&(this.cancelCallbacks[u]=J.cancel)}},Vm.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var rc=function(u,d){u&&(d?this.setSouthWest(u).setNorthEast(d):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};rc.prototype.setNorthEast=function(u){return this._ne=u instanceof Xl?new Xl(u.lng,u.lat):Xl.convert(u),this},rc.prototype.setSouthWest=function(u){return this._sw=u instanceof Xl?new Xl(u.lng,u.lat):Xl.convert(u),this},rc.prototype.extend=function(u){var d,g,A=this._sw,P=this._ne;if(u instanceof Xl)d=u,g=u;else{if(!(u instanceof rc))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(rc.convert(u)):this.extend(Xl.convert(u)):this;if(g=u._ne,!(d=u._sw)||!g)return this}return A||P?(A.lng=Math.min(d.lng,A.lng),A.lat=Math.min(d.lat,A.lat),P.lng=Math.max(g.lng,P.lng),P.lat=Math.max(g.lat,P.lat)):(this._sw=new Xl(d.lng,d.lat),this._ne=new Xl(g.lng,g.lat)),this},rc.prototype.getCenter=function(){return new Xl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},rc.prototype.getSouthWest=function(){return this._sw},rc.prototype.getNorthEast=function(){return this._ne},rc.prototype.getNorthWest=function(){return new Xl(this.getWest(),this.getNorth())},rc.prototype.getSouthEast=function(){return new Xl(this.getEast(),this.getSouth())},rc.prototype.getWest=function(){return this._sw.lng},rc.prototype.getSouth=function(){return this._sw.lat},rc.prototype.getEast=function(){return this._ne.lng},rc.prototype.getNorth=function(){return this._ne.lat},rc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},rc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},rc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},rc.prototype.contains=function(u){var d=Xl.convert(u),g=d.lng,A=d.lat,P=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P},rc.convert=function(u){return!u||u instanceof rc?u:new rc(u)};var Xl=function(u,d){if(isNaN(u)||isNaN(d))throw new Error("Invalid LngLat object: ("+u+", "+d+")");if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xl.prototype.wrap=function(){return new Xl($(this.lng,-180,180),this.lat)},Xl.prototype.toArray=function(){return[this.lng,this.lat]},Xl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xl.prototype.distanceTo=function(u){var d=Math.PI/180,g=this.lat*d,A=u.lat*d,P=Math.sin(g)*Math.sin(A)+Math.cos(g)*Math.cos(A)*Math.cos((u.lng-this.lng)*d);return 63710088e-1*Math.acos(Math.min(P,1))},Xl.prototype.toBounds=function(u){u===void 0&&(u=0);var d=360*u/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new rc(new Xl(this.lng-g,this.lat-d),new Xl(this.lng+g,this.lat+d))},Xl.convert=function(u){if(u instanceof Xl)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Xl(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Xl(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Hm=2*Math.PI*63710088e-1;function Yv(u){return Hm*Math.cos(u*Math.PI/180)}function QE(u){return(180+u)/360}function l_(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function pv(u,d){return u/Yv(d)}function A1(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var Jp=function(u,d,g){g===void 0&&(g=0),this.x=+u,this.y=+d,this.z=+g};Jp.fromLngLat=function(u,d){d===void 0&&(d=0);var g=Xl.convert(u);return new Jp(QE(g.lng),l_(g.lat),pv(d,g.lat))},Jp.prototype.toLngLat=function(){return new Xl(360*this.x-180,A1(this.y))},Jp.prototype.toAltitude=function(){return this.z*Yv(A1(this.y))},Jp.prototype.meterInMercatorCoordinateUnits=function(){return 1/Hm*(u=A1(this.y),1/Math.cos(u*Math.PI/180));var u};var A0=function(u,d,g){this.z=u,this.x=d,this.y=g,this.key=Wm(0,u,u,d,g)};A0.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},A0.prototype.url=function(u,d){var g,A,P,F,j,J=(A=this.y,P=this.z,F=Kg(256*(g=this.x),256*(A=Math.pow(2,P)-A-1),P),j=Kg(256*(g+1),256*(A+1),P),F[0]+","+F[1]+","+j[0]+","+j[1]),be=function(Ne,$e,at){for(var Tt,Bt="",dn=Ne;dn>0;dn--)Bt+=($e&(Tt=1<<dn-1)?1:0)+(at&Tt?2:0);return Bt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",be).replace("{bbox-epsg-3857}",J)},A0.prototype.getTilePoint=function(u){var d=Math.pow(2,this.z);return new ce(8192*(u.x*d-this.x),8192*(u.y*d-this.y))},A0.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gm=function(u,d){this.wrap=u,this.canonical=d,this.key=Wm(u,d.z,d.z,d.x,d.y)},Gu=function(u,d,g,A,P){this.overscaledZ=u,this.wrap=d,this.canonical=new A0(g,+A,+P),this.key=Wm(d,u,g,A,P)};function Wm(u,d,g,A,P){(u*=2)<0&&(u=-1*u-1);var F=1<<g;return(F*F*u+F*P+A).toString(36)+g.toString(36)+d.toString(36)}Gu.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},Gu.prototype.scaledTo=function(u){var d=this.canonical.z-u;return u>this.canonical.z?new Gu(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gu(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)},Gu.prototype.calculateScaledKey=function(u,d){var g=this.canonical.z-u;return u>this.canonical.z?Wm(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Wm(this.wrap*+d,u,u,this.canonical.x>>g,this.canonical.y>>g)},Gu.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d},Gu.prototype.children=function(u){if(this.overscaledZ>=u)return[new Gu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var d=this.canonical.z+1,g=2*this.canonical.x,A=2*this.canonical.y;return[new Gu(d,this.wrap,d,g,A),new Gu(d,this.wrap,d,g+1,A),new Gu(d,this.wrap,d,g,A+1),new Gu(d,this.wrap,d,g+1,A+1)]},Gu.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},Gu.prototype.wrapped=function(){return new Gu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Gu.prototype.unwrapTo=function(u){return new Gu(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},Gu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Gu.prototype.toUnwrapped=function(){return new Gm(this.wrap,this.canonical)},Gu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Gu.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new Jp(u.x-this.wrap,u.y))},eo("CanonicalTileID",A0),eo("OverscaledTileID",Gu,{omit:["posMatrix"]});var yu=function(u,d,g){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return Ze('"'+g+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=d.height;var A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(var P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};yu.prototype.get=function(u,d){var g=new Uint8Array(this.data.buffer),A=4*this._idx(u,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[A],g[A+1],g[A+2])},yu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},yu.prototype._idx=function(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)},yu.prototype._unpackMapbox=function(u,d,g){return(256*u*256+256*d+g)/10-1e4},yu.prototype._unpackTerrarium=function(u,d,g){return 256*u+d+g/256-32768},yu.prototype.getPixels=function(){return new pc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yu.prototype.backfillBorder=function(u,d,g){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var A=d*this.dim,P=d*this.dim+this.dim,F=g*this.dim,j=g*this.dim+this.dim;switch(d){case-1:A=P-1;break;case 1:P=A+1}switch(g){case-1:F=j-1;break;case 1:j=F+1}for(var J=-d*this.dim,be=-g*this.dim,Ne=F;Ne<j;Ne++)for(var $e=A;$e<P;$e++)this.data[this._idx($e,Ne)]=u.data[this._idx($e+J,Ne+be)]},eo("DEMData",yu);var vv=function(u){this._stringToNumber={},this._numberToString=[];for(var d=0;d<u.length;d++){var g=u[d];this._stringToNumber[g]=d,this._numberToString[d]=g}};vv.prototype.encode=function(u){return this._stringToNumber[u]},vv.prototype.decode=function(u){return this._numberToString[u]};var u_=function(u,d,g,A,P){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=g,u._y=A,this.properties=u.properties,this.id=P},al={geometry:{configurable:!0}};al.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},al.geometry.set=function(u){this._geometry=u},u_.prototype.toJSON=function(){var u={geometry:this.geometry};for(var d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u},Object.defineProperties(u_.prototype,al);var Zm=function(){this.state={},this.stateChanges={},this.deletedStates={}};Zm.prototype.updateState=function(u,d,g){var A=String(d);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},le(this.stateChanges[u][A],g),this.deletedStates[u]===null)for(var P in this.deletedStates[u]={},this.state[u])P!==A&&(this.deletedStates[u][P]=null);else if(this.deletedStates[u]&&this.deletedStates[u][A]===null)for(var F in this.deletedStates[u][A]={},this.state[u][A])g[F]||(this.deletedStates[u][A][F]=null);else for(var j in g)this.deletedStates[u]&&this.deletedStates[u][A]&&this.deletedStates[u][A][j]===null&&delete this.deletedStates[u][A][j]},Zm.prototype.removeFeatureState=function(u,d,g){if(this.deletedStates[u]!==null){var A=String(d);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&d!==void 0)this.deletedStates[u][A]!==null&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][g]=null);else if(d!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][A])for(g in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][g]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}},Zm.prototype.getState=function(u,d){var g=String(d),A=le({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){var P=this.deletedStates[u][d];if(P===null)return{};for(var F in P)delete A[F]}return A},Zm.prototype.initializeTileState=function(u,d){u.setFeatureState(this.state,d)},Zm.prototype.coalesceChanges=function(u,d){var g={};for(var A in this.stateChanges){this.state[A]=this.state[A]||{};var P={};for(var F in this.stateChanges[A])this.state[A][F]||(this.state[A][F]={}),le(this.state[A][F],this.stateChanges[A][F]),P[F]=this.state[A][F];g[A]=P}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var J={};if(this.deletedStates[j]===null)for(var be in this.state[j])J[be]={},this.state[j][be]={};else for(var Ne in this.deletedStates[j]){if(this.deletedStates[j][Ne]===null)this.state[j][Ne]={};else for(var $e=0,at=Object.keys(this.deletedStates[j][Ne]);$e<at.length;$e+=1)delete this.state[j][Ne][at[$e]];J[Ne]=this.state[j][Ne]}g[j]=g[j]||{},le(g[j],J)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(var Tt in u)u[Tt].setFeatureState(g,d)};var Kh=function(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Go(8192,16,0),this.grid3D=new Go(8192,16,0),this.featureIndexArray=new ht,this.promoteId=d};function Xm(u,d,g,A,P){return _t(u,function(F,j){var J=d instanceof ap?d.get(j):null;return J&&J.evaluate?J.evaluate(g,A,P):J})}function $v(u){for(var d=1/0,g=1/0,A=-1/0,P=-1/0,F=0,j=u;F<j.length;F+=1){var J=j[F];d=Math.min(d,J.x),g=Math.min(g,J.y),A=Math.max(A,J.x),P=Math.max(P,J.y)}return{minX:d,minY:g,maxX:A,maxY:P}}function Yl(u,d){return d-u}Kh.prototype.insert=function(u,d,g,A,P,F){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,A,P);for(var J=F?this.grid3D:this.grid,be=0;be<d.length;be++){for(var Ne=d[be],$e=[1/0,1/0,-1/0,-1/0],at=0;at<Ne.length;at++){var Tt=Ne[at];$e[0]=Math.min($e[0],Tt.x),$e[1]=Math.min($e[1],Tt.y),$e[2]=Math.max($e[2],Tt.x),$e[3]=Math.max($e[3],Tt.y)}$e[0]<8192&&$e[1]<8192&&$e[2]>=0&&$e[3]>=0&&J.insert(j,$e[0],$e[1],$e[2],$e[3])}},Kh.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mp.VectorTile(new Mr(this.rawTileData)).layers,this.sourceLayerCoder=new vv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Kh.prototype.query=function(u,d,g,A){var P=this;this.loadVTLayers();for(var F=u.params||{},j=8192/u.tileSize/u.scale,J=Ff(F.filter),be=u.queryGeometry,Ne=u.queryPadding*j,$e=$v(be),at=this.grid.query($e.minX-Ne,$e.minY-Ne,$e.maxX+Ne,$e.maxY+Ne),Tt=$v(u.cameraQueryGeometry),Bt=this.grid3D.query(Tt.minX-Ne,Tt.minY-Ne,Tt.maxX+Ne,Tt.maxY+Ne,function(Ir,Dr,Wr,Ii){return function($i,ko,fo,Yo,po){for(var Fa=0,ca=$i;Fa<ca.length;Fa+=1){var Oo=ca[Fa];if(ko<=Oo.x&&fo<=Oo.y&&Yo>=Oo.x&&po>=Oo.y)return!0}var Xa=[new ce(ko,fo),new ce(ko,po),new ce(Yo,po),new ce(Yo,fo)];if($i.length>2){for(var Vo=0,ns=Xa;Vo<ns.length;Vo+=1)if(Jf($i,ns[Vo]))return!0}for(var zo=0;zo<$i.length-1;zo++)if(Ci($i[zo],$i[zo+1],Xa))return!0;return!1}(u.cameraQueryGeometry,Ir-Ne,Dr-Ne,Wr+Ne,Ii+Ne)}),dn=0,yn=Bt;dn<yn.length;dn+=1)at.push(yn[dn]);at.sort(Yl);for(var Gn,In={},cr=function(Ir){var Dr=at[Ir];if(Dr!==Gn){Gn=Dr;var Wr=P.featureIndexArray.get(Dr),Ii=null;P.loadMatchingFeature(In,Wr.bucketIndex,Wr.sourceLayerIndex,Wr.featureIndex,J,F.layers,F.availableImages,d,g,A,function($i,ko,fo){return Ii||(Ii=ws($i)),ko.queryIntersectsFeature(be,$i,fo,Ii,P.z,u.transform,j,u.pixelPosMatrix)})}},gr=0;gr<at.length;gr++)cr(gr);return In},Kh.prototype.loadMatchingFeature=function(u,d,g,A,P,F,j,J,be,Ne,$e){var at=this.bucketLayerIDs[d];if(!F||function($i,ko){for(var fo=0;fo<$i.length;fo++)if(ko.indexOf($i[fo])>=0)return!0;return!1}(F,at)){var Tt=this.sourceLayerCoder.decode(g),Bt=this.vtLayers[Tt].feature(A);if(P.needGeometry){var dn=wl(Bt,!0);if(!P.filter(new wa(this.tileID.overscaledZ),dn,this.tileID.canonical))return}else if(!P.filter(new wa(this.tileID.overscaledZ),Bt))return;for(var yn=this.getId(Bt,Tt),Gn=0;Gn<at.length;Gn++){var In=at[Gn];if(!(F&&F.indexOf(In)<0)){var cr=J[In];if(cr){var gr={};yn!==void 0&&Ne&&(gr=Ne.getState(cr.sourceLayer||"_geojsonTileLayer",yn));var Ir=le({},be[In]);Ir.paint=Xm(Ir.paint,cr.paint,Bt,gr,j),Ir.layout=Xm(Ir.layout,cr.layout,Bt,gr,j);var Dr=!$e||$e(Bt,cr,gr);if(Dr){var Wr=new u_(Bt,this.z,this.x,this.y,yn);Wr.layer=Ir;var Ii=u[In];Ii===void 0&&(Ii=u[In]=[]),Ii.push({featureIndex:A,feature:Wr,intersectionZ:Dr})}}}}}},Kh.prototype.lookupSymbolFeatures=function(u,d,g,A,P,F,j,J){var be={};this.loadVTLayers();for(var Ne=Ff(P),$e=0,at=u;$e<at.length;$e+=1)this.loadMatchingFeature(be,g,A,at[$e],Ne,F,j,J,d);return be},Kh.prototype.hasLayer=function(u){for(var d=0,g=this.bucketLayerIDs;d<g.length;d+=1)for(var A=0,P=g[d];A<P.length;A+=1)if(u===P[A])return!0;return!1},Kh.prototype.getId=function(u,d){var g=u.id;return this.promoteId&&typeof(g=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]])=="boolean"&&(g=Number(g)),g},eo("FeatureIndex",Kh,{omit:["rawTileData","sourceLayerCoder"]});var tl=function(u,d){this.tileID=u,this.uid=we(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};tl.prototype.registerFadeDuration=function(u){var d=u+this.timeAdded;d<qn.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)},tl.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},tl.prototype.loadVectorData=function(u,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var A in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(Ne,$e){var at={};if(!$e)return at;for(var Tt=function(){var yn=dn[Bt],Gn=yn.layerIds.map(function(gr){return $e.getLayer(gr)}).filter(Boolean);if(Gn.length!==0){yn.layers=Gn,yn.stateDependentLayerIds&&(yn.stateDependentLayers=yn.stateDependentLayerIds.map(function(gr){return Gn.filter(function(Ir){return Ir.id===gr})[0]}));for(var In=0,cr=Gn;In<cr.length;In+=1)at[cr[In].id]=yn}},Bt=0,dn=Ne;Bt<dn.length;Bt+=1)Tt();return at}(u.buckets,d.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[A];if(P instanceof Hi){if(this.hasSymbolBuckets=!0,!g)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var F in this.buckets){var j=this.buckets[F];if(j instanceof Hi&&j.hasRTLText){this.hasRTLText=!0,zc.isLoading()||zc.isLoaded()||rv()!=="deferred"||fc();break}}for(var J in this.queryPadding=0,this.buckets){var be=this.buckets[J];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(J).queryRadius(be))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new S},tl.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},tl.prototype.getBucket=function(u){return this.buckets[u.id]},tl.prototype.upload=function(u){for(var d in this.buckets){var g=this.buckets[d];g.uploadPending()&&g.upload(u)}var A=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T0(u,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T0(u,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)},tl.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},tl.prototype.queryRenderedFeatures=function(u,d,g,A,P,F,j,J,be,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:P,scale:F,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:J,params:j,queryPadding:this.queryPadding*be},u,d,g):{}},tl.prototype.querySourceFeatures=function(u,d){var g=this.latestFeatureIndex;if(g&&g.rawTileData){var A=g.loadVTLayers(),P=d?d.sourceLayer:"",F=A._geojsonTileLayer||A[P];if(F)for(var j=Ff(d&&d.filter),J=this.tileID.canonical,be=J.z,Ne=J.x,$e=J.y,at={z:be,x:Ne,y:$e},Tt=0;Tt<F.length;Tt++){var Bt=F.feature(Tt);if(j.needGeometry){var dn=wl(Bt,!0);if(!j.filter(new wa(this.tileID.overscaledZ),dn,this.tileID.canonical))continue}else if(!j.filter(new wa(this.tileID.overscaledZ),Bt))continue;var yn=g.getId(Bt,P),Gn=new u_(Bt,be,Ne,$e,yn);Gn.tile=at,u.push(Gn)}}},tl.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},tl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},tl.prototype.setExpiryData=function(u){var d=this.expirationTime;if(u.cacheControl){var g=St(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var A=Date.now(),P=!1;if(this.expirationTime>A)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{var F=this.expirationTime-d;F?this.expirationTime=A+Math.max(F,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},tl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},tl.prototype.setFeatureState=function(u,d){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var g=this.latestFeatureIndex.loadVTLayers();for(var A in this.buckets)if(d.style.hasLayer(A)){var P=this.buckets[A],F=P.layers[0].sourceLayer||"_geojsonTileLayer",j=g[F],J=u[F];if(j&&J&&Object.keys(J).length!==0){P.update(J,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var be=d&&d.style&&d.style.getLayer(A);be&&(this.queryPadding=Math.max(this.queryPadding,be.queryRadius(P)))}}}},tl.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},tl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qn.now()},tl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},tl.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=qn.now()+u},tl.prototype.setDependencies=function(u,d){for(var g={},A=0,P=d;A<P.length;A+=1)g[P[A]]=!0;this.dependencies[u]=g},tl.prototype.hasDependency=function(u,d){for(var g=0,A=u;g<A.length;g+=1){var P=this.dependencies[A[g]];if(P){for(var F=0,j=d;F<j.length;F+=1)if(P[j[F]])return!0}}return!1};var Sa=ae.performance,Ym=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},Sa.mark(this._marks.start)};Ym.prototype.finish=function(){Sa.mark(this._marks.end);var u=Sa.getEntriesByName(this._marks.measure);return u.length===0&&(Sa.measure(this._marks.measure,this._marks.start,this._marks.end),u=Sa.getEntriesByName(this._marks.measure),Sa.clearMarks(this._marks.start),Sa.clearMarks(this._marks.end),Sa.clearMeasures(this._marks.measure)),u},E.Actor=Vm,E.AlphaImage=Dd,E.CanonicalTileID=A0,E.CollisionBoxArray=S,E.Color=gn,E.DEMData=yu,E.DataConstantProperty=No,E.DictionaryCoder=vv,E.EXTENT=8192,E.ErrorEvent=Yt,E.EvaluationParameters=wa,E.Event=At,E.Evented=hn,E.FeatureIndex=Kh,E.FillBucket=hf,E.FillExtrusionBucket=vc,E.ImageAtlas=qr,E.ImagePosition=Ki,E.LineBucket=mc,E.LngLat=Xl,E.LngLatBounds=rc,E.MercatorCoordinate=Jp,E.ONE_EM=24,E.OverscaledTileID=Gu,E.Point=ce,E.Point$1=ce,E.Properties=vl,E.Protobuf=Mr,E.RGBAImage=pc,E.RequestManager=Dt,E.RequestPerformance=Ym,E.ResourceType=Be,E.SegmentVector=Ht,E.SourceFeatureState=Zm,E.StructArrayLayout1ui2=jh,E.StructArrayLayout2f1f2i16=Uh,E.StructArrayLayout2i4=zh,E.StructArrayLayout3ui6=Bf,E.StructArrayLayout4i8=sp,E.SymbolBucket=Hi,E.Texture=T0,E.Tile=tl,E.Transitionable=Su,E.Uniform1f=zi,E.Uniform1i=ni,E.Uniform2f=Li,E.Uniform3f=co,E.Uniform4f=Uo,E.UniformColor=Zo,E.UniformMatrix4f=cs,E.UnwrappedTileID=Gm,E.ValidationError=Kt,E.WritingMode=Bo,E.ZoomHistory=lf,E.add=function(u,d,g){return u[0]=d[0]+g[0],u[1]=d[1]+g[1],u[2]=d[2]+g[2],u},E.addDynamicAttributes=vi,E.asyncAll=function(u,d,g){if(!u.length)return g(null,[]);var A=u.length,P=new Array(u.length),F=null;u.forEach(function(j,J){d(j,function(be,Ne){be&&(F=be),P[J]=Ne,--A==0&&g(F,P)})})},E.bezier=te,E.bindAll=wt,E.browser=qn,E.cacheEntryPossiblyAdded=function(u){++dt>Pt&&(u.getActor().send("enforceCacheSizeLimit",vt),dt=0)},E.clamp=Re,E.clearTileCache=function(u){var d=ae.caches.delete("mapbox-tiles");u&&d.catch(u).then(function(){return u()})},E.clipLine=wh,E.clone=function(u){var d=new Wa(16);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},E.clone$1=Ae,E.clone$2=function(u){var d=new Wa(3);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d},E.collisionCircleLayout=Ue,E.config=rr,E.create=function(){var u=new Wa(16);return Wa!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},E.create$1=function(){var u=new Wa(9);return Wa!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},E.create$2=function(){var u=new Wa(4);return Wa!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},E.createCommonjsModule=de,E.createExpression=Xs,E.createLayout=wu,E.createStyleLayer=function(u){return u.type==="custom"?new Xv(u):new _p[u.type](u)},E.cross=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=g[0],J=g[1],be=g[2];return u[0]=P*be-F*J,u[1]=F*j-A*be,u[2]=A*J-P*j,u},E.deepEqual=function u(d,g){if(Array.isArray(d)){if(!Array.isArray(g)||d.length!==g.length)return!1;for(var A=0;A<d.length;A++)if(!u(d[A],g[A]))return!1;return!0}if(typeof d=="object"&&d!==null&&g!==null){if(typeof g!="object"||Object.keys(d).length!==Object.keys(g).length)return!1;for(var P in d)if(!u(d[P],g[P]))return!1;return!0}return d===g},E.dot=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]},E.dot$1=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]+u[3]*d[3]},E.ease=me,E.emitValidationErrors=Wo,E.endsWith=pt,E.enforceCacheSizeLimit=function(u){An(),$t&&$t.then(function(d){d.keys().then(function(g){for(var A=0;A<g.length-u;A++)d.delete(g[A])})})},E.evaluateSizeForFeature=Qr,E.evaluateSizeForZoom=Js,E.evaluateVariableOffset=tr,E.evented=v0,E.extend=le,E.featureFilter=Ff,E.filterObject=Me,E.fromRotation=function(u,d){var g=Math.sin(d),A=Math.cos(d);return u[0]=A,u[1]=g,u[2]=0,u[3]=-g,u[4]=A,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},E.getAnchorAlignment=Qs,E.getAnchorJustification=ar,E.getArrayBuffer=_r,E.getImage=Te,E.getJSON=function(u,d){return Kn(le(u,{type:"json"}),d)},E.getRTLTextPluginStatus=rv,E.getReferrer=Lt,E.getVideo=function(u,d){var g,A,P=ae.document.createElement("video");P.muted=!0,P.onloadstart=function(){d(null,P)};for(var F=0;F<u.length;F++){var j=ae.document.createElement("source");g=u[F],A=void 0,(A=ae.document.createElement("a")).href=g,(A.protocol!==ae.document.location.protocol||A.host!==ae.document.location.host)&&(P.crossOrigin="Anonymous"),j.src=u[F],P.appendChild(j)}return{cancel:function(){}}},E.identity=Tu,E.invert=function(u,d){var g=d[0],A=d[1],P=d[2],F=d[3],j=d[4],J=d[5],be=d[6],Ne=d[7],$e=d[8],at=d[9],Tt=d[10],Bt=d[11],dn=d[12],yn=d[13],Gn=d[14],In=d[15],cr=g*J-A*j,gr=g*be-P*j,Ir=g*Ne-F*j,Dr=A*be-P*J,Wr=A*Ne-F*J,Ii=P*Ne-F*be,$i=$e*yn-at*dn,ko=$e*Gn-Tt*dn,fo=$e*In-Bt*dn,Yo=at*Gn-Tt*yn,po=at*In-Bt*yn,Fa=Tt*In-Bt*Gn,ca=cr*Fa-gr*po+Ir*Yo+Dr*fo-Wr*ko+Ii*$i;return ca?(u[0]=(J*Fa-be*po+Ne*Yo)*(ca=1/ca),u[1]=(P*po-A*Fa-F*Yo)*ca,u[2]=(yn*Ii-Gn*Wr+In*Dr)*ca,u[3]=(Tt*Wr-at*Ii-Bt*Dr)*ca,u[4]=(be*fo-j*Fa-Ne*ko)*ca,u[5]=(g*Fa-P*fo+F*ko)*ca,u[6]=(Gn*Ir-dn*Ii-In*gr)*ca,u[7]=($e*Ii-Tt*Ir+Bt*gr)*ca,u[8]=(j*po-J*fo+Ne*$i)*ca,u[9]=(A*fo-g*po-F*$i)*ca,u[10]=(dn*Wr-yn*Ir+In*cr)*ca,u[11]=(at*Ir-$e*Wr-Bt*cr)*ca,u[12]=(J*ko-j*Yo-be*$i)*ca,u[13]=(g*Yo-A*ko+P*$i)*ca,u[14]=(yn*gr-dn*Dr-Gn*cr)*ca,u[15]=($e*Dr-at*gr+Tt*cr)*ca,u):null},E.isChar=Fi,E.isMapboxURL=Vt,E.keysDifference=function(u,d){var g=[];for(var A in u)A in d||g.push(A);return g},E.makeRequest=Kn,E.mapObject=_t,E.mercatorXfromLng=QE,E.mercatorYfromLat=l_,E.mercatorZfromAltitude=pv,E.mul=Gp,E.multiply=Ol,E.mvt=mp,E.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},E.normalize=function(u,d){var g=d[0],A=d[1],P=d[2],F=g*g+A*A+P*P;return F>0&&(F=1/Math.sqrt(F)),u[0]=d[0]*F,u[1]=d[1]*F,u[2]=d[2]*F,u},E.number=Ds,E.offscreenCanvasSupported=Se,E.ortho=function(u,d,g,A,P,F,j){var J=1/(d-g),be=1/(A-P),Ne=1/(F-j);return u[0]=-2*J,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*be,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*Ne,u[11]=0,u[12]=(d+g)*J,u[13]=(P+A)*be,u[14]=(j+F)*Ne,u[15]=1,u},E.parseGlyphPBF=function(u){return new Mr(u).readFields(li,[])},E.pbf=Mr,E.performSymbolLayout=function(u,d,g,A,P,F,j){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var J=u.layers[0].layout,be=u.layers[0]._unevaluatedLayout._values,Ne={};if(u.textSizeData.kind==="composite"){var $e=u.textSizeData,at=$e.maxZoom;Ne.compositeTextSizes=[be["text-size"].possiblyEvaluate(new wa($e.minZoom),j),be["text-size"].possiblyEvaluate(new wa(at),j)]}if(u.iconSizeData.kind==="composite"){var Tt=u.iconSizeData,Bt=Tt.maxZoom;Ne.compositeIconSizes=[be["icon-size"].possiblyEvaluate(new wa(Tt.minZoom),j),be["icon-size"].possiblyEvaluate(new wa(Bt),j)]}Ne.layoutTextSize=be["text-size"].possiblyEvaluate(new wa(u.zoom+1),j),Ne.layoutIconSize=be["icon-size"].possiblyEvaluate(new wa(u.zoom+1),j),Ne.textMaxSize=be["text-size"].possiblyEvaluate(new wa(18));for(var dn=24*J.get("text-line-height"),yn=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Gn=J.get("text-keep-upright"),In=J.get("text-size"),cr=function(){var Dr=Ir[gr],Wr=J.get("text-font").evaluate(Dr,{},j).join(","),Ii=In.evaluate(Dr,{},j),$i=Ne.layoutTextSize.evaluate(Dr,{},j),ko=Ne.layoutIconSize.evaluate(Dr,{},j),fo={horizontal:{},vertical:void 0},Yo=Dr.text,po=[0,0];if(Yo){var Fa=Yo.toString(),ca=24*J.get("text-letter-spacing").evaluate(Dr,{},j),Oo=function(Ka){for(var nl=0,Ys=Ka;nl<Ys.length;nl+=1)if(bs=Ys[nl].charCodeAt(0),Fi.Arabic(bs)||Fi["Arabic Supplement"](bs)||Fi["Arabic Extended-A"](bs)||Fi["Arabic Presentation Forms-A"](bs)||Fi["Arabic Presentation Forms-B"](bs))return!1;var bs;return!0}(Fa)?ca:0,Xa=J.get("text-anchor").evaluate(Dr,{},j),Vo=J.get("text-variable-anchor");if(!Vo){var ns=J.get("text-radial-offset").evaluate(Dr,{},j);po=ns?tr(Xa,[24*ns,Hn]):J.get("text-offset").evaluate(Dr,{},j).map(function(Ka){return 24*Ka})}var zo=yn?"center":J.get("text-justify").evaluate(Dr,{},j),Os=J.get("symbol-placement"),sl=Os==="point"?24*J.get("text-max-width").evaluate(Dr,{},j):0,nu=function(){u.allowVerticalPlacement&&Ef(Fa)&&(fo.vertical=va(Yo,d,g,P,Wr,sl,dn,Xa,"left",Oo,po,Bo.vertical,!0,Os,$i,Ii))};if(!yn&&Vo){for(var Ml=zo==="auto"?Vo.map(function(Ka){return ar(Ka)}):[zo],Rl=!1,ru=0;ru<Ml.length;ru++){var _u=Ml[ru];if(!fo.horizontal[_u])if(Rl)fo.horizontal[_u]=fo.horizontal[0];else{var Cu=va(Yo,d,g,P,Wr,sl,dn,"center",_u,Oo,po,Bo.horizontal,!1,Os,$i,Ii);Cu&&(fo.horizontal[_u]=Cu,Rl=Cu.positionedLines.length===1)}}nu()}else{zo==="auto"&&(zo=ar(Xa));var Vc=va(Yo,d,g,P,Wr,sl,dn,Xa,zo,Oo,po,Bo.horizontal,!1,Os,$i,Ii);Vc&&(fo.horizontal[zo]=Vc),nu(),Ef(Fa)&&yn&&Gn&&(fo.vertical=va(Yo,d,g,P,Wr,sl,dn,Xa,zo,Oo,po,Bo.vertical,!1,Os,$i,Ii))}}var Wu=void 0,Ac=!1;if(Dr.icon&&Dr.icon.name){var $l=A[Dr.icon.name];$l&&(Wu=function(Ka,nl,Ys){var bs=Qs(Ys),Hc=nl[0]-Ka.displaySize[0]*bs.horizontalAlign,Cc=nl[1]-Ka.displaySize[1]*bs.verticalAlign;return{image:Ka,top:Cc,bottom:Cc+Ka.displaySize[1],left:Hc,right:Hc+Ka.displaySize[0]}}(P[Dr.icon.name],J.get("icon-offset").evaluate(Dr,{},j),J.get("icon-anchor").evaluate(Dr,{},j)),Ac=$l.sdf,u.sdfIcons===void 0?u.sdfIcons=$l.sdf:u.sdfIcons!==$l.sdf&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($l.pixelRatio!==u.pixelRatio||J.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}var ic=Zn(fo.horizontal)||fo.vertical;u.iconsInText=!!ic&&ic.iconsInText,(ic||Wu)&&function(Ka,nl,Ys,bs,Hc,Cc,yl,bu,gc,ss,Fs){var rh=Cc.textMaxSize.evaluate(nl,{});rh===void 0&&(rh=yl);var zd,_l=Ka.layers[0].layout,bp=_l.get("icon-offset").evaluate(nl,{},Fs),Gc=Zn(Ys.horizontal),Ud=yl/24,Hf=Ka.tilePixelRatio*Ud,ih=Ka.tilePixelRatio*rh/24,Qh=Ka.tilePixelRatio*bu,Jh=Ka.tilePixelRatio*_l.get("symbol-spacing"),xp=_l.get("text-padding")*Ka.tilePixelRatio,Gf=_l.get("icon-padding")*Ka.tilePixelRatio,$m=_l.get("text-max-angle")/180*Math.PI,qm=_l.get("text-rotation-alignment")==="map"&&_l.get("symbol-placement")!=="point",Qg=_l.get("icon-rotation-alignment")==="map"&&_l.get("symbol-placement")!=="point",C0=_l.get("symbol-placement"),O0=Jh/2,Ep=_l.get("icon-text-fit");bs&&Ep!=="none"&&(Ka.allowVerticalPlacement&&Ys.vertical&&(zd=tu(bs,Ys.vertical,Ep,_l.get("icon-text-fit-padding"),bp,Ud)),Gc&&(bs=tu(bs,Gc,Ep,_l.get("icon-text-fit-padding"),bp,Ud)));var e0=function(ny,P0){P0.x<0||P0.x>=8192||P0.y<0||P0.y>=8192||function(Ts,oh,C1,t0,h_,d_,tg,Tp,fa,ng,ry,n0,iy,p_,rg,xx,Ex,O1,v_,M1,ah,ig,Vd,Ap,R1){var m_,sh,I0,Nu,Jv,D0=Ts.addToLineVertexArray(oh,C1),g_=0,em=0,P1=0,oy=0,I1=-1,og=-1,Hd={},ag=an(""),Tl=0,ay=0;if(Tp._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Tl=(m_=Tp.layout.get("text-offset").evaluate(ah,{},Ap).map(function(nm){return 24*nm}))[0],ay=m_[1]):(Tl=24*Tp.layout.get("text-radial-offset").evaluate(ah,{},Ap),ay=Hn),Ts.allowVerticalPlacement&&t0.vertical){var Cp=Tp.layout.get("text-rotate").evaluate(ah,{},Ap)+90;Nu=new el(fa,oh,ng,ry,n0,t0.vertical,iy,p_,rg,Cp),tg&&(Jv=new el(fa,oh,ng,ry,n0,tg,Ex,O1,rg,Cp))}if(h_){var sy=Tp.layout.get("icon-rotate").evaluate(ah,{}),Sx=Tp.layout.get("icon-text-fit")!=="none",JE=_n(h_,sy,Vd,Sx),y_=tg?_n(tg,sy,Vd,Sx):void 0;I0=new el(fa,oh,ng,ry,n0,h_,Ex,O1,!1,sy),g_=4*JE.length;var D1=Ts.iconSizeData,yv=null;D1.kind==="source"?(yv=[128*Tp.layout.get("icon-size").evaluate(ah,{})])[0]>32640&&Ze(Ts.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):D1.kind==="composite"&&((yv=[128*ig.compositeIconSizes[0].evaluate(ah,{},Ap),128*ig.compositeIconSizes[1].evaluate(ah,{},Ap)])[0]>32640||yv[1]>32640)&&Ze(Ts.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Ts.addSymbols(Ts.icon,JE,yv,M1,v_,ah,!1,oh,D0.lineStartIndex,D0.lineLength,-1,Ap),I1=Ts.icon.placedSymbolArray.length-1,y_&&(em=4*y_.length,Ts.addSymbols(Ts.icon,y_,yv,M1,v_,ah,Bo.vertical,oh,D0.lineStartIndex,D0.lineLength,-1,Ap),og=Ts.icon.placedSymbolArray.length-1)}for(var Aa in t0.horizontal){var tm=t0.horizontal[Aa];if(!sh){ag=an(tm.text);var gC=Tp.layout.get("text-rotate").evaluate(ah,{},Ap);sh=new el(fa,oh,ng,ry,n0,tm,iy,p_,rg,gC)}var yc=tm.positionedLines.length===1;if(P1+=Sn(Ts,oh,tm,d_,Tp,rg,ah,xx,D0,t0.vertical?Bo.horizontal:Bo.horizontalOnly,yc?Object.keys(t0.horizontal):[Aa],Hd,I1,ig,Ap),yc)break}t0.vertical&&(oy+=Sn(Ts,oh,t0.vertical,d_,Tp,rg,ah,xx,D0,Bo.vertical,["vertical"],Hd,og,ig,Ap));var _v=sh?sh.boxStartIndex:Ts.collisionBoxArray.length,Op=sh?sh.boxEndIndex:Ts.collisionBoxArray.length,ly=Nu?Nu.boxStartIndex:Ts.collisionBoxArray.length,L0=Nu?Nu.boxEndIndex:Ts.collisionBoxArray.length,N0=I0?I0.boxStartIndex:Ts.collisionBoxArray.length,__=I0?I0.boxEndIndex:Ts.collisionBoxArray.length,yC=Jv?Jv.boxStartIndex:Ts.collisionBoxArray.length,Tx=Jv?Jv.boxEndIndex:Ts.collisionBoxArray.length,Gs=-1,b_=function(nm,ui){return nm&&nm.circleDiameter?Math.max(nm.circleDiameter,ui):ui};Gs=b_(sh,Gs),Gs=b_(Nu,Gs),Gs=b_(I0,Gs);var L1=(Gs=b_(Jv,Gs))>-1?1:0;L1&&(Gs*=R1/24),Ts.glyphOffsetArray.length>=Hi.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ah.sortKey!==void 0&&Ts.addToSortKeyRanges(Ts.symbolInstances.length,ah.sortKey),Ts.symbolInstances.emplaceBack(oh.x,oh.y,Hd.right>=0?Hd.right:-1,Hd.center>=0?Hd.center:-1,Hd.left>=0?Hd.left:-1,Hd.vertical||-1,I1,og,ag,_v,Op,ly,L0,N0,__,yC,Tx,ng,P1,oy,g_,em,L1,0,iy,Tl,ay,Gs)}(Ka,P0,ny,Ys,bs,Hc,zd,Ka.layers[0],Ka.collisionBoxArray,nl.index,nl.sourceLayerIndex,Ka.index,Hf,xp,qm,gc,Qh,Gf,Qg,bp,nl,Cc,ss,Fs,yl)};if(C0==="line")for(var mv=0,Km=wh(nl.geometry,0,0,8192,8192);mv<Km.length;mv+=1)for(var Qm=Km[mv],Jg=0,qv=gu(Qm,Jh,$m,Ys.vertical||Gc,bs,24,ih,Ka.overscaling,8192);Jg<qv.length;Jg+=1){var Sp=qv[Jg];Gc&&tn(Ka,Gc.text,O0,Sp)||e0(Qm,Sp)}else if(C0==="line-center")for(var gv=0,M0=nl.geometry;gv<M0.length;gv+=1){var Jm=M0[gv];if(Jm.length>1){var eg=ts(Jm,$m,Ys.vertical||Gc,bs,24,ih);eg&&e0(Jm,eg)}}else if(nl.type==="Polygon")for(var Wc=0,Kv=Yh(nl.geometry,0);Wc<Kv.length;Wc+=1){var R0=Kv[Wc],Qv=Mn(R0,16);e0(R0[0],new fl(Qv.x,Qv.y,0))}else if(nl.type==="LineString")for(var wp=0,jd=nl.geometry;wp<jd.length;wp+=1){var ed=jd[wp];e0(ed,new fl(ed[0].x,ed[0].y,0))}else if(nl.type==="Point")for(var ey=0,c_=nl.geometry;ey<c_.length;ey+=1)for(var f_=0,td=c_[ey];f_<td.length;f_+=1){var ty=td[f_];e0([ty],new fl(ty.x,ty.y,0))}}(u,Dr,fo,Wu,A,Ne,$i,ko,po,Ac,j)},gr=0,Ir=u.features;gr<Ir.length;gr+=1)cr();F&&u.generateCollisionDebugBuffers()},E.perspective=function(u,d,g,A,P){var F,j=1/Math.tan(d/2);return u[0]=j/g,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=j,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+A)*(F=1/(A-P)),u[14]=2*P*A*F):(u[10]=-1,u[14]=-2*A),u},E.pick=function(u,d){for(var g={},A=0;A<d.length;A++){var P=d[A];P in u&&(g[P]=u[P])}return g},E.plugin=zc,E.polygonIntersectsPolygon=Uf,E.postMapLoadEvent=fn,E.postTurnstileEvent=Wn,E.potpack=pa,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=eo,E.registerForPluginStateChange=function(u){return u({pluginStatus:qu,pluginURL:qf}),v0.on("pluginStateChange",u),u},E.renderColorRamp=t_,E.rotate=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],J=Math.sin(g),be=Math.cos(g);return u[0]=A*be+F*J,u[1]=P*be+j*J,u[2]=A*-J+F*be,u[3]=P*-J+j*be,u},E.rotateX=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[4],j=d[5],J=d[6],be=d[7],Ne=d[8],$e=d[9],at=d[10],Tt=d[11];return d!==u&&(u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[4]=F*P+Ne*A,u[5]=j*P+$e*A,u[6]=J*P+at*A,u[7]=be*P+Tt*A,u[8]=Ne*P-F*A,u[9]=$e*P-j*A,u[10]=at*P-J*A,u[11]=Tt*P-be*A,u},E.rotateZ=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[0],j=d[1],J=d[2],be=d[3],Ne=d[4],$e=d[5],at=d[6],Tt=d[7];return d!==u&&(u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[0]=F*P+Ne*A,u[1]=j*P+$e*A,u[2]=J*P+at*A,u[3]=be*P+Tt*A,u[4]=Ne*P-F*A,u[5]=$e*P-j*A,u[6]=at*P-J*A,u[7]=Tt*P-be*A,u},E.scale=function(u,d,g){var A=g[0],P=g[1],F=g[2];return u[0]=d[0]*A,u[1]=d[1]*A,u[2]=d[2]*A,u[3]=d[3]*A,u[4]=d[4]*P,u[5]=d[5]*P,u[6]=d[6]*P,u[7]=d[7]*P,u[8]=d[8]*F,u[9]=d[9]*F,u[10]=d[10]*F,u[11]=d[11]*F,u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},E.scale$1=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u[3]=d[3]*g,u},E.scale$2=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u},E.setCacheLimits=function(u,d){vt=u,Pt=d},E.setRTLTextPlugin=function(u,d,g){if(g===void 0&&(g=!1),qu==="deferred"||qu==="loading"||qu==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");qf=qn.resolveURL(u),qu="deferred",bh=d,Rd(),g||fc()},E.sphericalToCartesian=function(u){var d=u[0],g=u[1],A=u[2];return g+=90,g*=Math.PI/180,A*=Math.PI/180,{x:d*Math.cos(g)*Math.sin(A),y:d*Math.sin(g)*Math.sin(A),z:d*Math.cos(A)}},E.sqrLen=function(u){var d=u[0],g=u[1];return d*d+g*g},E.styleSpec=Et,E.sub=function(u,d,g){return u[0]=d[0]-g[0],u[1]=d[1]-g[1],u[2]=d[2]-g[2],u},E.symbolSize=Oa,E.transformMat3=function(u,d,g){var A=d[0],P=d[1],F=d[2];return u[0]=A*g[0]+P*g[3]+F*g[6],u[1]=A*g[1]+P*g[4]+F*g[7],u[2]=A*g[2]+P*g[5]+F*g[8],u},E.transformMat4=Gh,E.translate=function(u,d,g){var A,P,F,j,J,be,Ne,$e,at,Tt,Bt,dn,yn=g[0],Gn=g[1],In=g[2];return d===u?(u[12]=d[0]*yn+d[4]*Gn+d[8]*In+d[12],u[13]=d[1]*yn+d[5]*Gn+d[9]*In+d[13],u[14]=d[2]*yn+d[6]*Gn+d[10]*In+d[14],u[15]=d[3]*yn+d[7]*Gn+d[11]*In+d[15]):(P=d[1],F=d[2],j=d[3],J=d[4],be=d[5],Ne=d[6],$e=d[7],at=d[8],Tt=d[9],Bt=d[10],dn=d[11],u[0]=A=d[0],u[1]=P,u[2]=F,u[3]=j,u[4]=J,u[5]=be,u[6]=Ne,u[7]=$e,u[8]=at,u[9]=Tt,u[10]=Bt,u[11]=dn,u[12]=A*yn+J*Gn+at*In+d[12],u[13]=P*yn+be*Gn+Tt*In+d[13],u[14]=F*yn+Ne*Gn+Bt*In+d[14],u[15]=j*yn+$e*Gn+dn*In+d[15]),u},E.triggerPluginCompletionEvent=p0,E.uniqueId=we,E.validateCustomStyleLayer=function(u){var d=[],g=u.id;return g===void 0&&d.push({message:"layers."+g+': missing required property "id"'}),u.render===void 0&&d.push({message:"layers."+g+': missing required method "render"'}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&d.push({message:"layers."+g+': property "renderingMode" must be either "2d" or "3d"'}),d},E.validateLight=Fr,E.validateStyle=ur,E.values=function(u){var d=[];for(var g in u)d.push(u[g]);return d},E.vectorTile=mp,E.version="1.13.3",E.warnOnce=Ze,E.webpSupported=Ft,E.window=ae,E.wrap=$}),W(["./shared"],function(E){"use strict";function de(Pe){var Te=typeof Pe;if(Te==="number"||Te==="boolean"||Te==="string"||Pe==null)return JSON.stringify(Pe);if(Array.isArray(Pe)){for(var ke="[",it=0,At=Pe;it<At.length;it+=1)ke+=de(At[it])+",";return ke+"]"}for(var Yt=Object.keys(Pe).sort(),hn="{",Et=0;Et<Yt.length;Et++)hn+=JSON.stringify(Yt[Et])+":"+de(Pe[Yt[Et]])+",";return hn+"}"}function ee(Pe){for(var Te="",ke=0,it=E.refProperties;ke<it.length;ke+=1)Te+="/"+de(Pe[it[ke]]);return Te}var ue=function(Pe){this.keyCache={},Pe&&this.replace(Pe)};ue.prototype.replace=function(Pe){this._layerConfigs={},this._layers={},this.update(Pe,[])},ue.prototype.update=function(Pe,Te){for(var ke=this,it=0,At=Pe;it<At.length;it+=1){var Yt=At[it];this._layerConfigs[Yt.id]=Yt;var hn=this._layers[Yt.id]=E.createStyleLayer(Yt);hn._featureFilter=E.featureFilter(hn.filter),this.keyCache[Yt.id]&&delete this.keyCache[Yt.id]}for(var Et=0,Kt=Te;Et<Kt.length;Et+=1){var er=Kt[Et];delete this.keyCache[er],delete this._layerConfigs[er],delete this._layers[er]}this.familiesBySource={};for(var br=0,Vr=function(hi,ai){for(var Io={},xi=0;xi<hi.length;xi++){var Qo=ai&&ai[hi[xi].id]||ee(hi[xi]);ai&&(ai[hi[xi].id]=Qo);var ga=Io[Qo];ga||(ga=Io[Qo]=[]),ga.push(hi[xi])}var Po=[];for(var $o in Io)Po.push(Io[$o]);return Po}(E.values(this._layerConfigs),this.keyCache);br<Vr.length;br+=1){var vr=Vr[br].map(function(hi){return ke._layers[hi.id]}),Ur=vr[0];if(Ur.visibility!=="none"){var _i=Ur.source||"",Ai=this.familiesBySource[_i];Ai||(Ai=this.familiesBySource[_i]={});var wr=Ur.sourceLayer||"_geojsonTileLayer",Ei=Ai[wr];Ei||(Ei=Ai[wr]=[]),Ei.push(vr)}}};var ce=function(Pe){var Te={},ke=[];for(var it in Pe){var At=Pe[it],Yt=Te[it]={};for(var hn in At){var Et=At[+hn];if(Et&&Et.bitmap.width!==0&&Et.bitmap.height!==0){var Kt={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};ke.push(Kt),Yt[hn]={rect:Kt,metrics:Et.metrics}}}}var er=E.potpack(ke),br=new E.AlphaImage({width:er.w||1,height:er.h||1});for(var Vr in Pe){var vr=Pe[Vr];for(var Ur in vr){var _i=vr[+Ur];if(_i&&_i.bitmap.width!==0&&_i.bitmap.height!==0){var Ai=Te[Vr][Ur].rect;E.AlphaImage.copy(_i.bitmap,br,{x:0,y:0},{x:Ai.x+1,y:Ai.y+1},_i.bitmap)}}}this.image=br,this.positions=Te};E.register("GlyphAtlas",ce);var xe=function(Pe){this.tileID=new E.OverscaledTileID(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId};function ae(Pe,Te,ke){for(var it=new E.EvaluationParameters(Te),At=0,Yt=Pe;At<Yt.length;At+=1)Yt[At].recalculate(it,ke)}function We(Pe,Te){var ke=E.getArrayBuffer(Pe.request,function(it,At,Yt,hn){it?Te(it):At&&Te(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(At)),rawData:At,cacheControl:Yt,expires:hn})});return function(){ke.cancel(),Te()}}xe.prototype.parse=function(Pe,Te,ke,it,At){var Yt=this;this.status="parsing",this.data=Pe,this.collisionBoxArray=new E.CollisionBoxArray;var hn=new E.DictionaryCoder(Object.keys(Pe.layers).sort()),Et=new E.FeatureIndex(this.tileID,this.promoteId);Et.bucketLayerIDs=[];var Kt,er,br,Vr,vr={},Ur={featureIndex:Et,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ke},_i=Te.familiesBySource[this.source];for(var Ai in _i){var wr=Pe.layers[Ai];if(wr){wr.version===1&&E.warnOnce('Vector tile source "'+this.source+'" layer "'+Ai+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ei=hn.encode(Ai),hi=[],ai=0;ai<wr.length;ai++){var Io=wr.feature(ai),xi=Et.getId(Io,Ai);hi.push({feature:Io,id:xi,index:ai,sourceLayerIndex:Ei})}for(var Qo=0,ga=_i[Ai];Qo<ga.length;Qo+=1){var Po=ga[Qo],$o=Po[0];$o.minzoom&&this.zoom<Math.floor($o.minzoom)||$o.maxzoom&&this.zoom>=$o.maxzoom||$o.visibility!=="none"&&(ae(Po,this.zoom,ke),(vr[$o.id]=$o.createBucket({index:Et.bucketLayerIDs.length,layers:Po,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ei,sourceID:this.source})).populate(hi,Ur,this.tileID.canonical),Et.bucketLayerIDs.push(Po.map(function(Nn){return Nn.id})))}}}var Fe=E.mapObject(Ur.glyphDependencies,function(Nn){return Object.keys(Nn).map(Number)});Object.keys(Fe).length?it.send("getGlyphs",{uid:this.uid,stacks:Fe},function(Nn,Fn){Kt||(Kt=Nn,er=Fn,ln.call(Yt))}):er={};var ot=Object.keys(Ur.iconDependencies);ot.length?it.send("getImages",{icons:ot,source:this.source,tileID:this.tileID,type:"icons"},function(Nn,Fn){Kt||(Kt=Nn,br=Fn,ln.call(Yt))}):br={};var Ut=Object.keys(Ur.patternDependencies);function ln(){if(Kt)return At(Kt);if(er&&br&&Vr){var Nn=new ce(er),Fn=new E.ImageAtlas(br,Vr);for(var gn in vr){var Cn=vr[gn];Cn instanceof E.SymbolBucket?(ae(Cn.layers,this.zoom,ke),E.performSymbolLayout(Cn,er,Nn.positions,br,Fn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Cn.hasPattern&&(Cn instanceof E.LineBucket||Cn instanceof E.FillBucket||Cn instanceof E.FillExtrusionBucket)&&(ae(Cn.layers,this.zoom,ke),Cn.addFeatures(Ur,this.tileID.canonical,Fn.patternPositions))}this.status="done",At(null,{buckets:E.values(vr).filter(function(pr){return!pr.isEmpty()}),featureIndex:Et,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:Fn,glyphMap:this.returnDependencies?er:null,iconMap:this.returnDependencies?br:null,glyphPositions:this.returnDependencies?Nn.positions:null})}}Ut.length?it.send("getImages",{icons:Ut,source:this.source,tileID:this.tileID,type:"patterns"},function(Nn,Fn){Kt||(Kt=Nn,Vr=Fn,ln.call(Yt))}):Vr={},ln.call(this)};var te=function(Pe,Te,ke,it){this.actor=Pe,this.layerIndex=Te,this.availableImages=ke,this.loadVectorData=it||We,this.loading={},this.loaded={}};te.prototype.loadTile=function(Pe,Te){var ke=this,it=Pe.uid;this.loading||(this.loading={});var At=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new E.RequestPerformance(Pe.request),Yt=this.loading[it]=new xe(Pe);Yt.abort=this.loadVectorData(Pe,function(hn,Et){if(delete ke.loading[it],hn||!Et)return Yt.status="done",ke.loaded[it]=Yt,Te(hn);var Kt=Et.rawData,er={};Et.expires&&(er.expires=Et.expires),Et.cacheControl&&(er.cacheControl=Et.cacheControl);var br={};if(At){var Vr=At.finish();Vr&&(br.resourceTiming=JSON.parse(JSON.stringify(Vr)))}Yt.vectorTile=Et.vectorTile,Yt.parse(Et.vectorTile,ke.layerIndex,ke.availableImages,ke.actor,function(vr,Ur){if(vr||!Ur)return Te(vr);Te(null,E.extend({rawTileData:Kt.slice(0)},Ur,er,br))}),ke.loaded=ke.loaded||{},ke.loaded[it]=Yt})},te.prototype.reloadTile=function(Pe,Te){var ke=this,it=this.loaded,At=Pe.uid,Yt=this;if(it&&it[At]){var hn=it[At];hn.showCollisionBoxes=Pe.showCollisionBoxes;var Et=function(Kt,er){var br=hn.reloadCallback;br&&(delete hn.reloadCallback,hn.parse(hn.vectorTile,Yt.layerIndex,ke.availableImages,Yt.actor,br)),Te(Kt,er)};hn.status==="parsing"?hn.reloadCallback=Et:hn.status==="done"&&(hn.vectorTile?hn.parse(hn.vectorTile,this.layerIndex,this.availableImages,this.actor,Et):Et())}},te.prototype.abortTile=function(Pe,Te){var ke=this.loading,it=Pe.uid;ke&&ke[it]&&ke[it].abort&&(ke[it].abort(),delete ke[it]),Te()},te.prototype.removeTile=function(Pe,Te){var ke=this.loaded,it=Pe.uid;ke&&ke[it]&&delete ke[it],Te()};var me=E.window.ImageBitmap,Re=function(){this.loaded={}};function $(Pe,Te){if(Pe.length!==0){le(Pe[0],Te);for(var ke=1;ke<Pe.length;ke++)le(Pe[ke],!Te)}}function le(Pe,Te){for(var ke=0,it=0,At=0,Yt=Pe.length,hn=Yt-1;At<Yt;hn=At++){var Et=(Pe[At][0]-Pe[hn][0])*(Pe[hn][1]+Pe[At][1]),Kt=ke+Et;it+=Math.abs(ke)>=Math.abs(Et)?ke-Kt+Et:Et-Kt+ke,ke=Kt}ke+it>=0!=!!Te&&Pe.reverse()}Re.prototype.loadTile=function(Pe,Te){var ke=Pe.uid,it=Pe.encoding,At=Pe.rawImageData,Yt=me&&At instanceof me?this.getImageData(At):At,hn=new E.DEMData(ke,Yt,it);this.loaded=this.loaded||{},this.loaded[ke]=hn,Te(null,hn)},Re.prototype.getImageData=function(Pe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Pe.width,Pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Pe.width,this.offscreenCanvas.height=Pe.height,this.offscreenCanvasContext.drawImage(Pe,0,0,Pe.width,Pe.height);var Te=this.offscreenCanvasContext.getImageData(-1,-1,Pe.width+2,Pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:Te.width,height:Te.height},Te.data)},Re.prototype.removeTile=function(Pe){var Te=this.loaded,ke=Pe.uid;Te&&Te[ke]&&delete Te[ke]};var K=E.vectorTile.VectorTileFeature.prototype.toGeoJSON,we=function(Pe){this._feature=Pe,this.extent=E.EXTENT,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))};we.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Pe=[],Te=0,ke=this._feature.geometry;Te<ke.length;Te+=1){var it=ke[Te];Pe.push([new E.Point$1(it[0],it[1])])}return Pe}for(var At=[],Yt=0,hn=this._feature.geometry;Yt<hn.length;Yt+=1){for(var Et=[],Kt=0,er=hn[Yt];Kt<er.length;Kt+=1){var br=er[Kt];Et.push(new E.Point$1(br[0],br[1]))}At.push(Et)}return At},we.prototype.toGeoJSON=function(Pe,Te,ke){return K.call(this,Pe,Te,ke)};var et=function(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=Pe.length,this._features=Pe};et.prototype.feature=function(Pe){return new we(this._features[Pe])};var Je=E.vectorTile.VectorTileFeature,wt=pt;function pt(Pe,Te){this.options=Te||{},this.features=Pe,this.length=Pe.length}function _t(Pe,Te){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=Te||4096}pt.prototype.feature=function(Pe){return new _t(this.features[Pe],this.options.extent)},_t.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var Te=0;Te<Pe.length;Te++){for(var ke=Pe[Te],it=[],At=0;At<ke.length;At++)it.push(new E.Point$1(ke[At][0],ke[At][1]));this.geometry.push(it)}return this.geometry},_t.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,Te=1/0,ke=-1/0,it=1/0,At=-1/0,Yt=0;Yt<Pe.length;Yt++)for(var hn=Pe[Yt],Et=0;Et<hn.length;Et++){var Kt=hn[Et];Te=Math.min(Te,Kt.x),ke=Math.max(ke,Kt.x),it=Math.min(it,Kt.y),At=Math.max(At,Kt.y)}return[Te,it,ke,At]},_t.prototype.toGeoJSON=Je.prototype.toGeoJSON;var Me=je,Ae=wt;function je(Pe){var Te=new E.pbf;return function(ke,it){for(var At in ke.layers)it.writeMessage(3,Ze,ke.layers[At])}(Pe,Te),Te.finish()}function Ze(Pe,Te){var ke;Te.writeVarintField(15,Pe.version||1),Te.writeStringField(1,Pe.name||""),Te.writeVarintField(5,Pe.extent||4096);var it={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<Pe.length;ke++)it.feature=Pe.feature(ke),Te.writeMessage(2,lt,it);var At=it.keys;for(ke=0;ke<At.length;ke++)Te.writeStringField(3,At[ke]);var Yt=it.values;for(ke=0;ke<Yt.length;ke++)Te.writeMessage(4,nt,Yt[ke])}function lt(Pe,Te){var ke=Pe.feature;ke.id!==void 0&&Te.writeVarintField(1,ke.id),Te.writeMessage(2,en,Pe),Te.writeVarintField(3,ke.type),Te.writeMessage(4,Oe,ke)}function en(Pe,Te){var ke=Pe.feature,it=Pe.keys,At=Pe.values,Yt=Pe.keycache,hn=Pe.valuecache;for(var Et in ke.properties){var Kt=Yt[Et];Kt===void 0&&(it.push(Et),Yt[Et]=Kt=it.length-1),Te.writeVarint(Kt);var er=ke.properties[Et],br=typeof er;br!=="string"&&br!=="boolean"&&br!=="number"&&(er=JSON.stringify(er));var Vr=br+":"+er,vr=hn[Vr];vr===void 0&&(At.push(er),hn[Vr]=vr=At.length-1),Te.writeVarint(vr)}}function Le(Pe,Te){return(Te<<3)+(7&Pe)}function St(Pe){return Pe<<1^Pe>>31}function Oe(Pe,Te){for(var ke=Pe.loadGeometry(),it=Pe.type,At=0,Yt=0,hn=ke.length,Et=0;Et<hn;Et++){var Kt=ke[Et],er=1;it===1&&(er=Kt.length),Te.writeVarint(Le(1,er));for(var br=it===3?Kt.length-1:Kt.length,Vr=0;Vr<br;Vr++){Vr===1&&it!==1&&Te.writeVarint(Le(2,br-1));var vr=Kt[Vr].x-At,Ur=Kt[Vr].y-Yt;Te.writeVarint(St(vr)),Te.writeVarint(St(Ur)),At+=vr,Yt+=Ur}it===3&&Te.writeVarint(Le(7,1))}}function nt(Pe,Te){var ke=typeof Pe;ke==="string"?Te.writeStringField(1,Pe):ke==="boolean"?Te.writeBooleanField(7,Pe):ke==="number"&&(Pe%1!=0?Te.writeDoubleField(3,Pe):Pe<0?Te.writeSVarintField(6,Pe):Te.writeVarintField(5,Pe))}function Ke(Pe,Te,ke,it){Xe(Pe,ke,it),Xe(Te,2*ke,2*it),Xe(Te,2*ke+1,2*it+1)}function Xe(Pe,Te,ke){var it=Pe[Te];Pe[Te]=Pe[ke],Pe[ke]=it}function Rt(Pe,Te,ke,it){var At=Pe-ke,Yt=Te-it;return At*At+Yt*Yt}Me.fromVectorTileJs=je,Me.fromGeojsonVt=function(Pe,Te){Te=Te||{};var ke={};for(var it in Pe)ke[it]=new wt(Pe[it].features,Te),ke[it].name=it,ke[it].version=Te.version,ke[it].extent=Te.extent;return je({layers:ke})},Me.GeoJSONWrapper=Ae;var bt=function(Pe){return Pe[0]},Ie=function(Pe){return Pe[1]},Gt=function(Pe,Te,ke,it,At){Te===void 0&&(Te=bt),ke===void 0&&(ke=Ie),it===void 0&&(it=64),At===void 0&&(At=Float64Array),this.nodeSize=it,this.points=Pe;for(var Yt=Pe.length<65536?Uint16Array:Uint32Array,hn=this.ids=new Yt(Pe.length),Et=this.coords=new At(2*Pe.length),Kt=0;Kt<Pe.length;Kt++)hn[Kt]=Kt,Et[2*Kt]=Te(Pe[Kt]),Et[2*Kt+1]=ke(Pe[Kt]);(function er(br,Vr,vr,Ur,_i,Ai){if(!(_i-Ur<=vr)){var wr=Ur+_i>>1;(function Ei(hi,ai,Io,xi,Qo,ga){for(;Qo>xi;){if(Qo-xi>600){var Po=Qo-xi+1,$o=Io-xi+1,Fe=Math.log(Po),ot=.5*Math.exp(2*Fe/3),Ut=.5*Math.sqrt(Fe*ot*(Po-ot)/Po)*($o-Po/2<0?-1:1);Ei(hi,ai,Io,Math.max(xi,Math.floor(Io-$o*ot/Po+Ut)),Math.min(Qo,Math.floor(Io+(Po-$o)*ot/Po+Ut)),ga)}var ln=ai[2*Io+ga],Nn=xi,Fn=Qo;for(Ke(hi,ai,xi,Io),ai[2*Qo+ga]>ln&&Ke(hi,ai,xi,Qo);Nn<Fn;){for(Ke(hi,ai,Nn,Fn),Nn++,Fn--;ai[2*Nn+ga]<ln;)Nn++;for(;ai[2*Fn+ga]>ln;)Fn--}ai[2*xi+ga]===ln?Ke(hi,ai,xi,Fn):Ke(hi,ai,++Fn,Qo),Fn<=Io&&(xi=Fn+1),Io<=Fn&&(Qo=Fn-1)}})(br,Vr,wr,Ur,_i,Ai%2),er(br,Vr,vr,Ur,wr-1,Ai+1),er(br,Vr,vr,wr+1,_i,Ai+1)}})(hn,Et,it,0,hn.length-1,0)};Gt.prototype.range=function(Pe,Te,ke,it){return function(At,Yt,hn,Et,Kt,er,br){for(var Vr,vr,Ur=[0,At.length-1,0],_i=[];Ur.length;){var Ai=Ur.pop(),wr=Ur.pop(),Ei=Ur.pop();if(wr-Ei<=br)for(var hi=Ei;hi<=wr;hi++)vr=Yt[2*hi+1],(Vr=Yt[2*hi])>=hn&&Vr<=Kt&&vr>=Et&&vr<=er&&_i.push(At[hi]);else{var ai=Math.floor((Ei+wr)/2);vr=Yt[2*ai+1],(Vr=Yt[2*ai])>=hn&&Vr<=Kt&&vr>=Et&&vr<=er&&_i.push(At[ai]);var Io=(Ai+1)%2;(Ai===0?hn<=Vr:Et<=vr)&&(Ur.push(Ei),Ur.push(ai-1),Ur.push(Io)),(Ai===0?Kt>=Vr:er>=vr)&&(Ur.push(ai+1),Ur.push(wr),Ur.push(Io))}}return _i}(this.ids,this.coords,Pe,Te,ke,it,this.nodeSize)},Gt.prototype.within=function(Pe,Te,ke){return function(it,At,Yt,hn,Et,Kt){for(var er=[0,it.length-1,0],br=[],Vr=Et*Et;er.length;){var vr=er.pop(),Ur=er.pop(),_i=er.pop();if(Ur-_i<=Kt)for(var Ai=_i;Ai<=Ur;Ai++)Rt(At[2*Ai],At[2*Ai+1],Yt,hn)<=Vr&&br.push(it[Ai]);else{var wr=Math.floor((_i+Ur)/2),Ei=At[2*wr],hi=At[2*wr+1];Rt(Ei,hi,Yt,hn)<=Vr&&br.push(it[wr]);var ai=(vr+1)%2;(vr===0?Yt-Et<=Ei:hn-Et<=hi)&&(er.push(_i),er.push(wr-1),er.push(ai)),(vr===0?Yt+Et>=Ei:hn+Et>=hi)&&(er.push(wr+1),er.push(Ur),er.push(ai))}}return br}(this.ids,this.coords,Pe,Te,ke,this.nodeSize)};var mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pe){return Pe}},Ln=function(Pe){this.options=on(Object.create(mn),Pe),this.trees=new Array(this.options.maxZoom+1)};function qn(Pe,Te,ke,it,At){return{x:Pe,y:Te,zoom:1/0,id:ke,parentId:-1,numPoints:it,properties:At}}function rr(Pe,Te){var ke=Pe.geometry.coordinates,it=ke[1];return{x:un(ke[0]),y:Vn(it),zoom:1/0,index:Te,parentId:-1}}function Ft(Pe){return{type:"Feature",id:Pe.id,properties:Jt(Pe),geometry:{type:"Point",coordinates:[(it=Pe.x,360*(it-.5)),(Te=Pe.y,ke=(180-360*Te)*Math.PI/180,360*Math.atan(Math.exp(ke))/Math.PI-90)]}};var Te,ke,it}function Jt(Pe){var Te=Pe.numPoints,ke=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return on(on({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Te,point_count_abbreviated:ke})}function un(Pe){return Pe/360+.5}function Vn(Pe){var Te=Math.sin(Pe*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function on(Pe,Te){for(var ke in Te)Pe[ke]=Te[ke];return Pe}function Dt(Pe){return Pe.x}function Vt(Pe){return Pe.y}function ze(Pe,Te,ke,it,At,Yt){var hn=At-ke,Et=Yt-it;if(hn!==0||Et!==0){var Kt=((Pe-ke)*hn+(Te-it)*Et)/(hn*hn+Et*Et);Kt>1?(ke=At,it=Yt):Kt>0&&(ke+=hn*Kt,it+=Et*Kt)}return(hn=Pe-ke)*hn+(Et=Te-it)*Et}function rt(Pe,Te,ke,it){var At={id:Pe===void 0?null:Pe,type:Te,geometry:ke,tags:it,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Yt){var hn=Yt.geometry,Et=Yt.type;if(Et==="Point"||Et==="MultiPoint"||Et==="LineString")jt(Yt,hn);else if(Et==="Polygon"||Et==="MultiLineString")for(var Kt=0;Kt<hn.length;Kt++)jt(Yt,hn[Kt]);else if(Et==="MultiPolygon")for(Kt=0;Kt<hn.length;Kt++)for(var er=0;er<hn[Kt].length;er++)jt(Yt,hn[Kt][er])}(At),At}function jt(Pe,Te){for(var ke=0;ke<Te.length;ke+=3)Pe.minX=Math.min(Pe.minX,Te[ke]),Pe.minY=Math.min(Pe.minY,Te[ke+1]),Pe.maxX=Math.max(Pe.maxX,Te[ke]),Pe.maxY=Math.max(Pe.maxY,Te[ke+1])}function U(Pe,Te,ke,it){if(Te.geometry){var At=Te.geometry.coordinates,Yt=Te.geometry.type,hn=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),Et=[],Kt=Te.id;if(ke.promoteId?Kt=Te.properties[ke.promoteId]:ke.generateId&&(Kt=it||0),Yt==="Point")pe(At,Et);else if(Yt==="MultiPoint")for(var er=0;er<At.length;er++)pe(At[er],Et);else if(Yt==="LineString")ct(At,Et,hn,!1);else if(Yt==="MultiLineString"){if(ke.lineMetrics){for(er=0;er<At.length;er++)ct(At[er],Et=[],hn,!1),Pe.push(rt(Kt,"LineString",Et,Te.properties));return}he(At,Et,hn,!1)}else if(Yt==="Polygon")he(At,Et,hn,!0);else{if(Yt!=="MultiPolygon"){if(Yt==="GeometryCollection"){for(er=0;er<Te.geometry.geometries.length;er++)U(Pe,{id:Kt,geometry:Te.geometry.geometries[er],properties:Te.properties},ke,it);return}throw new Error("Input data is not a valid GeoJSON object.")}for(er=0;er<At.length;er++){var br=[];he(At[er],br,hn,!0),Et.push(br)}}Pe.push(rt(Kt,Yt,Et,Te.properties))}}function pe(Pe,Te){Te.push($t(Pe[0])),Te.push(sn(Pe[1])),Te.push(0)}function ct(Pe,Te,ke,it){for(var At,Yt,hn=0,Et=0;Et<Pe.length;Et++){var Kt=$t(Pe[Et][0]),er=sn(Pe[Et][1]);Te.push(Kt),Te.push(er),Te.push(0),Et>0&&(hn+=it?(At*er-Kt*Yt)/2:Math.sqrt(Math.pow(Kt-At,2)+Math.pow(er-Yt,2))),At=Kt,Yt=er}var br=Te.length-3;Te[2]=1,function Vr(vr,Ur,_i,Ai){for(var wr,Ei=Ai,hi=_i-Ur>>1,ai=_i-Ur,Io=vr[Ur],xi=vr[Ur+1],Qo=vr[_i],ga=vr[_i+1],Po=Ur+3;Po<_i;Po+=3){var $o=ze(vr[Po],vr[Po+1],Io,xi,Qo,ga);if($o>Ei)wr=Po,Ei=$o;else if($o===Ei){var Fe=Math.abs(Po-hi);Fe<ai&&(wr=Po,ai=Fe)}}Ei>Ai&&(wr-Ur>3&&Vr(vr,Ur,wr,Ai),vr[wr+2]=Ei,_i-wr>3&&Vr(vr,wr,_i,Ai))}(Te,0,br,ke),Te[br+2]=1,Te.size=Math.abs(hn),Te.start=0,Te.end=Te.size}function he(Pe,Te,ke,it){for(var At=0;At<Pe.length;At++){var Yt=[];ct(Pe[At],Yt,ke,it),Te.push(Yt)}}function $t(Pe){return Pe/360+.5}function sn(Pe){var Te=Math.sin(Pe*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function pn(Pe,Te,ke,it,At,Yt,hn,Et){if(it/=Te,Yt>=(ke/=Te)&&hn<it)return Pe;if(hn<ke||Yt>=it)return null;for(var Kt=[],er=0;er<Pe.length;er++){var br=Pe[er],Vr=br.geometry,vr=br.type,Ur=At===0?br.minX:br.minY,_i=At===0?br.maxX:br.maxY;if(Ur>=ke&&_i<it)Kt.push(br);else if(!(_i<ke||Ur>=it)){var Ai=[];if(vr==="Point"||vr==="MultiPoint")Dn(Vr,Ai,ke,it,At);else if(vr==="LineString")Wn(Vr,Ai,ke,it,At,!1,Et.lineMetrics);else if(vr==="MultiLineString")fn(Vr,Ai,ke,it,At,!1);else if(vr==="Polygon")fn(Vr,Ai,ke,it,At,!0);else if(vr==="MultiPolygon")for(var wr=0;wr<Vr.length;wr++){var Ei=[];fn(Vr[wr],Ei,ke,it,At,!0),Ei.length&&Ai.push(Ei)}if(Ai.length){if(Et.lineMetrics&&vr==="LineString"){for(wr=0;wr<Ai.length;wr++)Kt.push(rt(br.id,vr,Ai[wr],br.tags));continue}vr!=="LineString"&&vr!=="MultiLineString"||(Ai.length===1?(vr="LineString",Ai=Ai[0]):vr="MultiLineString"),vr!=="Point"&&vr!=="MultiPoint"||(vr=Ai.length===3?"Point":"MultiPoint"),Kt.push(rt(br.id,vr,Ai,br.tags))}}}return Kt.length?Kt:null}function Dn(Pe,Te,ke,it,At){for(var Yt=0;Yt<Pe.length;Yt+=3){var hn=Pe[Yt+At];hn>=ke&&hn<=it&&(Te.push(Pe[Yt]),Te.push(Pe[Yt+1]),Te.push(Pe[Yt+2]))}}function Wn(Pe,Te,ke,it,At,Yt,hn){for(var Et,Kt,er=Yn(Pe),br=At===0?Pt:An,Vr=Pe.start,vr=0;vr<Pe.length-3;vr+=3){var Ur=Pe[vr],_i=Pe[vr+1],Ai=Pe[vr+2],wr=Pe[vr+3],Ei=Pe[vr+4],hi=At===0?Ur:_i,ai=At===0?wr:Ei,Io=!1;hn&&(Et=Math.sqrt(Math.pow(Ur-wr,2)+Math.pow(_i-Ei,2))),hi<ke?ai>ke&&(Kt=br(er,Ur,_i,wr,Ei,ke),hn&&(er.start=Vr+Et*Kt)):hi>it?ai<it&&(Kt=br(er,Ur,_i,wr,Ei,it),hn&&(er.start=Vr+Et*Kt)):vt(er,Ur,_i,Ai),ai<ke&&hi>=ke&&(Kt=br(er,Ur,_i,wr,Ei,ke),Io=!0),ai>it&&hi<=it&&(Kt=br(er,Ur,_i,wr,Ei,it),Io=!0),!Yt&&Io&&(hn&&(er.end=Vr+Et*Kt),Te.push(er),er=Yn(Pe)),hn&&(Vr+=Et)}var xi=Pe.length-3;Ur=Pe[xi],_i=Pe[xi+1],Ai=Pe[xi+2],(hi=At===0?Ur:_i)>=ke&&hi<=it&&vt(er,Ur,_i,Ai),xi=er.length-3,Yt&&xi>=3&&(er[xi]!==er[0]||er[xi+1]!==er[1])&&vt(er,er[0],er[1],er[2]),er.length&&Te.push(er)}function Yn(Pe){var Te=[];return Te.size=Pe.size,Te.start=Pe.start,Te.end=Pe.end,Te}function fn(Pe,Te,ke,it,At,Yt){for(var hn=0;hn<Pe.length;hn++)Wn(Pe[hn],Te,ke,it,At,Yt,!1)}function vt(Pe,Te,ke,it){Pe.push(Te),Pe.push(ke),Pe.push(it)}function Pt(Pe,Te,ke,it,At,Yt){var hn=(Yt-Te)/(it-Te);return Pe.push(Yt),Pe.push(ke+(At-ke)*hn),Pe.push(1),hn}function An(Pe,Te,ke,it,At,Yt){var hn=(Yt-ke)/(At-ke);return Pe.push(Te+(it-Te)*hn),Pe.push(Yt),Pe.push(1),hn}function Pn(Pe,Te){for(var ke=[],it=0;it<Pe.length;it++){var At,Yt=Pe[it],hn=Yt.type;if(hn==="Point"||hn==="MultiPoint"||hn==="LineString")At=Xn(Yt.geometry,Te);else if(hn==="MultiLineString"||hn==="Polygon"){At=[];for(var Et=0;Et<Yt.geometry.length;Et++)At.push(Xn(Yt.geometry[Et],Te))}else if(hn==="MultiPolygon")for(At=[],Et=0;Et<Yt.geometry.length;Et++){for(var Kt=[],er=0;er<Yt.geometry[Et].length;er++)Kt.push(Xn(Yt.geometry[Et][er],Te));At.push(Kt)}ke.push(rt(Yt.id,hn,At,Yt.tags))}return ke}function Xn(Pe,Te){var ke=[];ke.size=Pe.size,Pe.start!==void 0&&(ke.start=Pe.start,ke.end=Pe.end);for(var it=0;it<Pe.length;it+=3)ke.push(Pe[it]+Te,Pe[it+1],Pe[it+2]);return ke}function dt(Pe,Te){if(Pe.transformed)return Pe;var ke,it,At,Yt=1<<Pe.z,hn=Pe.x,Et=Pe.y;for(ke=0;ke<Pe.features.length;ke++){var Kt=Pe.features[ke],er=Kt.geometry,br=Kt.type;if(Kt.geometry=[],br===1)for(it=0;it<er.length;it+=2)Kt.geometry.push(Se(er[it],er[it+1],Te,Yt,hn,Et));else for(it=0;it<er.length;it++){var Vr=[];for(At=0;At<er[it].length;At+=2)Vr.push(Se(er[it][At],er[it][At+1],Te,Yt,hn,Et));Kt.geometry.push(Vr)}}return Pe.transformed=!0,Pe}function Se(Pe,Te,ke,it,At,Yt){return[Math.round(ke*(Pe*it-At)),Math.round(ke*(Te*it-Yt))]}function Be(Pe,Te,ke,it,At){for(var Yt=Te===At.maxZoom?0:At.tolerance/((1<<Te)*At.extent),hn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:it,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Et=0;Et<Pe.length;Et++){hn.numFeatures++,st(hn,Pe[Et],Yt,At);var Kt=Pe[Et].minX,er=Pe[Et].minY,br=Pe[Et].maxX,Vr=Pe[Et].maxY;Kt<hn.minX&&(hn.minX=Kt),er<hn.minY&&(hn.minY=er),br>hn.maxX&&(hn.maxX=br),Vr>hn.maxY&&(hn.maxY=Vr)}return hn}function st(Pe,Te,ke,it){var At=Te.geometry,Yt=Te.type,hn=[];if(Yt==="Point"||Yt==="MultiPoint")for(var Et=0;Et<At.length;Et+=3)hn.push(At[Et]),hn.push(At[Et+1]),Pe.numPoints++,Pe.numSimplified++;else if(Yt==="LineString")Lt(hn,At,Pe,ke,!1,!1);else if(Yt==="MultiLineString"||Yt==="Polygon")for(Et=0;Et<At.length;Et++)Lt(hn,At[Et],Pe,ke,Yt==="Polygon",Et===0);else if(Yt==="MultiPolygon")for(var Kt=0;Kt<At.length;Kt++){var er=At[Kt];for(Et=0;Et<er.length;Et++)Lt(hn,er[Et],Pe,ke,!0,Et===0)}if(hn.length){var br=Te.tags||null;if(Yt==="LineString"&&it.lineMetrics){for(var Vr in br={},Te.tags)br[Vr]=Te.tags[Vr];br.mapbox_clip_start=At.start/At.size,br.mapbox_clip_end=At.end/At.size}var vr={geometry:hn,type:Yt==="Polygon"||Yt==="MultiPolygon"?3:Yt==="LineString"||Yt==="MultiLineString"?2:1,tags:br};Te.id!==null&&(vr.id=Te.id),Pe.features.push(vr)}}function Lt(Pe,Te,ke,it,At,Yt){var hn=it*it;if(it>0&&Te.size<(At?hn:it))ke.numPoints+=Te.length/3;else{for(var Et=[],Kt=0;Kt<Te.length;Kt+=3)(it===0||Te[Kt+2]>hn)&&(ke.numSimplified++,Et.push(Te[Kt]),Et.push(Te[Kt+1])),ke.numPoints++;At&&function(er,br){for(var Vr=0,vr=0,Ur=er.length,_i=Ur-2;vr<Ur;_i=vr,vr+=2)Vr+=(er[vr]-er[_i])*(er[vr+1]+er[_i+1]);if(Vr>0===br)for(vr=0,Ur=er.length;vr<Ur/2;vr+=2){var Ai=er[vr],wr=er[vr+1];er[vr]=er[Ur-2-vr],er[vr+1]=er[Ur-1-vr],er[Ur-2-vr]=Ai,er[Ur-1-vr]=wr}}(Et,Yt),Pe.push(Et)}}function It(Pe,Te){var ke=(Te=this.options=function(At,Yt){for(var hn in Yt)At[hn]=Yt[hn];return At}(Object.create(this.options),Te)).debug;if(ke&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var it=function(At,Yt){var hn=[];if(At.type==="FeatureCollection")for(var Et=0;Et<At.features.length;Et++)U(hn,At.features[Et],Yt,Et);else U(hn,At.type==="Feature"?At:{geometry:At},Yt);return hn}(Pe,Te);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(it=function(At,Yt){var hn=Yt.buffer/Yt.extent,Et=At,Kt=pn(At,1,-1-hn,hn,0,-1,2,Yt),er=pn(At,1,1-hn,2+hn,0,-1,2,Yt);return(Kt||er)&&(Et=pn(At,1,-hn,1+hn,0,-1,2,Yt)||[],Kt&&(Et=Pn(Kt,1).concat(Et)),er&&(Et=Et.concat(Pn(er,-1)))),Et}(it,Te)).length&&this.splitTile(it,0,0,0),ke&&(it.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wn(Pe,Te,ke){return 32*((1<<Pe)*ke+Te)+Pe}function Kn(Pe,Te){var ke=Pe.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var it=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!it)return Te(null,null);var At=new et(it.features),Yt=Me(At);Yt.byteOffset===0&&Yt.byteLength===Yt.buffer.byteLength||(Yt=new Uint8Array(Yt)),Te(null,{vectorTile:At,rawData:Yt.buffer})}Ln.prototype.load=function(Pe){var Te=this.options,ke=Te.log,it=Te.minZoom,At=Te.maxZoom,Yt=Te.nodeSize;ke&&console.time("total time");var hn="prepare "+Pe.length+" points";ke&&console.time(hn),this.points=Pe;for(var Et=[],Kt=0;Kt<Pe.length;Kt++)Pe[Kt].geometry&&Et.push(rr(Pe[Kt],Kt));this.trees[At+1]=new Gt(Et,Dt,Vt,Yt,Float32Array),ke&&console.timeEnd(hn);for(var er=At;er>=it;er--){var br=+Date.now();Et=this._cluster(Et,er),this.trees[er]=new Gt(Et,Dt,Vt,Yt,Float32Array),ke&&console.log("z%d: %d clusters in %dms",er,Et.length,+Date.now()-br)}return ke&&console.timeEnd("total time"),this},Ln.prototype.getClusters=function(Pe,Te){var ke=((Pe[0]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,Pe[1])),At=Pe[2]===180?180:((Pe[2]+180)%360+360)%360-180,Yt=Math.max(-90,Math.min(90,Pe[3]));if(Pe[2]-Pe[0]>=360)ke=-180,At=180;else if(ke>At){var hn=this.getClusters([ke,it,180,Yt],Te),Et=this.getClusters([-180,it,At,Yt],Te);return hn.concat(Et)}for(var Kt=this.trees[this._limitZoom(Te)],er=[],br=0,Vr=Kt.range(un(ke),Vn(Yt),un(At),Vn(it));br<Vr.length;br+=1){var vr=Kt.points[Vr[br]];er.push(vr.numPoints?Ft(vr):this.points[vr.index])}return er},Ln.prototype.getChildren=function(Pe){var Te=this._getOriginId(Pe),ke=this._getOriginZoom(Pe),it="No cluster with the specified id.",At=this.trees[ke];if(!At)throw new Error(it);var Yt=At.points[Te];if(!Yt)throw new Error(it);for(var hn=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),Et=[],Kt=0,er=At.within(Yt.x,Yt.y,hn);Kt<er.length;Kt+=1){var br=At.points[er[Kt]];br.parentId===Pe&&Et.push(br.numPoints?Ft(br):this.points[br.index])}if(Et.length===0)throw new Error(it);return Et},Ln.prototype.getLeaves=function(Pe,Te,ke){var it=[];return this._appendLeaves(it,Pe,Te=Te||10,ke=ke||0,0),it},Ln.prototype.getTile=function(Pe,Te,ke){var it=this.trees[this._limitZoom(Pe)],At=Math.pow(2,Pe),Yt=this.options,hn=Yt.radius/Yt.extent,Et=(ke-hn)/At,Kt=(ke+1+hn)/At,er={features:[]};return this._addTileFeatures(it.range((Te-hn)/At,Et,(Te+1+hn)/At,Kt),it.points,Te,ke,At,er),Te===0&&this._addTileFeatures(it.range(1-hn/At,Et,1,Kt),it.points,At,ke,At,er),Te===At-1&&this._addTileFeatures(it.range(0,Et,hn/At,Kt),it.points,-1,ke,At,er),er.features.length?er:null},Ln.prototype.getClusterExpansionZoom=function(Pe){for(var Te=this._getOriginZoom(Pe)-1;Te<=this.options.maxZoom;){var ke=this.getChildren(Pe);if(Te++,ke.length!==1)break;Pe=ke[0].properties.cluster_id}return Te},Ln.prototype._appendLeaves=function(Pe,Te,ke,it,At){for(var Yt=0,hn=this.getChildren(Te);Yt<hn.length;Yt+=1){var Et=hn[Yt],Kt=Et.properties;if(Kt&&Kt.cluster?At+Kt.point_count<=it?At+=Kt.point_count:At=this._appendLeaves(Pe,Kt.cluster_id,ke,it,At):At<it?At++:Pe.push(Et),Pe.length===ke)break}return At},Ln.prototype._addTileFeatures=function(Pe,Te,ke,it,At,Yt){for(var hn=0,Et=Pe;hn<Et.length;hn+=1){var Kt=Te[Et[hn]],er=Kt.numPoints,br={type:1,geometry:[[Math.round(this.options.extent*(Kt.x*At-ke)),Math.round(this.options.extent*(Kt.y*At-it))]],tags:er?Jt(Kt):this.points[Kt.index].properties},Vr=void 0;er?Vr=Kt.id:this.options.generateId?Vr=Kt.index:this.points[Kt.index].id&&(Vr=this.points[Kt.index].id),Vr!==void 0&&(br.id=Vr),Yt.features.push(br)}},Ln.prototype._limitZoom=function(Pe){return Math.max(this.options.minZoom,Math.min(+Pe,this.options.maxZoom+1))},Ln.prototype._cluster=function(Pe,Te){for(var ke=[],it=this.options,At=it.reduce,Yt=it.minPoints,hn=it.radius/(it.extent*Math.pow(2,Te)),Et=0;Et<Pe.length;Et++){var Kt=Pe[Et];if(!(Kt.zoom<=Te)){Kt.zoom=Te;for(var er=this.trees[Te+1],br=er.within(Kt.x,Kt.y,hn),Vr=Kt.numPoints||1,vr=Vr,Ur=0,_i=br;Ur<_i.length;Ur+=1){var Ai=er.points[_i[Ur]];Ai.zoom>Te&&(vr+=Ai.numPoints||1)}if(vr>=Yt){for(var wr=Kt.x*Vr,Ei=Kt.y*Vr,hi=At&&Vr>1?this._map(Kt,!0):null,ai=(Et<<5)+(Te+1)+this.points.length,Io=0,xi=br;Io<xi.length;Io+=1){var Qo=er.points[xi[Io]];if(!(Qo.zoom<=Te)){Qo.zoom=Te;var ga=Qo.numPoints||1;wr+=Qo.x*ga,Ei+=Qo.y*ga,Qo.parentId=ai,At&&(hi||(hi=this._map(Kt,!0)),At(hi,this._map(Qo)))}}Kt.parentId=ai,ke.push(qn(wr/vr,Ei/vr,ai,vr,hi))}else if(ke.push(Kt),vr>1)for(var Po=0,$o=br;Po<$o.length;Po+=1){var Fe=er.points[$o[Po]];Fe.zoom<=Te||(Fe.zoom=Te,ke.push(Fe))}}}return ke},Ln.prototype._getOriginId=function(Pe){return Pe-this.points.length>>5},Ln.prototype._getOriginZoom=function(Pe){return(Pe-this.points.length)%32},Ln.prototype._map=function(Pe,Te){if(Pe.numPoints)return Te?on({},Pe.properties):Pe.properties;var ke=this.points[Pe.index].properties,it=this.options.map(ke);return Te&&it===ke?on({},it):it},It.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},It.prototype.splitTile=function(Pe,Te,ke,it,At,Yt,hn){for(var Et=[Pe,Te,ke,it],Kt=this.options,er=Kt.debug;Et.length;){it=Et.pop(),ke=Et.pop(),Te=Et.pop(),Pe=Et.pop();var br=1<<Te,Vr=wn(Te,ke,it),vr=this.tiles[Vr];if(!vr&&(er>1&&console.time("creation"),vr=this.tiles[Vr]=Be(Pe,Te,ke,it,Kt),this.tileCoords.push({z:Te,x:ke,y:it}),er)){er>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,ke,it,vr.numFeatures,vr.numPoints,vr.numSimplified),console.timeEnd("creation"));var Ur="z"+Te;this.stats[Ur]=(this.stats[Ur]||0)+1,this.total++}if(vr.source=Pe,At){if(Te===Kt.maxZoom||Te===At)continue;var _i=1<<At-Te;if(ke!==Math.floor(Yt/_i)||it!==Math.floor(hn/_i))continue}else if(Te===Kt.indexMaxZoom||vr.numPoints<=Kt.indexMaxPoints)continue;if(vr.source=null,Pe.length!==0){er>1&&console.time("clipping");var Ai,wr,Ei,hi,ai,Io,xi=.5*Kt.buffer/Kt.extent,Qo=.5-xi,ga=.5+xi,Po=1+xi;Ai=wr=Ei=hi=null,ai=pn(Pe,br,ke-xi,ke+ga,0,vr.minX,vr.maxX,Kt),Io=pn(Pe,br,ke+Qo,ke+Po,0,vr.minX,vr.maxX,Kt),Pe=null,ai&&(Ai=pn(ai,br,it-xi,it+ga,1,vr.minY,vr.maxY,Kt),wr=pn(ai,br,it+Qo,it+Po,1,vr.minY,vr.maxY,Kt),ai=null),Io&&(Ei=pn(Io,br,it-xi,it+ga,1,vr.minY,vr.maxY,Kt),hi=pn(Io,br,it+Qo,it+Po,1,vr.minY,vr.maxY,Kt),Io=null),er>1&&console.timeEnd("clipping"),Et.push(Ai||[],Te+1,2*ke,2*it),Et.push(wr||[],Te+1,2*ke,2*it+1),Et.push(Ei||[],Te+1,2*ke+1,2*it),Et.push(hi||[],Te+1,2*ke+1,2*it+1)}}},It.prototype.getTile=function(Pe,Te,ke){var it=this.options,At=it.extent,Yt=it.debug;if(Pe<0||Pe>24)return null;var hn=1<<Pe,Et=wn(Pe,Te=(Te%hn+hn)%hn,ke);if(this.tiles[Et])return dt(this.tiles[Et],At);Yt>1&&console.log("drilling down to z%d-%d-%d",Pe,Te,ke);for(var Kt,er=Pe,br=Te,Vr=ke;!Kt&&er>0;)er--,br=Math.floor(br/2),Vr=Math.floor(Vr/2),Kt=this.tiles[wn(er,br,Vr)];return Kt&&Kt.source?(Yt>1&&console.log("found parent tile z%d-%d-%d",er,br,Vr),Yt>1&&console.time("drilling down"),this.splitTile(Kt.source,er,br,Vr,Pe,Te,ke),Yt>1&&console.timeEnd("drilling down"),this.tiles[Et]?dt(this.tiles[Et],At):null):null};var _r=function(Pe){function Te(ke,it,At,Yt){Pe.call(this,ke,it,At,Kn),Yt&&(this.loadGeoJSON=Yt)}return Pe&&(Te.__proto__=Pe),(Te.prototype=Object.create(Pe&&Pe.prototype)).constructor=Te,Te.prototype.loadData=function(ke,it){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=it,this._pendingLoadDataParams=ke,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var ke=this;if(this._pendingCallback&&this._pendingLoadDataParams){var it=this._pendingCallback,At=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Yt=!!(At&&At.request&&At.request.collectResourceTiming)&&new E.RequestPerformance(At.request);this.loadGeoJSON(At,function(hn,Et){if(hn||!Et)return it(hn);if(typeof Et!="object")return it(new Error("Input data given to '"+At.source+"' is not a valid GeoJSON object."));(function vr(Ur,_i){var Ai,wr=Ur&&Ur.type;if(wr==="FeatureCollection")for(Ai=0;Ai<Ur.features.length;Ai++)vr(Ur.features[Ai],_i);else if(wr==="GeometryCollection")for(Ai=0;Ai<Ur.geometries.length;Ai++)vr(Ur.geometries[Ai],_i);else if(wr==="Feature")vr(Ur.geometry,_i);else if(wr==="Polygon")$(Ur.coordinates,_i);else if(wr==="MultiPolygon")for(Ai=0;Ai<Ur.coordinates.length;Ai++)$(Ur.coordinates[Ai],_i);return Ur})(Et,!0);try{if(At.filter){var Kt=E.createExpression(At.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Kt.result==="error")throw new Error(Kt.value.map(function(vr){return vr.key+": "+vr.message}).join(", "));var er=Et.features.filter(function(vr){return Kt.value.evaluate({zoom:0},vr)});Et={type:"FeatureCollection",features:er}}ke._geoJSONIndex=At.cluster?new Ln(function(vr){var Ur=vr.superclusterOptions,_i=vr.clusterProperties;if(!_i||!Ur)return Ur;for(var Ai={},wr={},Ei={accumulated:null,zoom:0},hi={properties:null},ai=Object.keys(_i),Io=0,xi=ai;Io<xi.length;Io+=1){var Qo=xi[Io],ga=_i[Qo],Po=ga[0],$o=E.createExpression(ga[1]),Fe=E.createExpression(typeof Po=="string"?[Po,["accumulated"],["get",Qo]]:Po);Ai[Qo]=$o.value,wr[Qo]=Fe.value}return Ur.map=function(ot){hi.properties=ot;for(var Ut={},ln=0,Nn=ai;ln<Nn.length;ln+=1){var Fn=Nn[ln];Ut[Fn]=Ai[Fn].evaluate(Ei,hi)}return Ut},Ur.reduce=function(ot,Ut){hi.properties=Ut;for(var ln=0,Nn=ai;ln<Nn.length;ln+=1){var Fn=Nn[ln];Ei.accumulated=ot[Fn],ot[Fn]=wr[Fn].evaluate(Ei,hi)}},Ur}(At)).load(Et.features):function(vr,Ur){return new It(vr,Ur)}(Et,At.geojsonVtOptions)}catch(vr){return it(vr)}ke.loaded={};var br={};if(Yt){var Vr=Yt.finish();Vr&&(br.resourceTiming={},br.resourceTiming[At.source]=JSON.parse(JSON.stringify(Vr)))}it(null,br)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(ke,it){var At=this.loaded;return At&&At[ke.uid]?Pe.prototype.reloadTile.call(this,ke,it):this.loadTile(ke,it)},Te.prototype.loadGeoJSON=function(ke,it){if(ke.request)E.getJSON(ke.request,it);else{if(typeof ke.data!="string")return it(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."));try{return it(null,JSON.parse(ke.data))}catch(At){return it(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."))}}},Te.prototype.removeSource=function(ke,it){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),it()},Te.prototype.getClusterExpansionZoom=function(ke,it){try{it(null,this._geoJSONIndex.getClusterExpansionZoom(ke.clusterId))}catch(At){it(At)}},Te.prototype.getClusterChildren=function(ke,it){try{it(null,this._geoJSONIndex.getChildren(ke.clusterId))}catch(At){it(At)}},Te.prototype.getClusterLeaves=function(ke,it){try{it(null,this._geoJSONIndex.getLeaves(ke.clusterId,ke.limit,ke.offset))}catch(At){it(At)}},Te}(te),Jn=function(Pe){var Te=this;this.self=Pe,this.actor=new E.Actor(Pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:te,geojson:_r},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ke,it){if(Te.workerSourceTypes[ke])throw new Error('Worker source with name "'+ke+'" already registered.');Te.workerSourceTypes[ke]=it},this.self.registerRTLTextPlugin=function(ke){if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=ke.applyArabicShaping,E.plugin.processBidirectionalText=ke.processBidirectionalText,E.plugin.processStyledBidirectionalText=ke.processStyledBidirectionalText}};return Jn.prototype.setReferrer=function(Pe,Te){this.referrer=Te},Jn.prototype.setImages=function(Pe,Te,ke){for(var it in this.availableImages[Pe]=Te,this.workerSources[Pe]){var At=this.workerSources[Pe][it];for(var Yt in At)At[Yt].availableImages=Te}ke()},Jn.prototype.setLayers=function(Pe,Te,ke){this.getLayerIndex(Pe).replace(Te),ke()},Jn.prototype.updateLayers=function(Pe,Te,ke){this.getLayerIndex(Pe).update(Te.layers,Te.removedIds),ke()},Jn.prototype.loadTile=function(Pe,Te,ke){this.getWorkerSource(Pe,Te.type,Te.source).loadTile(Te,ke)},Jn.prototype.loadDEMTile=function(Pe,Te,ke){this.getDEMWorkerSource(Pe,Te.source).loadTile(Te,ke)},Jn.prototype.reloadTile=function(Pe,Te,ke){this.getWorkerSource(Pe,Te.type,Te.source).reloadTile(Te,ke)},Jn.prototype.abortTile=function(Pe,Te,ke){this.getWorkerSource(Pe,Te.type,Te.source).abortTile(Te,ke)},Jn.prototype.removeTile=function(Pe,Te,ke){this.getWorkerSource(Pe,Te.type,Te.source).removeTile(Te,ke)},Jn.prototype.removeDEMTile=function(Pe,Te){this.getDEMWorkerSource(Pe,Te.source).removeTile(Te)},Jn.prototype.removeSource=function(Pe,Te,ke){if(this.workerSources[Pe]&&this.workerSources[Pe][Te.type]&&this.workerSources[Pe][Te.type][Te.source]){var it=this.workerSources[Pe][Te.type][Te.source];delete this.workerSources[Pe][Te.type][Te.source],it.removeSource!==void 0?it.removeSource(Te,ke):ke()}},Jn.prototype.loadWorkerSource=function(Pe,Te,ke){try{this.self.importScripts(Te.url),ke()}catch(it){ke(it.toString())}},Jn.prototype.syncRTLPluginState=function(Pe,Te,ke){try{E.plugin.setState(Te);var it=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&it!=null){this.self.importScripts(it);var At=E.plugin.isParsed();ke(At?void 0:new Error("RTL Text Plugin failed to import scripts from "+it),At)}}catch(Yt){ke(Yt.toString())}},Jn.prototype.getAvailableImages=function(Pe){var Te=this.availableImages[Pe];return Te||(Te=[]),Te},Jn.prototype.getLayerIndex=function(Pe){var Te=this.layerIndexes[Pe];return Te||(Te=this.layerIndexes[Pe]=new ue),Te},Jn.prototype.getWorkerSource=function(Pe,Te,ke){var it=this;return this.workerSources[Pe]||(this.workerSources[Pe]={}),this.workerSources[Pe][Te]||(this.workerSources[Pe][Te]={}),this.workerSources[Pe][Te][ke]||(this.workerSources[Pe][Te][ke]=new this.workerSourceTypes[Te]({send:function(At,Yt,hn){it.actor.send(At,Yt,hn,Pe)}},this.getLayerIndex(Pe),this.getAvailableImages(Pe))),this.workerSources[Pe][Te][ke]},Jn.prototype.getDEMWorkerSource=function(Pe,Te){return this.demWorkerSources[Pe]||(this.demWorkerSources[Pe]={}),this.demWorkerSources[Pe][Te]||(this.demWorkerSources[Pe][Te]=new Re),this.demWorkerSources[Pe][Te]},Jn.prototype.enforceCacheSizeLimit=function(Pe,Te){E.enforceCacheSizeLimit(Te)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Jn(self)),Jn}),W(["./shared"],function(E){"use strict";var de=E.createCommonjsModule(function(_){function S(k){return!x(k)}function x(k){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Q,ge,Ve=new Blob([""],{type:"text/javascript"}),ht=URL.createObjectURL(Ve);try{ge=new Worker(ht),Q=!0}catch(zt){Q=!1}return ge&&ge.terminate(),URL.revokeObjectURL(ht),Q}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Q=document.createElement("canvas");Q.width=Q.height=1;var ge=Q.getContext("2d");if(!ge)return!1;var Ve=ge.getImageData(0,0,1,1);return Ve&&Ve.width===Q.width}()?(O[Z=k&&k.failIfMajorPerformanceCaveat]===void 0&&(O[Z]=function(Q){var ge=function(ht){var zt=document.createElement("canvas"),Ht=Object.create(S.webGLContextAttributes);return Ht.failIfMajorPerformanceCaveat=ht,zt.probablySupportsContext?zt.probablySupportsContext("webgl",Ht)||zt.probablySupportsContext("experimental-webgl",Ht):zt.supportsContext?zt.supportsContext("webgl",Ht)||zt.supportsContext("experimental-webgl",Ht):zt.getContext("webgl",Ht)||zt.getContext("experimental-webgl",Ht)}(Q);if(!ge)return!1;var Ve=ge.createShader(ge.VERTEX_SHADER);return!(!Ve||ge.isContextLost())&&(ge.shaderSource(Ve,"void main() {}"),ge.compileShader(Ve),ge.getShaderParameter(Ve,ge.COMPILE_STATUS)===!0)}(Z)),O[Z]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Z}_.exports?_.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=x);var O={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ee={create:function(_,S,x){var O=E.window.document.createElement(_);return S!==void 0&&(O.className=S),x&&x.appendChild(O),O},createNS:function(_,S){return E.window.document.createElementNS(_,S)}},ue=E.window.document&&E.window.document.documentElement.style;function ce(_){if(!ue)return _[0];for(var S=0;S<_.length;S++)if(_[S]in ue)return _[S];return _[0]}var xe,ae=ce(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ee.disableDrag=function(){ue&&ae&&(xe=ue[ae],ue[ae]="none")},ee.enableDrag=function(){ue&&ae&&(ue[ae]=xe)};var We=ce(["transform","WebkitTransform"]);ee.setTransform=function(_,S){_.style[We]=S};var te=!1;try{var me=Object.defineProperty({},"passive",{get:function(){te=!0}});E.window.addEventListener("test",me,me),E.window.removeEventListener("test",me,me)}catch(_){te=!1}ee.addEventListener=function(_,S,x,O){O===void 0&&(O={}),_.addEventListener(S,x,"passive"in O&&te?O:O.capture)},ee.removeEventListener=function(_,S,x,O){O===void 0&&(O={}),_.removeEventListener(S,x,"passive"in O&&te?O:O.capture)};var Re=function(_){_.preventDefault(),_.stopPropagation(),E.window.removeEventListener("click",Re,!0)};function $(_){var S=_.userImage;return!!(S&&S.render&&S.render())&&(_.data.replace(new Uint8Array(S.data.buffer)),!0)}ee.suppressClick=function(){E.window.addEventListener("click",Re,!0),E.window.setTimeout(function(){E.window.removeEventListener("click",Re,!0)},0)},ee.mousePos=function(_,S){var x=_.getBoundingClientRect();return new E.Point(S.clientX-x.left-_.clientLeft,S.clientY-x.top-_.clientTop)},ee.touchPos=function(_,S){for(var x=_.getBoundingClientRect(),O=[],k=0;k<S.length;k++)O.push(new E.Point(S[k].clientX-x.left-_.clientLeft,S[k].clientY-x.top-_.clientTop));return O},ee.mouseButton=function(_){return E.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&E.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},ee.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var le=function(_){function S(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(x){if(this.loaded!==x&&(this.loaded=x,x)){for(var O=0,k=this.requestors;O<k.length;O+=1){var Z=k[O];this._notify(Z.ids,Z.callback)}this.requestors=[]}},S.prototype.getImage=function(x){return this.images[x]},S.prototype.addImage=function(x,O){this._validate(x,O)&&(this.images[x]=O)},S.prototype._validate=function(x,O){var k=!0;return this._validateStretch(O.stretchX,O.data&&O.data.width)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchX" value'))),k=!1),this._validateStretch(O.stretchY,O.data&&O.data.height)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchY" value'))),k=!1),this._validateContent(O.content,O)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "content" value'))),k=!1),k},S.prototype._validateStretch=function(x,O){if(!x)return!0;for(var k=0,Z=0,Q=x;Z<Q.length;Z+=1){var ge=Q[Z];if(ge[0]<k||ge[1]<ge[0]||O<ge[1])return!1;k=ge[1]}return!0},S.prototype._validateContent=function(x,O){return!(x&&(x.length!==4||x[0]<0||O.data.width<x[0]||x[1]<0||O.data.height<x[1]||x[2]<0||O.data.width<x[2]||x[3]<0||O.data.height<x[3]||x[2]<x[0]||x[3]<x[1]))},S.prototype.updateImage=function(x,O){O.version=this.images[x].version+1,this.images[x]=O,this.updatedImages[x]=!0},S.prototype.removeImage=function(x){var O=this.images[x];delete this.images[x],delete this.patterns[x],O.userImage&&O.userImage.onRemove&&O.userImage.onRemove()},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(x,O){var k=!0;if(!this.isLoaded())for(var Z=0,Q=x;Z<Q.length;Z+=1)this.images[Q[Z]]||(k=!1);this.isLoaded()||k?this._notify(x,O):this.requestors.push({ids:x,callback:O})},S.prototype._notify=function(x,O){for(var k={},Z=0,Q=x;Z<Q.length;Z+=1){var ge=Q[Z];this.images[ge]||this.fire(new E.Event("styleimagemissing",{id:ge}));var Ve=this.images[ge];Ve?k[ge]={data:Ve.data.clone(),pixelRatio:Ve.pixelRatio,sdf:Ve.sdf,version:Ve.version,stretchX:Ve.stretchX,stretchY:Ve.stretchY,content:Ve.content,hasRenderCallback:!!(Ve.userImage&&Ve.userImage.render)}:E.warnOnce('Image "'+ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}O(null,k)},S.prototype.getPixelSize=function(){var x=this.atlasImage;return{width:x.width,height:x.height}},S.prototype.getPattern=function(x){var O=this.patterns[x],k=this.getImage(x);if(!k)return null;if(O&&O.position.version===k.version)return O.position;if(O)O.position.version=k.version;else{var Z={w:k.data.width+2,h:k.data.height+2,x:0,y:0},Q=new E.ImagePosition(Z,k);this.patterns[x]={bin:Z,position:Q}}return this._updatePatternAtlas(),this.patterns[x].position},S.prototype.bind=function(x){var O=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E.Texture(x,this.atlasImage,O.RGBA),this.atlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var x=[];for(var O in this.patterns)x.push(this.patterns[O].bin);var k=E.potpack(x),Z=k.w,Q=k.h,ge=this.atlasImage;for(var Ve in ge.resize({width:Z||1,height:Q||1}),this.patterns){var ht=this.patterns[Ve].bin,zt=ht.x+1,Ht=ht.y+1,Zt=this.images[Ve].data,xn=Zt.width,vn=Zt.height;E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:zt,y:Ht},{width:xn,height:vn}),E.RGBAImage.copy(Zt,ge,{x:0,y:vn-1},{x:zt,y:Ht-1},{width:xn,height:1}),E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:zt,y:Ht+vn},{width:xn,height:1}),E.RGBAImage.copy(Zt,ge,{x:xn-1,y:0},{x:zt-1,y:Ht},{width:1,height:vn}),E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:zt+xn,y:Ht},{width:1,height:vn})}this.dirty=!0},S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},S.prototype.dispatchRenderCallbacks=function(x){for(var O=0,k=x;O<k.length;O+=1){var Z=k[O];if(!this.callbackDispatchedThisFrame[Z]){this.callbackDispatchedThisFrame[Z]=!0;var Q=this.images[Z];$(Q)&&this.updateImage(Z,Q)}}},S}(E.Evented),K=Je,we=Je,et=1e20;function Je(_,S,x,O,k,Z){this.fontSize=_||24,this.buffer=S===void 0?3:S,this.cutoff=O||.25,this.fontFamily=k||"sans-serif",this.fontWeight=Z||"normal",this.radius=x||8;var Q=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.d=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Int16Array(Q),this.middle=Math.round(Q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function wt(_,S,x,O,k,Z,Q){for(var ge=0;ge<S;ge++){for(var Ve=0;Ve<x;Ve++)O[Ve]=_[Ve*S+ge];for(pt(O,k,Z,Q,x),Ve=0;Ve<x;Ve++)_[Ve*S+ge]=k[Ve]}for(Ve=0;Ve<x;Ve++){for(ge=0;ge<S;ge++)O[ge]=_[Ve*S+ge];for(pt(O,k,Z,Q,S),ge=0;ge<S;ge++)_[Ve*S+ge]=Math.sqrt(k[ge])}}function pt(_,S,x,O,k){x[0]=0,O[0]=-et,O[1]=+et;for(var Z=1,Q=0;Z<k;Z++){for(var ge=(_[Z]+Z*Z-(_[x[Q]]+x[Q]*x[Q]))/(2*Z-2*x[Q]);ge<=O[Q];)Q--,ge=(_[Z]+Z*Z-(_[x[Q]]+x[Q]*x[Q]))/(2*Z-2*x[Q]);x[++Q]=Z,O[Q]=ge,O[Q+1]=+et}for(Z=0,Q=0;Z<k;Z++){for(;O[Q+1]<Z;)Q++;S[Z]=(Z-x[Q])*(Z-x[Q])+_[x[Q]]}}Je.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var S=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),O=0;O<this.size*this.size;O++){var k=S.data[4*O+3]/255;this.gridOuter[O]=k===1?0:k===0?et:Math.pow(Math.max(0,.5-k),2),this.gridInner[O]=k===1?et:k===0?0:Math.pow(Math.max(0,k-.5),2)}for(wt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),wt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),O=0;O<this.size*this.size;O++)x[O]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[O]-this.gridInner[O])/this.radius+this.cutoff))));return x},K.default=we;var _t=function(_,S){this.requestManager=_,this.localIdeographFontFamily=S,this.entries={}};_t.prototype.setURL=function(_){this.url=_},_t.prototype.getGlyphs=function(_,S){var x=this,O=[];for(var k in _)for(var Z=0,Q=_[k];Z<Q.length;Z+=1)O.push({stack:k,id:Q[Z]});E.asyncAll(O,function(ge,Ve){var ht=ge.stack,zt=ge.id,Ht=x.entries[ht];Ht||(Ht=x.entries[ht]={glyphs:{},requests:{},ranges:{}});var Zt=Ht.glyphs[zt];if(Zt===void 0){if(Zt=x._tinySDF(Ht,ht,zt))return Ht.glyphs[zt]=Zt,void Ve(null,{stack:ht,id:zt,glyph:Zt});var xn=Math.floor(zt/256);if(256*xn>65535)Ve(new Error("glyphs > 65535 not supported"));else if(Ht.ranges[xn])Ve(null,{stack:ht,id:zt,glyph:Zt});else{var vn=Ht.requests[xn];vn||(vn=Ht.requests[xn]=[],_t.loadGlyphRange(ht,xn,x.url,x.requestManager,function(Un,an){if(an){for(var kn in an)x._doesCharSupportLocalGlyph(+kn)||(Ht.glyphs[+kn]=an[+kn]);Ht.ranges[xn]=!0}for(var nr=0,mr=vn;nr<mr.length;nr+=1)(0,mr[nr])(Un,an);delete Ht.requests[xn]})),vn.push(function(Un,an){Un?Ve(Un):an&&Ve(null,{stack:ht,id:zt,glyph:an[zt]||null})})}}else Ve(null,{stack:ht,id:zt,glyph:Zt})},function(ge,Ve){if(ge)S(ge);else if(Ve){for(var ht={},zt=0,Ht=Ve;zt<Ht.length;zt+=1){var Zt=Ht[zt],xn=Zt.stack,vn=Zt.id,Un=Zt.glyph;(ht[xn]||(ht[xn]={}))[vn]=Un&&{id:Un.id,bitmap:Un.bitmap.clone(),metrics:Un.metrics}}S(null,ht)}})},_t.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(E.isChar["CJK Unified Ideographs"](_)||E.isChar["Hangul Syllables"](_)||E.isChar.Hiragana(_)||E.isChar.Katakana(_))},_t.prototype._tinySDF=function(_,S,x){var O=this.localIdeographFontFamily;if(O&&this._doesCharSupportLocalGlyph(x)){var k=_.tinySDF;if(!k){var Z="400";/bold/i.test(S)?Z="900":/medium/i.test(S)?Z="500":/light/i.test(S)&&(Z="200"),k=_.tinySDF=new _t.TinySDF(24,3,8,.25,O,Z)}return{id:x,bitmap:new E.AlphaImage({width:30,height:30},k.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_t.loadGlyphRange=function(_,S,x,O,k){var Z=256*S,Q=Z+255,ge=O.transformRequest(O.normalizeGlyphsURL(x).replace("{fontstack}",_).replace("{range}",Z+"-"+Q),E.ResourceType.Glyphs);E.getArrayBuffer(ge,function(Ve,ht){if(Ve)k(Ve);else if(ht){for(var zt={},Ht=0,Zt=E.parseGlyphPBF(ht);Ht<Zt.length;Ht+=1){var xn=Zt[Ht];zt[xn.id]=xn}k(null,zt)}})},_t.TinySDF=K;var Me=function(){this.specification=E.styleSpec.light.position};Me.prototype.possiblyEvaluate=function(_,S){return E.sphericalToCartesian(_.expression.evaluate(S))},Me.prototype.interpolate=function(_,S,x){return{x:E.number(_.x,S.x,x),y:E.number(_.y,S.y,x),z:E.number(_.z,S.z,x)}};var Ae=new E.Properties({anchor:new E.DataConstantProperty(E.styleSpec.light.anchor),position:new Me,color:new E.DataConstantProperty(E.styleSpec.light.color),intensity:new E.DataConstantProperty(E.styleSpec.light.intensity)}),je=function(_){function S(x){_.call(this),this._transitionable=new E.Transitionable(Ae),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(x,O){if(O===void 0&&(O={}),!this._validate(E.validateLight,x,O))for(var k in x){var Z=x[k];E.endsWith(k,"-transition")?this._transitionable.setTransition(k.slice(0,-11),Z):this._transitionable.setValue(k,Z)}},S.prototype.updateTransitions=function(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(x){this.properties=this._transitioning.possiblyEvaluate(x)},S.prototype._validate=function(x,O,k){return(!k||k.validate!==!1)&&E.emitValidationErrors(this,x.call(E.validateStyle,E.extend({value:O,style:{glyphs:!0,sprite:!0},styleSpec:E.styleSpec})))},S}(E.Evented),Ze=function(_,S){this.width=_,this.height=S,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ze.prototype.getDash=function(_,S){var x=_.join(",")+String(S);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(_,S)),this.dashEntry[x]},Ze.prototype.getDashRanges=function(_,S,x){var O=[],k=_.length%2==1?-_[_.length-1]*x:0,Z=_[0]*x,Q=!0;O.push({left:k,right:Z,isDash:Q,zeroLength:_[0]===0});for(var ge=_[0],Ve=1;Ve<_.length;Ve++){var ht=_[Ve];O.push({left:k=ge*x,right:Z=(ge+=ht)*x,isDash:Q=!Q,zeroLength:ht===0})}return O},Ze.prototype.addRoundDash=function(_,S,x){for(var O=S/2,k=-x;k<=x;k++)for(var Z=this.width*(this.nextRow+x+k),Q=0,ge=_[Q],Ve=0;Ve<this.width;Ve++){Ve/ge.right>1&&(ge=_[++Q]);var ht=Math.abs(Ve-ge.left),zt=Math.abs(Ve-ge.right),Ht=Math.min(ht,zt),Zt=void 0,xn=k/x*(O+1);if(ge.isDash){var vn=O-Math.abs(xn);Zt=Math.sqrt(Ht*Ht+vn*vn)}else Zt=O-Math.sqrt(Ht*Ht+xn*xn);this.data[Z+Ve]=Math.max(0,Math.min(255,Zt+128))}},Ze.prototype.addRegularDash=function(_){for(var S=_.length-1;S>=0;--S){var x=_[S],O=_[S+1];x.zeroLength?_.splice(S,1):O&&O.isDash===x.isDash&&(O.left=x.left,_.splice(S,1))}var k=_[0],Z=_[_.length-1];k.isDash===Z.isDash&&(k.left=Z.left-this.width,Z.right=k.right+this.width);for(var Q=this.width*this.nextRow,ge=0,Ve=_[ge],ht=0;ht<this.width;ht++){ht/Ve.right>1&&(Ve=_[++ge]);var zt=Math.abs(ht-Ve.left),Ht=Math.abs(ht-Ve.right),Zt=Math.min(zt,Ht);this.data[Q+ht]=Math.max(0,Math.min(255,(Ve.isDash?Zt:-Zt)+128))}},Ze.prototype.addDash=function(_,S){var x=S?7:0,O=2*x+1;if(this.nextRow+O>this.height)return E.warnOnce("LineAtlas out of space"),null;for(var k=0,Z=0;Z<_.length;Z++)k+=_[Z];if(k!==0){var Q=this.width/k,ge=this.getDashRanges(_,this.width,Q);S?this.addRoundDash(ge,Q,x):this.addRegularDash(ge)}var Ve={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:k};return this.nextRow+=O,this.dirty=!0,Ve},Ze.prototype.bind=function(_){var S=_.gl;this.texture?(S.bindTexture(S.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,S.texSubImage2D(S.TEXTURE_2D,0,0,0,this.width,this.height,S.ALPHA,S.UNSIGNED_BYTE,this.data))):(this.texture=S.createTexture(),S.bindTexture(S.TEXTURE_2D,this.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.ALPHA,this.width,this.height,0,S.ALPHA,S.UNSIGNED_BYTE,this.data))};var lt=function _(S,x){this.workerPool=S,this.actors=[],this.currentActor=0,this.id=E.uniqueId();for(var O=this.workerPool.acquire(this.id),k=0;k<O.length;k++){var Z=new _.Actor(O[k],x,this.id);Z.name="Worker "+k,this.actors.push(Z)}};function en(_,S,x){var O=function(k,Z){if(k)return x(k);if(Z){var Q=E.pick(E.extend(Z,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Z.vector_layers&&(Q.vectorLayers=Z.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(function(ge){return ge.id})),Q.tiles=S.canonicalizeTileset(Q,_.url),x(null,Q)}};return _.url?E.getJSON(S.transformRequest(S.normalizeSourceURL(_.url),E.ResourceType.Source),O):E.browser.frame(function(){return O(null,_)})}lt.prototype.broadcast=function(_,S,x){E.asyncAll(this.actors,function(O,k){O.send(_,S,k)},x=x||function(){})},lt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},lt.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},lt.Actor=E.Actor;var Le=function(_,S,x){this.bounds=E.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=S||0,this.maxzoom=x||24};Le.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},Le.prototype.contains=function(_){var S=Math.pow(2,_.z),x=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*S),O=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*S),k=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*S),Z=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*S);return _.x>=x&&_.x<k&&_.y>=O&&_.y<Z};var St=function(_){function S(x,O,k,Z){if(_.call(this),this.id=x,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(O,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},O),this._collectResourceTiming=O.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Z)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=en(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new Le(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles,x.map._requestManager._customAccessToken),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken,x.map._requestManager._customAccessToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setSourceProperty=function(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},S.prototype.setTiles=function(x){var O=this;return this.setSourceProperty(function(){O._options.tiles=x}),this},S.prototype.setUrl=function(x){var O=this;return this.setSourceProperty(function(){O.url=x,O._options.url=x}),this},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme)),Z={request:this.map._requestManager.transformRequest(k,E.ResourceType.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Q(ge,Ve){return delete x.request,x.aborted?O(null):ge&&ge.status!==404?O(ge):(Ve&&Ve.resourceTiming&&(x.resourceTiming=Ve.resourceTiming),this.map._refreshExpiredTiles&&Ve&&x.setExpiryData(Ve),x.loadVectorData(Ve,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),O(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}Z.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=O:x.request=x.actor.send("reloadTile",Z,Q.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",Z,Q.bind(this)))},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.unloadTile=function(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Oe=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.setEventedParent(Z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},O),E.extend(this,E.pick(O,["url","scheme","tileSize"]))}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=en(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new Le(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.loadTile=function(x,O){var k=this,Z=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);x.request=E.getImage(this.map._requestManager.transformRequest(Z,E.ResourceType.Tile),function(Q,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(Q)x.state="errored",O(Q);else if(ge){k.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var Ve=k.map.painter.context,ht=Ve.gl;x.texture=k.map.painter.getTileTexture(ge.width),x.texture?x.texture.update(ge,{useMipmap:!0}):(x.texture=new E.Texture(Ve,ge,ht.RGBA,{useMipmap:!0}),x.texture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE,ht.LINEAR_MIPMAP_NEAREST),Ve.extTextureFilterAnisotropic&&ht.texParameterf(ht.TEXTURE_2D,Ve.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ve.extTextureFilterAnisotropicMax)),x.state="loaded",E.cacheEntryPossiblyAdded(k.dispatcher),O(null)}})},S.prototype.abortTile=function(x,O){x.request&&(x.request.cancel(),delete x.request),O()},S.prototype.unloadTile=function(x,O){x.texture&&this.map.painter.saveTileTexture(x.texture),O()},S.prototype.hasTransition=function(){return!1},S}(E.Evented),nt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},O),this.encoding=O.encoding||"mapbox"}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Z(Q,ge){Q&&(x.state="errored",O(Q)),ge&&(x.dem=ge,x.needsHillshadePrepare=!0,x.state="loaded",O(null))}x.request=E.getImage(this.map._requestManager.transformRequest(k,E.ResourceType.Tile),function(Q,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(Q)x.state="errored",O(Q);else if(ge){this.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var Ve=E.window.ImageBitmap&&ge instanceof E.window.ImageBitmap&&E.offscreenCanvasSupported()?ge:E.browser.getImageData(ge,1),ht={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:Ve,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",ht,Z.bind(this)))}}.bind(this)),x.neighboringTiles=this._getNeighboringTiles(x.tileID)},S.prototype._getNeighboringTiles=function(x){var O=x.canonical,k=Math.pow(2,O.z),Z=(O.x-1+k)%k,Q=O.x===0?x.wrap-1:x.wrap,ge=(O.x+1+k)%k,Ve=O.x+1===k?x.wrap+1:x.wrap,ht={};return ht[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y).key]={backfilled:!1},O.y>0&&(ht[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y-1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y-1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y-1).key]={backfilled:!1}),O.y+1<k&&(ht[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y+1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y+1).key]={backfilled:!1},ht[new E.OverscaledTileID(x.overscaledZ,Ve,O.z,ge,O.y+1).key]={backfilled:!1}),ht},S.prototype.unloadTile=function(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})},S}(Oe),Ke=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=k.getActor(),this.setEventedParent(Z),this._data=O.data,this._options=E.extend({},O),this._collectResourceTiming=O.collectResourceTiming,this._resourceTiming=[],O.maxzoom!==void 0&&(this.maxzoom=O.maxzoom),O.type&&(this.type=O.type),O.attribution&&(this.attribution=O.attribution),this.promoteId=O.promoteId;var Q=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:O.cluster||!1,geojsonVtOptions:{buffer:(O.buffer!==void 0?O.buffer:128)*Q,tolerance:(O.tolerance!==void 0?O.tolerance:.375)*Q,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:O.lineMetrics||!1,generateId:O.generateId||!1},superclusterOptions:{maxZoom:O.clusterMaxZoom!==void 0?Math.min(O.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,O.clusterMinPoints||2),extent:E.EXTENT,radius:(O.clusterRadius||50)*Q,log:!1,generateId:O.generateId||!1},clusterProperties:O.clusterProperties,filter:O.filter},O.workerOptions)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(O){if(O)x.fire(new E.ErrorEvent(O));else{var k={dataType:"source",sourceDataType:"metadata"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(k.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new E.Event("data",k))}})},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setData=function(x){var O=this;return this._data=x,this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(k){if(k)O.fire(new E.ErrorEvent(k));else{var Z={dataType:"source",sourceDataType:"content"};O._collectResourceTiming&&O._resourceTiming&&O._resourceTiming.length>0&&(Z.resourceTiming=O._resourceTiming,O._resourceTiming=[]),O.fire(new E.Event("data",Z))}}),this},S.prototype.getClusterExpansionZoom=function(x,O){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},O),this},S.prototype.getClusterChildren=function(x,O){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},O),this},S.prototype.getClusterLeaves=function(x,O,k,Z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:O,offset:k},Z),this},S.prototype._updateWorkerData=function(x){var O=this;this._loaded=!1;var k=E.extend({},this.workerOptions),Z=this._data;typeof Z=="string"?(k.request=this.map._requestManager.transformRequest(E.browser.resolveURL(Z),E.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(Z),this.actor.send(this.type+".loadData",k,function(Q,ge){O._removed||ge&&ge.abandoned||(O._loaded=!0,ge&&ge.resourceTiming&&ge.resourceTiming[O.id]&&(O._resourceTiming=ge.resourceTiming[O.id].slice(0)),O.actor.send(O.type+".coalesce",{source:k.source},null),x(Q))})},S.prototype.loaded=function(){return this._loaded},S.prototype.loadTile=function(x,O){var k=this,Z=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(Z,{type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Q,ge){return delete x.request,x.unloadVectorData(),x.aborted?O(null):Q?O(Q):(x.loadVectorData(ge,k.map.painter,Z==="reloadTile"),O(null))})},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0},S.prototype.unloadTile=function(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})},S.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},S.prototype.serialize=function(){return E.extend({},this._options,{type:this.type,data:this._data})},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Xe=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Rt=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.coordinates=O.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Z),this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(x,O){var k=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),function(Z,Q){k._loaded=!0,Z?k.fire(new E.ErrorEvent(Z)):Q&&(k.image=Q,x&&(k.coordinates=x),O&&O(),k._finishLoading())})},S.prototype.loaded=function(){return this._loaded},S.prototype.updateImage=function(x){var O=this;return this.image&&x.url?(this.options.url=x.url,this.load(x.coordinates,function(){O.texture=null}),this):this},S.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setCoordinates=function(x){var O=this;this.coordinates=x;var k=x.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(Q){for(var ge=1/0,Ve=1/0,ht=-1/0,zt=-1/0,Ht=0,Zt=Q;Ht<Zt.length;Ht+=1){var xn=Zt[Ht];ge=Math.min(ge,xn.x),Ve=Math.min(Ve,xn.y),ht=Math.max(ht,xn.x),zt=Math.max(zt,xn.y)}var vn=Math.max(ht-ge,zt-Ve),Un=Math.max(0,Math.floor(-Math.log(vn)/Math.LN2)),an=Math.pow(2,Un);return new E.CanonicalTileID(Un,Math.floor((ge+ht)/2*an),Math.floor((Ve+zt)/2*an))}(k),this.minzoom=this.maxzoom=this.tileID.z;var Z=k.map(function(Q){return O.tileID.getTilePoint(Q)._round()});return this._boundsArray=new E.StructArrayLayout4i8,this._boundsArray.emplaceBack(Z[0].x,Z[0].y,0,0),this._boundsArray.emplaceBack(Z[1].x,Z[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(Z[3].x,Z[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(Z[2].x,Z[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this},S.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E.Texture(x,this.image,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.loadTile=function(x,O){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},O(null)):(x.state="errored",O(null))},S.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return!1},S}(E.Evented),bt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.roundZoom=!0,this.type="video",this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1;var O=this.options;this.urls=[];for(var k=0,Z=O.urls;k<Z.length;k+=1)this.urls.push(this.map._requestManager.transformRequest(Z[k],E.ResourceType.Source).url);E.getVideo(this.urls,function(Q,ge){x._loaded=!0,Q?x.fire(new E.ErrorEvent(Q)):ge&&(x.video=ge,x.video.loop=!0,x.video.setAttribute("playsinline",""),x.video.addEventListener("playing",function(){x.map.triggerRepaint()}),x.map&&x.video.play(),x._finishLoading())})},S.prototype.pause=function(){this.video&&this.video.pause()},S.prototype.play=function(){this.video&&this.video.play()},S.prototype.seek=function(x){if(this.video){var O=this.video.seekable;x<O.start(0)||x>O.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+O.start(0)+" and "+O.end(0)+"-second mark."))):this.video.currentTime=x}},S.prototype.getVideo=function(){return this.video},S.prototype.onAdd=function(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},S.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE),O.texSubImage2D(O.TEXTURE_2D,0,0,0,O.RGBA,O.UNSIGNED_BYTE,this.video)):(this.texture=new E.Texture(x,this.video,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this.video&&!this.video.paused},S}(Rt),Ie=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),O.coordinates?Array.isArray(O.coordinates)&&O.coordinates.length===4&&!O.coordinates.some(function(Q){return!Array.isArray(Q)||Q.length!==2||Q.some(function(ge){return typeof ge!="number"})})||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "coordinates"'))),O.animate&&typeof O.animate!="boolean"&&this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),O.canvas?typeof O.canvas=="string"||O.canvas instanceof E.window.HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=O,this.animate=O.animate===void 0||O.animate}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof E.window.HTMLCanvasElement?this.options.canvas:E.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},S.prototype.getCanvas=function(){return this.canvas},S.prototype.onAdd=function(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()},S.prototype.onRemove=function(){this.pause()},S.prototype.prepare=function(){var x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var O=this.map.painter.context,k=O.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=O.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E.Texture(O,this.canvas,k.RGBA,{premultiply:!0}),this.tiles){var Q=this.tiles[Z];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this._playing},S.prototype._hasInvalidDimensions=function(){for(var x=0,O=[this.canvas.width,this.canvas.height];x<O.length;x+=1){var k=O[x];if(isNaN(k)||k<=0)return!0}return!1},S}(Rt),Gt={vector:St,raster:Oe,"raster-dem":nt,geojson:Ke,video:bt,image:Rt,canvas:Ie};function mn(_,S){var x=E.identity([]);return E.translate(x,x,[1,1,0]),E.scale(x,x,[.5*_.width,.5*_.height,1]),E.multiply(x,x,_.calculatePosMatrix(S.toUnwrapped()))}function Ln(_,S,x,O,k,Z){var Q=function(Un,an,kn){if(Un)for(var nr=0,mr=Un;nr<mr.length;nr+=1){var Rr=an[mr[nr]];if(Rr&&Rr.source===kn&&Rr.type==="fill-extrusion")return!0}else for(var Ar in an){var zr=an[Ar];if(zr.source===kn&&zr.type==="fill-extrusion")return!0}return!1}(k&&k.layers,S,_.id),ge=Z.maxPitchScaleFactor(),Ve=_.tilesIn(O,ge,Q);Ve.sort(qn);for(var ht=[],zt=0,Ht=Ve;zt<Ht.length;zt+=1){var Zt=Ht[zt];ht.push({wrappedTileID:Zt.tileID.wrapped().key,queryResults:Zt.tile.queryRenderedFeatures(S,x,_._state,Zt.queryGeometry,Zt.cameraQueryGeometry,Zt.scale,k,Z,ge,mn(_.transform,Zt.tileID))})}var xn=function(Un){for(var an={},kn={},nr=0,mr=Un;nr<mr.length;nr+=1){var Rr=mr[nr],Ar=Rr.queryResults,zr=Rr.wrappedTileID,ni=kn[zr]=kn[zr]||{};for(var zi in Ar)for(var Li=Ar[zi],co=ni[zi]=ni[zi]||{},Uo=an[zi]=an[zi]||[],Zo=0,Xo=Li;Zo<Xo.length;Zo+=1){var cs=Xo[Zo];co[cs.featureIndex]||(co[cs.featureIndex]=!0,Uo.push(cs))}}return an}(ht);for(var vn in xn)xn[vn].forEach(function(Un){var an=Un.feature,kn=_.getFeatureState(an.layer["source-layer"],an.id);an.source=an.layer.source,an.layer["source-layer"]&&(an.sourceLayer=an.layer["source-layer"]),an.state=kn});return xn}function qn(_,S){var x=_.tileID,O=S.tileID;return x.overscaledZ-O.overscaledZ||x.canonical.y-O.canonical.y||x.wrap-O.wrap||x.canonical.x-O.canonical.x}var rr=function(_,S){this.max=_,this.onRemove=S,this.reset()};rr.prototype.reset=function(){for(var _ in this.data)for(var S=0,x=this.data[_];S<x.length;S+=1){var O=x[S];O.timeout&&clearTimeout(O.timeout),this.onRemove(O.value)}return this.data={},this.order=[],this},rr.prototype.add=function(_,S,x){var O=this,k=_.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);var Z={value:S,timeout:void 0};if(x!==void 0&&(Z.timeout=setTimeout(function(){O.remove(_,Z)},x)),this.data[k].push(Z),this.order.push(k),this.order.length>this.max){var Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this},rr.prototype.has=function(_){return _.wrapped().key in this.data},rr.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},rr.prototype._getAndRemoveByKey=function(_){var S=this.data[_].shift();return S.timeout&&clearTimeout(S.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),S.value},rr.prototype.getByKey=function(_){var S=this.data[_];return S?S[0].value:null},rr.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},rr.prototype.remove=function(_,S){if(!this.has(_))return this;var x=_.wrapped().key,O=S===void 0?0:this.data[x].indexOf(S),k=this.data[x][O];return this.data[x].splice(O,1),k.timeout&&clearTimeout(k.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(k.value),this.order.splice(this.order.indexOf(x),1),this},rr.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},rr.prototype.filter=function(_){var S=[];for(var x in this.data)for(var O=0,k=this.data[x];O<k.length;O+=1){var Z=k[O];_(Z.value)||S.push(Z)}for(var Q=0,ge=S;Q<ge.length;Q+=1){var Ve=ge[Q];this.remove(Ve.value.tileID,Ve)}};var Ft=function(_,S,x){this.context=_;var O=_.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};Ft.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ft.prototype.updateData=function(_){var S=this.context.gl;this.context.unbindVAO(),this.bind(),S.bufferSubData(S.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},Ft.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},un=function(_,S,x,O){this.length=S.length,this.attributes=x,this.itemSize=S.bytesPerElement,this.dynamicDraw=O,this.context=_;var k=_.gl;this.buffer=k.createBuffer(),_.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};un.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},un.prototype.updateData=function(_){var S=this.context.gl;this.bind(),S.bufferSubData(S.ARRAY_BUFFER,0,_.arrayBuffer)},un.prototype.enableAttributes=function(_,S){for(var x=0;x<this.attributes.length;x++){var O=S.attributes[this.attributes[x].name];O!==void 0&&_.enableVertexAttribArray(O)}},un.prototype.setVertexAttribPointers=function(_,S,x){for(var O=0;O<this.attributes.length;O++){var k=this.attributes[O],Z=S.attributes[k.name];Z!==void 0&&_.vertexAttribPointer(Z,k.components,_[Jt[k.type]],!1,this.itemSize,k.offset+this.itemSize*(x||0))}},un.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Vn=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Vn.prototype.get=function(){return this.current},Vn.prototype.set=function(_){},Vn.prototype.getDefault=function(){return this.default},Vn.prototype.setDefault=function(){this.set(this.default)};var on=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Vn),Dt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 1},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)},S}(Vn),Vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)},S}(Vn),ze=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[!0,!0,!0,!0]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Vn),rt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)},S}(Vn),jt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 255},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)},S}(Vn),U=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},S.prototype.set=function(x){var O=this.current;(x.func!==O.func||x.ref!==O.ref||x.mask!==O.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)},S}(Vn),pe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)},S}(Vn),ct=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.STENCIL_TEST):O.disable(O.STENCIL_TEST),this.current=x,this.dirty=!1}},S}(Vn),he=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[0,1]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Vn),$t=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.DEPTH_TEST):O.disable(O.DEPTH_TEST),this.current=x,this.dirty=!1}},S}(Vn),sn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.LESS},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)},S}(Vn),pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.BLEND):O.disable(O.BLEND),this.current=x,this.dirty=!1}},S}(Vn),Dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.ONE,x.ZERO]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Vn),Wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Vn),Yn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.FUNC_ADD},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)},S}(Vn),fn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.CULL_FACE):O.disable(O.CULL_FACE),this.current=x,this.dirty=!1}},S}(Vn),vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.BACK},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)},S}(Vn),Pt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.CCW},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)},S}(Vn),An=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)},S}(Vn),Pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.TEXTURE0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)},S}(Vn),Xn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Vn),dt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,x),this.current=x,this.dirty=!1}},S}(Vn),Se=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindRenderbuffer(O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Vn),Be=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindTexture(O.TEXTURE_2D,x),this.current=x,this.dirty=!1}},S}(Vn),st=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindBuffer(O.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}},S}(Vn),Lt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){var O=this.gl;O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1},S}(Vn),It=function(_){function S(x){_.call(this,x),this.vao=x.extVertexArrayObject}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){this.vao&&(x!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(x),this.current=x,this.dirty=!1)},S}(Vn),wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 4},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}},S}(Vn),Kn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}},S}(Vn),_r=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}},S}(Vn),Jn=function(_){function S(x,O){_.call(this,x),this.context=x,this.parent=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S}(Vn),Pe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.setDirty=function(){this.dirty=!0},S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}},S}(Jn),Te=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Jn),ke=function(_,S,x,O){this.context=_,this.width=S,this.height=x;var k=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new Pe(_,k),O&&(this.depthAttachment=new Te(_,k))};ke.prototype.destroy=function(){var _=this.context.gl,S=this.colorAttachment.get();if(S&&_.deleteTexture(S),this.depthAttachment){var x=this.depthAttachment.get();x&&_.deleteRenderbuffer(x)}_.deleteFramebuffer(this.framebuffer)};var it=function(_,S,x){this.func=_,this.mask=S,this.range=x};it.ReadOnly=!1,it.ReadWrite=!0,it.disabled=new it(519,it.ReadOnly,[0,1]);var At=function(_,S,x,O,k,Z){this.test=_,this.ref=S,this.mask=x,this.fail=O,this.depthFail=k,this.pass=Z};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var Yt=function(_,S,x){this.blendFunction=_,this.blendColor=S,this.mask=x};Yt.disabled=new Yt(Yt.Replace=[1,0],E.Color.transparent,[!1,!1,!1,!1]),Yt.unblended=new Yt(Yt.Replace,E.Color.transparent,[!0,!0,!0,!0]),Yt.alphaBlended=new Yt([1,771],E.Color.transparent,[!0,!0,!0,!0]);var hn=function(_,S,x){this.enable=_,this.mode=S,this.frontFace=x};hn.disabled=new hn(!1,1029,2305),hn.backCCW=new hn(!0,1029,2305);var Et=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new on(this),this.clearDepth=new Dt(this),this.clearStencil=new Vt(this),this.colorMask=new ze(this),this.depthMask=new rt(this),this.stencilMask=new jt(this),this.stencilFunc=new U(this),this.stencilOp=new pe(this),this.stencilTest=new ct(this),this.depthRange=new he(this),this.depthTest=new $t(this),this.depthFunc=new sn(this),this.blend=new pn(this),this.blendFunc=new Dn(this),this.blendColor=new Wn(this),this.blendEquation=new Yn(this),this.cullFace=new fn(this),this.cullFaceSide=new vt(this),this.frontFace=new Pt(this),this.program=new An(this),this.activeTexture=new Pn(this),this.viewport=new Xn(this),this.bindFramebuffer=new dt(this),this.bindRenderbuffer=new Se(this),this.bindTexture=new Be(this),this.bindVertexBuffer=new st(this),this.bindElementBuffer=new Lt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new It(this),this.pixelStoreUnpack=new wn(this),this.pixelStoreUnpackPremultiplyAlpha=new Kn(this),this.pixelStoreUnpackFlipY=new _r(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};Et.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Et.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Et.prototype.createIndexBuffer=function(_,S){return new Ft(this,_,S)},Et.prototype.createVertexBuffer=function(_,S,x){return new un(this,_,S,x)},Et.prototype.createRenderbuffer=function(_,S,x){var O=this.gl,k=O.createRenderbuffer();return this.bindRenderbuffer.set(k),O.renderbufferStorage(O.RENDERBUFFER,_,S,x),this.bindRenderbuffer.set(null),k},Et.prototype.createFramebuffer=function(_,S,x){return new ke(this,_,S,x)},Et.prototype.clear=function(_){var S=_.color,x=_.depth,O=this.gl,k=0;S&&(k|=O.COLOR_BUFFER_BIT,this.clearColor.set(S),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(k|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),O.clear(k)},Et.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},Et.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},Et.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},Et.prototype.setColorMode=function(_){E.deepEqual(_.blendFunction,Yt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},Et.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Kt=function(_){function S(x,O,k){var Z=this;_.call(this),this.id=x,this.dispatcher=k,this.on("data",function(Q){Q.dataType==="source"&&Q.sourceDataType==="metadata"&&(Z._sourceLoaded=!0),Z._sourceLoaded&&!Z._paused&&Q.dataType==="source"&&Q.sourceDataType==="content"&&(Z.reload(),Z.transform&&Z.update(Z.transform))}),this.on("error",function(){Z._sourceErrored=!0}),this._source=function(Q,ge,Ve,ht){var zt=new Gt[ge.type](Q,ge,Ve,ht);if(zt.id!==Q)throw new Error("Expected Source id to be "+Q+" instead of "+zt.id);return E.bindAll(["load","abort","unload","serialize","prepare"],zt),zt}(x,O,k,this),this._tiles={},this._cache=new rr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new E.SourceFeatureState}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(x)},S.prototype.onRemove=function(x){this._source&&this._source.onRemove&&this._source.onRemove(x)},S.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var x in this._tiles){var O=this._tiles[x];if(O.state!=="loaded"&&O.state!=="errored")return!1}return!0},S.prototype.getSource=function(){return this._source},S.prototype.pause=function(){this._paused=!0},S.prototype.resume=function(){if(this._paused){var x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform)}},S.prototype._loadTile=function(x,O){return this._source.loadTile(x,O)},S.prototype._unloadTile=function(x){if(this._source.unloadTile)return this._source.unloadTile(x,function(){})},S.prototype._abortTile=function(x){if(this._source.abortTile)return this._source.abortTile(x,function(){})},S.prototype.serialize=function(){return this._source.serialize()},S.prototype.prepare=function(x){for(var O in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var k=this._tiles[O];k.upload(x),k.prepare(this.map.style.imageManager)}},S.prototype.getIds=function(){return E.values(this._tiles).map(function(x){return x.tileID}).sort(er).map(function(x){return x.key})},S.prototype.getRenderableIds=function(x){var O=this,k=[];for(var Z in this._tiles)this._isIdRenderable(Z,x)&&k.push(this._tiles[Z]);return x?k.sort(function(Q,ge){var Ve=Q.tileID,ht=ge.tileID,zt=new E.Point(Ve.canonical.x,Ve.canonical.y)._rotate(O.transform.angle),Ht=new E.Point(ht.canonical.x,ht.canonical.y)._rotate(O.transform.angle);return Ve.overscaledZ-ht.overscaledZ||Ht.y-zt.y||Ht.x-zt.x}).map(function(Q){return Q.tileID.key}):k.map(function(Q){return Q.tileID}).sort(er).map(function(Q){return Q.key})},S.prototype.hasRenderableParent=function(x){var O=this.findLoadedParent(x,0);return!!O&&this._isIdRenderable(O.tileID.key)},S.prototype._isIdRenderable=function(x,O){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(O||!this._tiles[x].holdingForFade())},S.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var x in this._cache.reset(),this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")},S.prototype._reloadTile=function(x,O){var k=this._tiles[x];k&&(k.state!=="loading"&&(k.state=O),this._loadTile(k,this._tileLoaded.bind(this,k,x,O)))},S.prototype._tileLoaded=function(x,O,k,Z){if(Z)return x.state="errored",void(Z.status!==404?this._source.fire(new E.ErrorEvent(Z,{tile:x})):this.update(this.transform));x.timeAdded=E.browser.now(),k==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(O,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),this._source.fire(new E.Event("data",{dataType:"source",tile:x,coord:x.tileID}))},S.prototype._backfillDEM=function(x){for(var O=this.getRenderableIds(),k=0;k<O.length;k++){var Z=O[k];if(x.neighboringTiles&&x.neighboringTiles[Z]){var Q=this.getTileByID(Z);ge(x,Q),ge(Q,x)}}function ge(Ve,ht){Ve.needsHillshadePrepare=!0;var zt=ht.tileID.canonical.x-Ve.tileID.canonical.x,Ht=ht.tileID.canonical.y-Ve.tileID.canonical.y,Zt=Math.pow(2,Ve.tileID.canonical.z),xn=ht.tileID.key;zt===0&&Ht===0||Math.abs(Ht)>1||(Math.abs(zt)>1&&(Math.abs(zt+Zt)===1?zt+=Zt:Math.abs(zt-Zt)===1&&(zt-=Zt)),ht.dem&&Ve.dem&&(Ve.dem.backfillBorder(ht.dem,zt,Ht),Ve.neighboringTiles&&Ve.neighboringTiles[xn]&&(Ve.neighboringTiles[xn].backfilled=!0)))}},S.prototype.getTile=function(x){return this.getTileByID(x.key)},S.prototype.getTileByID=function(x){return this._tiles[x]},S.prototype._retainLoadedChildren=function(x,O,k,Z){for(var Q in this._tiles){var ge=this._tiles[Q];if(!(Z[Q]||!ge.hasData()||ge.tileID.overscaledZ<=O||ge.tileID.overscaledZ>k)){for(var Ve=ge.tileID;ge&&ge.tileID.overscaledZ>O+1;){var ht=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);(ge=this._tiles[ht.key])&&ge.hasData()&&(Ve=ht)}for(var zt=Ve;zt.overscaledZ>O;)if(x[(zt=zt.scaledTo(zt.overscaledZ-1)).key]){Z[Ve.key]=Ve;break}}}},S.prototype.findLoadedParent=function(x,O){if(x.key in this._loadedParentTiles){var k=this._loadedParentTiles[x.key];return k&&k.tileID.overscaledZ>=O?k:null}for(var Z=x.overscaledZ-1;Z>=O;Z--){var Q=x.scaledTo(Z),ge=this._getLoadedTile(Q);if(ge)return ge}},S.prototype._getLoadedTile=function(x){var O=this._tiles[x.key];return O&&O.hasData()?O:this._cache.getByKey(x.wrapped().key)},S.prototype.updateCacheSize=function(x){var O=Math.ceil(x.width/this._source.tileSize)+1,k=Math.ceil(x.height/this._source.tileSize)+1,Z=Math.floor(O*k*5),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Z):Z;this._cache.setMaxSize(Q)},S.prototype.handleWrapJump=function(x){var O=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,O){var k={};for(var Z in this._tiles){var Q=this._tiles[Z];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+O),k[Q.tileID.key]=Q}for(var ge in this._tiles=k,this._timers)clearTimeout(this._timers[ge]),delete this._timers[ge];for(var Ve in this._tiles)this._setTileReloadTimer(Ve,this._tiles[Ve])}},S.prototype.update=function(x){var O=this;if(this.transform=x,this._sourceLoaded&&!this._paused){var k;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?k=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ni){return new E.OverscaledTileID(ni.canonical.z,ni.wrap,ni.canonical.z,ni.canonical.x,ni.canonical.y)}):(k=x.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(k=k.filter(function(ni){return O._source.hasTile(ni)}))):k=[];var Z=x.coveringZoomLevel(this._source),Q=Math.max(Z-S.maxOverzooming,this._source.minzoom),ge=Math.max(Z+S.maxUnderzooming,this._source.minzoom),Ve=this._updateRetainedTiles(k,Z);if(br(this._source.type)){for(var ht={},zt={},Ht=0,Zt=Object.keys(Ve);Ht<Zt.length;Ht+=1){var xn=Zt[Ht],vn=Ve[xn],Un=this._tiles[xn];if(Un&&!(Un.fadeEndTime&&Un.fadeEndTime<=E.browser.now())){var an=this.findLoadedParent(vn,Q);an&&(this._addTile(an.tileID),ht[an.tileID.key]=an.tileID),zt[xn]=vn}}for(var kn in this._retainLoadedChildren(zt,Z,ge,Ve),ht)Ve[kn]||(this._coveredTiles[kn]=!0,Ve[kn]=ht[kn])}for(var nr in Ve)this._tiles[nr].clearFadeHold();for(var mr=0,Rr=E.keysDifference(this._tiles,Ve);mr<Rr.length;mr+=1){var Ar=Rr[mr],zr=this._tiles[Ar];zr.hasSymbolBuckets&&!zr.holdingForFade()?zr.setHoldDuration(this.map._fadeDuration):zr.hasSymbolBuckets&&!zr.symbolFadeFinished()||this._removeTile(Ar)}this._updateLoadedParentTileCache()}},S.prototype.releaseSymbolFadeTiles=function(){for(var x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)},S.prototype._updateRetainedTiles=function(x,O){for(var k={},Z={},Q=Math.max(O-S.maxOverzooming,this._source.minzoom),ge=Math.max(O+S.maxUnderzooming,this._source.minzoom),Ve={},ht=0,zt=x;ht<zt.length;ht+=1){var Ht=zt[ht],Zt=this._addTile(Ht);k[Ht.key]=Ht,Zt.hasData()||O<this._source.maxzoom&&(Ve[Ht.key]=Ht)}this._retainLoadedChildren(Ve,O,ge,k);for(var xn=0,vn=x;xn<vn.length;xn+=1){var Un=vn[xn],an=this._tiles[Un.key];if(!an.hasData()){if(O+1>this._source.maxzoom){var kn=Un.children(this._source.maxzoom)[0],nr=this.getTile(kn);if(nr&&nr.hasData()){k[kn.key]=kn;continue}}else{var mr=Un.children(this._source.maxzoom);if(k[mr[0].key]&&k[mr[1].key]&&k[mr[2].key]&&k[mr[3].key])continue}for(var Rr=an.wasRequested(),Ar=Un.overscaledZ-1;Ar>=Q;--Ar){var zr=Un.scaledTo(Ar);if(Z[zr.key]||(Z[zr.key]=!0,!(an=this.getTile(zr))&&Rr&&(an=this._addTile(zr)),an&&(k[zr.key]=zr,Rr=an.wasRequested(),an.hasData())))break}}}return k},S.prototype._updateLoadedParentTileCache=function(){for(var x in this._loadedParentTiles={},this._tiles){for(var O=[],k=void 0,Z=this._tiles[x].tileID;Z.overscaledZ>0;){if(Z.key in this._loadedParentTiles){k=this._loadedParentTiles[Z.key];break}O.push(Z.key);var Q=Z.scaledTo(Z.overscaledZ-1);if(k=this._getLoadedTile(Q))break;Z=Q}for(var ge=0,Ve=O;ge<Ve.length;ge+=1)this._loadedParentTiles[Ve[ge]]=k}},S.prototype._addTile=function(x){var O=this._tiles[x.key];if(O)return O;(O=this._cache.getAndRemove(x))&&(this._setTileReloadTimer(x.key,O),O.tileID=x,this._state.initializeTileState(O,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,O)));var k=!!O;return k||(O=new E.Tile(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(O,this._tileLoaded.bind(this,O,x.key,O.state))),O?(O.uses++,this._tiles[x.key]=O,k||this._source.fire(new E.Event("dataloading",{tile:O,coord:O.tileID,dataType:"source"})),O):null},S.prototype._setTileReloadTimer=function(x,O){var k=this;x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);var Z=O.getExpiryTimeout();Z&&(this._timers[x]=setTimeout(function(){k._reloadTile(x,"expired"),delete k._timers[x]},Z))},S.prototype._removeTile=function(x){var O=this._tiles[x];O&&(O.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),O.uses>0||(O.hasData()&&O.state!=="reloading"?this._cache.add(O.tileID,O,O.getExpiryTimeout()):(O.aborted=!0,this._abortTile(O),this._unloadTile(O))))},S.prototype.clearTiles=function(){for(var x in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(x);this._cache.reset()},S.prototype.tilesIn=function(x,O,k){var Z=this,Q=[],ge=this.transform;if(!ge)return Q;for(var Ve=k?ge.getCameraQueryGeometry(x):x,ht=x.map(function(Ar){return ge.pointCoordinate(Ar)}),zt=Ve.map(function(Ar){return ge.pointCoordinate(Ar)}),Ht=this.getIds(),Zt=1/0,xn=1/0,vn=-1/0,Un=-1/0,an=0,kn=zt;an<kn.length;an+=1){var nr=kn[an];Zt=Math.min(Zt,nr.x),xn=Math.min(xn,nr.y),vn=Math.max(vn,nr.x),Un=Math.max(Un,nr.y)}for(var mr=function(Ar){var zr=Z._tiles[Ht[Ar]];if(!zr.holdingForFade()){var ni=zr.tileID,zi=Math.pow(2,ge.zoom-zr.tileID.overscaledZ),Li=O*zr.queryPadding*E.EXTENT/zr.tileSize/zi,co=[ni.getTilePoint(new E.MercatorCoordinate(Zt,xn)),ni.getTilePoint(new E.MercatorCoordinate(vn,Un))];if(co[0].x-Li<E.EXTENT&&co[0].y-Li<E.EXTENT&&co[1].x+Li>=0&&co[1].y+Li>=0){var Uo=ht.map(function(Xo){return ni.getTilePoint(Xo)}),Zo=zt.map(function(Xo){return ni.getTilePoint(Xo)});Q.push({tile:zr,tileID:ni,queryGeometry:Uo,cameraQueryGeometry:Zo,scale:zi})}}},Rr=0;Rr<Ht.length;Rr++)mr(Rr);return Q},S.prototype.getVisibleCoordinates=function(x){for(var O=this,k=this.getRenderableIds(x).map(function(Ve){return O._tiles[Ve].tileID}),Z=0,Q=k;Z<Q.length;Z+=1){var ge=Q[Z];ge.posMatrix=this.transform.calculatePosMatrix(ge.toUnwrapped())}return k},S.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(br(this._source.type))for(var x in this._tiles){var O=this._tiles[x];if(O.fadeEndTime!==void 0&&O.fadeEndTime>=E.browser.now())return!0}return!1},S.prototype.setFeatureState=function(x,O,k){this._state.updateState(x=x||"_geojsonTileLayer",O,k)},S.prototype.removeFeatureState=function(x,O,k){this._state.removeFeatureState(x=x||"_geojsonTileLayer",O,k)},S.prototype.getFeatureState=function(x,O){return this._state.getState(x=x||"_geojsonTileLayer",O)},S.prototype.setDependencies=function(x,O,k){var Z=this._tiles[x];Z&&Z.setDependencies(O,k)},S.prototype.reloadTilesForDependencies=function(x,O){for(var k in this._tiles)this._tiles[k].hasDependency(x,O)&&this._reloadTile(k,"reloading");this._cache.filter(function(Z){return!Z.hasDependency(x,O)})},S}(E.Evented);function er(_,S){var x=Math.abs(2*_.wrap)-+(_.wrap<0),O=Math.abs(2*S.wrap)-+(S.wrap<0);return _.overscaledZ-S.overscaledZ||O-x||S.canonical.y-_.canonical.y||S.canonical.x-_.canonical.x}function br(_){return _==="raster"||_==="image"||_==="video"}function Vr(){return new E.window.Worker(b0.workerUrl)}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;var vr="mapboxgl_preloaded_worker_pool",Ur=function(){this.active={}};Ur.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<Ur.workerCount;)this.workers.push(new Vr);return this.active[_]=!0,this.workers.slice()},Ur.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(S){S.terminate()}),this.workers=null)},Ur.prototype.isPreloaded=function(){return!!this.active[vr]},Ur.prototype.numActive=function(){return Object.keys(this.active).length};var _i,Ai=Math.floor(E.browser.hardwareConcurrency/2);function wr(){return _i||(_i=new Ur),_i}function Ei(_,S){var x={};for(var O in _)O!=="ref"&&(x[O]=_[O]);return E.refProperties.forEach(function(k){k in S&&(x[k]=S[k])}),x}function hi(_){_=_.slice();for(var S=Object.create(null),x=0;x<_.length;x++)S[_[x].id]=_[x];for(var O=0;O<_.length;O++)"ref"in _[O]&&(_[O]=Ei(_[O],S[_[O].ref]));return _}Ur.workerCount=Math.max(Math.min(Ai,6),1);var ai={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Io(_,S,x){x.push({command:ai.addSource,args:[_,S[_]]})}function xi(_,S,x){S.push({command:ai.removeSource,args:[_]}),x[_]=!0}function Qo(_,S,x,O){xi(_,x,O),Io(_,S,x)}function ga(_,S,x){var O;for(O in _[x])if(_[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;for(O in S[x])if(S[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;return!0}function Po(_,S,x,O,k,Z){var Q;for(Q in S=S||{},_=_||{})_.hasOwnProperty(Q)&&(E.deepEqual(_[Q],S[Q])||x.push({command:Z,args:[O,Q,S[Q],k]}));for(Q in S)S.hasOwnProperty(Q)&&!_.hasOwnProperty(Q)&&(E.deepEqual(_[Q],S[Q])||x.push({command:Z,args:[O,Q,S[Q],k]}))}function $o(_){return _.id}function Fe(_,S){return _[S.id]=S,_}var ot=function(_,S){this.reset(_,S)};ot.prototype.reset=function(_,S){this.points=_||[],this._distances=[0];for(var x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(S||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ot.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=E.clamp(_,0,1);for(var S=1,x=this._distances[S],O=_*this.paddedLength+this.padding;x<O&&S<this._distances.length;)x=this._distances[++S];var k=S-1,Z=this._distances[k],Q=x-Z,ge=Q>0?(O-Z)/Q:0;return this.points[k].mult(1-ge).add(this.points[S].mult(ge))};var Ut=function(_,S,x){var O=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(_/x),this.yCellCount=Math.ceil(S/x);for(var Z=0;Z<this.xCellCount*this.yCellCount;Z++)O.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=S,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/S,this.boxUid=0,this.circleUid=0};function ln(_,S,x,O,k){var Z=E.create();return S?(E.scale(Z,Z,[1/k,1/k,1]),x||E.rotateZ(Z,Z,O.angle)):E.multiply(Z,O.labelPlaneMatrix,_),Z}function Nn(_,S,x,O,k){if(S){var Z=E.clone(_);return E.scale(Z,Z,[k,k,1]),x||E.rotateZ(Z,Z,-O.angle),Z}return O.glCoordMatrix}function Fn(_,S){var x=[_.x,_.y,0,1];Gr(x,x,S);var O=x[3];return{point:new E.Point(x[0]/O,x[1]/O),signedDistanceFromCamera:O}}function gn(_,S){return .5+_/S*.5}function Cn(_,S){var x=_[0]/_[3],O=_[1]/_[3];return x>=-S[0]&&x<=S[0]&&O>=-S[1]&&O<=S[1]}function pr(_,S,x,O,k,Z,Q,ge){var Ve=O?_.textSizeData:_.iconSizeData,ht=E.evaluateSizeForZoom(Ve,x.transform.zoom),zt=[256/x.width*2+1,256/x.height*2+1],Ht=O?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Ht.clear();for(var Zt=_.lineVertexArray,xn=O?_.text.placedSymbolArray:_.icon.placedSymbolArray,vn=x.transform.width/x.transform.height,Un=!1,an=0;an<xn.length;an++){var kn=xn.get(an);if(kn.hidden||kn.writingMode===E.WritingMode.vertical&&!Un)Ni(kn.numGlyphs,Ht);else{Un=!1;var nr=[kn.anchorX,kn.anchorY,0,1];if(E.transformMat4(nr,nr,S),Cn(nr,zt)){var mr=gn(x.transform.cameraToCenterDistance,nr[3]),Rr=E.evaluateSizeForFeature(Ve,ht,kn),Ar=Q?Rr/mr:Rr*mr,zr=new E.Point(kn.anchorX,kn.anchorY),ni=Fn(zr,k).point,zi={},Li=ji(kn,Ar,!1,ge,S,k,Z,_.glyphOffsetArray,Zt,Ht,ni,zr,zi,vn);Un=Li.useVertical,(Li.notEnoughRoom||Un||Li.needsFlipping&&ji(kn,Ar,!0,ge,S,k,Z,_.glyphOffsetArray,Zt,Ht,ni,zr,zi,vn).notEnoughRoom)&&Ni(kn.numGlyphs,Ht)}else Ni(kn.numGlyphs,Ht)}}O?_.text.dynamicLayoutVertexBuffer.updateData(Ht):_.icon.dynamicLayoutVertexBuffer.updateData(Ht)}function hr(_,S,x,O,k,Z,Q,ge,Ve,ht,zt){var Ht=ge.glyphStartIndex+ge.numGlyphs,Zt=ge.lineStartIndex,xn=ge.lineStartIndex+ge.lineLength,vn=S.getoffsetX(ge.glyphStartIndex),Un=S.getoffsetX(Ht-1),an=ti(_*vn,x,O,k,Z,Q,ge.segment,Zt,xn,Ve,ht,zt);if(!an)return null;var kn=ti(_*Un,x,O,k,Z,Q,ge.segment,Zt,xn,Ve,ht,zt);return kn?{first:an,last:kn}:null}function ei(_,S,x,O){return _===E.WritingMode.horizontal&&Math.abs(x.y-S.y)>Math.abs(x.x-S.x)*O?{useVertical:!0}:(_===E.WritingMode.vertical?S.y<x.y:S.x>x.x)?{needsFlipping:!0}:null}function ji(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht,Zt,xn){var vn,Un=S/24,an=_.lineOffsetX*Un,kn=_.lineOffsetY*Un;if(_.numGlyphs>1){var nr=_.glyphStartIndex+_.numGlyphs,mr=_.lineStartIndex,Rr=_.lineStartIndex+_.lineLength,Ar=hr(Un,ge,an,kn,x,zt,Ht,_,Ve,Z,Zt);if(!Ar)return{notEnoughRoom:!0};var zr=Fn(Ar.first.point,Q).point,ni=Fn(Ar.last.point,Q).point;if(O&&!x){var zi=ei(_.writingMode,zr,ni,xn);if(zi)return zi}vn=[Ar.first];for(var Li=_.glyphStartIndex+1;Li<nr-1;Li++)vn.push(ti(Un*ge.getoffsetX(Li),an,kn,x,zt,Ht,_.segment,mr,Rr,Ve,Z,Zt));vn.push(Ar.last)}else{if(O&&!x){var co=Fn(Ht,k).point,Uo=_.lineStartIndex+_.segment+1,Zo=new E.Point(Ve.getx(Uo),Ve.gety(Uo)),Xo=Fn(Zo,k),cs=Xo.signedDistanceFromCamera>0?Xo.point:Ji(Ht,Zo,co,1,k),Pr=ei(_.writingMode,co,cs,xn);if(Pr)return Pr}var Qt=ti(Un*ge.getoffsetX(_.glyphStartIndex),an,kn,x,zt,Ht,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,Ve,Z,Zt);if(!Qt)return{notEnoughRoom:!0};vn=[Qt]}for(var da=0,ha=vn;da<ha.length;da+=1){var qo=ha[da];E.addDynamicAttributes(ht,qo.point,qo.angle)}return{}}function Ji(_,S,x,O,k){var Z=Fn(_.add(_.sub(S)._unit()),k).point,Q=x.sub(Z);return x.add(Q._mult(O/Q.mag()))}function ti(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht){var Zt=O?_-S:_+S,xn=Zt>0?1:-1,vn=0;O&&(xn*=-1,vn=Math.PI),xn<0&&(vn+=Math.PI);for(var Un=xn>0?ge+Q:ge+Q+1,an=k,kn=k,nr=0,mr=0,Rr=Math.abs(Zt),Ar=[];nr+mr<=Rr;){if((Un+=xn)<ge||Un>=Ve)return null;if(kn=an,Ar.push(an),(an=Ht[Un])===void 0){var zr=new E.Point(ht.getx(Un),ht.gety(Un)),ni=Fn(zr,zt);if(ni.signedDistanceFromCamera>0)an=Ht[Un]=ni.point;else{var zi=Un-xn;an=Ji(nr===0?Z:new E.Point(ht.getx(zi),ht.gety(zi)),zr,kn,Rr-nr+1,zt)}}nr+=mr,mr=kn.dist(an)}var Li=(Rr-nr)/mr,co=an.sub(kn),Uo=co.mult(Li)._add(kn);Uo._add(co._unit()._perp()._mult(x*xn));var Zo=vn+Math.atan2(an.y-kn.y,an.x-kn.x);return Ar.push(Uo),{point:Uo,angle:Zo,path:Ar}}Ut.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ut.prototype.insert=function(_,S,x,O,k){this._forEachCell(S,x,O,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(S),this.bboxes.push(x),this.bboxes.push(O),this.bboxes.push(k)},Ut.prototype.insertCircle=function(_,S,x,O){this._forEachCell(S-O,x-O,S+O,x+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(S),this.circles.push(x),this.circles.push(O)},Ut.prototype._insertBoxCell=function(_,S,x,O,k,Z){this.boxCells[k].push(Z)},Ut.prototype._insertCircleCell=function(_,S,x,O,k,Z){this.circleCells[k].push(Z)},Ut.prototype._query=function(_,S,x,O,k,Z){if(x<0||_>this.width||O<0||S>this.height)return!k&&[];var Q=[];if(_<=0&&S<=0&&this.width<=x&&this.height<=O){if(k)return!0;for(var ge=0;ge<this.boxKeys.length;ge++)Q.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(var Ve=0;Ve<this.circleKeys.length;Ve++){var ht=this.circles[3*Ve],zt=this.circles[3*Ve+1],Ht=this.circles[3*Ve+2];Q.push({key:this.circleKeys[Ve],x1:ht-Ht,y1:zt-Ht,x2:ht+Ht,y2:zt+Ht})}return Z?Q.filter(Z):Q}return this._forEachCell(_,S,x,O,this._queryCell,Q,{hitTest:k,seenUids:{box:{},circle:{}}},Z),k?Q.length>0:Q},Ut.prototype._queryCircle=function(_,S,x,O,k){var Z=_-x,Q=_+x,ge=S-x,Ve=S+x;if(Q<0||Z>this.width||Ve<0||ge>this.height)return!O&&[];var ht=[];return this._forEachCell(Z,ge,Q,Ve,this._queryCellCircle,ht,{hitTest:O,circle:{x:_,y:S,radius:x},seenUids:{box:{},circle:{}}},k),O?ht.length>0:ht},Ut.prototype.query=function(_,S,x,O,k){return this._query(_,S,x,O,!1,k)},Ut.prototype.hitTest=function(_,S,x,O,k){return this._query(_,S,x,O,!0,k)},Ut.prototype.hitTestCircle=function(_,S,x,O){return this._queryCircle(_,S,x,!0,O)},Ut.prototype._queryCell=function(_,S,x,O,k,Z,Q,ge){var Ve=Q.seenUids,ht=this.boxCells[k];if(ht!==null)for(var zt=this.bboxes,Ht=0,Zt=ht;Ht<Zt.length;Ht+=1){var xn=Zt[Ht];if(!Ve.box[xn]){Ve.box[xn]=!0;var vn=4*xn;if(_<=zt[vn+2]&&S<=zt[vn+3]&&x>=zt[vn+0]&&O>=zt[vn+1]&&(!ge||ge(this.boxKeys[xn]))){if(Q.hitTest)return Z.push(!0),!0;Z.push({key:this.boxKeys[xn],x1:zt[vn],y1:zt[vn+1],x2:zt[vn+2],y2:zt[vn+3]})}}}var Un=this.circleCells[k];if(Un!==null)for(var an=this.circles,kn=0,nr=Un;kn<nr.length;kn+=1){var mr=nr[kn];if(!Ve.circle[mr]){Ve.circle[mr]=!0;var Rr=3*mr;if(this._circleAndRectCollide(an[Rr],an[Rr+1],an[Rr+2],_,S,x,O)&&(!ge||ge(this.circleKeys[mr]))){if(Q.hitTest)return Z.push(!0),!0;var Ar=an[Rr],zr=an[Rr+1],ni=an[Rr+2];Z.push({key:this.circleKeys[mr],x1:Ar-ni,y1:zr-ni,x2:Ar+ni,y2:zr+ni})}}}},Ut.prototype._queryCellCircle=function(_,S,x,O,k,Z,Q,ge){var Ve=Q.circle,ht=Q.seenUids,zt=this.boxCells[k];if(zt!==null)for(var Ht=this.bboxes,Zt=0,xn=zt;Zt<xn.length;Zt+=1){var vn=xn[Zt];if(!ht.box[vn]){ht.box[vn]=!0;var Un=4*vn;if(this._circleAndRectCollide(Ve.x,Ve.y,Ve.radius,Ht[Un+0],Ht[Un+1],Ht[Un+2],Ht[Un+3])&&(!ge||ge(this.boxKeys[vn])))return Z.push(!0),!0}}var an=this.circleCells[k];if(an!==null)for(var kn=this.circles,nr=0,mr=an;nr<mr.length;nr+=1){var Rr=mr[nr];if(!ht.circle[Rr]){ht.circle[Rr]=!0;var Ar=3*Rr;if(this._circlesCollide(kn[Ar],kn[Ar+1],kn[Ar+2],Ve.x,Ve.y,Ve.radius)&&(!ge||ge(this.circleKeys[Rr])))return Z.push(!0),!0}}},Ut.prototype._forEachCell=function(_,S,x,O,k,Z,Q,ge){for(var Ve=this._convertToXCellCoord(_),ht=this._convertToYCellCoord(S),zt=this._convertToXCellCoord(x),Ht=this._convertToYCellCoord(O),Zt=Ve;Zt<=zt;Zt++)for(var xn=ht;xn<=Ht;xn++)if(k.call(this,_,S,x,O,this.xCellCount*xn+Zt,Z,Q,ge))return},Ut.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},Ut.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},Ut.prototype._circlesCollide=function(_,S,x,O,k,Z){var Q=O-_,ge=k-S,Ve=x+Z;return Ve*Ve>Q*Q+ge*ge},Ut.prototype._circleAndRectCollide=function(_,S,x,O,k,Z,Q){var ge=(Z-O)/2,Ve=Math.abs(_-(O+ge));if(Ve>ge+x)return!1;var ht=(Q-k)/2,zt=Math.abs(S-(k+ht));if(zt>ht+x)return!1;if(Ve<=ge||zt<=ht)return!0;var Ht=Ve-ge,Zt=zt-ht;return Ht*Ht+Zt*Zt<=x*x};var Gi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ni(_,S){for(var x=0;x<_;x++){var O=S.length;S.resize(O+4),S.float32.set(Gi,3*O)}}function Gr(_,S,x){var O=S[0],k=S[1];return _[0]=x[0]*O+x[4]*k+x[12],_[1]=x[1]*O+x[5]*k+x[13],_[3]=x[3]*O+x[7]*k+x[15],_}var So=function(_,S,x){S===void 0&&(S=new Ut(_.width+200,_.height+200,25)),x===void 0&&(x=new Ut(_.width+200,_.height+200,25)),this.transform=_,this.grid=S,this.ignoredGrid=x,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function fi(_,S,x){return S*(E.EXTENT/(_.tileSize*Math.pow(2,x-_.tileID.overscaledZ)))}So.prototype.placeCollisionBox=function(_,S,x,O,k){var Z=this.projectAndGetPerspectiveRatio(O,_.anchorPointX,_.anchorPointY),Q=x*Z.perspectiveRatio,ge=_.x1*Q+Z.point.x,Ve=_.y1*Q+Z.point.y,ht=_.x2*Q+Z.point.x,zt=_.y2*Q+Z.point.y;return!this.isInsideGrid(ge,Ve,ht,zt)||!S&&this.grid.hitTest(ge,Ve,ht,zt,k)?{box:[],offscreen:!1}:{box:[ge,Ve,ht,zt],offscreen:this.isOffscreen(ge,Ve,ht,zt)}},So.prototype.placeCollisionCircles=function(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht,Zt){var xn=[],vn=new E.Point(S.anchorX,S.anchorY),Un=Fn(vn,Z),an=gn(this.transform.cameraToCenterDistance,Un.signedDistanceFromCamera),kn=(ht?k/an:k*an)/E.ONE_EM,nr=Fn(vn,Q).point,mr=hr(kn,O,S.lineOffsetX*kn,S.lineOffsetY*kn,!1,nr,vn,S,x,Q,{}),Rr=!1,Ar=!1,zr=!0;if(mr){for(var ni=.5*Ht*an+Zt,zi=new E.Point(-100,-100),Li=new E.Point(this.screenRightBoundary,this.screenBottomBoundary),co=new ot,Uo=mr.first,Zo=mr.last,Xo=[],cs=Uo.path.length-1;cs>=1;cs--)Xo.push(Uo.path[cs]);for(var Pr=1;Pr<Zo.path.length;Pr++)Xo.push(Zo.path[Pr]);var Qt=2.5*ni;if(ge){var da=Xo.map(function(jc){return Fn(jc,ge)});Xo=da.some(function(jc){return jc.signedDistanceFromCamera<=0})?[]:da.map(function(jc){return jc.point})}var ha=[];if(Xo.length>0){for(var qo=Xo[0].clone(),_a=Xo[0].clone(),aa=1;aa<Xo.length;aa++)qo.x=Math.min(qo.x,Xo[aa].x),qo.y=Math.min(qo.y,Xo[aa].y),_a.x=Math.max(_a.x,Xo[aa].x),_a.y=Math.max(_a.y,Xo[aa].y);ha=qo.x>=zi.x&&_a.x<=Li.x&&qo.y>=zi.y&&_a.y<=Li.y?[Xo]:_a.x<zi.x||qo.x>Li.x||_a.y<zi.y||qo.y>Li.y?[]:E.clipLine([Xo],zi.x,zi.y,Li.x,Li.y)}for(var Fo=0,pu=ha;Fo<pu.length;Fo+=1){var Cl;co.reset(pu[Fo],.25*ni),Cl=co.length<=.5*ni?1:Math.ceil(co.paddedLength/Qt)+1;for(var Du=0;Du<Cl;Du++){var vu=Du/Math.max(Cl-1,1),ws=co.lerp(vu),wl=ws.x+100,ml=ws.y+100;xn.push(wl,ml,ni,0);var dc=wl-ni,Uf=ml-ni,wc=wl+ni,cf=ml+ni;if(zr=zr&&this.isOffscreen(dc,Uf,wc,cf),Ar=Ar||this.isInsideGrid(dc,Uf,wc,cf),!_&&this.grid.hitTestCircle(wl,ml,ni,zt)&&(Rr=!0,!Ve))return{circles:[],offscreen:!1,collisionDetected:Rr}}}}return{circles:!Ve&&Rr||!Ar?[]:xn,offscreen:zr,collisionDetected:Rr}},So.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var S=[],x=1/0,O=1/0,k=-1/0,Z=-1/0,Q=0,ge=_;Q<ge.length;Q+=1){var Ve=ge[Q],ht=new E.Point(Ve.x+100,Ve.y+100);x=Math.min(x,ht.x),O=Math.min(O,ht.y),k=Math.max(k,ht.x),Z=Math.max(Z,ht.y),S.push(ht)}for(var zt={},Ht={},Zt=0,xn=this.grid.query(x,O,k,Z).concat(this.ignoredGrid.query(x,O,k,Z));Zt<xn.length;Zt+=1){var vn=xn[Zt],Un=vn.key;if(zt[Un.bucketInstanceId]===void 0&&(zt[Un.bucketInstanceId]={}),!zt[Un.bucketInstanceId][Un.featureIndex]){var an=[new E.Point(vn.x1,vn.y1),new E.Point(vn.x2,vn.y1),new E.Point(vn.x2,vn.y2),new E.Point(vn.x1,vn.y2)];E.polygonIntersectsPolygon(S,an)&&(zt[Un.bucketInstanceId][Un.featureIndex]=!0,Ht[Un.bucketInstanceId]===void 0&&(Ht[Un.bucketInstanceId]=[]),Ht[Un.bucketInstanceId].push(Un.featureIndex))}}return Ht},So.prototype.insertCollisionBox=function(_,S,x,O,k){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:O,collisionGroupID:k},_[0],_[1],_[2],_[3])},So.prototype.insertCollisionCircles=function(_,S,x,O,k){for(var Z=S?this.ignoredGrid:this.grid,Q={bucketInstanceId:x,featureIndex:O,collisionGroupID:k},ge=0;ge<_.length;ge+=4)Z.insertCircle(Q,_[ge],_[ge+1],_[ge+2])},So.prototype.projectAndGetPerspectiveRatio=function(_,S,x){var O=[S,x,0,1];return Gr(O,O,_),{point:new E.Point((O[0]/O[3]+1)/2*this.transform.width+100,(-O[1]/O[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}},So.prototype.isOffscreen=function(_,S,x,O){return x<100||_>=this.screenRightBoundary||O<100||S>this.screenBottomBoundary},So.prototype.isInsideGrid=function(_,S,x,O){return x>=0&&_<this.gridRightBoundary&&O>=0&&S<this.gridBottomBoundary},So.prototype.getViewportMatrix=function(){var _=E.identity([]);return E.translate(_,_,[-100,-100,0]),_};var Eo=function(_,S,x,O){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?S:-S))):O&&x?1:0,this.placed=x};Eo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Wi=function(_,S,x,O,k){this.text=new Eo(_?_.text:null,S,x,k),this.icon=new Eo(_?_.icon:null,S,O,k)};Wi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var io=function(_,S,x){this.text=_,this.icon=S,this.skipFade=x},Ao=function(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]},xs=function(_,S,x,O,k){this.bucketInstanceId=_,this.featureIndex=S,this.sourceLayerIndex=x,this.bucketIndex=O,this.tileID=k},ya=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function ra(_,S,x,O,k){var Z=E.getAnchorAlignment(_),Q=-(Z.horizontalAlign-.5)*S,ge=-(Z.verticalAlign-.5)*x,Ve=E.evaluateVariableOffset(_,O);return new E.Point(Q+Ve[0]*k,ge+Ve[1]*k)}function gs(_,S,x,O,k,Z){var Q=_.x1,ge=_.x2,Ve=_.y1,ht=_.y2,zt=_.anchorPointX,Ht=_.anchorPointY,Zt=new E.Point(S,x);return O&&Zt._rotate(k?Z:-Z),{x1:Q+Zt.x,y1:Ve+Zt.y,x2:ge+Zt.x,y2:ht+Zt.y,anchorPointX:zt,anchorPointY:Ht}}ya.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var S=++this.maxGroupID;this.collisionGroups[_]={ID:S,predicate:function(x){return x.collisionGroupID===S}}}return this.collisionGroups[_]};var as=function(_,S,x,O){this.transform=_.clone(),this.collisionIndex=new So(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new ya(x),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}};function Ct(_,S,x,O,k){_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0)}as.prototype.getBucketParts=function(_,S,x,O){var k=x.getBucket(S),Z=x.latestFeatureIndex;if(k&&Z&&S.id===k.layerIds[0]){var Q=x.collisionBoxArray,ge=k.layers[0].layout,Ve=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ht=x.tileSize/E.EXTENT,zt=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),Ht=ge.get("text-pitch-alignment")==="map",Zt=ge.get("text-rotation-alignment")==="map",xn=fi(x,1,this.transform.zoom),vn=ln(zt,Ht,Zt,this.transform,xn),Un=null;if(Ht){var an=Nn(zt,Ht,Zt,this.transform,xn);Un=E.multiply([],this.transform.labelPlaneMatrix,an)}this.retainedQueryData[k.bucketInstanceId]=new xs(k.bucketInstanceId,Z,k.sourceLayerIndex,k.index,x.tileID);var kn={bucket:k,layout:ge,posMatrix:zt,textLabelPlaneMatrix:vn,labelToScreenMatrix:Un,scale:Ve,textPixelRatio:ht,holdingForFade:x.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(O)for(var nr=0,mr=k.sortKeyRanges;nr<mr.length;nr+=1){var Rr=mr[nr];_.push({sortKey:Rr.sortKey,symbolInstanceStart:Rr.symbolInstanceStart,symbolInstanceEnd:Rr.symbolInstanceEnd,parameters:kn})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:kn})}},as.prototype.attemptAnchorPlacement=function(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht,Zt,xn,vn){var Un,an=[Ht.textOffset0,Ht.textOffset1],kn=ra(_,x,O,an,k),nr=this.collisionIndex.placeCollisionBox(gs(S,kn.x,kn.y,Z,Q,this.transform.angle),zt,ge,Ve,ht.predicate);if(!vn||this.collisionIndex.placeCollisionBox(gs(vn,kn.x,kn.y,Z,Q,this.transform.angle),zt,ge,Ve,ht.predicate).box.length!==0)return nr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID]&&this.prevPlacement.placements[Ht.crossTileID].text&&(Un=this.prevPlacement.variableOffsets[Ht.crossTileID].anchor),this.variableOffsets[Ht.crossTileID]={textOffset:an,width:x,height:O,anchor:_,textBoxScale:k,prevAnchor:Un},this.markUsedJustification(Zt,_,Ht,xn),Zt.allowVerticalPlacement&&(this.markUsedOrientation(Zt,xn,Ht),this.placedOrientations[Ht.crossTileID]=xn),{shift:kn,placedGlyphBoxes:nr}):void 0},as.prototype.placeLayerBucketPart=function(_,S,x){var O=this,k=_.parameters,Z=k.bucket,Q=k.layout,ge=k.posMatrix,Ve=k.textLabelPlaneMatrix,ht=k.labelToScreenMatrix,zt=k.textPixelRatio,Ht=k.holdingForFade,Zt=k.collisionBoxArray,xn=k.partiallyEvaluatedTextSize,vn=k.collisionGroup,Un=Q.get("text-optional"),an=Q.get("icon-optional"),kn=Q.get("text-allow-overlap"),nr=Q.get("icon-allow-overlap"),mr=Q.get("text-rotation-alignment")==="map",Rr=Q.get("text-pitch-alignment")==="map",Ar=Q.get("icon-text-fit")!=="none",zr=Q.get("symbol-z-order")==="viewport-y",ni=kn&&(nr||!Z.hasIconData()||an),zi=nr&&(kn||!Z.hasTextData()||Un);!Z.collisionArrays&&Zt&&Z.deserializeCollisionBoxes(Zt);var Li=function(Pr,Qt){if(!S[Pr.crossTileID])if(Ht)O.placements[Pr.crossTileID]=new io(!1,!1,!1);else{var da,ha=!1,qo=!1,_a=!0,aa=null,Fo={box:null,offscreen:null},pu={box:null,offscreen:null},Cl=null,Du=null,vu=0,ws=0,wl=0;Qt.textFeatureIndex?vu=Qt.textFeatureIndex:Pr.useRuntimeCollisionCircles&&(vu=Pr.featureIndex),Qt.verticalTextFeatureIndex&&(ws=Qt.verticalTextFeatureIndex);var ml=Qt.textBox;if(ml){var dc=function(Wa){var Tu=E.WritingMode.horizontal;if(Z.allowVerticalPlacement&&!Wa&&O.prevPlacement){var Ol=O.prevPlacement.placedOrientations[Pr.crossTileID];Ol&&(O.placedOrientations[Pr.crossTileID]=Ol,O.markUsedOrientation(Z,Tu=Ol,Pr))}return Tu},Uf=function(Wa,Tu){if(Z.allowVerticalPlacement&&Pr.numVerticalGlyphVertices>0&&Qt.verticalTextBox)for(var Ol=0,Af=Z.writingModes;Ol<Af.length&&(Af[Ol]===E.WritingMode.vertical?(Fo=Tu(),pu=Fo):Fo=Wa(),!(Fo&&Fo.box&&Fo.box.length));Ol+=1);else Fo=Wa()};if(Q.get("text-variable-anchor")){var wc=Q.get("text-variable-anchor");if(O.prevPlacement&&O.prevPlacement.variableOffsets[Pr.crossTileID]){var cf=O.prevPlacement.variableOffsets[Pr.crossTileID];wc.indexOf(cf.anchor)>0&&(wc=wc.filter(function(Wa){return Wa!==cf.anchor})).unshift(cf.anchor)}var jc=function(Wa,Tu,Ol){for(var Af=Wa.x2-Wa.x1,Gp=Wa.y2-Wa.y1,Gh=Pr.textBoxScale,Wp=Ar&&!nr?Tu:null,Wh={box:[],offscreen:!1},Zh=kn?2*wc.length:wc.length,eh=0;eh<Zh;++eh){var x0=O.attemptAnchorPlacement(wc[eh%wc.length],Wa,Af,Gp,Gh,mr,Rr,zt,ge,vn,eh>=wc.length,Pr,Z,Ol,Wp);if(x0&&(Wh=x0.placedGlyphBoxes)&&Wh.box&&Wh.box.length){ha=!0,aa=x0.shift;break}}return Wh};Uf(function(){return jc(ml,Qt.iconBox,E.WritingMode.horizontal)},function(){var Wa=Qt.verticalTextBox;return Z.allowVerticalPlacement&&!(Fo&&Fo.box&&Fo.box.length)&&Pr.numVerticalGlyphVertices>0&&Wa?jc(Wa,Qt.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),Fo&&(ha=Fo.box,_a=Fo.offscreen);var up=dc(Fo&&Fo.box);if(!ha&&O.prevPlacement){var cp=O.prevPlacement.variableOffsets[Pr.crossTileID];cp&&(O.variableOffsets[Pr.crossTileID]=cp,O.markUsedJustification(Z,cp.anchor,Pr,up))}}else{var Sh=function(Wa,Tu){var Ol=O.collisionIndex.placeCollisionBox(Wa,kn,zt,ge,vn.predicate);return Ol&&Ol.box&&Ol.box.length&&(O.markUsedOrientation(Z,Tu,Pr),O.placedOrientations[Pr.crossTileID]=Tu),Ol};Uf(function(){return Sh(ml,E.WritingMode.horizontal)},function(){var Wa=Qt.verticalTextBox;return Z.allowVerticalPlacement&&Pr.numVerticalGlyphVertices>0&&Wa?Sh(Wa,E.WritingMode.vertical):{box:null,offscreen:null}}),dc(Fo&&Fo.box&&Fo.box.length)}}if(ha=(da=Fo)&&da.box&&da.box.length>0,_a=da&&da.offscreen,Pr.useRuntimeCollisionCircles){var Vh=Z.text.placedSymbolArray.get(Pr.centerJustifiedTextSymbolIndex),Hh=E.evaluateSizeForFeature(Z.textSizeData,xn,Vh),Jf=Q.get("text-padding");Cl=O.collisionIndex.placeCollisionCircles(kn,Vh,Z.lineVertexArray,Z.glyphOffsetArray,Hh,ge,Ve,ht,x,Rr,vn.predicate,Pr.collisionCircleDiameter,Jf),ha=kn||Cl.circles.length>0&&!Cl.collisionDetected,_a=_a&&Cl.offscreen}if(Qt.iconFeatureIndex&&(wl=Qt.iconFeatureIndex),Qt.iconBox){var Ci=function(Wa){var Tu=Ar&&aa?gs(Wa,aa.x,aa.y,mr,Rr,O.transform.angle):Wa;return O.collisionIndex.placeCollisionBox(Tu,nr,zt,ge,vn.predicate)};qo=pu&&pu.box&&pu.box.length&&Qt.verticalIconBox?(Du=Ci(Qt.verticalIconBox)).box.length>0:(Du=Ci(Qt.iconBox)).box.length>0,_a=_a&&Du.offscreen}var kl=Un||Pr.numHorizontalGlyphVertices===0&&Pr.numVerticalGlyphVertices===0,zl=an||Pr.numIconVertices===0;if(kl||zl?zl?kl||(qo=qo&&ha):ha=qo&&ha:qo=ha=qo&&ha,ha&&da&&da.box&&O.collisionIndex.insertCollisionBox(da.box,Q.get("text-ignore-placement"),Z.bucketInstanceId,pu&&pu.box&&ws?ws:vu,vn.ID),qo&&Du&&O.collisionIndex.insertCollisionBox(Du.box,Q.get("icon-ignore-placement"),Z.bucketInstanceId,wl,vn.ID),Cl&&(ha&&O.collisionIndex.insertCollisionCircles(Cl.circles,Q.get("text-ignore-placement"),Z.bucketInstanceId,vu,vn.ID),x)){var tc=Z.bucketInstanceId,Tf=O.collisionCircleArrays[tc];Tf===void 0&&(Tf=O.collisionCircleArrays[tc]=new Ao);for(var jf=0;jf<Cl.circles.length;jf+=4)Tf.circles.push(Cl.circles[jf+0]),Tf.circles.push(Cl.circles[jf+1]),Tf.circles.push(Cl.circles[jf+2]),Tf.circles.push(Cl.collisionDetected?1:0)}O.placements[Pr.crossTileID]=new io(ha||ni,qo||zi,_a||Z.justReloaded),S[Pr.crossTileID]=!0}};if(zr)for(var co=Z.getSortedSymbolIndexes(this.transform.angle),Uo=co.length-1;Uo>=0;--Uo){var Zo=co[Uo];Li(Z.symbolInstances.get(Zo),Z.collisionArrays[Zo])}else for(var Xo=_.symbolInstanceStart;Xo<_.symbolInstanceEnd;Xo++)Li(Z.symbolInstances.get(Xo),Z.collisionArrays[Xo]);if(x&&Z.bucketInstanceId in this.collisionCircleArrays){var cs=this.collisionCircleArrays[Z.bucketInstanceId];E.invert(cs.invProjMatrix,ge),cs.viewportMatrix=this.collisionIndex.getViewportMatrix()}Z.justReloaded=!1},as.prototype.markUsedJustification=function(_,S,x,O){var k;k=O===E.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(S)];for(var Z=0,Q=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];Z<Q.length;Z+=1){var ge=Q[Z];ge>=0&&(_.text.placedSymbolArray.get(ge).crossTileID=k>=0&&ge!==k?0:x.crossTileID)}},as.prototype.markUsedOrientation=function(_,S,x){for(var O=S===E.WritingMode.horizontal||S===E.WritingMode.horizontalOnly?S:0,k=S===E.WritingMode.vertical?S:0,Z=0,Q=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];Z<Q.length;Z+=1)_.text.placedSymbolArray.get(Q[Z]).placedOrientation=O;x.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=k)},as.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var S=this.prevPlacement,x=!1;this.prevZoomAdjustment=S?S.zoomAdjustment(this.transform.zoom):0;var O=S?S.symbolFadeChange(_):1,k=S?S.opacities:{},Z=S?S.variableOffsets:{},Q=S?S.placedOrientations:{};for(var ge in this.placements){var Ve=this.placements[ge],ht=k[ge];ht?(this.opacities[ge]=new Wi(ht,O,Ve.text,Ve.icon),x=x||Ve.text!==ht.text.placed||Ve.icon!==ht.icon.placed):(this.opacities[ge]=new Wi(null,O,Ve.text,Ve.icon,Ve.skipFade),x=x||Ve.text||Ve.icon)}for(var zt in k){var Ht=k[zt];if(!this.opacities[zt]){var Zt=new Wi(Ht,O,!1,!1);Zt.isHidden()||(this.opacities[zt]=Zt,x=x||Ht.text.placed||Ht.icon.placed)}}for(var xn in Z)this.variableOffsets[xn]||!this.opacities[xn]||this.opacities[xn].isHidden()||(this.variableOffsets[xn]=Z[xn]);for(var vn in Q)this.placedOrientations[vn]||!this.opacities[vn]||this.opacities[vn].isHidden()||(this.placedOrientations[vn]=Q[vn]);x?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=S?S.lastPlacementChangeTime:_)},as.prototype.updateLayerOpacities=function(_,S){for(var x={},O=0,k=S;O<k.length;O+=1){var Z=k[O],Q=Z.getBucket(_);Q&&Z.latestFeatureIndex&&_.id===Q.layerIds[0]&&this.updateBucketOpacities(Q,x,Z.collisionBoxArray)}},as.prototype.updateBucketOpacities=function(_,S,x){var O=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var k=_.layers[0].layout,Z=new Wi(null,0,!1,!1,!0),Q=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),Ve=k.get("text-variable-anchor"),ht=k.get("text-rotation-alignment")==="map",zt=k.get("text-pitch-alignment")==="map",Ht=k.get("icon-text-fit")!=="none",Zt=new Wi(null,0,Q&&(ge||!_.hasIconData()||k.get("icon-optional")),ge&&(Q||!_.hasTextData()||k.get("text-optional")),!0);!_.collisionArrays&&x&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(x);for(var xn=function(kn,nr,mr){for(var Rr=0;Rr<nr/4;Rr++)kn.opacityVertexArray.emplaceBack(mr)},vn=function(kn){var nr=_.symbolInstances.get(kn),mr=nr.numHorizontalGlyphVertices,Rr=nr.numVerticalGlyphVertices,Ar=nr.crossTileID,zr=O.opacities[Ar];S[Ar]?zr=Z:zr||(O.opacities[Ar]=zr=Zt),S[Ar]=!0;var ni=nr.numIconVertices>0,zi=O.placedOrientations[nr.crossTileID],Li=zi===E.WritingMode.vertical,co=zi===E.WritingMode.horizontal||zi===E.WritingMode.horizontalOnly;if(mr>0||Rr>0){var Uo=Is(zr.text);xn(_.text,mr,Li?Us:Uo),xn(_.text,Rr,co?Us:Uo);var Zo=zr.text.isHidden();[nr.rightJustifiedTextSymbolIndex,nr.centerJustifiedTextSymbolIndex,nr.leftJustifiedTextSymbolIndex].forEach(function(Fo){Fo>=0&&(_.text.placedSymbolArray.get(Fo).hidden=Zo||Li?1:0)}),nr.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(nr.verticalPlacedTextSymbolIndex).hidden=Zo||co?1:0);var Xo=O.variableOffsets[nr.crossTileID];Xo&&O.markUsedJustification(_,Xo.anchor,nr,zi);var cs=O.placedOrientations[nr.crossTileID];cs&&(O.markUsedJustification(_,"left",nr,cs),O.markUsedOrientation(_,cs,nr))}if(ni){var Pr=Is(zr.icon),Qt=!(Ht&&nr.verticalPlacedIconSymbolIndex&&Li);nr.placedIconSymbolIndex>=0&&(xn(_.icon,nr.numIconVertices,Qt?Pr:Us),_.icon.placedSymbolArray.get(nr.placedIconSymbolIndex).hidden=zr.icon.isHidden()),nr.verticalPlacedIconSymbolIndex>=0&&(xn(_.icon,nr.numVerticalIconVertices,Qt?Us:Pr),_.icon.placedSymbolArray.get(nr.verticalPlacedIconSymbolIndex).hidden=zr.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var da=_.collisionArrays[kn];if(da){var ha=new E.Point(0,0);if(da.textBox||da.verticalTextBox){var qo=!0;if(Ve){var _a=O.variableOffsets[Ar];_a?(ha=ra(_a.anchor,_a.width,_a.height,_a.textOffset,_a.textBoxScale),ht&&ha._rotate(zt?O.transform.angle:-O.transform.angle)):qo=!1}da.textBox&&Ct(_.textCollisionBox.collisionVertexArray,zr.text.placed,!qo||Li,ha.x,ha.y),da.verticalTextBox&&Ct(_.textCollisionBox.collisionVertexArray,zr.text.placed,!qo||co,ha.x,ha.y)}var aa=!!(!co&&da.verticalIconBox);da.iconBox&&Ct(_.iconCollisionBox.collisionVertexArray,zr.icon.placed,aa,Ht?ha.x:0,Ht?ha.y:0),da.verticalIconBox&&Ct(_.iconCollisionBox.collisionVertexArray,zr.icon.placed,!aa,Ht?ha.x:0,Ht?ha.y:0)}}},Un=0;Un<_.symbolInstances.length;Un++)vn(Un);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var an=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=an.invProjMatrix,_.placementViewportMatrix=an.viewportMatrix,_.collisionCircleArray=an.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},as.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},as.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},as.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},as.prototype.stillRecent=function(_,S){var x=this.zoomAtLastRecencyCheck===S?1-this.zoomAdjustment(S):1;return this.zoomAtLastRecencyCheck=S,this.commitTime+this.fadeDuration*x>_},as.prototype.setStale=function(){this.stale=!0};var Wt=Math.pow(2,25),jn=Math.pow(2,24),Lr=Math.pow(2,17),Si=Math.pow(2,16),Zi=Math.pow(2,9),Jo=Math.pow(2,8),Hs=Math.pow(2,1);function Is(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var S=_.placed?1:0,x=Math.floor(127*_.opacity);return x*Wt+S*jn+x*Lr+S*Si+x*Zi+S*Jo+x*Hs+S}var Us=0,dl=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};dl.prototype.continuePlacement=function(_,S,x,O,k){for(var Z=this._bucketParts;this._currentTileIndex<_.length;)if(S.getBucketParts(Z,O,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Z.sort(function(Q,ge){return Q.sortKey-ge.sortKey}));this._currentPartIndex<Z.length;)if(S.placeLayerBucketPart(Z[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,k())return!0;return!1};var Ph=function(_,S,x,O,k,Z,Q){this.placement=new as(_,k,Z,Q),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=O,this._done=!1};Ph.prototype.isDone=function(){return this._done},Ph.prototype.continuePlacement=function(_,S,x){for(var O=this,k=E.browser.now(),Z=function(){var Ve=E.browser.now()-k;return!O._forceFullPlacement&&Ve>2};this._currentPlacementIndex>=0;){var Q=S[_[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if(Q.type==="symbol"&&(!Q.minzoom||Q.minzoom<=ge)&&(!Q.maxzoom||Q.maxzoom>ge)){if(this._inProgressLayer||(this._inProgressLayer=new dl(Q)),this._inProgressLayer.continuePlacement(x[Q.source],this.placement,this._showCollisionBoxes,Q,Z))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ph.prototype.commit=function(_){return this.placement.commit(_),this.placement};var Up=512/E.EXTENT/2,hh=function(_,S,x){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(var O=0;O<S.length;O++){var k=S.get(O),Z=k.key;this.indexedSymbolInstances[Z]||(this.indexedSymbolInstances[Z]=[]),this.indexedSymbolInstances[Z].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,_)})}};hh.prototype.getScaledCoordinates=function(_,S){var x=Up/Math.pow(2,S.canonical.z-this.tileID.canonical.z);return{x:Math.floor((S.canonical.x*E.EXTENT+_.anchorX)*x),y:Math.floor((S.canonical.y*E.EXTENT+_.anchorY)*x)}},hh.prototype.findMatches=function(_,S,x){for(var O=this.tileID.canonical.z<S.canonical.z?1:Math.pow(2,this.tileID.canonical.z-S.canonical.z),k=0;k<_.length;k++){var Z=_.get(k);if(!Z.crossTileID){var Q=this.indexedSymbolInstances[Z.key];if(Q)for(var ge=this.getScaledCoordinates(Z,S),Ve=0,ht=Q;Ve<ht.length;Ve+=1){var zt=ht[Ve];if(Math.abs(zt.coord.x-ge.x)<=O&&Math.abs(zt.coord.y-ge.y)<=O&&!x[zt.crossTileID]){x[zt.crossTileID]=!0,Z.crossTileID=zt.crossTileID;break}}}}};var uu=function(){this.maxCrossTileID=0};uu.prototype.generate=function(){return++this.maxCrossTileID};var Df=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Df.prototype.handleWrapJump=function(_){var S=Math.round((_-this.lng)/360);if(S!==0)for(var x in this.indexes){var O=this.indexes[x],k={};for(var Z in O){var Q=O[Z];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+S),k[Q.tileID.key]=Q}this.indexes[x]=k}this.lng=_},Df.prototype.addBucket=function(_,S,x){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===S.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var O=0;O<S.symbolInstances.length;O++)S.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var k=this.usedCrossTileIDs[_.overscaledZ];for(var Z in this.indexes){var Q=this.indexes[Z];if(Number(Z)>_.overscaledZ)for(var ge in Q){var Ve=Q[ge];Ve.tileID.isChildOf(_)&&Ve.findMatches(S.symbolInstances,_,k)}else{var ht=Q[_.scaledTo(Number(Z)).key];ht&&ht.findMatches(S.symbolInstances,_,k)}}for(var zt=0;zt<S.symbolInstances.length;zt++){var Ht=S.symbolInstances.get(zt);Ht.crossTileID||(Ht.crossTileID=x.generate(),k[Ht.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new hh(_,S.symbolInstances,S.bucketInstanceId),!0},Df.prototype.removeBucketCrossTileIDs=function(_,S){for(var x in S.indexedSymbolInstances)for(var O=0,k=S.indexedSymbolInstances[x];O<k.length;O+=1)delete this.usedCrossTileIDs[_][k[O].crossTileID]},Df.prototype.removeStaleBuckets=function(_){var S=!1;for(var x in this.indexes){var O=this.indexes[x];for(var k in O)_[O[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,O[k]),delete O[k],S=!0)}return S};var Jc=function(){this.layerIndexes={},this.crossTileIDs=new uu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Jc.prototype.addLayer=function(_,S,x){var O=this.layerIndexes[_.id];O===void 0&&(O=this.layerIndexes[_.id]=new Df);var k=!1,Z={};O.handleWrapJump(x);for(var Q=0,ge=S;Q<ge.length;Q+=1){var Ve=ge[Q],ht=Ve.getBucket(_);ht&&_.id===ht.layerIds[0]&&(ht.bucketInstanceId||(ht.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(Ve.tileID,ht,this.crossTileIDs)&&(k=!0),Z[ht.bucketInstanceId]=!0)}return O.removeStaleBuckets(Z)&&(k=!0),k},Jc.prototype.pruneUnusedLayers=function(_){var S={};for(var x in _.forEach(function(O){S[O]=!0}),this.layerIndexes)S[x]||delete this.layerIndexes[x]};var cu=function(_,S){return E.emitValidationErrors(_,S&&S.filter(function(x){return x.identifier!=="source.canvas"}))},Eu=E.pick(ai,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ef=E.pick(ai,["setCenter","setZoom","setBearing","setPitch"]),Lf=function(){var _={},S=E.styleSpec.$version;for(var x in E.styleSpec.$root){var O,k=E.styleSpec.$root[x];k.required&&(O=x==="version"?S:k.type==="array"?[]:{})!=null&&(_[x]=O)}return _}(),fu=function(_){function S(x,O){var k=this;O===void 0&&(O={}),_.call(this),this.map=x,this.dispatcher=new lt(wr(),this),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new _t(x._requestManager,O.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new Jc,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());var Z=this;this._rtlTextPluginCallback=S.registerForPluginStateChange(function(Q){Z.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Q.pluginStatus,pluginURL:Q.pluginURL},function(ge,Ve){if(E.triggerPluginCompletionEvent(ge),Ve&&Ve.every(function(zt){return zt}))for(var ht in Z.sourceCaches)Z.sourceCaches[ht].reload()})}),this.on("data",function(Q){if(Q.dataType==="source"&&Q.sourceDataType==="metadata"){var ge=k.sourceCaches[Q.sourceId];if(ge){var Ve=ge.getSource();if(Ve&&Ve.vectorLayerIds)for(var ht in k._layers){var zt=k._layers[ht];zt.source===Ve.id&&k._validateLayer(zt)}}}})}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.loadURL=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"}));var Z=typeof O.validate=="boolean"?O.validate:!E.isMapboxURL(x);x=this.map._requestManager.normalizeStyleURL(x,O.accessToken);var Q=this.map._requestManager.transformRequest(x,E.ResourceType.Style);this._request=E.getJSON(Q,function(ge,Ve){k._request=null,ge?k.fire(new E.ErrorEvent(ge)):Ve&&k._load(Ve,Z)})},S.prototype.loadJSON=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.browser.frame(function(){k._request=null,k._load(x,O.validate!==!1)})},S.prototype.loadEmpty=function(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(Lf,!1)},S.prototype._load=function(x,O){if(!O||!cu(this,E.validateStyle(x))){for(var k in this._loaded=!0,this.stylesheet=x,x.sources)this.addSource(k,x.sources[k],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs);var Z=hi(this.stylesheet.layers);this._order=Z.map(function(ht){return ht.id}),this._layers={},this._serializedLayers={};for(var Q=0,ge=Z;Q<ge.length;Q+=1){var Ve=ge[Q];(Ve=E.createStyleLayer(Ve)).setEventedParent(this,{layer:{id:Ve.id}}),this._layers[Ve.id]=Ve,this._serializedLayers[Ve.id]=Ve.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new je(this.stylesheet.light),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}},S.prototype._loadSprite=function(x){var O=this;this._spriteRequest=function(k,Z,Q){var ge,Ve,ht,zt=E.browser.devicePixelRatio>1?"@2x":"",Ht=E.getJSON(Z.transformRequest(Z.normalizeSpriteURL(k,zt,".json"),E.ResourceType.SpriteJSON),function(vn,Un){Ht=null,ht||(ht=vn,ge=Un,xn())}),Zt=E.getImage(Z.transformRequest(Z.normalizeSpriteURL(k,zt,".png"),E.ResourceType.SpriteImage),function(vn,Un){Zt=null,ht||(ht=vn,Ve=Un,xn())});function xn(){if(ht)Q(ht);else if(ge&&Ve){var vn=E.browser.getImageData(Ve),Un={};for(var an in ge){var kn=ge[an],nr=kn.width,mr=kn.height,Rr=kn.x,Ar=kn.y,zr=kn.sdf,ni=kn.pixelRatio,zi=kn.stretchX,Li=kn.stretchY,co=kn.content,Uo=new E.RGBAImage({width:nr,height:mr});E.RGBAImage.copy(vn,Uo,{x:Rr,y:Ar},{x:0,y:0},{width:nr,height:mr}),Un[an]={data:Uo,pixelRatio:ni,sdf:zr,stretchX:zi,stretchY:Li,content:co}}Q(null,Un)}}return{cancel:function(){Ht&&(Ht.cancel(),Ht=null),Zt&&(Zt.cancel(),Zt=null)}}}(x,this.map._requestManager,function(k,Z){if(O._spriteRequest=null,k)O.fire(new E.ErrorEvent(k));else if(Z)for(var Q in Z)O.imageManager.addImage(Q,Z[Q]);O.imageManager.setLoaded(!0),O._availableImages=O.imageManager.listImages(),O.dispatcher.broadcast("setImages",O._availableImages),O.fire(new E.Event("data",{dataType:"style"}))})},S.prototype._validateLayer=function(x){var O=this.sourceCaches[x.source];if(O){var k=x.sourceLayer;if(k){var Z=O.getSource();(Z.type==="geojson"||Z.vectorLayerIds&&Z.vectorLayerIds.indexOf(k)===-1)&&this.fire(new E.ErrorEvent(new Error('Source layer "'+k+'" does not exist on source "'+Z.id+'" as specified by style layer "'+x.id+'"')))}}},S.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()},S.prototype._serializeLayers=function(x){for(var O=[],k=0,Z=x;k<Z.length;k+=1){var Q=this._layers[Z[k]];Q.type!=="custom"&&O.push(Q.serialize())}return O},S.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(var O in this._layers)if(this._layers[O].hasTransition())return!0;return!1},S.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},S.prototype.update=function(x){if(this._loaded){var O=this._changed;if(this._changed){var k=Object.keys(this._updatedLayers),Z=Object.keys(this._removedLayers);for(var Q in(k.length||Z.length)&&this._updateWorkerLayers(k,Z),this._updatedSources){var ge=this._updatedSources[Q];ge==="reload"?this._reloadSource(Q):ge==="clear"&&this._clearSource(Q)}for(var Ve in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ve].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}var ht={};for(var zt in this.sourceCaches){var Ht=this.sourceCaches[zt];ht[zt]=Ht.used,Ht.used=!1}for(var Zt=0,xn=this._order;Zt<xn.length;Zt+=1){var vn=this._layers[xn[Zt]];vn.recalculate(x,this._availableImages),!vn.isHidden(x.zoom)&&vn.source&&(this.sourceCaches[vn.source].used=!0)}for(var Un in ht){var an=this.sourceCaches[Un];ht[Un]!==an.used&&an.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Un}))}this.light.recalculate(x),this.z=x.zoom,O&&this.fire(new E.Event("data",{dataType:"style"}))}},S.prototype._updateTilesForChangedImages=function(){var x=Object.keys(this._changedImages);if(x.length){for(var O in this.sourceCaches)this.sourceCaches[O].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}},S.prototype._updateWorkerLayers=function(x,O){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(x),removedIds:O})},S.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},S.prototype.setState=function(x){var O=this;if(this._checkLoaded(),cu(this,E.validateStyle(x)))return!1;(x=E.clone$1(x)).layers=hi(x.layers);var k=function(Q,ge){if(!Q)return[{command:ai.setStyle,args:[ge]}];var Ve=[];try{if(!E.deepEqual(Q.version,ge.version))return[{command:ai.setStyle,args:[ge]}];E.deepEqual(Q.center,ge.center)||Ve.push({command:ai.setCenter,args:[ge.center]}),E.deepEqual(Q.zoom,ge.zoom)||Ve.push({command:ai.setZoom,args:[ge.zoom]}),E.deepEqual(Q.bearing,ge.bearing)||Ve.push({command:ai.setBearing,args:[ge.bearing]}),E.deepEqual(Q.pitch,ge.pitch)||Ve.push({command:ai.setPitch,args:[ge.pitch]}),E.deepEqual(Q.sprite,ge.sprite)||Ve.push({command:ai.setSprite,args:[ge.sprite]}),E.deepEqual(Q.glyphs,ge.glyphs)||Ve.push({command:ai.setGlyphs,args:[ge.glyphs]}),E.deepEqual(Q.transition,ge.transition)||Ve.push({command:ai.setTransition,args:[ge.transition]}),E.deepEqual(Q.light,ge.light)||Ve.push({command:ai.setLight,args:[ge.light]});var ht={},zt=[];(function(Zt,xn,vn,Un){var an;for(an in xn=xn||{},Zt=Zt||{})Zt.hasOwnProperty(an)&&(xn.hasOwnProperty(an)||xi(an,vn,Un));for(an in xn)xn.hasOwnProperty(an)&&(Zt.hasOwnProperty(an)?E.deepEqual(Zt[an],xn[an])||(Zt[an].type==="geojson"&&xn[an].type==="geojson"&&ga(Zt,xn,an)?vn.push({command:ai.setGeoJSONSourceData,args:[an,xn[an].data]}):Qo(an,xn,vn,Un)):Io(an,xn,vn))})(Q.sources,ge.sources,zt,ht);var Ht=[];Q.layers&&Q.layers.forEach(function(Zt){ht[Zt.source]?Ve.push({command:ai.removeLayer,args:[Zt.id]}):Ht.push(Zt)}),Ve=Ve.concat(zt),function(Zt,xn,vn){xn=xn||[];var Un,an,kn,nr,mr,Rr,Ar,zr=(Zt=Zt||[]).map($o),ni=xn.map($o),zi=Zt.reduce(Fe,{}),Li=xn.reduce(Fe,{}),co=zr.slice(),Uo=Object.create(null);for(Un=0,an=0;Un<zr.length;Un++)Li.hasOwnProperty(kn=zr[Un])?an++:(vn.push({command:ai.removeLayer,args:[kn]}),co.splice(co.indexOf(kn,an),1));for(Un=0,an=0;Un<ni.length;Un++)co[co.length-1-Un]!==(kn=ni[ni.length-1-Un])&&(zi.hasOwnProperty(kn)?(vn.push({command:ai.removeLayer,args:[kn]}),co.splice(co.lastIndexOf(kn,co.length-an),1)):an++,vn.push({command:ai.addLayer,args:[Li[kn],Rr=co[co.length-Un]]}),co.splice(co.length-Un,0,kn),Uo[kn]=!0);for(Un=0;Un<ni.length;Un++)if(nr=zi[kn=ni[Un]],mr=Li[kn],!Uo[kn]&&!E.deepEqual(nr,mr))if(E.deepEqual(nr.source,mr.source)&&E.deepEqual(nr["source-layer"],mr["source-layer"])&&E.deepEqual(nr.type,mr.type)){for(Ar in Po(nr.layout,mr.layout,vn,kn,null,ai.setLayoutProperty),Po(nr.paint,mr.paint,vn,kn,null,ai.setPaintProperty),E.deepEqual(nr.filter,mr.filter)||vn.push({command:ai.setFilter,args:[kn,mr.filter]}),E.deepEqual(nr.minzoom,mr.minzoom)&&E.deepEqual(nr.maxzoom,mr.maxzoom)||vn.push({command:ai.setLayerZoomRange,args:[kn,mr.minzoom,mr.maxzoom]}),nr)nr.hasOwnProperty(Ar)&&Ar!=="layout"&&Ar!=="paint"&&Ar!=="filter"&&Ar!=="metadata"&&Ar!=="minzoom"&&Ar!=="maxzoom"&&(Ar.indexOf("paint.")===0?Po(nr[Ar],mr[Ar],vn,kn,Ar.slice(6),ai.setPaintProperty):E.deepEqual(nr[Ar],mr[Ar])||vn.push({command:ai.setLayerProperty,args:[kn,Ar,mr[Ar]]}));for(Ar in mr)mr.hasOwnProperty(Ar)&&!nr.hasOwnProperty(Ar)&&Ar!=="layout"&&Ar!=="paint"&&Ar!=="filter"&&Ar!=="metadata"&&Ar!=="minzoom"&&Ar!=="maxzoom"&&(Ar.indexOf("paint.")===0?Po(nr[Ar],mr[Ar],vn,kn,Ar.slice(6),ai.setPaintProperty):E.deepEqual(nr[Ar],mr[Ar])||vn.push({command:ai.setLayerProperty,args:[kn,Ar,mr[Ar]]}))}else vn.push({command:ai.removeLayer,args:[kn]}),Rr=co[co.lastIndexOf(kn)+1],vn.push({command:ai.addLayer,args:[mr,Rr]})}(Ht,ge.layers,Ve)}catch(Zt){console.warn("Unable to compute style diff:",Zt),Ve=[{command:ai.setStyle,args:[ge]}]}return Ve}(this.serialize(),x).filter(function(Q){return!(Q.command in ef)});if(k.length===0)return!1;var Z=k.filter(function(Q){return!(Q.command in Eu)});if(Z.length>0)throw new Error("Unimplemented: "+Z.map(function(Q){return Q.command}).join(", ")+".");return k.forEach(function(Q){Q.command!=="setTransition"&&O[Q.command].apply(O,Q.args)}),this.stylesheet=x,!0},S.prototype.addImage=function(x,O){if(this.getImage(x))return this.fire(new E.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(x,O),this._afterImageUpdated(x)},S.prototype.updateImage=function(x,O){this.imageManager.updateImage(x,O)},S.prototype.getImage=function(x){return this.imageManager.getImage(x)},S.prototype.removeImage=function(x){if(!this.getImage(x))return this.fire(new E.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(x),this._afterImageUpdated(x)},S.prototype._afterImageUpdated=function(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))},S.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},S.prototype.addSource=function(x,O,k){var Z=this;if(k===void 0&&(k={}),this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error("There is already a source with this ID");if(!O.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(O).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(O.type)>=0&&this._validate(E.validateStyle.source,"sources."+x,O,null,k))){this.map&&this.map._collectResourceTiming&&(O.collectResourceTiming=!0);var Q=this.sourceCaches[x]=new Kt(x,O,this.dispatcher);Q.style=this,Q.setEventedParent(this,function(){return{isSourceLoaded:Z.loaded(),source:Q.serialize(),sourceId:x}}),Q.onAdd(this.map),this._changed=!0}},S.prototype.removeSource=function(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(var O in this._layers)if(this._layers[O].source===x)return this.fire(new E.ErrorEvent(new Error('Source "'+x+'" cannot be removed while layer "'+O+'" is using it.')));var k=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],k.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),k.setEventedParent(null),k.clearTiles(),k.onRemove&&k.onRemove(this.map),this._changed=!0},S.prototype.setGeoJSONSourceData=function(x,O){this._checkLoaded(),this.sourceCaches[x].getSource().setData(O),this._changed=!0},S.prototype.getSource=function(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()},S.prototype.addLayer=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=x.id;if(this.getLayer(Z))this.fire(new E.ErrorEvent(new Error('Layer with id "'+Z+'" already exists on this map')));else{var Q;if(x.type==="custom"){if(cu(this,E.validateCustomStyleLayer(x)))return;Q=E.createStyleLayer(x)}else{if(typeof x.source=="object"&&(this.addSource(Z,x.source),x=E.clone$1(x),x=E.extend(x,{source:Z})),this._validate(E.validateStyle.layer,"layers."+Z,x,{arrayIndex:-1},k))return;Q=E.createStyleLayer(x),this._validateLayer(Q),Q.setEventedParent(this,{layer:{id:Z}}),this._serializedLayers[Q.id]=Q.serialize()}var ge=O?this._order.indexOf(O):this._order.length;if(O&&ge===-1)this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.')));else{if(this._order.splice(ge,0,Z),this._layerOrderChanged=!0,this._layers[Z]=Q,this._removedLayers[Z]&&Q.source&&Q.type!=="custom"){var Ve=this._removedLayers[Z];delete this._removedLayers[Z],Ve.type!==Q.type?this._updatedSources[Q.source]="clear":(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause())}this._updateLayer(Q),Q.onAdd&&Q.onAdd(this.map)}}},S.prototype.moveLayer=function(x,O){if(this._checkLoaded(),this._changed=!0,this._layers[x]){if(x!==O){var k=this._order.indexOf(x);this._order.splice(k,1);var Z=O?this._order.indexOf(O):this._order.length;O&&Z===-1?this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.'))):(this._order.splice(Z,0,x),this._layerOrderChanged=!0)}}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be moved.")))},S.prototype.removeLayer=function(x){this._checkLoaded();var O=this._layers[x];if(O){O.setEventedParent(null);var k=this._order.indexOf(x);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=O,delete this._layers[x],delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],O.onRemove&&O.onRemove(this.map)}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be removed.")))},S.prototype.getLayer=function(x){return this._layers[x]},S.prototype.hasLayer=function(x){return x in this._layers},S.prototype.setLayerZoomRange=function(x,O,k){this._checkLoaded();var Z=this.getLayer(x);Z?Z.minzoom===O&&Z.maxzoom===k||(O!=null&&(Z.minzoom=O),k!=null&&(Z.maxzoom=k),this._updateLayer(Z)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot have zoom extent.")))},S.prototype.setFilter=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=this.getLayer(x);if(Z){if(!E.deepEqual(Z.filter,O))return O==null?(Z.filter=void 0,void this._updateLayer(Z)):void(this._validate(E.validateStyle.filter,"layers."+Z.id+".filter",O,null,k)||(Z.filter=E.clone$1(O),this._updateLayer(Z)))}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be filtered.")))},S.prototype.getFilter=function(x){return E.clone$1(this.getLayer(x).filter)},S.prototype.setLayoutProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var Q=this.getLayer(x);Q?E.deepEqual(Q.getLayoutProperty(O),k)||(Q.setLayoutProperty(O,k,Z),this._updateLayer(Q)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getLayoutProperty=function(x,O){var k=this.getLayer(x);if(k)return k.getLayoutProperty(O);this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style.")))},S.prototype.setPaintProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var Q=this.getLayer(x);Q?E.deepEqual(Q.getPaintProperty(O),k)||(Q.setPaintProperty(O,k,Z)&&this._updateLayer(Q),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getPaintProperty=function(x,O){return this.getLayer(x).getPaintProperty(O)},S.prototype.setFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=x.sourceLayer,Q=this.sourceCaches[k];if(Q!==void 0){var ge=Q.getSource().type;ge==="geojson"&&Z?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ge!=="vector"||Z?(x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.setFeatureState(Z,x.id,O)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.removeFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=this.sourceCaches[k];if(Z!==void 0){var Q=Z.getSource().type,ge=Q==="vector"?x.sourceLayer:void 0;Q!=="vector"||ge?O&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Z.removeFeatureState(ge,x.id,O):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.getFeatureState=function(x){this._checkLoaded();var O=x.source,k=x.sourceLayer,Z=this.sourceCaches[O];if(Z!==void 0){if(Z.getSource().type!=="vector"||k)return x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Z.getFeatureState(k,x.id);this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},S.prototype.getTransition=function(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},S.prototype.serialize=function(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,function(x){return x.serialize()}),layers:this._serializeLayers(this._order)},function(x){return x!==void 0})},S.prototype._updateLayer=function(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._changed=!0},S.prototype._flattenAndSortRenderedFeatures=function(x){for(var O=this,k=function(zi){return O._layers[zi].type==="fill-extrusion"},Z={},Q=[],ge=this._order.length-1;ge>=0;ge--){var Ve=this._order[ge];if(k(Ve)){Z[Ve]=ge;for(var ht=0,zt=x;ht<zt.length;ht+=1){var Ht=zt[ht][Ve];if(Ht)for(var Zt=0,xn=Ht;Zt<xn.length;Zt+=1)Q.push(xn[Zt])}}}Q.sort(function(zi,Li){return Li.intersectionZ-zi.intersectionZ});for(var vn=[],Un=this._order.length-1;Un>=0;Un--){var an=this._order[Un];if(k(an))for(var kn=Q.length-1;kn>=0;kn--){var nr=Q[kn].feature;if(Z[nr.layer.id]<Un)break;vn.push(nr),Q.pop()}else for(var mr=0,Rr=x;mr<Rr.length;mr+=1){var Ar=Rr[mr][an];if(Ar)for(var zr=0,ni=Ar;zr<ni.length;zr+=1)vn.push(ni[zr].feature)}}return vn},S.prototype.queryRenderedFeatures=function(x,O,k){O&&O.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",O.filter,null,O);var Z={};if(O&&O.layers){if(!Array.isArray(O.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Q=0,ge=O.layers;Q<ge.length;Q+=1){var Ve=ge[Q],ht=this._layers[Ve];if(!ht)return this.fire(new E.ErrorEvent(new Error("The layer '"+Ve+"' does not exist in the map's style and cannot be queried for features."))),[];Z[ht.source]=!0}}var zt=[];for(var Ht in O.availableImages=this._availableImages,this.sourceCaches)O.layers&&!Z[Ht]||zt.push(Ln(this.sourceCaches[Ht],this._layers,this._serializedLayers,x,O,k));return this.placement&&zt.push(function(Zt,xn,vn,Un,an,kn,nr){for(var mr={},Rr=kn.queryRenderedSymbols(Un),Ar=[],zr=0,ni=Object.keys(Rr).map(Number);zr<ni.length;zr+=1)Ar.push(nr[ni[zr]]);Ar.sort(qn);for(var zi=function(){var Xo=co[Li],cs=Xo.featureIndex.lookupSymbolFeatures(Rr[Xo.bucketInstanceId],xn,Xo.bucketIndex,Xo.sourceLayerIndex,an.filter,an.layers,an.availableImages,Zt);for(var Pr in cs){var Qt=mr[Pr]=mr[Pr]||[],da=cs[Pr];da.sort(function(_a,aa){var Fo=Xo.featureSortOrder;if(Fo){var pu=Fo.indexOf(_a.featureIndex);return Fo.indexOf(aa.featureIndex)-pu}return aa.featureIndex-_a.featureIndex});for(var ha=0,qo=da;ha<qo.length;ha+=1)Qt.push(qo[ha])}},Li=0,co=Ar;Li<co.length;Li+=1)zi();var Uo=function(Xo){mr[Xo].forEach(function(cs){var Pr=cs.feature,Qt=vn[Zt[Xo].source].getFeatureState(Pr.layer["source-layer"],Pr.id);Pr.source=Pr.layer.source,Pr.layer["source-layer"]&&(Pr.sourceLayer=Pr.layer["source-layer"]),Pr.state=Qt})};for(var Zo in mr)Uo(Zo);return mr}(this._layers,this._serializedLayers,this.sourceCaches,x,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(zt)},S.prototype.querySourceFeatures=function(x,O){O&&O.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",O.filter,null,O);var k=this.sourceCaches[x];return k?function(Z,Q){for(var ge=Z.getRenderableIds().map(function(xn){return Z.getTileByID(xn)}),Ve=[],ht={},zt=0;zt<ge.length;zt++){var Ht=ge[zt],Zt=Ht.tileID.canonical.key;ht[Zt]||(ht[Zt]=!0,Ht.querySourceFeatures(Ve,Q))}return Ve}(k,O):[]},S.prototype.addSourceType=function(x,O,k){return S.getSourceType(x)?k(new Error('A source type called "'+x+'" already exists.')):(S.setSourceType(x,O),O.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:O.workerSourceURL},k):k(null,null))},S.prototype.getLight=function(){return this.light.getLight()},S.prototype.setLight=function(x,O){O===void 0&&(O={}),this._checkLoaded();var k=this.light.getLight(),Z=!1;for(var Q in x)if(!E.deepEqual(x[Q],k[Q])){Z=!0;break}if(Z){var ge={now:E.browser.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,O),this.light.updateTransitions(ge)}},S.prototype._validate=function(x,O,k,Z,Q){return Q===void 0&&(Q={}),(!Q||Q.validate!==!1)&&cu(this,x.call(E.validateStyle,E.extend({key:O,style:this.serialize(),value:k,styleSpec:E.styleSpec},Z)))},S.prototype._remove=function(){for(var x in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[x].setEventedParent(null);for(var O in this.sourceCaches)this.sourceCaches[O].clearTiles(),this.sourceCaches[O].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},S.prototype._clearSource=function(x){this.sourceCaches[x].clearTiles()},S.prototype._reloadSource=function(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()},S.prototype._updateSources=function(x){for(var O in this.sourceCaches)this.sourceCaches[O].update(x)},S.prototype._generateCollisionBoxes=function(){for(var x in this.sourceCaches)this._reloadSource(x)},S.prototype._updatePlacement=function(x,O,k,Z,Q){Q===void 0&&(Q=!1);for(var ge=!1,Ve=!1,ht={},zt=0,Ht=this._order;zt<Ht.length;zt+=1){var Zt=this._layers[Ht[zt]];if(Zt.type==="symbol"){if(!ht[Zt.source]){var xn=this.sourceCaches[Zt.source];ht[Zt.source]=xn.getRenderableIds(!0).map(function(nr){return xn.getTileByID(nr)}).sort(function(nr,mr){return mr.tileID.overscaledZ-nr.tileID.overscaledZ||(nr.tileID.isLessThan(mr.tileID)?-1:1)})}var vn=this.crossTileSymbolIndex.addLayer(Zt,ht[Zt.source],x.center.lng);ge=ge||vn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Q=Q||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.browser.now(),x.zoom))&&(this.pauseablePlacement=new Ph(x,this._order,Q,O,k,Z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ht),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.browser.now()),Ve=!0),ge&&this.pauseablePlacement.placement.setStale()),Ve||ge)for(var Un=0,an=this._order;Un<an.length;Un+=1){var kn=this._layers[an[Un]];kn.type==="symbol"&&this.placement.updateLayerOpacities(kn,ht[kn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.browser.now())},S.prototype._releaseSymbolFadeTiles=function(){for(var x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()},S.prototype.getImages=function(x,O,k){this.imageManager.getImages(O.icons,k),this._updateTilesForChangedImages();var Z=this.sourceCaches[O.source];Z&&Z.setDependencies(O.tileID.key,O.type,O.icons)},S.prototype.getGlyphs=function(x,O,k){this.glyphManager.getGlyphs(O.stacks,k)},S.prototype.getResource=function(x,O,k){return E.makeRequest(O,k)},S}(E.Evented);fu.getSourceType=function(_){return Gt[_]},fu.setSourceType=function(_,S){Gt[_]=S},fu.registerForPluginStateChange=E.registerForPluginStateChange;var Ds=E.createLayout([{name:"a_pos",type:"Int16",components:2}]),$u=ys(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),tf=ys(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_d=ys(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),tp=ys(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),dh=ys("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bd=ys(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ph=ys(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ih=ys("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Dh=ys("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),xd=ys("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),c0=ys(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),nf=ys(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Fc=ys(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ed=ys(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Gl=ys(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),xc=ys(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),rf=ys(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hu=ys(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Bc=ys(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),uc=ys(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),mf=ys(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Fl=ys(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),of=ys(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),gf=ys(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Sd=ys(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),wd=ys(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ys(_,S){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,O=S.match(/attribute ([\w]+) ([\w]+)/g),k=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Z=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=Z?Z.concat(k):k,ge={};return{fragmentSource:_=_.replace(x,function(Ve,ht,zt,Ht,Zt){return ge[Zt]=!0,ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
varying `+zt+" "+Ht+" "+Zt+`;
#else
uniform `+zt+" "+Ht+" u_"+Zt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Zt+`
    `+zt+" "+Ht+" "+Zt+" = u_"+Zt+`;
#endif
`}),vertexSource:S=S.replace(x,function(Ve,ht,zt,Ht,Zt){var xn=Ht==="float"?"vec2":"vec4",vn=Zt.match(/color/)?"color":xn;return ge[Zt]?ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
uniform lowp float u_`+Zt+`_t;
attribute `+zt+" "+xn+" a_"+Zt+`;
varying `+zt+" "+Ht+" "+Zt+`;
#else
uniform `+zt+" "+Ht+" u_"+Zt+`;
#endif
`:vn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Zt+" = a_"+Zt+`;
#else
    `+zt+" "+Ht+" "+Zt+" = u_"+Zt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Zt+" = unpack_mix_"+vn+"(a_"+Zt+", u_"+Zt+`_t);
#else
    `+zt+" "+Ht+" "+Zt+" = u_"+Zt+`;
#endif
`:ht==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
uniform lowp float u_`+Zt+`_t;
attribute `+zt+" "+xn+" a_"+Zt+`;
#else
uniform `+zt+" "+Ht+" u_"+Zt+`;
#endif
`:vn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+zt+" "+Ht+" "+Zt+" = a_"+Zt+`;
#else
    `+zt+" "+Ht+" "+Zt+" = u_"+Zt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+zt+" "+Ht+" "+Zt+" = unpack_mix_"+vn+"(a_"+Zt+", u_"+Zt+`_t);
#else
    `+zt+" "+Ht+" "+Zt+" = u_"+Zt+`;
#endif
`}),staticAttributes:O,staticUniforms:Q}}var np=Object.freeze({__proto__:null,prelude:$u,background:tf,backgroundPattern:_d,circle:tp,clippingMask:dh,heatmap:bd,heatmapTexture:ph,collisionBox:Ih,collisionCircle:Dh,debug:xd,fill:c0,fillOutline:nf,fillOutlinePattern:Fc,fillPattern:Ed,fillExtrusion:Gl,fillExtrusionPattern:xc,hillshadePrepare:rf,hillshade:hu,line:Bc,lineGradient:uc,linePattern:mf,lineSDF:Fl,raster:of,symbolIcon:gf,symbolSDF:Sd,symbolTextAndIcon:wd}),Xf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Lh(_){for(var S=[],x=0;x<_.length;x++)if(_[x]!==null){var O=_[x].split(" ");S.push(O.pop())}return S}Xf.prototype.bind=function(_,S,x,O,k,Z,Q,ge){this.context=_;for(var Ve=this.boundPaintVertexBuffers.length!==O.length,ht=0;!Ve&&ht<O.length;ht++)this.boundPaintVertexBuffers[ht]!==O[ht]&&(Ve=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===S&&this.boundLayoutVertexBuffer===x&&!Ve&&this.boundIndexBuffer===k&&this.boundVertexOffset===Z&&this.boundDynamicVertexBuffer===Q&&this.boundDynamicVertexBuffer2===ge?(_.bindVertexArrayOES.set(this.vao),Q&&Q.bind(),k&&k.dynamicDraw&&k.bind(),ge&&ge.bind()):this.freshBind(S,x,O,k,Z,Q,ge)},Xf.prototype.freshBind=function(_,S,x,O,k,Z,Q){var ge,Ve=_.numAttributes,ht=this.context,zt=ht.gl;if(ht.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ht.extVertexArrayObject.createVertexArrayOES(),ht.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=_,this.boundLayoutVertexBuffer=S,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=O,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=Z,this.boundDynamicVertexBuffer2=Q;else{ge=ht.currentNumAttributes||0;for(var Ht=Ve;Ht<ge;Ht++)zt.disableVertexAttribArray(Ht)}S.enableAttributes(zt,_);for(var Zt=0,xn=x;Zt<xn.length;Zt+=1)xn[Zt].enableAttributes(zt,_);Z&&Z.enableAttributes(zt,_),Q&&Q.enableAttributes(zt,_),S.bind(),S.setVertexAttribPointers(zt,_,k);for(var vn=0,Un=x;vn<Un.length;vn+=1){var an=Un[vn];an.bind(),an.setVertexAttribPointers(zt,_,k)}Z&&(Z.bind(),Z.setVertexAttribPointers(zt,_,k)),O&&O.bind(),Q&&(Q.bind(),Q.setVertexAttribPointers(zt,_,k)),ht.currentNumAttributes=Ve},Xf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var pl=function(_,S,x,O,k,Z){var Q=_.gl;this.program=Q.createProgram();for(var ge=Lh(x.staticAttributes),Ve=O?O.getBinderAttributes():[],ht=ge.concat(Ve),zt=x.staticUniforms?Lh(x.staticUniforms):[],Ht=O?O.getBinderUniforms():[],Zt=[],xn=0,vn=zt.concat(Ht);xn<vn.length;xn+=1){var Un=vn[xn];Zt.indexOf(Un)<0&&Zt.push(Un)}var an=O?O.defines():[];Z&&an.push("#define OVERDRAW_INSPECTOR;");var kn=an.concat($u.fragmentSource,x.fragmentSource).join(`
`),nr=an.concat($u.vertexSource,x.vertexSource).join(`
`),mr=Q.createShader(Q.FRAGMENT_SHADER);if(Q.isContextLost())this.failedToCreate=!0;else{Q.shaderSource(mr,kn),Q.compileShader(mr),Q.attachShader(this.program,mr);var Rr=Q.createShader(Q.VERTEX_SHADER);if(Q.isContextLost())this.failedToCreate=!0;else{Q.shaderSource(Rr,nr),Q.compileShader(Rr),Q.attachShader(this.program,Rr),this.attributes={};var Ar={};this.numAttributes=ht.length;for(var zr=0;zr<this.numAttributes;zr++)ht[zr]&&(Q.bindAttribLocation(this.program,zr,ht[zr]),this.attributes[ht[zr]]=zr);Q.linkProgram(this.program),Q.deleteShader(Rr),Q.deleteShader(mr);for(var ni=0;ni<Zt.length;ni++){var zi=Zt[ni];if(zi&&!Ar[zi]){var Li=Q.getUniformLocation(this.program,zi);Li&&(Ar[zi]=Li)}}this.fixedUniforms=k(_,Ar),this.binderUniforms=O?O.getUniforms(_,Ar):[]}}};function Nh(_,S,x){var O=1/fi(x,1,S.transform.tileZoom),k=Math.pow(2,x.tileID.overscaledZ),Z=x.tileSize*Math.pow(2,S.transform.tileZoom)/k,Q=Z*(x.tileID.canonical.x+x.tileID.wrap*k),ge=Z*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[O,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[Q>>16,ge>>16],u_pixel_coord_lower:[65535&Q,65535&ge]}}pl.prototype.draw=function(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht,Zt,xn,vn,Un){var an,kn=_.gl;if(!this.failedToCreate){for(var nr in _.program.set(this.program),_.setDepthMode(x),_.setStencilMode(O),_.setColorMode(k),_.setCullFace(Z),this.fixedUniforms)this.fixedUniforms[nr].set(Q[nr]);xn&&xn.setUniforms(_,this.binderUniforms,Ht,{zoom:Zt});for(var mr=(an={},an[kn.LINES]=2,an[kn.TRIANGLES]=3,an[kn.LINE_STRIP]=1,an)[S],Rr=0,Ar=zt.get();Rr<Ar.length;Rr+=1){var zr=Ar[Rr],ni=zr.vaos||(zr.vaos={});(ni[ge]||(ni[ge]=new Xf)).bind(_,this,Ve,xn?xn.getPaintVertexBuffers():[],ht,zr.vertexOffset,vn,Un),kn.drawElements(S,zr.primitiveLength*mr,kn.UNSIGNED_SHORT,zr.primitiveOffset*mr*2)}}};var oe=function(_,S,x,O){var k=S.style.light,Z=k.properties.get("position"),Q=[Z.x,Z.y,Z.z],ge=E.create$1();k.properties.get("anchor")==="viewport"&&E.fromRotation(ge,-S.transform.angle),E.transformMat3(Q,Q,ge);var Ve=k.properties.get("color");return{u_matrix:_,u_lightpos:Q,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[Ve.r,Ve.g,Ve.b],u_vertical_gradient:+x,u_opacity:O}},_e=function(_,S,x,O,k,Z,Q){return E.extend(oe(_,S,x,O),Nh(Z,S,Q),{u_height_factor:-Math.pow(2,k.overscaledZ)/Q.tileSize/8})},tt=function(_){return{u_matrix:_}},cn=function(_,S,x,O){return E.extend(tt(_),Nh(x,S,O))},En=function(_,S){return{u_matrix:_,u_world:S}},re=function(_,S,x,O,k){return E.extend(cn(_,S,x,O),{u_world:k})},Nr=function(_,S,x,O){var k,Z,Q=_.transform;if(O.paint.get("circle-pitch-alignment")==="map"){var ge=fi(x,1,Q.zoom);k=!0,Z=[ge,ge]}else k=!1,Z=Q.pixelsToGLUnits;return{u_camera_to_center_distance:Q.cameraToCenterDistance,u_scale_with_map:+(O.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(S.posMatrix,x,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:E.browser.devicePixelRatio,u_extrude_scale:Z}},Di=function(_,S,x){var O=fi(x,1,S.zoom),k=Math.pow(2,S.zoom-x.tileID.overscaledZ),Z=x.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:S.cameraToCenterDistance,u_pixels_to_tile_units:O,u_extrude_scale:[S.pixelsToGLUnits[0]/(O*k),S.pixelsToGLUnits[1]/(O*k)],u_overscale_factor:Z}},Vi=function(_,S,x){return{u_matrix:_,u_inv_matrix:S,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},xo=function(_,S,x){return x===void 0&&(x=1),{u_matrix:_,u_color:S,u_overlay:0,u_overlay_scale:x}},yo=function(_){return{u_matrix:_}},za=function(_,S,x,O){return{u_matrix:_,u_extrude_scale:fi(S,1,x),u_intensity:O}},ba=function(_,S,x){var O=_.transform;return{u_matrix:Es(_,S,x),u_ratio:1/fi(S,1,O.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},go=function(_,S,x,O){return E.extend(ba(_,S,x),{u_image:0,u_image_height:O})},Ua=function(_,S,x,O){var k=_.transform,Z=xa(S,k);return{u_matrix:Es(_,S,x),u_texsize:S.imageAtlasTexture.size,u_ratio:1/fi(S,1,k.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_image:0,u_scale:[Z,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},ja=function(_,S,x,O,k){var Z=_.lineAtlas,Q=xa(S,_.transform),ge=x.layout.get("line-cap")==="round",Ve=Z.getDash(O.from,ge),ht=Z.getDash(O.to,ge),zt=Ve.width*k.fromScale,Ht=ht.width*k.toScale;return E.extend(ba(_,S,x),{u_patternscale_a:[Q/zt,-Ve.height/2],u_patternscale_b:[Q/Ht,-ht.height/2],u_sdfgamma:Z.width/(256*Math.min(zt,Ht)*E.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ve.y,u_tex_y_b:ht.y,u_mix:k.t})};function xa(_,S){return 1/fi(_,1,S.tileZoom)}function Es(_,S,x){return _.translatePosMatrix(S.tileID.posMatrix,S,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var $a=function(_,S,x,O,k){return{u_matrix:_,u_tl_parent:S,u_scale_parent:x,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(Q=k.paint.get("raster-saturation"),Q>0?1-1/(1.001-Q):-Q),u_contrast_factor:(Z=k.paint.get("raster-contrast"),Z>0?1/(1-Z):1+Z),u_spin_weights:Ea(k.paint.get("raster-hue-rotate"))};var Z,Q};function Ea(_){_*=Math.PI/180;var S=Math.sin(_),x=Math.cos(_);return[(2*x+1)/3,(-Math.sqrt(3)*S-x+1)/3,(Math.sqrt(3)*S-x+1)/3]}var Va,js=function(_,S,x,O,k,Z,Q,ge,Ve,ht){var zt=k.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:S?S.uSizeT:0,u_size:S?S.uSize:0,u_camera_to_center_distance:zt.cameraToCenterDistance,u_pitch:zt.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:zt.width/zt.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:Z,u_label_plane_matrix:Q,u_coord_matrix:ge,u_is_text:+Ve,u_pitch_with_map:+O,u_texsize:ht,u_texture:0}},Ql=function(_,S,x,O,k,Z,Q,ge,Ve,ht,zt){var Ht=k.transform;return E.extend(js(_,S,x,O,k,Z,Q,ge,Ve,ht),{u_gamma_scale:O?Math.cos(Ht._pitch)*Ht.cameraToCenterDistance:1,u_device_pixel_ratio:E.browser.devicePixelRatio,u_is_halo:+zt})},Xs=function(_,S,x,O,k,Z,Q,ge,Ve,ht){return E.extend(Ql(_,S,x,O,k,Z,Q,ge,!0,Ve,!0),{u_texsize_icon:ht,u_texture_icon:1})},cl=function(_,S,x){return{u_matrix:_,u_opacity:S,u_color:x}},af=function(_,S,x,O,k,Z){return E.extend(function(Q,ge,Ve,ht){var zt=Ve.imageManager.getPattern(Q.from.toString()),Ht=Ve.imageManager.getPattern(Q.to.toString()),Zt=Ve.imageManager.getPixelSize(),xn=Zt.width,vn=Zt.height,Un=Math.pow(2,ht.tileID.overscaledZ),an=ht.tileSize*Math.pow(2,Ve.transform.tileZoom)/Un,kn=an*(ht.tileID.canonical.x+ht.tileID.wrap*Un),nr=an*ht.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:zt.tl,u_pattern_br_a:zt.br,u_pattern_tl_b:Ht.tl,u_pattern_br_b:Ht.br,u_texsize:[xn,vn],u_mix:ge.t,u_pattern_size_a:zt.displaySize,u_pattern_size_b:Ht.displaySize,u_scale_a:ge.fromScale,u_scale_b:ge.toScale,u_tile_units_to_pixels:1/fi(ht,1,Ve.transform.tileZoom),u_pixel_coord_upper:[kn>>16,nr>>16],u_pixel_coord_lower:[65535&kn,65535&nr]}}(O,Z,x,k),{u_matrix:_,u_opacity:S})},Fh={fillExtrusion:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fillExtrusionPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_height_factor:new E.Uniform1f(_,S.u_height_factor),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fill:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},fillPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},fillOutline:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world)}},fillOutlinePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},circle:function(_,S){return{u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(_,S.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},collisionBox:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(_,S.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_overscale_factor:new E.Uniform1f(_,S.u_overscale_factor)}},collisionCircle:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_inv_matrix:new E.UniformMatrix4f(_,S.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(_,S.u_viewport_size)}},debug:function(_,S){return{u_color:new E.UniformColor(_,S.u_color),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_overlay:new E.Uniform1i(_,S.u_overlay),u_overlay_scale:new E.Uniform1f(_,S.u_overlay_scale)}},clippingMask:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmap:function(_,S){return{u_extrude_scale:new E.Uniform1f(_,S.u_extrude_scale),u_intensity:new E.Uniform1f(_,S.u_intensity),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmapTexture:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_color_ramp:new E.Uniform1i(_,S.u_color_ramp),u_opacity:new E.Uniform1f(_,S.u_opacity)}},hillshade:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_latrange:new E.Uniform2f(_,S.u_latrange),u_light:new E.Uniform2f(_,S.u_light),u_shadow:new E.UniformColor(_,S.u_shadow),u_highlight:new E.UniformColor(_,S.u_highlight),u_accent:new E.UniformColor(_,S.u_accent)}},hillshadePrepare:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_dimension:new E.Uniform2f(_,S.u_dimension),u_zoom:new E.Uniform1f(_,S.u_zoom),u_unpack:new E.Uniform4f(_,S.u_unpack)}},line:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels)}},lineGradient:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_image:new E.Uniform1i(_,S.u_image),u_image_height:new E.Uniform1f(_,S.u_image_height)}},linePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_texsize:new E.Uniform2f(_,S.u_texsize),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_image:new E.Uniform1i(_,S.u_image),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},lineSDF:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(_,S.u_patternscale_a),u_patternscale_b:new E.Uniform2f(_,S.u_patternscale_b),u_sdfgamma:new E.Uniform1f(_,S.u_sdfgamma),u_image:new E.Uniform1i(_,S.u_image),u_tex_y_a:new E.Uniform1f(_,S.u_tex_y_a),u_tex_y_b:new E.Uniform1f(_,S.u_tex_y_b),u_mix:new E.Uniform1f(_,S.u_mix)}},raster:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_tl_parent:new E.Uniform2f(_,S.u_tl_parent),u_scale_parent:new E.Uniform1f(_,S.u_scale_parent),u_buffer_scale:new E.Uniform1f(_,S.u_buffer_scale),u_fade_t:new E.Uniform1f(_,S.u_fade_t),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image0:new E.Uniform1i(_,S.u_image0),u_image1:new E.Uniform1i(_,S.u_image1),u_brightness_low:new E.Uniform1f(_,S.u_brightness_low),u_brightness_high:new E.Uniform1f(_,S.u_brightness_high),u_saturation_factor:new E.Uniform1f(_,S.u_saturation_factor),u_contrast_factor:new E.Uniform1f(_,S.u_contrast_factor),u_spin_weights:new E.Uniform3f(_,S.u_spin_weights)}},symbolIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture)}},symbolSDF:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},symbolTextAndIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texsize_icon:new E.Uniform2f(_,S.u_texsize_icon),u_texture:new E.Uniform1i(_,S.u_texture),u_texture_icon:new E.Uniform1i(_,S.u_texture_icon),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},background:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_color:new E.UniformColor(_,S.u_color)}},backgroundPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image:new E.Uniform1i(_,S.u_image),u_pattern_tl_a:new E.Uniform2f(_,S.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(_,S.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(_,S.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(_,S.u_pattern_br_b),u_texsize:new E.Uniform2f(_,S.u_texsize),u_mix:new E.Uniform1f(_,S.u_mix),u_pattern_size_a:new E.Uniform2f(_,S.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(_,S.u_pattern_size_b),u_scale_a:new E.Uniform1f(_,S.u_scale_a),u_scale_b:new E.Uniform1f(_,S.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(_,S.u_tile_units_to_pixels)}}};function kc(_,S,x,O,k,Z,Q){for(var ge=_.context,Ve=ge.gl,ht=_.useProgram("collisionBox"),zt=[],Ht=0,Zt=0,xn=0;xn<O.length;xn++){var vn=O[xn],Un=S.getTile(vn),an=Un.getBucket(x);if(an){var kn=vn.posMatrix;k[0]===0&&k[1]===0||(kn=_.translatePosMatrix(vn.posMatrix,Un,k,Z));var nr=Q?an.textCollisionBox:an.iconCollisionBox,mr=an.collisionCircleArray;if(mr.length>0){var Rr=E.create(),Ar=kn;E.mul(Rr,an.placementInvProjMatrix,_.transform.glCoordMatrix),E.mul(Rr,Rr,an.placementViewportMatrix),zt.push({circleArray:mr,circleOffset:Zt,transform:Ar,invTransform:Rr}),Zt=Ht+=mr.length/4}nr&&ht.draw(ge,Ve.LINES,it.disabled,At.disabled,_.colorModeForRenderPass(),hn.disabled,Di(kn,_.transform,Un),x.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,null,_.transform.zoom,null,null,nr.collisionVertexBuffer)}}if(Q&&zt.length){var zr=_.useProgram("collisionCircle"),ni=new E.StructArrayLayout2f1f2i16;ni.resize(4*Ht),ni._trim();for(var zi=0,Li=0,co=zt;Li<co.length;Li+=1)for(var Uo=co[Li],Zo=0;Zo<Uo.circleArray.length/4;Zo++){var Xo=4*Zo,cs=Uo.circleArray[Xo+0],Pr=Uo.circleArray[Xo+1],Qt=Uo.circleArray[Xo+2],da=Uo.circleArray[Xo+3];ni.emplace(zi++,cs,Pr,Qt,da,0),ni.emplace(zi++,cs,Pr,Qt,da,1),ni.emplace(zi++,cs,Pr,Qt,da,2),ni.emplace(zi++,cs,Pr,Qt,da,3)}(!Va||Va.length<2*Ht)&&(Va=function(Cl){var Du=2*Cl,vu=new E.StructArrayLayout3ui6;vu.resize(Du),vu._trim();for(var ws=0;ws<Du;ws++){var wl=6*ws;vu.uint16[wl+0]=4*ws+0,vu.uint16[wl+1]=4*ws+1,vu.uint16[wl+2]=4*ws+2,vu.uint16[wl+3]=4*ws+2,vu.uint16[wl+4]=4*ws+3,vu.uint16[wl+5]=4*ws+0}return vu}(Ht));for(var ha=ge.createIndexBuffer(Va,!0),qo=ge.createVertexBuffer(ni,E.collisionCircleLayout.members,!0),_a=0,aa=zt;_a<aa.length;_a+=1){var Fo=aa[_a],pu=Vi(Fo.transform,Fo.invTransform,_.transform);zr.draw(ge,Ve.TRIANGLES,it.disabled,At.disabled,_.colorModeForRenderPass(),hn.disabled,pu,x.id,qo,ha,E.SegmentVector.simpleSegment(0,2*Fo.circleOffset,Fo.circleArray.length,Fo.circleArray.length/2),null,_.transform.zoom,null,null,null)}qo.destroy(),ha.destroy()}}var du=E.identity(new Float32Array(16));function Td(_,S,x,O,k,Z){var Q=E.getAnchorAlignment(_),ge=-(Q.horizontalAlign-.5)*S,Ve=-(Q.verticalAlign-.5)*x,ht=E.evaluateVariableOffset(_,O);return new E.Point((ge/k+ht[0])*Z,(Ve/k+ht[1])*Z)}function Ad(_,S,x,O,k,Z,Q,ge,Ve,ht,zt){var Ht=_.text.placedSymbolArray,Zt=_.text.dynamicLayoutVertexArray,xn=_.icon.dynamicLayoutVertexArray,vn={};Zt.clear();for(var Un=0;Un<Ht.length;Un++){var an=Ht.get(Un),kn=an.hidden||!an.crossTileID||_.allowVerticalPlacement&&!an.placedOrientation?null:O[an.crossTileID];if(kn){var nr=new E.Point(an.anchorX,an.anchorY),mr=Fn(nr,x?ge:Q),Rr=gn(Z.cameraToCenterDistance,mr.signedDistanceFromCamera),Ar=k.evaluateSizeForFeature(_.textSizeData,ht,an)*Rr/E.ONE_EM;x&&(Ar*=_.tilePixelRatio/Ve);for(var zr=Td(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textBoxScale,Ar),ni=x?Fn(nr.add(zr),Q).point:mr.point.add(S?zr.rotate(-Z.angle):zr),zi=_.allowVerticalPlacement&&an.placedOrientation===E.WritingMode.vertical?Math.PI/2:0,Li=0;Li<an.numGlyphs;Li++)E.addDynamicAttributes(Zt,ni,zi);zt&&an.associatedIconIndex>=0&&(vn[an.associatedIconIndex]={shiftedAnchor:ni,angle:zi})}else Ni(an.numGlyphs,Zt)}if(zt){xn.clear();for(var co=_.icon.placedSymbolArray,Uo=0;Uo<co.length;Uo++){var Zo=co.get(Uo);if(Zo.hidden)Ni(Zo.numGlyphs,xn);else{var Xo=vn[Uo];if(Xo)for(var cs=0;cs<Zo.numGlyphs;cs++)E.addDynamicAttributes(xn,Xo.shiftedAnchor,Xo.angle);else Ni(Zo.numGlyphs,xn)}}_.icon.dynamicLayoutVertexBuffer.updateData(xn)}_.text.dynamicLayoutVertexBuffer.updateData(Zt)}function yf(_,S,x){return x.iconsInText&&S?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Nf(_,S,x,O,k,Z,Q,ge,Ve,ht,zt,Ht){for(var Zt=_.context,xn=Zt.gl,vn=_.transform,Un=ge==="map",an=Ve==="map",kn=Un&&x.layout.get("symbol-placement")!=="point",nr=Un&&!an&&!kn,mr=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,Rr=!1,Ar=_.depthModeForSublayer(0,it.ReadOnly),zr=x.layout.get("text-variable-anchor"),ni=[],zi=0,Li=O;zi<Li.length;zi+=1){var co=Li[zi],Uo=S.getTile(co),Zo=Uo.getBucket(x);if(Zo){var Xo=k?Zo.text:Zo.icon;if(Xo&&Xo.segments.get().length){var cs=Xo.programConfigurations.get(x.id),Pr=k||Zo.sdfIcons,Qt=k?Zo.textSizeData:Zo.iconSizeData,da=an||vn.pitch!==0,ha=_.useProgram(yf(Pr,k,Zo),cs),qo=E.evaluateSizeForZoom(Qt,vn.zoom),_a=void 0,aa=[0,0],Fo=void 0,pu=void 0,Cl=null,Du=void 0;if(k)Fo=Uo.glyphAtlasTexture,pu=xn.LINEAR,_a=Uo.glyphAtlasTexture.size,Zo.iconsInText&&(aa=Uo.imageAtlasTexture.size,Cl=Uo.imageAtlasTexture,Du=da||_.options.rotating||_.options.zooming||Qt.kind==="composite"||Qt.kind==="camera"?xn.LINEAR:xn.NEAREST);else{var vu=x.layout.get("icon-size").constantOr(0)!==1||Zo.iconsNeedLinear;Fo=Uo.imageAtlasTexture,pu=Pr||_.options.rotating||_.options.zooming||vu||da?xn.LINEAR:xn.NEAREST,_a=Uo.imageAtlasTexture.size}var ws=fi(Uo,1,_.transform.zoom),wl=ln(co.posMatrix,an,Un,_.transform,ws),ml=Nn(co.posMatrix,an,Un,_.transform,ws),dc=zr&&Zo.hasTextData(),Uf=x.layout.get("icon-text-fit")!=="none"&&dc&&Zo.hasIconData();kn&&pr(Zo,co.posMatrix,_,k,wl,ml,an,ht);var wc=_.translatePosMatrix(co.posMatrix,Uo,Z,Q),cf=kn||k&&zr||Uf?du:wl,jc=_.translatePosMatrix(ml,Uo,Z,Q,!0),up=Pr&&x.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0,cp={program:ha,buffers:Xo,uniformValues:Pr?Zo.iconsInText?Xs(Qt.kind,qo,nr,an,_,wc,cf,jc,_a,aa):Ql(Qt.kind,qo,nr,an,_,wc,cf,jc,k,_a,!0):js(Qt.kind,qo,nr,an,_,wc,cf,jc,k,_a),atlasTexture:Fo,atlasTextureIcon:Cl,atlasInterpolation:pu,atlasInterpolationIcon:Du,isSDF:Pr,hasHalo:up};if(mr&&Zo.canOverlap){Rr=!0;for(var Sh=0,Vh=Xo.segments.get();Sh<Vh.length;Sh+=1){var Hh=Vh[Sh];ni.push({segments:new E.SegmentVector([Hh]),sortKey:Hh.sortKey,state:cp})}}else ni.push({segments:Xo.segments,sortKey:0,state:cp})}}}Rr&&ni.sort(function(Tf,jf){return Tf.sortKey-jf.sortKey});for(var Jf=0,Ci=ni;Jf<Ci.length;Jf+=1){var kl=Ci[Jf],zl=kl.state;if(Zt.activeTexture.set(xn.TEXTURE0),zl.atlasTexture.bind(zl.atlasInterpolation,xn.CLAMP_TO_EDGE),zl.atlasTextureIcon&&(Zt.activeTexture.set(xn.TEXTURE1),zl.atlasTextureIcon&&zl.atlasTextureIcon.bind(zl.atlasInterpolationIcon,xn.CLAMP_TO_EDGE)),zl.isSDF){var tc=zl.uniformValues;zl.hasHalo&&(tc.u_is_halo=1,sf(zl.buffers,kl.segments,x,_,zl.program,Ar,zt,Ht,tc)),tc.u_is_halo=0}sf(zl.buffers,kl.segments,x,_,zl.program,Ar,zt,Ht,zl.uniformValues)}}function sf(_,S,x,O,k,Z,Q,ge,Ve){var ht=O.context;k.draw(ht,ht.gl.TRIANGLES,Z,Q,ge,hn.disabled,Ve,x.id,_.layoutVertexBuffer,_.indexBuffer,S,x.paint,O.transform.zoom,_.programConfigurations.get(x.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function vh(_,S,x,O,k,Z,Q){var ge,Ve,ht,zt,Ht,Zt=_.context.gl,xn=x.paint.get("fill-pattern"),vn=xn&&xn.constantOr(1),Un=x.getCrossfadeParameters();Q?(Ve=vn&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=Zt.LINES):(Ve=vn?"fillPattern":"fill",ge=Zt.TRIANGLES);for(var an=0,kn=O;an<kn.length;an+=1){var nr=kn[an],mr=S.getTile(nr);if(!vn||mr.patternsLoaded()){var Rr=mr.getBucket(x);if(Rr){var Ar=Rr.programConfigurations.get(x.id),zr=_.useProgram(Ve,Ar);vn&&(_.context.activeTexture.set(Zt.TEXTURE0),mr.imageAtlasTexture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE),Ar.updatePaintBuffers(Un));var ni=xn.constantOr(null);if(ni&&mr.imageAtlas){var zi=mr.imageAtlas,Li=zi.patternPositions[ni.to.toString()],co=zi.patternPositions[ni.from.toString()];Li&&co&&Ar.setConstantPatternPositions(Li,co)}var Uo=_.translatePosMatrix(nr.posMatrix,mr,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(Q){zt=Rr.indexBuffer2,Ht=Rr.segments2;var Zo=[Zt.drawingBufferWidth,Zt.drawingBufferHeight];ht=Ve==="fillOutlinePattern"&&vn?re(Uo,_,Un,mr,Zo):En(Uo,Zo)}else zt=Rr.indexBuffer,Ht=Rr.segments,ht=vn?cn(Uo,_,Un,mr):tt(Uo);zr.draw(_.context,ge,k,_.stencilModeForClipping(nr),Z,hn.disabled,ht,x.id,Rr.layoutVertexBuffer,zt,Ht,x.paint,_.transform.zoom,Ar)}}}}function mh(_,S,x,O,k,Z,Q){for(var ge=_.context,Ve=ge.gl,ht=x.paint.get("fill-extrusion-pattern"),zt=ht.constantOr(1),Ht=x.getCrossfadeParameters(),Zt=x.paint.get("fill-extrusion-opacity"),xn=0,vn=O;xn<vn.length;xn+=1){var Un=vn[xn],an=S.getTile(Un),kn=an.getBucket(x);if(kn){var nr=kn.programConfigurations.get(x.id),mr=_.useProgram(zt?"fillExtrusionPattern":"fillExtrusion",nr);zt&&(_.context.activeTexture.set(Ve.TEXTURE0),an.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),nr.updatePaintBuffers(Ht));var Rr=ht.constantOr(null);if(Rr&&an.imageAtlas){var Ar=an.imageAtlas,zr=Ar.patternPositions[Rr.to.toString()],ni=Ar.patternPositions[Rr.from.toString()];zr&&ni&&nr.setConstantPatternPositions(zr,ni)}var zi=_.translatePosMatrix(Un.posMatrix,an,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),Li=x.paint.get("fill-extrusion-vertical-gradient"),co=zt?_e(zi,_,Li,Zt,Un,Ht,an):oe(zi,_,Li,Zt);mr.draw(ge,ge.gl.TRIANGLES,k,Z,Q,hn.backCCW,co,x.id,kn.layoutVertexBuffer,kn.indexBuffer,kn.segments,x.paint,_.transform.zoom,nr)}}}function Ff(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl,Ve=S.fbo;if(Ve){var ht=_.useProgram("hillshade");Q.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,Ve.colorAttachment.get());var zt=function(Ht,Zt,xn){var vn=xn.paint.get("hillshade-shadow-color"),Un=xn.paint.get("hillshade-highlight-color"),an=xn.paint.get("hillshade-accent-color"),kn=xn.paint.get("hillshade-illumination-direction")*(Math.PI/180);xn.paint.get("hillshade-illumination-anchor")==="viewport"&&(kn-=Ht.transform.angle);var nr,mr,Rr,Ar=!Ht.options.moving;return{u_matrix:Ht.transform.calculatePosMatrix(Zt.tileID.toUnwrapped(),Ar),u_image:0,u_latrange:(nr=Zt.tileID,mr=Math.pow(2,nr.canonical.z),Rr=nr.canonical.y,[new E.MercatorCoordinate(0,Rr/mr).toLngLat().lat,new E.MercatorCoordinate(0,(Rr+1)/mr).toLngLat().lat]),u_light:[xn.paint.get("hillshade-exaggeration"),kn],u_shadow:vn,u_highlight:Un,u_accent:an}}(_,S,x);ht.draw(Q,ge.TRIANGLES,O,k,Z,hn.disabled,zt,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function f0(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl,Ve=S.dem;if(Ve&&Ve.data){var ht=Ve.dim,zt=Ve.stride,Ht=Ve.getPixels();if(Q.activeTexture.set(ge.TEXTURE1),Q.pixelStoreUnpackPremultiplyAlpha.set(!1),S.demTexture=S.demTexture||_.getTileTexture(zt),S.demTexture){var Zt=S.demTexture;Zt.update(Ht,{premultiply:!1}),Zt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else S.demTexture=new E.Texture(Q,Ht,ge.RGBA,{premultiply:!1}),S.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);Q.activeTexture.set(ge.TEXTURE0);var xn=S.fbo;if(!xn){var vn=new E.Texture(Q,{width:ht,height:ht,data:null},ge.RGBA);vn.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),(xn=S.fbo=Q.createFramebuffer(ht,ht,!0)).colorAttachment.set(vn.texture)}Q.bindFramebuffer.set(xn.framebuffer),Q.viewport.set([0,0,ht,ht]),_.useProgram("hillshadePrepare").draw(Q,ge.TRIANGLES,O,k,Z,hn.disabled,function(Un,an){var kn=an.stride,nr=E.create();return E.ortho(nr,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(nr,nr,[0,-E.EXTENT,0]),{u_matrix:nr,u_image:1,u_dimension:[kn,kn],u_zoom:Un.overscaledZ,u_unpack:an.getUnpackVector()}}(S.tileID,Ve),x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),S.needsHillshadePrepare=!1}}function rp(_,S,x,O,k){var Z=O.paint.get("raster-fade-duration");if(Z>0){var Q=E.browser.now(),ge=(Q-_.timeAdded)/Z,Ve=S?(Q-S.timeAdded)/Z:-1,ht=x.getSource(),zt=k.coveringZoomLevel({tileSize:ht.tileSize,roundZoom:ht.roundZoom}),Ht=!S||Math.abs(S.tileID.overscaledZ-zt)>Math.abs(_.tileID.overscaledZ-zt),Zt=Ht&&_.refreshedUponExpiration?1:E.clamp(Ht?ge:1-Ve,0,1);return _.refreshedUponExpiration&&ge>=1&&(_.refreshedUponExpiration=!1),S?{opacity:1,mix:1-Zt}:{opacity:Zt,mix:0}}return{opacity:1,mix:0}}var jp=new E.Color(1,0,0,1),_f=new E.Color(0,1,0,1),h0=new E.Color(0,0,1,1),ip=new E.Color(1,0,1,1),Cd=new E.Color(0,1,1,1);function bf(_,S,x,O){gh(_,0,S+x/2,_.transform.width,x,O)}function Vp(_,S,x,O){gh(_,S-x/2,0,x,_.transform.height,O)}function gh(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl;ge.enable(ge.SCISSOR_TEST),ge.scissor(S*E.browser.devicePixelRatio,x*E.browser.devicePixelRatio,O*E.browser.devicePixelRatio,k*E.browser.devicePixelRatio),Q.clear({color:Z}),ge.disable(ge.SCISSOR_TEST)}function op(_,S,x){var O=_.context,k=O.gl,Z=x.posMatrix,Q=_.useProgram("debug"),ge=it.disabled,Ve=At.disabled,ht=_.colorModeForRenderPass();O.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Q.draw(O,k.LINE_STRIP,ge,Ve,ht,hn.disabled,xo(Z,E.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var zt=S.getTileByID(x.key).latestRawTileData,Ht=Math.floor((zt&&zt.byteLength||0)/1024),Zt=S.getTile(x).tileSize,xn=512/Math.min(Zt,512)*(x.overscaledZ/_.transform.zoom)*.5,vn=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(vn+=" => "+x.overscaledZ),function(Un,an){Un.initDebugOverlayCanvas();var kn=Un.debugOverlayCanvas,nr=Un.context.gl,mr=Un.debugOverlayCanvas.getContext("2d");mr.clearRect(0,0,kn.width,kn.height),mr.shadowColor="white",mr.shadowBlur=2,mr.lineWidth=1.5,mr.strokeStyle="white",mr.textBaseline="top",mr.font="bold 36px Open Sans, sans-serif",mr.fillText(an,5,5),mr.strokeText(an,5,5),Un.debugOverlayTexture.update(kn),Un.debugOverlayTexture.bind(nr.LINEAR,nr.CLAMP_TO_EDGE)}(_,vn+" "+Ht+"kb"),Q.draw(O,k.TRIANGLES,ge,Ve,Yt.alphaBlended,hn.disabled,xo(Z,E.Color.transparent,xn),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var Yf={symbol:function(_,S,x,O,k){if(_.renderPass==="translucent"){var Z=At.disabled,Q=_.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(ge,Ve,ht,zt,Ht,Zt,xn){for(var vn=Ve.transform,Un=Ht==="map",an=Zt==="map",kn=0,nr=ge;kn<nr.length;kn+=1){var mr=nr[kn],Rr=zt.getTile(mr),Ar=Rr.getBucket(ht);if(Ar&&Ar.text&&Ar.text.segments.get().length){var zr=E.evaluateSizeForZoom(Ar.textSizeData,vn.zoom),ni=fi(Rr,1,Ve.transform.zoom),zi=ln(mr.posMatrix,an,Un,Ve.transform,ni),Li=ht.layout.get("icon-text-fit")!=="none"&&Ar.hasIconData();if(zr){var co=Math.pow(2,vn.zoom-Rr.tileID.overscaledZ);Ad(Ar,Un,an,xn,E.symbolSize,vn,zi,mr.posMatrix,co,zr,Li)}}}}(O,_,x,S,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),k),x.paint.get("icon-opacity").constantOr(1)!==0&&Nf(_,S,x,O,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),Z,Q),x.paint.get("text-opacity").constantOr(1)!==0&&Nf(_,S,x,O,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),Z,Q),S.map.showCollisionBoxes&&(kc(_,S,x,O,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),kc(_,S,x,O,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("circle-opacity"),Z=x.paint.get("circle-stroke-width"),Q=x.paint.get("circle-stroke-opacity"),ge=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)!==0||Z.constantOr(1)!==0&&Q.constantOr(1)!==0){for(var Ve=_.context,ht=Ve.gl,zt=_.depthModeForSublayer(0,it.ReadOnly),Ht=At.disabled,Zt=_.colorModeForRenderPass(),xn=[],vn=0;vn<O.length;vn++){var Un=O[vn],an=S.getTile(Un),kn=an.getBucket(x);if(kn){var nr=kn.programConfigurations.get(x.id),mr={programConfiguration:nr,program:_.useProgram("circle",nr),layoutVertexBuffer:kn.layoutVertexBuffer,indexBuffer:kn.indexBuffer,uniformValues:Nr(_,Un,an,x)};if(ge)for(var Rr=0,Ar=kn.segments.get();Rr<Ar.length;Rr+=1){var zr=Ar[Rr];xn.push({segments:new E.SegmentVector([zr]),sortKey:zr.sortKey,state:mr})}else xn.push({segments:kn.segments,sortKey:0,state:mr})}}ge&&xn.sort(function(Uo,Zo){return Uo.sortKey-Zo.sortKey});for(var ni=0,zi=xn;ni<zi.length;ni+=1){var Li=zi[ni],co=Li.state;co.program.draw(Ve,ht.TRIANGLES,zt,Ht,Zt,hn.disabled,co.uniformValues,x.id,co.layoutVertexBuffer,co.indexBuffer,Li.segments,x.paint,_.transform.zoom,co.programConfiguration)}}}},heatmap:function(_,S,x,O){if(x.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var k=_.context,Z=k.gl,Q=At.disabled,ge=new Yt([Z.ONE,Z.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(xn,vn,Un){var an=xn.gl;xn.activeTexture.set(an.TEXTURE1),xn.viewport.set([0,0,vn.width/4,vn.height/4]);var kn=Un.heatmapFbo;if(kn)an.bindTexture(an.TEXTURE_2D,kn.colorAttachment.get()),xn.bindFramebuffer.set(kn.framebuffer);else{var nr=an.createTexture();an.bindTexture(an.TEXTURE_2D,nr),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_S,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_WRAP_T,an.CLAMP_TO_EDGE),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MIN_FILTER,an.LINEAR),an.texParameteri(an.TEXTURE_2D,an.TEXTURE_MAG_FILTER,an.LINEAR),kn=Un.heatmapFbo=xn.createFramebuffer(vn.width/4,vn.height/4,!1),function(mr,Rr,Ar,zr){var ni=mr.gl;ni.texImage2D(ni.TEXTURE_2D,0,ni.RGBA,Rr.width/4,Rr.height/4,0,ni.RGBA,mr.extRenderToTextureHalfFloat?mr.extTextureHalfFloat.HALF_FLOAT_OES:ni.UNSIGNED_BYTE,null),zr.colorAttachment.set(Ar)}(xn,vn,nr,kn)}})(k,_,x),k.clear({color:E.Color.transparent});for(var Ve=0;Ve<O.length;Ve++){var ht=O[Ve];if(!S.hasRenderableParent(ht)){var zt=S.getTile(ht),Ht=zt.getBucket(x);if(Ht){var Zt=Ht.programConfigurations.get(x.id);_.useProgram("heatmap",Zt).draw(k,Z.TRIANGLES,it.disabled,Q,ge,hn.disabled,za(ht.posMatrix,zt,_.transform.zoom,x.paint.get("heatmap-intensity")),x.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,x.paint,_.transform.zoom,Zt)}}}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(xn,vn){var Un=xn.context,an=Un.gl,kn=vn.heatmapFbo;if(kn){Un.activeTexture.set(an.TEXTURE0),an.bindTexture(an.TEXTURE_2D,kn.colorAttachment.get()),Un.activeTexture.set(an.TEXTURE1);var nr=vn.colorRampTexture;nr||(nr=vn.colorRampTexture=new E.Texture(Un,vn.colorRamp,an.RGBA)),nr.bind(an.LINEAR,an.CLAMP_TO_EDGE),xn.useProgram("heatmapTexture").draw(Un,an.TRIANGLES,it.disabled,At.disabled,xn.colorModeForRenderPass(),hn.disabled,function(mr,Rr,Ar,zr){var ni=E.create();E.ortho(ni,0,mr.width,mr.height,0,0,1);var zi=mr.context.gl;return{u_matrix:ni,u_world:[zi.drawingBufferWidth,zi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Rr.paint.get("heatmap-opacity")}}(xn,vn),vn.id,xn.viewportBuffer,xn.quadTriangleIndexBuffer,xn.viewportSegments,vn.paint,xn.transform.zoom)}}(_,x))},line:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("line-opacity"),Z=x.paint.get("line-width");if(k.constantOr(1)!==0&&Z.constantOr(1)!==0)for(var Q=_.depthModeForSublayer(0,it.ReadOnly),ge=_.colorModeForRenderPass(),Ve=x.paint.get("line-dasharray"),ht=x.paint.get("line-pattern"),zt=ht.constantOr(1),Ht=x.paint.get("line-gradient"),Zt=x.getCrossfadeParameters(),xn=zt?"linePattern":Ve?"lineSDF":Ht?"lineGradient":"line",vn=_.context,Un=vn.gl,an=!0,kn=0,nr=O;kn<nr.length;kn+=1){var mr=nr[kn],Rr=S.getTile(mr);if(!zt||Rr.patternsLoaded()){var Ar=Rr.getBucket(x);if(Ar){var zr=Ar.programConfigurations.get(x.id),ni=_.context.program.get(),zi=_.useProgram(xn,zr),Li=an||zi.program!==ni,co=ht.constantOr(null);if(co&&Rr.imageAtlas){var Uo=Rr.imageAtlas,Zo=Uo.patternPositions[co.to.toString()],Xo=Uo.patternPositions[co.from.toString()];Zo&&Xo&&zr.setConstantPatternPositions(Zo,Xo)}var cs=zt?Ua(_,Rr,x,Zt):Ve?ja(_,Rr,x,Ve,Zt):Ht?go(_,Rr,x,Ar.lineClipsArray.length):ba(_,Rr,x);if(zt)vn.activeTexture.set(Un.TEXTURE0),Rr.imageAtlasTexture.bind(Un.LINEAR,Un.CLAMP_TO_EDGE),zr.updatePaintBuffers(Zt);else if(Ve&&(Li||_.lineAtlas.dirty))vn.activeTexture.set(Un.TEXTURE0),_.lineAtlas.bind(vn);else if(Ht){var Pr=Ar.gradients[x.id],Qt=Pr.texture;if(x.gradientVersion!==Pr.version){var da=256;if(x.stepInterpolant){var ha=S.getSource().maxzoom,qo=mr.canonical.z===ha?Math.ceil(1<<_.transform.maxZoom-mr.canonical.z):1;da=E.clamp(E.nextPowerOfTwo(Ar.maxLineLength/E.EXTENT*1024*qo),256,vn.maxTextureSize)}Pr.gradient=E.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:da,image:Pr.gradient||void 0,clips:Ar.lineClipsArray}),Pr.texture?Pr.texture.update(Pr.gradient):Pr.texture=new E.Texture(vn,Pr.gradient,Un.RGBA),Pr.version=x.gradientVersion,Qt=Pr.texture}vn.activeTexture.set(Un.TEXTURE0),Qt.bind(x.stepInterpolant?Un.NEAREST:Un.LINEAR,Un.CLAMP_TO_EDGE)}zi.draw(vn,Un.TRIANGLES,Q,_.stencilModeForClipping(mr),ge,hn.disabled,cs,x.id,Ar.layoutVertexBuffer,Ar.indexBuffer,Ar.segments,x.paint,_.transform.zoom,zr,Ar.layoutVertexBuffer2),an=!1}}}}},fill:function(_,S,x,O){var k=x.paint.get("fill-color"),Z=x.paint.get("fill-opacity");if(Z.constantOr(1)!==0){var Q=_.colorModeForRenderPass(),ge=x.paint.get("fill-pattern"),Ve=_.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&k.constantOr(E.Color.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Ve){var ht=_.depthModeForSublayer(1,_.renderPass==="opaque"?it.ReadWrite:it.ReadOnly);vh(_,S,x,O,ht,Q,!1)}if(_.renderPass==="translucent"&&x.paint.get("fill-antialias")){var zt=_.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,it.ReadOnly);vh(_,S,x,O,zt,Q,!0)}}},"fill-extrusion":function(_,S,x,O){var k=x.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){var Z=new it(_.context.gl.LEQUAL,it.ReadWrite,_.depthRangeFor3D);if(k!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))mh(_,S,x,O,Z,At.disabled,Yt.disabled),mh(_,S,x,O,Z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var Q=_.colorModeForRenderPass();mh(_,S,x,O,Z,At.disabled,Q)}}},hillshade:function(_,S,x,O){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var k=_.context,Z=_.depthModeForSublayer(0,it.ReadOnly),Q=_.colorModeForRenderPass(),ge=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O],Ve=ge[0],ht=0,zt=ge[1];ht<zt.length;ht+=1){var Ht=zt[ht],Zt=S.getTile(Ht);Zt.needsHillshadePrepare&&_.renderPass==="offscreen"?f0(_,Zt,x,Z,At.disabled,Q):_.renderPass==="translucent"&&Ff(_,Zt,x,Z,Ve[Ht.overscaledZ],Q)}k.viewport.set([0,0,_.width,_.height])}},raster:function(_,S,x,O){if(_.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&O.length)for(var k=_.context,Z=k.gl,Q=S.getSource(),ge=_.useProgram("raster"),Ve=_.colorModeForRenderPass(),ht=Q instanceof Rt?[{},O]:_.stencilConfigForOverlap(O),zt=ht[0],Ht=ht[1],Zt=Ht[Ht.length-1].overscaledZ,xn=!_.options.moving,vn=0,Un=Ht;vn<Un.length;vn+=1){var an=Un[vn],kn=_.depthModeForSublayer(an.overscaledZ-Zt,x.paint.get("raster-opacity")===1?it.ReadWrite:it.ReadOnly,Z.LESS),nr=S.getTile(an),mr=_.transform.calculatePosMatrix(an.toUnwrapped(),xn);nr.registerFadeDuration(x.paint.get("raster-fade-duration"));var Rr=S.findLoadedParent(an,0),Ar=rp(nr,Rr,S,x,_.transform),zr=void 0,ni=void 0,zi=x.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;k.activeTexture.set(Z.TEXTURE0),nr.texture.bind(zi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(Z.TEXTURE1),Rr?(Rr.texture.bind(zi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),zr=Math.pow(2,Rr.tileID.overscaledZ-nr.tileID.overscaledZ),ni=[nr.tileID.canonical.x*zr%1,nr.tileID.canonical.y*zr%1]):nr.texture.bind(zi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST);var Li=$a(mr,ni||[0,0],zr||1,Ar,x);Q instanceof Rt?ge.draw(k,Z.TRIANGLES,kn,At.disabled,Ve,hn.disabled,Li,x.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):ge.draw(k,Z.TRIANGLES,kn,zt[an.overscaledZ],Ve,hn.disabled,Li,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,S,x){var O=x.paint.get("background-color"),k=x.paint.get("background-opacity");if(k!==0){var Z=_.context,Q=Z.gl,ge=_.transform,Ve=ge.tileSize,ht=x.paint.get("background-pattern");if(!_.isPatternMissing(ht)){var zt=!ht&&O.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===zt){var Ht=At.disabled,Zt=_.depthModeForSublayer(0,zt==="opaque"?it.ReadWrite:it.ReadOnly),xn=_.colorModeForRenderPass(),vn=_.useProgram(ht?"backgroundPattern":"background"),Un=ge.coveringTiles({tileSize:Ve});ht&&(Z.activeTexture.set(Q.TEXTURE0),_.imageManager.bind(_.context));for(var an=x.getCrossfadeParameters(),kn=0,nr=Un;kn<nr.length;kn+=1){var mr=nr[kn],Rr=_.transform.calculatePosMatrix(mr.toUnwrapped()),Ar=ht?af(Rr,k,_,ht,{tileID:mr,tileSize:Ve},an):cl(Rr,k,O);vn.draw(Z,Q.TRIANGLES,Zt,Ht,xn,hn.disabled,Ar,x.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,S,x){for(var O=0;O<x.length;O++)op(_,S,x[O])},custom:function(_,S,x){var O=_.context,k=x.implementation;if(_.renderPass==="offscreen"){var Z=k.prerender;Z&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),Z.call(k,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(At.disabled);var Q=k.renderingMode==="3d"?new it(_.context.gl.LEQUAL,it.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,it.ReadOnly);O.setDepthMode(Q),k.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}}},Ks=function(_,S){this.context=new Et(_),this.transform=S,this._tileTextures={},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jc,this.gpuTimers={}};Ks.prototype.resize=function(_,S){if(this.width=_*E.browser.devicePixelRatio,this.height=S*E.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,O=this.style._order;x<O.length;x+=1)this.style._layers[O[x]].resize()},Ks.prototype.setup=function(){var _=this.context,S=new E.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(E.EXTENT,0),S.emplaceBack(0,E.EXTENT),S.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(S,Ds.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);var x=new E.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(E.EXTENT,0),x.emplaceBack(0,E.EXTENT),x.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=_.createVertexBuffer(x,Ds.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);var O=new E.StructArrayLayout4i8;O.emplaceBack(0,0,0,0),O.emplaceBack(E.EXTENT,0,E.EXTENT,0),O.emplaceBack(0,E.EXTENT,0,E.EXTENT),O.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(O,Xe.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);var k=new E.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(k,Ds.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);var Z=new E.StructArrayLayout1ui2;Z.emplaceBack(0),Z.emplaceBack(1),Z.emplaceBack(3),Z.emplaceBack(2),Z.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(Z);var Q=new E.StructArrayLayout3ui6;Q.emplaceBack(0,1,2),Q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(Q),this.emptyTexture=new E.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var ge=this.context.gl;this.stencilClearMode=new At({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)},Ks.prototype.clearStencil=function(){var _=this.context,S=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=E.create();E.ortho(x,0,this.width,this.height,0,0,1),E.scale(x,x,[S.drawingBufferWidth,S.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,S.TRIANGLES,it.disabled,this.stencilClearMode,Yt.disabled,hn.disabled,yo(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ks.prototype._renderTileClippingMasks=function(_,S){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&S&&S.length){this.currentStencilSource=_.source;var x=this.context,O=x.gl;this.nextStencilID+S.length>256&&this.clearStencil(),x.setColorMode(Yt.disabled),x.setDepthMode(it.disabled);var k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Z=0,Q=S;Z<Q.length;Z+=1){var ge=Q[Z],Ve=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++;k.draw(x,O.TRIANGLES,it.disabled,new At({func:O.ALWAYS,mask:0},Ve,255,O.KEEP,O.KEEP,O.REPLACE),Yt.disabled,hn.disabled,yo(ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ks.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,S=this.context.gl;return new At({func:S.NOTEQUAL,mask:255},_,255,S.KEEP,S.KEEP,S.REPLACE)},Ks.prototype.stencilModeForClipping=function(_){var S=this.context.gl;return new At({func:S.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,S.KEEP,S.KEEP,S.REPLACE)},Ks.prototype.stencilConfigForOverlap=function(_){var S,x=this.context.gl,O=_.sort(function(Ve,ht){return ht.overscaledZ-Ve.overscaledZ}),k=O[O.length-1].overscaledZ,Z=O[0].overscaledZ-k+1;if(Z>1){this.currentStencilSource=void 0,this.nextStencilID+Z>256&&this.clearStencil();for(var Q={},ge=0;ge<Z;ge++)Q[ge+k]=new At({func:x.GEQUAL,mask:255},ge+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=Z,[Q,O]}return[(S={},S[k]=At.disabled,S),O]},Ks.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new Yt([_.CONSTANT_COLOR,_.ONE],new E.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yt.unblended:Yt.alphaBlended},Ks.prototype.depthModeForSublayer=function(_,S,x){if(!this.opaquePassEnabledForLayer())return it.disabled;var O=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new it(x||this.context.gl.LEQUAL,S,[O,O])},Ks.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ks.prototype.render=function(_,S){var x=this;this.style=_,this.options=S,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(E.browser.now()),this.imageManager.beginFrame();var O=this.style._order,k=this.style.sourceCaches;for(var Z in k){var Q=k[Z];Q.used&&Q.prepare(this.context)}var ge,Ve,ht={},zt={},Ht={};for(var Zt in k){var xn=k[Zt];ht[Zt]=xn.getVisibleCoordinates(),zt[Zt]=ht[Zt].slice().reverse(),Ht[Zt]=xn.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var vn=0;vn<O.length;vn++)if(this.style._layers[O[vn]].is3D()){this.opaquePassCutoff=vn;break}this.renderPass="offscreen";for(var Un=0,an=O;Un<an.length;Un+=1){var kn=this.style._layers[an[Un]];if(kn.hasOffscreenPass()&&!kn.isHidden(this.transform.zoom)){var nr=zt[kn.source];(kn.type==="custom"||nr.length)&&this.renderLayer(this,k[kn.source],kn,nr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:S.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=S.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){var mr=this.style._layers[O[this.currentLayer]],Rr=k[mr.source],Ar=ht[mr.source];this._renderTileClippingMasks(mr,Ar),this.renderLayer(this,Rr,mr,Ar)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){var zr=this.style._layers[O[this.currentLayer]],ni=k[zr.source],zi=(zr.type==="symbol"?Ht:zt)[zr.source];this._renderTileClippingMasks(zr,ht[zr.source]),this.renderLayer(this,ni,zr,zi)}this.options.showTileBoundaries&&(E.values(this.style._layers).forEach(function(Li){Li.source&&!Li.isHidden(x.transform.zoom)&&(Li.source!==(Ve&&Ve.id)&&(Ve=x.style.sourceCaches[Li.source]),(!ge||ge.getSource().maxzoom<Ve.getSource().maxzoom)&&(ge=Ve))}),ge&&Yf.debug(this,ge,ge.getVisibleCoordinates())),this.options.showPadding&&function(Li){var co=Li.transform.padding;bf(Li,Li.transform.height-(co.top||0),3,jp),bf(Li,co.bottom||0,3,_f),Vp(Li,co.left||0,3,h0),Vp(Li,Li.transform.width-(co.right||0),3,ip);var Uo=Li.transform.centerPoint;(function(Zo,Xo,cs,Pr){gh(Zo,Xo-1,cs-10,2,20,Pr),gh(Zo,Xo-10,cs-1,20,2,Pr)})(Li,Uo.x,Li.transform.height-Uo.y,Cd)}(this),this.context.setDefault()},Ks.prototype.renderLayer=function(_,S,x,O){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||O.length)&&(this.id=x.id,this.gpuTimingStart(x),Yf[x.type](_,S,x,O,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ks.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var S=this.context.extTimerQuery,x=this.gpuTimers[_.id];x||(x=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:S.createQueryEXT()}),x.calls++,S.beginQueryEXT(S.TIME_ELAPSED_EXT,x.query)}},Ks.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},Ks.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},Ks.prototype.queryGpuTimers=function(_){var S={};for(var x in _){var O=_[x],k=this.context.extTimerQuery,Z=k.getQueryObjectEXT(O.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(O.query),S[x]=Z}return S},Ks.prototype.translatePosMatrix=function(_,S,x,O,k){if(!x[0]&&!x[1])return _;var Z=k?O==="map"?this.transform.angle:0:O==="viewport"?-this.transform.angle:0;if(Z){var Q=Math.sin(Z),ge=Math.cos(Z);x=[x[0]*ge-x[1]*Q,x[0]*Q+x[1]*ge]}var Ve=[k?x[0]:fi(S,x[0],this.transform.zoom),k?x[1]:fi(S,x[1],this.transform.zoom),0],ht=new Float32Array(16);return E.translate(ht,_,Ve),ht},Ks.prototype.saveTileTexture=function(_){var S=this._tileTextures[_.size[0]];S?S.push(_):this._tileTextures[_.size[0]]=[_]},Ks.prototype.getTileTexture=function(_){var S=this._tileTextures[_];return S&&S.length>0?S.pop():null},Ks.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var S=this.imageManager.getPattern(_.from.toString()),x=this.imageManager.getPattern(_.to.toString());return!S||!x},Ks.prototype.useProgram=function(_,S){this.cache=this.cache||{};var x=""+_+(S?S.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[x]||(this.cache[x]=new pl(this.context,_,np[_],S,Fh[_],this._showOverdrawInspector)),this.cache[x]},Ks.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ks.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},Ks.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=E.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ks.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Od=function(_,S){this.points=_,this.planes=S};Od.fromInvProjectionMatrix=function(_,S,x){var O=Math.pow(2,x),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Q){return E.transformMat4([],Q,_)}).map(function(Q){return E.scale$1([],Q,1/Q[3]/S*O)}),Z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Q){var ge=E.sub([],k[Q[0]],k[Q[1]]),Ve=E.sub([],k[Q[2]],k[Q[1]]),ht=E.normalize([],E.cross([],ge,Ve)),zt=-E.dot(ht,k[Q[1]]);return ht.concat(zt)});return new Od(k,Z)};var xf=function(_,S){this.min=_,this.max=S,this.center=E.scale$2([],E.add([],this.min,this.max),.5)};xf.prototype.quadrant=function(_){for(var S=[_%2==0,_<2],x=E.clone$2(this.min),O=E.clone$2(this.max),k=0;k<S.length;k++)x[k]=S[k]?this.min[k]:this.center[k],O[k]=S[k]?this.center[k]:this.max[k];return O[2]=this.max[2],new xf(x,O)},xf.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},xf.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},xf.prototype.intersects=function(_){for(var S=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,O=0;O<_.planes.length;O++){for(var k=_.planes[O],Z=0,Q=0;Q<S.length;Q++)Z+=E.dot$1(k,S[Q])>=0;if(Z===0)return 0;Z!==S.length&&(x=!1)}if(x)return 2;for(var ge=0;ge<3;ge++){for(var Ve=Number.MAX_VALUE,ht=-Number.MAX_VALUE,zt=0;zt<_.points.length;zt++){var Ht=_.points[zt][ge]-this.min[ge];Ve=Math.min(Ve,Ht),ht=Math.max(ht,Ht)}if(ht<0||Ve>this.max[ge]-this.min[ge])return 0}return 1};var $f=function(_,S,x,O){if(_===void 0&&(_=0),S===void 0&&(S=0),x===void 0&&(x=0),O===void 0&&(O=0),isNaN(_)||_<0||isNaN(S)||S<0||isNaN(x)||x<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=S,this.left=x,this.right=O};$f.prototype.interpolate=function(_,S,x){return S.top!=null&&_.top!=null&&(this.top=E.number(_.top,S.top,x)),S.bottom!=null&&_.bottom!=null&&(this.bottom=E.number(_.bottom,S.bottom,x)),S.left!=null&&_.left!=null&&(this.left=E.number(_.left,S.left,x)),S.right!=null&&_.right!=null&&(this.right=E.number(_.right,S.right,x)),this},$f.prototype.getCenter=function(_,S){var x=E.clamp((this.left+_-this.right)/2,0,_),O=E.clamp((this.top+S-this.bottom)/2,0,S);return new E.Point(x,O)},$f.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},$f.prototype.clone=function(){return new $f(this.top,this.bottom,this.left,this.right)},$f.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var La=function(_,S,x,O,k){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=k===void 0||k,this._minZoom=_||0,this._maxZoom=S||22,this._minPitch=x==null?0:x,this._maxPitch=O==null?60:O,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $f,this._posMatrixCache={},this._alignedPosMatrixCache={}},fe={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};La.prototype.clone=function(){var _=new La(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},fe.minZoom.get=function(){return this._minZoom},fe.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},fe.maxZoom.get=function(){return this._maxZoom},fe.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},fe.minPitch.get=function(){return this._minPitch},fe.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},fe.maxPitch.get=function(){return this._maxPitch},fe.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},fe.renderWorldCopies.get=function(){return this._renderWorldCopies},fe.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},fe.worldSize.get=function(){return this.tileSize*this.scale},fe.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fe.size.get=function(){return new E.Point(this.width,this.height)},fe.bearing.get=function(){return-this.angle/Math.PI*180},fe.bearing.set=function(_){var S=-E.wrap(_,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=E.create$2(),E.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fe.pitch.get=function(){return this._pitch/Math.PI*180},fe.pitch.set=function(_){var S=E.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())},fe.fov.get=function(){return this._fov/Math.PI*180},fe.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},fe.zoom.get=function(){return this._zoom},fe.zoom.set=function(_){var S=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())},fe.center.get=function(){return this._center},fe.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},fe.padding.get=function(){return this._edgeInsets.toJSON()},fe.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},fe.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},La.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},La.prototype.interpolatePadding=function(_,S,x){this._unmodified=!1,this._edgeInsets.interpolate(_,S,x),this._constrain(),this._calcMatrices()},La.prototype.coveringZoomLevel=function(_){var S=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,S)},La.prototype.getVisibleUnwrappedCoordinates=function(_){var S=[new E.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new E.Point(0,0)),O=this.pointCoordinate(new E.Point(this.width,0)),k=this.pointCoordinate(new E.Point(this.width,this.height)),Z=this.pointCoordinate(new E.Point(0,this.height)),Q=Math.floor(Math.min(x.x,O.x,k.x,Z.x)),ge=Math.floor(Math.max(x.x,O.x,k.x,Z.x)),Ve=Q-1;Ve<=ge+1;Ve++)Ve!==0&&S.push(new E.UnwrappedTileID(Ve,_));return S},La.prototype.coveringTiles=function(_){var S=this.coveringZoomLevel(_),x=S;if(_.minzoom!==void 0&&S<_.minzoom)return[];_.maxzoom!==void 0&&S>_.maxzoom&&(S=_.maxzoom);var O=E.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,S),Z=[k*O.x,k*O.y,0],Q=Od.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S),ge=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ge=S);var Ve=function(Li){return{aabb:new xf([Li*k,0,0],[(Li+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Li,fullyVisible:!1}},ht=[],zt=[],Ht=S,Zt=_.reparseOverscaled?x:S;if(this._renderWorldCopies)for(var xn=1;xn<=3;xn++)ht.push(Ve(-xn)),ht.push(Ve(xn));for(ht.push(Ve(0));ht.length>0;){var vn=ht.pop(),Un=vn.x,an=vn.y,kn=vn.fullyVisible;if(!kn){var nr=vn.aabb.intersects(Q);if(nr===0)continue;kn=nr===2}var mr=vn.aabb.distanceX(Z),Rr=vn.aabb.distanceY(Z),Ar=Math.max(Math.abs(mr),Math.abs(Rr));if(vn.zoom===Ht||Ar>3+(1<<Ht-vn.zoom)-2&&vn.zoom>=ge)zt.push({tileID:new E.OverscaledTileID(vn.zoom===Ht?Zt:vn.zoom,vn.wrap,vn.zoom,Un,an),distanceSq:E.sqrLen([Z[0]-.5-Un,Z[1]-.5-an])});else for(var zr=0;zr<4;zr++){var ni=(Un<<1)+zr%2,zi=(an<<1)+(zr>>1);ht.push({aabb:vn.aabb.quadrant(zr),zoom:vn.zoom+1,x:ni,y:zi,wrap:vn.wrap,fullyVisible:kn})}}return zt.sort(function(Li,co){return Li.distanceSq-co.distanceSq}).map(function(Li){return Li.tileID})},La.prototype.resize=function(_,S){this.width=_,this.height=S,this.pixelsToGLUnits=[2/_,-2/S],this._constrain(),this._calcMatrices()},fe.unmodified.get=function(){return this._unmodified},La.prototype.zoomScale=function(_){return Math.pow(2,_)},La.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},La.prototype.project=function(_){var S=E.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.Point(E.mercatorXfromLng(_.lng)*this.worldSize,E.mercatorYfromLat(S)*this.worldSize)},La.prototype.unproject=function(_){return new E.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},fe.point.get=function(){return this.project(this.center)},La.prototype.setLocationAtPoint=function(_,S){var x=this.pointCoordinate(S),O=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(_),Z=new E.MercatorCoordinate(k.x-(x.x-O.x),k.y-(x.y-O.y));this.center=this.coordinateLocation(Z),this._renderWorldCopies&&(this.center=this.center.wrap())},La.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},La.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},La.prototype.locationCoordinate=function(_){return E.MercatorCoordinate.fromLngLat(_)},La.prototype.coordinateLocation=function(_){return _.toLngLat()},La.prototype.pointCoordinate=function(_){var S=[_.x,_.y,0,1],x=[_.x,_.y,1,1];E.transformMat4(S,S,this.pixelMatrixInverse),E.transformMat4(x,x,this.pixelMatrixInverse);var O=S[3],k=x[3],Z=S[1]/O,Q=x[1]/k,ge=S[2]/O,Ve=x[2]/k,ht=ge===Ve?0:(0-ge)/(Ve-ge);return new E.MercatorCoordinate(E.number(S[0]/O,x[0]/k,ht)/this.worldSize,E.number(Z,Q,ht)/this.worldSize)},La.prototype.coordinatePoint=function(_){var S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix),new E.Point(S[0]/S[3],S[1]/S[3])},La.prototype.getBounds=function(){return new E.LngLatBounds().extend(this.pointLocation(new E.Point(0,0))).extend(this.pointLocation(new E.Point(this.width,0))).extend(this.pointLocation(new E.Point(this.width,this.height))).extend(this.pointLocation(new E.Point(0,this.height)))},La.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},La.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},La.prototype.calculatePosMatrix=function(_,S){S===void 0&&(S=!1);var x=_.key,O=S?this._alignedPosMatrixCache:this._posMatrixCache;if(O[x])return O[x];var k=_.canonical,Z=this.worldSize/this.zoomScale(k.z),Q=k.x+Math.pow(2,k.z)*_.wrap,ge=E.identity(new Float64Array(16));return E.translate(ge,ge,[Q*Z,k.y*Z,0]),E.scale(ge,ge,[Z/E.EXTENT,Z/E.EXTENT,1]),E.multiply(ge,S?this.alignedProjMatrix:this.projMatrix,ge),O[x]=new Float32Array(ge),O[x]},La.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},La.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,S,x,O,k=-90,Z=90,Q=-180,ge=180,Ve=this.size,ht=this._unmodified;if(this.latRange){var zt=this.latRange;k=E.mercatorYfromLat(zt[1])*this.worldSize,_=(Z=E.mercatorYfromLat(zt[0])*this.worldSize)-k<Ve.y?Ve.y/(Z-k):0}if(this.lngRange){var Ht=this.lngRange;Q=E.mercatorXfromLng(Ht[0])*this.worldSize,S=(ge=E.mercatorXfromLng(Ht[1])*this.worldSize)-Q<Ve.x?Ve.x/(ge-Q):0}var Zt=this.point,xn=Math.max(S||0,_||0);if(xn)return this.center=this.unproject(new E.Point(S?(ge+Q)/2:Zt.x,_?(Z+k)/2:Zt.y)),this.zoom+=this.scaleZoom(xn),this._unmodified=ht,void(this._constraining=!1);if(this.latRange){var vn=Zt.y,Un=Ve.y/2;vn-Un<k&&(O=k+Un),vn+Un>Z&&(O=Z-Un)}if(this.lngRange){var an=Zt.x,kn=Ve.x/2;an-kn<Q&&(x=Q+kn),an+kn>ge&&(x=ge-kn)}x===void 0&&O===void 0||(this.center=this.unproject(new E.Point(x!==void 0?x:Zt.x,O!==void 0?O:Zt.y))),this._unmodified=ht,this._constraining=!1}},La.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var S=Math.PI/2+this._pitch,x=this._fov*(.5+_.y/this.height),O=Math.sin(x)*this.cameraToCenterDistance/Math.sin(E.clamp(Math.PI-S-x,.01,Math.PI-.01)),k=this.point,Z=k.x,Q=k.y,ge=1.01*(Math.cos(Math.PI/2-this._pitch)*O+this.cameraToCenterDistance),Ve=this.height/50,ht=new Float64Array(16);E.perspective(ht,this._fov,this.width/this.height,Ve,ge),ht[8]=2*-_.x/this.width,ht[9]=2*_.y/this.height,E.scale(ht,ht,[1,-1,1]),E.translate(ht,ht,[0,0,-this.cameraToCenterDistance]),E.rotateX(ht,ht,this._pitch),E.rotateZ(ht,ht,this.angle),E.translate(ht,ht,[-Z,-Q,0]),this.mercatorMatrix=E.scale([],ht,[this.worldSize,this.worldSize,this.worldSize]),E.scale(ht,ht,[1,1,E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ht,this.invProjMatrix=E.invert([],this.projMatrix);var zt=this.width%2/2,Ht=this.height%2/2,Zt=Math.cos(this.angle),xn=Math.sin(this.angle),vn=Z-Math.round(Z)+Zt*zt+xn*Ht,Un=Q-Math.round(Q)+Zt*Ht+xn*zt,an=new Float64Array(ht);if(E.translate(an,an,[vn>.5?vn-1:vn,Un>.5?Un-1:Un,0]),this.alignedProjMatrix=an,ht=E.create(),E.scale(ht,ht,[this.width/2,-this.height/2,1]),E.translate(ht,ht,[1,-1,0]),this.labelPlaneMatrix=ht,ht=E.create(),E.scale(ht,ht,[1,-1,1]),E.translate(ht,ht,[-1,-1,0]),E.scale(ht,ht,[2/this.width,2/this.height,1]),this.glCoordMatrix=ht,this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ht=E.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ht,this._posMatrixCache={},this._alignedPosMatrixCache={}}},La.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new E.Point(0,0)),S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance},La.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.Point(0,_))},La.prototype.getCameraQueryGeometry=function(_){var S=this.getCameraPoint();if(_.length===1)return[_[0],S];for(var x=S.x,O=S.y,k=S.x,Z=S.y,Q=0,ge=_;Q<ge.length;Q+=1){var Ve=ge[Q];x=Math.min(x,Ve.x),O=Math.min(O,Ve.y),k=Math.max(k,Ve.x),Z=Math.max(Z,Ve.y)}return[new E.Point(x,O),new E.Point(k,O),new E.Point(k,Z),new E.Point(x,Z),new E.Point(x,O)]},Object.defineProperties(La.prototype,fe);var Ge=function(_){var S,x,O,k;this._hashName=_&&encodeURIComponent(_),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(S=this._updateHashUnthrottled.bind(this),x=!1,O=null,k=function(){O=null,x&&(S(),O=setTimeout(k,300),x=!1)},function(){return x=!0,O||k(),O})};Ge.prototype.addTo=function(_){return this._map=_,E.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ge.prototype.remove=function(){return E.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ge.prototype.getHashString=function(_){var S=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,O=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,O),Z=Math.round(S.lng*k)/k,Q=Math.round(S.lat*k)/k,ge=this._map.getBearing(),Ve=this._map.getPitch(),ht="";if(ht+=_?"/"+Z+"/"+Q+"/"+x:x+"/"+Q+"/"+Z,(ge||Ve)&&(ht+="/"+Math.round(10*ge)/10),Ve&&(ht+="/"+Math.round(Ve)),this._hashName){var zt=this._hashName,Ht=!1,Zt=E.window.location.hash.slice(1).split("&").map(function(xn){var vn=xn.split("=")[0];return vn===zt?(Ht=!0,vn+"="+ht):xn}).filter(function(xn){return xn});return Ht||Zt.push(zt+"="+ht),"#"+Zt.join("&")}return"#"+ht},Ge.prototype._getCurrentHash=function(){var _,S=this,x=E.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(O){return O.split("=")}).forEach(function(O){O[0]===S._hashName&&(_=O)}),(_&&_[1]||"").split("/")):x.split("/")},Ge.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(x){return isNaN(x)})){var S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:S,pitch:+(_[4]||0)}),!0}return!1},Ge.prototype._updateHashUnthrottled=function(){var _=E.window.location.href.replace(/(#.+)?$/,this.getHashString());try{E.window.history.replaceState(E.window.history.state,null,_)}catch(S){}};var xt={linearity:.3,easing:E.bezier(0,0,.3,1)},Rn=E.extend({deceleration:2500,maxSpeed:1400},xt),ur=E.extend({deceleration:20,maxSpeed:1400},xt),Fr=E.extend({deceleration:1e3,maxSpeed:360},xt),ci=E.extend({deceleration:1e3,maxSpeed:90},xt),Ri=function(_){this._map=_,this.clear()};function Wo(_,S){(!_.duration||_.duration<S.duration)&&(_.duration=S.duration,_.easing=S.easing)}function Go(_,S,x){var O=x.maxSpeed,k=x.linearity,Z=x.deceleration,Q=E.clamp(_*k/(S/1e3),-O,O),ge=Math.abs(Q)/(Z*k);return{easing:x.easing,duration:1e3*ge,amount:Q*(ge/2)}}Ri.prototype.clear=function(){this._inertiaBuffer=[]},Ri.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.browser.now(),settings:_})},Ri.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,S=E.browser.now();_.length>0&&S-_[0].time>160;)_.shift()},Ri.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var S={zoom:0,bearing:0,pitch:0,pan:new E.Point(0,0),pinchAround:void 0,around:void 0},x=0,O=this._inertiaBuffer;x<O.length;x+=1){var k=O[x].settings;S.zoom+=k.zoomDelta||0,S.bearing+=k.bearingDelta||0,S.pitch+=k.pitchDelta||0,k.panDelta&&S.pan._add(k.panDelta),k.around&&(S.around=k.around),k.pinchAround&&(S.pinchAround=k.pinchAround)}var Z=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Q={};if(S.pan.mag()){var ge=Go(S.pan.mag(),Z,E.extend({},Rn,_||{}));Q.offset=S.pan.mult(ge.amount/S.pan.mag()),Q.center=this._map.transform.center,Wo(Q,ge)}if(S.zoom){var Ve=Go(S.zoom,Z,ur);Q.zoom=this._map.transform.zoom+Ve.amount,Wo(Q,Ve)}if(S.bearing){var ht=Go(S.bearing,Z,Fr);Q.bearing=this._map.transform.bearing+E.clamp(ht.amount,-179,179),Wo(Q,ht)}if(S.pitch){var zt=Go(S.pitch,Z,ci);Q.pitch=this._map.transform.pitch+zt.amount,Wo(Q,zt)}if(Q.zoom||Q.bearing){var Ht=S.pinchAround===void 0?S.around:S.pinchAround;Q.around=Ht?this._map.unproject(Ht):this._map.getCenter()}return this.clear(),E.extend(Q,{noMoveStart:!0})}};var la=function(_){function S(O,k,Z,Q){Q===void 0&&(Q={});var ge=ee.mousePos(k.getCanvasContainer(),Z),Ve=k.unproject(ge);_.call(this,O,E.extend({point:ge,lngLat:Ve,originalEvent:Z},Q)),this._defaultPrevented=!1,this.target=k}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),ol=function(_){function S(O,k,Z){var Q=O==="touchend"?Z.changedTouches:Z.touches,ge=ee.touchPos(k.getCanvasContainer(),Q),Ve=ge.map(function(Ht){return k.unproject(Ht)}),ht=ge.reduce(function(Ht,Zt,xn,vn){return Ht.add(Zt.div(vn.length))},new E.Point(0,0)),zt=k.unproject(ht);_.call(this,O,{points:ge,point:ht,lngLats:Ve,lngLat:zt,originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Al=function(_){function S(O,k,Z){_.call(this,O,{originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Ss=function(_,S){this._map=_,this._clickTolerance=S.clickTolerance};Ss.prototype.reset=function(){delete this._mousedownPos},Ss.prototype.wheel=function(_){return this._firePreventable(new Al(_.type,this._map,_))},Ss.prototype.mousedown=function(_,S){return this._mousedownPos=S,this._firePreventable(new la(_.type,this._map,_))},Ss.prototype.mouseup=function(_){this._map.fire(new la(_.type,this._map,_))},Ss.prototype.click=function(_,S){this._mousedownPos&&this._mousedownPos.dist(S)>=this._clickTolerance||this._map.fire(new la(_.type,this._map,_))},Ss.prototype.dblclick=function(_){return this._firePreventable(new la(_.type,this._map,_))},Ss.prototype.mouseover=function(_){this._map.fire(new la(_.type,this._map,_))},Ss.prototype.mouseout=function(_){this._map.fire(new la(_.type,this._map,_))},Ss.prototype.touchstart=function(_){return this._firePreventable(new ol(_.type,this._map,_))},Ss.prototype.touchmove=function(_){this._map.fire(new ol(_.type,this._map,_))},Ss.prototype.touchend=function(_){this._map.fire(new ol(_.type,this._map,_))},Ss.prototype.touchcancel=function(_){this._map.fire(new ol(_.type,this._map,_))},Ss.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},Ss.prototype.isEnabled=function(){return!0},Ss.prototype.isActive=function(){return!1},Ss.prototype.enable=function(){},Ss.prototype.disable=function(){};var eo=function(_){this._map=_};eo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},eo.prototype.mousemove=function(_){this._map.fire(new la(_.type,this._map,_))},eo.prototype.mousedown=function(){this._delayContextMenu=!0},eo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new la("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},eo.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new la(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},eo.prototype.isEnabled=function(){return!0},eo.prototype.isActive=function(){return!1},eo.prototype.enable=function(){},eo.prototype.disable=function(){};var Bl=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=S.clickTolerance||1};function yh(_,S){for(var x={},O=0;O<_.length;O++)x[_[O].identifier]=S[O];return x}Bl.prototype.isEnabled=function(){return!!this._enabled},Bl.prototype.isActive=function(){return!!this._active},Bl.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Bl.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Bl.prototype.mousedown=function(_,S){this.isEnabled()&&_.shiftKey&&_.button===0&&(ee.disableDrag(),this._startPos=this._lastPos=S,this._active=!0)},Bl.prototype.mousemoveWindow=function(_,S){if(this._active){var x=S;if(!(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)){var O=this._startPos;this._lastPos=x,this._box||(this._box=ee.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var k=Math.min(O.x,x.x),Z=Math.max(O.x,x.x),Q=Math.min(O.y,x.y),ge=Math.max(O.y,x.y);ee.setTransform(this._box,"translate("+k+"px,"+Q+"px)"),this._box.style.width=Z-k+"px",this._box.style.height=ge-Q+"px"}}},Bl.prototype.mouseupWindow=function(_,S){var x=this;if(this._active&&_.button===0){var O=this._startPos,k=S;if(this.reset(),ee.suppressClick(),O.x!==k.x||O.y!==k.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(Z){return Z.fitScreenCoordinates(O,k,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},Bl.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},Bl.prototype.blur=function(){this.reset()},Bl.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ee.remove(this._box),this._box=null),ee.enableDrag(),delete this._startPos,delete this._lastPos},Bl.prototype._fireEvent=function(_,S){return this._map.fire(new E.Event(_,{originalEvent:S}))};var Bh=function(_){this.reset(),this.numTouches=_.numTouches};Bh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Bh.prototype.touchstart=function(_,S,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),x.length===this.numTouches&&(this.centroid=function(O){for(var k=new E.Point(0,0),Z=0,Q=O;Z<Q.length;Z+=1)k._add(Q[Z]);return k.div(O.length)}(S),this.touches=yh(x,S)))},Bh.prototype.touchmove=function(_,S,x){if(!this.aborted&&this.centroid){var O=yh(x,S);for(var k in this.touches){var Z=O[k];(!Z||Z.dist(this.touches[k])>30)&&(this.aborted=!0)}}},Bh.prototype.touchend=function(_,S,x){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){var O=!this.aborted&&this.centroid;if(this.reset(),O)return O}};var qa=function(_){this.singleTap=new Bh(_),this.numTaps=_.numTaps,this.reset()};qa.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},qa.prototype.touchstart=function(_,S,x){this.singleTap.touchstart(_,S,x)},qa.prototype.touchmove=function(_,S,x){this.singleTap.touchmove(_,S,x)},qa.prototype.touchend=function(_,S,x){var O=this.singleTap.touchend(_,S,x);if(O){var k=_.timeStamp-this.lastTime<500,Z=!this.lastTap||this.lastTap.dist(O)<30;if(k&&Z||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}};var Ls=function(){this._zoomIn=new qa({numTouches:1,numTaps:2}),this._zoomOut=new qa({numTouches:2,numTaps:1}),this.reset()};Ls.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ls.prototype.touchstart=function(_,S,x){this._zoomIn.touchstart(_,S,x),this._zoomOut.touchstart(_,S,x)},Ls.prototype.touchmove=function(_,S,x){this._zoomIn.touchmove(_,S,x),this._zoomOut.touchmove(_,S,x)},Ls.prototype.touchend=function(_,S,x){var O=this,k=this._zoomIn.touchend(_,S,x),Z=this._zoomOut.touchend(_,S,x);return k?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(Q){return Q.easeTo({duration:300,zoom:Q.getZoom()+1,around:Q.unproject(k)},{originalEvent:_})}}):Z?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(Q){return Q.easeTo({duration:300,zoom:Q.getZoom()-1,around:Q.unproject(Z)},{originalEvent:_})}}):void 0},Ls.prototype.touchcancel=function(){this.reset()},Ls.prototype.enable=function(){this._enabled=!0},Ls.prototype.disable=function(){this._enabled=!1,this.reset()},Ls.prototype.isEnabled=function(){return this._enabled},Ls.prototype.isActive=function(){return this._active};var lf={0:1,2:2},Fi=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Fi.prototype.blur=function(){this.reset()},Fi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Fi.prototype._correctButton=function(_,S){return!1},Fi.prototype._move=function(_,S){return{}},Fi.prototype.mousedown=function(_,S){if(!this._lastPoint){var x=ee.mouseButton(_);this._correctButton(_,x)&&(this._lastPoint=S,this._eventButton=x)}},Fi.prototype.mousemoveWindow=function(_,S){var x=this._lastPoint;if(x){if(_.preventDefault(),function(O,k){var Z=lf[k];return O.buttons===void 0||(O.buttons&Z)!==Z}(_,this._eventButton))this.reset();else if(this._moved||!(S.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=S,this._move(x,S)}},Fi.prototype.mouseupWindow=function(_){this._lastPoint&&ee.mouseButton(_)===this._eventButton&&(this._moved&&ee.suppressClick(),this.reset())},Fi.prototype.enable=function(){this._enabled=!0},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var Ef=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.mousedown=function(x,O){_.prototype.mousedown.call(this,x,O),this._lastPoint&&(this._active=!0)},S.prototype._correctButton=function(x,O){return O===0&&!x.ctrlKey},S.prototype._move=function(x,O){return{around:O,panDelta:O.sub(x)}},S}(Fi),Md=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=.8*(O.x-x.x);if(k)return this._active=!0,{bearingDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Fi),_h=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=-.5*(O.y-x.y);if(k)return this._active=!0,{pitchDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Fi),Sf=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Sf.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new E.Point(0,0)},Sf.prototype.touchstart=function(_,S,x){return this._calculateTransform(_,S,x)},Sf.prototype.touchmove=function(_,S,x){if(this._active&&!(x.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,S,x)},Sf.prototype.touchend=function(_,S,x){this._calculateTransform(_,S,x),this._active&&x.length<this._minTouches&&this.reset()},Sf.prototype.touchcancel=function(){this.reset()},Sf.prototype._calculateTransform=function(_,S,x){x.length>0&&(this._active=!0);var O=yh(x,S),k=new E.Point(0,0),Z=new E.Point(0,0),Q=0;for(var ge in O){var Ve=O[ge],ht=this._touches[ge];ht&&(k._add(Ve),Z._add(Ve.sub(ht)),Q++,O[ge]=Ve)}if(this._touches=O,!(Q<this._minTouches)&&Z.mag()){var zt=Z.div(Q);if(this._sum._add(zt),!(this._sum.mag()<this._clickTolerance))return{around:k.div(Q),panDelta:zt}}},Sf.prototype.enable=function(){this._enabled=!0},Sf.prototype.disable=function(){this._enabled=!1,this.reset()},Sf.prototype.isEnabled=function(){return this._enabled},Sf.prototype.isActive=function(){return this._active};var cc=function(){this.reset()};function d0(_,S,x){for(var O=0;O<_.length;O++)if(_[O].identifier===x)return S[O]}function bh(_,S){return Math.log(_/S)/Math.LN2}cc.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},cc.prototype._start=function(_){},cc.prototype._move=function(_,S,x){return{}},cc.prototype.touchstart=function(_,S,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([S[0],S[1]]))},cc.prototype.touchmove=function(_,S,x){if(this._firstTwoTouches){_.preventDefault();var O=this._firstTwoTouches,k=O[1],Z=d0(x,S,O[0]),Q=d0(x,S,k);if(Z&&Q){var ge=this._aroundCenter?null:Z.add(Q).div(2);return this._move([Z,Q],ge,_)}}},cc.prototype.touchend=function(_,S,x){if(this._firstTwoTouches){var O=this._firstTwoTouches,k=O[1],Z=d0(x,S,O[0]),Q=d0(x,S,k);Z&&Q||(this._active&&ee.suppressClick(),this.reset())}},cc.prototype.touchcancel=function(){this.reset()},cc.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},cc.prototype.disable=function(){this._enabled=!1,this.reset()},cc.prototype.isEnabled=function(){return this._enabled},cc.prototype.isActive=function(){return this._active};var qu=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},S.prototype._start=function(x){this._startDistance=this._distance=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(bh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bh(this._distance,k),pinchAround:O}},S}(cc);function qf(_,S){return 180*_.angleWith(S)/Math.PI}var p0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},S.prototype._start=function(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qf(this._vector,k),pinchAround:O}},S.prototype._isBelowThreshold=function(x){this._minDiameter=Math.min(this._minDiameter,x.mag());var O=25/(Math.PI*this._minDiameter)*360,k=qf(x,this._startVector);return Math.abs(k)<O},S}(cc);function Rd(_){return Math.abs(_.y)>Math.abs(_.x)}var v0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},S.prototype._start=function(x){this._lastPoints=x,Rd(x[0].sub(x[1]))&&(this._valid=!1)},S.prototype._move=function(x,O,k){var Z=x[0].sub(this._lastPoints[0]),Q=x[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Z,Q,k.timeStamp),this._valid)return this._lastPoints=x,this._active=!0,{pitchDelta:(Z.y+Q.y)/2*-.5}},S.prototype.gestureBeginsVertically=function(x,O,k){if(this._valid!==void 0)return this._valid;var Z=x.mag()>=2,Q=O.mag()>=2;if(Z||Q){if(!Z||!Q)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;var ge=x.y>0==O.y>0;return Rd(x)&&Rd(O)&&ge}},S}(cc),rv={panStep:100,bearingStep:15,pitchStep:10},fc=function(){var _=rv;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function zc(_){return _*(2-_)}fc.prototype.blur=function(){this.reset()},fc.prototype.reset=function(){this._active=!1},fc.prototype.keydown=function(_){var S=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var x=0,O=0,k=0,Z=0,Q=0;switch(_.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:_.shiftKey?O=-1:(_.preventDefault(),Z=-1);break;case 39:_.shiftKey?O=1:(_.preventDefault(),Z=1);break;case 38:_.shiftKey?k=1:(_.preventDefault(),Q=-1);break;case 40:_.shiftKey?k=-1:(_.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(O=0,k=0),{cameraAnimation:function(ge){var Ve=ge.getZoom();ge.easeTo({duration:300,easeId:"keyboardHandler",easing:zc,zoom:x?Math.round(Ve)+x*(_.shiftKey?2:1):Ve,bearing:ge.getBearing()+O*S._bearingStep,pitch:ge.getPitch()+k*S._pitchStep,offset:[-Z*S._panStep,-Q*S._panStep],center:ge.getCenter()},{originalEvent:_})}}}},fc.prototype.enable=function(){this._enabled=!0},fc.prototype.disable=function(){this._enabled=!1,this.reset()},fc.prototype.isEnabled=function(){return this._enabled},fc.prototype.isActive=function(){return this._active},fc.prototype.disableRotation=function(){this._rotationDisabled=!0},fc.prototype.enableRotation=function(){this._rotationDisabled=!1};var wa=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._handler=S,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,E.bindAll(["_onTimeout"],this)};wa.prototype.setZoomRate=function(_){this._defaultZoomRate=_},wa.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},wa.prototype.isEnabled=function(){return!!this._enabled},wa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},wa.prototype.isZooming=function(){return!!this._zooming},wa.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},wa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wa.prototype.wheel=function(_){if(this.isEnabled()){var S=_.deltaMode===E.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,x=E.browser.now(),O=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,S!==0&&S%4.000244140625==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(O*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),_.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=_,this._delta-=S,this._active||this._start(_)),_.preventDefault()}},wa.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},wa.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var S=ee.mousePos(this._el,_);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},wa.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var S=this._map.transform;if(this._delta!==0){var x=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&O!==0&&(O=1/O);var k=typeof this._targetZoom=="number"?S.zoomScale(this._targetZoom):S.scale;this._targetZoom=Math.min(S.maxZoom,Math.max(S.minZoom,S.scaleZoom(k*O))),this._type==="wheel"&&(this._startZoom=S.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Z,Q=typeof this._targetZoom=="number"?this._targetZoom:S.zoom,ge=this._startZoom,Ve=this._easing,ht=!1;if(this._type==="wheel"&&ge&&Ve){var zt=Math.min((E.browser.now()-this._lastWheelEventTime)/200,1),Ht=Ve(zt);Z=E.number(ge,Q,Ht),zt<1?this._frameId||(this._frameId=!0):ht=!0}else Z=Q,ht=!0;return this._active=!0,ht&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ht,zoomDelta:Z-S.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},wa.prototype._smoothOutEasing=function(_){var S=E.ease;if(this._prevEase){var x=this._prevEase,O=(E.browser.now()-x.start)/x.duration,k=x.easing(O+.01)-x.easing(O),Z=.27/Math.sqrt(k*k+1e-4)*.01,Q=Math.sqrt(.0729-Z*Z);S=E.bezier(Z,Q,.25,1)}return this._prevEase={start:E.browser.now(),duration:_,easing:S},S},wa.prototype.blur=function(){this.reset()},wa.prototype.reset=function(){this._active=!1};var hc=function(_,S){this._clickZoom=_,this._tapZoom=S};hc.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},hc.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},hc.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},hc.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var uf=function(){this.reset()};uf.prototype.reset=function(){this._active=!1},uf.prototype.blur=function(){this.reset()},uf.prototype.dblclick=function(_,S){return _.preventDefault(),{cameraAnimation:function(x){x.easeTo({duration:300,zoom:x.getZoom()+(_.shiftKey?-1:1),around:x.unproject(S)},{originalEvent:_})}}},uf.prototype.enable=function(){this._enabled=!0},uf.prototype.disable=function(){this._enabled=!1,this.reset()},uf.prototype.isEnabled=function(){return this._enabled},uf.prototype.isActive=function(){return this._active};var Su=function(){this._tap=new qa({numTouches:1,numTaps:1}),this.reset()};Su.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Su.prototype.touchstart=function(_,S,x){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=S[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(_,S,x))},Su.prototype.touchmove=function(_,S,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;var O=S[0],k=O.y-this._swipePoint.y;return this._swipePoint=O,_.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(_,S,x)},Su.prototype.touchend=function(_,S,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(_,S,x)&&(this._tapTime=_.timeStamp)},Su.prototype.touchcancel=function(){this.reset()},Su.prototype.enable=function(){this._enabled=!0},Su.prototype.disable=function(){this._enabled=!1,this.reset()},Su.prototype.isEnabled=function(){return this._enabled},Su.prototype.isActive=function(){return this._active};var kh=function(_,S,x){this._el=_,this._mousePan=S,this._touchPan=x};kh.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},kh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},kh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},kh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Jl=function(_,S,x){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=S,this._mousePitch=x};Jl.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Jl.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Jl.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Jl.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Vu=function(_,S,x,O){this._el=_,this._touchZoom=S,this._touchRotate=x,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0};Vu.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Vu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Vu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Vu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Vu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Vu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ku=function(_){return _.zoom||_.drag||_.pitch||_.rotate},ap=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S}(E.Event);function No(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var To=function(_,S){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ri(_),this._bearingSnap=S.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(S),E.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[E.window.document,"mousemove",{capture:!0}],[E.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[E.window,"blur",void 0]];for(var O=0,k=this._listeners;O<k.length;O+=1){var Z=k[O],Q=Z[0];ee.addEventListener(Q,Z[1],Q===E.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};To.prototype.destroy=function(){for(var _=0,S=this._listeners;_<S.length;_+=1){var x=S[_],O=x[0];ee.removeEventListener(O,x[1],O===E.window.document?this.handleWindowEvent:this.handleEvent,x[2])}},To.prototype._addDefaultHandlers=function(_){var S=this._map,x=S.getCanvasContainer();this._add("mapEvent",new Ss(S,_));var O=S.boxZoom=new Bl(S,_);this._add("boxZoom",O);var k=new Ls,Z=new uf;S.doubleClickZoom=new hc(Z,k),this._add("tapZoom",k),this._add("clickZoom",Z);var Q=new Su;this._add("tapDragZoom",Q);var ge=S.touchPitch=new v0;this._add("touchPitch",ge);var Ve=new Md(_),ht=new _h(_);S.dragRotate=new Jl(_,Ve,ht),this._add("mouseRotate",Ve,["mousePitch"]),this._add("mousePitch",ht,["mouseRotate"]);var zt=new Ef(_),Ht=new Sf(_);S.dragPan=new kh(x,zt,Ht),this._add("mousePan",zt),this._add("touchPan",Ht,["touchZoom","touchRotate"]);var Zt=new p0,xn=new qu;S.touchZoomRotate=new Vu(x,xn,Zt,Q),this._add("touchRotate",Zt,["touchPan","touchZoom"]),this._add("touchZoom",xn,["touchPan","touchRotate"]);var vn=S.scrollZoom=new wa(S,this);this._add("scrollZoom",vn,["mousePan"]);var Un=S.keyboard=new fc;this._add("keyboard",Un),this._add("blockableMapEvent",new eo(S));for(var an=0,kn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];an<kn.length;an+=1){var nr=kn[an];_.interactive&&_[nr]&&S[nr].enable(_[nr])}},To.prototype._add=function(_,S,x){this._handlers.push({handlerName:_,handler:S,allowed:x}),this._handlersById[_]=S},To.prototype.stop=function(_){if(!this._updatingCamera){for(var S=0,x=this._handlers;S<x.length;S+=1)x[S].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},To.prototype.isActive=function(){for(var _=0,S=this._handlers;_<S.length;_+=1)if(S[_].handler.isActive())return!0;return!1},To.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},To.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},To.prototype.isMoving=function(){return!!Ku(this._eventsInProgress)||this.isZooming()},To.prototype._blockedByActive=function(_,S,x){for(var O in _)if(O!==x&&(!S||S.indexOf(O)<0))return!0;return!1},To.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},To.prototype._getMapTouches=function(_){for(var S=[],x=0,O=_;x<O.length;x+=1){var k=O[x];this._el.contains(k.target)&&S.push(k)}return S},To.prototype.handleEvent=function(_,S){this._updatingCamera=!0;for(var x=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},k={},Z={},Q=_.touches?this._getMapTouches(_.touches):void 0,ge=Q?ee.touchPos(this._el,Q):ee.mousePos(this._el,_),Ve=0,ht=this._handlers;Ve<ht.length;Ve+=1){var zt=ht[Ve],Ht=zt.handlerName,Zt=zt.handler,xn=zt.allowed;if(Zt.isEnabled()){var vn=void 0;this._blockedByActive(Z,xn,Ht)?Zt.reset():Zt[S||_.type]&&(vn=Zt[S||_.type](_,ge,Q),this.mergeHandlerResult(O,k,vn,Ht,x),vn&&vn.needsRenderFrame&&this._triggerRenderFrame()),(vn||Zt.isActive())&&(Z[Ht]=Zt)}}var Un={};for(var an in this._previousActiveHandlers)Z[an]||(Un[an]=x);this._previousActiveHandlers=Z,(Object.keys(Un).length||No(O))&&(this._changes.push([O,k,Un]),this._triggerRenderFrame()),(Object.keys(Z).length||No(O))&&this._map._stop(!0),this._updatingCamera=!1;var kn=O.cameraAnimation;kn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kn(this._map))},To.prototype.mergeHandlerResult=function(_,S,x,O,k){if(x){E.extend(_,x);var Z={handlerName:O,originalEvent:x.originalEvent||k};x.zoomDelta!==void 0&&(S.zoom=Z),x.panDelta!==void 0&&(S.drag=Z),x.pitchDelta!==void 0&&(S.pitch=Z),x.bearingDelta!==void 0&&(S.rotate=Z)}},To.prototype._applyChanges=function(){for(var _={},S={},x={},O=0,k=this._changes;O<k.length;O+=1){var Z=k[O],Q=Z[0],ge=Z[1],Ve=Z[2];Q.panDelta&&(_.panDelta=(_.panDelta||new E.Point(0,0))._add(Q.panDelta)),Q.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+Q.zoomDelta),Q.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+Q.bearingDelta),Q.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+Q.pitchDelta),Q.around!==void 0&&(_.around=Q.around),Q.pinchAround!==void 0&&(_.pinchAround=Q.pinchAround),Q.noInertia&&(_.noInertia=Q.noInertia),E.extend(S,ge),E.extend(x,Ve)}this._updateMapTransform(_,S,x),this._changes=[]},To.prototype._updateMapTransform=function(_,S,x){var O=this._map,k=O.transform;if(!No(_))return this._fireEvents(S,x,!0);var Z=_.panDelta,Q=_.zoomDelta,ge=_.bearingDelta,Ve=_.pitchDelta,ht=_.around,zt=_.pinchAround;zt!==void 0&&(ht=zt),O._stop(!0),ht=ht||O.transform.centerPoint;var Ht=k.pointLocation(Z?ht.sub(Z):ht);ge&&(k.bearing+=ge),Ve&&(k.pitch+=Ve),Q&&(k.zoom+=Q),k.setLocationAtPoint(Ht,ht),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(S,x,!0)},To.prototype._fireEvents=function(_,S,x){var O=this,k=Ku(this._eventsInProgress),Z=Ku(_),Q={};for(var ge in _)this._eventsInProgress[ge]||(Q[ge+"start"]=_[ge].originalEvent),this._eventsInProgress[ge]=_[ge];for(var Ve in!k&&Z&&this._fireEvent("movestart",Z.originalEvent),Q)this._fireEvent(Ve,Q[Ve]);for(var ht in Z&&this._fireEvent("move",Z.originalEvent),_)this._fireEvent(ht,_[ht].originalEvent);var zt,Ht={};for(var Zt in this._eventsInProgress){var xn=this._eventsInProgress[Zt],vn=xn.handlerName,Un=xn.originalEvent;this._handlersById[vn].isActive()||(delete this._eventsInProgress[Zt],Ht[Zt+"end"]=zt=S[vn]||Un)}for(var an in Ht)this._fireEvent(an,Ht[an]);var kn=Ku(this._eventsInProgress);if(x&&(k||Z)&&!kn){this._updatingCamera=!0;var nr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),mr=function(Rr){return Rr!==0&&-O._bearingSnap<Rr&&Rr<O._bearingSnap};nr?(mr(nr.bearing||this._map.getBearing())&&(nr.bearing=0),this._map.easeTo(nr,{originalEvent:zt})):(this._map.fire(new E.Event("moveend",{originalEvent:zt})),mr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},To.prototype._fireEvent=function(_,S){this._map.fire(new E.Event(_,S?{originalEvent:S}:{}))},To.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(S){delete _._frameId,_.handleEvent(new ap("renderFrame",{timeStamp:S})),_._applyChanges()})},To.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var eu=function(_){function S(x,O){_.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=O.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getCenter=function(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)},S.prototype.setCenter=function(x,O){return this.jumpTo({center:x},O)},S.prototype.panBy=function(x,O,k){return x=E.Point.convert(x).mult(-1),this.panTo(this.transform.center,E.extend({offset:x},O),k)},S.prototype.panTo=function(x,O,k){return this.easeTo(E.extend({center:x},O),k)},S.prototype.getZoom=function(){return this.transform.zoom},S.prototype.setZoom=function(x,O){return this.jumpTo({zoom:x},O),this},S.prototype.zoomTo=function(x,O,k){return this.easeTo(E.extend({zoom:x},O),k)},S.prototype.zoomIn=function(x,O){return this.zoomTo(this.getZoom()+1,x,O),this},S.prototype.zoomOut=function(x,O){return this.zoomTo(this.getZoom()-1,x,O),this},S.prototype.getBearing=function(){return this.transform.bearing},S.prototype.setBearing=function(x,O){return this.jumpTo({bearing:x},O),this},S.prototype.getPadding=function(){return this.transform.padding},S.prototype.setPadding=function(x,O){return this.jumpTo({padding:x},O),this},S.prototype.rotateTo=function(x,O,k){return this.easeTo(E.extend({bearing:x},O),k)},S.prototype.resetNorth=function(x,O){return this.rotateTo(0,E.extend({duration:1e3},x),O),this},S.prototype.resetNorthPitch=function(x,O){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},x),O),this},S.prototype.snapToNorth=function(x,O){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,O):this},S.prototype.getPitch=function(){return this.transform.pitch},S.prototype.setPitch=function(x,O){return this.jumpTo({pitch:x},O),this},S.prototype.cameraForBounds=function(x,O){x=E.LngLatBounds.convert(x);var k=O&&O.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),k,O)},S.prototype._cameraForBoxAndBearing=function(x,O,k,Z){var Q={top:0,bottom:0,right:0,left:0};if(typeof(Z=E.extend({padding:Q,offset:[0,0],maxZoom:this.transform.maxZoom},Z)).padding=="number"){var ge=Z.padding;Z.padding={top:ge,bottom:ge,right:ge,left:ge}}Z.padding=E.extend(Q,Z.padding);var Ve=this.transform,ht=Ve.padding,zt=Ve.project(E.LngLat.convert(x)),Ht=Ve.project(E.LngLat.convert(O)),Zt=zt.rotate(-k*Math.PI/180),xn=Ht.rotate(-k*Math.PI/180),vn=new E.Point(Math.max(Zt.x,xn.x),Math.max(Zt.y,xn.y)),Un=new E.Point(Math.min(Zt.x,xn.x),Math.min(Zt.y,xn.y)),an=vn.sub(Un),kn=(Ve.width-(ht.left+ht.right+Z.padding.left+Z.padding.right))/an.x,nr=(Ve.height-(ht.top+ht.bottom+Z.padding.top+Z.padding.bottom))/an.y;if(!(nr<0||kn<0)){var mr=Math.min(Ve.scaleZoom(Ve.scale*Math.min(kn,nr)),Z.maxZoom),Rr=typeof Z.offset.x=="number"?new E.Point(Z.offset.x,Z.offset.y):E.Point.convert(Z.offset),Ar=new E.Point((Z.padding.left-Z.padding.right)/2,(Z.padding.top-Z.padding.bottom)/2).rotate(k*Math.PI/180),zr=Rr.add(Ar).mult(Ve.scale/Ve.zoomScale(mr));return{center:Ve.unproject(zt.add(Ht).div(2).sub(zr)),zoom:mr,bearing:k}}E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},S.prototype.fitBounds=function(x,O,k){return this._fitInternal(this.cameraForBounds(x,O),O,k)},S.prototype.fitScreenCoordinates=function(x,O,k,Z,Q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.Point.convert(x)),this.transform.pointLocation(E.Point.convert(O)),k,Z),Z,Q)},S.prototype._fitInternal=function(x,O,k){return x?(delete(O=E.extend(x,O)).padding,O.linear?this.easeTo(O,k):this.flyTo(O,k)):this},S.prototype.jumpTo=function(x,O){this.stop();var k=this.transform,Z=!1,Q=!1,ge=!1;return"zoom"in x&&k.zoom!==+x.zoom&&(Z=!0,k.zoom=+x.zoom),x.center!==void 0&&(k.center=E.LngLat.convert(x.center)),"bearing"in x&&k.bearing!==+x.bearing&&(Q=!0,k.bearing=+x.bearing),"pitch"in x&&k.pitch!==+x.pitch&&(ge=!0,k.pitch=+x.pitch),x.padding==null||k.isPaddingEqual(x.padding)||(k.padding=x.padding),this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),Z&&this.fire(new E.Event("zoomstart",O)).fire(new E.Event("zoom",O)).fire(new E.Event("zoomend",O)),Q&&this.fire(new E.Event("rotatestart",O)).fire(new E.Event("rotate",O)).fire(new E.Event("rotateend",O)),ge&&this.fire(new E.Event("pitchstart",O)).fire(new E.Event("pitch",O)).fire(new E.Event("pitchend",O)),this.fire(new E.Event("moveend",O))},S.prototype.easeTo=function(x,O){var k=this;this._stop(!1,x.easeId),((x=E.extend({offset:[0,0],duration:500,easing:E.ease},x)).animate===!1||!x.essential&&E.browser.prefersReducedMotion)&&(x.duration=0);var Z=this.transform,Q=this.getZoom(),ge=this.getBearing(),Ve=this.getPitch(),ht=this.getPadding(),zt="zoom"in x?+x.zoom:Q,Ht="bearing"in x?this._normalizeBearing(x.bearing,ge):ge,Zt="pitch"in x?+x.pitch:Ve,xn="padding"in x?x.padding:Z.padding,vn=E.Point.convert(x.offset),Un=Z.centerPoint.add(vn),an=Z.pointLocation(Un),kn=E.LngLat.convert(x.center||an);this._normalizeCenter(kn);var nr,mr,Rr=Z.project(an),Ar=Z.project(kn).sub(Rr),zr=Z.zoomScale(zt-Q);x.around&&(nr=E.LngLat.convert(x.around),mr=Z.locationPoint(nr));var ni={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||zt!==Q,this._rotating=this._rotating||ge!==Ht,this._pitching=this._pitching||Zt!==Ve,this._padding=!Z.isPaddingEqual(xn),this._easeId=x.easeId,this._prepareEase(O,x.noMoveStart,ni),this._ease(function(zi){if(k._zooming&&(Z.zoom=E.number(Q,zt,zi)),k._rotating&&(Z.bearing=E.number(ge,Ht,zi)),k._pitching&&(Z.pitch=E.number(Ve,Zt,zi)),k._padding&&(Z.interpolatePadding(ht,xn,zi),Un=Z.centerPoint.add(vn)),nr)Z.setLocationAtPoint(nr,mr);else{var Li=Z.zoomScale(Z.zoom-Q),co=zt>Q?Math.min(2,zr):Math.max(.5,zr),Uo=Math.pow(co,1-zi),Zo=Z.unproject(Rr.add(Ar.mult(zi*Uo)).mult(Li));Z.setLocationAtPoint(Z.renderWorldCopies?Zo.wrap():Zo,Un)}k._fireMoveEvents(O)},function(zi){k._afterEase(O,zi)},x),this},S.prototype._prepareEase=function(x,O,k){k===void 0&&(k={}),this._moving=!0,O||k.moving||this.fire(new E.Event("movestart",x)),this._zooming&&!k.zooming&&this.fire(new E.Event("zoomstart",x)),this._rotating&&!k.rotating&&this.fire(new E.Event("rotatestart",x)),this._pitching&&!k.pitching&&this.fire(new E.Event("pitchstart",x))},S.prototype._fireMoveEvents=function(x){this.fire(new E.Event("move",x)),this._zooming&&this.fire(new E.Event("zoom",x)),this._rotating&&this.fire(new E.Event("rotate",x)),this._pitching&&this.fire(new E.Event("pitch",x))},S.prototype._afterEase=function(x,O){if(!this._easeId||!O||this._easeId!==O){delete this._easeId;var k=this._zooming,Z=this._rotating,Q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new E.Event("zoomend",x)),Z&&this.fire(new E.Event("rotateend",x)),Q&&this.fire(new E.Event("pitchend",x)),this.fire(new E.Event("moveend",x))}},S.prototype.flyTo=function(x,O){var k=this;if(!x.essential&&E.browser.prefersReducedMotion){var Z=E.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Z,O)}this.stop(),x=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},x);var Q=this.transform,ge=this.getZoom(),Ve=this.getBearing(),ht=this.getPitch(),zt=this.getPadding(),Ht="zoom"in x?E.clamp(+x.zoom,Q.minZoom,Q.maxZoom):ge,Zt="bearing"in x?this._normalizeBearing(x.bearing,Ve):Ve,xn="pitch"in x?+x.pitch:ht,vn="padding"in x?x.padding:Q.padding,Un=Q.zoomScale(Ht-ge),an=E.Point.convert(x.offset),kn=Q.centerPoint.add(an),nr=Q.pointLocation(kn),mr=E.LngLat.convert(x.center||nr);this._normalizeCenter(mr);var Rr=Q.project(nr),Ar=Q.project(mr).sub(Rr),zr=x.curve,ni=Math.max(Q.width,Q.height),zi=ni/Un,Li=Ar.mag();if("minZoom"in x){var co=E.clamp(Math.min(x.minZoom,ge,Ht),Q.minZoom,Q.maxZoom),Uo=ni/Q.zoomScale(co-ge);zr=Math.sqrt(Uo/Li*2)}var Zo=zr*zr;function Xo(aa){var Fo=(zi*zi-ni*ni+(aa?-1:1)*Zo*Zo*Li*Li)/(2*(aa?zi:ni)*Zo*Li);return Math.log(Math.sqrt(Fo*Fo+1)-Fo)}function cs(aa){return(Math.exp(aa)-Math.exp(-aa))/2}function Pr(aa){return(Math.exp(aa)+Math.exp(-aa))/2}var Qt=Xo(0),da=function(aa){return Pr(Qt)/Pr(Qt+zr*aa)},ha=function(aa){return ni*((Pr(Qt)*(cs(Fo=Qt+zr*aa)/Pr(Fo))-cs(Qt))/Zo)/Li;var Fo},qo=(Xo(1)-Qt)/zr;if(Math.abs(Li)<1e-6||!isFinite(qo)){if(Math.abs(ni-zi)<1e-6)return this.easeTo(x,O);var _a=zi<ni?-1:1;qo=Math.abs(Math.log(zi/ni))/zr,ha=function(){return 0},da=function(aa){return Math.exp(_a*zr*aa)}}return x.duration="duration"in x?+x.duration:1e3*qo/("screenSpeed"in x?+x.screenSpeed/zr:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=Ve!==Zt,this._pitching=xn!==ht,this._padding=!Q.isPaddingEqual(vn),this._prepareEase(O,!1),this._ease(function(aa){var Fo=aa*qo,pu=1/da(Fo);Q.zoom=aa===1?Ht:ge+Q.scaleZoom(pu),k._rotating&&(Q.bearing=E.number(Ve,Zt,aa)),k._pitching&&(Q.pitch=E.number(ht,xn,aa)),k._padding&&(Q.interpolatePadding(zt,vn,aa),kn=Q.centerPoint.add(an));var Cl=aa===1?mr:Q.unproject(Rr.add(Ar.mult(ha(Fo))).mult(pu));Q.setLocationAtPoint(Q.renderWorldCopies?Cl.wrap():Cl,kn),k._fireMoveEvents(O)},function(){return k._afterEase(O)},x),this},S.prototype.isEasing=function(){return!!this._easeFrameId},S.prototype.stop=function(){return this._stop()},S.prototype._stop=function(x,O){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,O)}if(!x){var Z=this.handlers;Z&&Z.stop(!1)}return this},S.prototype._ease=function(x,O,k){k.animate===!1||k.duration===0?(x(1),O()):(this._easeStart=E.browser.now(),this._easeOptions=k,this._onEaseFrame=x,this._onEaseEnd=O,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},S.prototype._renderFrameCallback=function(){var x=Math.min((E.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},S.prototype._normalizeBearing=function(x,O){x=E.wrap(x,-180,180);var k=Math.abs(x-O);return Math.abs(x-360-O)<k&&(x-=360),Math.abs(x+360-O)<k&&(x+=360),x},S.prototype._normalizeCenter=function(x){var O=this.transform;if(O.renderWorldCopies&&!O.lngRange){var k=x.lng-O.center.lng;x.lng+=k>180?-360:k<-180?360:0}},S}(E.Evented),Qu=function(_){_===void 0&&(_={}),this.options=_,E.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Qu.prototype.getDefaultPosition=function(){return"bottom-right"},Qu.prototype.onAdd=function(_){var S=this.options&&this.options.compact;return this._map=_,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ee.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ee.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),S&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),S===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qu.prototype.onRemove=function(){ee.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qu.prototype._setElementTitle=function(_,S){var x=this._map._getUIString("AttributionControl."+S);_.title=x,_.setAttribute("aria-label",x)},Qu.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Qu.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var S=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||E.config.ACCESS_TOKEN}];if(_){var x=S.reduce(function(O,k,Z){return k.value&&(O+=k.key+"="+k.value+(Z<S.length-1?"&":"")),O},"?");_.href=E.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},Qu.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Qu.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(ge){return typeof ge!="string"?"":ge})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}var x=this._map.style.sourceCaches;for(var O in x){var k=x[O];if(k.used){var Z=k.getSource();Z.attribution&&_.indexOf(Z.attribution)<0&&_.push(Z.attribution)}}_.sort(function(ge,Ve){return ge.length-Ve.length});var Q=(_=_.filter(function(ge,Ve){for(var ht=Ve+1;ht<_.length;ht++)if(_[ht].indexOf(ge)>=0)return!1;return!0})).join(" | ");Q!==this._attribHTML&&(this._attribHTML=Q,_.length?(this._innerContainer.innerHTML=Q,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ju=function(){E.bindAll(["_updateLogo"],this),E.bindAll(["_updateCompact"],this)};Ju.prototype.onAdd=function(_){this._map=_,this._container=ee.create("div","mapboxgl-ctrl");var S=ee.create("a","mapboxgl-ctrl-logo");return S.target="_blank",S.rel="noopener nofollow",S.href="https://www.mapbox.com/",S.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),S.setAttribute("rel","noopener nofollow"),this._container.appendChild(S),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ju.prototype.onRemove=function(){ee.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ju.prototype.getDefaultPosition=function(){return"bottom-left"},Ju.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ju.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var S in _)if(_[S].getSource().mapbox_logo)return!0;return!1}},Ju.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var S=_[0];this._map.getCanvasContainer().offsetWidth<250?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact")}};var vl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};vl.prototype.add=function(_){var S=++this._id;return this._queue.push({callback:_,id:S,cancelled:!1}),S},vl.prototype.remove=function(_){for(var S=this._currentlyRunning,x=0,O=S?this._queue.concat(S):this._queue;x<O.length;x+=1){var k=O[x];if(k.id===_)return void(k.cancelled=!0)}},vl.prototype.run=function(_){_===void 0&&(_=0);var S=this._currentlyRunning=this._queue;this._queue=[];for(var x=0,O=S;x<O.length;x+=1){var k=O[x];if(!k.cancelled&&(k.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},vl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ec={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Kf=E.window.HTMLImageElement,Pd=E.window.HTMLElement,Cs=E.window.ImageBitmap,wu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},m0=function(_){function S(O){var k=this;if((O=E.extend({},wu,O)).minZoom!=null&&O.maxZoom!=null&&O.minZoom>O.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(O.minPitch!=null&&O.maxPitch!=null&&O.minPitch>O.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(O.minPitch!=null&&O.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(O.maxPitch!=null&&O.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Z=new La(O.minZoom,O.maxZoom,O.minPitch,O.maxPitch,O.renderWorldCopies);if(_.call(this,Z,O),this._interactive=O.interactive,this._maxTileCacheSize=O.maxTileCacheSize,this._failIfMajorPerformanceCaveat=O.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=O.preserveDrawingBuffer,this._antialias=O.antialias,this._trackResize=O.trackResize,this._bearingSnap=O.bearingSnap,this._refreshExpiredTiles=O.refreshExpiredTiles,this._fadeDuration=O.fadeDuration,this._crossSourceCollisions=O.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=O.collectResourceTiming,this._renderTaskQueue=new vl,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},Ec,O.locale),this._clickTolerance=O.clickTolerance,this._requestManager=new E.RequestManager(O.transformRequest,O.accessToken),typeof O.container=="string"){if(this._container=E.window.document.getElementById(O.container),!this._container)throw new Error("Container '"+O.container+"' not found.")}else{if(!(O.container instanceof Pd))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=O.container}if(O.maxBounds&&this.setMaxBounds(O.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return k._update(!1)}),this.on("moveend",function(){return k._update(!1)}),this.on("zoom",function(){return k._update(!0)}),E.window!==void 0&&(E.window.addEventListener("online",this._onWindowOnline,!1),E.window.addEventListener("resize",this._onWindowResize,!1),E.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new To(this,O),this._hash=O.hash&&new Ge(typeof O.hash=="string"&&O.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch}),O.bounds&&(this.resize(),this.fitBounds(O.bounds,E.extend({},O.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=O.localIdeographFontFamily,O.style&&this.setStyle(O.style,{localIdeographFontFamily:O.localIdeographFontFamily}),O.attributionControl&&this.addControl(new Qu({customAttribution:O.customAttribution})),this.addControl(new Ju,O.logoPosition),this.on("style.load",function(){k.transform.unmodified&&k.jumpTo(k.style.stylesheet)}),this.on("data",function(Q){k._update(Q.dataType==="style"),k.fire(new E.Event(Q.dataType+"data",Q))}),this.on("dataloading",function(Q){k.fire(new E.Event(Q.dataType+"dataloading",Q))})}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return S.prototype._getMapId=function(){return this._mapId},S.prototype.addControl=function(O,k){if(k===void 0&&(k=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=O.onAdd(this);this._controls.push(O);var Q=this._controlPositions[k];return k.indexOf("bottom")!==-1?Q.insertBefore(Z,Q.firstChild):Q.appendChild(Z),this},S.prototype.removeControl=function(O){if(!O||!O.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var k=this._controls.indexOf(O);return k>-1&&this._controls.splice(k,1),O.onRemove(this),this},S.prototype.hasControl=function(O){return this._controls.indexOf(O)>-1},S.prototype.resize=function(O){var k=this._containerDimensions(),Z=k[0],Q=k[1];if(Z===this.transform.width&&Q===this.transform.height)return this;this._resizeCanvas(Z,Q),this.transform.resize(Z,Q),this.painter.resize(Z,Q);var ge=!this._moving;return ge&&this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),this.fire(new E.Event("resize",O)),ge&&this.fire(new E.Event("moveend",O)),this},S.prototype.getBounds=function(){return this.transform.getBounds()},S.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},S.prototype.setMaxBounds=function(O){return this.transform.setMaxBounds(E.LngLatBounds.convert(O)),this._update()},S.prototype.setMinZoom=function(O){if((O=O==null?-2:O)>=-2&&O<=this.transform.maxZoom)return this.transform.minZoom=O,this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},S.prototype.getMinZoom=function(){return this.transform.minZoom},S.prototype.setMaxZoom=function(O){if((O=O==null?22:O)>=this.transform.minZoom)return this.transform.maxZoom=O,this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")},S.prototype.getMaxZoom=function(){return this.transform.maxZoom},S.prototype.setMinPitch=function(O){if((O=O==null?0:O)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.minPitch=O,this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},S.prototype.getMinPitch=function(){return this.transform.minPitch},S.prototype.setMaxPitch=function(O){if((O=O==null?60:O)>60)throw new Error("maxPitch must be less than or equal to 60");if(O>=this.transform.minPitch)return this.transform.maxPitch=O,this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")},S.prototype.getMaxPitch=function(){return this.transform.maxPitch},S.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},S.prototype.setRenderWorldCopies=function(O){return this.transform.renderWorldCopies=O,this._update()},S.prototype.project=function(O){return this.transform.locationPoint(E.LngLat.convert(O))},S.prototype.unproject=function(O){return this.transform.pointLocation(E.Point.convert(O))},S.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},S.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},S.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},S.prototype._createDelegatedListener=function(O,k,Z){var Q,ge=this;if(O==="mouseenter"||O==="mouseover"){var Ve=!1;return{layer:k,listener:Z,delegates:{mousemove:function(zt){var Ht=ge.getLayer(k)?ge.queryRenderedFeatures(zt.point,{layers:[k]}):[];Ht.length?Ve||(Ve=!0,Z.call(ge,new la(O,ge,zt.originalEvent,{features:Ht}))):Ve=!1},mouseout:function(){Ve=!1}}}}if(O==="mouseleave"||O==="mouseout"){var ht=!1;return{layer:k,listener:Z,delegates:{mousemove:function(zt){(ge.getLayer(k)?ge.queryRenderedFeatures(zt.point,{layers:[k]}):[]).length?ht=!0:ht&&(ht=!1,Z.call(ge,new la(O,ge,zt.originalEvent)))},mouseout:function(zt){ht&&(ht=!1,Z.call(ge,new la(O,ge,zt.originalEvent)))}}}}return{layer:k,listener:Z,delegates:(Q={},Q[O]=function(zt){var Ht=ge.getLayer(k)?ge.queryRenderedFeatures(zt.point,{layers:[k]}):[];Ht.length&&(zt.features=Ht,Z.call(ge,zt),delete zt.features)},Q)}},S.prototype.on=function(O,k,Z){if(Z===void 0)return _.prototype.on.call(this,O,k);var Q=this._createDelegatedListener(O,k,Z);for(var ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(Q),Q.delegates)this.on(ge,Q.delegates[ge]);return this},S.prototype.once=function(O,k,Z){if(Z===void 0)return _.prototype.once.call(this,O,k);var Q=this._createDelegatedListener(O,k,Z);for(var ge in Q.delegates)this.once(ge,Q.delegates[ge]);return this},S.prototype.off=function(O,k,Z){var Q=this;return Z===void 0?_.prototype.off.call(this,O,k):(this._delegatedListeners&&this._delegatedListeners[O]&&function(ge){for(var Ve=ge[O],ht=0;ht<Ve.length;ht++){var zt=Ve[ht];if(zt.layer===k&&zt.listener===Z){for(var Ht in zt.delegates)Q.off(Ht,zt.delegates[Ht]);return Ve.splice(ht,1),Q}}}(this._delegatedListeners),this)},S.prototype.queryRenderedFeatures=function(O,k){if(!this.style)return[];var Z;if(k!==void 0||O===void 0||O instanceof E.Point||Array.isArray(O)||(k=O,O=void 0),k=k||{},(O=O||[[0,0],[this.transform.width,this.transform.height]])instanceof E.Point||typeof O[0]=="number")Z=[E.Point.convert(O)];else{var Q=E.Point.convert(O[0]),ge=E.Point.convert(O[1]);Z=[Q,new E.Point(ge.x,Q.y),ge,new E.Point(Q.x,ge.y),Q]}return this.style.queryRenderedFeatures(Z,k,this.transform)},S.prototype.querySourceFeatures=function(O,k){return this.style.querySourceFeatures(O,k)},S.prototype.setStyle=function(O,k){return(k=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},k)).diff!==!1&&k.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,k),this):(this._localIdeographFontFamily=k.localIdeographFontFamily,this._updateStyle(O,k))},S.prototype._getUIString=function(O){var k=this._locale[O];if(k==null)throw new Error("Missing UI string '"+O+"'");return k},S.prototype._updateStyle=function(O,k){return this.style&&(this.style.setEventedParent(null),this.style._remove()),O?(this.style=new fu(this,k||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O):this.style.loadJSON(O),this):(delete this.style,this)},S.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new fu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},S.prototype._diffStyle=function(O,k){var Z=this;if(typeof O=="string"){var Q=this._requestManager.normalizeStyleURL(O),ge=this._requestManager.transformRequest(Q,E.ResourceType.Style);E.getJSON(ge,function(Ve,ht){Ve?Z.fire(new E.ErrorEvent(Ve)):ht&&Z._updateDiff(ht,k)})}else typeof O=="object"&&this._updateDiff(O,k)},S.prototype._updateDiff=function(O,k){try{this.style.setState(O)&&this._update(!0)}catch(Z){E.warnOnce("Unable to perform style diff: "+(Z.message||Z.error||Z)+".  Rebuilding the style from scratch."),this._updateStyle(O,k)}},S.prototype.getStyle=function(){if(this.style)return this.style.serialize()},S.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")},S.prototype.addSource=function(O,k){return this._lazyInitEmptyStyle(),this.style.addSource(O,k),this._update(!0)},S.prototype.isSourceLoaded=function(O){var k=this.style&&this.style.sourceCaches[O];if(k!==void 0)return k.loaded();this.fire(new E.ErrorEvent(new Error("There is no source with ID '"+O+"'")))},S.prototype.areTilesLoaded=function(){var O=this.style&&this.style.sourceCaches;for(var k in O){var Z=O[k]._tiles;for(var Q in Z){var ge=Z[Q];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}}return!0},S.prototype.addSourceType=function(O,k,Z){return this._lazyInitEmptyStyle(),this.style.addSourceType(O,k,Z)},S.prototype.removeSource=function(O){return this.style.removeSource(O),this._update(!0)},S.prototype.getSource=function(O){return this.style.getSource(O)},S.prototype.addImage=function(O,k,Z){Z===void 0&&(Z={});var Q=Z.pixelRatio;Q===void 0&&(Q=1);var ge=Z.sdf;ge===void 0&&(ge=!1);var Ve=Z.stretchX,ht=Z.stretchY,zt=Z.content;if(this._lazyInitEmptyStyle(),k instanceof Kf||Cs&&k instanceof Cs){var Ht=E.browser.getImageData(k);this.style.addImage(O,{data:new E.RGBAImage({width:Ht.width,height:Ht.height},Ht.data),pixelRatio:Q,stretchX:Ve,stretchY:ht,content:zt,sdf:ge,version:0})}else{if(k.width===void 0||k.height===void 0)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Zt=k;this.style.addImage(O,{data:new E.RGBAImage({width:k.width,height:k.height},new Uint8Array(k.data)),pixelRatio:Q,stretchX:Ve,stretchY:ht,content:zt,sdf:ge,version:0,userImage:Zt}),Zt.onAdd&&Zt.onAdd(this,O)}},S.prototype.updateImage=function(O,k){var Z=this.style.getImage(O);if(!Z)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Q=k instanceof Kf||Cs&&k instanceof Cs?E.browser.getImageData(k):k,ge=Q.width,Ve=Q.height,ht=Q.data;return ge===void 0||Ve===void 0?this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ge!==Z.data.width||Ve!==Z.data.height?this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Z.data.replace(ht,!(k instanceof Kf||Cs&&k instanceof Cs)),void this.style.updateImage(O,Z))},S.prototype.hasImage=function(O){return O?!!this.style.getImage(O):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)},S.prototype.removeImage=function(O){this.style.removeImage(O)},S.prototype.loadImage=function(O,k){E.getImage(this._requestManager.transformRequest(O,E.ResourceType.Image),k)},S.prototype.listImages=function(){return this.style.listImages()},S.prototype.addLayer=function(O,k){return this._lazyInitEmptyStyle(),this.style.addLayer(O,k),this._update(!0)},S.prototype.moveLayer=function(O,k){return this.style.moveLayer(O,k),this._update(!0)},S.prototype.removeLayer=function(O){return this.style.removeLayer(O),this._update(!0)},S.prototype.getLayer=function(O){return this.style.getLayer(O)},S.prototype.setLayerZoomRange=function(O,k,Z){return this.style.setLayerZoomRange(O,k,Z),this._update(!0)},S.prototype.setFilter=function(O,k,Z){return Z===void 0&&(Z={}),this.style.setFilter(O,k,Z),this._update(!0)},S.prototype.getFilter=function(O){return this.style.getFilter(O)},S.prototype.setPaintProperty=function(O,k,Z,Q){return Q===void 0&&(Q={}),this.style.setPaintProperty(O,k,Z,Q),this._update(!0)},S.prototype.getPaintProperty=function(O,k){return this.style.getPaintProperty(O,k)},S.prototype.setLayoutProperty=function(O,k,Z,Q){return Q===void 0&&(Q={}),this.style.setLayoutProperty(O,k,Z,Q),this._update(!0)},S.prototype.getLayoutProperty=function(O,k){return this.style.getLayoutProperty(O,k)},S.prototype.setLight=function(O,k){return k===void 0&&(k={}),this._lazyInitEmptyStyle(),this.style.setLight(O,k),this._update(!0)},S.prototype.getLight=function(){return this.style.getLight()},S.prototype.setFeatureState=function(O,k){return this.style.setFeatureState(O,k),this._update()},S.prototype.removeFeatureState=function(O,k){return this.style.removeFeatureState(O,k),this._update()},S.prototype.getFeatureState=function(O){return this.style.getFeatureState(O)},S.prototype.getContainer=function(){return this._container},S.prototype.getCanvasContainer=function(){return this._canvasContainer},S.prototype.getCanvas=function(){return this._canvas},S.prototype._containerDimensions=function(){var O=0,k=0;return this._container&&(O=this._container.clientWidth||400,k=this._container.clientHeight||300),[O,k]},S.prototype._detectMissingCSS=function(){E.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&E.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},S.prototype._setupContainer=function(){var O=this._container;O.classList.add("mapboxgl-map"),(this._missingCSSCanary=ee.create("div","mapboxgl-canary",O)).style.visibility="hidden",this._detectMissingCSS();var k=this._canvasContainer=ee.create("div","mapboxgl-canvas-container",O);this._interactive&&k.classList.add("mapboxgl-interactive"),this._canvas=ee.create("canvas","mapboxgl-canvas",k),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Z=this._containerDimensions();this._resizeCanvas(Z[0],Z[1]);var Q=this._controlContainer=ee.create("div","mapboxgl-control-container",O),ge=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ve){ge[Ve]=ee.create("div","mapboxgl-ctrl-"+Ve,Q)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},S.prototype._resizeCanvas=function(O,k){var Z=E.browser.devicePixelRatio||1;this._canvas.width=Z*O,this._canvas.height=Z*k,this._canvas.style.width=O+"px",this._canvas.style.height=k+"px"},S.prototype._setupPainter=function(){var O=E.extend({},de.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),k=this._canvas.getContext("webgl",O)||this._canvas.getContext("experimental-webgl",O);k?(this.painter=new Ks(k,this.transform),E.webpSupported.testSupport(k)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))},S.prototype._contextLost=function(O){O.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:O}))},S.prototype._contextRestored=function(O){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:O}))},S.prototype._onMapScroll=function(O){if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},S.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},S.prototype._update=function(O){return this.style?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this},S.prototype._requestRenderFrame=function(O){return this._update(),this._renderTaskQueue.add(O)},S.prototype._cancelRenderFrame=function(O){this._renderTaskQueue.remove(O)},S.prototype._render=function(O){var k,Z=this,Q=0,ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(k=ge.createQueryEXT(),ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,k),Q=E.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),!this._removed){var Ve=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ht=this.transform.zoom,zt=E.browser.now();this.style.zoomHistory.update(ht,zt);var Ht=new E.EvaluationParameters(ht,{now:zt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Zt=Ht.crossFadingFactor();Zt===1&&Zt===this._crossFadingFactor||(Ve=!0,this._crossFadingFactor=Zt),this.style.update(Ht)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||Ve)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var xn=E.browser.now()-Q;ge.endQueryEXT(ge.TIME_ELAPSED_EXT,k),setTimeout(function(){var an=ge.getQueryObjectEXT(k,ge.QUERY_RESULT_EXT)/1e6;ge.deleteQueryEXT(k),Z.fire(new E.Event("gpu-timing-frame",{cpuTime:xn,gpuTime:an}))},50)}if(this.listens("gpu-timing-layer")){var vn=this.painter.collectGpuTimers();setTimeout(function(){var an=Z.painter.queryGpuTimers(vn);Z.fire(new E.Event("gpu-timing-layer",{layerTimes:an}))},50)}var Un=this._sourcesDirty||this._styleDirty||this._placementDirty;return Un||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||Un||(this._fullyLoaded=!0),this}},S.prototype.remove=function(){this._hash&&this._hash.remove();for(var O=0,k=this._controls;O<k.length;O+=1)k[O].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),E.window!==void 0&&(E.window.removeEventListener("resize",this._onWindowResize,!1),E.window.removeEventListener("orientationchange",this._onWindowResize,!1),E.window.removeEventListener("online",this._onWindowOnline,!1));var Z=this.painter.context.gl.getExtension("WEBGL_lose_context");Z&&Z.loseContext(),zh(this._canvasContainer),zh(this._controlContainer),zh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new E.Event("remove"))},S.prototype.triggerRepaint=function(){var O=this;this.style&&!this._frame&&(this._frame=E.browser.frame(function(k){O._frame=null,O._render(k)}))},S.prototype._onWindowOnline=function(){this._update()},S.prototype._onWindowResize=function(O){this._trackResize&&this.resize({originalEvent:O})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(O){this._showPadding!==O&&(this._showPadding=O,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(O){this._vertices=O,this._update()},S.prototype._setCacheLimits=function(O,k){E.setCacheLimits(O,k)},x.version.get=function(){return E.version},Object.defineProperties(S.prototype,x),S}(eu);function zh(_){_.parentNode&&_.parentNode.removeChild(_)}var sp={showCompass:!0,showZoom:!0,visualizePitch:!1},xh=function(_){var S=this;this.options=E.extend({},sp,_),this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(x){return S._map.zoomIn({},{originalEvent:x})}),ee.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(x){return S._map.zoomOut({},{originalEvent:x})}),ee.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(x){S.options.visualizePitch?S._map.resetNorthPitch({},{originalEvent:x}):S._map.resetNorth({},{originalEvent:x})}),this._compassIcon=ee.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};xh.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),S=_===this._map.getMaxZoom(),x=_===this._map.getMinZoom();this._zoomInButton.disabled=S,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",S.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},xh.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},xh.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ec(this._map,this._compass,this.options.visualizePitch)),this._container},xh.prototype.onRemove=function(){ee.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},xh.prototype._createButton=function(_,S){var x=ee.create("button",_,this._container);return x.type="button",x.addEventListener("click",S),x},xh.prototype._setButtonTitle=function(_,S){var x=this._map._getUIString("NavigationControl."+S);_.title=x,_.setAttribute("aria-label",x)};var ec=function(_,S,x){x===void 0&&(x=!1),this._clickTolerance=10,this.element=S,this.mouseRotate=new Md({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,x&&(this.mousePitch=new _h({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ee.addEventListener(S,"mousedown",this.mousedown),ee.addEventListener(S,"touchstart",this.touchstart,{passive:!1}),ee.addEventListener(S,"touchmove",this.touchmove),ee.addEventListener(S,"touchend",this.touchend),ee.addEventListener(S,"touchcancel",this.reset)};function lp(_,S,x){if(_=new E.LngLat(_.lng,_.lat),S){var O=new E.LngLat(_.lng-360,_.lat),k=new E.LngLat(_.lng+360,_.lat),Z=x.locationPoint(_).distSqr(S);x.locationPoint(O).distSqr(S)<Z?_=O:x.locationPoint(k).distSqr(S)<Z&&(_=k)}for(;Math.abs(_.lng-x.center.lng)>180;){var Q=x.locationPoint(_);if(Q.x>=0&&Q.y>=0&&Q.x<=x.width&&Q.y<=x.height)break;_.lng>x.center.lng?_.lng-=360:_.lng+=360}return _}ec.prototype.down=function(_,S){this.mouseRotate.mousedown(_,S),this.mousePitch&&this.mousePitch.mousedown(_,S),ee.disableDrag()},ec.prototype.move=function(_,S){var x=this.map,O=this.mouseRotate.mousemoveWindow(_,S);if(O&&O.bearingDelta&&x.setBearing(x.getBearing()+O.bearingDelta),this.mousePitch){var k=this.mousePitch.mousemoveWindow(_,S);k&&k.pitchDelta&&x.setPitch(x.getPitch()+k.pitchDelta)}},ec.prototype.off=function(){var _=this.element;ee.removeEventListener(_,"mousedown",this.mousedown),ee.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),ee.removeEventListener(_,"touchmove",this.touchmove),ee.removeEventListener(_,"touchend",this.touchend),ee.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},ec.prototype.offTemp=function(){ee.enableDrag(),ee.removeEventListener(E.window,"mousemove",this.mousemove),ee.removeEventListener(E.window,"mouseup",this.mouseup)},ec.prototype.mousedown=function(_){this.down(E.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),ee.mousePos(this.element,_)),ee.addEventListener(E.window,"mousemove",this.mousemove),ee.addEventListener(E.window,"mouseup",this.mouseup)},ec.prototype.mousemove=function(_){this.move(_,ee.mousePos(this.element,_))},ec.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},ec.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ee.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},ec.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=ee.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},ec.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ec.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Sc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hp(_,S,x){var O=_.classList;for(var k in Sc)O.remove("mapboxgl-"+x+"-anchor-"+k);O.add("mapboxgl-"+x+"-anchor-"+S)}var Uc,Id=function(_){function S(x,O){if(_.call(this),(x instanceof E.window.HTMLElement||O)&&(x=E.extend({element:x},O)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=E.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=ee.create("div"),this._element.setAttribute("aria-label","Map marker");var k=ee.createNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height","41px"),k.setAttributeNS(null,"width","27px"),k.setAttributeNS(null,"viewBox","0 0 27 41");var Z=ee.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"stroke","none"),Z.setAttributeNS(null,"stroke-width","1"),Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"fill-rule","evenodd");var Q=ee.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill-rule","nonzero");var ge=ee.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");for(var Ve=0,ht=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ve<ht.length;Ve+=1){var zt=ht[Ve],Ht=ee.createNS("http://www.w3.org/2000/svg","ellipse");Ht.setAttributeNS(null,"opacity","0.04"),Ht.setAttributeNS(null,"cx","10.5"),Ht.setAttributeNS(null,"cy","5.80029008"),Ht.setAttributeNS(null,"rx",zt.rx),Ht.setAttributeNS(null,"ry",zt.ry),ge.appendChild(Ht)}var Zt=ee.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"fill",this._color);var xn=ee.createNS("http://www.w3.org/2000/svg","path");xn.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zt.appendChild(xn);var vn=ee.createNS("http://www.w3.org/2000/svg","g");vn.setAttributeNS(null,"opacity","0.25"),vn.setAttributeNS(null,"fill","#000000");var Un=ee.createNS("http://www.w3.org/2000/svg","path");Un.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),vn.appendChild(Un);var an=ee.createNS("http://www.w3.org/2000/svg","g");an.setAttributeNS(null,"transform","translate(6.0, 7.0)"),an.setAttributeNS(null,"fill","#FFFFFF");var kn=ee.createNS("http://www.w3.org/2000/svg","g");kn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var nr=ee.createNS("http://www.w3.org/2000/svg","circle");nr.setAttributeNS(null,"fill","#000000"),nr.setAttributeNS(null,"opacity","0.25"),nr.setAttributeNS(null,"cx","5.5"),nr.setAttributeNS(null,"cy","5.5"),nr.setAttributeNS(null,"r","5.4999962");var mr=ee.createNS("http://www.w3.org/2000/svg","circle");mr.setAttributeNS(null,"fill","#FFFFFF"),mr.setAttributeNS(null,"cx","5.5"),mr.setAttributeNS(null,"cy","5.5"),mr.setAttributeNS(null,"r","5.4999962"),kn.appendChild(nr),kn.appendChild(mr),Q.appendChild(ge),Q.appendChild(Zt),Q.appendChild(vn),Q.appendChild(an),Q.appendChild(kn),k.appendChild(Q),k.setAttributeNS(null,"height",41*this._scale+"px"),k.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(k),this._offset=E.Point.convert(x&&x.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Rr){Rr.preventDefault()}),this._element.addEventListener("mousedown",function(Rr){Rr.preventDefault()}),Hp(this._element,this._anchor,"marker"),this._popup=null}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},S.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ee.remove(this._element),this._popup&&this._popup.remove(),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},S.prototype.getElement=function(){return this._element},S.prototype.setPopup=function(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){var O=Math.sqrt(Math.pow(13.5,2)/2);x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[O,-1*(24.6+O)],"bottom-right":[-O,-1*(24.6+O)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},S.prototype._onKeyPress=function(x){var O=x.code,k=x.charCode||x.keyCode;O!=="Space"&&O!=="Enter"&&k!==32&&k!==13||this.togglePopup()},S.prototype._onMapClick=function(x){var O=x.originalEvent.target,k=this._element;this._popup&&(O===k||k.contains(O))&&this.togglePopup()},S.prototype.getPopup=function(){return this._popup},S.prototype.togglePopup=function(){var x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this},S.prototype._update=function(x){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=lp(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var O="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?O="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(O="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k="rotateX("+this._map.getPitch()+"deg)"),x&&x.type!=="moveend"||(this._pos=this._pos.round()),ee.setTransform(this._element,Sc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+k+" "+O)}},S.prototype.getOffset=function(){return this._offset},S.prototype.setOffset=function(x){return this._offset=E.Point.convert(x),this._update(),this},S.prototype._onMove=function(x){if(!this._isDragging){var O=this._clickTolerance||this._map._clickTolerance;this._isDragging=x.point.dist(this._pointerdownPos)>=O}this._isDragging&&(this._pos=x.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))},S.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new E.Event("dragend")),this._state="inactive"},S.prototype._addDragHandler=function(x){this._element.contains(x.originalEvent.target)&&(x.preventDefault(),this._positionDelta=x.point.sub(this._pos).add(this._offset),this._pointerdownPos=x.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},S.prototype.setDraggable=function(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},S.prototype.isDraggable=function(){return this._draggable},S.prototype.setRotation=function(x){return this._rotation=x||0,this._update(),this},S.prototype.getRotation=function(){return this._rotation},S.prototype.setRotationAlignment=function(x){return this._rotationAlignment=x||"auto",this._update(),this},S.prototype.getRotationAlignment=function(){return this._rotationAlignment},S.prototype.setPitchAlignment=function(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this},S.prototype.getPitchAlignment=function(){return this._pitchAlignment},S}(E.Evented),g0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Eh=0,Uh=!1,y0=function(_){function S(x){_.call(this),this.options=E.extend({},g0,x),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){var O;return this._map=x,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),O=this._setupUI,Uc!==void 0?O(Uc):E.window.navigator.permissions!==void 0?E.window.navigator.permissions.query({name:"geolocation"}).then(function(k){O(Uc=k.state!=="denied")}):O(Uc=!!E.window.navigator.geolocation),this._container},S.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ee.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Eh=0,Uh=!1},S.prototype._isOutOfMapMaxBounds=function(x){var O=this._map.getMaxBounds(),k=x.coords;return O&&(k.longitude<O.getWest()||k.longitude>O.getEast()||k.latitude<O.getSouth()||k.latitude>O.getNorth())},S.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},S.prototype._onSuccess=function(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",x)),this._finish()}},S.prototype._updateCamera=function(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude),k=x.coords.accuracy,Z=this._map.getBearing(),Q=E.extend({bearing:Z},this.options.fitBoundsOptions);this._map.fitBounds(O.toBounds(k),Q,{geolocateSource:!0})},S.prototype._updateMarker=function(x){if(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(O).addTo(this._map),this._userLocationDotMarker.setLngLat(O).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},S.prototype._updateCircleRadius=function(){var x=this._map._container.clientHeight/2,O=this._map.unproject([0,x]),k=this._map.unproject([1,x]),Z=O.distanceTo(k),Q=Math.ceil(2*this._accuracy/Z);this._circleElement.style.width=Q+"px",this._circleElement.style.height=Q+"px"},S.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},S.prototype._onError=function(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var O=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Uh)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",x)),this._finish()}},S.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},S.prototype._setupUI=function(x){var O=this;if(this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this._geolocateButton=ee.create("button","mapboxgl-ctrl-geolocate",this._container),ee.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",x===!1){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{var Z=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ee.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Id(this._dotElement),this._circleElement=ee.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Id({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Q){Q.geolocateSource||O._watchState!=="ACTIVE_LOCK"||Q.originalEvent&&Q.originalEvent.type==="resize"||(O._watchState="BACKGROUND",O._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),O._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),O.fire(new E.Event("trackuserlocationend")))})},S.prototype.trigger=function(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Eh--,Uh=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Eh>1?(x={maximumAge:6e5,timeout:0},Uh=!0):(x=this.options.positionOptions,Uh=!1),this._geolocationWatchID=E.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else E.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},S.prototype._clearWatch=function(){E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},S}(E.Evented),Bf={maxWidth:100,unit:"metric"},kf=function(_){this.options=E.extend({},Bf,_),E.bindAll(["_onMove","setUnit"],this)};function _0(_,S,x){var O=x&&x.maxWidth||100,k=_._container.clientHeight/2,Z=_.unproject([0,k]),Q=_.unproject([O,k]),ge=Z.distanceTo(Q);if(x&&x.unit==="imperial"){var Ve=3.2808*ge;Ve>5280?Qf(S,O,Ve/5280,_._getUIString("ScaleControl.Miles")):Qf(S,O,Ve,_._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?Qf(S,O,ge/1852,_._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?Qf(S,O,ge/1e3,_._getUIString("ScaleControl.Kilometers")):Qf(S,O,ge,_._getUIString("ScaleControl.Meters"))}function Qf(_,S,x,O){var k,Z,Q,ge=(k=x,(Z=Math.pow(10,(""+Math.floor(k)).length-1))*(Q=(Q=k/Z)>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:Q>=1?1:function(Ve){var ht=Math.pow(10,Math.ceil(-Math.log(Ve)/Math.LN10));return Math.round(Ve*ht)/ht}(Q)));_.style.width=S*(ge/x)+"px",_.innerHTML=ge+"&nbsp;"+O}kf.prototype.getDefaultPosition=function(){return"bottom-left"},kf.prototype._onMove=function(){_0(this._map,this._container,this.options)},kf.prototype.onAdd=function(_){return this._map=_,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},kf.prototype.onRemove=function(){ee.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},kf.prototype.setUnit=function(_){this.options.unit=_,_0(this._map,this._container,this.options)};var wf=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof E.window.HTMLElement?this._container=_.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in E.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in E.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in E.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in E.window.document&&(this._fullscreenchange="MSFullscreenChange")};wf.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},wf.prototype.onRemove=function(){ee.remove(this._controlContainer),this._map=null,E.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},wf.prototype._checkFullscreenSupport=function(){return!!(E.window.document.fullscreenEnabled||E.window.document.mozFullScreenEnabled||E.window.document.msFullscreenEnabled||E.window.document.webkitFullscreenEnabled)},wf.prototype._setupUI=function(){var _=this._fullscreenButton=ee.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ee.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),E.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},wf.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},wf.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},wf.prototype._isFullscreen=function(){return this._fullscreen},wf.prototype._changeIcon=function(){(E.window.document.fullscreenElement||E.window.document.mozFullScreenElement||E.window.document.webkitFullscreenElement||E.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},wf.prototype._onClickFullscreen=function(){this._isFullscreen()?E.window.document.exitFullscreen?E.window.document.exitFullscreen():E.window.document.mozCancelFullScreen?E.window.document.mozCancelFullScreen():E.window.document.msExitFullscreen?E.window.document.msExitFullscreen():E.window.document.webkitCancelFullScreen&&E.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var iv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),jh=function(_){function S(x){_.call(this),this.options=E.extend(Object.create(iv),x),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this},S.prototype.isOpen=function(){return!!this._map},S.prototype.remove=function(){return this._content&&ee.remove(this._content),this._container&&(ee.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},S.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},S.prototype.getElement=function(){return this._container},S.prototype.setText=function(x){return this.setDOMContent(E.window.document.createTextNode(x))},S.prototype.setHTML=function(x){var O,k=E.window.document.createDocumentFragment(),Z=E.window.document.createElement("body");for(Z.innerHTML=x;O=Z.firstChild;)k.appendChild(O);return this.setDOMContent(k)},S.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},S.prototype.setMaxWidth=function(x){return this.options.maxWidth=x,this._update(),this},S.prototype.setDOMContent=function(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ee.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this},S.prototype.addClassName=function(x){this._container&&this._container.classList.add(x)},S.prototype.removeClassName=function(x){this._container&&this._container.classList.remove(x)},S.prototype.setOffset=function(x){return this.options.offset=x,this._update(),this},S.prototype.toggleClassName=function(x){if(this._container)return this._container.classList.toggle(x)},S.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=ee.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},S.prototype._onMouseUp=function(x){this._update(x.point)},S.prototype._onMouseMove=function(x){this._update(x.point)},S.prototype._onDrag=function(x){this._update(x.point)},S.prototype._update=function(x){var O=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=ee.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ee.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ht){return O._container.classList.add(Ht)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=lp(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||x)){var k=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat),Z=this.options.anchor,Q=function Ht(Zt){if(Zt){if(typeof Zt=="number"){var xn=Math.round(Math.sqrt(.5*Math.pow(Zt,2)));return{center:new E.Point(0,0),top:new E.Point(0,Zt),"top-left":new E.Point(xn,xn),"top-right":new E.Point(-xn,xn),bottom:new E.Point(0,-Zt),"bottom-left":new E.Point(xn,-xn),"bottom-right":new E.Point(-xn,-xn),left:new E.Point(Zt,0),right:new E.Point(-Zt,0)}}if(Zt instanceof E.Point||Array.isArray(Zt)){var vn=E.Point.convert(Zt);return{center:vn,top:vn,"top-left":vn,"top-right":vn,bottom:vn,"bottom-left":vn,"bottom-right":vn,left:vn,right:vn}}return{center:E.Point.convert(Zt.center||[0,0]),top:E.Point.convert(Zt.top||[0,0]),"top-left":E.Point.convert(Zt["top-left"]||[0,0]),"top-right":E.Point.convert(Zt["top-right"]||[0,0]),bottom:E.Point.convert(Zt.bottom||[0,0]),"bottom-left":E.Point.convert(Zt["bottom-left"]||[0,0]),"bottom-right":E.Point.convert(Zt["bottom-right"]||[0,0]),left:E.Point.convert(Zt.left||[0,0]),right:E.Point.convert(Zt.right||[0,0])}}return Ht(new E.Point(0,0))}(this.options.offset);if(!Z){var ge,Ve=this._container.offsetWidth,ht=this._container.offsetHeight;ge=k.y+Q.bottom.y<ht?["top"]:k.y>this._map.transform.height-ht?["bottom"]:[],k.x<Ve/2?ge.push("left"):k.x>this._map.transform.width-Ve/2&&ge.push("right"),Z=ge.length===0?"bottom":ge.join("-")}var zt=k.add(Q[Z]).round();ee.setTransform(this._container,Sc[Z]+" translate("+zt.x+"px,"+zt.y+"px)"),Hp(this._container,Z,"popup")}},S.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var x=this._container.querySelector(zf);x&&x.focus()}},S.prototype._onClose=function(){this.remove()},S}(E.Evented),b0={version:E.version,supported:de,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:m0,NavigationControl:xh,GeolocateControl:y0,AttributionControl:Qu,ScaleControl:kf,FullscreenControl:wf,Popup:jh,Marker:Id,Style:fu,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.Point,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,config:E.config,prewarm:function(){wr().acquire(vr)},clearPrewarmedResources:function(){var _=_i;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(vr),_i=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return E.config.ACCESS_TOKEN},set accessToken(_){E.config.ACCESS_TOKEN=_},get baseApiUrl(){return E.config.API_URL},set baseApiUrl(_){E.config.API_URL=_},get workerCount(){return Ur.workerCount},set workerCount(_){Ur.workerCount=_},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){E.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){E.clearTileCache(_)},workerUrl:""};return b0}),q})},92077:function(gt,G,L){var q,W;(function(E,de){q=de,W=typeof q=="function"?q.call(G,L,G,gt):q,W!==void 0&&(gt.exports=W)})(this,function(){var E,de,ee="2.0.6",ue={},ce={},xe={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},ae={currentLocale:xe.currentLocale,zeroFormat:xe.zeroFormat,nullFormat:xe.nullFormat,defaultFormat:xe.defaultFormat,scalePercentBy100:xe.scalePercentBy100};function We(te,me){this._input=te,this._value=me}return E=function(te){var me,Re,$,le;if(E.isNumeral(te))me=te.value();else if(te===0||typeof te=="undefined")me=0;else if(te===null||de.isNaN(te))me=null;else if(typeof te=="string")if(ae.zeroFormat&&te===ae.zeroFormat)me=0;else if(ae.nullFormat&&te===ae.nullFormat||!te.replace(/[^0-9]+/g,"").length)me=null;else{for(Re in ue)if(le=typeof ue[Re].regexps.unformat=="function"?ue[Re].regexps.unformat():ue[Re].regexps.unformat,le&&te.match(le)){$=ue[Re].unformat;break}$=$||E._.stringToNumber,me=$(te)}else me=Number(te)||null;return new We(te,me)},E.version=ee,E.isNumeral=function(te){return te instanceof We},E._=de={numberToFormat:function(te,me,Re){var $=ce[E.options.currentLocale],le=!1,K=!1,we=0,et="",Je=1e12,wt=1e9,pt=1e6,_t=1e3,Me="",Ae=!1,je,Ze,lt,en,Le,St,Oe,nt,Ke,Xe;if(te=te||0,Ze=Math.abs(te),E._.includes(me,"(")?(le=!0,me=me.replace(/[\(|\)]/g,"")):(E._.includes(me,"+")||E._.includes(me,"-"))&&(nt=E._.includes(me,"+")?me.indexOf("+"):te<0?me.indexOf("-"):-1,me=me.replace(/[\+|\-]/g,"")),E._.includes(me,"a")&&(je=me.match(/a(k|m|b|t)?/),je=je?je[1]:!1,E._.includes(me," a")&&(et=" "),me=me.replace(new RegExp(et+"a[kmbt]?"),""),Ze>=Je&&!je||je==="t"?(et+=$.abbreviations.trillion,te=te/Je):Ze<Je&&Ze>=wt&&!je||je==="b"?(et+=$.abbreviations.billion,te=te/wt):Ze<wt&&Ze>=pt&&!je||je==="m"?(et+=$.abbreviations.million,te=te/pt):(Ze<pt&&Ze>=_t&&!je||je==="k")&&(et+=$.abbreviations.thousand,te=te/_t)),E._.includes(me,"[.]")&&(K=!0,me=me.replace("[.]",".")),St=te.toString().split(".")[0],Oe=me.split(".")[1],Ke=me.indexOf(","),we=(me.split(".")[0].split(",")[0].match(/0/g)||[]).length,Oe?(E._.includes(Oe,"[")?(Oe=Oe.replace("]",""),Oe=Oe.split("["),Me=E._.toFixed(te,Oe[0].length+Oe[1].length,Re,Oe[1].length)):Me=E._.toFixed(te,Oe.length,Re),St=Me.split(".")[0],E._.includes(Me,".")?Me=$.delimiters.decimal+Me.split(".")[1]:Me="",K&&Number(Me.slice(1))===0&&(Me="")):St=E._.toFixed(te,0,Re),et&&!je&&Number(St)>=1e3&&et!==$.abbreviations.trillion)switch(St=String(Number(St)/1e3),et){case $.abbreviations.thousand:et=$.abbreviations.million;break;case $.abbreviations.million:et=$.abbreviations.billion;break;case $.abbreviations.billion:et=$.abbreviations.trillion;break}if(E._.includes(St,"-")&&(St=St.slice(1),Ae=!0),St.length<we)for(var Rt=we-St.length;Rt>0;Rt--)St="0"+St;return Ke>-1&&(St=St.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+$.delimiters.thousands)),me.indexOf(".")===0&&(St=""),Xe=St+Me+(et||""),le?Xe=(le&&Ae?"(":"")+Xe+(le&&Ae?")":""):nt>=0?Xe=nt===0?(Ae?"-":"+")+Xe:Xe+(Ae?"-":"+"):Ae&&(Xe="-"+Xe),Xe},stringToNumber:function(te){var me=ce[ae.currentLocale],Re=te,$={thousand:3,million:6,billion:9,trillion:12},le,K,we,et;if(ae.zeroFormat&&te===ae.zeroFormat)K=0;else if(ae.nullFormat&&te===ae.nullFormat||!te.replace(/[^0-9]+/g,"").length)K=null;else{K=1,me.delimiters.decimal!=="."&&(te=te.replace(/\./g,"").replace(me.delimiters.decimal,"."));for(le in $)if(et=new RegExp("[^a-zA-Z]"+me.abbreviations[le]+"(?:\\)|(\\"+me.currency.symbol+")?(?:\\))?)?$"),Re.match(et)){K*=Math.pow(10,$[le]);break}K*=(te.split("-").length+Math.min(te.split("(").length-1,te.split(")").length-1))%2?1:-1,te=te.replace(/[^0-9\.]+/g,""),K*=Number(te)}return K},isNaN:function(te){return typeof te=="number"&&isNaN(te)},includes:function(te,me){return te.indexOf(me)!==-1},insert:function(te,me,Re){return te.slice(0,Re)+me+te.slice(Re)},reduce:function(te,me){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof me!="function")throw new TypeError(me+" is not a function");var Re=Object(te),$=Re.length>>>0,le=0,K;if(arguments.length===3)K=arguments[2];else{for(;le<$&&!(le in Re);)le++;if(le>=$)throw new TypeError("Reduce of empty array with no initial value");K=Re[le++]}for(;le<$;le++)le in Re&&(K=me(K,Re[le],le,Re));return K},multiplier:function(te){var me=te.toString().split(".");return me.length<2?1:Math.pow(10,me[1].length)},correctionFactor:function(){var te=Array.prototype.slice.call(arguments);return te.reduce(function(me,Re){var $=de.multiplier(Re);return me>$?me:$},1)},toFixed:function(te,me,Re,$){var le=te.toString().split("."),K=me-($||0),we,et,Je,wt;return le.length===2?we=Math.min(Math.max(le[1].length,K),me):we=K,Je=Math.pow(10,we),wt=(Re(te+"e+"+we)/Je).toFixed(we),$>me-we&&(et=new RegExp("\\.?0{1,"+($-(me-we))+"}$"),wt=wt.replace(et,"")),wt}},E.options=ae,E.formats=ue,E.locales=ce,E.locale=function(te){return te&&(ae.currentLocale=te.toLowerCase()),ae.currentLocale},E.localeData=function(te){if(!te)return ce[ae.currentLocale];if(te=te.toLowerCase(),!ce[te])throw new Error("Unknown locale : "+te);return ce[te]},E.reset=function(){for(var te in xe)ae[te]=xe[te]},E.zeroFormat=function(te){ae.zeroFormat=typeof te=="string"?te:null},E.nullFormat=function(te){ae.nullFormat=typeof te=="string"?te:null},E.defaultFormat=function(te){ae.defaultFormat=typeof te=="string"?te:"0.0"},E.register=function(te,me,Re){if(me=me.toLowerCase(),this[te+"s"][me])throw new TypeError(me+" "+te+" already registered.");return this[te+"s"][me]=Re,Re},E.validate=function(te,me){var Re,$,le,K,we,et,Je,wt;if(typeof te!="string"&&(te+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",te)),te=te.trim(),te.match(/^\d+$/))return!0;if(te==="")return!1;try{Je=E.localeData(me)}catch(pt){Je=E.localeData(E.locale())}return le=Je.currency.symbol,we=Je.abbreviations,Re=Je.delimiters.decimal,Je.delimiters.thousands==="."?$="\\.":$=Je.delimiters.thousands,wt=te.match(/^[^\d]+/),wt!==null&&(te=te.substr(1),wt[0]!==le)||(wt=te.match(/[^\d]+$/),wt!==null&&(te=te.slice(0,-1),wt[0]!==we.thousand&&wt[0]!==we.million&&wt[0]!==we.billion&&wt[0]!==we.trillion))?!1:(et=new RegExp($+"{2}"),te.match(/[^\d.,]/g)?!1:(K=te.split(Re),K.length>2?!1:K.length<2?!!K[0].match(/^\d+.*\d$/)&&!K[0].match(et):K[0].length===1?!!K[0].match(/^\d+$/)&&!K[0].match(et)&&!!K[1].match(/^\d+$/):!!K[0].match(/^\d+.*\d$/)&&!K[0].match(et)&&!!K[1].match(/^\d+$/)))},E.fn=We.prototype={clone:function(){return E(this)},format:function(te,me){var Re=this._value,$=te||ae.defaultFormat,le,K,we;if(me=me||Math.round,Re===0&&ae.zeroFormat!==null)K=ae.zeroFormat;else if(Re===null&&ae.nullFormat!==null)K=ae.nullFormat;else{for(le in ue)if($.match(ue[le].regexps.format)){we=ue[le].format;break}we=we||E._.numberToFormat,K=we(Re,$,me)}return K},value:function(){return this._value},input:function(){return this._input},set:function(te){return this._value=Number(te),this},add:function(te){var me=de.correctionFactor.call(null,this._value,te);function Re($,le,K,we){return $+Math.round(me*le)}return this._value=de.reduce([this._value,te],Re,0)/me,this},subtract:function(te){var me=de.correctionFactor.call(null,this._value,te);function Re($,le,K,we){return $-Math.round(me*le)}return this._value=de.reduce([te],Re,Math.round(this._value*me))/me,this},multiply:function(te){function me(Re,$,le,K){var we=de.correctionFactor(Re,$);return Math.round(Re*we)*Math.round($*we)/Math.round(we*we)}return this._value=de.reduce([this._value,te],me,1),this},divide:function(te){function me(Re,$,le,K){var we=de.correctionFactor(Re,$);return Math.round(Re*we)/Math.round($*we)}return this._value=de.reduce([this._value,te],me),this},difference:function(te){return Math.abs(E(this._value).subtract(te).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(te){var me=te%10;return~~(te%100/10)===1?"th":me===1?"st":me===2?"nd":me===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(te,me,Re){var $=E._.includes(me," BPS")?" ":"",le;return te=te*1e4,me=me.replace(/\s?BPS/,""),le=E._.numberToFormat(te,me,Re),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,$+"BPS"),le=le.join("")):le=le+$+"BPS",le},unformat:function(te){return+(E._.stringToNumber(te)*1e-4).toFixed(15)}})}(),function(){var te={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},me={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Re=te.suffixes.concat(me.suffixes.filter(function(le){return te.suffixes.indexOf(le)<0})),$=Re.join("|");$="("+$.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp($)},format:function(le,K,we){var et,Je=E._.includes(K,"ib")?me:te,wt=E._.includes(K," b")||E._.includes(K," ib")?" ":"",pt,_t,Me;for(K=K.replace(/\s?i?b/,""),pt=0;pt<=Je.suffixes.length;pt++)if(_t=Math.pow(Je.base,pt),Me=Math.pow(Je.base,pt+1),le===null||le===0||le>=_t&&le<Me){wt+=Je.suffixes[pt],_t>0&&(le=le/_t);break}return et=E._.numberToFormat(le,K,we),et+wt},unformat:function(le){var K=E._.stringToNumber(le),we,et;if(K){for(we=te.suffixes.length-1;we>=0;we--){if(E._.includes(le,te.suffixes[we])){et=Math.pow(te.base,we);break}if(E._.includes(le,me.suffixes[we])){et=Math.pow(me.base,we);break}}K*=et||1}return K}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(te,me,Re){var $=E.locales[E.options.currentLocale],le={before:me.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:me.match(/([\+|\-|\)|\s|\$]*)$/)[0]},K,we,et;for(me=me.replace(/\s?\$\s?/,""),K=E._.numberToFormat(te,me,Re),te>=0?(le.before=le.before.replace(/[\-\(]/,""),le.after=le.after.replace(/[\-\)]/,"")):te<0&&!E._.includes(le.before,"-")&&!E._.includes(le.before,"(")&&(le.before="-"+le.before),et=0;et<le.before.length;et++)switch(we=le.before[et],we){case"$":K=E._.insert(K,$.currency.symbol,et);break;case" ":K=E._.insert(K," ",et+$.currency.symbol.length-1);break}for(et=le.after.length-1;et>=0;et--)switch(we=le.after[et],we){case"$":K=et===le.after.length-1?K+$.currency.symbol:E._.insert(K,$.currency.symbol,-(le.after.length-(1+et)));break;case" ":K=et===le.after.length-1?K+" ":E._.insert(K," ",-(le.after.length-(1+et)+$.currency.symbol.length-1));break}return K}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(te,me,Re){var $,le=typeof te=="number"&&!E._.isNaN(te)?te.toExponential():"0e+0",K=le.split("e");return me=me.replace(/e[\+|\-]{1}0/,""),$=E._.numberToFormat(Number(K[0]),me,Re),$+"e"+K[1]},unformat:function(te){var me=E._.includes(te,"e+")?te.split("e+"):te.split("e-"),Re=Number(me[0]),$=Number(me[1]);$=E._.includes(te,"e-")?$*=-1:$;function le(K,we,et,Je){var wt=E._.correctionFactor(K,we),pt=K*wt*(we*wt)/(wt*wt);return pt}return E._.reduce([Re,Math.pow(10,$)],le,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(te,me,Re){var $=E.locales[E.options.currentLocale],le,K=E._.includes(me," o")?" ":"";return me=me.replace(/\s?o/,""),K+=$.ordinal(te),le=E._.numberToFormat(te,me,Re),le+K}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(te,me,Re){var $=E._.includes(me," %")?" ":"",le;return E.options.scalePercentBy100&&(te=te*100),me=me.replace(/\s?\%/,""),le=E._.numberToFormat(te,me,Re),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,$+"%"),le=le.join("")):le=le+$+"%",le},unformat:function(te){var me=E._.stringToNumber(te);return E.options.scalePercentBy100?me*.01:me}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(te,me,Re){var $=Math.floor(te/60/60),le=Math.floor((te-$*60*60)/60),K=Math.round(te-$*60*60-le*60);return $+":"+(le<10?"0"+le:le)+":"+(K<10?"0"+K:K)},unformat:function(te){var me=te.split(":"),Re=0;return me.length===3?(Re=Re+Number(me[0])*60*60,Re=Re+Number(me[1])*60,Re=Re+Number(me[2])):me.length===2&&(Re=Re+Number(me[0])*60,Re=Re+Number(me[1])),Number(Re)}})}(),E})},3614:function(gt,G,L){"use strict";gt.exports=W;var q=L(80645);function W(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}W.Varint=0,W.Fixed64=1,W.Bytes=2,W.Fixed32=5;var E=65536*65536,de=1/E,ee=12,ue=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");W.prototype={destroy:function(){this.buf=null},readFields:function(Le,St,Oe){for(Oe=Oe||this.length;this.pos<Oe;){var nt=this.readVarint(),Ke=nt>>3,Xe=this.pos;this.type=nt&7,Le(Ke,St,this),this.pos===Xe&&this.skip(nt)}return St},readMessage:function(Le,St){return this.readFields(Le,St,this.readVarint()+this.pos)},readFixed32:function(){var Le=Me(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=je(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=Me(this.buf,this.pos)+Me(this.buf,this.pos+4)*E;return this.pos+=8,Le},readSFixed64:function(){var Le=Me(this.buf,this.pos)+je(this.buf,this.pos+4)*E;return this.pos+=8,Le},readFloat:function(){var Le=q.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=q.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var St=this.buf,Oe,nt;return nt=St[this.pos++],Oe=nt&127,nt<128||(nt=St[this.pos++],Oe|=(nt&127)<<7,nt<128)||(nt=St[this.pos++],Oe|=(nt&127)<<14,nt<128)||(nt=St[this.pos++],Oe|=(nt&127)<<21,nt<128)?Oe:(nt=St[this.pos],Oe|=(nt&15)<<28,ce(Oe,Le,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2===1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,St=this.pos;return this.pos=Le,Le-St>=ee&&ue?lt(this.buf,St,Le):Ze(this.buf,St,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,St=this.buf.subarray(this.pos,Le);return this.pos=Le,St},readPackedVarint:function(Le,St){if(this.type!==W.Bytes)return Le.push(this.readVarint(St));var Oe=xe(this);for(Le=Le||[];this.pos<Oe;)Le.push(this.readVarint(St));return Le},readPackedSVarint:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSVarint());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==W.Bytes)return Le.push(this.readBoolean());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFloat());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==W.Bytes)return Le.push(this.readDouble());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFixed32());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSFixed32());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFixed64());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSFixed64());var St=xe(this);for(Le=Le||[];this.pos<St;)Le.push(this.readSFixed64());return Le},skip:function(Le){var St=Le&7;if(St===W.Varint)for(;this.buf[this.pos++]>127;);else if(St===W.Bytes)this.pos=this.readVarint()+this.pos;else if(St===W.Fixed32)this.pos+=4;else if(St===W.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+St)},writeTag:function(Le,St){this.writeVarint(Le<<3|St)},realloc:function(Le){for(var St=this.length||16;St<this.pos+Le;)St*=2;if(St!==this.length){var Oe=new Uint8Array(St);Oe.set(this.buf),this.buf=Oe,this.length=St}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Ae(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Ae(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Ae(this.buf,Le&-1,this.pos),Ae(this.buf,Math.floor(Le*de),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Ae(this.buf,Le&-1,this.pos),Ae(this.buf,Math.floor(Le*de),this.pos+4),this.pos+=8},writeVarint:function(Le){if(Le=+Le||0,Le>268435455||Le<0){We(Le,this);return}this.realloc(4),this.buf[this.pos++]=Le&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=(Le>>>=7)&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=(Le>>>=7)&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=Le>>>7&127)))},writeSVarint:function(Le){this.writeVarint(Le<0?-Le*2-1:Le*2)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(Le.length*4),this.pos++;var St=this.pos;this.pos=en(this.buf,Le,this.pos);var Oe=this.pos-St;Oe>=128&&Re(St,Oe,this),this.pos=St-1,this.writeVarint(Oe),this.pos+=Oe},writeFloat:function(Le){this.realloc(4),q.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),q.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var St=Le.length;this.writeVarint(St),this.realloc(St);for(var Oe=0;Oe<St;Oe++)this.buf[this.pos++]=Le[Oe]},writeRawMessage:function(Le,St){this.pos++;var Oe=this.pos;Le(St,this);var nt=this.pos-Oe;nt>=128&&Re(Oe,nt,this),this.pos=Oe-1,this.writeVarint(nt),this.pos+=nt},writeMessage:function(Le,St,Oe){this.writeTag(Le,W.Bytes),this.writeRawMessage(St,Oe)},writePackedVarint:function(Le,St){St.length&&this.writeMessage(Le,$,St)},writePackedSVarint:function(Le,St){St.length&&this.writeMessage(Le,le,St)},writePackedBoolean:function(Le,St){St.length&&this.writeMessage(Le,et,St)},writePackedFloat:function(Le,St){St.length&&this.writeMessage(Le,K,St)},writePackedDouble:function(Le,St){St.length&&this.writeMessage(Le,we,St)},writePackedFixed32:function(Le,St){St.length&&this.writeMessage(Le,Je,St)},writePackedSFixed32:function(Le,St){St.length&&this.writeMessage(Le,wt,St)},writePackedFixed64:function(Le,St){St.length&&this.writeMessage(Le,pt,St)},writePackedSFixed64:function(Le,St){St.length&&this.writeMessage(Le,_t,St)},writeBytesField:function(Le,St){this.writeTag(Le,W.Bytes),this.writeBytes(St)},writeFixed32Field:function(Le,St){this.writeTag(Le,W.Fixed32),this.writeFixed32(St)},writeSFixed32Field:function(Le,St){this.writeTag(Le,W.Fixed32),this.writeSFixed32(St)},writeFixed64Field:function(Le,St){this.writeTag(Le,W.Fixed64),this.writeFixed64(St)},writeSFixed64Field:function(Le,St){this.writeTag(Le,W.Fixed64),this.writeSFixed64(St)},writeVarintField:function(Le,St){this.writeTag(Le,W.Varint),this.writeVarint(St)},writeSVarintField:function(Le,St){this.writeTag(Le,W.Varint),this.writeSVarint(St)},writeStringField:function(Le,St){this.writeTag(Le,W.Bytes),this.writeString(St)},writeFloatField:function(Le,St){this.writeTag(Le,W.Fixed32),this.writeFloat(St)},writeDoubleField:function(Le,St){this.writeTag(Le,W.Fixed64),this.writeDouble(St)},writeBooleanField:function(Le,St){this.writeVarintField(Le,!!St)}};function ce(Le,St,Oe){var nt=Oe.buf,Ke,Xe;if(Xe=nt[Oe.pos++],Ke=(Xe&112)>>4,Xe<128||(Xe=nt[Oe.pos++],Ke|=(Xe&127)<<3,Xe<128)||(Xe=nt[Oe.pos++],Ke|=(Xe&127)<<10,Xe<128)||(Xe=nt[Oe.pos++],Ke|=(Xe&127)<<17,Xe<128)||(Xe=nt[Oe.pos++],Ke|=(Xe&127)<<24,Xe<128)||(Xe=nt[Oe.pos++],Ke|=(Xe&1)<<31,Xe<128))return ae(Le,Ke,St);throw new Error("Expected varint not more than 10 bytes")}function xe(Le){return Le.type===W.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function ae(Le,St,Oe){return Oe?St*4294967296+(Le>>>0):(St>>>0)*4294967296+(Le>>>0)}function We(Le,St){var Oe,nt;if(Le>=0?(Oe=Le%4294967296|0,nt=Le/4294967296|0):(Oe=~(-Le%4294967296),nt=~(-Le/4294967296),Oe^4294967295?Oe=Oe+1|0:(Oe=0,nt=nt+1|0)),Le>=18446744073709552e3||Le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");St.realloc(10),te(Oe,nt,St),me(nt,St)}function te(Le,St,Oe){Oe.buf[Oe.pos++]=Le&127|128,Le>>>=7,Oe.buf[Oe.pos++]=Le&127|128,Le>>>=7,Oe.buf[Oe.pos++]=Le&127|128,Le>>>=7,Oe.buf[Oe.pos++]=Le&127|128,Le>>>=7,Oe.buf[Oe.pos]=Le&127}function me(Le,St){var Oe=(Le&7)<<4;St.buf[St.pos++]|=Oe|((Le>>>=3)?128:0),Le&&(St.buf[St.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(St.buf[St.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(St.buf[St.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(St.buf[St.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(St.buf[St.pos++]=Le&127)))))}function Re(Le,St,Oe){var nt=St<=16383?1:St<=2097151?2:St<=268435455?3:Math.floor(Math.log(St)/(Math.LN2*7));Oe.realloc(nt);for(var Ke=Oe.pos-1;Ke>=Le;Ke--)Oe.buf[Ke+nt]=Oe.buf[Ke]}function $(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeVarint(Le[Oe])}function le(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeSVarint(Le[Oe])}function K(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeFloat(Le[Oe])}function we(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeDouble(Le[Oe])}function et(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeBoolean(Le[Oe])}function Je(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeFixed32(Le[Oe])}function wt(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeSFixed32(Le[Oe])}function pt(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeFixed64(Le[Oe])}function _t(Le,St){for(var Oe=0;Oe<Le.length;Oe++)St.writeSFixed64(Le[Oe])}function Me(Le,St){return(Le[St]|Le[St+1]<<8|Le[St+2]<<16)+Le[St+3]*16777216}function Ae(Le,St,Oe){Le[Oe]=St,Le[Oe+1]=St>>>8,Le[Oe+2]=St>>>16,Le[Oe+3]=St>>>24}function je(Le,St){return(Le[St]|Le[St+1]<<8|Le[St+2]<<16)+(Le[St+3]<<24)}function Ze(Le,St,Oe){for(var nt="",Ke=St;Ke<Oe;){var Xe=Le[Ke],Rt=null,bt=Xe>239?4:Xe>223?3:Xe>191?2:1;if(Ke+bt>Oe)break;var Ie,Gt,mn;bt===1?Xe<128&&(Rt=Xe):bt===2?(Ie=Le[Ke+1],(Ie&192)===128&&(Rt=(Xe&31)<<6|Ie&63,Rt<=127&&(Rt=null))):bt===3?(Ie=Le[Ke+1],Gt=Le[Ke+2],(Ie&192)===128&&(Gt&192)===128&&(Rt=(Xe&15)<<12|(Ie&63)<<6|Gt&63,(Rt<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null))):bt===4&&(Ie=Le[Ke+1],Gt=Le[Ke+2],mn=Le[Ke+3],(Ie&192)===128&&(Gt&192)===128&&(mn&192)===128&&(Rt=(Xe&15)<<18|(Ie&63)<<12|(Gt&63)<<6|mn&63,(Rt<=65535||Rt>=1114112)&&(Rt=null))),Rt===null?(Rt=65533,bt=1):Rt>65535&&(Rt-=65536,nt+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|Rt&1023),nt+=String.fromCharCode(Rt),Ke+=bt}return nt}function lt(Le,St,Oe){return ue.decode(Le.subarray(St,Oe))}function en(Le,St,Oe){for(var nt=0,Ke,Xe;nt<St.length;nt++){if(Ke=St.charCodeAt(nt),Ke>55295&&Ke<57344)if(Xe)if(Ke<56320){Le[Oe++]=239,Le[Oe++]=191,Le[Oe++]=189,Xe=Ke;continue}else Ke=Xe-55296<<10|Ke-56320|65536,Xe=null;else{Ke>56319||nt+1===St.length?(Le[Oe++]=239,Le[Oe++]=191,Le[Oe++]=189):Xe=Ke;continue}else Xe&&(Le[Oe++]=239,Le[Oe++]=191,Le[Oe++]=189,Xe=null);Ke<128?Le[Oe++]=Ke:(Ke<2048?Le[Oe++]=Ke>>6|192:(Ke<65536?Le[Oe++]=Ke>>12|224:(Le[Oe++]=Ke>>18|240,Le[Oe++]=Ke>>12&63|128),Le[Oe++]=Ke>>6&63|128),Le[Oe++]=Ke&63|128)}return Oe}},73807:function(gt){"use strict";var G=gt.exports;gt.exports.isNumber=function(L){return typeof L=="number"},gt.exports.findMin=function(L){if(L.length===0)return 1/0;for(var q=L[0],W=1;W<L.length;W++)q=Math.min(q,L[W]);return q},gt.exports.findMax=function(L){if(L.length===0)return-1/0;for(var q=L[0],W=1;W<L.length;W++)q=Math.max(q,L[W]);return q},gt.exports.findMinMulti=function(L){for(var q=G.findMin(L[0]),W=1;W<L.length;W++)q=Math.min(q,G.findMin(L[W]));return q},gt.exports.findMaxMulti=function(L){for(var q=G.findMax(L[0]),W=1;W<L.length;W++)q=Math.max(q,G.findMax(L[W]));return q},gt.exports.inside=function(L,q,W){return L<=W&&W<=q}},53843:function(gt,G,L){"use strict";var q=50,W=2,E=Math.log(2),de=gt.exports,ee=L(73807);function ue(xe){return 1-Math.abs(xe)}gt.exports.getUnifiedMinMax=function(xe,ae){return de.getUnifiedMinMaxMulti([xe],ae)},gt.exports.getUnifiedMinMaxMulti=function(xe,ae){ae=ae||{};var We=!1,te=!1,me=ee.isNumber(ae.width)?ae.width:W,Re=ee.isNumber(ae.size)?ae.size:q,$=ee.isNumber(ae.min)?ae.min:(We=!0,ee.findMinMulti(xe)),le=ee.isNumber(ae.max)?ae.max:(te=!0,ee.findMaxMulti(xe)),K=le-$,we=K/(Re-1);return We&&($=$-2*me*we),te&&(le=le+2*me*we),{min:$,max:le}},gt.exports.create=function(xe,ae){if(ae=ae||{},!xe||xe.length===0)return[];var We=ee.isNumber(ae.size)?ae.size:q,te=ee.isNumber(ae.width)?ae.width:W,me=de.getUnifiedMinMax(xe,{size:We,width:te,min:ae.min,max:ae.max}),Re=me.min,$=me.max,le=$-Re,K=le/(We-1);if(le===0)return[{x:Re,y:1}];for(var we=[],et=0;et<We;et++)we.push({x:Re+et*K,y:0});var Je=function(lt){return Math.floor((lt-Re)/K)},wt=ce(ue,te),pt=wt[te],_t=wt[te-1]-wt[te-2],Me=0;xe.forEach(function(lt){var en=Je(lt);if(!(en+te<0||en-te>=we.length)){var Le=Math.max(en-te,0),St=en,Oe=Math.min(en+te,we.length-1),nt=Le-(en-te),Ke=en+te-Oe,Xe=wt[-te-1+nt]||0,Rt=wt[-te-1+Ke]||0,bt=pt/(pt-Xe-Rt);nt>0&&(Me+=bt*(nt-1)*_t);var Ie=Math.max(0,en-te+1);ee.inside(0,we.length-1,Ie)&&(we[Ie].y+=bt*1*_t),ee.inside(0,we.length-1,St+1)&&(we[St+1].y-=bt*2*_t),ee.inside(0,we.length-1,Oe+1)&&(we[Oe+1].y+=bt*1*_t)}});var Ae=Me,je=0,Ze=0;return we.forEach(function(lt){je+=lt.y,Ae+=je,lt.y=Ae,Ze+=Ae}),Ze>0&&we.forEach(function(lt){lt.y/=Ze}),we};function ce(xe,ae){for(var We={},te=0,me=-ae;me<=ae;me++)te+=xe(me/ae),We[me]=te;return We}gt.exports.getExpectedValueFromPdf=function(xe){if(!(!xe||xe.length===0)){var ae=0;return xe.forEach(function(We){ae+=We.x*We.y}),ae}},gt.exports.getXWithLeftTailArea=function(xe,ae){if(!(!xe||xe.length===0)){for(var We=0,te=0,me=0;me<xe.length&&(te=me,We+=xe[me].y,!(We>=ae));me++);return xe[te].x}},gt.exports.getPerplexity=function(xe){if(!(!xe||xe.length===0)){var ae=0;return xe.forEach(function(We){var te=Math.log(We.y);isFinite(te)&&(ae+=We.y*te)}),ae=-ae/E,Math.pow(2,ae)}}},32676:function(gt,G,L){var q=L(34155);(function(W,E){gt.exports=E()})(this,function(){"use strict";function W(dt,Se){var Be={label:0,sent:function(){if(It[0]&1)throw It[1];return It[1]},trys:[],ops:[]},st,Lt,It,wn;return wn={next:Kn(0),throw:Kn(1),return:Kn(2)},typeof Symbol=="function"&&(wn[Symbol.iterator]=function(){return this}),wn;function Kn(Jn){return function(Pe){return _r([Jn,Pe])}}function _r(Jn){if(st)throw new TypeError("Generator is already executing.");for(;Be;)try{if(st=1,Lt&&(It=Jn[0]&2?Lt.return:Jn[0]?Lt.throw||((It=Lt.return)&&It.call(Lt),0):Lt.next)&&!(It=It.call(Lt,Jn[1])).done)return It;switch(Lt=0,It&&(Jn=[Jn[0]&2,It.value]),Jn[0]){case 0:case 1:It=Jn;break;case 4:return Be.label++,{value:Jn[1],done:!1};case 5:Be.label++,Lt=Jn[1],Jn=[0];continue;case 7:Jn=Be.ops.pop(),Be.trys.pop();continue;default:if(It=Be.trys,!(It=It.length>0&&It[It.length-1])&&(Jn[0]===6||Jn[0]===2)){Be=0;continue}if(Jn[0]===3&&(!It||Jn[1]>It[0]&&Jn[1]<It[3])){Be.label=Jn[1];break}if(Jn[0]===6&&Be.label<It[1]){Be.label=It[1],It=Jn;break}if(It&&Be.label<It[2]){Be.label=It[2],Be.ops.push(Jn);break}It[2]&&Be.ops.pop(),Be.trys.pop();continue}Jn=Se.call(dt,Be)}catch(Pe){Jn=[6,Pe],Lt=0}finally{st=It=0}if(Jn[0]&5)throw Jn[1];return{value:Jn[0]?Jn[1]:void 0,done:!0}}}var E=function(){function dt(Se,Be){this.next=null,this.key=Se,this.data=Be,this.left=null,this.right=null}return dt}();function de(dt,Se){return dt>Se?1:dt<Se?-1:0}function ee(dt,Se,Be){for(var st=new E(null,null),Lt=st,It=st;;){var wn=Be(dt,Se.key);if(wn<0){if(Se.left===null)break;if(Be(dt,Se.left.key)<0){var Kn=Se.left;if(Se.left=Kn.right,Kn.right=Se,Se=Kn,Se.left===null)break}It.left=Se,It=Se,Se=Se.left}else if(wn>0){if(Se.right===null)break;if(Be(dt,Se.right.key)>0){var Kn=Se.right;if(Se.right=Kn.left,Kn.left=Se,Se=Kn,Se.right===null)break}Lt.right=Se,Lt=Se,Se=Se.right}else break}return Lt.right=Se.left,It.left=Se.right,Se.left=st.right,Se.right=st.left,Se}function ue(dt,Se,Be,st){var Lt=new E(dt,Se);if(Be===null)return Lt.left=Lt.right=null,Lt;Be=ee(dt,Be,st);var It=st(dt,Be.key);return It<0?(Lt.left=Be.left,Lt.right=Be,Be.left=null):It>=0&&(Lt.right=Be.right,Lt.left=Be,Be.right=null),Lt}function ce(dt,Se,Be){var st=null,Lt=null;if(Se){Se=ee(dt,Se,Be);var It=Be(Se.key,dt);It===0?(st=Se.left,Lt=Se.right):It<0?(Lt=Se.right,Se.right=null,st=Se):(st=Se.left,Se.left=null,Lt=Se)}return{left:st,right:Lt}}function xe(dt,Se,Be){return Se===null?dt:(dt===null||(Se=ee(dt.key,Se,Be),Se.left=dt),Se)}function ae(dt,Se,Be,st,Lt){if(dt){st(""+Se+(Be?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Lt(dt)+`
`);var It=Se+(Be?"    ":"\u2502   ");dt.left&&ae(dt.left,It,!1,st,Lt),dt.right&&ae(dt.right,It,!0,st,Lt)}}var We=function(){function dt(Se){Se===void 0&&(Se=de),this._root=null,this._size=0,this._comparator=Se}return dt.prototype.insert=function(Se,Be){return this._size++,this._root=ue(Se,Be,this._root,this._comparator)},dt.prototype.add=function(Se,Be){var st=new E(Se,Be);this._root===null&&(st.left=st.right=null,this._size++,this._root=st);var Lt=this._comparator,It=ee(Se,this._root,Lt),wn=Lt(Se,It.key);return wn===0?this._root=It:(wn<0?(st.left=It.left,st.right=It,It.left=null):wn>0&&(st.right=It.right,st.left=It,It.right=null),this._size++,this._root=st),this._root},dt.prototype.remove=function(Se){this._root=this._remove(Se,this._root,this._comparator)},dt.prototype._remove=function(Se,Be,st){var Lt;if(Be===null)return null;Be=ee(Se,Be,st);var It=st(Se,Be.key);return It===0?(Be.left===null?Lt=Be.right:(Lt=ee(Se,Be.left,st),Lt.right=Be.right),this._size--,Lt):Be},dt.prototype.pop=function(){var Se=this._root;if(Se){for(;Se.left;)Se=Se.left;return this._root=ee(Se.key,this._root,this._comparator),this._root=this._remove(Se.key,this._root,this._comparator),{key:Se.key,data:Se.data}}return null},dt.prototype.findStatic=function(Se){for(var Be=this._root,st=this._comparator;Be;){var Lt=st(Se,Be.key);if(Lt===0)return Be;Lt<0?Be=Be.left:Be=Be.right}return null},dt.prototype.find=function(Se){return this._root&&(this._root=ee(Se,this._root,this._comparator),this._comparator(Se,this._root.key)!==0)?null:this._root},dt.prototype.contains=function(Se){for(var Be=this._root,st=this._comparator;Be;){var Lt=st(Se,Be.key);if(Lt===0)return!0;Lt<0?Be=Be.left:Be=Be.right}return!1},dt.prototype.forEach=function(Se,Be){for(var st=this._root,Lt=[],It=!1;!It;)st!==null?(Lt.push(st),st=st.left):Lt.length!==0?(st=Lt.pop(),Se.call(Be,st),st=st.right):It=!0;return this},dt.prototype.range=function(Se,Be,st,Lt){for(var It=[],wn=this._comparator,Kn=this._root,_r;It.length!==0||Kn;)if(Kn)It.push(Kn),Kn=Kn.left;else{if(Kn=It.pop(),_r=wn(Kn.key,Be),_r>0)break;if(wn(Kn.key,Se)>=0&&st.call(Lt,Kn))return this;Kn=Kn.right}return this},dt.prototype.keys=function(){var Se=[];return this.forEach(function(Be){var st=Be.key;return Se.push(st)}),Se},dt.prototype.values=function(){var Se=[];return this.forEach(function(Be){var st=Be.data;return Se.push(st)}),Se},dt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},dt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},dt.prototype.minNode=function(Se){if(Se===void 0&&(Se=this._root),Se)for(;Se.left;)Se=Se.left;return Se},dt.prototype.maxNode=function(Se){if(Se===void 0&&(Se=this._root),Se)for(;Se.right;)Se=Se.right;return Se},dt.prototype.at=function(Se){for(var Be=this._root,st=!1,Lt=0,It=[];!st;)if(Be)It.push(Be),Be=Be.left;else if(It.length>0){if(Be=It.pop(),Lt===Se)return Be;Lt++,Be=Be.right}else st=!0;return null},dt.prototype.next=function(Se){var Be=this._root,st=null;if(Se.right){for(st=Se.right;st.left;)st=st.left;return st}for(var Lt=this._comparator;Be;){var It=Lt(Se.key,Be.key);if(It===0)break;It<0?(st=Be,Be=Be.left):Be=Be.right}return st},dt.prototype.prev=function(Se){var Be=this._root,st=null;if(Se.left!==null){for(st=Se.left;st.right;)st=st.right;return st}for(var Lt=this._comparator;Be;){var It=Lt(Se.key,Be.key);if(It===0)break;It<0?Be=Be.left:(st=Be,Be=Be.right)}return st},dt.prototype.clear=function(){return this._root=null,this._size=0,this},dt.prototype.toList=function(){return Re(this._root)},dt.prototype.load=function(Se,Be,st){Be===void 0&&(Be=[]),st===void 0&&(st=!1);var Lt=Se.length,It=this._comparator;if(st&&K(Se,Be,0,Lt-1,It),this._root===null)this._root=te(Se,Be,0,Lt),this._size=Lt;else{var wn=le(this.toList(),me(Se,Be),It);Lt=this._size+Lt,this._root=$({head:wn},0,Lt)}return this},dt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(dt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),dt.prototype.toString=function(Se){Se===void 0&&(Se=function(st){return String(st.key)});var Be=[];return ae(this._root,"",!0,function(st){return Be.push(st)},Se),Be.join("")},dt.prototype.update=function(Se,Be,st){var Lt=this._comparator,It=ce(Se,this._root,Lt),wn=It.left,Kn=It.right;Lt(Se,Be)<0?Kn=ue(Be,st,Kn,Lt):wn=ue(Be,st,wn,Lt),this._root=xe(wn,Kn,Lt)},dt.prototype.split=function(Se){return ce(Se,this._root,this._comparator)},dt.prototype[Symbol.iterator]=function(){var Se,Be,st;return W(this,function(Lt){switch(Lt.label){case 0:Se=this._root,Be=[],st=!1,Lt.label=1;case 1:return st?[3,6]:Se===null?[3,2]:(Be.push(Se),Se=Se.left,[3,5]);case 2:return Be.length===0?[3,4]:(Se=Be.pop(),[4,Se]);case 3:return Lt.sent(),Se=Se.right,[3,5];case 4:st=!0,Lt.label=5;case 5:return[3,1];case 6:return[2]}})},dt}();function te(dt,Se,Be,st){var Lt=st-Be;if(Lt>0){var It=Be+Math.floor(Lt/2),wn=dt[It],Kn=Se[It],_r=new E(wn,Kn);return _r.left=te(dt,Se,Be,It),_r.right=te(dt,Se,It+1,st),_r}return null}function me(dt,Se){for(var Be=new E(null,null),st=Be,Lt=0;Lt<dt.length;Lt++)st=st.next=new E(dt[Lt],Se[Lt]);return st.next=null,Be.next}function Re(dt){for(var Se=dt,Be=[],st=!1,Lt=new E(null,null),It=Lt;!st;)Se?(Be.push(Se),Se=Se.left):Be.length>0?(Se=It=It.next=Be.pop(),Se=Se.right):st=!0;return It.next=null,Lt.next}function $(dt,Se,Be){var st=Be-Se;if(st>0){var Lt=Se+Math.floor(st/2),It=$(dt,Se,Lt),wn=dt.head;return wn.left=It,dt.head=dt.head.next,wn.right=$(dt,Lt+1,Be),wn}return null}function le(dt,Se,Be){for(var st=new E(null,null),Lt=st,It=dt,wn=Se;It!==null&&wn!==null;)Be(It.key,wn.key)<0?(Lt.next=It,It=It.next):(Lt.next=wn,wn=wn.next),Lt=Lt.next;return It!==null?Lt.next=It:wn!==null&&(Lt.next=wn),st.next}function K(dt,Se,Be,st,Lt){if(!(Be>=st)){for(var It=dt[Be+st>>1],wn=Be-1,Kn=st+1;;){do wn++;while(Lt(dt[wn],It)<0);do Kn--;while(Lt(dt[Kn],It)>0);if(wn>=Kn)break;var _r=dt[wn];dt[wn]=dt[Kn],dt[Kn]=_r,_r=Se[wn],Se[wn]=Se[Kn],Se[Kn]=_r}K(dt,Se,Be,Kn,Lt),K(dt,Se,Kn+1,st,Lt)}}const we=(dt,Se)=>dt.ll.x<=Se.x&&Se.x<=dt.ur.x&&dt.ll.y<=Se.y&&Se.y<=dt.ur.y,et=(dt,Se)=>{if(Se.ur.x<dt.ll.x||dt.ur.x<Se.ll.x||Se.ur.y<dt.ll.y||dt.ur.y<Se.ll.y)return null;const Be=dt.ll.x<Se.ll.x?Se.ll.x:dt.ll.x,st=dt.ur.x<Se.ur.x?dt.ur.x:Se.ur.x,Lt=dt.ll.y<Se.ll.y?Se.ll.y:dt.ll.y,It=dt.ur.y<Se.ur.y?dt.ur.y:Se.ur.y;return{ll:{x:Be,y:Lt},ur:{x:st,y:It}}};let Je=Number.EPSILON;Je===void 0&&(Je=Math.pow(2,-52));const wt=Je*Je,pt=(dt,Se)=>{if(-Je<dt&&dt<Je&&-Je<Se&&Se<Je)return 0;const Be=dt-Se;return Be*Be<wt*dt*Se?0:dt<Se?-1:1};class _t{constructor(){this.reset()}reset(){this.xRounder=new Me,this.yRounder=new Me}round(Se,Be){return{x:this.xRounder.round(Se),y:this.yRounder.round(Be)}}}class Me{constructor(){this.tree=new We,this.round(0)}round(Se){const Be=this.tree.add(Se),st=this.tree.prev(Be);if(st!==null&&pt(Be.key,st.key)===0)return this.tree.remove(Se),st.key;const Lt=this.tree.next(Be);return Lt!==null&&pt(Be.key,Lt.key)===0?(this.tree.remove(Se),Lt.key):Se}}const Ae=new _t,je=11102230246251565e-32,Ze=134217729,lt=(3+8*je)*je;function en(dt,Se,Be,st,Lt){let It,wn,Kn,_r,Jn=Se[0],Pe=st[0],Te=0,ke=0;Pe>Jn==Pe>-Jn?(It=Jn,Jn=Se[++Te]):(It=Pe,Pe=st[++ke]);let it=0;if(Te<dt&&ke<Be)for(Pe>Jn==Pe>-Jn?(wn=Jn+It,Kn=It-(wn-Jn),Jn=Se[++Te]):(wn=Pe+It,Kn=It-(wn-Pe),Pe=st[++ke]),It=wn,Kn!==0&&(Lt[it++]=Kn);Te<dt&&ke<Be;)Pe>Jn==Pe>-Jn?(wn=It+Jn,_r=wn-It,Kn=It-(wn-_r)+(Jn-_r),Jn=Se[++Te]):(wn=It+Pe,_r=wn-It,Kn=It-(wn-_r)+(Pe-_r),Pe=st[++ke]),It=wn,Kn!==0&&(Lt[it++]=Kn);for(;Te<dt;)wn=It+Jn,_r=wn-It,Kn=It-(wn-_r)+(Jn-_r),Jn=Se[++Te],It=wn,Kn!==0&&(Lt[it++]=Kn);for(;ke<Be;)wn=It+Pe,_r=wn-It,Kn=It-(wn-_r)+(Pe-_r),Pe=st[++ke],It=wn,Kn!==0&&(Lt[it++]=Kn);return(It!==0||it===0)&&(Lt[it++]=It),it}function Le(dt,Se){let Be=Se[0];for(let st=1;st<dt;st++)Be+=Se[st];return Be}function St(dt){return new Float64Array(dt)}const Oe=(3+16*je)*je,nt=(2+12*je)*je,Ke=(9+64*je)*je*je,Xe=St(4),Rt=St(8),bt=St(12),Ie=St(16),Gt=St(4);function mn(dt,Se,Be,st,Lt,It,wn){let Kn,_r,Jn,Pe,Te,ke,it,At,Yt,hn,Et,Kt,er,br,Vr,vr,Ur,_i;const Ai=dt-Lt,wr=Be-Lt,Ei=Se-It,hi=st-It;br=Ai*hi,ke=Ze*Ai,it=ke-(ke-Ai),At=Ai-it,ke=Ze*hi,Yt=ke-(ke-hi),hn=hi-Yt,Vr=At*hn-(br-it*Yt-At*Yt-it*hn),vr=Ei*wr,ke=Ze*Ei,it=ke-(ke-Ei),At=Ei-it,ke=Ze*wr,Yt=ke-(ke-wr),hn=wr-Yt,Ur=At*hn-(vr-it*Yt-At*Yt-it*hn),Et=Vr-Ur,Te=Vr-Et,Xe[0]=Vr-(Et+Te)+(Te-Ur),Kt=br+Et,Te=Kt-br,er=br-(Kt-Te)+(Et-Te),Et=er-vr,Te=er-Et,Xe[1]=er-(Et+Te)+(Te-vr),_i=Kt+Et,Te=_i-Kt,Xe[2]=Kt-(_i-Te)+(Et-Te),Xe[3]=_i;let ai=Le(4,Xe),Io=nt*wn;if(ai>=Io||-ai>=Io||(Te=dt-Ai,Kn=dt-(Ai+Te)+(Te-Lt),Te=Be-wr,Jn=Be-(wr+Te)+(Te-Lt),Te=Se-Ei,_r=Se-(Ei+Te)+(Te-It),Te=st-hi,Pe=st-(hi+Te)+(Te-It),Kn===0&&_r===0&&Jn===0&&Pe===0)||(Io=Ke*wn+lt*Math.abs(ai),ai+=Ai*Pe+hi*Kn-(Ei*Jn+wr*_r),ai>=Io||-ai>=Io))return ai;br=Kn*hi,ke=Ze*Kn,it=ke-(ke-Kn),At=Kn-it,ke=Ze*hi,Yt=ke-(ke-hi),hn=hi-Yt,Vr=At*hn-(br-it*Yt-At*Yt-it*hn),vr=_r*wr,ke=Ze*_r,it=ke-(ke-_r),At=_r-it,ke=Ze*wr,Yt=ke-(ke-wr),hn=wr-Yt,Ur=At*hn-(vr-it*Yt-At*Yt-it*hn),Et=Vr-Ur,Te=Vr-Et,Gt[0]=Vr-(Et+Te)+(Te-Ur),Kt=br+Et,Te=Kt-br,er=br-(Kt-Te)+(Et-Te),Et=er-vr,Te=er-Et,Gt[1]=er-(Et+Te)+(Te-vr),_i=Kt+Et,Te=_i-Kt,Gt[2]=Kt-(_i-Te)+(Et-Te),Gt[3]=_i;const xi=en(4,Xe,4,Gt,Rt);br=Ai*Pe,ke=Ze*Ai,it=ke-(ke-Ai),At=Ai-it,ke=Ze*Pe,Yt=ke-(ke-Pe),hn=Pe-Yt,Vr=At*hn-(br-it*Yt-At*Yt-it*hn),vr=Ei*Jn,ke=Ze*Ei,it=ke-(ke-Ei),At=Ei-it,ke=Ze*Jn,Yt=ke-(ke-Jn),hn=Jn-Yt,Ur=At*hn-(vr-it*Yt-At*Yt-it*hn),Et=Vr-Ur,Te=Vr-Et,Gt[0]=Vr-(Et+Te)+(Te-Ur),Kt=br+Et,Te=Kt-br,er=br-(Kt-Te)+(Et-Te),Et=er-vr,Te=er-Et,Gt[1]=er-(Et+Te)+(Te-vr),_i=Kt+Et,Te=_i-Kt,Gt[2]=Kt-(_i-Te)+(Et-Te),Gt[3]=_i;const Qo=en(xi,Rt,4,Gt,bt);br=Kn*Pe,ke=Ze*Kn,it=ke-(ke-Kn),At=Kn-it,ke=Ze*Pe,Yt=ke-(ke-Pe),hn=Pe-Yt,Vr=At*hn-(br-it*Yt-At*Yt-it*hn),vr=_r*Jn,ke=Ze*_r,it=ke-(ke-_r),At=_r-it,ke=Ze*Jn,Yt=ke-(ke-Jn),hn=Jn-Yt,Ur=At*hn-(vr-it*Yt-At*Yt-it*hn),Et=Vr-Ur,Te=Vr-Et,Gt[0]=Vr-(Et+Te)+(Te-Ur),Kt=br+Et,Te=Kt-br,er=br-(Kt-Te)+(Et-Te),Et=er-vr,Te=er-Et,Gt[1]=er-(Et+Te)+(Te-vr),_i=Kt+Et,Te=_i-Kt,Gt[2]=Kt-(_i-Te)+(Et-Te),Gt[3]=_i;const ga=en(Qo,bt,4,Gt,Ie);return Ie[ga-1]}function Ln(dt,Se,Be,st,Lt,It){const wn=(Se-It)*(Be-Lt),Kn=(dt-Lt)*(st-It),_r=wn-Kn,Jn=Math.abs(wn+Kn);return Math.abs(_r)>=Oe*Jn?_r:-mn(dt,Se,Be,st,Lt,It,Jn)}const qn=(dt,Se)=>dt.x*Se.y-dt.y*Se.x,rr=(dt,Se)=>dt.x*Se.x+dt.y*Se.y,Ft=(dt,Se,Be)=>{const st=Ln(dt.x,dt.y,Se.x,Se.y,Be.x,Be.y);return st>0?-1:st<0?1:0},Jt=dt=>Math.sqrt(rr(dt,dt)),un=(dt,Se,Be)=>{const st={x:Se.x-dt.x,y:Se.y-dt.y},Lt={x:Be.x-dt.x,y:Be.y-dt.y};return qn(Lt,st)/Jt(Lt)/Jt(st)},Vn=(dt,Se,Be)=>{const st={x:Se.x-dt.x,y:Se.y-dt.y},Lt={x:Be.x-dt.x,y:Be.y-dt.y};return rr(Lt,st)/Jt(Lt)/Jt(st)},on=(dt,Se,Be)=>Se.y===0?null:{x:dt.x+Se.x/Se.y*(Be-dt.y),y:Be},Dt=(dt,Se,Be)=>Se.x===0?null:{x:Be,y:dt.y+Se.y/Se.x*(Be-dt.x)},Vt=(dt,Se,Be,st)=>{if(Se.x===0)return Dt(Be,st,dt.x);if(st.x===0)return Dt(dt,Se,Be.x);if(Se.y===0)return on(Be,st,dt.y);if(st.y===0)return on(dt,Se,Be.y);const Lt=qn(Se,st);if(Lt==0)return null;const It={x:Be.x-dt.x,y:Be.y-dt.y},wn=qn(It,Se)/Lt,Kn=qn(It,st)/Lt,_r=dt.x+Kn*Se.x,Jn=Be.x+wn*st.x,Pe=dt.y+Kn*Se.y,Te=Be.y+wn*st.y,ke=(_r+Jn)/2,it=(Pe+Te)/2;return{x:ke,y:it}};class ze{static compare(Se,Be){const st=ze.comparePoints(Se.point,Be.point);return st!==0?st:(Se.point!==Be.point&&Se.link(Be),Se.isLeft!==Be.isLeft?Se.isLeft?1:-1:jt.compare(Se.segment,Be.segment))}static comparePoints(Se,Be){return Se.x<Be.x?-1:Se.x>Be.x?1:Se.y<Be.y?-1:Se.y>Be.y?1:0}constructor(Se,Be){Se.events===void 0?Se.events=[this]:Se.events.push(this),this.point=Se,this.isLeft=Be}link(Se){if(Se.point===this.point)throw new Error("Tried to link already linked events");const Be=Se.point.events;for(let st=0,Lt=Be.length;st<Lt;st++){const It=Be[st];this.point.events.push(It),It.point=this.point}this.checkForConsuming()}checkForConsuming(){const Se=this.point.events.length;for(let Be=0;Be<Se;Be++){const st=this.point.events[Be];if(st.segment.consumedBy===void 0)for(let Lt=Be+1;Lt<Se;Lt++){const It=this.point.events[Lt];It.consumedBy===void 0&&st.otherSE.point.events===It.otherSE.point.events&&st.segment.consume(It.segment)}}}getAvailableLinkedEvents(){const Se=[];for(let Be=0,st=this.point.events.length;Be<st;Be++){const Lt=this.point.events[Be];Lt!==this&&!Lt.segment.ringOut&&Lt.segment.isInResult()&&Se.push(Lt)}return Se}getLeftmostComparator(Se){const Be=new Map,st=Lt=>{const It=Lt.otherSE;Be.set(Lt,{sine:un(this.point,Se.point,It.point),cosine:Vn(this.point,Se.point,It.point)})};return(Lt,It)=>{Be.has(Lt)||st(Lt),Be.has(It)||st(It);const{sine:wn,cosine:Kn}=Be.get(Lt),{sine:_r,cosine:Jn}=Be.get(It);return wn>=0&&_r>=0?Kn<Jn?1:Kn>Jn?-1:0:wn<0&&_r<0?Kn<Jn?-1:Kn>Jn?1:0:_r<wn?-1:_r>wn?1:0}}}let rt=0;class jt{static compare(Se,Be){const st=Se.leftSE.point.x,Lt=Be.leftSE.point.x,It=Se.rightSE.point.x,wn=Be.rightSE.point.x;if(wn<st)return 1;if(It<Lt)return-1;const Kn=Se.leftSE.point.y,_r=Be.leftSE.point.y,Jn=Se.rightSE.point.y,Pe=Be.rightSE.point.y;if(st<Lt){if(_r<Kn&&_r<Jn)return 1;if(_r>Kn&&_r>Jn)return-1;const Te=Se.comparePoint(Be.leftSE.point);if(Te<0)return 1;if(Te>0)return-1;const ke=Be.comparePoint(Se.rightSE.point);return ke!==0?ke:-1}if(st>Lt){if(Kn<_r&&Kn<Pe)return-1;if(Kn>_r&&Kn>Pe)return 1;const Te=Be.comparePoint(Se.leftSE.point);if(Te!==0)return Te;const ke=Se.comparePoint(Be.rightSE.point);return ke<0?1:ke>0?-1:1}if(Kn<_r)return-1;if(Kn>_r)return 1;if(It<wn){const Te=Be.comparePoint(Se.rightSE.point);if(Te!==0)return Te}if(It>wn){const Te=Se.comparePoint(Be.rightSE.point);if(Te<0)return 1;if(Te>0)return-1}if(It!==wn){const Te=Jn-Kn,ke=It-st,it=Pe-_r,At=wn-Lt;if(Te>ke&&it<At)return 1;if(Te<ke&&it>At)return-1}return It>wn?1:It<wn||Jn<Pe?-1:Jn>Pe?1:Se.id<Be.id?-1:Se.id>Be.id?1:0}constructor(Se,Be,st,Lt){this.id=++rt,this.leftSE=Se,Se.segment=this,Se.otherSE=Be,this.rightSE=Be,Be.segment=this,Be.otherSE=Se,this.rings=st,this.windings=Lt}static fromRing(Se,Be,st){let Lt,It,wn;const Kn=ze.comparePoints(Se,Be);if(Kn<0)Lt=Se,It=Be,wn=1;else if(Kn>0)Lt=Be,It=Se,wn=-1;else throw new Error(`Tried to create degenerate segment at [${Se.x}, ${Se.y}]`);const _r=new ze(Lt,!0),Jn=new ze(It,!1);return new jt(_r,Jn,[st],[wn])}replaceRightSE(Se){this.rightSE=Se,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const Se=this.leftSE.point.y,Be=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Se<Be?Se:Be},ur:{x:this.rightSE.point.x,y:Se>Be?Se:Be}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(Se){return Se.x===this.leftSE.point.x&&Se.y===this.leftSE.point.y||Se.x===this.rightSE.point.x&&Se.y===this.rightSE.point.y}comparePoint(Se){if(this.isAnEndpoint(Se))return 0;const Be=this.leftSE.point,st=this.rightSE.point,Lt=this.vector();if(Be.x===st.x)return Se.x===Be.x?0:Se.x<Be.x?1:-1;const It=(Se.y-Be.y)/Lt.y,wn=Be.x+It*Lt.x;if(Se.x===wn)return 0;const Kn=(Se.x-Be.x)/Lt.x,_r=Be.y+Kn*Lt.y;return Se.y===_r?0:Se.y<_r?-1:1}getIntersection(Se){const Be=this.bbox(),st=Se.bbox(),Lt=et(Be,st);if(Lt===null)return null;const It=this.leftSE.point,wn=this.rightSE.point,Kn=Se.leftSE.point,_r=Se.rightSE.point,Jn=we(Be,Kn)&&this.comparePoint(Kn)===0,Pe=we(st,It)&&Se.comparePoint(It)===0,Te=we(Be,_r)&&this.comparePoint(_r)===0,ke=we(st,wn)&&Se.comparePoint(wn)===0;if(Pe&&Jn)return ke&&!Te?wn:!ke&&Te?_r:null;if(Pe)return Te&&It.x===_r.x&&It.y===_r.y?null:It;if(Jn)return ke&&wn.x===Kn.x&&wn.y===Kn.y?null:Kn;if(ke&&Te)return null;if(ke)return wn;if(Te)return _r;const it=Vt(It,this.vector(),Kn,Se.vector());return it===null||!we(Lt,it)?null:Ae.round(it.x,it.y)}split(Se){const Be=[],st=Se.events!==void 0,Lt=new ze(Se,!0),It=new ze(Se,!1),wn=this.rightSE;this.replaceRightSE(It),Be.push(It),Be.push(Lt);const Kn=new jt(Lt,wn,this.rings.slice(),this.windings.slice());return ze.comparePoints(Kn.leftSE.point,Kn.rightSE.point)>0&&Kn.swapEvents(),ze.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),st&&(Lt.checkForConsuming(),It.checkForConsuming()),Be}swapEvents(){const Se=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Se,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let Be=0,st=this.windings.length;Be<st;Be++)this.windings[Be]*=-1}consume(Se){let Be=this,st=Se;for(;Be.consumedBy;)Be=Be.consumedBy;for(;st.consumedBy;)st=st.consumedBy;const Lt=jt.compare(Be,st);if(Lt!==0){if(Lt>0){const It=Be;Be=st,st=It}if(Be.prev===st){const It=Be;Be=st,st=It}for(let It=0,wn=st.rings.length;It<wn;It++){const Kn=st.rings[It],_r=st.windings[It],Jn=Be.rings.indexOf(Kn);Jn===-1?(Be.rings.push(Kn),Be.windings.push(_r)):Be.windings[Jn]+=_r}st.rings=null,st.windings=null,st.consumedBy=Be,st.leftSE.consumedBy=Be.leftSE,st.rightSE.consumedBy=Be.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const Se=this.prev.consumedBy||this.prev;this._beforeState=Se.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const Se=this.beforeState();this._afterState={rings:Se.rings.slice(0),windings:Se.windings.slice(0),multiPolys:[]};const Be=this._afterState.rings,st=this._afterState.windings,Lt=this._afterState.multiPolys;for(let Kn=0,_r=this.rings.length;Kn<_r;Kn++){const Jn=this.rings[Kn],Pe=this.windings[Kn],Te=Be.indexOf(Jn);Te===-1?(Be.push(Jn),st.push(Pe)):st[Te]+=Pe}const It=[],wn=[];for(let Kn=0,_r=Be.length;Kn<_r;Kn++){if(st[Kn]===0)continue;const Jn=Be[Kn],Pe=Jn.poly;if(wn.indexOf(Pe)===-1)if(Jn.isExterior)It.push(Pe);else{wn.indexOf(Pe)===-1&&wn.push(Pe);const Te=It.indexOf(Jn.poly);Te!==-1&&It.splice(Te,1)}}for(let Kn=0,_r=It.length;Kn<_r;Kn++){const Jn=It[Kn].multiPoly;Lt.indexOf(Jn)===-1&&Lt.push(Jn)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const Se=this.beforeState().multiPolys,Be=this.afterState().multiPolys;switch(fn.type){case"union":{const st=Se.length===0,Lt=Be.length===0;this._isInResult=st!==Lt;break}case"intersection":{let st,Lt;Se.length<Be.length?(st=Se.length,Lt=Be.length):(st=Be.length,Lt=Se.length),this._isInResult=Lt===fn.numMultiPolys&&st<Lt;break}case"xor":{const st=Math.abs(Se.length-Be.length);this._isInResult=st%2===1;break}case"difference":{const st=Lt=>Lt.length===1&&Lt[0].isSubject;this._isInResult=st(Se)!==st(Be);break}default:throw new Error(`Unrecognized operation type found ${fn.type}`)}return this._isInResult}}class U{constructor(Se,Be,st){if(!Array.isArray(Se)||Se.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Be,this.isExterior=st,this.segments=[],typeof Se[0][0]!="number"||typeof Se[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Lt=Ae.round(Se[0][0],Se[0][1]);this.bbox={ll:{x:Lt.x,y:Lt.y},ur:{x:Lt.x,y:Lt.y}};let It=Lt;for(let wn=1,Kn=Se.length;wn<Kn;wn++){if(typeof Se[wn][0]!="number"||typeof Se[wn][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let _r=Ae.round(Se[wn][0],Se[wn][1]);_r.x===It.x&&_r.y===It.y||(this.segments.push(jt.fromRing(It,_r,this)),_r.x<this.bbox.ll.x&&(this.bbox.ll.x=_r.x),_r.y<this.bbox.ll.y&&(this.bbox.ll.y=_r.y),_r.x>this.bbox.ur.x&&(this.bbox.ur.x=_r.x),_r.y>this.bbox.ur.y&&(this.bbox.ur.y=_r.y),It=_r)}(Lt.x!==It.x||Lt.y!==It.y)&&this.segments.push(jt.fromRing(It,Lt,this))}getSweepEvents(){const Se=[];for(let Be=0,st=this.segments.length;Be<st;Be++){const Lt=this.segments[Be];Se.push(Lt.leftSE),Se.push(Lt.rightSE)}return Se}}class pe{constructor(Se,Be){if(!Array.isArray(Se))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new U(Se[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let st=1,Lt=Se.length;st<Lt;st++){const It=new U(Se[st],this,!1);It.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=It.bbox.ll.x),It.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=It.bbox.ll.y),It.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=It.bbox.ur.x),It.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=It.bbox.ur.y),this.interiorRings.push(It)}this.multiPoly=Be}getSweepEvents(){const Se=this.exteriorRing.getSweepEvents();for(let Be=0,st=this.interiorRings.length;Be<st;Be++){const Lt=this.interiorRings[Be].getSweepEvents();for(let It=0,wn=Lt.length;It<wn;It++)Se.push(Lt[It])}return Se}}class ct{constructor(Se,Be){if(!Array.isArray(Se))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Se[0][0][0]=="number"&&(Se=[Se])}catch(st){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let st=0,Lt=Se.length;st<Lt;st++){const It=new pe(Se[st],this);It.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=It.bbox.ll.x),It.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=It.bbox.ll.y),It.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=It.bbox.ur.x),It.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=It.bbox.ur.y),this.polys.push(It)}this.isSubject=Be}getSweepEvents(){const Se=[];for(let Be=0,st=this.polys.length;Be<st;Be++){const Lt=this.polys[Be].getSweepEvents();for(let It=0,wn=Lt.length;It<wn;It++)Se.push(Lt[It])}return Se}}class he{static factory(Se){const Be=[];for(let st=0,Lt=Se.length;st<Lt;st++){const It=Se[st];if(!It.isInResult()||It.ringOut)continue;let wn=null,Kn=It.leftSE,_r=It.rightSE;const Jn=[Kn],Pe=Kn.point,Te=[];for(;wn=Kn,Kn=_r,Jn.push(Kn),Kn.point!==Pe;)for(;;){const ke=Kn.getAvailableLinkedEvents();if(ke.length===0){const Yt=Jn[0].point,hn=Jn[Jn.length-1].point;throw new Error(`Unable to complete output ring starting at [${Yt.x}, ${Yt.y}]. Last matching segment found ends at [${hn.x}, ${hn.y}].`)}if(ke.length===1){_r=ke[0].otherSE;break}let it=null;for(let Yt=0,hn=Te.length;Yt<hn;Yt++)if(Te[Yt].point===Kn.point){it=Yt;break}if(it!==null){const Yt=Te.splice(it)[0],hn=Jn.splice(Yt.index);hn.unshift(hn[0].otherSE),Be.push(new he(hn.reverse()));continue}Te.push({index:Jn.length,point:Kn.point});const At=Kn.getLeftmostComparator(wn);_r=ke.sort(At)[0].otherSE;break}Be.push(new he(Jn))}return Be}constructor(Se){this.events=Se;for(let Be=0,st=Se.length;Be<st;Be++)Se[Be].segment.ringOut=this;this.poly=null}getGeom(){let Se=this.events[0].point;const Be=[Se];for(let Jn=1,Pe=this.events.length-1;Jn<Pe;Jn++){const Te=this.events[Jn].point,ke=this.events[Jn+1].point;Ft(Te,Se,ke)!==0&&(Be.push(Te),Se=Te)}if(Be.length===1)return null;const st=Be[0],Lt=Be[1];Ft(st,Se,Lt)===0&&Be.shift(),Be.push(Be[0]);const It=this.isExteriorRing()?1:-1,wn=this.isExteriorRing()?0:Be.length-1,Kn=this.isExteriorRing()?Be.length:-1,_r=[];for(let Jn=wn;Jn!=Kn;Jn+=It)_r.push([Be[Jn].x,Be[Jn].y]);return _r}isExteriorRing(){if(this._isExteriorRing===void 0){const Se=this.enclosingRing();this._isExteriorRing=Se?!Se.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let Se=this.events[0];for(let Lt=1,It=this.events.length;Lt<It;Lt++){const wn=this.events[Lt];ze.compare(Se,wn)>0&&(Se=wn)}let Be=Se.segment.prevInResult(),st=Be?Be.prevInResult():null;for(;;){if(!Be)return null;if(!st)return Be.ringOut;if(st.ringOut!==Be.ringOut)return st.ringOut.enclosingRing()!==Be.ringOut?Be.ringOut:Be.ringOut.enclosingRing();Be=st.prevInResult(),st=Be?Be.prevInResult():null}}}class $t{constructor(Se){this.exteriorRing=Se,Se.poly=this,this.interiorRings=[]}addInterior(Se){this.interiorRings.push(Se),Se.poly=this}getGeom(){const Se=[this.exteriorRing.getGeom()];if(Se[0]===null)return null;for(let Be=0,st=this.interiorRings.length;Be<st;Be++){const Lt=this.interiorRings[Be].getGeom();Lt!==null&&Se.push(Lt)}return Se}}class sn{constructor(Se){this.rings=Se,this.polys=this._composePolys(Se)}getGeom(){const Se=[];for(let Be=0,st=this.polys.length;Be<st;Be++){const Lt=this.polys[Be].getGeom();Lt!==null&&Se.push(Lt)}return Se}_composePolys(Se){const Be=[];for(let st=0,Lt=Se.length;st<Lt;st++){const It=Se[st];if(!It.poly)if(It.isExteriorRing())Be.push(new $t(It));else{const wn=It.enclosingRing();wn.poly||Be.push(new $t(wn)),wn.poly.addInterior(It)}}return Be}}class pn{constructor(Se){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.compare;this.queue=Se,this.tree=new We(Be),this.segments=[]}process(Se){const Be=Se.segment,st=[];if(Se.consumedBy)return Se.isLeft?this.queue.remove(Se.otherSE):this.tree.remove(Be),st;const Lt=Se.isLeft?this.tree.add(Be):this.tree.find(Be);if(!Lt)throw new Error(`Unable to find segment #${Be.id} [${Be.leftSE.point.x}, ${Be.leftSE.point.y}] -> [${Be.rightSE.point.x}, ${Be.rightSE.point.y}] in SweepLine tree.`);let It=Lt,wn=Lt,Kn,_r;for(;Kn===void 0;)It=this.tree.prev(It),It===null?Kn=null:It.key.consumedBy===void 0&&(Kn=It.key);for(;_r===void 0;)wn=this.tree.next(wn),wn===null?_r=null:wn.key.consumedBy===void 0&&(_r=wn.key);if(Se.isLeft){let Jn=null;if(Kn){const Te=Kn.getIntersection(Be);if(Te!==null&&(Be.isAnEndpoint(Te)||(Jn=Te),!Kn.isAnEndpoint(Te))){const ke=this._splitSafely(Kn,Te);for(let it=0,At=ke.length;it<At;it++)st.push(ke[it])}}let Pe=null;if(_r){const Te=_r.getIntersection(Be);if(Te!==null&&(Be.isAnEndpoint(Te)||(Pe=Te),!_r.isAnEndpoint(Te))){const ke=this._splitSafely(_r,Te);for(let it=0,At=ke.length;it<At;it++)st.push(ke[it])}}if(Jn!==null||Pe!==null){let Te=null;Jn===null?Te=Pe:Pe===null?Te=Jn:Te=ze.comparePoints(Jn,Pe)<=0?Jn:Pe,this.queue.remove(Be.rightSE),st.push(Be.rightSE);const ke=Be.split(Te);for(let it=0,At=ke.length;it<At;it++)st.push(ke[it])}st.length>0?(this.tree.remove(Be),st.push(Se)):(this.segments.push(Be),Be.prev=Kn)}else{if(Kn&&_r){const Jn=Kn.getIntersection(_r);if(Jn!==null){if(!Kn.isAnEndpoint(Jn)){const Pe=this._splitSafely(Kn,Jn);for(let Te=0,ke=Pe.length;Te<ke;Te++)st.push(Pe[Te])}if(!_r.isAnEndpoint(Jn)){const Pe=this._splitSafely(_r,Jn);for(let Te=0,ke=Pe.length;Te<ke;Te++)st.push(Pe[Te])}}}this.tree.remove(Be)}return st}_splitSafely(Se,Be){this.tree.remove(Se);const st=Se.rightSE;this.queue.remove(st);const Lt=Se.split(Be);return Lt.push(st),Se.consumedBy===void 0&&this.tree.add(Se),Lt}}const Dn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Wn=typeof q!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Yn{run(Se,Be,st){fn.type=Se,Ae.reset();const Lt=[new ct(Be,!0)];for(let Te=0,ke=st.length;Te<ke;Te++)Lt.push(new ct(st[Te],!1));if(fn.numMultiPolys=Lt.length,fn.type==="difference"){const Te=Lt[0];let ke=1;for(;ke<Lt.length;)et(Lt[ke].bbox,Te.bbox)!==null?ke++:Lt.splice(ke,1)}if(fn.type==="intersection")for(let Te=0,ke=Lt.length;Te<ke;Te++){const it=Lt[Te];for(let At=Te+1,Yt=Lt.length;At<Yt;At++)if(et(it.bbox,Lt[At].bbox)===null)return[]}const It=new We(ze.compare);for(let Te=0,ke=Lt.length;Te<ke;Te++){const it=Lt[Te].getSweepEvents();for(let At=0,Yt=it.length;At<Yt;At++)if(It.insert(it[At]),It.size>Dn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const wn=new pn(It);let Kn=It.size,_r=It.pop();for(;_r;){const Te=_r.key;if(It.size===Kn){const it=Te.segment;throw new Error(`Unable to pop() ${Te.isLeft?"left":"right"} SweepEvent [${Te.point.x}, ${Te.point.y}] from segment #${it.id} [${it.leftSE.point.x}, ${it.leftSE.point.y}] -> [${it.rightSE.point.x}, ${it.rightSE.point.y}] from queue.`)}if(It.size>Dn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(wn.segments.length>Wn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const ke=wn.process(Te);for(let it=0,At=ke.length;it<At;it++){const Yt=ke[it];Yt.consumedBy===void 0&&It.insert(Yt)}Kn=It.size,_r=It.pop()}Ae.reset();const Jn=he.factory(wn.segments);return new sn(Jn).getGeom()}}const fn=new Yn;var Xn={union:function(dt){for(var Se=arguments.length,Be=new Array(Se>1?Se-1:0),st=1;st<Se;st++)Be[st-1]=arguments[st];return fn.run("union",dt,Be)},intersection:function(dt){for(var Se=arguments.length,Be=new Array(Se>1?Se-1:0),st=1;st<Se;st++)Be[st-1]=arguments[st];return fn.run("intersection",dt,Be)},xor:function(dt){for(var Se=arguments.length,Be=new Array(Se>1?Se-1:0),st=1;st<Se;st++)Be[st-1]=arguments[st];return fn.run("xor",dt,Be)},difference:function(dt){for(var Se=arguments.length,Be=new Array(Se>1?Se-1:0),st=1;st<Se;st++)Be[st-1]=arguments[st];return fn.run("difference",dt,Be)}};return Xn})},45598:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=de;var W=q(L(67294)),E=L(11805);function de(ee){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=[];return W.default.Children.forEach(ee,function(xe){xe==null&&!ue.keepEmpty||(Array.isArray(xe)?ce=ce.concat(de(xe)):(0,E.isFragment)(xe)&&xe.props?ce=ce.concat(de(xe.props.children,ue)):ce.push(xe))}),ce}},3481:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.isStyleSupport=ee;var W=q(L(19158)),E=function(ce){if((0,W.default)()&&window.document.documentElement){var xe=Array.isArray(ce)?ce:[ce],ae=window.document.documentElement;return xe.some(function(We){return We in ae.style})}return!1},de=function(ce,xe){if(!E(ce))return!1;var ae=document.createElement("div"),We=ae.style[ce];return ae.style[ce]=xe,ae.style[ce]!==We};function ee(ue,ce){return!Array.isArray(ue)&&ce!==void 0?de(ue,ce):E(ue)}},27712:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(E){var de=E.keyCode;if(E.altKey&&!E.ctrlKey||E.metaKey||de>=L.F1&&de<=L.F12)return!1;switch(de){case L.ALT:case L.CAPS_LOCK:case L.CONTEXT_MENU:case L.CTRL:case L.DOWN:case L.END:case L.ESC:case L.HOME:case L.INSERT:case L.LEFT:case L.MAC_FF_META:case L.META:case L.NUMLOCK:case L.NUM_CENTER:case L.PAGE_DOWN:case L.PAGE_UP:case L.PAUSE:case L.PRINT_SCREEN:case L.RIGHT:case L.SHIFT:case L.UP:case L.WIN_KEY:case L.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(E){if(E>=L.ZERO&&E<=L.NINE||E>=L.NUM_ZERO&&E<=L.NUM_MULTIPLY||E>=L.A&&E<=L.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&E===0)return!0;switch(E){case L.SPACE:case L.QUESTION_MARK:case L.NUM_PLUS:case L.NUM_MINUS:case L.NUM_PERIOD:case L.NUM_DIVISION:case L.SEMICOLON:case L.DASH:case L.EQUALS:case L.COMMA:case L.PERIOD:case L.SLASH:case L.APOSTROPHE:case L.SINGLE_QUOTE:case L.OPEN_SQUARE_BRACKET:case L.BACKSLASH:case L.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},q=G.default=L},18545:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=q(L(67294));function E(de){var ee=W.useRef();ee.current=de;var ue=W.useCallback(function(){for(var ce,xe=arguments.length,ae=new Array(xe),We=0;We<xe;We++)ae[We]=arguments[We];return(ce=ee.current)===null||ce===void 0?void 0:ce.call.apply(ce,[ee].concat(ae))},[]);return ue}},82546:function(gt,G,L){"use strict";var q=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useLayoutUpdateEffect=G.default=void 0;var E=W(L(67294)),de=q(L(19158)),ee=(0,de.default)()?E.useLayoutEffect:E.useEffect,ue=function(We,te){var me=E.useRef(!0);ee(function(){return We(me.current)},te),ee(function(){return me.current=!1,function(){me.current=!0}},[])},ce=G.useLayoutUpdateEffect=function(We,te){ue(function(me){if(!me)return We()},te)},xe=G.default=ue},67265:function(gt,G,L){"use strict";var q=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=q(L(67294));function E(de,ee,ue){var ce=W.useRef({});return(!("value"in ce.current)||ue(ce.current.condition,ee))&&(ce.current.value=de(),ce.current.condition=ee),ce.current.value}},60869:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ce;var W=q(L(27424)),E=q(L(18545)),de=L(82546),ee=q(L(78423));function ue(xe){return xe!==void 0}function ce(xe,ae){var We=ae||{},te=We.defaultValue,me=We.value,Re=We.onChange,$=We.postState,le=(0,ee.default)(function(){return ue(me)?me:ue(te)?typeof te=="function"?te():te:typeof xe=="function"?xe():xe}),K=(0,W.default)(le,2),we=K[0],et=K[1],Je=me!==void 0?me:we,wt=$?$(Je):Je,pt=(0,E.default)(Re),_t=(0,ee.default)([Je]),Me=(0,W.default)(_t,2),Ae=Me[0],je=Me[1];(0,de.useLayoutUpdateEffect)(function(){var lt=Ae[0];we!==lt&&pt(we,lt)},[Ae]),(0,de.useLayoutUpdateEffect)(function(){ue(me)||et(me)},[me]);var Ze=(0,E.default)(function(lt,en){et(lt,en),je([Je],en)});return[wt,Ze]}},78423:function(gt,G,L){"use strict";var q=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ee;var E=W(L(27424)),de=q(L(67294));function ee(ue){var ce=de.useRef(!1),xe=de.useState(ue),ae=(0,E.default)(xe,2),We=ae[0],te=ae[1];de.useEffect(function(){return ce.current=!1,function(){ce.current=!0}},[]);function me(Re,$){$&&ce.current||te(Re)}return[We,me]}},11102:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=q(L(18698)),E=q(L(45520));function de(ue,ce){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ae=new Set;function We(te,me){var Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,$=ae.has(te);if((0,E.default)(!$,"Warning: There may be circular references"),$)return!1;if(te===me)return!0;if(xe&&Re>1)return!1;ae.add(te);var le=Re+1;if(Array.isArray(te)){if(!Array.isArray(me)||te.length!==me.length)return!1;for(var K=0;K<te.length;K++)if(!We(te[K],me[K],le))return!1;return!0}if(te&&me&&(0,W.default)(te)==="object"&&(0,W.default)(me)==="object"){var we=Object.keys(te);return we.length!==Object.keys(me).length?!1:we.every(function(et){return We(te[et],me[et],le)})}return!1}return We(ue,ce)}var ee=G.default=de},18475:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=q(L(42122));function E(de,ee){var ue=(0,W.default)({},de);return Array.isArray(ee)&&ee.forEach(function(ce){delete ue[ce]}),ue}},75531:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useComposeRef=G.supportRef=G.supportNodeRef=G.fillRef=G.composeRef=void 0;var W=q(L(18698)),E=L(67294),de=L(11805),ee=q(L(67265)),ue=G.fillRef=function(me,Re){typeof me=="function"?me(Re):(0,W.default)(me)==="object"&&me&&"current"in me&&(me.current=Re)},ce=G.composeRef=function(){for(var me=arguments.length,Re=new Array(me),$=0;$<me;$++)Re[$]=arguments[$];var le=Re.filter(Boolean);return le.length<=1?le[0]:function(K){Re.forEach(function(we){ue(we,K)})}},xe=G.useComposeRef=function(){for(var me=arguments.length,Re=new Array(me),$=0;$<me;$++)Re[$]=arguments[$];return(0,ee.default)(function(){return ce.apply(void 0,Re)},Re,function(le,K){return le.length!==K.length||le.every(function(we,et){return we!==K[et]})})},ae=G.supportRef=function(me){var Re,$,le=(0,de.isMemo)(me)?me.type.type:me.type;return!(typeof le=="function"&&!((Re=le.prototype)!==null&&Re!==void 0&&Re.render)&&le.$$typeof!==de.ForwardRef||typeof me=="function"&&!(($=me.prototype)!==null&&$!==void 0&&$.render)&&me.$$typeof!==de.ForwardRef)},We=G.supportNodeRef=function(me){return!(0,E.isValidElement)(me)||(0,de.isFragment)(me)?!1:ae(me)}},94787:function(gt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=L;function L(q,W){for(var E=q,de=0;de<W.length;de+=1){if(E==null)return;E=E[W[de]]}return E}},20059:function(gt,G,L){"use strict";var q=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=xe,G.merge=me;var W=q(L(18698)),E=q(L(42122)),de=q(L(861)),ee=q(L(51589)),ue=q(L(94787));function ce(Re,$,le,K){if(!$.length)return le;var we=(0,ee.default)($),et=we[0],Je=we.slice(1),wt;return!Re&&typeof et=="number"?wt=[]:Array.isArray(Re)?wt=(0,de.default)(Re):wt=(0,E.default)({},Re),K&&le===void 0&&Je.length===1?delete wt[et][Je[0]]:wt[et]=ce(wt[et],Je,le,K),wt}function xe(Re,$,le){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return $.length&&K&&le===void 0&&!(0,ue.default)(Re,$.slice(0,-1))?Re:ce(Re,$,le,K)}function ae(Re){return(0,W.default)(Re)==="object"&&Re!==null&&Object.getPrototypeOf(Re)===Object.prototype}function We(Re){return Array.isArray(Re)?[]:{}}var te=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function me(){for(var Re=arguments.length,$=new Array(Re),le=0;le<Re;le++)$[le]=arguments[le];var K=We($[0]);return $.forEach(function(we){function et(Je,wt){var pt=new Set(wt),_t=(0,ue.default)(we,Je),Me=Array.isArray(_t);if(Me||ae(_t)){if(!pt.has(_t)){pt.add(_t);var Ae=(0,ue.default)(K,Je);Me?K=xe(K,Je,[]):(!Ae||(0,W.default)(Ae)!=="object")&&(K=xe(K,Je,We(_t))),te(_t).forEach(function(je){et([].concat((0,de.default)(Je),[je]),pt)})}}else K=xe(K,Je,_t)}et([])}),K}},81550:function(gt){(function(G,L){gt.exports=L()})(this,function(){"use strict";var G=function(Ue){return Ue instanceof Uint8Array||Ue instanceof Uint16Array||Ue instanceof Uint32Array||Ue instanceof Int8Array||Ue instanceof Int16Array||Ue instanceof Int32Array||Ue instanceof Float32Array||Ue instanceof Float64Array||Ue instanceof Uint8ClampedArray},L=function(Ue,qt){for(var On=Object.keys(qt),Cr=0;Cr<On.length;++Cr)Ue[On[Cr]]=qt[On[Cr]];return Ue},q=`
`;function W(Ue){return typeof atob!="undefined"?atob(Ue):"base64:"+Ue}function E(Ue){var qt=new Error("(regl) "+Ue);throw console.error(qt),qt}function de(Ue,qt){Ue||E(qt)}function ee(Ue){return Ue?": "+Ue:""}function ue(Ue,qt,On){Ue in qt||E("unknown parameter ("+Ue+")"+ee(On)+". possible values: "+Object.keys(qt).join())}function ce(Ue,qt){G(Ue)||E("invalid parameter type"+ee(qt)+". must be a typed array")}function xe(Ue,qt){switch(qt){case"number":return typeof Ue=="number";case"object":return typeof Ue=="object";case"string":return typeof Ue=="string";case"boolean":return typeof Ue=="boolean";case"function":return typeof Ue=="function";case"undefined":return typeof Ue=="undefined";case"symbol":return typeof Ue=="symbol"}}function ae(Ue,qt,On){xe(Ue,qt)||E("invalid parameter type"+ee(On)+". expected "+qt+", got "+typeof Ue)}function We(Ue,qt){Ue>=0&&(Ue|0)===Ue||E("invalid parameter type, ("+Ue+")"+ee(qt)+". must be a nonnegative integer")}function te(Ue,qt,On){qt.indexOf(Ue)<0&&E("invalid value"+ee(On)+". must be one of: "+qt)}var me=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Re(Ue){Object.keys(Ue).forEach(function(qt){me.indexOf(qt)<0&&E('invalid regl constructor argument "'+qt+'". must be one of '+me)})}function $(Ue,qt){for(Ue=Ue+"";Ue.length<qt;)Ue=" "+Ue;return Ue}function le(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function K(Ue,qt){this.number=Ue,this.line=qt,this.errors=[]}function we(Ue,qt,On){this.file=Ue,this.line=qt,this.message=On}function et(){var Ue=new Error,qt=(Ue.stack||Ue).toString(),On=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(qt);if(On)return On[1];var Cr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(qt);return Cr?Cr[1]:"unknown"}function Je(){var Ue=new Error,qt=(Ue.stack||Ue).toString(),On=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(qt);if(On)return On[1];var Cr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(qt);return Cr?Cr[1]:"unknown"}function wt(Ue,qt){var On=Ue.split(`
`),Cr=1,$r=0,Mr={unknown:new le,0:new le};Mr.unknown.name=Mr[0].name=qt||et(),Mr.unknown.lines.push(new K(0,""));for(var yr=0;yr<On.length;++yr){var Oi=On[yr],di=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Oi);if(di)switch(di[1]){case"line":var ki=/(\d+)(\s+\d+)?/.exec(di[2]);ki&&(Cr=ki[1]|0,ki[2]&&($r=ki[2]|0,$r in Mr||(Mr[$r]=new le)));break;case"define":var Mi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(di[2]);Mi&&(Mr[$r].name=Mi[1]?W(Mi[2]):Mi[2]);break}Mr[$r].lines.push(new K(Cr++,Oi))}return Object.keys(Mr).forEach(function(Bi){var Xi=Mr[Bi];Xi.lines.forEach(function(mi){Xi.index[mi.number]=mi})}),Mr}function pt(Ue){var qt=[];return Ue.split(`
`).forEach(function(On){if(!(On.length<5)){var Cr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(On);Cr?qt.push(new we(Cr[1]|0,Cr[2]|0,Cr[3].trim())):On.length>0&&qt.push(new we("unknown",0,On))}}),qt}function _t(Ue,qt){qt.forEach(function(On){var Cr=Ue[On.file];if(Cr){var $r=Cr.index[On.line];if($r){$r.errors.push(On),Cr.hasErrors=!0;return}}Ue.unknown.hasErrors=!0,Ue.unknown.lines[0].errors.push(On)})}function Me(Ue,qt,On,Cr,$r){if(!Ue.getShaderParameter(qt,Ue.COMPILE_STATUS)){var Mr=Ue.getShaderInfoLog(qt),yr=Cr===Ue.FRAGMENT_SHADER?"fragment":"vertex";St(On,"string",yr+" shader source must be a string",$r);var Oi=wt(On,$r),di=pt(Mr);_t(Oi,di),Object.keys(Oi).forEach(function(ki){var Mi=Oi[ki];if(!Mi.hasErrors)return;var Bi=[""],Xi=[""];function mi(Ui,dr){Bi.push(Ui),Xi.push(dr||"")}mi("file number "+ki+": "+Mi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Mi.lines.forEach(function(Ui){if(Ui.errors.length>0){mi($(Ui.number,4)+"|  ","background-color:yellow; font-weight:bold"),mi(Ui.line+q,"color:red; background-color:yellow; font-weight:bold");var dr=0;Ui.errors.forEach(function(Br){var gi=Br.message,oo=/^\s*'(.*)'\s*:\s*(.*)$/.exec(gi);if(oo){var ii=oo[1];switch(gi=oo[2],ii){case"assign":ii="=";break}dr=Math.max(Ui.line.indexOf(ii,dr),0)}else dr=0;mi($("| ",6)),mi($("^^^",dr+3)+q,"font-weight:bold"),mi($("| ",6)),mi(gi+q,"font-weight:bold")}),mi($("| ",6)+q)}else mi($(Ui.number,4)+"|  "),mi(Ui.line+q,"color:red")}),typeof document!="undefined"&&!window.chrome?(Xi[0]=Bi.join("%c"),console.log.apply(console,Xi)):console.log(Bi.join(""))}),de.raise("Error compiling "+yr+" shader, "+Oi[0].name)}}function Ae(Ue,qt,On,Cr,$r){if(!Ue.getProgramParameter(qt,Ue.LINK_STATUS)){var Mr=Ue.getProgramInfoLog(qt),yr=wt(On,$r),Oi=wt(Cr,$r),di='Error linking program with vertex shader, "'+Oi[0].name+'", and fragment shader "'+yr[0].name+'"';typeof document!="undefined"?console.log("%c"+di+q+"%c"+Mr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(di+q+Mr),de.raise(di)}}function je(Ue){Ue._commandRef=et()}function Ze(Ue,qt,On,Cr){je(Ue);function $r(di){return di?Cr.id(di):0}Ue._fragId=$r(Ue.static.frag),Ue._vertId=$r(Ue.static.vert);function Mr(di,ki){Object.keys(ki).forEach(function(Mi){di[Cr.id(Mi)]=!0})}var yr=Ue._uniformSet={};Mr(yr,qt.static),Mr(yr,qt.dynamic);var Oi=Ue._attributeSet={};Mr(Oi,On.static),Mr(Oi,On.dynamic),Ue._hasCount="count"in Ue.static||"count"in Ue.dynamic||"elements"in Ue.static||"elements"in Ue.dynamic}function lt(Ue,qt){var On=Je();E(Ue+" in command "+(qt||et())+(On==="unknown"?"":" called from "+On))}function en(Ue,qt,On){Ue||lt(qt,On||et())}function Le(Ue,qt,On,Cr){Ue in qt||lt("unknown parameter ("+Ue+")"+ee(On)+". possible values: "+Object.keys(qt).join(),Cr||et())}function St(Ue,qt,On,Cr){xe(Ue,qt)||lt("invalid parameter type"+ee(On)+". expected "+qt+", got "+typeof Ue,Cr||et())}function Oe(Ue){Ue()}function nt(Ue,qt,On){Ue.texture?te(Ue.texture._texture.internalformat,qt,"unsupported texture format for attachment"):te(Ue.renderbuffer._renderbuffer.format,On,"unsupported renderbuffer format for attachment")}var Ke=33071,Xe=9728,Rt=9984,bt=9985,Ie=9986,Gt=9987,mn=5120,Ln=5121,qn=5122,rr=5123,Ft=5124,Jt=5125,un=5126,Vn=32819,on=32820,Dt=33635,Vt=34042,ze=36193,rt={};rt[mn]=rt[Ln]=1,rt[qn]=rt[rr]=rt[ze]=rt[Dt]=rt[Vn]=rt[on]=2,rt[Ft]=rt[Jt]=rt[un]=rt[Vt]=4;function jt(Ue,qt){return Ue===on||Ue===Vn||Ue===Dt?2:Ue===Vt?4:rt[Ue]*qt}function U(Ue){return!(Ue&Ue-1)&&!!Ue}function pe(Ue,qt,On){var Cr,$r=qt.width,Mr=qt.height,yr=qt.channels;de($r>0&&$r<=On.maxTextureSize&&Mr>0&&Mr<=On.maxTextureSize,"invalid texture shape"),(Ue.wrapS!==Ke||Ue.wrapT!==Ke)&&de(U($r)&&U(Mr),"incompatible wrap mode for texture, both width and height must be power of 2"),qt.mipmask===1?$r!==1&&Mr!==1&&de(Ue.minFilter!==Rt&&Ue.minFilter!==Ie&&Ue.minFilter!==bt&&Ue.minFilter!==Gt,"min filter requires mipmap"):(de(U($r)&&U(Mr),"texture must be a square power of 2 to support mipmapping"),de(qt.mipmask===($r<<1)-1,"missing or incomplete mipmap data")),qt.type===un&&(On.extensions.indexOf("oes_texture_float_linear")<0&&de(Ue.minFilter===Xe&&Ue.magFilter===Xe,"filter not supported, must enable oes_texture_float_linear"),de(!Ue.genMipmaps,"mipmap generation not supported with float textures"));var Oi=qt.images;for(Cr=0;Cr<16;++Cr)if(Oi[Cr]){var di=$r>>Cr,ki=Mr>>Cr;de(qt.mipmask&1<<Cr,"missing mipmap data");var Mi=Oi[Cr];if(de(Mi.width===di&&Mi.height===ki,"invalid shape for mip images"),de(Mi.format===qt.format&&Mi.internalformat===qt.internalformat&&Mi.type===qt.type,"incompatible type for mip image"),!Mi.compressed)if(Mi.data){var Bi=Math.ceil(jt(Mi.type,yr)*di/Mi.unpackAlignment)*Mi.unpackAlignment;de(Mi.data.byteLength===Bi*ki,"invalid data for image, buffer size is inconsistent with image format")}else Mi.element||Mi.copy}else Ue.genMipmaps||de((qt.mipmask&1<<Cr)===0,"extra mipmap data");qt.compressed&&de(!Ue.genMipmaps,"mipmap generation for compressed images not supported")}function ct(Ue,qt,On,Cr){var $r=Ue.width,Mr=Ue.height,yr=Ue.channels;de($r>0&&$r<=Cr.maxTextureSize&&Mr>0&&Mr<=Cr.maxTextureSize,"invalid texture shape"),de($r===Mr,"cube map must be square"),de(qt.wrapS===Ke&&qt.wrapT===Ke,"wrap mode not supported by cube map");for(var Oi=0;Oi<On.length;++Oi){var di=On[Oi];de(di.width===$r&&di.height===Mr,"inconsistent cube map face shape"),qt.genMipmaps&&(de(!di.compressed,"can not generate mipmap for compressed textures"),de(di.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ki=di.images,Mi=0;Mi<16;++Mi){var Bi=ki[Mi];if(Bi){var Xi=$r>>Mi,mi=Mr>>Mi;de(di.mipmask&1<<Mi,"missing mipmap data"),de(Bi.width===Xi&&Bi.height===mi,"invalid shape for mip images"),de(Bi.format===Ue.format&&Bi.internalformat===Ue.internalformat&&Bi.type===Ue.type,"incompatible type for mip image"),Bi.compressed||(Bi.data?de(Bi.data.byteLength===Xi*mi*Math.max(jt(Bi.type,yr),Bi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Bi.element||Bi.copy)}}}}var he=L(de,{optional:Oe,raise:E,commandRaise:lt,command:en,parameter:ue,commandParameter:Le,constructor:Re,type:ae,commandType:St,isTypedArray:ce,nni:We,oneOf:te,shaderError:Me,linkError:Ae,callSite:Je,saveCommandRef:je,saveDrawInfo:Ze,framebufferFormat:nt,guessCommand:et,texture2D:pe,textureCube:ct}),$t=0,sn=0;function pn(Ue,qt){this.id=$t++,this.type=Ue,this.data=qt}function Dn(Ue){return Ue.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Wn(Ue){if(Ue.length===0)return[];var qt=Ue.charAt(0),On=Ue.charAt(Ue.length-1);if(Ue.length>1&&qt===On&&(qt==='"'||qt==="'"))return['"'+Dn(Ue.substr(1,Ue.length-2))+'"'];var Cr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ue);if(Cr)return Wn(Ue.substr(0,Cr.index)).concat(Wn(Cr[1])).concat(Wn(Ue.substr(Cr.index+Cr[0].length)));var $r=Ue.split(".");if($r.length===1)return['"'+Dn(Ue)+'"'];for(var Mr=[],yr=0;yr<$r.length;++yr)Mr=Mr.concat(Wn($r[yr]));return Mr}function Yn(Ue){return"["+Wn(Ue).join("][")+"]"}function fn(Ue,qt){return new pn(Ue,Yn(qt+""))}function vt(Ue){return typeof Ue=="function"&&!Ue._reglType||Ue instanceof pn}function Pt(Ue,qt){return typeof Ue=="function"?new pn(sn,Ue):Ue}var An={DynamicVariable:pn,define:fn,isDynamic:vt,unbox:Pt,accessor:Yn},Pn={next:typeof requestAnimationFrame=="function"?function(Ue){return requestAnimationFrame(Ue)}:function(Ue){return setTimeout(Ue,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ue){return cancelAnimationFrame(Ue)}:clearTimeout},Xn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function dt(){var Ue={"":0},qt=[""];return{id:function(On){var Cr=Ue[On];return Cr||(Cr=Ue[On]=qt.length,qt.push(On),Cr)},str:function(On){return qt[On]}}}function Se(Ue,qt,On){var Cr=document.createElement("canvas");L(Cr.style,{border:0,margin:0,padding:0,top:0,left:0}),Ue.appendChild(Cr),Ue===document.body&&(Cr.style.position="absolute",L(Ue.style,{margin:0,padding:0}));function $r(){var Oi=window.innerWidth,di=window.innerHeight;if(Ue!==document.body){var ki=Ue.getBoundingClientRect();Oi=ki.right-ki.left,di=ki.bottom-ki.top}Cr.width=On*Oi,Cr.height=On*di,L(Cr.style,{width:Oi+"px",height:di+"px"})}var Mr;Ue!==document.body&&typeof ResizeObserver=="function"?(Mr=new ResizeObserver(function(){setTimeout($r)}),Mr.observe(Ue)):window.addEventListener("resize",$r,!1);function yr(){Mr?Mr.disconnect():window.removeEventListener("resize",$r),Ue.removeChild(Cr)}return $r(),{canvas:Cr,onDestroy:yr}}function Be(Ue,qt){function On(Cr){try{return Ue.getContext(Cr,qt)}catch($r){return null}}return On("webgl")||On("experimental-webgl")||On("webgl-experimental")}function st(Ue){return typeof Ue.nodeName=="string"&&typeof Ue.appendChild=="function"&&typeof Ue.getBoundingClientRect=="function"}function Lt(Ue){return typeof Ue.drawArrays=="function"||typeof Ue.drawElements=="function"}function It(Ue){return typeof Ue=="string"?Ue.split():(he(Array.isArray(Ue),"invalid extension array"),Ue)}function wn(Ue){return typeof Ue=="string"?(he(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ue)):Ue}function Kn(Ue){var qt=Ue||{},On,Cr,$r,Mr,yr={},Oi=[],di=[],ki=typeof window=="undefined"?1:window.devicePixelRatio,Mi=!1,Bi=function(Ui){Ui&&he.raise(Ui)},Xi=function(){};if(typeof qt=="string"?(he(typeof document!="undefined","selector queries only supported in DOM enviroments"),On=document.querySelector(qt),he(On,"invalid query string for element")):typeof qt=="object"?st(qt)?On=qt:Lt(qt)?(Mr=qt,$r=Mr.canvas):(he.constructor(qt),"gl"in qt?Mr=qt.gl:"canvas"in qt?$r=wn(qt.canvas):"container"in qt&&(Cr=wn(qt.container)),"attributes"in qt&&(yr=qt.attributes,he.type(yr,"object","invalid context attributes")),"extensions"in qt&&(Oi=It(qt.extensions)),"optionalExtensions"in qt&&(di=It(qt.optionalExtensions)),"onDone"in qt&&(he.type(qt.onDone,"function","invalid or missing onDone callback"),Bi=qt.onDone),"profile"in qt&&(Mi=!!qt.profile),"pixelRatio"in qt&&(ki=+qt.pixelRatio,he(ki>0,"invalid pixel ratio"))):he.raise("invalid arguments to regl"),On&&(On.nodeName.toLowerCase()==="canvas"?$r=On:Cr=On),!Mr){if(!$r){he(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var mi=Se(Cr||document.body,Bi,ki);if(!mi)return null;$r=mi.canvas,Xi=mi.onDestroy}yr.premultipliedAlpha===void 0&&(yr.premultipliedAlpha=!0),Mr=Be($r,yr)}return Mr?{gl:Mr,canvas:$r,container:Cr,extensions:Oi,optionalExtensions:di,pixelRatio:ki,profile:Mi,onDone:Bi,onDestroy:Xi}:(Xi(),Bi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _r(Ue,qt){var On={};function Cr(yr){he.type(yr,"string","extension name must be string");var Oi=yr.toLowerCase(),di;try{di=On[Oi]=Ue.getExtension(Oi)}catch(ki){}return!!di}for(var $r=0;$r<qt.extensions.length;++$r){var Mr=qt.extensions[$r];if(!Cr(Mr))return qt.onDestroy(),qt.onDone('"'+Mr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qt.optionalExtensions.forEach(Cr),{extensions:On,restore:function(){Object.keys(On).forEach(function(yr){if(On[yr]&&!Cr(yr))throw new Error("(regl): error restoring extension "+yr)})}}}function Jn(Ue,qt){for(var On=Array(Ue),Cr=0;Cr<Ue;++Cr)On[Cr]=qt(Cr);return On}var Pe=5120,Te=5121,ke=5122,it=5123,At=5124,Yt=5125,hn=5126;function Et(Ue){for(var qt=16;qt<=1<<28;qt*=16)if(Ue<=qt)return qt;return 0}function Kt(Ue){var qt,On;return qt=(Ue>65535)<<4,Ue>>>=qt,On=(Ue>255)<<3,Ue>>>=On,qt|=On,On=(Ue>15)<<2,Ue>>>=On,qt|=On,On=(Ue>3)<<1,Ue>>>=On,qt|=On,qt|Ue>>1}function er(){var Ue=Jn(8,function(){return[]});function qt(Mr){var yr=Et(Mr),Oi=Ue[Kt(yr)>>2];return Oi.length>0?Oi.pop():new ArrayBuffer(yr)}function On(Mr){Ue[Kt(Mr.byteLength)>>2].push(Mr)}function Cr(Mr,yr){var Oi=null;switch(Mr){case Pe:Oi=new Int8Array(qt(yr),0,yr);break;case Te:Oi=new Uint8Array(qt(yr),0,yr);break;case ke:Oi=new Int16Array(qt(2*yr),0,yr);break;case it:Oi=new Uint16Array(qt(2*yr),0,yr);break;case At:Oi=new Int32Array(qt(4*yr),0,yr);break;case Yt:Oi=new Uint32Array(qt(4*yr),0,yr);break;case hn:Oi=new Float32Array(qt(4*yr),0,yr);break;default:return null}return Oi.length!==yr?Oi.subarray(0,yr):Oi}function $r(Mr){On(Mr.buffer)}return{alloc:qt,free:On,allocType:Cr,freeType:$r}}var br=er();br.zero=er();var Vr=3408,vr=3410,Ur=3411,_i=3412,Ai=3413,wr=3414,Ei=3415,hi=33901,ai=33902,Io=3379,xi=3386,Qo=34921,ga=36347,Po=36348,$o=35661,Fe=35660,ot=34930,Ut=36349,ln=34076,Nn=34024,Fn=7936,gn=7937,Cn=7938,pr=35724,hr=34047,ei=36063,ji=34852,Ji=3553,ti=34067,Gi=34069,Ni=33984,Gr=6408,So=5126,fi=5121,Eo=36160,Wi=36053,io=36064,Ao=16384,xs=function(Ue,qt){var On=1;qt.ext_texture_filter_anisotropic&&(On=Ue.getParameter(hr));var Cr=1,$r=1;qt.webgl_draw_buffers&&(Cr=Ue.getParameter(ji),$r=Ue.getParameter(ei));var Mr=!!qt.oes_texture_float;if(Mr){var yr=Ue.createTexture();Ue.bindTexture(Ji,yr),Ue.texImage2D(Ji,0,Gr,1,1,0,Gr,So,null);var Oi=Ue.createFramebuffer();if(Ue.bindFramebuffer(Eo,Oi),Ue.framebufferTexture2D(Eo,io,Ji,yr,0),Ue.bindTexture(Ji,null),Ue.checkFramebufferStatus(Eo)!==Wi)Mr=!1;else{Ue.viewport(0,0,1,1),Ue.clearColor(1,0,0,1),Ue.clear(Ao);var di=br.allocType(So,4);Ue.readPixels(0,0,1,1,Gr,So,di),Ue.getError()?Mr=!1:(Ue.deleteFramebuffer(Oi),Ue.deleteTexture(yr),Mr=di[0]===1),br.freeType(di)}}var ki=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Mi=!0;if(!ki){var Bi=Ue.createTexture(),Xi=br.allocType(fi,36);Ue.activeTexture(Ni),Ue.bindTexture(ti,Bi),Ue.texImage2D(Gi,0,Gr,3,3,0,Gr,fi,Xi),br.freeType(Xi),Ue.bindTexture(ti,null),Ue.deleteTexture(Bi),Mi=!Ue.getError()}return{colorBits:[Ue.getParameter(vr),Ue.getParameter(Ur),Ue.getParameter(_i),Ue.getParameter(Ai)],depthBits:Ue.getParameter(wr),stencilBits:Ue.getParameter(Ei),subpixelBits:Ue.getParameter(Vr),extensions:Object.keys(qt).filter(function(mi){return!!qt[mi]}),maxAnisotropic:On,maxDrawbuffers:Cr,maxColorAttachments:$r,pointSizeDims:Ue.getParameter(hi),lineWidthDims:Ue.getParameter(ai),maxViewportDims:Ue.getParameter(xi),maxCombinedTextureUnits:Ue.getParameter($o),maxCubeMapSize:Ue.getParameter(ln),maxRenderbufferSize:Ue.getParameter(Nn),maxTextureUnits:Ue.getParameter(ot),maxTextureSize:Ue.getParameter(Io),maxAttributes:Ue.getParameter(Qo),maxVertexUniforms:Ue.getParameter(ga),maxVertexTextureUnits:Ue.getParameter(Fe),maxVaryingVectors:Ue.getParameter(Po),maxFragmentUniforms:Ue.getParameter(Ut),glsl:Ue.getParameter(pr),renderer:Ue.getParameter(gn),vendor:Ue.getParameter(Fn),version:Ue.getParameter(Cn),readFloat:Mr,npotTextureCube:Mi}};function ya(Ue){return!!Ue&&typeof Ue=="object"&&Array.isArray(Ue.shape)&&Array.isArray(Ue.stride)&&typeof Ue.offset=="number"&&Ue.shape.length===Ue.stride.length&&(Array.isArray(Ue.data)||G(Ue.data))}var ra=function(Ue){return Object.keys(Ue).map(function(qt){return Ue[qt]})},gs={shape:Si,flatten:Lr};function as(Ue,qt,On){for(var Cr=0;Cr<qt;++Cr)On[Cr]=Ue[Cr]}function Ct(Ue,qt,On,Cr){for(var $r=0,Mr=0;Mr<qt;++Mr)for(var yr=Ue[Mr],Oi=0;Oi<On;++Oi)Cr[$r++]=yr[Oi]}function Wt(Ue,qt,On,Cr,$r,Mr){for(var yr=Mr,Oi=0;Oi<qt;++Oi)for(var di=Ue[Oi],ki=0;ki<On;++ki)for(var Mi=di[ki],Bi=0;Bi<Cr;++Bi)$r[yr++]=Mi[Bi]}function jn(Ue,qt,On,Cr,$r){for(var Mr=1,yr=On+1;yr<qt.length;++yr)Mr*=qt[yr];var Oi=qt[On];if(qt.length-On===4){var di=qt[On+1],ki=qt[On+2],Mi=qt[On+3];for(yr=0;yr<Oi;++yr)Wt(Ue[yr],di,ki,Mi,Cr,$r),$r+=Mr}else for(yr=0;yr<Oi;++yr)jn(Ue[yr],qt,On+1,Cr,$r),$r+=Mr}function Lr(Ue,qt,On,Cr){var $r=1;if(qt.length)for(var Mr=0;Mr<qt.length;++Mr)$r*=qt[Mr];else $r=0;var yr=Cr||br.allocType(On,$r);switch(qt.length){case 0:break;case 1:as(Ue,qt[0],yr);break;case 2:Ct(Ue,qt[0],qt[1],yr);break;case 3:Wt(Ue,qt[0],qt[1],qt[2],yr,0);break;default:jn(Ue,qt,0,yr,0)}return yr}function Si(Ue){for(var qt=[],On=Ue;On.length;On=On[0])qt.push(On.length);return qt}var Zi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Jo=5120,Hs=5122,Is=5124,Us=5121,dl=5123,Ph=5125,Up=5126,hh=5126,uu={int8:Jo,int16:Hs,int32:Is,uint8:Us,uint16:dl,uint32:Ph,float:Up,float32:hh},Df=35048,Jc=35040,cu={dynamic:Df,stream:Jc,static:35044},Eu=gs.flatten,ef=gs.shape,Lf=35044,fu=35040,Ds=5121,$u=5126,tf=[];tf[5120]=1,tf[5122]=2,tf[5124]=4,tf[5121]=1,tf[5123]=2,tf[5125]=4,tf[5126]=4;function _d(Ue){return Zi[Object.prototype.toString.call(Ue)]|0}function tp(Ue,qt){for(var On=0;On<qt.length;++On)Ue[On]=qt[On]}function dh(Ue,qt,On,Cr,$r,Mr,yr){for(var Oi=0,di=0;di<On;++di)for(var ki=0;ki<Cr;++ki)Ue[Oi++]=qt[$r*di+Mr*ki+yr]}function bd(Ue,qt,On,Cr){var $r=0,Mr={};function yr(dr){this.id=$r++,this.buffer=Ue.createBuffer(),this.type=dr,this.usage=Lf,this.byteLength=0,this.dimension=1,this.dtype=Ds,this.persistentData=null,On.profile&&(this.stats={size:0})}yr.prototype.bind=function(){Ue.bindBuffer(this.type,this.buffer)},yr.prototype.destroy=function(){Xi(this)};var Oi=[];function di(dr,Br){var gi=Oi.pop();return gi||(gi=new yr(dr)),gi.bind(),Bi(gi,Br,fu,0,1,!1),gi}function ki(dr){Oi.push(dr)}function Mi(dr,Br,gi){dr.byteLength=Br.byteLength,Ue.bufferData(dr.type,Br,gi)}function Bi(dr,Br,gi,oo,ii,to){var bi;if(dr.usage=gi,Array.isArray(Br)){if(dr.dtype=oo||$u,Br.length>0){var no;if(Array.isArray(Br[0])){bi=ef(Br);for(var li=1,pi=1;pi<bi.length;++pi)li*=bi[pi];dr.dimension=li,no=Eu(Br,bi,dr.dtype),Mi(dr,no,gi),to?dr.persistentData=no:br.freeType(no)}else if(typeof Br[0]=="number"){dr.dimension=ii;var jo=br.allocType(dr.dtype,Br.length);tp(jo,Br),Mi(dr,jo,gi),to?dr.persistentData=jo:br.freeType(jo)}else G(Br[0])?(dr.dimension=Br[0].length,dr.dtype=oo||_d(Br[0])||$u,no=Eu(Br,[Br.length,Br[0].length],dr.dtype),Mi(dr,no,gi),to?dr.persistentData=no:br.freeType(no)):he.raise("invalid buffer data")}}else if(G(Br))dr.dtype=oo||_d(Br),dr.dimension=ii,Mi(dr,Br,gi),to&&(dr.persistentData=new Uint8Array(new Uint8Array(Br.buffer)));else if(ya(Br)){bi=Br.shape;var pa=Br.stride,Ki=Br.offset,wi=0,qr=0,Bo=0,Ca=0;bi.length===1?(wi=bi[0],qr=1,Bo=pa[0],Ca=0):bi.length===2?(wi=bi[0],qr=bi[1],Bo=pa[0],Ca=pa[1]):he.raise("invalid shape"),dr.dtype=oo||_d(Br.data)||$u,dr.dimension=qr;var so=br.allocType(dr.dtype,wi*qr);dh(so,Br.data,wi,qr,Bo,Ca,Ki),Mi(dr,so,gi),to?dr.persistentData=so:br.freeType(so)}else Br instanceof ArrayBuffer?(dr.dtype=Ds,dr.dimension=ii,Mi(dr,Br,gi),to&&(dr.persistentData=new Uint8Array(new Uint8Array(Br)))):he.raise("invalid buffer data")}function Xi(dr){qt.bufferCount--,Cr(dr);var Br=dr.buffer;he(Br,"buffer must not be deleted already"),Ue.deleteBuffer(Br),dr.buffer=null,delete Mr[dr.id]}function mi(dr,Br,gi,oo){qt.bufferCount++;var ii=new yr(Br);Mr[ii.id]=ii;function to(li){var pi=Lf,jo=null,pa=0,Ki=0,wi=1;return Array.isArray(li)||G(li)||ya(li)||li instanceof ArrayBuffer?jo=li:typeof li=="number"?pa=li|0:li&&(he.type(li,"object","buffer arguments must be an object, a number or an array"),"data"in li&&(he(jo===null||Array.isArray(jo)||G(jo)||ya(jo),"invalid data for buffer"),jo=li.data),"usage"in li&&(he.parameter(li.usage,cu,"invalid buffer usage"),pi=cu[li.usage]),"type"in li&&(he.parameter(li.type,uu,"invalid buffer type"),Ki=uu[li.type]),"dimension"in li&&(he.type(li.dimension,"number","invalid dimension"),wi=li.dimension|0),"length"in li&&(he.nni(pa,"buffer length must be a nonnegative integer"),pa=li.length|0)),ii.bind(),jo?Bi(ii,jo,pi,Ki,wi,oo):(pa&&Ue.bufferData(ii.type,pa,pi),ii.dtype=Ki||Ds,ii.usage=pi,ii.dimension=wi,ii.byteLength=pa),On.profile&&(ii.stats.size=ii.byteLength*tf[ii.dtype]),to}function bi(li,pi){he(pi+li.byteLength<=ii.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+li.byteLength+" starting from offset "+pi+" to a buffer of size "+ii.byteLength),Ue.bufferSubData(ii.type,pi,li)}function no(li,pi){var jo=(pi||0)|0,pa;if(ii.bind(),G(li)||li instanceof ArrayBuffer)bi(li,jo);else if(Array.isArray(li)){if(li.length>0)if(typeof li[0]=="number"){var Ki=br.allocType(ii.dtype,li.length);tp(Ki,li),bi(Ki,jo),br.freeType(Ki)}else if(Array.isArray(li[0])||G(li[0])){pa=ef(li);var wi=Eu(li,pa,ii.dtype);bi(wi,jo),br.freeType(wi)}else he.raise("invalid buffer data")}else if(ya(li)){pa=li.shape;var qr=li.stride,Bo=0,Ca=0,so=0,va=0;pa.length===1?(Bo=pa[0],Ca=1,so=qr[0],va=0):pa.length===2?(Bo=pa[0],Ca=pa[1],so=qr[0],va=qr[1]):he.raise("invalid shape");var ua=Array.isArray(li.data)?ii.dtype:_d(li.data),Ko=br.allocType(ua,Bo*Ca);dh(Ko,li.data,Bo,Ca,so,va,li.offset),bi(Ko,jo),br.freeType(Ko)}else he.raise("invalid data for buffer subdata");return to}return gi||to(dr),to._reglType="buffer",to._buffer=ii,to.subdata=no,On.profile&&(to.stats=ii.stats),to.destroy=function(){Xi(ii)},to}function Ui(){ra(Mr).forEach(function(dr){dr.buffer=Ue.createBuffer(),Ue.bindBuffer(dr.type,dr.buffer),Ue.bufferData(dr.type,dr.persistentData||dr.byteLength,dr.usage)})}return On.profile&&(qt.getTotalBufferSize=function(){var dr=0;return Object.keys(Mr).forEach(function(Br){dr+=Mr[Br].stats.size}),dr}),{create:mi,createStream:di,destroyStream:ki,clear:function(){ra(Mr).forEach(Xi),Oi.forEach(Xi)},getBuffer:function(dr){return dr&&dr._buffer instanceof yr?dr._buffer:null},restore:Ui,_initBuffer:Bi}}var ph=0,Ih=0,Dh=1,xd=1,c0=4,nf=4,Fc={points:ph,point:Ih,lines:Dh,line:xd,triangles:c0,triangle:nf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ed=0,Gl=1,xc=4,rf=5120,hu=5121,Bc=5122,uc=5123,mf=5124,Fl=5125,of=34963,gf=35040,Sd=35044;function wd(Ue,qt,On,Cr){var $r={},Mr=0,yr={uint8:hu,uint16:uc};qt.oes_element_index_uint&&(yr.uint32=Fl);function Oi(Ui){this.id=Mr++,$r[this.id]=this,this.buffer=Ui,this.primType=xc,this.vertCount=0,this.type=0}Oi.prototype.bind=function(){this.buffer.bind()};var di=[];function ki(Ui){var dr=di.pop();return dr||(dr=new Oi(On.create(null,of,!0,!1)._buffer)),Bi(dr,Ui,gf,-1,-1,0,0),dr}function Mi(Ui){di.push(Ui)}function Bi(Ui,dr,Br,gi,oo,ii,to){Ui.buffer.bind();var bi;if(dr){var no=to;!to&&(!G(dr)||ya(dr)&&!G(dr.data))&&(no=qt.oes_element_index_uint?Fl:uc),On._initBuffer(Ui.buffer,dr,Br,no,3)}else Ue.bufferData(of,ii,Br),Ui.buffer.dtype=bi||hu,Ui.buffer.usage=Br,Ui.buffer.dimension=3,Ui.buffer.byteLength=ii;if(bi=to,!to){switch(Ui.buffer.dtype){case hu:case rf:bi=hu;break;case uc:case Bc:bi=uc;break;case Fl:case mf:bi=Fl;break;default:he.raise("unsupported type for element array")}Ui.buffer.dtype=bi}Ui.type=bi,he(bi!==Fl||!!qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var li=oo;li<0&&(li=Ui.buffer.byteLength,bi===uc?li>>=1:bi===Fl&&(li>>=2)),Ui.vertCount=li;var pi=gi;if(gi<0){pi=xc;var jo=Ui.buffer.dimension;jo===1&&(pi=Ed),jo===2&&(pi=Gl),jo===3&&(pi=xc)}Ui.primType=pi}function Xi(Ui){Cr.elementsCount--,he(Ui.buffer!==null,"must not double destroy elements"),delete $r[Ui.id],Ui.buffer.destroy(),Ui.buffer=null}function mi(Ui,dr){var Br=On.create(null,of,!0),gi=new Oi(Br._buffer);Cr.elementsCount++;function oo(ii){if(!ii)Br(),gi.primType=xc,gi.vertCount=0,gi.type=hu;else if(typeof ii=="number")Br(ii),gi.primType=xc,gi.vertCount=ii|0,gi.type=hu;else{var to=null,bi=Sd,no=-1,li=-1,pi=0,jo=0;Array.isArray(ii)||G(ii)||ya(ii)?to=ii:(he.type(ii,"object","invalid arguments for elements"),"data"in ii&&(to=ii.data,he(Array.isArray(to)||G(to)||ya(to),"invalid data for element buffer")),"usage"in ii&&(he.parameter(ii.usage,cu,"invalid element buffer usage"),bi=cu[ii.usage]),"primitive"in ii&&(he.parameter(ii.primitive,Fc,"invalid element buffer primitive"),no=Fc[ii.primitive]),"count"in ii&&(he(typeof ii.count=="number"&&ii.count>=0,"invalid vertex count for elements"),li=ii.count|0),"type"in ii&&(he.parameter(ii.type,yr,"invalid buffer type"),jo=yr[ii.type]),"length"in ii?pi=ii.length|0:(pi=li,jo===uc||jo===Bc?pi*=2:(jo===Fl||jo===mf)&&(pi*=4))),Bi(gi,to,bi,no,li,pi,jo)}return oo}return oo(Ui),oo._reglType="elements",oo._elements=gi,oo.subdata=function(ii,to){return Br.subdata(ii,to),oo},oo.destroy=function(){Xi(gi)},oo}return{create:mi,createStream:ki,destroyStream:Mi,getElements:function(Ui){return typeof Ui=="function"&&Ui._elements instanceof Oi?Ui._elements:null},clear:function(){ra($r).forEach(Xi)}}}var ys=new Float32Array(1),np=new Uint32Array(ys.buffer),Xf=5123;function Lh(Ue){for(var qt=br.allocType(Xf,Ue.length),On=0;On<Ue.length;++On)if(isNaN(Ue[On]))qt[On]=65535;else if(Ue[On]===1/0)qt[On]=31744;else if(Ue[On]===-1/0)qt[On]=64512;else{ys[0]=Ue[On];var Cr=np[0],$r=Cr>>>31<<15,Mr=(Cr<<1>>>24)-127,yr=Cr>>13&1023;if(Mr<-24)qt[On]=$r;else if(Mr<-14){var Oi=-14-Mr;qt[On]=$r+(yr+1024>>Oi)}else Mr>15?qt[On]=$r+31744:qt[On]=$r+(Mr+15<<10)+yr}return qt}function pl(Ue){return Array.isArray(Ue)||G(Ue)}var Nh=function(Ue){return!(Ue&Ue-1)&&!!Ue},oe=34467,_e=3553,tt=34067,cn=34069,En=6408,re=6406,Nr=6407,Di=6409,Vi=6410,xo=32854,yo=32855,za=36194,ba=32819,go=32820,Ua=33635,ja=34042,xa=6402,Es=34041,$a=35904,Ea=35906,Va=36193,js=33776,Ql=33777,Xs=33778,cl=33779,af=35986,Fh=35987,kc=34798,du=35840,Td=35841,Ad=35842,yf=35843,Nf=36196,sf=5121,vh=5123,mh=5125,Ff=5126,f0=10242,rp=10243,jp=10497,_f=33071,h0=33648,ip=10240,Cd=10241,bf=9728,Vp=9729,gh=9984,op=9985,Yf=9986,Ks=9987,Od=33170,xf=4352,$f=4353,La=4354,fe=34046,Ge=3317,xt=37440,Rn=37441,ur=37443,Fr=37444,ci=33984,Ri=[gh,Yf,op,Ks],Wo=[0,Di,Vi,Nr,En],Go={};Go[Di]=Go[re]=Go[xa]=1,Go[Es]=Go[Vi]=2,Go[Nr]=Go[$a]=3,Go[En]=Go[Ea]=4;function la(Ue){return"[object "+Ue+"]"}var ol=la("HTMLCanvasElement"),Al=la("OffscreenCanvas"),Ss=la("CanvasRenderingContext2D"),eo=la("ImageBitmap"),Bl=la("HTMLImageElement"),yh=la("HTMLVideoElement"),Bh=Object.keys(Zi).concat([ol,Al,Ss,eo,Bl,yh]),qa=[];qa[sf]=1,qa[Ff]=4,qa[Va]=2,qa[vh]=2,qa[mh]=4;var Ls=[];Ls[xo]=2,Ls[yo]=2,Ls[za]=2,Ls[Es]=4,Ls[js]=.5,Ls[Ql]=.5,Ls[Xs]=1,Ls[cl]=1,Ls[af]=.5,Ls[Fh]=1,Ls[kc]=1,Ls[du]=.5,Ls[Td]=.25,Ls[Ad]=.5,Ls[yf]=.25,Ls[Nf]=.5;function lf(Ue){return Array.isArray(Ue)&&(Ue.length===0||typeof Ue[0]=="number")}function Fi(Ue){if(!Array.isArray(Ue))return!1;var qt=Ue.length;return!(qt===0||!pl(Ue[0]))}function Ef(Ue){return Object.prototype.toString.call(Ue)}function Md(Ue){return Ef(Ue)===ol}function _h(Ue){return Ef(Ue)===Al}function Sf(Ue){return Ef(Ue)===Ss}function cc(Ue){return Ef(Ue)===eo}function d0(Ue){return Ef(Ue)===Bl}function bh(Ue){return Ef(Ue)===yh}function qu(Ue){if(!Ue)return!1;var qt=Ef(Ue);return Bh.indexOf(qt)>=0?!0:lf(Ue)||Fi(Ue)||ya(Ue)}function qf(Ue){return Zi[Object.prototype.toString.call(Ue)]|0}function p0(Ue,qt){var On=qt.length;switch(Ue.type){case sf:case vh:case mh:case Ff:var Cr=br.allocType(Ue.type,On);Cr.set(qt),Ue.data=Cr;break;case Va:Ue.data=Lh(qt);break;default:he.raise("unsupported texture type, must specify a typed array")}}function Rd(Ue,qt){return br.allocType(Ue.type===Va?Ff:Ue.type,qt)}function v0(Ue,qt){Ue.type===Va?(Ue.data=Lh(qt),br.freeType(qt)):Ue.data=qt}function rv(Ue,qt,On,Cr,$r,Mr){for(var yr=Ue.width,Oi=Ue.height,di=Ue.channels,ki=yr*Oi*di,Mi=Rd(Ue,ki),Bi=0,Xi=0;Xi<Oi;++Xi)for(var mi=0;mi<yr;++mi)for(var Ui=0;Ui<di;++Ui)Mi[Bi++]=qt[On*mi+Cr*Xi+$r*Ui+Mr];v0(Ue,Mi)}function fc(Ue,qt,On,Cr,$r,Mr){var yr;if(typeof Ls[Ue]!="undefined"?yr=Ls[Ue]:yr=Go[Ue]*qa[qt],Mr&&(yr*=6),$r){for(var Oi=0,di=On;di>=1;)Oi+=yr*di*di,di/=2;return Oi}else return yr*On*Cr}function zc(Ue,qt,On,Cr,$r,Mr,yr){var Oi={"don't care":xf,"dont care":xf,nice:La,fast:$f},di={repeat:jp,clamp:_f,mirror:h0},ki={nearest:bf,linear:Vp},Mi=L({mipmap:Ks,"nearest mipmap nearest":gh,"linear mipmap nearest":op,"nearest mipmap linear":Yf,"linear mipmap linear":Ks},ki),Bi={none:0,browser:Fr},Xi={uint8:sf,rgba4:ba,rgb565:Ua,"rgb5 a1":go},mi={alpha:re,luminance:Di,"luminance alpha":Vi,rgb:Nr,rgba:En,rgba4:xo,"rgb5 a1":yo,rgb565:za},Ui={};qt.ext_srgb&&(mi.srgb=$a,mi.srgba=Ea),qt.oes_texture_float&&(Xi.float32=Xi.float=Ff),qt.oes_texture_half_float&&(Xi.float16=Xi["half float"]=Va),qt.webgl_depth_texture&&(L(mi,{depth:xa,"depth stencil":Es}),L(Xi,{uint16:vh,uint32:mh,"depth stencil":ja})),qt.webgl_compressed_texture_s3tc&&L(Ui,{"rgb s3tc dxt1":js,"rgba s3tc dxt1":Ql,"rgba s3tc dxt3":Xs,"rgba s3tc dxt5":cl}),qt.webgl_compressed_texture_atc&&L(Ui,{"rgb atc":af,"rgba atc explicit alpha":Fh,"rgba atc interpolated alpha":kc}),qt.webgl_compressed_texture_pvrtc&&L(Ui,{"rgb pvrtc 4bppv1":du,"rgb pvrtc 2bppv1":Td,"rgba pvrtc 4bppv1":Ad,"rgba pvrtc 2bppv1":yf}),qt.webgl_compressed_texture_etc1&&(Ui["rgb etc1"]=Nf);var dr=Array.prototype.slice.call(Ue.getParameter(oe));Object.keys(Ui).forEach(function(_n){var Or=Ui[_n];dr.indexOf(Or)>=0&&(mi[_n]=Or)});var Br=Object.keys(mi);On.textureFormats=Br;var gi=[];Object.keys(mi).forEach(function(_n){var Or=mi[_n];gi[Or]=_n});var oo=[];Object.keys(Xi).forEach(function(_n){var Or=Xi[_n];oo[Or]=_n});var ii=[];Object.keys(ki).forEach(function(_n){var Or=ki[_n];ii[Or]=_n});var to=[];Object.keys(Mi).forEach(function(_n){var Or=Mi[_n];to[Or]=_n});var bi=[];Object.keys(di).forEach(function(_n){var Or=di[_n];bi[Or]=_n});var no=Br.reduce(function(_n,Or){var Sr=mi[Or];return Sr===Di||Sr===re||Sr===Di||Sr===Vi||Sr===xa||Sr===Es||qt.ext_srgb&&(Sr===$a||Sr===Ea)?_n[Sr]=Sr:Sr===yo||Or.indexOf("rgba")>=0?_n[Sr]=En:_n[Sr]=Nr,_n},{});function li(){this.internalformat=En,this.format=En,this.type=sf,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Fr,this.width=0,this.height=0,this.channels=0}function pi(_n,Or){_n.internalformat=Or.internalformat,_n.format=Or.format,_n.type=Or.type,_n.compressed=Or.compressed,_n.premultiplyAlpha=Or.premultiplyAlpha,_n.flipY=Or.flipY,_n.unpackAlignment=Or.unpackAlignment,_n.colorSpace=Or.colorSpace,_n.width=Or.width,_n.height=Or.height,_n.channels=Or.channels}function jo(_n,Or){if(!(typeof Or!="object"||!Or)){if("premultiplyAlpha"in Or&&(he.type(Or.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),_n.premultiplyAlpha=Or.premultiplyAlpha),"flipY"in Or&&(he.type(Or.flipY,"boolean","invalid texture flip"),_n.flipY=Or.flipY),"alignment"in Or&&(he.oneOf(Or.alignment,[1,2,4,8],"invalid texture unpack alignment"),_n.unpackAlignment=Or.alignment),"colorSpace"in Or&&(he.parameter(Or.colorSpace,Bi,"invalid colorSpace"),_n.colorSpace=Bi[Or.colorSpace]),"type"in Or){var Sr=Or.type;he(qt.oes_texture_float||!(Sr==="float"||Sr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),he(qt.oes_texture_half_float||!(Sr==="half float"||Sr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),he(qt.webgl_depth_texture||!(Sr==="uint16"||Sr==="uint32"||Sr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),he.parameter(Sr,Xi,"invalid texture type"),_n.type=Xi[Sr]}var lo=_n.width,Na=_n.height,el=_n.channels,Nt=!1;"shape"in Or?(he(Array.isArray(Or.shape)&&Or.shape.length>=2,"shape must be an array"),lo=Or.shape[0],Na=Or.shape[1],Or.shape.length===3&&(el=Or.shape[2],he(el>0&&el<=4,"invalid number of channels"),Nt=!0),he(lo>=0&&lo<=On.maxTextureSize,"invalid width"),he(Na>=0&&Na<=On.maxTextureSize,"invalid height")):("radius"in Or&&(lo=Na=Or.radius,he(lo>=0&&lo<=On.maxTextureSize,"invalid radius")),"width"in Or&&(lo=Or.width,he(lo>=0&&lo<=On.maxTextureSize,"invalid width")),"height"in Or&&(Na=Or.height,he(Na>=0&&Na<=On.maxTextureSize,"invalid height")),"channels"in Or&&(el=Or.channels,he(el>0&&el<=4,"invalid number of channels"),Nt=!0)),_n.width=lo|0,_n.height=Na|0,_n.channels=el|0;var rn=!1;if("format"in Or){var Mn=Or.format;he(qt.webgl_depth_texture||!(Mn==="depth"||Mn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),he.parameter(Mn,mi,"invalid texture format");var Tr=_n.internalformat=mi[Mn];_n.format=no[Tr],Mn in Xi&&("type"in Or||(_n.type=Xi[Mn])),Mn in Ui&&(_n.compressed=!0),rn=!0}!Nt&&rn?_n.channels=Go[_n.format]:Nt&&!rn?_n.channels!==Wo[_n.format]&&(_n.format=_n.internalformat=Wo[_n.channels]):rn&&Nt&&he(_n.channels===Go[_n.format],"number of channels inconsistent with specified format")}}function pa(_n){Ue.pixelStorei(xt,_n.flipY),Ue.pixelStorei(Rn,_n.premultiplyAlpha),Ue.pixelStorei(ur,_n.colorSpace),Ue.pixelStorei(Ge,_n.unpackAlignment)}function Ki(){li.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function wi(_n,Or){var Sr=null;if(qu(Or)?Sr=Or:Or&&(he.type(Or,"object","invalid pixel data type"),jo(_n,Or),"x"in Or&&(_n.xOffset=Or.x|0),"y"in Or&&(_n.yOffset=Or.y|0),qu(Or.data)&&(Sr=Or.data)),he(!_n.compressed||Sr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Or.copy){he(!Sr,"can not specify copy and data field for the same texture");var lo=$r.viewportWidth,Na=$r.viewportHeight;_n.width=_n.width||lo-_n.xOffset,_n.height=_n.height||Na-_n.yOffset,_n.needsCopy=!0,he(_n.xOffset>=0&&_n.xOffset<lo&&_n.yOffset>=0&&_n.yOffset<Na&&_n.width>0&&_n.width<=lo&&_n.height>0&&_n.height<=Na,"copy texture read out of bounds")}else if(!Sr)_n.width=_n.width||1,_n.height=_n.height||1,_n.channels=_n.channels||4;else if(G(Sr))_n.channels=_n.channels||4,_n.data=Sr,!("type"in Or)&&_n.type===sf&&(_n.type=qf(Sr));else if(lf(Sr))_n.channels=_n.channels||4,p0(_n,Sr),_n.alignment=1,_n.needsFree=!0;else if(ya(Sr)){var el=Sr.data;!Array.isArray(el)&&_n.type===sf&&(_n.type=qf(el));var Nt=Sr.shape,rn=Sr.stride,Mn,Tr,Er,Hn,tr,ar;Nt.length===3?(Er=Nt[2],ar=rn[2]):(he(Nt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Er=1,ar=1),Mn=Nt[0],Tr=Nt[1],Hn=rn[0],tr=rn[1],_n.alignment=1,_n.width=Mn,_n.height=Tr,_n.channels=Er,_n.format=_n.internalformat=Wo[Er],_n.needsFree=!0,rv(_n,el,Hn,tr,ar,Sr.offset)}else if(Md(Sr)||_h(Sr)||Sf(Sr))Md(Sr)||_h(Sr)?_n.element=Sr:_n.element=Sr.canvas,_n.width=_n.element.width,_n.height=_n.element.height,_n.channels=4;else if(cc(Sr))_n.element=Sr,_n.width=Sr.width,_n.height=Sr.height,_n.channels=4;else if(d0(Sr))_n.element=Sr,_n.width=Sr.naturalWidth,_n.height=Sr.naturalHeight,_n.channels=4;else if(bh(Sr))_n.element=Sr,_n.width=Sr.videoWidth,_n.height=Sr.videoHeight,_n.channels=4;else if(Fi(Sr)){var Sn=_n.width||Sr[0].length,Zn=_n.height||Sr.length,tn=_n.channels;pl(Sr[0][0])?tn=tn||Sr[0][0].length:tn=tn||1;for(var $n=gs.shape(Sr),kr=1,jr=0;jr<$n.length;++jr)kr*=$n[jr];var vi=Rd(_n,kr);gs.flatten(Sr,$n,"",vi),v0(_n,vi),_n.alignment=1,_n.width=Sn,_n.height=Zn,_n.channels=tn,_n.format=_n.internalformat=Wo[tn],_n.needsFree=!0}_n.type===Ff?he(On.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):_n.type===Va&&he(On.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qr(_n,Or,Sr){var lo=_n.element,Na=_n.data,el=_n.internalformat,Nt=_n.format,rn=_n.type,Mn=_n.width,Tr=_n.height;pa(_n),lo?Ue.texImage2D(Or,Sr,Nt,Nt,rn,lo):_n.compressed?Ue.compressedTexImage2D(Or,Sr,el,Mn,Tr,0,Na):_n.needsCopy?(Cr(),Ue.copyTexImage2D(Or,Sr,Nt,_n.xOffset,_n.yOffset,Mn,Tr,0)):Ue.texImage2D(Or,Sr,Nt,Mn,Tr,0,Nt,rn,Na||null)}function Bo(_n,Or,Sr,lo,Na){var el=_n.element,Nt=_n.data,rn=_n.internalformat,Mn=_n.format,Tr=_n.type,Er=_n.width,Hn=_n.height;pa(_n),el?Ue.texSubImage2D(Or,Na,Sr,lo,Mn,Tr,el):_n.compressed?Ue.compressedTexSubImage2D(Or,Na,Sr,lo,rn,Er,Hn,Nt):_n.needsCopy?(Cr(),Ue.copyTexSubImage2D(Or,Na,Sr,lo,_n.xOffset,_n.yOffset,Er,Hn)):Ue.texSubImage2D(Or,Na,Sr,lo,Er,Hn,Mn,Tr,Nt)}var Ca=[];function so(){return Ca.pop()||new Ki}function va(_n){_n.needsFree&&br.freeType(_n.data),Ki.call(_n),Ca.push(_n)}function ua(){li.call(this),this.genMipmaps=!1,this.mipmapHint=xf,this.mipmask=0,this.images=Array(16)}function Ko(_n,Or,Sr){var lo=_n.images[0]=so();_n.mipmask=1,lo.width=_n.width=Or,lo.height=_n.height=Sr,lo.channels=_n.channels=4}function ds(_n,Or){var Sr=null;if(qu(Or))Sr=_n.images[0]=so(),pi(Sr,_n),wi(Sr,Or),_n.mipmask=1;else if(jo(_n,Or),Array.isArray(Or.mipmap))for(var lo=Or.mipmap,Na=0;Na<lo.length;++Na)Sr=_n.images[Na]=so(),pi(Sr,_n),Sr.width>>=Na,Sr.height>>=Na,wi(Sr,lo[Na]),_n.mipmask|=1<<Na;else Sr=_n.images[0]=so(),pi(Sr,_n),wi(Sr,Or),_n.mipmask=1;pi(_n,_n.images[0]),_n.compressed&&(_n.internalformat===js||_n.internalformat===Ql||_n.internalformat===Xs||_n.internalformat===cl)&&he(_n.width%4===0&&_n.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Wl(_n,Or){for(var Sr=_n.images,lo=0;lo<Sr.length;++lo){if(!Sr[lo])return;qr(Sr[lo],Or,lo)}}var mu=[];function es(){var _n=mu.pop()||new ua;li.call(_n),_n.mipmask=0;for(var Or=0;Or<16;++Or)_n.images[Or]=null;return _n}function Zl(_n){for(var Or=_n.images,Sr=0;Sr<Or.length;++Sr)Or[Sr]&&va(Or[Sr]),Or[Sr]=null;mu.push(_n)}function Qs(){this.minFilter=bf,this.magFilter=bf,this.wrapS=_f,this.wrapT=_f,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=xf}function se(_n,Or){if("min"in Or){var Sr=Or.min;he.parameter(Sr,Mi),_n.minFilter=Mi[Sr],Ri.indexOf(_n.minFilter)>=0&&!("faces"in Or)&&(_n.genMipmaps=!0)}if("mag"in Or){var lo=Or.mag;he.parameter(lo,ki),_n.magFilter=ki[lo]}var Na=_n.wrapS,el=_n.wrapT;if("wrap"in Or){var Nt=Or.wrap;typeof Nt=="string"?(he.parameter(Nt,di),Na=el=di[Nt]):Array.isArray(Nt)&&(he.parameter(Nt[0],di),he.parameter(Nt[1],di),Na=di[Nt[0]],el=di[Nt[1]])}else{if("wrapS"in Or){var rn=Or.wrapS;he.parameter(rn,di),Na=di[rn]}if("wrapT"in Or){var Mn=Or.wrapT;he.parameter(Mn,di),el=di[Mn]}}if(_n.wrapS=Na,_n.wrapT=el,"anisotropic"in Or){var Tr=Or.anisotropic;he(typeof Tr=="number"&&Tr>=1&&Tr<=On.maxAnisotropic,"aniso samples must be between 1 and "),_n.anisotropic=Or.anisotropic}if("mipmap"in Or){var Er=!1;switch(typeof Or.mipmap){case"string":he.parameter(Or.mipmap,Oi,"invalid mipmap hint"),_n.mipmapHint=Oi[Or.mipmap],_n.genMipmaps=!0,Er=!0;break;case"boolean":Er=_n.genMipmaps=Or.mipmap;break;case"object":he(Array.isArray(Or.mipmap),"invalid mipmap type"),_n.genMipmaps=!1,Er=!0;break;default:he.raise("invalid mipmap type")}Er&&!("min"in Or)&&(_n.minFilter=gh)}}function tu(_n,Or){Ue.texParameteri(Or,Cd,_n.minFilter),Ue.texParameteri(Or,ip,_n.magFilter),Ue.texParameteri(Or,f0,_n.wrapS),Ue.texParameteri(Or,rp,_n.wrapT),qt.ext_texture_filter_anisotropic&&Ue.texParameteri(Or,fe,_n.anisotropic),_n.genMipmaps&&(Ue.hint(Od,_n.mipmapHint),Ue.generateMipmap(Or))}var fl=0,or={},Qr=On.maxTextureUnits,Js=Array(Qr).map(function(){return null});function Oa(_n){li.call(this),this.mipmask=0,this.internalformat=En,this.id=fl++,this.refCount=1,this.target=_n,this.texture=Ue.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qs,yr.profile&&(this.stats={size:0})}function Hu(_n){Ue.activeTexture(ci),Ue.bindTexture(_n.target,_n.texture)}function Ns(){var _n=Js[0];_n?Ue.bindTexture(_n.target,_n.texture):Ue.bindTexture(_e,null)}function oa(_n){var Or=_n.texture;he(Or,"must not double destroy texture");var Sr=_n.unit,lo=_n.target;Sr>=0&&(Ue.activeTexture(ci+Sr),Ue.bindTexture(lo,null),Js[Sr]=null),Ue.deleteTexture(Or),_n.texture=null,_n.params=null,_n.pixels=null,_n.refCount=0,delete or[_n.id],Mr.textureCount--}L(Oa.prototype,{bind:function(){var _n=this;_n.bindCount+=1;var Or=_n.unit;if(Or<0){for(var Sr=0;Sr<Qr;++Sr){var lo=Js[Sr];if(lo){if(lo.bindCount>0)continue;lo.unit=-1}Js[Sr]=_n,Or=Sr;break}Or>=Qr&&he.raise("insufficient number of texture units"),yr.profile&&Mr.maxTextureUnits<Or+1&&(Mr.maxTextureUnits=Or+1),_n.unit=Or,Ue.activeTexture(ci+Or),Ue.bindTexture(_n.target,_n.texture)}return Or},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&oa(this)}});function Pa(_n,Or){var Sr=new Oa(_e);or[Sr.id]=Sr,Mr.textureCount++;function lo(Nt,rn){var Mn=Sr.texInfo;Qs.call(Mn);var Tr=es();return typeof Nt=="number"?typeof rn=="number"?Ko(Tr,Nt|0,rn|0):Ko(Tr,Nt|0,Nt|0):Nt?(he.type(Nt,"object","invalid arguments to regl.texture"),se(Mn,Nt),ds(Tr,Nt)):Ko(Tr,1,1),Mn.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),Sr.mipmask=Tr.mipmask,pi(Sr,Tr),he.texture2D(Mn,Tr,On),Sr.internalformat=Tr.internalformat,lo.width=Tr.width,lo.height=Tr.height,Hu(Sr),Wl(Tr,_e),tu(Mn,_e),Ns(),Zl(Tr),yr.profile&&(Sr.stats.size=fc(Sr.internalformat,Sr.type,Tr.width,Tr.height,Mn.genMipmaps,!1)),lo.format=gi[Sr.internalformat],lo.type=oo[Sr.type],lo.mag=ii[Mn.magFilter],lo.min=to[Mn.minFilter],lo.wrapS=bi[Mn.wrapS],lo.wrapT=bi[Mn.wrapT],lo}function Na(Nt,rn,Mn,Tr){he(!!Nt,"must specify image data");var Er=rn|0,Hn=Mn|0,tr=Tr|0,ar=so();return pi(ar,Sr),ar.width=0,ar.height=0,wi(ar,Nt),ar.width=ar.width||(Sr.width>>tr)-Er,ar.height=ar.height||(Sr.height>>tr)-Hn,he(Sr.type===ar.type&&Sr.format===ar.format&&Sr.internalformat===ar.internalformat,"incompatible format for texture.subimage"),he(Er>=0&&Hn>=0&&Er+ar.width<=Sr.width&&Hn+ar.height<=Sr.height,"texture.subimage write out of bounds"),he(Sr.mipmask&1<<tr,"missing mipmap data"),he(ar.data||ar.element||ar.needsCopy,"missing image data"),Hu(Sr),Bo(ar,_e,Er,Hn,tr),Ns(),va(ar),lo}function el(Nt,rn){var Mn=Nt|0,Tr=rn|0||Mn;if(Mn===Sr.width&&Tr===Sr.height)return lo;lo.width=Sr.width=Mn,lo.height=Sr.height=Tr,Hu(Sr);for(var Er=0;Sr.mipmask>>Er;++Er){var Hn=Mn>>Er,tr=Tr>>Er;if(!Hn||!tr)break;Ue.texImage2D(_e,Er,Sr.format,Hn,tr,0,Sr.format,Sr.type,null)}return Ns(),yr.profile&&(Sr.stats.size=fc(Sr.internalformat,Sr.type,Mn,Tr,!1,!1)),lo}return lo(_n,Or),lo.subimage=Na,lo.resize=el,lo._reglType="texture2d",lo._texture=Sr,yr.profile&&(lo.stats=Sr.stats),lo.destroy=function(){Sr.decRef()},lo}function ts(_n,Or,Sr,lo,Na,el){var Nt=new Oa(tt);or[Nt.id]=Nt,Mr.cubeCount++;var rn=new Array(6);function Mn(Hn,tr,ar,Sn,Zn,tn){var $n,kr=Nt.texInfo;for(Qs.call(kr),$n=0;$n<6;++$n)rn[$n]=es();if(typeof Hn=="number"||!Hn){var jr=Hn|0||1;for($n=0;$n<6;++$n)Ko(rn[$n],jr,jr)}else if(typeof Hn=="object")if(tr)ds(rn[0],Hn),ds(rn[1],tr),ds(rn[2],ar),ds(rn[3],Sn),ds(rn[4],Zn),ds(rn[5],tn);else if(se(kr,Hn),jo(Nt,Hn),"faces"in Hn){var vi=Hn.faces;for(he(Array.isArray(vi)&&vi.length===6,"cube faces must be a length 6 array"),$n=0;$n<6;++$n)he(typeof vi[$n]=="object"&&!!vi[$n],"invalid input for cube map face"),pi(rn[$n],Nt),ds(rn[$n],vi[$n])}else for($n=0;$n<6;++$n)ds(rn[$n],Hn);else he.raise("invalid arguments to cube map");for(pi(Nt,rn[0]),On.npotTextureCube||he(Nh(Nt.width)&&Nh(Nt.height),"your browser does not support non power or two texture dimensions"),kr.genMipmaps?Nt.mipmask=(rn[0].width<<1)-1:Nt.mipmask=rn[0].mipmask,he.textureCube(Nt,kr,rn,On),Nt.internalformat=rn[0].internalformat,Mn.width=rn[0].width,Mn.height=rn[0].height,Hu(Nt),$n=0;$n<6;++$n)Wl(rn[$n],cn+$n);for(tu(kr,tt),Ns(),yr.profile&&(Nt.stats.size=fc(Nt.internalformat,Nt.type,Mn.width,Mn.height,kr.genMipmaps,!0)),Mn.format=gi[Nt.internalformat],Mn.type=oo[Nt.type],Mn.mag=ii[kr.magFilter],Mn.min=to[kr.minFilter],Mn.wrapS=bi[kr.wrapS],Mn.wrapT=bi[kr.wrapT],$n=0;$n<6;++$n)Zl(rn[$n]);return Mn}function Tr(Hn,tr,ar,Sn,Zn){he(!!tr,"must specify image data"),he(typeof Hn=="number"&&Hn===(Hn|0)&&Hn>=0&&Hn<6,"invalid face");var tn=ar|0,$n=Sn|0,kr=Zn|0,jr=so();return pi(jr,Nt),jr.width=0,jr.height=0,wi(jr,tr),jr.width=jr.width||(Nt.width>>kr)-tn,jr.height=jr.height||(Nt.height>>kr)-$n,he(Nt.type===jr.type&&Nt.format===jr.format&&Nt.internalformat===jr.internalformat,"incompatible format for texture.subimage"),he(tn>=0&&$n>=0&&tn+jr.width<=Nt.width&&$n+jr.height<=Nt.height,"texture.subimage write out of bounds"),he(Nt.mipmask&1<<kr,"missing mipmap data"),he(jr.data||jr.element||jr.needsCopy,"missing image data"),Hu(Nt),Bo(jr,cn+Hn,tn,$n,kr),Ns(),va(jr),Mn}function Er(Hn){var tr=Hn|0;if(tr!==Nt.width){Mn.width=Nt.width=tr,Mn.height=Nt.height=tr,Hu(Nt);for(var ar=0;ar<6;++ar)for(var Sn=0;Nt.mipmask>>Sn;++Sn)Ue.texImage2D(cn+ar,Sn,Nt.format,tr>>Sn,tr>>Sn,0,Nt.format,Nt.type,null);return Ns(),yr.profile&&(Nt.stats.size=fc(Nt.internalformat,Nt.type,Mn.width,Mn.height,!1,!0)),Mn}}return Mn(_n,Or,Sr,lo,Na,el),Mn.subimage=Tr,Mn.resize=Er,Mn._reglType="textureCube",Mn._texture=Nt,yr.profile&&(Mn.stats=Nt.stats),Mn.destroy=function(){Nt.decRef()},Mn}function gu(){for(var _n=0;_n<Qr;++_n)Ue.activeTexture(ci+_n),Ue.bindTexture(_e,null),Js[_n]=null;ra(or).forEach(oa),Mr.cubeCount=0,Mr.textureCount=0}yr.profile&&(Mr.getTotalTextureSize=function(){var _n=0;return Object.keys(or).forEach(function(Or){_n+=or[Or].stats.size}),_n});function wh(){for(var _n=0;_n<Qr;++_n){var Or=Js[_n];Or&&(Or.bindCount=0,Or.unit=-1,Js[_n]=null)}ra(or).forEach(function(Sr){Sr.texture=Ue.createTexture(),Ue.bindTexture(Sr.target,Sr.texture);for(var lo=0;lo<32;++lo)if(Sr.mipmask&1<<lo)if(Sr.target===_e)Ue.texImage2D(_e,lo,Sr.internalformat,Sr.width>>lo,Sr.height>>lo,0,Sr.internalformat,Sr.type,null);else for(var Na=0;Na<6;++Na)Ue.texImage2D(cn+Na,lo,Sr.internalformat,Sr.width>>lo,Sr.height>>lo,0,Sr.internalformat,Sr.type,null);tu(Sr.texInfo,Sr.target)})}return{create2D:Pa,createCube:ts,clear:gu,getTexture:function(_n){return null},restore:wh}}var wa=36161,hc=32854,uf=32855,Su=36194,kh=33189,Jl=36168,Vu=34041,Ku=35907,ap=34836,No=34842,To=34843,eu=[];eu[hc]=2,eu[uf]=2,eu[Su]=2,eu[kh]=2,eu[Jl]=1,eu[Vu]=4,eu[Ku]=4,eu[ap]=16,eu[No]=8,eu[To]=6;function Qu(Ue,qt,On){return eu[Ue]*qt*On}var Ju=function(Ue,qt,On,Cr,$r){var Mr={rgba4:hc,rgb565:Su,"rgb5 a1":uf,depth:kh,stencil:Jl,"depth stencil":Vu};qt.ext_srgb&&(Mr.srgba=Ku),qt.ext_color_buffer_half_float&&(Mr.rgba16f=No,Mr.rgb16f=To),qt.webgl_color_buffer_float&&(Mr.rgba32f=ap);var yr=[];Object.keys(Mr).forEach(function(mi){var Ui=Mr[mi];yr[Ui]=mi});var Oi=0,di={};function ki(mi){this.id=Oi++,this.refCount=1,this.renderbuffer=mi,this.format=hc,this.width=0,this.height=0,$r.profile&&(this.stats={size:0})}ki.prototype.decRef=function(){--this.refCount<=0&&Mi(this)};function Mi(mi){var Ui=mi.renderbuffer;he(Ui,"must not double destroy renderbuffer"),Ue.bindRenderbuffer(wa,null),Ue.deleteRenderbuffer(Ui),mi.renderbuffer=null,mi.refCount=0,delete di[mi.id],Cr.renderbufferCount--}function Bi(mi,Ui){var dr=new ki(Ue.createRenderbuffer());di[dr.id]=dr,Cr.renderbufferCount++;function Br(oo,ii){var to=0,bi=0,no=hc;if(typeof oo=="object"&&oo){var li=oo;if("shape"in li){var pi=li.shape;he(Array.isArray(pi)&&pi.length>=2,"invalid renderbuffer shape"),to=pi[0]|0,bi=pi[1]|0}else"radius"in li&&(to=bi=li.radius|0),"width"in li&&(to=li.width|0),"height"in li&&(bi=li.height|0);"format"in li&&(he.parameter(li.format,Mr,"invalid renderbuffer format"),no=Mr[li.format])}else typeof oo=="number"?(to=oo|0,typeof ii=="number"?bi=ii|0:bi=to):oo?he.raise("invalid arguments to renderbuffer constructor"):to=bi=1;if(he(to>0&&bi>0&&to<=On.maxRenderbufferSize&&bi<=On.maxRenderbufferSize,"invalid renderbuffer size"),!(to===dr.width&&bi===dr.height&&no===dr.format))return Br.width=dr.width=to,Br.height=dr.height=bi,dr.format=no,Ue.bindRenderbuffer(wa,dr.renderbuffer),Ue.renderbufferStorage(wa,no,to,bi),he(Ue.getError()===0,"invalid render buffer format"),$r.profile&&(dr.stats.size=Qu(dr.format,dr.width,dr.height)),Br.format=yr[dr.format],Br}function gi(oo,ii){var to=oo|0,bi=ii|0||to;return to===dr.width&&bi===dr.height||(he(to>0&&bi>0&&to<=On.maxRenderbufferSize&&bi<=On.maxRenderbufferSize,"invalid renderbuffer size"),Br.width=dr.width=to,Br.height=dr.height=bi,Ue.bindRenderbuffer(wa,dr.renderbuffer),Ue.renderbufferStorage(wa,dr.format,to,bi),he(Ue.getError()===0,"invalid render buffer format"),$r.profile&&(dr.stats.size=Qu(dr.format,dr.width,dr.height))),Br}return Br(mi,Ui),Br.resize=gi,Br._reglType="renderbuffer",Br._renderbuffer=dr,$r.profile&&(Br.stats=dr.stats),Br.destroy=function(){dr.decRef()},Br}$r.profile&&(Cr.getTotalRenderbufferSize=function(){var mi=0;return Object.keys(di).forEach(function(Ui){mi+=di[Ui].stats.size}),mi});function Xi(){ra(di).forEach(function(mi){mi.renderbuffer=Ue.createRenderbuffer(),Ue.bindRenderbuffer(wa,mi.renderbuffer),Ue.renderbufferStorage(wa,mi.format,mi.width,mi.height)}),Ue.bindRenderbuffer(wa,null)}return{create:Bi,clear:function(){ra(di).forEach(Mi)},restore:Xi}},vl=36160,Ec=36161,Kf=3553,Pd=34069,Cs=36064,wu=36096,m0=36128,zh=33306,sp=36053,xh=36054,ec=36055,lp=36057,Sc=36061,Hp=36193,Uc=5121,Id=5126,g0=6407,Eh=6408,Uh=6402,y0=[g0,Eh],Bf=[];Bf[Eh]=4,Bf[g0]=3;var kf=[];kf[Uc]=1,kf[Id]=4,kf[Hp]=2;var _0=32854,Qf=32855,wf=36194,iv=33189,zf=36168,jh=34041,b0=35907,_=34836,S=34842,x=34843,O=[_0,Qf,wf,b0,S,x,_],k={};k[sp]="complete",k[xh]="incomplete attachment",k[lp]="incomplete dimensions",k[ec]="incomplete, missing attachment",k[Sc]="unsupported";function Z(Ue,qt,On,Cr,$r,Mr){var yr={cur:null,next:null,dirty:!1,setFBO:null},Oi=["rgba"],di=["rgba4","rgb565","rgb5 a1"];qt.ext_srgb&&di.push("srgba"),qt.ext_color_buffer_half_float&&di.push("rgba16f","rgb16f"),qt.webgl_color_buffer_float&&di.push("rgba32f");var ki=["uint8"];qt.oes_texture_half_float&&ki.push("half float","float16"),qt.oes_texture_float&&ki.push("float","float32");function Mi(Ki,wi,qr){this.target=Ki,this.texture=wi,this.renderbuffer=qr;var Bo=0,Ca=0;wi?(Bo=wi.width,Ca=wi.height):qr&&(Bo=qr.width,Ca=qr.height),this.width=Bo,this.height=Ca}function Bi(Ki){Ki&&(Ki.texture&&Ki.texture._texture.decRef(),Ki.renderbuffer&&Ki.renderbuffer._renderbuffer.decRef())}function Xi(Ki,wi,qr){if(Ki)if(Ki.texture){var Bo=Ki.texture._texture,Ca=Math.max(1,Bo.width),so=Math.max(1,Bo.height);he(Ca===wi&&so===qr,"inconsistent width/height for supplied texture"),Bo.refCount+=1}else{var va=Ki.renderbuffer._renderbuffer;he(va.width===wi&&va.height===qr,"inconsistent width/height for renderbuffer"),va.refCount+=1}}function mi(Ki,wi){wi&&(wi.texture?Ue.framebufferTexture2D(vl,Ki,wi.target,wi.texture._texture.texture,0):Ue.framebufferRenderbuffer(vl,Ki,Ec,wi.renderbuffer._renderbuffer.renderbuffer))}function Ui(Ki){var wi=Kf,qr=null,Bo=null,Ca=Ki;typeof Ki=="object"&&(Ca=Ki.data,"target"in Ki&&(wi=Ki.target|0)),he.type(Ca,"function","invalid attachment data");var so=Ca._reglType;return so==="texture2d"?(qr=Ca,he(wi===Kf)):so==="textureCube"?(qr=Ca,he(wi>=Pd&&wi<Pd+6,"invalid cube map target")):so==="renderbuffer"?(Bo=Ca,wi=Ec):he.raise("invalid regl object for attachment"),new Mi(wi,qr,Bo)}function dr(Ki,wi,qr,Bo,Ca){if(qr){var so=Cr.create2D({width:Ki,height:wi,format:Bo,type:Ca});return so._texture.refCount=0,new Mi(Kf,so,null)}else{var va=$r.create({width:Ki,height:wi,format:Bo});return va._renderbuffer.refCount=0,new Mi(Ec,null,va)}}function Br(Ki){return Ki&&(Ki.texture||Ki.renderbuffer)}function gi(Ki,wi,qr){Ki&&(Ki.texture?Ki.texture.resize(wi,qr):Ki.renderbuffer&&Ki.renderbuffer.resize(wi,qr),Ki.width=wi,Ki.height=qr)}var oo=0,ii={};function to(){this.id=oo++,ii[this.id]=this,this.framebuffer=Ue.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function bi(Ki){Ki.colorAttachments.forEach(Bi),Bi(Ki.depthAttachment),Bi(Ki.stencilAttachment),Bi(Ki.depthStencilAttachment)}function no(Ki){var wi=Ki.framebuffer;he(wi,"must not double destroy framebuffer"),Ue.deleteFramebuffer(wi),Ki.framebuffer=null,Mr.framebufferCount--,delete ii[Ki.id]}function li(Ki){var wi;Ue.bindFramebuffer(vl,Ki.framebuffer);var qr=Ki.colorAttachments;for(wi=0;wi<qr.length;++wi)mi(Cs+wi,qr[wi]);for(wi=qr.length;wi<On.maxColorAttachments;++wi)Ue.framebufferTexture2D(vl,Cs+wi,Kf,null,0);Ue.framebufferTexture2D(vl,zh,Kf,null,0),Ue.framebufferTexture2D(vl,wu,Kf,null,0),Ue.framebufferTexture2D(vl,m0,Kf,null,0),mi(wu,Ki.depthAttachment),mi(m0,Ki.stencilAttachment),mi(zh,Ki.depthStencilAttachment);var Bo=Ue.checkFramebufferStatus(vl);!Ue.isContextLost()&&Bo!==sp&&he.raise("framebuffer configuration not supported, status = "+k[Bo]),Ue.bindFramebuffer(vl,yr.next?yr.next.framebuffer:null),yr.cur=yr.next,Ue.getError()}function pi(Ki,wi){var qr=new to;Mr.framebufferCount++;function Bo(so,va){var ua;he(yr.next!==qr,"can not update framebuffer which is currently in use");var Ko=0,ds=0,Wl=!0,mu=!0,es=null,Zl=!0,Qs="rgba",se="uint8",tu=1,fl=null,or=null,Qr=null,Js=!1;if(typeof so=="number")Ko=so|0,ds=va|0||Ko;else if(!so)Ko=ds=1;else{he.type(so,"object","invalid arguments for framebuffer");var Oa=so;if("shape"in Oa){var Hu=Oa.shape;he(Array.isArray(Hu)&&Hu.length>=2,"invalid shape for framebuffer"),Ko=Hu[0],ds=Hu[1]}else"radius"in Oa&&(Ko=ds=Oa.radius),"width"in Oa&&(Ko=Oa.width),"height"in Oa&&(ds=Oa.height);("color"in Oa||"colors"in Oa)&&(es=Oa.color||Oa.colors,Array.isArray(es)&&he(es.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),es||("colorCount"in Oa&&(tu=Oa.colorCount|0,he(tu>0,"invalid color buffer count")),"colorTexture"in Oa&&(Zl=!!Oa.colorTexture,Qs="rgba4"),"colorType"in Oa&&(se=Oa.colorType,Zl?(he(qt.oes_texture_float||!(se==="float"||se==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),he(qt.oes_texture_half_float||!(se==="half float"||se==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):se==="half float"||se==="float16"?(he(qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Qs="rgba16f"):(se==="float"||se==="float32")&&(he(qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Qs="rgba32f"),he.oneOf(se,ki,"invalid color type")),"colorFormat"in Oa&&(Qs=Oa.colorFormat,Oi.indexOf(Qs)>=0?Zl=!0:di.indexOf(Qs)>=0?Zl=!1:Zl?he.oneOf(Oa.colorFormat,Oi,"invalid color format for texture"):he.oneOf(Oa.colorFormat,di,"invalid color format for renderbuffer"))),("depthTexture"in Oa||"depthStencilTexture"in Oa)&&(Js=!!(Oa.depthTexture||Oa.depthStencilTexture),he(!Js||qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Oa&&(typeof Oa.depth=="boolean"?Wl=Oa.depth:(fl=Oa.depth,mu=!1)),"stencil"in Oa&&(typeof Oa.stencil=="boolean"?mu=Oa.stencil:(or=Oa.stencil,Wl=!1)),"depthStencil"in Oa&&(typeof Oa.depthStencil=="boolean"?Wl=mu=Oa.depthStencil:(Qr=Oa.depthStencil,Wl=!1,mu=!1))}var Ns=null,oa=null,Pa=null,ts=null;if(Array.isArray(es))Ns=es.map(Ui);else if(es)Ns=[Ui(es)];else for(Ns=new Array(tu),ua=0;ua<tu;++ua)Ns[ua]=dr(Ko,ds,Zl,Qs,se);he(qt.webgl_draw_buffers||Ns.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),he(Ns.length<=On.maxColorAttachments,"too many color attachments, not supported"),Ko=Ko||Ns[0].width,ds=ds||Ns[0].height,fl?oa=Ui(fl):Wl&&!mu&&(oa=dr(Ko,ds,Js,"depth","uint32")),or?Pa=Ui(or):mu&&!Wl&&(Pa=dr(Ko,ds,!1,"stencil","uint8")),Qr?ts=Ui(Qr):!fl&&!or&&mu&&Wl&&(ts=dr(Ko,ds,Js,"depth stencil","depth stencil")),he(!!fl+!!or+!!Qr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var gu=null;for(ua=0;ua<Ns.length;++ua)if(Xi(Ns[ua],Ko,ds),he(!Ns[ua]||Ns[ua].texture&&y0.indexOf(Ns[ua].texture._texture.format)>=0||Ns[ua].renderbuffer&&O.indexOf(Ns[ua].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ua+" is invalid"),Ns[ua]&&Ns[ua].texture){var wh=Bf[Ns[ua].texture._texture.format]*kf[Ns[ua].texture._texture.type];gu===null?gu=wh:he(gu===wh,"all color attachments much have the same number of bits per pixel.")}return Xi(oa,Ko,ds),he(!oa||oa.texture&&oa.texture._texture.format===Uh||oa.renderbuffer&&oa.renderbuffer._renderbuffer.format===iv,"invalid depth attachment for framebuffer object"),Xi(Pa,Ko,ds),he(!Pa||Pa.renderbuffer&&Pa.renderbuffer._renderbuffer.format===zf,"invalid stencil attachment for framebuffer object"),Xi(ts,Ko,ds),he(!ts||ts.texture&&ts.texture._texture.format===jh||ts.renderbuffer&&ts.renderbuffer._renderbuffer.format===jh,"invalid depth-stencil attachment for framebuffer object"),bi(qr),qr.width=Ko,qr.height=ds,qr.colorAttachments=Ns,qr.depthAttachment=oa,qr.stencilAttachment=Pa,qr.depthStencilAttachment=ts,Bo.color=Ns.map(Br),Bo.depth=Br(oa),Bo.stencil=Br(Pa),Bo.depthStencil=Br(ts),Bo.width=qr.width,Bo.height=qr.height,li(qr),Bo}function Ca(so,va){he(yr.next!==qr,"can not resize a framebuffer which is currently in use");var ua=Math.max(so|0,1),Ko=Math.max(va|0||ua,1);if(ua===qr.width&&Ko===qr.height)return Bo;for(var ds=qr.colorAttachments,Wl=0;Wl<ds.length;++Wl)gi(ds[Wl],ua,Ko);return gi(qr.depthAttachment,ua,Ko),gi(qr.stencilAttachment,ua,Ko),gi(qr.depthStencilAttachment,ua,Ko),qr.width=Bo.width=ua,qr.height=Bo.height=Ko,li(qr),Bo}return Bo(Ki,wi),L(Bo,{resize:Ca,_reglType:"framebuffer",_framebuffer:qr,destroy:function(){no(qr),bi(qr)},use:function(so){yr.setFBO({framebuffer:Bo},so)}})}function jo(Ki){var wi=Array(6);function qr(Ca){var so;he(wi.indexOf(yr.next)<0,"can not update framebuffer which is currently in use");var va={color:null},ua=0,Ko=null,ds="rgba",Wl="uint8",mu=1;if(typeof Ca=="number")ua=Ca|0;else if(!Ca)ua=1;else{he.type(Ca,"object","invalid arguments for framebuffer");var es=Ca;if("shape"in es){var Zl=es.shape;he(Array.isArray(Zl)&&Zl.length>=2,"invalid shape for framebuffer"),he(Zl[0]===Zl[1],"cube framebuffer must be square"),ua=Zl[0]}else"radius"in es&&(ua=es.radius|0),"width"in es?(ua=es.width|0,"height"in es&&he(es.height===ua,"must be square")):"height"in es&&(ua=es.height|0);("color"in es||"colors"in es)&&(Ko=es.color||es.colors,Array.isArray(Ko)&&he(Ko.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),Ko||("colorCount"in es&&(mu=es.colorCount|0,he(mu>0,"invalid color buffer count")),"colorType"in es&&(he.oneOf(es.colorType,ki,"invalid color type"),Wl=es.colorType),"colorFormat"in es&&(ds=es.colorFormat,he.oneOf(es.colorFormat,Oi,"invalid color format for texture"))),"depth"in es&&(va.depth=es.depth),"stencil"in es&&(va.stencil=es.stencil),"depthStencil"in es&&(va.depthStencil=es.depthStencil)}var Qs;if(Ko)if(Array.isArray(Ko))for(Qs=[],so=0;so<Ko.length;++so)Qs[so]=Ko[so];else Qs=[Ko];else{Qs=Array(mu);var se={radius:ua,format:ds,type:Wl};for(so=0;so<mu;++so)Qs[so]=Cr.createCube(se)}for(va.color=Array(Qs.length),so=0;so<Qs.length;++so){var tu=Qs[so];he(typeof tu=="function"&&tu._reglType==="textureCube","invalid cube map"),ua=ua||tu.width,he(tu.width===ua&&tu.height===ua,"invalid cube map shape"),va.color[so]={target:Pd,data:Qs[so]}}for(so=0;so<6;++so){for(var fl=0;fl<Qs.length;++fl)va.color[fl].target=Pd+so;so>0&&(va.depth=wi[0].depth,va.stencil=wi[0].stencil,va.depthStencil=wi[0].depthStencil),wi[so]?wi[so](va):wi[so]=pi(va)}return L(qr,{width:ua,height:ua,color:Qs})}function Bo(Ca){var so,va=Ca|0;if(he(va>0&&va<=On.maxCubeMapSize,"invalid radius for cube fbo"),va===qr.width)return qr;var ua=qr.color;for(so=0;so<ua.length;++so)ua[so].resize(va);for(so=0;so<6;++so)wi[so].resize(va);return qr.width=qr.height=va,qr}return qr(Ki),L(qr,{faces:wi,resize:Bo,_reglType:"framebufferCube",destroy:function(){wi.forEach(function(Ca){Ca.destroy()})}})}function pa(){yr.cur=null,yr.next=null,yr.dirty=!0,ra(ii).forEach(function(Ki){Ki.framebuffer=Ue.createFramebuffer(),li(Ki)})}return L(yr,{getFramebuffer:function(Ki){if(typeof Ki=="function"&&Ki._reglType==="framebuffer"){var wi=Ki._framebuffer;if(wi instanceof to)return wi}return null},create:pi,createCube:jo,clear:function(){ra(ii).forEach(no)},restore:pa})}var Q=5126,ge=34962;function Ve(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Q,this.offset=0,this.stride=0,this.divisor=0}function ht(Ue,qt,On,Cr,$r){for(var Mr=On.maxAttributes,yr=new Array(Mr),Oi=0;Oi<Mr;++Oi)yr[Oi]=new Ve;var di=0,ki={},Mi={Record:Ve,scope:{},state:yr,currentVAO:null,targetVAO:null,restore:Xi()?ii:function(){},createVAO:to,getVAO:Ui,destroyBuffer:Bi,setVAO:Xi()?dr:Br,clear:Xi()?gi:function(){}};function Bi(bi){for(var no=0;no<yr.length;++no){var li=yr[no];li.buffer===bi&&(Ue.disableVertexAttribArray(no),li.buffer=null)}}function Xi(){return qt.oes_vertex_array_object}function mi(){return qt.angle_instanced_arrays}function Ui(bi){return typeof bi=="function"&&bi._vao?bi._vao:null}function dr(bi){if(bi!==Mi.currentVAO){var no=Xi();bi?no.bindVertexArrayOES(bi.vao):no.bindVertexArrayOES(null),Mi.currentVAO=bi}}function Br(bi){if(bi!==Mi.currentVAO){if(bi)bi.bindAttrs();else for(var no=mi(),li=0;li<yr.length;++li){var pi=yr[li];pi.buffer?(Ue.enableVertexAttribArray(li),Ue.vertexAttribPointer(li,pi.size,pi.type,pi.normalized,pi.stride,pi.offfset),no&&no.vertexAttribDivisorANGLE(li,pi.divisor)):(Ue.disableVertexAttribArray(li),Ue.vertexAttrib4f(li,pi.x,pi.y,pi.z,pi.w))}Mi.currentVAO=bi}}function gi(){ra(ki).forEach(function(bi){bi.destroy()})}function oo(){this.id=++di,this.attributes=[];var bi=Xi();bi?this.vao=bi.createVertexArrayOES():this.vao=null,ki[this.id]=this,this.buffers=[]}oo.prototype.bindAttrs=function(){for(var bi=mi(),no=this.attributes,li=0;li<no.length;++li){var pi=no[li];pi.buffer?(Ue.enableVertexAttribArray(li),Ue.bindBuffer(ge,pi.buffer.buffer),Ue.vertexAttribPointer(li,pi.size,pi.type,pi.normalized,pi.stride,pi.offset),bi&&bi.vertexAttribDivisorANGLE(li,pi.divisor)):(Ue.disableVertexAttribArray(li),Ue.vertexAttrib4f(li,pi.x,pi.y,pi.z,pi.w))}for(var jo=no.length;jo<Mr;++jo)Ue.disableVertexAttribArray(jo)},oo.prototype.refresh=function(){var bi=Xi();bi&&(bi.bindVertexArrayOES(this.vao),this.bindAttrs(),Mi.currentVAO=this)},oo.prototype.destroy=function(){if(this.vao){var bi=Xi();this===Mi.currentVAO&&(Mi.currentVAO=null,bi.bindVertexArrayOES(null)),bi.deleteVertexArrayOES(this.vao),this.vao=null}ki[this.id]&&(delete ki[this.id],Cr.vaoCount-=1)};function ii(){var bi=Xi();bi&&ra(ki).forEach(function(no){no.refresh()})}function to(bi){var no=new oo;Cr.vaoCount+=1;function li(pi){he(Array.isArray(pi),"arguments to vertex array constructor must be an array"),he(pi.length<Mr,"too many attributes"),he(pi.length>0,"must specify at least one attribute");for(var jo=0;jo<no.buffers.length;++jo)no.buffers[jo].destroy();no.buffers.length=0;var pa=no.attributes;pa.length=pi.length;for(var Ki=0;Ki<pi.length;++Ki){var wi=pi[Ki],qr=pa[Ki]=new Ve;if(Array.isArray(wi)||G(wi)||ya(wi)){var Bo=$r.create(wi,ge,!1,!0);qr.buffer=$r.getBuffer(Bo),qr.size=qr.buffer.dimension|0,qr.normalized=!1,qr.type=qr.buffer.dtype,qr.offset=0,qr.stride=0,qr.divisor=0,qr.state=1,no.buffers.push(Bo)}else $r.getBuffer(wi)?(qr.buffer=$r.getBuffer(wi),qr.size=qr.buffer.dimension|0,qr.normalized=!1,qr.type=qr.buffer.dtype,qr.offset=0,qr.stride=0,qr.divisor=0,qr.state=1):$r.getBuffer(wi.buffer)?(qr.buffer=$r.getBuffer(wi.buffer),qr.size=(+wi.size||qr.buffer.dimension)|0,qr.normalized=!!wi.normalized||!1,"type"in wi?(he.parameter(wi.type,uu,"invalid buffer type"),qr.type=uu[wi.type]):qr.type=qr.buffer.dtype,qr.offset=(wi.offset||0)|0,qr.stride=(wi.stride||0)|0,qr.divisor=(wi.divisor||0)|0,qr.state=1,he(qr.size>=1&&qr.size<=4,"size must be between 1 and 4"),he(qr.offset>=0,"invalid offset"),he(qr.stride>=0&&qr.stride<=255,"stride must be between 0 and 255"),he(qr.divisor>=0,"divisor must be positive"),he(!qr.divisor||!!qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in wi?(he(Ki>0,"first attribute must not be a constant"),qr.x=+wi.x||0,qr.y=+wi.y||0,qr.z=+wi.z||0,qr.w=+wi.w||0,qr.state=2):he(!1,"invalid attribute spec for location "+Ki)}return no.refresh(),li}return li.destroy=function(){no.destroy()},li._vao=no,li._reglType="vao",li(bi)}return Mi}var zt=35632,Ht=35633,Zt=35718,xn=35721;function vn(Ue,qt,On,Cr){var $r={},Mr={};function yr(dr,Br,gi,oo){this.name=dr,this.id=Br,this.location=gi,this.info=oo}function Oi(dr,Br){for(var gi=0;gi<dr.length;++gi)if(dr[gi].id===Br.id){dr[gi].location=Br.location;return}dr.push(Br)}function di(dr,Br,gi){var oo=dr===zt?$r:Mr,ii=oo[Br];if(!ii){var to=qt.str(Br);ii=Ue.createShader(dr),Ue.shaderSource(ii,to),Ue.compileShader(ii),he.shaderError(Ue,ii,to,dr,gi),oo[Br]=ii}return ii}var ki={},Mi=[],Bi=0;function Xi(dr,Br){this.id=Bi++,this.fragId=dr,this.vertId=Br,this.program=null,this.uniforms=[],this.attributes=[],Cr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function mi(dr,Br,gi){var oo,ii,to=di(zt,dr.fragId),bi=di(Ht,dr.vertId),no=dr.program=Ue.createProgram();if(Ue.attachShader(no,to),Ue.attachShader(no,bi),gi)for(oo=0;oo<gi.length;++oo){var li=gi[oo];Ue.bindAttribLocation(no,li[0],li[1])}Ue.linkProgram(no),he.linkError(Ue,no,qt.str(dr.fragId),qt.str(dr.vertId),Br);var pi=Ue.getProgramParameter(no,Zt);Cr.profile&&(dr.stats.uniformsCount=pi);var jo=dr.uniforms;for(oo=0;oo<pi;++oo)if(ii=Ue.getActiveUniform(no,oo),ii)if(ii.size>1)for(var pa=0;pa<ii.size;++pa){var Ki=ii.name.replace("[0]","["+pa+"]");Oi(jo,new yr(Ki,qt.id(Ki),Ue.getUniformLocation(no,Ki),ii))}else Oi(jo,new yr(ii.name,qt.id(ii.name),Ue.getUniformLocation(no,ii.name),ii));var wi=Ue.getProgramParameter(no,xn);Cr.profile&&(dr.stats.attributesCount=wi);var qr=dr.attributes;for(oo=0;oo<wi;++oo)ii=Ue.getActiveAttrib(no,oo),ii&&Oi(qr,new yr(ii.name,qt.id(ii.name),Ue.getAttribLocation(no,ii.name),ii))}Cr.profile&&(On.getMaxUniformsCount=function(){var dr=0;return Mi.forEach(function(Br){Br.stats.uniformsCount>dr&&(dr=Br.stats.uniformsCount)}),dr},On.getMaxAttributesCount=function(){var dr=0;return Mi.forEach(function(Br){Br.stats.attributesCount>dr&&(dr=Br.stats.attributesCount)}),dr});function Ui(){$r={},Mr={};for(var dr=0;dr<Mi.length;++dr)mi(Mi[dr],null,Mi[dr].attributes.map(function(Br){return[Br.location,Br.name]}))}return{clear:function(){var dr=Ue.deleteShader.bind(Ue);ra($r).forEach(dr),$r={},ra(Mr).forEach(dr),Mr={},Mi.forEach(function(Br){Ue.deleteProgram(Br.program)}),Mi.length=0,ki={},On.shaderCount=0},program:function(dr,Br,gi,oo){he.command(dr>=0,"missing vertex shader",gi),he.command(Br>=0,"missing fragment shader",gi);var ii=ki[Br];ii||(ii=ki[Br]={});var to=ii[dr];if(to&&!oo)return to;var bi=new Xi(Br,dr);return On.shaderCount++,mi(bi,gi,oo),to||(ii[dr]=bi),Mi.push(bi),bi},restore:Ui,shader:di,frag:-1,vert:-1}}var Un=6408,an=5121,kn=3333,nr=5126;function mr(Ue,qt,On,Cr,$r,Mr,yr){function Oi(Mi){var Bi;qt.next===null?(he($r.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Bi=an):(he(qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Bi=qt.next.colorAttachments[0].texture._texture.type,Mr.oes_texture_float?(he(Bi===an||Bi===nr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Bi===nr&&he(yr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):he(Bi===an,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Xi=0,mi=0,Ui=Cr.framebufferWidth,dr=Cr.framebufferHeight,Br=null;G(Mi)?Br=Mi:Mi&&(he.type(Mi,"object","invalid arguments to regl.read()"),Xi=Mi.x|0,mi=Mi.y|0,he(Xi>=0&&Xi<Cr.framebufferWidth,"invalid x offset for regl.read"),he(mi>=0&&mi<Cr.framebufferHeight,"invalid y offset for regl.read"),Ui=(Mi.width||Cr.framebufferWidth-Xi)|0,dr=(Mi.height||Cr.framebufferHeight-mi)|0,Br=Mi.data||null),Br&&(Bi===an?he(Br instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Bi===nr&&he(Br instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),he(Ui>0&&Ui+Xi<=Cr.framebufferWidth,"invalid width for read pixels"),he(dr>0&&dr+mi<=Cr.framebufferHeight,"invalid height for read pixels"),On();var gi=Ui*dr*4;return Br||(Bi===an?Br=new Uint8Array(gi):Bi===nr&&(Br=Br||new Float32Array(gi))),he.isTypedArray(Br,"data buffer for regl.read() must be a typedarray"),he(Br.byteLength>=gi,"data buffer for regl.read() too small"),Ue.pixelStorei(kn,4),Ue.readPixels(Xi,mi,Ui,dr,Un,Bi,Br),Br}function di(Mi){var Bi;return qt.setFBO({framebuffer:Mi.framebuffer},function(){Bi=Oi(Mi)}),Bi}function ki(Mi){return!Mi||!("framebuffer"in Mi)?Oi(Mi):di(Mi)}return ki}function Rr(Ue){return Array.prototype.slice.call(Ue)}function Ar(Ue){return Rr(Ue).join("")}function zr(){var Ue=0,qt=[],On=[];function Cr(Bi){for(var Xi=0;Xi<On.length;++Xi)if(On[Xi]===Bi)return qt[Xi];var mi="g"+Ue++;return qt.push(mi),On.push(Bi),mi}function $r(){var Bi=[];function Xi(){Bi.push.apply(Bi,Rr(arguments))}var mi=[];function Ui(){var dr="v"+Ue++;return mi.push(dr),arguments.length>0&&(Bi.push(dr,"="),Bi.push.apply(Bi,Rr(arguments)),Bi.push(";")),dr}return L(Xi,{def:Ui,toString:function(){return Ar([mi.length>0?"var "+mi.join(",")+";":"",Ar(Bi)])}})}function Mr(){var Bi=$r(),Xi=$r(),mi=Bi.toString,Ui=Xi.toString;function dr(Br,gi){Xi(Br,gi,"=",Bi.def(Br,gi),";")}return L(function(){Bi.apply(Bi,Rr(arguments))},{def:Bi.def,entry:Bi,exit:Xi,save:dr,set:function(Br,gi,oo){dr(Br,gi),Bi(Br,gi,"=",oo,";")},toString:function(){return mi()+Ui()}})}function yr(){var Bi=Ar(arguments),Xi=Mr(),mi=Mr(),Ui=Xi.toString,dr=mi.toString;return L(Xi,{then:function(){return Xi.apply(Xi,Rr(arguments)),this},else:function(){return mi.apply(mi,Rr(arguments)),this},toString:function(){var Br=dr();return Br&&(Br="else{"+Br+"}"),Ar(["if(",Bi,"){",Ui(),"}",Br])}})}var Oi=$r(),di={};function ki(Bi,Xi){var mi=[];function Ui(){var ii="a"+mi.length;return mi.push(ii),ii}Xi=Xi||0;for(var dr=0;dr<Xi;++dr)Ui();var Br=Mr(),gi=Br.toString,oo=di[Bi]=L(Br,{arg:Ui,toString:function(){return Ar(["function(",mi.join(),"){",gi(),"}"])}});return oo}function Mi(){var Bi=['"use strict";',Oi,"return {"];Object.keys(di).forEach(function(Ui){Bi.push('"',Ui,'":',di[Ui].toString(),",")}),Bi.push("}");var Xi=Ar(Bi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),mi=Function.apply(null,qt.concat(Xi));return mi.apply(null,On)}return{global:Oi,link:Cr,block:$r,proc:ki,scope:Mr,cond:yr,compile:Mi}}var ni="xyzw".split(""),zi=5121,Li=1,co=2,Uo=0,Zo=1,Xo=2,cs=3,Pr=4,Qt="dither",da="blend.enable",ha="blend.color",qo="blend.equation",_a="blend.func",aa="depth.enable",Fo="depth.func",pu="depth.range",Cl="depth.mask",Du="colorMask",vu="cull.enable",ws="cull.face",wl="frontFace",ml="lineWidth",dc="polygonOffset.enable",Uf="polygonOffset.offset",wc="sample.alpha",cf="sample.enable",jc="sample.coverage",up="stencil.enable",cp="stencil.mask",Sh="stencil.func",Vh="stencil.opFront",Hh="stencil.opBack",Jf="scissor.enable",Ci="scissor.box",kl="viewport",zl="profile",tc="framebuffer",Tf="vert",jf="frag",Wa="elements",Tu="primitive",Ol="count",Af="offset",Gp="instances",Gh="vao",Wp="Width",Wh="Height",Zh=tc+Wp,eh=tc+Wh,x0=kl+Wp,Bv=kl+Wh,Dd="drawingBuffer",pc=Dd+Wp,jg=Dd+Wh,t_=[_a,qo,Sh,Vh,Hh,jc,kl,Ci,Uf],fp=34962,Vg=34963,n_=35632,Hg=35633,kv=3553,w1=34067,Zp=2884,Dm=3042,Xp=3024,zv=2960,Lm=2929,Nm=3089,Fm=32823,Gg=32926,ov=32928,av=5126,sv=35664,lv=35665,uv=35666,hp=5124,ff=35667,gl=35668,Ld=35669,E0=35670,S0=35671,Yp=35672,dp=35673,$p=35674,pp=35675,th=35676,Vf=35678,qp=35680,r_=4,Xh=1028,Nd=1029,Yh=2304,$h=2305,Uv=32775,jv=32776,hf=519,Fd=7680,Bm=0,i_=1,Wg=32774,km=513,Kp=36160,Vv=36064,qh={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},cv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Bd={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},vp={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Zg={frag:n_,vert:Hg},mp={cw:Yh,ccw:$h};function Hv(Ue){return Array.isArray(Ue)||G(Ue)||ya(Ue)}function Gv(Ue){return Ue.sort(function(qt,On){return qt===kl?-1:On===kl?1:qt<On?-1:1})}function nc(Ue,qt,On,Cr){this.thisDep=Ue,this.contextDep=qt,this.propDep=On,this.append=Cr}function vc(Ue){return Ue&&!(Ue.thisDep||Ue.contextDep||Ue.propDep)}function Au(Ue){return new nc(!1,!1,!1,Ue)}function Cf(Ue,qt){var On=Ue.type;if(On===Uo){var Cr=Ue.data.length;return new nc(!0,Cr>=1,Cr>=2,qt)}else if(On===Pr){var $r=Ue.data;return new nc($r.thisDep,$r.contextDep,$r.propDep,qt)}else return new nc(On===cs,On===Xo,On===Zo,qt)}var zm=new nc(!1,!1,!1,function(){});function Za(Ue,qt,On,Cr,$r,Mr,yr,Oi,di,ki,Mi,Bi,Xi,mi,Ui){var dr=ki.Record,Br={add:32774,subtract:32778,"reverse subtract":32779};On.ext_blend_minmax&&(Br.min=Uv,Br.max=jv);var gi=On.angle_instanced_arrays,oo=On.webgl_draw_buffers,ii={dirty:!0,profile:Ui.profile},to={},bi=[],no={},li={};function pi(Nt){return Nt.replace(".","_")}function jo(Nt,rn,Mn){var Tr=pi(Nt);bi.push(Nt),to[Tr]=ii[Tr]=!!Mn,no[Tr]=rn}function pa(Nt,rn,Mn){var Tr=pi(Nt);bi.push(Nt),Array.isArray(Mn)?(ii[Tr]=Mn.slice(),to[Tr]=Mn.slice()):ii[Tr]=to[Tr]=Mn,li[Tr]=rn}jo(Qt,Xp),jo(da,Dm),pa(ha,"blendColor",[0,0,0,0]),pa(qo,"blendEquationSeparate",[Wg,Wg]),pa(_a,"blendFuncSeparate",[i_,Bm,i_,Bm]),jo(aa,Lm,!0),pa(Fo,"depthFunc",km),pa(pu,"depthRange",[0,1]),pa(Cl,"depthMask",!0),pa(Du,Du,[!0,!0,!0,!0]),jo(vu,Zp),pa(ws,"cullFace",Nd),pa(wl,wl,$h),pa(ml,ml,1),jo(dc,Fm),pa(Uf,"polygonOffset",[0,0]),jo(wc,Gg),jo(cf,ov),pa(jc,"sampleCoverage",[1,!1]),jo(up,zv),pa(cp,"stencilMask",-1),pa(Sh,"stencilFunc",[hf,0,-1]),pa(Vh,"stencilOpSeparate",[Xh,Fd,Fd,Fd]),pa(Hh,"stencilOpSeparate",[Nd,Fd,Fd,Fd]),jo(Jf,Nm),pa(Ci,"scissor",[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]),pa(kl,kl,[0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight]);var Ki={gl:Ue,context:Xi,strings:qt,next:to,current:ii,draw:Bi,elements:Mr,buffer:$r,shader:Mi,attributes:ki.state,vao:ki,uniforms:di,framebuffer:Oi,extensions:On,timer:mi,isBufferArgs:Hv},wi={primTypes:Fc,compareFuncs:Bd,blendFuncs:qh,blendEquations:Br,stencilOps:vp,glTypes:uu,orientationType:mp};he.optional(function(){Ki.isArrayLike=pl}),oo&&(wi.backBuffer=[Nd],wi.drawBuffer=Jn(Cr.maxDrawbuffers,function(Nt){return Nt===0?[0]:Jn(Nt,function(rn){return Vv+rn})}));var qr=0;function Bo(){var Nt=zr(),rn=Nt.link,Mn=Nt.global;Nt.id=qr++,Nt.batchId="0";var Tr=rn(Ki),Er=Nt.shared={props:"a0"};Object.keys(Ki).forEach(function(Zn){Er[Zn]=Mn.def(Tr,".",Zn)}),he.optional(function(){Nt.CHECK=rn(he),Nt.commandStr=he.guessCommand(),Nt.command=rn(Nt.commandStr),Nt.assert=function(Zn,tn,$n){Zn("if(!(",tn,"))",this.CHECK,".commandRaise(",rn($n),",",this.command,");")},wi.invalidBlendCombinations=cv});var Hn=Nt.next={},tr=Nt.current={};Object.keys(li).forEach(function(Zn){Array.isArray(ii[Zn])&&(Hn[Zn]=Mn.def(Er.next,".",Zn),tr[Zn]=Mn.def(Er.current,".",Zn))});var ar=Nt.constants={};Object.keys(wi).forEach(function(Zn){ar[Zn]=Mn.def(JSON.stringify(wi[Zn]))}),Nt.invoke=function(Zn,tn){switch(tn.type){case Uo:var $n=["this",Er.context,Er.props,Nt.batchId];return Zn.def(rn(tn.data),".call(",$n.slice(0,Math.max(tn.data.length+1,4)),")");case Zo:return Zn.def(Er.props,tn.data);case Xo:return Zn.def(Er.context,tn.data);case cs:return Zn.def("this",tn.data);case Pr:return tn.data.append(Nt,Zn),tn.data.ref}},Nt.attribCache={};var Sn={};return Nt.scopeAttrib=function(Zn){var tn=qt.id(Zn);if(tn in Sn)return Sn[tn];var $n=ki.scope[tn];$n||($n=ki.scope[tn]=new dr);var kr=Sn[tn]=rn($n);return kr},Nt}function Ca(Nt){var rn=Nt.static,Mn=Nt.dynamic,Tr;if(zl in rn){var Er=!!rn[zl];Tr=Au(function(tr,ar){return Er}),Tr.enable=Er}else if(zl in Mn){var Hn=Mn[zl];Tr=Cf(Hn,function(tr,ar){return tr.invoke(ar,Hn)})}return Tr}function so(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic;if(tc in Mn){var Er=Mn[tc];return Er?(Er=Oi.getFramebuffer(Er),he.command(Er,"invalid framebuffer object"),Au(function(tr,ar){var Sn=tr.link(Er),Zn=tr.shared;ar.set(Zn.framebuffer,".next",Sn);var tn=Zn.context;return ar.set(tn,"."+Zh,Sn+".width"),ar.set(tn,"."+eh,Sn+".height"),Sn})):Au(function(tr,ar){var Sn=tr.shared;ar.set(Sn.framebuffer,".next","null");var Zn=Sn.context;return ar.set(Zn,"."+Zh,Zn+"."+pc),ar.set(Zn,"."+eh,Zn+"."+jg),"null"})}else if(tc in Tr){var Hn=Tr[tc];return Cf(Hn,function(tr,ar){var Sn=tr.invoke(ar,Hn),Zn=tr.shared,tn=Zn.framebuffer,$n=ar.def(tn,".getFramebuffer(",Sn,")");he.optional(function(){tr.assert(ar,"!"+Sn+"||"+$n,"invalid framebuffer object")}),ar.set(tn,".next",$n);var kr=Zn.context;return ar.set(kr,"."+Zh,$n+"?"+$n+".width:"+kr+"."+pc),ar.set(kr,"."+eh,$n+"?"+$n+".height:"+kr+"."+jg),$n})}else return null}function va(Nt,rn,Mn){var Tr=Nt.static,Er=Nt.dynamic;function Hn(Sn){if(Sn in Tr){var Zn=Tr[Sn];he.commandType(Zn,"object","invalid "+Sn,Mn.commandStr);var tn=!0,$n=Zn.x|0,kr=Zn.y|0,jr,vi;return"width"in Zn?(jr=Zn.width|0,he.command(jr>=0,"invalid "+Sn,Mn.commandStr)):tn=!1,"height"in Zn?(vi=Zn.height|0,he.command(vi>=0,"invalid "+Sn,Mn.commandStr)):tn=!1,new nc(!tn&&rn&&rn.thisDep,!tn&&rn&&rn.contextDep,!tn&&rn&&rn.propDep,function(Do,Hi){var Yi=Do.shared.context,ia=jr;"width"in Zn||(ia=Hi.def(Yi,".",Zh,"-",$n));var ea=vi;return"height"in Zn||(ea=Hi.def(Yi,".",eh,"-",kr)),[$n,kr,ia,ea]})}else if(Sn in Er){var oi=Er[Sn],yi=Cf(oi,function(Do,Hi){var Yi=Do.invoke(Hi,oi);he.optional(function(){Do.assert(Hi,Yi+"&&typeof "+Yi+'==="object"',"invalid "+Sn)});var ia=Do.shared.context,ea=Hi.def(Yi,".x|0"),_s=Hi.def(Yi,".y|0"),Lu=Hi.def('"width" in ',Yi,"?",Yi,".width|0:","(",ia,".",Zh,"-",ea,")"),Tc=Hi.def('"height" in ',Yi,"?",Yi,".height|0:","(",ia,".",eh,"-",_s,")");return he.optional(function(){Do.assert(Hi,Lu+">=0&&"+Tc+">=0","invalid "+Sn)}),[ea,_s,Lu,Tc]});return rn&&(yi.thisDep=yi.thisDep||rn.thisDep,yi.contextDep=yi.contextDep||rn.contextDep,yi.propDep=yi.propDep||rn.propDep),yi}else return rn?new nc(rn.thisDep,rn.contextDep,rn.propDep,function(Do,Hi){var Yi=Do.shared.context;return[0,0,Hi.def(Yi,".",Zh),Hi.def(Yi,".",eh)]}):null}var tr=Hn(kl);if(tr){var ar=tr;tr=new nc(tr.thisDep,tr.contextDep,tr.propDep,function(Sn,Zn){var tn=ar.append(Sn,Zn),$n=Sn.shared.context;return Zn.set($n,"."+x0,tn[2]),Zn.set($n,"."+Bv,tn[3]),tn})}return{viewport:tr,scissor_box:Hn(Ci)}}function ua(Nt,rn){var Mn=Nt.static,Tr=typeof Mn[jf]=="string"&&typeof Mn[Tf]=="string";if(Tr){if(Object.keys(rn.dynamic).length>0)return null;var Er=rn.static,Hn=Object.keys(Er);if(Hn.length>0&&typeof Er[Hn[0]]=="number"){for(var tr=[],ar=0;ar<Hn.length;++ar)he(typeof Er[Hn[ar]]=="number","must specify all vertex attribute locations when using vaos"),tr.push([Er[Hn[ar]]|0,Hn[ar]]);return tr}}return null}function Ko(Nt,rn,Mn){var Tr=Nt.static,Er=Nt.dynamic;function Hn(tn){if(tn in Tr){var $n=qt.id(Tr[tn]);he.optional(function(){Mi.shader(Zg[tn],$n,he.guessCommand())});var kr=Au(function(){return $n});return kr.id=$n,kr}else if(tn in Er){var jr=Er[tn];return Cf(jr,function(vi,oi){var yi=vi.invoke(oi,jr),Do=oi.def(vi.shared.strings,".id(",yi,")");return he.optional(function(){oi(vi.shared.shader,".shader(",Zg[tn],",",Do,",",vi.command,");")}),Do})}return null}var tr=Hn(jf),ar=Hn(Tf),Sn=null,Zn;return vc(tr)&&vc(ar)?(Sn=Mi.program(ar.id,tr.id,null,Mn),Zn=Au(function(tn,$n){return tn.link(Sn)})):Zn=new nc(tr&&tr.thisDep||ar&&ar.thisDep,tr&&tr.contextDep||ar&&ar.contextDep,tr&&tr.propDep||ar&&ar.propDep,function(tn,$n){var kr=tn.shared.shader,jr;tr?jr=tr.append(tn,$n):jr=$n.def(kr,".",jf);var vi;ar?vi=ar.append(tn,$n):vi=$n.def(kr,".",Tf);var oi=kr+".program("+vi+","+jr;return he.optional(function(){oi+=","+tn.command}),$n.def(oi+")")}),{frag:tr,vert:ar,progVar:Zn,program:Sn}}function ds(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic;function Er(){if(Wa in Mn){var tn=Mn[Wa];Hv(tn)?tn=Mr.getElements(Mr.create(tn,!0)):tn&&(tn=Mr.getElements(tn),he.command(tn,"invalid elements",rn.commandStr));var $n=Au(function(jr,vi){if(tn){var oi=jr.link(tn);return jr.ELEMENTS=oi,oi}return jr.ELEMENTS=null,null});return $n.value=tn,$n}else if(Wa in Tr){var kr=Tr[Wa];return Cf(kr,function(jr,vi){var oi=jr.shared,yi=oi.isBufferArgs,Do=oi.elements,Hi=jr.invoke(vi,kr),Yi=vi.def("null"),ia=vi.def(yi,"(",Hi,")"),ea=jr.cond(ia).then(Yi,"=",Do,".createStream(",Hi,");").else(Yi,"=",Do,".getElements(",Hi,");");return he.optional(function(){jr.assert(ea.else,"!"+Hi+"||"+Yi,"invalid elements")}),vi.entry(ea),vi.exit(jr.cond(ia).then(Do,".destroyStream(",Yi,");")),jr.ELEMENTS=Yi,Yi})}return null}var Hn=Er();function tr(){if(Tu in Mn){var tn=Mn[Tu];return he.commandParameter(tn,Fc,"invalid primitve",rn.commandStr),Au(function(kr,jr){return Fc[tn]})}else if(Tu in Tr){var $n=Tr[Tu];return Cf($n,function(kr,jr){var vi=kr.constants.primTypes,oi=kr.invoke(jr,$n);return he.optional(function(){kr.assert(jr,oi+" in "+vi,"invalid primitive, must be one of "+Object.keys(Fc))}),jr.def(vi,"[",oi,"]")})}else if(Hn)return vc(Hn)?Hn.value?Au(function(kr,jr){return jr.def(kr.ELEMENTS,".primType")}):Au(function(){return r_}):new nc(Hn.thisDep,Hn.contextDep,Hn.propDep,function(kr,jr){var vi=kr.ELEMENTS;return jr.def(vi,"?",vi,".primType:",r_)});return null}function ar(tn,$n){if(tn in Mn){var kr=Mn[tn]|0;return he.command(!$n||kr>=0,"invalid "+tn,rn.commandStr),Au(function(vi,oi){return $n&&(vi.OFFSET=kr),kr})}else if(tn in Tr){var jr=Tr[tn];return Cf(jr,function(vi,oi){var yi=vi.invoke(oi,jr);return $n&&(vi.OFFSET=yi,he.optional(function(){vi.assert(oi,yi+">=0","invalid "+tn)})),yi})}else if($n&&Hn)return Au(function(vi,oi){return vi.OFFSET="0",0});return null}var Sn=ar(Af,!0);function Zn(){if(Ol in Mn){var tn=Mn[Ol]|0;return he.command(typeof tn=="number"&&tn>=0,"invalid vertex count",rn.commandStr),Au(function(){return tn})}else if(Ol in Tr){var $n=Tr[Ol];return Cf($n,function(vi,oi){var yi=vi.invoke(oi,$n);return he.optional(function(){vi.assert(oi,"typeof "+yi+'==="number"&&'+yi+">=0&&"+yi+"===("+yi+"|0)","invalid vertex count")}),yi})}else if(Hn)if(vc(Hn)){if(Hn)return Sn?new nc(Sn.thisDep,Sn.contextDep,Sn.propDep,function(vi,oi){var yi=oi.def(vi.ELEMENTS,".vertCount-",vi.OFFSET);return he.optional(function(){vi.assert(oi,yi+">=0","invalid vertex offset/element buffer too small")}),yi}):Au(function(vi,oi){return oi.def(vi.ELEMENTS,".vertCount")});var kr=Au(function(){return-1});return he.optional(function(){kr.MISSING=!0}),kr}else{var jr=new nc(Hn.thisDep||Sn.thisDep,Hn.contextDep||Sn.contextDep,Hn.propDep||Sn.propDep,function(vi,oi){var yi=vi.ELEMENTS;return vi.OFFSET?oi.def(yi,"?",yi,".vertCount-",vi.OFFSET,":-1"):oi.def(yi,"?",yi,".vertCount:-1")});return he.optional(function(){jr.DYNAMIC=!0}),jr}return null}return{elements:Hn,primitive:tr(),count:Zn(),instances:ar(Gp,!1),offset:Sn}}function Wl(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic,Er={};return bi.forEach(function(Hn){var tr=pi(Hn);function ar(Sn,Zn){if(Hn in Mn){var tn=Sn(Mn[Hn]);Er[tr]=Au(function(){return tn})}else if(Hn in Tr){var $n=Tr[Hn];Er[tr]=Cf($n,function(kr,jr){return Zn(kr,jr,kr.invoke(jr,$n))})}}switch(Hn){case vu:case da:case Qt:case up:case aa:case Jf:case dc:case wc:case cf:case Cl:return ar(function(Sn){return he.commandType(Sn,"boolean",Hn,rn.commandStr),Sn},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,"typeof "+tn+'==="boolean"',"invalid flag "+Hn,Sn.commandStr)}),tn});case Fo:return ar(function(Sn){return he.commandParameter(Sn,Bd,"invalid "+Hn,rn.commandStr),Bd[Sn]},function(Sn,Zn,tn){var $n=Sn.constants.compareFuncs;return he.optional(function(){Sn.assert(Zn,tn+" in "+$n,"invalid "+Hn+", must be one of "+Object.keys(Bd))}),Zn.def($n,"[",tn,"]")});case pu:return ar(function(Sn){return he.command(pl(Sn)&&Sn.length===2&&typeof Sn[0]=="number"&&typeof Sn[1]=="number"&&Sn[0]<=Sn[1],"depth range is 2d array",rn.commandStr),Sn},function(Sn,Zn,tn){he.optional(function(){Sn.assert(Zn,Sn.shared.isArrayLike+"("+tn+")&&"+tn+".length===2&&typeof "+tn+'[0]==="number"&&typeof '+tn+'[1]==="number"&&'+tn+"[0]<="+tn+"[1]","depth range must be a 2d array")});var $n=Zn.def("+",tn,"[0]"),kr=Zn.def("+",tn,"[1]");return[$n,kr]});case _a:return ar(function(Sn){he.commandType(Sn,"object","blend.func",rn.commandStr);var Zn="srcRGB"in Sn?Sn.srcRGB:Sn.src,tn="srcAlpha"in Sn?Sn.srcAlpha:Sn.src,$n="dstRGB"in Sn?Sn.dstRGB:Sn.dst,kr="dstAlpha"in Sn?Sn.dstAlpha:Sn.dst;return he.commandParameter(Zn,qh,tr+".srcRGB",rn.commandStr),he.commandParameter(tn,qh,tr+".srcAlpha",rn.commandStr),he.commandParameter($n,qh,tr+".dstRGB",rn.commandStr),he.commandParameter(kr,qh,tr+".dstAlpha",rn.commandStr),he.command(cv.indexOf(Zn+", "+$n)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Zn+", "+$n+")",rn.commandStr),[qh[Zn],qh[$n],qh[tn],qh[kr]]},function(Sn,Zn,tn){var $n=Sn.constants.blendFuncs;he.optional(function(){Sn.assert(Zn,tn+"&&typeof "+tn+'==="object"',"invalid blend func, must be an object")});function kr(Yi,ia){var ea=Zn.def('"',Yi,ia,'" in ',tn,"?",tn,".",Yi,ia,":",tn,".",Yi);return he.optional(function(){Sn.assert(Zn,ea+" in "+$n,"invalid "+Hn+"."+Yi+ia+", must be one of "+Object.keys(qh))}),ea}var jr=kr("src","RGB"),vi=kr("dst","RGB");he.optional(function(){var Yi=Sn.constants.invalidBlendCombinations;Sn.assert(Zn,Yi+".indexOf("+jr+'+", "+'+vi+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var oi=Zn.def($n,"[",jr,"]"),yi=Zn.def($n,"[",kr("src","Alpha"),"]"),Do=Zn.def($n,"[",vi,"]"),Hi=Zn.def($n,"[",kr("dst","Alpha"),"]");return[oi,Do,yi,Hi]});case qo:return ar(function(Sn){if(typeof Sn=="string")return he.commandParameter(Sn,Br,"invalid "+Hn,rn.commandStr),[Br[Sn],Br[Sn]];if(typeof Sn=="object")return he.commandParameter(Sn.rgb,Br,Hn+".rgb",rn.commandStr),he.commandParameter(Sn.alpha,Br,Hn+".alpha",rn.commandStr),[Br[Sn.rgb],Br[Sn.alpha]];he.commandRaise("invalid blend.equation",rn.commandStr)},function(Sn,Zn,tn){var $n=Sn.constants.blendEquations,kr=Zn.def(),jr=Zn.def(),vi=Sn.cond("typeof ",tn,'==="string"');return he.optional(function(){function oi(yi,Do,Hi){Sn.assert(yi,Hi+" in "+$n,"invalid "+Do+", must be one of "+Object.keys(Br))}oi(vi.then,Hn,tn),Sn.assert(vi.else,tn+"&&typeof "+tn+'==="object"',"invalid "+Hn),oi(vi.else,Hn+".rgb",tn+".rgb"),oi(vi.else,Hn+".alpha",tn+".alpha")}),vi.then(kr,"=",jr,"=",$n,"[",tn,"];"),vi.else(kr,"=",$n,"[",tn,".rgb];",jr,"=",$n,"[",tn,".alpha];"),Zn(vi),[kr,jr]});case ha:return ar(function(Sn){return he.command(pl(Sn)&&Sn.length===4,"blend.color must be a 4d array",rn.commandStr),Jn(4,function(Zn){return+Sn[Zn]})},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,Sn.shared.isArrayLike+"("+tn+")&&"+tn+".length===4","blend.color must be a 4d array")}),Jn(4,function($n){return Zn.def("+",tn,"[",$n,"]")})});case cp:return ar(function(Sn){return he.commandType(Sn,"number",tr,rn.commandStr),Sn|0},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,"typeof "+tn+'==="number"',"invalid stencil.mask")}),Zn.def(tn,"|0")});case Sh:return ar(function(Sn){he.commandType(Sn,"object",tr,rn.commandStr);var Zn=Sn.cmp||"keep",tn=Sn.ref||0,$n="mask"in Sn?Sn.mask:-1;return he.commandParameter(Zn,Bd,Hn+".cmp",rn.commandStr),he.commandType(tn,"number",Hn+".ref",rn.commandStr),he.commandType($n,"number",Hn+".mask",rn.commandStr),[Bd[Zn],tn,$n]},function(Sn,Zn,tn){var $n=Sn.constants.compareFuncs;he.optional(function(){function oi(){Sn.assert(Zn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}oi(tn+"&&typeof ",tn,'==="object"'),oi('!("cmp" in ',tn,")||(",tn,".cmp in ",$n,")")});var kr=Zn.def('"cmp" in ',tn,"?",$n,"[",tn,".cmp]",":",Fd),jr=Zn.def(tn,".ref|0"),vi=Zn.def('"mask" in ',tn,"?",tn,".mask|0:-1");return[kr,jr,vi]});case Vh:case Hh:return ar(function(Sn){he.commandType(Sn,"object",tr,rn.commandStr);var Zn=Sn.fail||"keep",tn=Sn.zfail||"keep",$n=Sn.zpass||"keep";return he.commandParameter(Zn,vp,Hn+".fail",rn.commandStr),he.commandParameter(tn,vp,Hn+".zfail",rn.commandStr),he.commandParameter($n,vp,Hn+".zpass",rn.commandStr),[Hn===Hh?Nd:Xh,vp[Zn],vp[tn],vp[$n]]},function(Sn,Zn,tn){var $n=Sn.constants.stencilOps;he.optional(function(){Sn.assert(Zn,tn+"&&typeof "+tn+'==="object"',"invalid "+Hn)});function kr(jr){return he.optional(function(){Sn.assert(Zn,'!("'+jr+'" in '+tn+")||("+tn+"."+jr+" in "+$n+")","invalid "+Hn+"."+jr+", must be one of "+Object.keys(vp))}),Zn.def('"',jr,'" in ',tn,"?",$n,"[",tn,".",jr,"]:",Fd)}return[Hn===Hh?Nd:Xh,kr("fail"),kr("zfail"),kr("zpass")]});case Uf:return ar(function(Sn){he.commandType(Sn,"object",tr,rn.commandStr);var Zn=Sn.factor|0,tn=Sn.units|0;return he.commandType(Zn,"number",tr+".factor",rn.commandStr),he.commandType(tn,"number",tr+".units",rn.commandStr),[Zn,tn]},function(Sn,Zn,tn){he.optional(function(){Sn.assert(Zn,tn+"&&typeof "+tn+'==="object"',"invalid "+Hn)});var $n=Zn.def(tn,".factor|0"),kr=Zn.def(tn,".units|0");return[$n,kr]});case ws:return ar(function(Sn){var Zn=0;return Sn==="front"?Zn=Xh:Sn==="back"&&(Zn=Nd),he.command(!!Zn,tr,rn.commandStr),Zn},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,tn+'==="front"||'+tn+'==="back"',"invalid cull.face")}),Zn.def(tn,'==="front"?',Xh,":",Nd)});case ml:return ar(function(Sn){return he.command(typeof Sn=="number"&&Sn>=Cr.lineWidthDims[0]&&Sn<=Cr.lineWidthDims[1],"invalid line width, must be a positive number between "+Cr.lineWidthDims[0]+" and "+Cr.lineWidthDims[1],rn.commandStr),Sn},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,"typeof "+tn+'==="number"&&'+tn+">="+Cr.lineWidthDims[0]+"&&"+tn+"<="+Cr.lineWidthDims[1],"invalid line width")}),tn});case wl:return ar(function(Sn){return he.commandParameter(Sn,mp,tr,rn.commandStr),mp[Sn]},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,tn+'==="cw"||'+tn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Zn.def(tn+'==="cw"?'+Yh+":"+$h)});case Du:return ar(function(Sn){return he.command(pl(Sn)&&Sn.length===4,"color.mask must be length 4 array",rn.commandStr),Sn.map(function(Zn){return!!Zn})},function(Sn,Zn,tn){return he.optional(function(){Sn.assert(Zn,Sn.shared.isArrayLike+"("+tn+")&&"+tn+".length===4","invalid color.mask")}),Jn(4,function($n){return"!!"+tn+"["+$n+"]"})});case jc:return ar(function(Sn){he.command(typeof Sn=="object"&&Sn,tr,rn.commandStr);var Zn="value"in Sn?Sn.value:1,tn=!!Sn.invert;return he.command(typeof Zn=="number"&&Zn>=0&&Zn<=1,"sample.coverage.value must be a number between 0 and 1",rn.commandStr),[Zn,tn]},function(Sn,Zn,tn){he.optional(function(){Sn.assert(Zn,tn+"&&typeof "+tn+'==="object"',"invalid sample.coverage")});var $n=Zn.def('"value" in ',tn,"?+",tn,".value:1"),kr=Zn.def("!!",tn,".invert");return[$n,kr]})}}),Er}function mu(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic,Er={};return Object.keys(Mn).forEach(function(Hn){var tr=Mn[Hn],ar;if(typeof tr=="number"||typeof tr=="boolean")ar=Au(function(){return tr});else if(typeof tr=="function"){var Sn=tr._reglType;Sn==="texture2d"||Sn==="textureCube"?ar=Au(function(Zn){return Zn.link(tr)}):Sn==="framebuffer"||Sn==="framebufferCube"?(he.command(tr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Hn+'"',rn.commandStr),ar=Au(function(Zn){return Zn.link(tr.color[0])})):he.commandRaise('invalid data for uniform "'+Hn+'"',rn.commandStr)}else pl(tr)?ar=Au(function(Zn){var tn=Zn.global.def("[",Jn(tr.length,function($n){return he.command(typeof tr[$n]=="number"||typeof tr[$n]=="boolean","invalid uniform "+Hn,Zn.commandStr),tr[$n]}),"]");return tn}):he.commandRaise('invalid or missing data for uniform "'+Hn+'"',rn.commandStr);ar.value=tr,Er[Hn]=ar}),Object.keys(Tr).forEach(function(Hn){var tr=Tr[Hn];Er[Hn]=Cf(tr,function(ar,Sn){return ar.invoke(Sn,tr)})}),Er}function es(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic,Er={};return Object.keys(Mn).forEach(function(Hn){var tr=Mn[Hn],ar=qt.id(Hn),Sn=new dr;if(Hv(tr))Sn.state=Li,Sn.buffer=$r.getBuffer($r.create(tr,fp,!1,!0)),Sn.type=0;else{var Zn=$r.getBuffer(tr);if(Zn)Sn.state=Li,Sn.buffer=Zn,Sn.type=0;else if(he.command(typeof tr=="object"&&tr,"invalid data for attribute "+Hn,rn.commandStr),"constant"in tr){var tn=tr.constant;Sn.buffer="null",Sn.state=co,typeof tn=="number"?Sn.x=tn:(he.command(pl(tn)&&tn.length>0&&tn.length<=4,"invalid constant for attribute "+Hn,rn.commandStr),ni.forEach(function(Do,Hi){Hi<tn.length&&(Sn[Do]=tn[Hi])}))}else{Hv(tr.buffer)?Zn=$r.getBuffer($r.create(tr.buffer,fp,!1,!0)):Zn=$r.getBuffer(tr.buffer),he.command(!!Zn,'missing buffer for attribute "'+Hn+'"',rn.commandStr);var $n=tr.offset|0;he.command($n>=0,'invalid offset for attribute "'+Hn+'"',rn.commandStr);var kr=tr.stride|0;he.command(kr>=0&&kr<256,'invalid stride for attribute "'+Hn+'", must be integer betweeen [0, 255]',rn.commandStr);var jr=tr.size|0;he.command(!("size"in tr)||jr>0&&jr<=4,'invalid size for attribute "'+Hn+'", must be 1,2,3,4',rn.commandStr);var vi=!!tr.normalized,oi=0;"type"in tr&&(he.commandParameter(tr.type,uu,"invalid type for attribute "+Hn,rn.commandStr),oi=uu[tr.type]);var yi=tr.divisor|0;"divisor"in tr&&(he.command(yi===0||gi,'cannot specify divisor for attribute "'+Hn+'", instancing not supported',rn.commandStr),he.command(yi>=0,'invalid divisor for attribute "'+Hn+'"',rn.commandStr)),he.optional(function(){var Do=rn.commandStr,Hi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(tr).forEach(function(Yi){he.command(Hi.indexOf(Yi)>=0,'unknown parameter "'+Yi+'" for attribute pointer "'+Hn+'" (valid parameters are '+Hi+")",Do)})}),Sn.buffer=Zn,Sn.state=Li,Sn.size=jr,Sn.normalized=vi,Sn.type=oi||Zn.dtype,Sn.offset=$n,Sn.stride=kr,Sn.divisor=yi}}Er[Hn]=Au(function(Do,Hi){var Yi=Do.attribCache;if(ar in Yi)return Yi[ar];var ia={isStream:!1};return Object.keys(Sn).forEach(function(ea){ia[ea]=Sn[ea]}),Sn.buffer&&(ia.buffer=Do.link(Sn.buffer),ia.type=ia.type||ia.buffer+".dtype"),Yi[ar]=ia,ia})}),Object.keys(Tr).forEach(function(Hn){var tr=Tr[Hn];function ar(Sn,Zn){var tn=Sn.invoke(Zn,tr),$n=Sn.shared,kr=Sn.constants,jr=$n.isBufferArgs,vi=$n.buffer;he.optional(function(){Sn.assert(Zn,tn+"&&(typeof "+tn+'==="object"||typeof '+tn+'==="function")&&('+jr+"("+tn+")||"+vi+".getBuffer("+tn+")||"+vi+".getBuffer("+tn+".buffer)||"+jr+"("+tn+'.buffer)||("constant" in '+tn+"&&(typeof "+tn+'.constant==="number"||'+$n.isArrayLike+"("+tn+".constant))))",'invalid dynamic attribute "'+Hn+'"')});var oi={isStream:Zn.def(!1)},yi=new dr;yi.state=Li,Object.keys(yi).forEach(function(ia){oi[ia]=Zn.def(""+yi[ia])});var Do=oi.buffer,Hi=oi.type;Zn("if(",jr,"(",tn,")){",oi.isStream,"=true;",Do,"=",vi,".createStream(",fp,",",tn,");",Hi,"=",Do,".dtype;","}else{",Do,"=",vi,".getBuffer(",tn,");","if(",Do,"){",Hi,"=",Do,".dtype;",'}else if("constant" in ',tn,"){",oi.state,"=",co,";","if(typeof "+tn+'.constant === "number"){',oi[ni[0]],"=",tn,".constant;",ni.slice(1).map(function(ia){return oi[ia]}).join("="),"=0;","}else{",ni.map(function(ia,ea){return oi[ia]+"="+tn+".constant.length>"+ea+"?"+tn+".constant["+ea+"]:0;"}).join(""),"}}else{","if(",jr,"(",tn,".buffer)){",Do,"=",vi,".createStream(",fp,",",tn,".buffer);","}else{",Do,"=",vi,".getBuffer(",tn,".buffer);","}",Hi,'="type" in ',tn,"?",kr.glTypes,"[",tn,".type]:",Do,".dtype;",oi.normalized,"=!!",tn,".normalized;");function Yi(ia){Zn(oi[ia],"=",tn,".",ia,"|0;")}return Yi("size"),Yi("offset"),Yi("stride"),Yi("divisor"),Zn("}}"),Zn.exit("if(",oi.isStream,"){",vi,".destroyStream(",Do,");","}"),oi}Er[Hn]=Cf(tr,ar)}),Er}function Zl(Nt,rn){var Mn=Nt.static,Tr=Nt.dynamic;if(Gh in Mn){var Er=Mn[Gh];return Er!==null&&ki.getVAO(Er)===null&&(Er=ki.createVAO(Er)),Au(function(tr){return tr.link(ki.getVAO(Er))})}else if(Gh in Tr){var Hn=Tr[Gh];return Cf(Hn,function(tr,ar){var Sn=tr.invoke(ar,Hn);return ar.def(tr.shared.vao+".getVAO("+Sn+")")})}return null}function Qs(Nt){var rn=Nt.static,Mn=Nt.dynamic,Tr={};return Object.keys(rn).forEach(function(Er){var Hn=rn[Er];Tr[Er]=Au(function(tr,ar){return typeof Hn=="number"||typeof Hn=="boolean"?""+Hn:tr.link(Hn)})}),Object.keys(Mn).forEach(function(Er){var Hn=Mn[Er];Tr[Er]=Cf(Hn,function(tr,ar){return tr.invoke(ar,Hn)})}),Tr}function se(Nt,rn,Mn,Tr,Er){var Hn=Nt.static,tr=Nt.dynamic;he.optional(function(){var Yi=[tc,Tf,jf,Wa,Tu,Af,Ol,Gp,zl,Gh].concat(bi);function ia(ea){Object.keys(ea).forEach(function(_s){he.command(Yi.indexOf(_s)>=0,'unknown parameter "'+_s+'"',Er.commandStr)})}ia(Hn),ia(tr)});var ar=ua(Nt,rn),Sn=so(Nt,Er),Zn=va(Nt,Sn,Er),tn=ds(Nt,Er),$n=Wl(Nt,Er),kr=Ko(Nt,Er,ar);function jr(Yi){var ia=Zn[Yi];ia&&($n[Yi]=ia)}jr(kl),jr(pi(Ci));var vi=Object.keys($n).length>0,oi={framebuffer:Sn,draw:tn,shader:kr,state:$n,dirty:vi,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(oi.profile=Ca(Nt,Er),oi.uniforms=mu(Mn,Er),oi.drawVAO=oi.scopeVAO=Zl(Nt,Er),!oi.drawVAO&&kr.program&&!ar&&On.angle_instanced_arrays){var yi=!0,Do=kr.program.attributes.map(function(Yi){var ia=rn.static[Yi];return yi=yi&&!!ia,ia});if(yi&&Do.length>0){var Hi=ki.getVAO(ki.createVAO(Do));oi.drawVAO=new nc(null,null,null,function(Yi,ia){return Yi.link(Hi)}),oi.useVAO=!0}}return ar?oi.useVAO=!0:oi.attributes=es(rn,Er),oi.context=Qs(Tr,Er),oi}function tu(Nt,rn,Mn){var Tr=Nt.shared,Er=Tr.context,Hn=Nt.scope();Object.keys(Mn).forEach(function(tr){rn.save(Er,"."+tr);var ar=Mn[tr];Hn(Er,".",tr,"=",ar.append(Nt,rn),";")}),rn(Hn)}function fl(Nt,rn,Mn,Tr){var Er=Nt.shared,Hn=Er.gl,tr=Er.framebuffer,ar;oo&&(ar=rn.def(Er.extensions,".webgl_draw_buffers"));var Sn=Nt.constants,Zn=Sn.drawBuffer,tn=Sn.backBuffer,$n;Mn?$n=Mn.append(Nt,rn):$n=rn.def(tr,".next"),Tr||rn("if(",$n,"!==",tr,".cur){"),rn("if(",$n,"){",Hn,".bindFramebuffer(",Kp,",",$n,".framebuffer);"),oo&&rn(ar,".drawBuffersWEBGL(",Zn,"[",$n,".colorAttachments.length]);"),rn("}else{",Hn,".bindFramebuffer(",Kp,",null);"),oo&&rn(ar,".drawBuffersWEBGL(",tn,");"),rn("}",tr,".cur=",$n,";"),Tr||rn("}")}function or(Nt,rn,Mn){var Tr=Nt.shared,Er=Tr.gl,Hn=Nt.current,tr=Nt.next,ar=Tr.current,Sn=Tr.next,Zn=Nt.cond(ar,".dirty");bi.forEach(function(tn){var $n=pi(tn);if(!($n in Mn.state)){var kr,jr;if($n in tr){kr=tr[$n],jr=Hn[$n];var vi=Jn(ii[$n].length,function(yi){return Zn.def(kr,"[",yi,"]")});Zn(Nt.cond(vi.map(function(yi,Do){return yi+"!=="+jr+"["+Do+"]"}).join("||")).then(Er,".",li[$n],"(",vi,");",vi.map(function(yi,Do){return jr+"["+Do+"]="+yi}).join(";"),";"))}else{kr=Zn.def(Sn,".",$n);var oi=Nt.cond(kr,"!==",ar,".",$n);Zn(oi),$n in no?oi(Nt.cond(kr).then(Er,".enable(",no[$n],");").else(Er,".disable(",no[$n],");"),ar,".",$n,"=",kr,";"):oi(Er,".",li[$n],"(",kr,");",ar,".",$n,"=",kr,";")}}}),Object.keys(Mn.state).length===0&&Zn(ar,".dirty=false;"),rn(Zn)}function Qr(Nt,rn,Mn,Tr){var Er=Nt.shared,Hn=Nt.current,tr=Er.current,ar=Er.gl;Gv(Object.keys(Mn)).forEach(function(Sn){var Zn=Mn[Sn];if(!(Tr&&!Tr(Zn))){var tn=Zn.append(Nt,rn);if(no[Sn]){var $n=no[Sn];vc(Zn)?tn?rn(ar,".enable(",$n,");"):rn(ar,".disable(",$n,");"):rn(Nt.cond(tn).then(ar,".enable(",$n,");").else(ar,".disable(",$n,");")),rn(tr,".",Sn,"=",tn,";")}else if(pl(tn)){var kr=Hn[Sn];rn(ar,".",li[Sn],"(",tn,");",tn.map(function(jr,vi){return kr+"["+vi+"]="+jr}).join(";"),";")}else rn(ar,".",li[Sn],"(",tn,");",tr,".",Sn,"=",tn,";")}})}function Js(Nt,rn){gi&&(Nt.instancing=rn.def(Nt.shared.extensions,".angle_instanced_arrays"))}function Oa(Nt,rn,Mn,Tr,Er){var Hn=Nt.shared,tr=Nt.stats,ar=Hn.current,Sn=Hn.timer,Zn=Mn.profile;function tn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var $n,kr;function jr(Yi){$n=rn.def(),Yi($n,"=",tn(),";"),typeof Er=="string"?Yi(tr,".count+=",Er,";"):Yi(tr,".count++;"),mi&&(Tr?(kr=rn.def(),Yi(kr,"=",Sn,".getNumPendingQueries();")):Yi(Sn,".beginQuery(",tr,");"))}function vi(Yi){Yi(tr,".cpuTime+=",tn(),"-",$n,";"),mi&&(Tr?Yi(Sn,".pushScopeStats(",kr,",",Sn,".getNumPendingQueries(),",tr,");"):Yi(Sn,".endQuery();"))}function oi(Yi){var ia=rn.def(ar,".profile");rn(ar,".profile=",Yi,";"),rn.exit(ar,".profile=",ia,";")}var yi;if(Zn){if(vc(Zn)){Zn.enable?(jr(rn),vi(rn.exit),oi("true")):oi("false");return}yi=Zn.append(Nt,rn),oi(yi)}else yi=rn.def(ar,".profile");var Do=Nt.block();jr(Do),rn("if(",yi,"){",Do,"}");var Hi=Nt.block();vi(Hi),rn.exit("if(",yi,"){",Hi,"}")}function Hu(Nt,rn,Mn,Tr,Er){var Hn=Nt.shared;function tr(Sn){switch(Sn){case sv:case ff:case S0:return 2;case lv:case gl:case Yp:return 3;case uv:case Ld:case dp:return 4;default:return 1}}function ar(Sn,Zn,tn){var $n=Hn.gl,kr=rn.def(Sn,".location"),jr=rn.def(Hn.attributes,"[",kr,"]"),vi=tn.state,oi=tn.buffer,yi=[tn.x,tn.y,tn.z,tn.w],Do=["buffer","normalized","offset","stride"];function Hi(){rn("if(!",jr,".buffer){",$n,".enableVertexAttribArray(",kr,");}");var ia=tn.type,ea;if(tn.size?ea=rn.def(tn.size,"||",Zn):ea=Zn,rn("if(",jr,".type!==",ia,"||",jr,".size!==",ea,"||",Do.map(function(Lu){return jr+"."+Lu+"!=="+tn[Lu]}).join("||"),"){",$n,".bindBuffer(",fp,",",oi,".buffer);",$n,".vertexAttribPointer(",[kr,ea,ia,tn.normalized,tn.stride,tn.offset],");",jr,".type=",ia,";",jr,".size=",ea,";",Do.map(function(Lu){return jr+"."+Lu+"="+tn[Lu]+";"}).join(""),"}"),gi){var _s=tn.divisor;rn("if(",jr,".divisor!==",_s,"){",Nt.instancing,".vertexAttribDivisorANGLE(",[kr,_s],");",jr,".divisor=",_s,";}")}}function Yi(){rn("if(",jr,".buffer){",$n,".disableVertexAttribArray(",kr,");",jr,".buffer=null;","}if(",ni.map(function(ia,ea){return jr+"."+ia+"!=="+yi[ea]}).join("||"),"){",$n,".vertexAttrib4f(",kr,",",yi,");",ni.map(function(ia,ea){return jr+"."+ia+"="+yi[ea]+";"}).join(""),"}")}vi===Li?Hi():vi===co?Yi():(rn("if(",vi,"===",Li,"){"),Hi(),rn("}else{"),Yi(),rn("}"))}Tr.forEach(function(Sn){var Zn=Sn.name,tn=Mn.attributes[Zn],$n;if(tn){if(!Er(tn))return;$n=tn.append(Nt,rn)}else{if(!Er(zm))return;var kr=Nt.scopeAttrib(Zn);he.optional(function(){Nt.assert(rn,kr+".state","missing attribute "+Zn)}),$n={},Object.keys(new dr).forEach(function(jr){$n[jr]=rn.def(kr,".",jr)})}ar(Nt.link(Sn),tr(Sn.info.type),$n)})}function Ns(Nt,rn,Mn,Tr,Er){for(var Hn=Nt.shared,tr=Hn.gl,ar,Sn=0;Sn<Tr.length;++Sn){var Zn=Tr[Sn],tn=Zn.name,$n=Zn.info.type,kr=Mn.uniforms[tn],jr=Nt.link(Zn),vi=jr+".location",oi;if(kr){if(!Er(kr))continue;if(vc(kr)){var yi=kr.value;if(he.command(yi!==null&&typeof yi!="undefined",'missing uniform "'+tn+'"',Nt.commandStr),$n===Vf||$n===qp){he.command(typeof yi=="function"&&($n===Vf&&(yi._reglType==="texture2d"||yi._reglType==="framebuffer")||$n===qp&&(yi._reglType==="textureCube"||yi._reglType==="framebufferCube")),"invalid texture for uniform "+tn,Nt.commandStr);var Do=Nt.link(yi._texture||yi.color[0]._texture);rn(tr,".uniform1i(",vi,",",Do+".bind());"),rn.exit(Do,".unbind();")}else if($n===$p||$n===pp||$n===th){he.optional(function(){he.command(pl(yi),"invalid matrix for uniform "+tn,Nt.commandStr),he.command($n===$p&&yi.length===4||$n===pp&&yi.length===9||$n===th&&yi.length===16,"invalid length for matrix uniform "+tn,Nt.commandStr)});var Hi=Nt.global.def("new Float32Array(["+Array.prototype.slice.call(yi)+"])"),Yi=2;$n===pp?Yi=3:$n===th&&(Yi=4),rn(tr,".uniformMatrix",Yi,"fv(",vi,",false,",Hi,");")}else{switch($n){case av:he.commandType(yi,"number","uniform "+tn,Nt.commandStr),ar="1f";break;case sv:he.command(pl(yi)&&yi.length===2,"uniform "+tn,Nt.commandStr),ar="2f";break;case lv:he.command(pl(yi)&&yi.length===3,"uniform "+tn,Nt.commandStr),ar="3f";break;case uv:he.command(pl(yi)&&yi.length===4,"uniform "+tn,Nt.commandStr),ar="4f";break;case E0:he.commandType(yi,"boolean","uniform "+tn,Nt.commandStr),ar="1i";break;case hp:he.commandType(yi,"number","uniform "+tn,Nt.commandStr),ar="1i";break;case S0:he.command(pl(yi)&&yi.length===2,"uniform "+tn,Nt.commandStr),ar="2i";break;case ff:he.command(pl(yi)&&yi.length===2,"uniform "+tn,Nt.commandStr),ar="2i";break;case Yp:he.command(pl(yi)&&yi.length===3,"uniform "+tn,Nt.commandStr),ar="3i";break;case gl:he.command(pl(yi)&&yi.length===3,"uniform "+tn,Nt.commandStr),ar="3i";break;case dp:he.command(pl(yi)&&yi.length===4,"uniform "+tn,Nt.commandStr),ar="4i";break;case Ld:he.command(pl(yi)&&yi.length===4,"uniform "+tn,Nt.commandStr),ar="4i";break}rn(tr,".uniform",ar,"(",vi,",",pl(yi)?Array.prototype.slice.call(yi):yi,");")}continue}else oi=kr.append(Nt,rn)}else{if(!Er(zm))continue;oi=rn.def(Hn.uniforms,"[",qt.id(tn),"]")}$n===Vf?rn("if(",oi,"&&",oi,'._reglType==="framebuffer"){',oi,"=",oi,".color[0];","}"):$n===qp&&rn("if(",oi,"&&",oi,'._reglType==="framebufferCube"){',oi,"=",oi,".color[0];","}"),he.optional(function(){function Tc(_p,jm){Nt.assert(rn,_p,'bad data or missing for uniform "'+tn+'".  '+jm)}function yp(_p){Tc("typeof "+oi+'==="'+_p+'"',"invalid type, expected "+_p)}function nh(_p,jm){Tc(Hn.isArrayLike+"("+oi+")&&"+oi+".length==="+_p,"invalid vector, should have length "+_p,Nt.commandStr)}function Xv(_p){Tc("typeof "+oi+'==="function"&&'+oi+'._reglType==="texture'+(_p===kv?"2d":"Cube")+'"',"invalid texture type",Nt.commandStr)}switch($n){case hp:yp("number");break;case ff:nh(2,"number");break;case gl:nh(3,"number");break;case Ld:nh(4,"number");break;case av:yp("number");break;case sv:nh(2,"number");break;case lv:nh(3,"number");break;case uv:nh(4,"number");break;case E0:yp("boolean");break;case S0:nh(2,"boolean");break;case Yp:nh(3,"boolean");break;case dp:nh(4,"boolean");break;case $p:nh(4,"number");break;case pp:nh(9,"number");break;case th:nh(16,"number");break;case Vf:Xv(kv);break;case qp:Xv(w1);break}});var ia=1;switch($n){case Vf:case qp:var ea=rn.def(oi,"._texture");rn(tr,".uniform1i(",vi,",",ea,".bind());"),rn.exit(ea,".unbind();");continue;case hp:case E0:ar="1i";break;case ff:case S0:ar="2i",ia=2;break;case gl:case Yp:ar="3i",ia=3;break;case Ld:case dp:ar="4i",ia=4;break;case av:ar="1f";break;case sv:ar="2f",ia=2;break;case lv:ar="3f",ia=3;break;case uv:ar="4f",ia=4;break;case $p:ar="Matrix2fv";break;case pp:ar="Matrix3fv";break;case th:ar="Matrix4fv";break}if(rn(tr,".uniform",ar,"(",vi,","),ar.charAt(0)==="M"){var _s=Math.pow($n-$p+2,2),Lu=Nt.global.def("new Float32Array(",_s,")");rn("false,(Array.isArray(",oi,")||",oi," instanceof Float32Array)?",oi,":(",Jn(_s,function(Tc){return Lu+"["+Tc+"]="+oi+"["+Tc+"]"}),",",Lu,")")}else ia>1?rn(Jn(ia,function(Tc){return oi+"["+Tc+"]"})):rn(oi);rn(");")}}function oa(Nt,rn,Mn,Tr){var Er=Nt.shared,Hn=Er.gl,tr=Er.draw,ar=Tr.draw;function Sn(){var ea=ar.elements,_s,Lu=rn;return ea?((ea.contextDep&&Tr.contextDynamic||ea.propDep)&&(Lu=Mn),_s=ea.append(Nt,Lu)):_s=Lu.def(tr,".",Wa),_s&&Lu("if("+_s+")"+Hn+".bindBuffer("+Vg+","+_s+".buffer.buffer);"),_s}function Zn(){var ea=ar.count,_s,Lu=rn;return ea?((ea.contextDep&&Tr.contextDynamic||ea.propDep)&&(Lu=Mn),_s=ea.append(Nt,Lu),he.optional(function(){ea.MISSING&&Nt.assert(rn,"false","missing vertex count"),ea.DYNAMIC&&Nt.assert(Lu,_s+">=0","missing vertex count")})):(_s=Lu.def(tr,".",Ol),he.optional(function(){Nt.assert(Lu,_s+">=0","missing vertex count")})),_s}var tn=Sn();function $n(ea){var _s=ar[ea];return _s?_s.contextDep&&Tr.contextDynamic||_s.propDep?_s.append(Nt,Mn):_s.append(Nt,rn):rn.def(tr,".",ea)}var kr=$n(Tu),jr=$n(Af),vi=Zn();if(typeof vi=="number"){if(vi===0)return}else Mn("if(",vi,"){"),Mn.exit("}");var oi,yi;gi&&(oi=$n(Gp),yi=Nt.instancing);var Do=tn+".type",Hi=ar.elements&&vc(ar.elements);function Yi(){function ea(){Mn(yi,".drawElementsInstancedANGLE(",[kr,vi,Do,jr+"<<(("+Do+"-"+zi+")>>1)",oi],");")}function _s(){Mn(yi,".drawArraysInstancedANGLE(",[kr,jr,vi,oi],");")}tn?Hi?ea():(Mn("if(",tn,"){"),ea(),Mn("}else{"),_s(),Mn("}")):_s()}function ia(){function ea(){Mn(Hn+".drawElements("+[kr,vi,Do,jr+"<<(("+Do+"-"+zi+")>>1)"]+");")}function _s(){Mn(Hn+".drawArrays("+[kr,jr,vi]+");")}tn?Hi?ea():(Mn("if(",tn,"){"),ea(),Mn("}else{"),_s(),Mn("}")):_s()}gi&&(typeof oi!="number"||oi>=0)?typeof oi=="string"?(Mn("if(",oi,">0){"),Yi(),Mn("}else if(",oi,"<0){"),ia(),Mn("}")):Yi():ia()}function Pa(Nt,rn,Mn,Tr,Er){var Hn=Bo(),tr=Hn.proc("body",Er);return he.optional(function(){Hn.commandStr=rn.commandStr,Hn.command=Hn.link(rn.commandStr)}),gi&&(Hn.instancing=tr.def(Hn.shared.extensions,".angle_instanced_arrays")),Nt(Hn,tr,Mn,Tr),Hn.compile().body}function ts(Nt,rn,Mn,Tr){Js(Nt,rn),Mn.useVAO?Mn.drawVAO?rn(Nt.shared.vao,".setVAO(",Mn.drawVAO.append(Nt,rn),");"):rn(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(rn(Nt.shared.vao,".setVAO(null);"),Hu(Nt,rn,Mn,Tr.attributes,function(){return!0})),Ns(Nt,rn,Mn,Tr.uniforms,function(){return!0}),oa(Nt,rn,rn,Mn)}function gu(Nt,rn){var Mn=Nt.proc("draw",1);Js(Nt,Mn),tu(Nt,Mn,rn.context),fl(Nt,Mn,rn.framebuffer),or(Nt,Mn,rn),Qr(Nt,Mn,rn.state),Oa(Nt,Mn,rn,!1,!0);var Tr=rn.shader.progVar.append(Nt,Mn);if(Mn(Nt.shared.gl,".useProgram(",Tr,".program);"),rn.shader.program)ts(Nt,Mn,rn,rn.shader.program);else{Mn(Nt.shared.vao,".setVAO(null);");var Er=Nt.global.def("{}"),Hn=Mn.def(Tr,".id"),tr=Mn.def(Er,"[",Hn,"]");Mn(Nt.cond(tr).then(tr,".call(this,a0);").else(tr,"=",Er,"[",Hn,"]=",Nt.link(function(ar){return Pa(ts,Nt,rn,ar,1)}),"(",Tr,");",tr,".call(this,a0);"))}Object.keys(rn.state).length>0&&Mn(Nt.shared.current,".dirty=true;")}function wh(Nt,rn,Mn,Tr){Nt.batchId="a1",Js(Nt,rn);function Er(){return!0}Hu(Nt,rn,Mn,Tr.attributes,Er),Ns(Nt,rn,Mn,Tr.uniforms,Er),oa(Nt,rn,rn,Mn)}function _n(Nt,rn,Mn,Tr){Js(Nt,rn);var Er=Mn.contextDep,Hn=rn.def(),tr="a0",ar="a1",Sn=rn.def();Nt.shared.props=Sn,Nt.batchId=Hn;var Zn=Nt.scope(),tn=Nt.scope();rn(Zn.entry,"for(",Hn,"=0;",Hn,"<",ar,";++",Hn,"){",Sn,"=",tr,"[",Hn,"];",tn,"}",Zn.exit);function $n(Do){return Do.contextDep&&Er||Do.propDep}function kr(Do){return!$n(Do)}if(Mn.needsContext&&tu(Nt,tn,Mn.context),Mn.needsFramebuffer&&fl(Nt,tn,Mn.framebuffer),Qr(Nt,tn,Mn.state,$n),Mn.profile&&$n(Mn.profile)&&Oa(Nt,tn,Mn,!1,!0),Tr)Mn.useVAO?Mn.drawVAO?$n(Mn.drawVAO)?tn(Nt.shared.vao,".setVAO(",Mn.drawVAO.append(Nt,tn),");"):Zn(Nt.shared.vao,".setVAO(",Mn.drawVAO.append(Nt,Zn),");"):Zn(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(Zn(Nt.shared.vao,".setVAO(null);"),Hu(Nt,Zn,Mn,Tr.attributes,kr),Hu(Nt,tn,Mn,Tr.attributes,$n)),Ns(Nt,Zn,Mn,Tr.uniforms,kr),Ns(Nt,tn,Mn,Tr.uniforms,$n),oa(Nt,Zn,tn,Mn);else{var jr=Nt.global.def("{}"),vi=Mn.shader.progVar.append(Nt,tn),oi=tn.def(vi,".id"),yi=tn.def(jr,"[",oi,"]");tn(Nt.shared.gl,".useProgram(",vi,".program);","if(!",yi,"){",yi,"=",jr,"[",oi,"]=",Nt.link(function(Do){return Pa(wh,Nt,Mn,Do,2)}),"(",vi,");}",yi,".call(this,a0[",Hn,"],",Hn,");")}}function Or(Nt,rn){var Mn=Nt.proc("batch",2);Nt.batchId="0",Js(Nt,Mn);var Tr=!1,Er=!0;Object.keys(rn.context).forEach(function(jr){Tr=Tr||rn.context[jr].propDep}),Tr||(tu(Nt,Mn,rn.context),Er=!1);var Hn=rn.framebuffer,tr=!1;Hn?(Hn.propDep?Tr=tr=!0:Hn.contextDep&&Tr&&(tr=!0),tr||fl(Nt,Mn,Hn)):fl(Nt,Mn,null),rn.state.viewport&&rn.state.viewport.propDep&&(Tr=!0);function ar(jr){return jr.contextDep&&Tr||jr.propDep}or(Nt,Mn,rn),Qr(Nt,Mn,rn.state,function(jr){return!ar(jr)}),(!rn.profile||!ar(rn.profile))&&Oa(Nt,Mn,rn,!1,"a1"),rn.contextDep=Tr,rn.needsContext=Er,rn.needsFramebuffer=tr;var Sn=rn.shader.progVar;if(Sn.contextDep&&Tr||Sn.propDep)_n(Nt,Mn,rn,null);else{var Zn=Sn.append(Nt,Mn);if(Mn(Nt.shared.gl,".useProgram(",Zn,".program);"),rn.shader.program)_n(Nt,Mn,rn,rn.shader.program);else{Mn(Nt.shared.vao,".setVAO(null);");var tn=Nt.global.def("{}"),$n=Mn.def(Zn,".id"),kr=Mn.def(tn,"[",$n,"]");Mn(Nt.cond(kr).then(kr,".call(this,a0,a1);").else(kr,"=",tn,"[",$n,"]=",Nt.link(function(jr){return Pa(_n,Nt,rn,jr,2)}),"(",Zn,");",kr,".call(this,a0,a1);"))}}Object.keys(rn.state).length>0&&Mn(Nt.shared.current,".dirty=true;")}function Sr(Nt,rn){var Mn=Nt.proc("scope",3);Nt.batchId="a2";var Tr=Nt.shared,Er=Tr.current;tu(Nt,Mn,rn.context),rn.framebuffer&&rn.framebuffer.append(Nt,Mn),Gv(Object.keys(rn.state)).forEach(function(tr){var ar=rn.state[tr],Sn=ar.append(Nt,Mn);pl(Sn)?Sn.forEach(function(Zn,tn){Mn.set(Nt.next[tr],"["+tn+"]",Zn)}):Mn.set(Tr.next,"."+tr,Sn)}),Oa(Nt,Mn,rn,!0,!0),[Wa,Af,Ol,Gp,Tu].forEach(function(tr){var ar=rn.draw[tr];ar&&Mn.set(Tr.draw,"."+tr,""+ar.append(Nt,Mn))}),Object.keys(rn.uniforms).forEach(function(tr){Mn.set(Tr.uniforms,"["+qt.id(tr)+"]",rn.uniforms[tr].append(Nt,Mn))}),Object.keys(rn.attributes).forEach(function(tr){var ar=rn.attributes[tr].append(Nt,Mn),Sn=Nt.scopeAttrib(tr);Object.keys(new dr).forEach(function(Zn){Mn.set(Sn,"."+Zn,ar[Zn])})}),rn.scopeVAO&&Mn.set(Tr.vao,".targetVAO",rn.scopeVAO.append(Nt,Mn));function Hn(tr){var ar=rn.shader[tr];ar&&Mn.set(Tr.shader,"."+tr,ar.append(Nt,Mn))}Hn(Tf),Hn(jf),Object.keys(rn.state).length>0&&(Mn(Er,".dirty=true;"),Mn.exit(Er,".dirty=true;")),Mn("a1(",Nt.shared.context,",a0,",Nt.batchId,");")}function lo(Nt){if(!(typeof Nt!="object"||pl(Nt))){for(var rn=Object.keys(Nt),Mn=0;Mn<rn.length;++Mn)if(An.isDynamic(Nt[rn[Mn]]))return!0;return!1}}function Na(Nt,rn,Mn){var Tr=rn.static[Mn];if(!Tr||!lo(Tr))return;var Er=Nt.global,Hn=Object.keys(Tr),tr=!1,ar=!1,Sn=!1,Zn=Nt.global.def("{}");Hn.forEach(function($n){var kr=Tr[$n];if(An.isDynamic(kr)){typeof kr=="function"&&(kr=Tr[$n]=An.unbox(kr));var jr=Cf(kr,null);tr=tr||jr.thisDep,Sn=Sn||jr.propDep,ar=ar||jr.contextDep}else{switch(Er(Zn,".",$n,"="),typeof kr){case"number":Er(kr);break;case"string":Er('"',kr,'"');break;case"object":Array.isArray(kr)&&Er("[",kr.join(),"]");break;default:Er(Nt.link(kr));break}Er(";")}});function tn($n,kr){Hn.forEach(function(jr){var vi=Tr[jr];if(An.isDynamic(vi)){var oi=$n.invoke(kr,vi);kr(Zn,".",jr,"=",oi,";")}})}rn.dynamic[Mn]=new An.DynamicVariable(Pr,{thisDep:tr,contextDep:ar,propDep:Sn,ref:Zn,append:tn}),delete rn.static[Mn]}function el(Nt,rn,Mn,Tr,Er){var Hn=Bo();Hn.stats=Hn.link(Er),Object.keys(rn.static).forEach(function(ar){Na(Hn,rn,ar)}),t_.forEach(function(ar){Na(Hn,Nt,ar)});var tr=se(Nt,rn,Mn,Tr,Hn);return gu(Hn,tr),Sr(Hn,tr),Or(Hn,tr),Hn.compile()}return{next:to,current:ii,procs:function(){var Nt=Bo(),rn=Nt.proc("poll"),Mn=Nt.proc("refresh"),Tr=Nt.block();rn(Tr),Mn(Tr);var Er=Nt.shared,Hn=Er.gl,tr=Er.next,ar=Er.current;Tr(ar,".dirty=false;"),fl(Nt,rn),fl(Nt,Mn,null,!0);var Sn;gi&&(Sn=Nt.link(gi)),On.oes_vertex_array_object&&Mn(Nt.link(On.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Zn=0;Zn<Cr.maxAttributes;++Zn){var tn=Mn.def(Er.attributes,"[",Zn,"]"),$n=Nt.cond(tn,".buffer");$n.then(Hn,".enableVertexAttribArray(",Zn,");",Hn,".bindBuffer(",fp,",",tn,".buffer.buffer);",Hn,".vertexAttribPointer(",Zn,",",tn,".size,",tn,".type,",tn,".normalized,",tn,".stride,",tn,".offset);").else(Hn,".disableVertexAttribArray(",Zn,");",Hn,".vertexAttrib4f(",Zn,",",tn,".x,",tn,".y,",tn,".z,",tn,".w);",tn,".buffer=null;"),Mn($n),gi&&Mn(Sn,".vertexAttribDivisorANGLE(",Zn,",",tn,".divisor);")}return Mn(Nt.shared.vao,".currentVAO=null;",Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"),Object.keys(no).forEach(function(kr){var jr=no[kr],vi=Tr.def(tr,".",kr),oi=Nt.block();oi("if(",vi,"){",Hn,".enable(",jr,")}else{",Hn,".disable(",jr,")}",ar,".",kr,"=",vi,";"),Mn(oi),rn("if(",vi,"!==",ar,".",kr,"){",oi,"}")}),Object.keys(li).forEach(function(kr){var jr=li[kr],vi=ii[kr],oi,yi,Do=Nt.block();if(Do(Hn,".",jr,"("),pl(vi)){var Hi=vi.length;oi=Nt.global.def(tr,".",kr),yi=Nt.global.def(ar,".",kr),Do(Jn(Hi,function(Yi){return oi+"["+Yi+"]"}),");",Jn(Hi,function(Yi){return yi+"["+Yi+"]="+oi+"["+Yi+"];"}).join("")),rn("if(",Jn(Hi,function(Yi){return oi+"["+Yi+"]!=="+yi+"["+Yi+"]"}).join("||"),"){",Do,"}")}else oi=Tr.def(tr,".",kr),yi=Tr.def(ar,".",kr),Do(oi,");",ar,".",kr,"=",oi,";"),rn("if(",oi,"!==",yi,"){",Do,"}");Mn(Do)}),Nt.compile()}(),compile:el}}function Qp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Um=34918,o_=34919,Xg=35007,Wv=function(Ue,qt){if(!qt.ext_disjoint_timer_query)return null;var On=[];function Cr(){return On.pop()||qt.ext_disjoint_timer_query.createQueryEXT()}function $r(gi){On.push(gi)}var Mr=[];function yr(gi){var oo=Cr();qt.ext_disjoint_timer_query.beginQueryEXT(Xg,oo),Mr.push(oo),mi(Mr.length-1,Mr.length,gi)}function Oi(){qt.ext_disjoint_timer_query.endQueryEXT(Xg)}function di(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ki=[];function Mi(){return ki.pop()||new di}function Bi(gi){ki.push(gi)}var Xi=[];function mi(gi,oo,ii){var to=Mi();to.startQueryIndex=gi,to.endQueryIndex=oo,to.sum=0,to.stats=ii,Xi.push(to)}var Ui=[],dr=[];function Br(){var gi,oo,ii=Mr.length;if(ii!==0){dr.length=Math.max(dr.length,ii+1),Ui.length=Math.max(Ui.length,ii+1),Ui[0]=0,dr[0]=0;var to=0;for(gi=0,oo=0;oo<Mr.length;++oo){var bi=Mr[oo];qt.ext_disjoint_timer_query.getQueryObjectEXT(bi,o_)?(to+=qt.ext_disjoint_timer_query.getQueryObjectEXT(bi,Um),$r(bi)):Mr[gi++]=bi,Ui[oo+1]=to,dr[oo+1]=gi}for(Mr.length=gi,gi=0,oo=0;oo<Xi.length;++oo){var no=Xi[oo],li=no.startQueryIndex,pi=no.endQueryIndex;no.sum+=Ui[pi]-Ui[li];var jo=dr[li],pa=dr[pi];pa===jo?(no.stats.gpuTime+=no.sum/1e6,Bi(no)):(no.startQueryIndex=jo,no.endQueryIndex=pa,Xi[gi++]=no)}Xi.length=gi}}return{beginQuery:yr,endQuery:Oi,pushScopeStats:mi,update:Br,getNumPendingQueries:function(){return Mr.length},clear:function(){On.push.apply(On,Mr);for(var gi=0;gi<On.length;gi++)qt.ext_disjoint_timer_query.deleteQueryEXT(On[gi]);Mr.length=0,On.length=0},restore:function(){Mr.length=0,On.length=0}}},fv=16384,mc=256,a_=1024,kd=34962,hv="webglcontextlost",Yg="webglcontextrestored",w0=1,gp=2,s_=3;function Zv(Ue,qt){for(var On=0;On<Ue.length;++On)if(Ue[On]===qt)return On;return-1}function $g(Ue){var qt=Kn(Ue);if(!qt)return null;var On=qt.gl,Cr=On.getContextAttributes(),$r=On.isContextLost(),Mr=_r(On,qt);if(!Mr)return null;var yr=dt(),Oi=Qp(),di=Mr.extensions,ki=Wv(On,di),Mi=Xn(),Bi=On.drawingBufferWidth,Xi=On.drawingBufferHeight,mi={tick:0,time:0,viewportWidth:Bi,viewportHeight:Xi,framebufferWidth:Bi,framebufferHeight:Xi,drawingBufferWidth:Bi,drawingBufferHeight:Xi,pixelRatio:qt.pixelRatio},Ui={},dr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Br=xs(On,di),gi=bd(On,Oi,qt,ii),oo=ht(On,di,Br,Oi,gi);function ii(oa){return oo.destroyBuffer(oa)}var to=wd(On,di,gi,Oi),bi=vn(On,yr,Oi,qt),no=zc(On,di,Br,function(){jo.procs.poll()},mi,Oi,qt),li=Ju(On,di,Br,Oi,qt),pi=Z(On,di,Br,no,li,Oi),jo=Za(On,yr,di,Br,gi,to,no,pi,Ui,oo,bi,dr,mi,ki,qt),pa=mr(On,pi,jo.procs.poll,mi,Cr,di,Br),Ki=jo.next,wi=On.canvas,qr=[],Bo=[],Ca=[],so=[qt.onDestroy],va=null;function ua(){if(qr.length===0){ki&&ki.update(),va=null;return}va=Pn.next(ua),Qr();for(var oa=qr.length-1;oa>=0;--oa){var Pa=qr[oa];Pa&&Pa(mi,null,0)}On.flush(),ki&&ki.update()}function Ko(){!va&&qr.length>0&&(va=Pn.next(ua))}function ds(){va&&(Pn.cancel(ua),va=null)}function Wl(oa){oa.preventDefault(),$r=!0,ds(),Bo.forEach(function(Pa){Pa()})}function mu(oa){On.getError(),$r=!1,Mr.restore(),bi.restore(),gi.restore(),no.restore(),li.restore(),pi.restore(),oo.restore(),ki&&ki.restore(),jo.procs.refresh(),Ko(),Ca.forEach(function(Pa){Pa()})}wi&&(wi.addEventListener(hv,Wl,!1),wi.addEventListener(Yg,mu,!1));function es(){qr.length=0,ds(),wi&&(wi.removeEventListener(hv,Wl),wi.removeEventListener(Yg,mu)),bi.clear(),pi.clear(),li.clear(),no.clear(),to.clear(),gi.clear(),oo.clear(),ki&&ki.clear(),so.forEach(function(oa){oa()})}function Zl(oa){he(!!oa,"invalid args to regl({...})"),he.type(oa,"object","invalid args to regl({...})");function Pa(Er){var Hn=L({},Er);delete Hn.uniforms,delete Hn.attributes,delete Hn.context,delete Hn.vao,"stencil"in Hn&&Hn.stencil.op&&(Hn.stencil.opBack=Hn.stencil.opFront=Hn.stencil.op,delete Hn.stencil.op);function tr(ar){if(ar in Hn){var Sn=Hn[ar];delete Hn[ar],Object.keys(Sn).forEach(function(Zn){Hn[ar+"."+Zn]=Sn[Zn]})}}return tr("blend"),tr("depth"),tr("cull"),tr("stencil"),tr("polygonOffset"),tr("scissor"),tr("sample"),"vao"in Er&&(Hn.vao=Er.vao),Hn}function ts(Er){var Hn={},tr={};return Object.keys(Er).forEach(function(ar){var Sn=Er[ar];An.isDynamic(Sn)?tr[ar]=An.unbox(Sn,ar):Hn[ar]=Sn}),{dynamic:tr,static:Hn}}var gu=ts(oa.context||{}),wh=ts(oa.uniforms||{}),_n=ts(oa.attributes||{}),Or=ts(Pa(oa)),Sr={gpuTime:0,cpuTime:0,count:0},lo=jo.compile(Or,_n,wh,gu,Sr),Na=lo.draw,el=lo.batch,Nt=lo.scope,rn=[];function Mn(Er){for(;rn.length<Er;)rn.push(null);return rn}function Tr(Er,Hn){var tr;if($r&&he.raise("context lost"),typeof Er=="function")return Nt.call(this,null,Er,0);if(typeof Hn=="function")if(typeof Er=="number")for(tr=0;tr<Er;++tr)Nt.call(this,null,Hn,tr);else if(Array.isArray(Er))for(tr=0;tr<Er.length;++tr)Nt.call(this,Er[tr],Hn,tr);else return Nt.call(this,Er,Hn,0);else if(typeof Er=="number"){if(Er>0)return el.call(this,Mn(Er|0),Er|0)}else if(Array.isArray(Er)){if(Er.length)return el.call(this,Er,Er.length)}else return Na.call(this,Er)}return L(Tr,{stats:Sr})}var Qs=pi.setFBO=Zl({framebuffer:An.define.call(null,w0,"framebuffer")});function se(oa,Pa){var ts=0;jo.procs.poll();var gu=Pa.color;gu&&(On.clearColor(+gu[0]||0,+gu[1]||0,+gu[2]||0,+gu[3]||0),ts|=fv),"depth"in Pa&&(On.clearDepth(+Pa.depth),ts|=mc),"stencil"in Pa&&(On.clearStencil(Pa.stencil|0),ts|=a_),he(!!ts,"called regl.clear with no buffer specified"),On.clear(ts)}function tu(oa){if(he(typeof oa=="object"&&oa,"regl.clear() takes an object as input"),"framebuffer"in oa)if(oa.framebuffer&&oa.framebuffer_reglType==="framebufferCube")for(var Pa=0;Pa<6;++Pa)Qs(L({framebuffer:oa.framebuffer.faces[Pa]},oa),se);else Qs(oa,se);else se(null,oa)}function fl(oa){he.type(oa,"function","regl.frame() callback must be a function"),qr.push(oa);function Pa(){var ts=Zv(qr,oa);he(ts>=0,"cannot cancel a frame twice");function gu(){var wh=Zv(qr,gu);qr[wh]=qr[qr.length-1],qr.length-=1,qr.length<=0&&ds()}qr[ts]=gu}return Ko(),{cancel:Pa}}function or(){var oa=Ki.viewport,Pa=Ki.scissor_box;oa[0]=oa[1]=Pa[0]=Pa[1]=0,mi.viewportWidth=mi.framebufferWidth=mi.drawingBufferWidth=oa[2]=Pa[2]=On.drawingBufferWidth,mi.viewportHeight=mi.framebufferHeight=mi.drawingBufferHeight=oa[3]=Pa[3]=On.drawingBufferHeight}function Qr(){mi.tick+=1,mi.time=Oa(),or(),jo.procs.poll()}function Js(){or(),jo.procs.refresh(),ki&&ki.update()}function Oa(){return(Xn()-Mi)/1e3}Js();function Hu(oa,Pa){he.type(Pa,"function","listener callback must be a function");var ts;switch(oa){case"frame":return fl(Pa);case"lost":ts=Bo;break;case"restore":ts=Ca;break;case"destroy":ts=so;break;default:he.raise("invalid event, must be one of frame,lost,restore,destroy")}return ts.push(Pa),{cancel:function(){for(var gu=0;gu<ts.length;++gu)if(ts[gu]===Pa){ts[gu]=ts[ts.length-1],ts.pop();return}}}}var Ns=L(Zl,{clear:tu,prop:An.define.bind(null,w0),context:An.define.bind(null,gp),this:An.define.bind(null,s_),draw:Zl({}),buffer:function(oa){return gi.create(oa,kd,!1,!1)},elements:function(oa){return to.create(oa,!1)},texture:no.create2D,cube:no.createCube,renderbuffer:li.create,framebuffer:pi.create,framebufferCube:pi.createCube,vao:oo.createVAO,attributes:Cr,frame:fl,on:Hu,limits:Br,hasExtension:function(oa){return Br.extensions.indexOf(oa.toLowerCase())>=0},read:pa,destroy:es,_gl:On,_refresh:Js,poll:function(){Qr(),ki&&ki.update()},now:Oa,stats:Oi});return qt.onDone(null,Ns),Ns}return $g})},86851:function(gt,G,L){"use strict";var q=L(89594),W=Array.prototype.concat,E=Array.prototype.slice,de=gt.exports=function(ue){for(var ce=[],xe=0,ae=ue.length;xe<ae;xe++){var We=ue[xe];q(We)?ce=W.call(ce,E.call(We)):ce.push(We)}return ce};de.wrap=function(ee){return function(){return ee(de(arguments))}}},89594:function(gt){gt.exports=function(L){return!L||typeof L=="string"?!1:L instanceof Array||Array.isArray(L)||L.length>=0&&(L.splice instanceof Function||Object.getOwnPropertyDescriptor(L,L.length-1)&&L.constructor.name!=="String")}},69848:function(gt){(function(G,L){gt.exports=L()})(this,function(){"use strict";function G(Me,Ae,je,Ze,lt,en){if(!(lt-Ze<=je)){var Le=Ze+lt>>1;L(Me,Ae,Le,Ze,lt,en%2),G(Me,Ae,je,Ze,Le-1,en+1),G(Me,Ae,je,Le+1,lt,en+1)}}function L(Me,Ae,je,Ze,lt,en){for(;lt>Ze;){if(lt-Ze>600){var Le=lt-Ze+1,St=je-Ze+1,Oe=Math.log(Le),nt=.5*Math.exp(2*Oe/3),Ke=.5*Math.sqrt(Oe*nt*(Le-nt)/Le)*(St-Le/2<0?-1:1),Xe=Math.max(Ze,Math.floor(je-St*nt/Le+Ke)),Rt=Math.min(lt,Math.floor(je+(Le-St)*nt/Le+Ke));L(Me,Ae,je,Xe,Rt,en)}var bt=Ae[2*je+en],Ie=Ze,Gt=lt;for(q(Me,Ae,Ze,je),Ae[2*lt+en]>bt&&q(Me,Ae,Ze,lt);Ie<Gt;){for(q(Me,Ae,Ie,Gt),Ie++,Gt--;Ae[2*Ie+en]<bt;)Ie++;for(;Ae[2*Gt+en]>bt;)Gt--}Ae[2*Ze+en]===bt?q(Me,Ae,Ze,Gt):(Gt++,q(Me,Ae,Gt,lt)),Gt<=je&&(Ze=Gt+1),je<=Gt&&(lt=Gt-1)}}function q(Me,Ae,je,Ze){W(Me,je,Ze),W(Ae,2*je,2*Ze),W(Ae,2*je+1,2*Ze+1)}function W(Me,Ae,je){var Ze=Me[Ae];Me[Ae]=Me[je],Me[je]=Ze}function E(Me,Ae,je,Ze,lt,en,Le){for(var St=[0,Me.length-1,0],Oe=[],nt,Ke;St.length;){var Xe=St.pop(),Rt=St.pop(),bt=St.pop();if(Rt-bt<=Le){for(var Ie=bt;Ie<=Rt;Ie++)nt=Ae[2*Ie],Ke=Ae[2*Ie+1],nt>=je&&nt<=lt&&Ke>=Ze&&Ke<=en&&Oe.push(Me[Ie]);continue}var Gt=Math.floor((bt+Rt)/2);nt=Ae[2*Gt],Ke=Ae[2*Gt+1],nt>=je&&nt<=lt&&Ke>=Ze&&Ke<=en&&Oe.push(Me[Gt]);var mn=(Xe+1)%2;(Xe===0?je<=nt:Ze<=Ke)&&(St.push(bt),St.push(Gt-1),St.push(mn)),(Xe===0?lt>=nt:en>=Ke)&&(St.push(Gt+1),St.push(Rt),St.push(mn))}return Oe}function de(Me,Ae,je,Ze,lt,en){for(var Le=[0,Me.length-1,0],St=[],Oe=lt*lt;Le.length;){var nt=Le.pop(),Ke=Le.pop(),Xe=Le.pop();if(Ke-Xe<=en){for(var Rt=Xe;Rt<=Ke;Rt++)ee(Ae[2*Rt],Ae[2*Rt+1],je,Ze)<=Oe&&St.push(Me[Rt]);continue}var bt=Math.floor((Xe+Ke)/2),Ie=Ae[2*bt],Gt=Ae[2*bt+1];ee(Ie,Gt,je,Ze)<=Oe&&St.push(Me[bt]);var mn=(nt+1)%2;(nt===0?je-lt<=Ie:Ze-lt<=Gt)&&(Le.push(Xe),Le.push(bt-1),Le.push(mn)),(nt===0?je+lt>=Ie:Ze+lt>=Gt)&&(Le.push(bt+1),Le.push(Ke),Le.push(mn))}return St}function ee(Me,Ae,je,Ze){var lt=Me-je,en=Ae-Ze;return lt*lt+en*en}var ue=function(Me){return Me[0]},ce=function(Me){return Me[1]},xe=function(Ae,je,Ze,lt,en){je===void 0&&(je=ue),Ze===void 0&&(Ze=ce),lt===void 0&&(lt=64),en===void 0&&(en=Float64Array),this.nodeSize=lt,this.points=Ae;for(var Le=Ae.length<65536?Uint16Array:Uint32Array,St=this.ids=new Le(Ae.length),Oe=this.coords=new en(Ae.length*2),nt=0;nt<Ae.length;nt++)St[nt]=nt,Oe[2*nt]=je(Ae[nt]),Oe[2*nt+1]=Ze(Ae[nt]);G(St,Oe,lt,0,St.length-1,0)};xe.prototype.range=function(Ae,je,Ze,lt){return E(this.ids,this.coords,Ae,je,Ze,lt,this.nodeSize)},xe.prototype.within=function(Ae,je,Ze){return de(this.ids,this.coords,Ae,je,Ze,this.nodeSize)};var ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},We=Math.fround||function(Me){return function(Ae){return Me[0]=+Ae,Me[0]}}(new Float32Array(1)),te=function(Ae){this.options=wt(Object.create(ae),Ae),this.trees=new Array(this.options.maxZoom+1)};te.prototype.load=function(Ae){var je=this.options,Ze=je.log,lt=je.minZoom,en=je.maxZoom,Le=je.nodeSize;Ze&&console.time("total time");var St="prepare "+Ae.length+" points";Ze&&console.time(St),this.points=Ae;for(var Oe=[],nt=0;nt<Ae.length;nt++)Ae[nt].geometry&&Oe.push(Re(Ae[nt],nt));this.trees[en+1]=new xe(Oe,pt,_t,Le,Float32Array),Ze&&console.timeEnd(St);for(var Ke=en;Ke>=lt;Ke--){var Xe=+Date.now();Oe=this._cluster(Oe,Ke),this.trees[Ke]=new xe(Oe,pt,_t,Le,Float32Array),Ze&&console.log("z%d: %d clusters in %dms",Ke,Oe.length,+Date.now()-Xe)}return Ze&&console.timeEnd("total time"),this},te.prototype.getClusters=function(Ae,je){var Ze=((Ae[0]+180)%360+360)%360-180,lt=Math.max(-90,Math.min(90,Ae[1])),en=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)Ze=-180,en=180;else if(Ze>en){var St=this.getClusters([Ze,lt,180,Le],je),Oe=this.getClusters([-180,lt,en,Le],je);return St.concat(Oe)}for(var nt=this.trees[this._limitZoom(je)],Ke=nt.range(K(Ze),we(Le),K(en),we(lt)),Xe=[],Rt=0,bt=Ke;Rt<bt.length;Rt+=1){var Ie=bt[Rt],Gt=nt.points[Ie];Xe.push(Gt.numPoints?$(Gt):this.points[Gt.index])}return Xe},te.prototype.getChildren=function(Ae){var je=this._getOriginId(Ae),Ze=this._getOriginZoom(Ae),lt="No cluster with the specified id.",en=this.trees[Ze];if(!en)throw new Error(lt);var Le=en.points[je];if(!Le)throw new Error(lt);for(var St=this.options.radius/(this.options.extent*Math.pow(2,Ze-1)),Oe=en.within(Le.x,Le.y,St),nt=[],Ke=0,Xe=Oe;Ke<Xe.length;Ke+=1){var Rt=Xe[Ke],bt=en.points[Rt];bt.parentId===Ae&&nt.push(bt.numPoints?$(bt):this.points[bt.index])}if(nt.length===0)throw new Error(lt);return nt},te.prototype.getLeaves=function(Ae,je,Ze){je=je||10,Ze=Ze||0;var lt=[];return this._appendLeaves(lt,Ae,je,Ze,0),lt},te.prototype.getTile=function(Ae,je,Ze){var lt=this.trees[this._limitZoom(Ae)],en=Math.pow(2,Ae),Le=this.options,St=Le.extent,Oe=Le.radius,nt=Oe/St,Ke=(Ze-nt)/en,Xe=(Ze+1+nt)/en,Rt={features:[]};return this._addTileFeatures(lt.range((je-nt)/en,Ke,(je+1+nt)/en,Xe),lt.points,je,Ze,en,Rt),je===0&&this._addTileFeatures(lt.range(1-nt/en,Ke,1,Xe),lt.points,en,Ze,en,Rt),je===en-1&&this._addTileFeatures(lt.range(0,Ke,nt/en,Xe),lt.points,-1,Ze,en,Rt),Rt.features.length?Rt:null},te.prototype.getClusterExpansionZoom=function(Ae){for(var je=this._getOriginZoom(Ae)-1;je<=this.options.maxZoom;){var Ze=this.getChildren(Ae);if(je++,Ze.length!==1)break;Ae=Ze[0].properties.cluster_id}return je},te.prototype._appendLeaves=function(Ae,je,Ze,lt,en){for(var Le=this.getChildren(je),St=0,Oe=Le;St<Oe.length;St+=1){var nt=Oe[St],Ke=nt.properties;if(Ke&&Ke.cluster?en+Ke.point_count<=lt?en+=Ke.point_count:en=this._appendLeaves(Ae,Ke.cluster_id,Ze,lt,en):en<lt?en++:Ae.push(nt),Ae.length===Ze)break}return en},te.prototype._addTileFeatures=function(Ae,je,Ze,lt,en,Le){for(var St=0,Oe=Ae;St<Oe.length;St+=1){var nt=Oe[St],Ke=je[nt],Xe=Ke.numPoints,Rt=void 0,bt=void 0,Ie=void 0;if(Xe)Rt=le(Ke),bt=Ke.x,Ie=Ke.y;else{var Gt=this.points[Ke.index];Rt=Gt.properties,bt=K(Gt.geometry.coordinates[0]),Ie=we(Gt.geometry.coordinates[1])}var mn={type:1,geometry:[[Math.round(this.options.extent*(bt*en-Ze)),Math.round(this.options.extent*(Ie*en-lt))]],tags:Rt},Ln=void 0;Xe?Ln=Ke.id:this.options.generateId?Ln=Ke.index:this.points[Ke.index].id&&(Ln=this.points[Ke.index].id),Ln!==void 0&&(mn.id=Ln),Le.features.push(mn)}},te.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))},te.prototype._cluster=function(Ae,je){for(var Ze=[],lt=this.options,en=lt.radius,Le=lt.extent,St=lt.reduce,Oe=lt.minPoints,nt=en/(Le*Math.pow(2,je)),Ke=0;Ke<Ae.length;Ke++){var Xe=Ae[Ke];if(!(Xe.zoom<=je)){Xe.zoom=je;for(var Rt=this.trees[je+1],bt=Rt.within(Xe.x,Xe.y,nt),Ie=Xe.numPoints||1,Gt=Ie,mn=0,Ln=bt;mn<Ln.length;mn+=1){var qn=Ln[mn],rr=Rt.points[qn];rr.zoom>je&&(Gt+=rr.numPoints||1)}if(Gt>Ie&&Gt>=Oe){for(var Ft=Xe.x*Ie,Jt=Xe.y*Ie,un=St&&Ie>1?this._map(Xe,!0):null,Vn=(Ke<<5)+(je+1)+this.points.length,on=0,Dt=bt;on<Dt.length;on+=1){var Vt=Dt[on],ze=Rt.points[Vt];if(!(ze.zoom<=je)){ze.zoom=je;var rt=ze.numPoints||1;Ft+=ze.x*rt,Jt+=ze.y*rt,ze.parentId=Vn,St&&(un||(un=this._map(Xe,!0)),St(un,this._map(ze)))}}Xe.parentId=Vn,Ze.push(me(Ft/Gt,Jt/Gt,Vn,Gt,un))}else if(Ze.push(Xe),Gt>1)for(var jt=0,U=bt;jt<U.length;jt+=1){var pe=U[jt],ct=Rt.points[pe];ct.zoom<=je||(ct.zoom=je,Ze.push(ct))}}}return Ze},te.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},te.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},te.prototype._map=function(Ae,je){if(Ae.numPoints)return je?wt({},Ae.properties):Ae.properties;var Ze=this.points[Ae.index].properties,lt=this.options.map(Ze);return je&&lt===Ze?wt({},lt):lt};function me(Me,Ae,je,Ze,lt){return{x:We(Me),y:We(Ae),zoom:1/0,id:je,parentId:-1,numPoints:Ze,properties:lt}}function Re(Me,Ae){var je=Me.geometry.coordinates,Ze=je[0],lt=je[1];return{x:We(K(Ze)),y:We(we(lt)),zoom:1/0,index:Ae,parentId:-1}}function $(Me){return{type:"Feature",id:Me.id,properties:le(Me),geometry:{type:"Point",coordinates:[et(Me.x),Je(Me.y)]}}}function le(Me){var Ae=Me.numPoints,je=Ae>=1e4?Math.round(Ae/1e3)+"k":Ae>=1e3?Math.round(Ae/100)/10+"k":Ae;return wt(wt({},Me.properties),{cluster:!0,cluster_id:Me.id,point_count:Ae,point_count_abbreviated:je})}function K(Me){return Me/360+.5}function we(Me){var Ae=Math.sin(Me*Math.PI/180),je=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return je<0?0:je>1?1:je}function et(Me){return(Me-.5)*360}function Je(Me){var Ae=(180-Me*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function wt(Me,Ae){for(var je in Ae)Me[je]=Ae[je];return Me}function pt(Me){return Me.x}function _t(Me){return Me.y}return te})},73897:function(gt){function G(L,q){(q==null||q>L.length)&&(q=L.length);for(var W=0,E=Array(q);W<q;W++)E[W]=L[W];return E}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},85372:function(gt){function G(L){if(Array.isArray(L))return L}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},63405:function(gt,G,L){var q=L(73897);function W(E){if(Array.isArray(E))return q(E)}gt.exports=W,gt.exports.__esModule=!0,gt.exports.default=gt.exports},66115:function(gt){function G(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},76976:function(gt,G,L){var q=L(73808),W=L(69617),E=L(94993);function de(ee,ue,ce){return ue=q(ue),E(ee,W()?Reflect.construct(ue,ce||[],q(ee).constructor):ue.apply(ee,ce))}gt.exports=de,gt.exports.__esModule=!0,gt.exports.default=gt.exports},56690:function(gt){function G(L,q){if(!(L instanceof q))throw new TypeError("Cannot call a class as a function")}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},89728:function(gt,G,L){var q=L(64062);function W(de,ee){for(var ue=0;ue<ee.length;ue++){var ce=ee[ue];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(de,q(ce.key),ce)}}function E(de,ee,ue){return ee&&W(de.prototype,ee),ue&&W(de,ue),Object.defineProperty(de,"prototype",{writable:!1}),de}gt.exports=E,gt.exports.__esModule=!0,gt.exports.default=gt.exports},73808:function(gt){function G(L){return gt.exports=G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},gt.exports.__esModule=!0,gt.exports.default=gt.exports,G(L)}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},61655:function(gt,G,L){var q=L(6015);function W(E,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(de&&de.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),de&&q(E,de)}gt.exports=W,gt.exports.__esModule=!0,gt.exports.default=gt.exports},75263:function(gt,G,L){var q=L(18698).default;function W(de){if(typeof WeakMap!="function")return null;var ee=new WeakMap,ue=new WeakMap;return(W=function(xe){return xe?ue:ee})(de)}function E(de,ee){if(!ee&&de&&de.__esModule)return de;if(de===null||q(de)!="object"&&typeof de!="function")return{default:de};var ue=W(ee);if(ue&&ue.has(de))return ue.get(de);var ce={__proto__:null},xe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in de)if(ae!=="default"&&{}.hasOwnProperty.call(de,ae)){var We=xe?Object.getOwnPropertyDescriptor(de,ae):null;We&&(We.get||We.set)?Object.defineProperty(ce,ae,We):ce[ae]=de[ae]}return ce.default=de,ue&&ue.set(de,ce),ce}gt.exports=E,gt.exports.__esModule=!0,gt.exports.default=gt.exports},69617:function(gt){function G(){try{var L=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(q){}return(gt.exports=G=function(){return!!L},gt.exports.__esModule=!0,gt.exports.default=gt.exports)()}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},79498:function(gt){function G(L){if(typeof Symbol!="undefined"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},68872:function(gt){function G(L,q){var W=L==null?null:typeof Symbol!="undefined"&&L[Symbol.iterator]||L["@@iterator"];if(W!=null){var E,de,ee,ue,ce=[],xe=!0,ae=!1;try{if(ee=(W=W.call(L)).next,q===0){if(Object(W)!==W)return;xe=!1}else for(;!(xe=(E=ee.call(W)).done)&&(ce.push(E.value),ce.length!==q);xe=!0);}catch(We){ae=!0,de=We}finally{try{if(!xe&&W.return!=null&&(ue=W.return(),Object(ue)!==ue))return}finally{if(ae)throw de}}return ce}}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},12218:function(gt){function G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},42281:function(gt){function G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},94993:function(gt,G,L){var q=L(18698).default,W=L(66115);function E(de,ee){if(ee&&(q(ee)=="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(de)}gt.exports=E,gt.exports.__esModule=!0,gt.exports.default=gt.exports},6015:function(gt){function G(L,q){return gt.exports=G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,E){return W.__proto__=E,W},gt.exports.__esModule=!0,gt.exports.default=gt.exports,G(L,q)}gt.exports=G,gt.exports.__esModule=!0,gt.exports.default=gt.exports},27424:function(gt,G,L){var q=L(85372),W=L(68872),E=L(86116),de=L(12218);function ee(ue,ce){return q(ue)||W(ue,ce)||E(ue,ce)||de()}gt.exports=ee,gt.exports.__esModule=!0,gt.exports.default=gt.exports},51589:function(gt,G,L){var q=L(85372),W=L(79498),E=L(86116),de=L(12218);function ee(ue){return q(ue)||W(ue)||E(ue)||de()}gt.exports=ee,gt.exports.__esModule=!0,gt.exports.default=gt.exports},861:function(gt,G,L){var q=L(63405),W=L(79498),E=L(86116),de=L(42281);function ee(ue){return q(ue)||W(ue)||E(ue)||de()}gt.exports=ee,gt.exports.__esModule=!0,gt.exports.default=gt.exports},86116:function(gt,G,L){var q=L(73897);function W(E,de){if(E){if(typeof E=="string")return q(E,de);var ee={}.toString.call(E).slice(8,-1);return ee==="Object"&&E.constructor&&(ee=E.constructor.name),ee==="Map"||ee==="Set"?Array.from(E):ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee)?q(E,de):void 0}}gt.exports=W,gt.exports.__esModule=!0,gt.exports.default=gt.exports},1449:function(gt,G,L){"use strict";L.d(G,{Tu:function(){return te},tw:function(){return K},uf:function(){return Re},yu:function(){return ae},zL:function(){return ee}});var q=63710088e-1,W={centimeters:q*100,centimetres:q*100,degrees:q/111325,feet:q*3.28084,inches:q*39.37,kilometers:q/1e3,kilometres:q/1e3,meters:q,metres:q,miles:q/1609.344,millimeters:q*1e3,millimetres:q*1e3,nauticalmiles:q/1852,radians:1,yards:q*1.0936},E={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/q,yards:1.0936133},de={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ee(Oe,nt,Ke){Ke===void 0&&(Ke={});var Xe={type:"Feature"};return(Ke.id===0||Ke.id)&&(Xe.id=Ke.id),Ke.bbox&&(Xe.bbox=Ke.bbox),Xe.properties=nt||{},Xe.geometry=Oe,Xe}function ue(Oe,nt,Ke){switch(Ke===void 0&&(Ke={}),Oe){case"Point":return ce(nt).geometry;case"LineString":return te(nt).geometry;case"Polygon":return ae(nt).geometry;case"MultiPoint":return le(nt).geometry;case"MultiLineString":return $(nt).geometry;case"MultiPolygon":return K(nt).geometry;default:throw new Error(Oe+" is invalid")}}function ce(Oe,nt,Ke){if(Ke===void 0&&(Ke={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lt(Oe[0])||!lt(Oe[1]))throw new Error("coordinates must contain numbers");var Xe={type:"Point",coordinates:Oe};return ee(Xe,nt,Ke)}function xe(Oe,nt,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return ce(Xe,nt)}),Ke)}function ae(Oe,nt,Ke){Ke===void 0&&(Ke={});for(var Xe=0,Rt=Oe;Xe<Rt.length;Xe++){var bt=Rt[Xe];if(bt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ie=0;Ie<bt[bt.length-1].length;Ie++)if(bt[bt.length-1][Ie]!==bt[0][Ie])throw new Error("First and last Position are not equivalent.")}var Gt={type:"Polygon",coordinates:Oe};return ee(Gt,nt,Ke)}function We(Oe,nt,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return ae(Xe,nt)}),Ke)}function te(Oe,nt,Ke){if(Ke===void 0&&(Ke={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var Xe={type:"LineString",coordinates:Oe};return ee(Xe,nt,Ke)}function me(Oe,nt,Ke){return Ke===void 0&&(Ke={}),Re(Oe.map(function(Xe){return te(Xe,nt)}),Ke)}function Re(Oe,nt){nt===void 0&&(nt={});var Ke={type:"FeatureCollection"};return nt.id&&(Ke.id=nt.id),nt.bbox&&(Ke.bbox=nt.bbox),Ke.features=Oe,Ke}function $(Oe,nt,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiLineString",coordinates:Oe};return ee(Xe,nt,Ke)}function le(Oe,nt,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiPoint",coordinates:Oe};return ee(Xe,nt,Ke)}function K(Oe,nt,Ke){Ke===void 0&&(Ke={});var Xe={type:"MultiPolygon",coordinates:Oe};return ee(Xe,nt,Ke)}function we(Oe,nt,Ke){Ke===void 0&&(Ke={});var Xe={type:"GeometryCollection",geometries:Oe};return ee(Xe,nt,Ke)}function et(Oe,nt){if(nt===void 0&&(nt=0),nt&&!(nt>=0))throw new Error("precision must be a positive number");var Ke=Math.pow(10,nt||0);return Math.round(Oe*Ke)/Ke}function Je(Oe,nt){nt===void 0&&(nt="kilometers");var Ke=W[nt];if(!Ke)throw new Error(nt+" units is invalid");return Oe*Ke}function wt(Oe,nt){nt===void 0&&(nt="kilometers");var Ke=W[nt];if(!Ke)throw new Error(nt+" units is invalid");return Oe/Ke}function pt(Oe,nt){return Me(wt(Oe,nt))}function _t(Oe){var nt=Oe%360;return nt<0&&(nt+=360),nt}function Me(Oe){var nt=Oe%(2*Math.PI);return nt*180/Math.PI}function Ae(Oe){var nt=Oe%360;return nt*Math.PI/180}function je(Oe,nt,Ke){if(nt===void 0&&(nt="kilometers"),Ke===void 0&&(Ke="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return Je(wt(Oe,nt),Ke)}function Ze(Oe,nt,Ke){if(nt===void 0&&(nt="meters"),Ke===void 0&&(Ke="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var Xe=de[nt];if(!Xe)throw new Error("invalid original units");var Rt=de[Ke];if(!Rt)throw new Error("invalid final units");return Oe/Xe*Rt}function lt(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}function en(Oe){return!!Oe&&Oe.constructor===Object}function Le(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(nt){if(!lt(nt))throw new Error("bbox must only contain numbers")})}function St(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}},39034:function(gt,G,L){"use strict";L.d(G,{nG:function(){return te},pZ:function(){return W}});var q=L(1449);function W(Je,wt,pt){if(Je!==null)for(var _t,Me,Ae,je,Ze,lt,en,Le=0,St=0,Oe,nt=Je.type,Ke=nt==="FeatureCollection",Xe=nt==="Feature",Rt=Ke?Je.features.length:1,bt=0;bt<Rt;bt++){en=Ke?Je.features[bt].geometry:Xe?Je.geometry:Je,Oe=en?en.type==="GeometryCollection":!1,Ze=Oe?en.geometries.length:1;for(var Ie=0;Ie<Ze;Ie++){var Gt=0,mn=0;if(je=Oe?en.geometries[Ie]:en,je!==null){lt=je.coordinates;var Ln=je.type;switch(Le=pt&&(Ln==="Polygon"||Ln==="MultiPolygon")?1:0,Ln){case null:break;case"Point":if(wt(lt,St,bt,Gt,mn)===!1)return!1;St++,Gt++;break;case"LineString":case"MultiPoint":for(_t=0;_t<lt.length;_t++){if(wt(lt[_t],St,bt,Gt,mn)===!1)return!1;St++,Ln==="MultiPoint"&&Gt++}Ln==="LineString"&&Gt++;break;case"Polygon":case"MultiLineString":for(_t=0;_t<lt.length;_t++){for(Me=0;Me<lt[_t].length-Le;Me++){if(wt(lt[_t][Me],St,bt,Gt,mn)===!1)return!1;St++}Ln==="MultiLineString"&&Gt++,Ln==="Polygon"&&mn++}Ln==="Polygon"&&Gt++;break;case"MultiPolygon":for(_t=0;_t<lt.length;_t++){for(mn=0,Me=0;Me<lt[_t].length;Me++){for(Ae=0;Ae<lt[_t][Me].length-Le;Ae++){if(wt(lt[_t][Me][Ae],St,bt,Gt,mn)===!1)return!1;St++}mn++}Gt++}break;case"GeometryCollection":for(_t=0;_t<je.geometries.length;_t++)if(W(je.geometries[_t],wt,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(Je,wt,pt,_t){var Me=pt;return W(Je,function(Ae,je,Ze,lt,en){je===0&&pt===void 0?Me=Ae:Me=wt(Me,Ae,je,Ze,lt,en)},_t),Me}function de(Je,wt){var pt;switch(Je.type){case"FeatureCollection":for(pt=0;pt<Je.features.length&&wt(Je.features[pt].properties,pt)!==!1;pt++);break;case"Feature":wt(Je.properties,0);break}}function ee(Je,wt,pt){var _t=pt;return de(Je,function(Me,Ae){Ae===0&&pt===void 0?_t=Me:_t=wt(_t,Me,Ae)}),_t}function ue(Je,wt){if(Je.type==="Feature")wt(Je,0);else if(Je.type==="FeatureCollection")for(var pt=0;pt<Je.features.length&&wt(Je.features[pt],pt)!==!1;pt++);}function ce(Je,wt,pt){var _t=pt;return ue(Je,function(Me,Ae){Ae===0&&pt===void 0?_t=Me:_t=wt(_t,Me,Ae)}),_t}function xe(Je){var wt=[];return W(Je,function(pt){wt.push(pt)}),wt}function ae(Je,wt){var pt,_t,Me,Ae,je,Ze,lt,en,Le,St,Oe=0,nt=Je.type==="FeatureCollection",Ke=Je.type==="Feature",Xe=nt?Je.features.length:1;for(pt=0;pt<Xe;pt++){for(Ze=nt?Je.features[pt].geometry:Ke?Je.geometry:Je,en=nt?Je.features[pt].properties:Ke?Je.properties:{},Le=nt?Je.features[pt].bbox:Ke?Je.bbox:void 0,St=nt?Je.features[pt].id:Ke?Je.id:void 0,lt=Ze?Ze.type==="GeometryCollection":!1,je=lt?Ze.geometries.length:1,Me=0;Me<je;Me++){if(Ae=lt?Ze.geometries[Me]:Ze,Ae===null){if(wt(null,Oe,en,Le,St)===!1)return!1;continue}switch(Ae.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(wt(Ae,Oe,en,Le,St)===!1)return!1;break}case"GeometryCollection":{for(_t=0;_t<Ae.geometries.length;_t++)if(wt(Ae.geometries[_t],Oe,en,Le,St)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Oe++}}function We(Je,wt,pt){var _t=pt;return ae(Je,function(Me,Ae,je,Ze,lt){Ae===0&&pt===void 0?_t=Me:_t=wt(_t,Me,Ae,je,Ze,lt)}),_t}function te(Je,wt){ae(Je,function(pt,_t,Me,Ae,je){var Ze=pt===null?null:pt.type;switch(Ze){case null:case"Point":case"LineString":case"Polygon":return wt((0,q.zL)(pt,Me,{bbox:Ae,id:je}),_t,0)===!1?!1:void 0}var lt;switch(Ze){case"MultiPoint":lt="Point";break;case"MultiLineString":lt="LineString";break;case"MultiPolygon":lt="Polygon";break}for(var en=0;en<pt.coordinates.length;en++){var Le=pt.coordinates[en],St={type:lt,coordinates:Le};if(wt((0,q.zL)(St,Me),_t,en)===!1)return!1}})}function me(Je,wt,pt){var _t=pt;return te(Je,function(Me,Ae,je){Ae===0&&je===0&&pt===void 0?_t=Me:_t=wt(_t,Me,Ae,je)}),_t}function Re(Je,wt){te(Je,function(pt,_t,Me){var Ae=0;if(pt.geometry){var je=pt.geometry.type;if(!(je==="Point"||je==="MultiPoint")){var Ze,lt=0,en=0,Le=0;if(W(pt,function(St,Oe,nt,Ke,Xe){if(Ze===void 0||_t>lt||Ke>en||Xe>Le){Ze=St,lt=_t,en=Ke,Le=Xe,Ae=0;return}var Rt=lineString([Ze,St],pt.properties);if(wt(Rt,_t,Me,Xe,Ae)===!1)return!1;Ae++,Ze=St})===!1)return!1}}})}function $(Je,wt,pt){var _t=pt,Me=!1;return Re(Je,function(Ae,je,Ze,lt,en){Me===!1&&pt===void 0?_t=Ae:_t=wt(_t,Ae,je,Ze,lt,en),Me=!0}),_t}function le(Je,wt){if(!Je)throw new Error("geojson is required");te(Je,function(pt,_t,Me){if(pt.geometry!==null){var Ae=pt.geometry.type,je=pt.geometry.coordinates;switch(Ae){case"LineString":if(wt(pt,_t,Me,0,0)===!1)return!1;break;case"Polygon":for(var Ze=0;Ze<je.length;Ze++)if(wt(lineString(je[Ze],pt.properties),_t,Me,Ze)===!1)return!1;break}}})}function K(Je,wt,pt){var _t=pt;return le(Je,function(Me,Ae,je,Ze){Ae===0&&pt===void 0?_t=Me:_t=wt(_t,Me,Ae,je,Ze)}),_t}function we(Je,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var pt=wt.featureIndex||0,_t=wt.multiFeatureIndex||0,Me=wt.geometryIndex||0,Ae=wt.segmentIndex||0,je=wt.properties,Ze;switch(Je.type){case"FeatureCollection":pt<0&&(pt=Je.features.length+pt),je=je||Je.features[pt].properties,Ze=Je.features[pt].geometry;break;case"Feature":je=je||Je.properties,Ze=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=Je;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var lt=Ze.coordinates;switch(Ze.type){case"Point":case"MultiPoint":return null;case"LineString":return Ae<0&&(Ae=lt.length+Ae-1),lineString([lt[Ae],lt[Ae+1]],je,wt);case"Polygon":return Me<0&&(Me=lt.length+Me),Ae<0&&(Ae=lt[Me].length+Ae-1),lineString([lt[Me][Ae],lt[Me][Ae+1]],je,wt);case"MultiLineString":return _t<0&&(_t=lt.length+_t),Ae<0&&(Ae=lt[_t].length+Ae-1),lineString([lt[_t][Ae],lt[_t][Ae+1]],je,wt);case"MultiPolygon":return _t<0&&(_t=lt.length+_t),Me<0&&(Me=lt[_t].length+Me),Ae<0&&(Ae=lt[_t][Me].length-Ae-1),lineString([lt[_t][Me][Ae],lt[_t][Me][Ae+1]],je,wt)}throw new Error("geojson is invalid")}function et(Je,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var pt=wt.featureIndex||0,_t=wt.multiFeatureIndex||0,Me=wt.geometryIndex||0,Ae=wt.coordIndex||0,je=wt.properties,Ze;switch(Je.type){case"FeatureCollection":pt<0&&(pt=Je.features.length+pt),je=je||Je.features[pt].properties,Ze=Je.features[pt].geometry;break;case"Feature":je=je||Je.properties,Ze=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ze=Je;break;default:throw new Error("geojson is invalid")}if(Ze===null)return null;var lt=Ze.coordinates;switch(Ze.type){case"Point":return point(lt,je,wt);case"MultiPoint":return _t<0&&(_t=lt.length+_t),point(lt[_t],je,wt);case"LineString":return Ae<0&&(Ae=lt.length+Ae),point(lt[Ae],je,wt);case"Polygon":return Me<0&&(Me=lt.length+Me),Ae<0&&(Ae=lt[Me].length+Ae),point(lt[Me][Ae],je,wt);case"MultiLineString":return _t<0&&(_t=lt.length+_t),Ae<0&&(Ae=lt[_t].length+Ae),point(lt[_t][Ae],je,wt);case"MultiPolygon":return _t<0&&(_t=lt.length+_t),Me<0&&(Me=lt[_t].length+Me),Ae<0&&(Ae=lt[_t][Me].length-Ae),point(lt[_t][Me][Ae],je,wt)}throw new Error("geojson is invalid")}},97582:function(gt,G,L){"use strict";L.d(G,{CR:function(){return we},Jh:function(){return Re},Q_:function(){return Le},XA:function(){return K},ZT:function(){return W},_T:function(){return de},ev:function(){return wt},mG:function(){return me},pi:function(){return E}});var q=function(bt,Ie){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Gt,mn){Gt.__proto__=mn}||function(Gt,mn){for(var Ln in mn)Object.prototype.hasOwnProperty.call(mn,Ln)&&(Gt[Ln]=mn[Ln])},q(bt,Ie)};function W(bt,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Class extends value "+String(Ie)+" is not a constructor or null");q(bt,Ie);function Gt(){this.constructor=bt}bt.prototype=Ie===null?Object.create(Ie):(Gt.prototype=Ie.prototype,new Gt)}var E=function(){return E=Object.assign||function(Ie){for(var Gt,mn=1,Ln=arguments.length;mn<Ln;mn++){Gt=arguments[mn];for(var qn in Gt)Object.prototype.hasOwnProperty.call(Gt,qn)&&(Ie[qn]=Gt[qn])}return Ie},E.apply(this,arguments)};function de(bt,Ie){var Gt={};for(var mn in bt)Object.prototype.hasOwnProperty.call(bt,mn)&&Ie.indexOf(mn)<0&&(Gt[mn]=bt[mn]);if(bt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ln=0,mn=Object.getOwnPropertySymbols(bt);Ln<mn.length;Ln++)Ie.indexOf(mn[Ln])<0&&Object.prototype.propertyIsEnumerable.call(bt,mn[Ln])&&(Gt[mn[Ln]]=bt[mn[Ln]]);return Gt}function ee(bt,Ie,Gt,mn){var Ln=arguments.length,qn=Ln<3?Ie:mn===null?mn=Object.getOwnPropertyDescriptor(Ie,Gt):mn,rr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")qn=Reflect.decorate(bt,Ie,Gt,mn);else for(var Ft=bt.length-1;Ft>=0;Ft--)(rr=bt[Ft])&&(qn=(Ln<3?rr(qn):Ln>3?rr(Ie,Gt,qn):rr(Ie,Gt))||qn);return Ln>3&&qn&&Object.defineProperty(Ie,Gt,qn),qn}function ue(bt,Ie){return function(Gt,mn){Ie(Gt,mn,bt)}}function ce(bt,Ie,Gt,mn,Ln,qn){function rr(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var Ft=mn.kind,Jt=Ft==="getter"?"get":Ft==="setter"?"set":"value",un=!Ie&&bt?mn.static?bt:bt.prototype:null,Vn=Ie||(un?Object.getOwnPropertyDescriptor(un,mn.name):{}),on,Dt=!1,Vt=Gt.length-1;Vt>=0;Vt--){var ze={};for(var rt in mn)ze[rt]=rt==="access"?{}:mn[rt];for(var rt in mn.access)ze.access[rt]=mn.access[rt];ze.addInitializer=function(U){if(Dt)throw new TypeError("Cannot add initializers after decoration has completed");qn.push(rr(U||null))};var jt=(0,Gt[Vt])(Ft==="accessor"?{get:Vn.get,set:Vn.set}:Vn[Jt],ze);if(Ft==="accessor"){if(jt===void 0)continue;if(jt===null||typeof jt!="object")throw new TypeError("Object expected");(on=rr(jt.get))&&(Vn.get=on),(on=rr(jt.set))&&(Vn.set=on),(on=rr(jt.init))&&Ln.unshift(on)}else(on=rr(jt))&&(Ft==="field"?Ln.unshift(on):Vn[Jt]=on)}un&&Object.defineProperty(un,mn.name,Vn),Dt=!0}function xe(bt,Ie,Gt){for(var mn=arguments.length>2,Ln=0;Ln<Ie.length;Ln++)Gt=mn?Ie[Ln].call(bt,Gt):Ie[Ln].call(bt);return mn?Gt:void 0}function ae(bt){return typeof bt=="symbol"?bt:"".concat(bt)}function We(bt,Ie,Gt){return typeof Ie=="symbol"&&(Ie=Ie.description?"[".concat(Ie.description,"]"):""),Object.defineProperty(bt,"name",{configurable:!0,value:Gt?"".concat(Gt," ",Ie):Ie})}function te(bt,Ie){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(bt,Ie)}function me(bt,Ie,Gt,mn){function Ln(qn){return qn instanceof Gt?qn:new Gt(function(rr){rr(qn)})}return new(Gt||(Gt=Promise))(function(qn,rr){function Ft(Vn){try{un(mn.next(Vn))}catch(on){rr(on)}}function Jt(Vn){try{un(mn.throw(Vn))}catch(on){rr(on)}}function un(Vn){Vn.done?qn(Vn.value):Ln(Vn.value).then(Ft,Jt)}un((mn=mn.apply(bt,Ie||[])).next())})}function Re(bt,Ie){var Gt={label:0,sent:function(){if(qn[0]&1)throw qn[1];return qn[1]},trys:[],ops:[]},mn,Ln,qn,rr;return rr={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(rr[Symbol.iterator]=function(){return this}),rr;function Ft(un){return function(Vn){return Jt([un,Vn])}}function Jt(un){if(mn)throw new TypeError("Generator is already executing.");for(;rr&&(rr=0,un[0]&&(Gt=0)),Gt;)try{if(mn=1,Ln&&(qn=un[0]&2?Ln.return:un[0]?Ln.throw||((qn=Ln.return)&&qn.call(Ln),0):Ln.next)&&!(qn=qn.call(Ln,un[1])).done)return qn;switch(Ln=0,qn&&(un=[un[0]&2,qn.value]),un[0]){case 0:case 1:qn=un;break;case 4:return Gt.label++,{value:un[1],done:!1};case 5:Gt.label++,Ln=un[1],un=[0];continue;case 7:un=Gt.ops.pop(),Gt.trys.pop();continue;default:if(qn=Gt.trys,!(qn=qn.length>0&&qn[qn.length-1])&&(un[0]===6||un[0]===2)){Gt=0;continue}if(un[0]===3&&(!qn||un[1]>qn[0]&&un[1]<qn[3])){Gt.label=un[1];break}if(un[0]===6&&Gt.label<qn[1]){Gt.label=qn[1],qn=un;break}if(qn&&Gt.label<qn[2]){Gt.label=qn[2],Gt.ops.push(un);break}qn[2]&&Gt.ops.pop(),Gt.trys.pop();continue}un=Ie.call(bt,Gt)}catch(Vn){un=[6,Vn],Ln=0}finally{mn=qn=0}if(un[0]&5)throw un[1];return{value:un[0]?un[1]:void 0,done:!0}}}var $=Object.create?function(bt,Ie,Gt,mn){mn===void 0&&(mn=Gt);var Ln=Object.getOwnPropertyDescriptor(Ie,Gt);(!Ln||("get"in Ln?!Ie.__esModule:Ln.writable||Ln.configurable))&&(Ln={enumerable:!0,get:function(){return Ie[Gt]}}),Object.defineProperty(bt,mn,Ln)}:function(bt,Ie,Gt,mn){mn===void 0&&(mn=Gt),bt[mn]=Ie[Gt]};function le(bt,Ie){for(var Gt in bt)Gt!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,Gt)&&$(Ie,bt,Gt)}function K(bt){var Ie=typeof Symbol=="function"&&Symbol.iterator,Gt=Ie&&bt[Ie],mn=0;if(Gt)return Gt.call(bt);if(bt&&typeof bt.length=="number")return{next:function(){return bt&&mn>=bt.length&&(bt=void 0),{value:bt&&bt[mn++],done:!bt}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(bt,Ie){var Gt=typeof Symbol=="function"&&bt[Symbol.iterator];if(!Gt)return bt;var mn=Gt.call(bt),Ln,qn=[],rr;try{for(;(Ie===void 0||Ie-- >0)&&!(Ln=mn.next()).done;)qn.push(Ln.value)}catch(Ft){rr={error:Ft}}finally{try{Ln&&!Ln.done&&(Gt=mn.return)&&Gt.call(mn)}finally{if(rr)throw rr.error}}return qn}function et(){for(var bt=[],Ie=0;Ie<arguments.length;Ie++)bt=bt.concat(we(arguments[Ie]));return bt}function Je(){for(var bt=0,Ie=0,Gt=arguments.length;Ie<Gt;Ie++)bt+=arguments[Ie].length;for(var mn=Array(bt),Ln=0,Ie=0;Ie<Gt;Ie++)for(var qn=arguments[Ie],rr=0,Ft=qn.length;rr<Ft;rr++,Ln++)mn[Ln]=qn[rr];return mn}function wt(bt,Ie,Gt){if(Gt||arguments.length===2)for(var mn=0,Ln=Ie.length,qn;mn<Ln;mn++)(qn||!(mn in Ie))&&(qn||(qn=Array.prototype.slice.call(Ie,0,mn)),qn[mn]=Ie[mn]);return bt.concat(qn||Array.prototype.slice.call(Ie))}function pt(bt){return this instanceof pt?(this.v=bt,this):new pt(bt)}function _t(bt,Ie,Gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mn=Gt.apply(bt,Ie||[]),Ln,qn=[];return Ln={},rr("next"),rr("throw"),rr("return"),Ln[Symbol.asyncIterator]=function(){return this},Ln;function rr(Dt){mn[Dt]&&(Ln[Dt]=function(Vt){return new Promise(function(ze,rt){qn.push([Dt,Vt,ze,rt])>1||Ft(Dt,Vt)})})}function Ft(Dt,Vt){try{Jt(mn[Dt](Vt))}catch(ze){on(qn[0][3],ze)}}function Jt(Dt){Dt.value instanceof pt?Promise.resolve(Dt.value.v).then(un,Vn):on(qn[0][2],Dt)}function un(Dt){Ft("next",Dt)}function Vn(Dt){Ft("throw",Dt)}function on(Dt,Vt){Dt(Vt),qn.shift(),qn.length&&Ft(qn[0][0],qn[0][1])}}function Me(bt){var Ie,Gt;return Ie={},mn("next"),mn("throw",function(Ln){throw Ln}),mn("return"),Ie[Symbol.iterator]=function(){return this},Ie;function mn(Ln,qn){Ie[Ln]=bt[Ln]?function(rr){return(Gt=!Gt)?{value:pt(bt[Ln](rr)),done:!1}:qn?qn(rr):rr}:qn}}function Ae(bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie=bt[Symbol.asyncIterator],Gt;return Ie?Ie.call(bt):(bt=typeof K=="function"?K(bt):bt[Symbol.iterator](),Gt={},mn("next"),mn("throw"),mn("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt);function mn(qn){Gt[qn]=bt[qn]&&function(rr){return new Promise(function(Ft,Jt){rr=bt[qn](rr),Ln(Ft,Jt,rr.done,rr.value)})}}function Ln(qn,rr,Ft,Jt){Promise.resolve(Jt).then(function(un){qn({value:un,done:Ft})},rr)}}function je(bt,Ie){return Object.defineProperty?Object.defineProperty(bt,"raw",{value:Ie}):bt.raw=Ie,bt}var Ze=Object.create?function(bt,Ie){Object.defineProperty(bt,"default",{enumerable:!0,value:Ie})}:function(bt,Ie){bt.default=Ie};function lt(bt){if(bt&&bt.__esModule)return bt;var Ie={};if(bt!=null)for(var Gt in bt)Gt!=="default"&&Object.prototype.hasOwnProperty.call(bt,Gt)&&$(Ie,bt,Gt);return Ze(Ie,bt),Ie}function en(bt){return bt&&bt.__esModule?bt:{default:bt}}function Le(bt,Ie,Gt,mn){if(Gt==="a"&&!mn)throw new TypeError("Private accessor was defined without a getter");if(typeof Ie=="function"?bt!==Ie||!mn:!Ie.has(bt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Gt==="m"?mn:Gt==="a"?mn.call(bt):mn?mn.value:Ie.get(bt)}function St(bt,Ie,Gt,mn,Ln){if(mn==="m")throw new TypeError("Private method is not writable");if(mn==="a"&&!Ln)throw new TypeError("Private accessor was defined without a setter");if(typeof Ie=="function"?bt!==Ie||!Ln:!Ie.has(bt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return mn==="a"?Ln.call(bt,Gt):Ln?Ln.value=Gt:Ie.set(bt,Gt),Gt}function Oe(bt,Ie){if(Ie===null||typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof bt=="function"?Ie===bt:bt.has(Ie)}function nt(bt,Ie,Gt){if(Ie!=null){if(typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Object expected.");var mn;if(Gt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");mn=Ie[Symbol.asyncDispose]}if(mn===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");mn=Ie[Symbol.dispose]}if(typeof mn!="function")throw new TypeError("Object not disposable.");bt.stack.push({value:Ie,dispose:mn,async:Gt})}else Gt&&bt.stack.push({async:!0});return Ie}var Ke=typeof SuppressedError=="function"?SuppressedError:function(bt,Ie,Gt){var mn=new Error(Gt);return mn.name="SuppressedError",mn.error=bt,mn.suppressed=Ie,mn};function Xe(bt){function Ie(mn){bt.error=bt.hasError?new Ke(mn,bt.error,"An error was suppressed during disposal."):mn,bt.hasError=!0}function Gt(){for(;bt.stack.length;){var mn=bt.stack.pop();try{var Ln=mn.dispose&&mn.dispose.call(mn.value);if(mn.async)return Promise.resolve(Ln).then(Gt,function(qn){return Ie(qn),Gt()})}catch(qn){Ie(qn)}}if(bt.hasError)throw bt.error}return Gt()}var Rt={__extends:W,__assign:E,__rest:de,__decorate:ee,__param:ue,__metadata:te,__awaiter:me,__generator:Re,__createBinding:$,__exportStar:le,__values:K,__read:we,__spread:et,__spreadArrays:Je,__spreadArray:wt,__await:pt,__asyncGenerator:_t,__asyncDelegator:Me,__asyncValues:Ae,__makeTemplateObject:je,__importStar:lt,__importDefault:en,__classPrivateFieldGet:Le,__classPrivateFieldSet:St,__classPrivateFieldIn:Oe,__addDisposableResource:nt,__disposeResources:Xe}}}]);
}());