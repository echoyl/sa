<script type="text/html" tpl lay-done="layui.saPageQuery(d);"></script>
<script>
layui.saPageQuery = function(d){
	layui.use(['$type$','sa_table'], function(){
		var firstIndex = layui.layer.index;
		d.param = d.param?d.param:{};
		let page_config = {
			table:{url:'$url$',height:405,page:{limit:8},lineStyle:"height:27px;line-height:26px;"},
			open:true,
			event:{
				chose:function(data){
					layui.sa.close([data.data],firstIndex);
				}
			}
		};
		var sl = layui.$type$;
		page_config.search = {
			options:[
				//筛选项
				{name:'keyword',encode:true,type:'input'}
			]
		};
		
		page_config.cols = [ //表头
			{field: 'id', title: 'ID', width:80, sort: true}
			,{field: 'title', title: '标题', width:200}
			,{field: '', title: '操作',templet:'<div><a class="sa_sl_link" lay-event="chose">选择</a></div>'}
		];
		
		if(d.param.mult)
		{
			page_config.cols.unshift({field: '', title: '', width:50, type:'checkbox'});
			page_config.pagebar = [{
				title:'批量选择',
				classname:'layui-btn-disabled sa_sl_del_all',
				func:function(cfg){
					//添加默认打开新页面
					let selected = layui.sa_table.checkStatus(cfg.table.id);
					if(selected.data.length > 0)
					{
						layui.sa.close(selected.data,firstIndex);
					}else
					{
						layui.layer.msg('请勾选');
					}
				}
			}];
		}
		
		sl.render(page_config);
		
	});
}
</script>